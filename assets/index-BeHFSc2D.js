var pE=Object.defineProperty;var kA=d=>{throw TypeError(d)};var gE=(d,t,e)=>t in d?pE(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var yt=(d,t,e)=>gE(d,typeof t!="symbol"?t+"":t,e),Lm=(d,t,e)=>t.has(d)||kA("Cannot "+e);var a=(d,t,e)=>(Lm(d,t,"read from private field"),e?e.call(d):t.get(d)),_=(d,t,e)=>t.has(d)?kA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),A=(d,t,e,i)=>(Lm(d,t,"write to private field"),i?i.call(d,e):t.set(d,e),e),E=(d,t,e)=>(Lm(d,t,"access private method"),e);var cn=(d,t,e,i)=>({set _(r){A(d,t,r,e)},get _(){return a(d,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Im={exports:{}},ac={},Nm={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function mE(){if(TA)return Rt;TA=1;var d=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function k(I,H,ct){this.props=I,this.context=H,this.refs=x,this.updater=ct||S}k.prototype.isReactComponent={},k.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=k.prototype;function L(I,H,ct){this.props=I,this.context=H,this.refs=x,this.updater=ct||S}var O=L.prototype=new T;O.constructor=L,C(O,k.prototype),O.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,j={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Q(I,H,ct){var _t,Pt={},At=null,mt=null;if(H!=null)for(_t in H.ref!==void 0&&(mt=H.ref),H.key!==void 0&&(At=""+H.key),H)z.call(H,_t)&&!B.hasOwnProperty(_t)&&(Pt[_t]=H[_t]);var It=arguments.length-2;if(It===1)Pt.children=ct;else if(1<It){for(var qt=Array(It),an=0;an<It;an++)qt[an]=arguments[an+2];Pt.children=qt}if(I&&I.defaultProps)for(_t in It=I.defaultProps,It)Pt[_t]===void 0&&(Pt[_t]=It[_t]);return{$$typeof:d,type:I,key:At,ref:mt,props:Pt,_owner:j.current}}function rt(I,H){return{$$typeof:d,type:I.type,key:H,ref:I.ref,props:I.props,_owner:I._owner}}function wt(I){return typeof I=="object"&&I!==null&&I.$$typeof===d}function ft(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ct){return H[ct]})}var Dt=/\/+/g;function Ft(I,H){return typeof I=="object"&&I!==null&&I.key!=null?ft(""+I.key):H.toString(36)}function Et(I,H,ct,_t,Pt){var At=typeof I;(At==="undefined"||At==="boolean")&&(I=null);var mt=!1;if(I===null)mt=!0;else switch(At){case"string":case"number":mt=!0;break;case"object":switch(I.$$typeof){case d:case t:mt=!0}}if(mt)return mt=I,Pt=Pt(mt),I=_t===""?"."+Ft(mt,0):_t,D(Pt)?(ct="",I!=null&&(ct=I.replace(Dt,"$&/")+"/"),Et(Pt,H,ct,"",function(an){return an})):Pt!=null&&(wt(Pt)&&(Pt=rt(Pt,ct+(!Pt.key||mt&&mt.key===Pt.key?"":(""+Pt.key).replace(Dt,"$&/")+"/")+I)),H.push(Pt)),1;if(mt=0,_t=_t===""?".":_t+":",D(I))for(var It=0;It<I.length;It++){At=I[It];var qt=_t+Ft(At,It);mt+=Et(At,H,ct,qt,Pt)}else if(qt=w(I),typeof qt=="function")for(I=qt.call(I),It=0;!(At=I.next()).done;)At=At.value,qt=_t+Ft(At,It++),mt+=Et(At,H,ct,qt,Pt);else if(At==="object")throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return mt}function Kt(I,H,ct){if(I==null)return I;var _t=[],Pt=0;return Et(I,_t,"","",function(At){return H.call(ct,At,Pt++)}),_t}function q(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(ct){(I._status===0||I._status===-1)&&(I._status=1,I._result=ct)},function(ct){(I._status===0||I._status===-1)&&(I._status=2,I._result=ct)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var J={current:null},X={transition:null},lt={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:X,ReactCurrentOwner:j};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Rt.Children={map:Kt,forEach:function(I,H,ct){Kt(I,function(){H.apply(this,arguments)},ct)},count:function(I){var H=0;return Kt(I,function(){H++}),H},toArray:function(I){return Kt(I,function(H){return H})||[]},only:function(I){if(!wt(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Rt.Component=k,Rt.Fragment=e,Rt.Profiler=r,Rt.PureComponent=L,Rt.StrictMode=i,Rt.Suspense=f,Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lt,Rt.act=Z,Rt.cloneElement=function(I,H,ct){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var _t=C({},I.props),Pt=I.key,At=I.ref,mt=I._owner;if(H!=null){if(H.ref!==void 0&&(At=H.ref,mt=j.current),H.key!==void 0&&(Pt=""+H.key),I.type&&I.type.defaultProps)var It=I.type.defaultProps;for(qt in H)z.call(H,qt)&&!B.hasOwnProperty(qt)&&(_t[qt]=H[qt]===void 0&&It!==void 0?It[qt]:H[qt])}var qt=arguments.length-2;if(qt===1)_t.children=ct;else if(1<qt){It=Array(qt);for(var an=0;an<qt;an++)It[an]=arguments[an+2];_t.children=It}return{$$typeof:d,type:I.type,key:Pt,ref:At,props:_t,_owner:mt}},Rt.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:o,_context:I},I.Consumer=I},Rt.createElement=Q,Rt.createFactory=function(I){var H=Q.bind(null,I);return H.type=I,H},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(I){return{$$typeof:c,render:I}},Rt.isValidElement=wt,Rt.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:q}},Rt.memo=function(I,H){return{$$typeof:p,type:I,compare:H===void 0?null:H}},Rt.startTransition=function(I){var H=X.transition;X.transition={};try{I()}finally{X.transition=H}},Rt.unstable_act=Z,Rt.useCallback=function(I,H){return J.current.useCallback(I,H)},Rt.useContext=function(I){return J.current.useContext(I)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(I){return J.current.useDeferredValue(I)},Rt.useEffect=function(I,H){return J.current.useEffect(I,H)},Rt.useId=function(){return J.current.useId()},Rt.useImperativeHandle=function(I,H,ct){return J.current.useImperativeHandle(I,H,ct)},Rt.useInsertionEffect=function(I,H){return J.current.useInsertionEffect(I,H)},Rt.useLayoutEffect=function(I,H){return J.current.useLayoutEffect(I,H)},Rt.useMemo=function(I,H){return J.current.useMemo(I,H)},Rt.useReducer=function(I,H,ct){return J.current.useReducer(I,H,ct)},Rt.useRef=function(I){return J.current.useRef(I)},Rt.useState=function(I){return J.current.useState(I)},Rt.useSyncExternalStore=function(I,H,ct){return J.current.useSyncExternalStore(I,H,ct)},Rt.useTransition=function(){return J.current.useTransition()},Rt.version="18.3.1",Rt}var PA;function hv(){return PA||(PA=1,Nm.exports=mE()),Nm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function yE(){if(RA)return ac;RA=1;var d=hv(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,v={},w=null,S=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(S=f.ref);for(m in f)i.call(f,m)&&!o.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:w,ref:S,props:v,_owner:r.current}}return ac.Fragment=e,ac.jsx=u,ac.jsxs=u,ac}var MA;function vE(){return MA||(MA=1,Im.exports=yE()),Im.exports}var Nt=vE(),Te=hv(),Sf={},Dm={exports:{}},En={},Fm={exports:{}},Om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA;function wE(){return LA||(LA=1,function(d){function t(X,lt){var Z=X.length;X.push(lt);t:for(;0<Z;){var I=Z-1>>>1,H=X[I];if(0<r(H,lt))X[I]=lt,X[Z]=H,Z=I;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var lt=X[0],Z=X.pop();if(Z!==lt){X[0]=Z;t:for(var I=0,H=X.length,ct=H>>>1;I<ct;){var _t=2*(I+1)-1,Pt=X[_t],At=_t+1,mt=X[At];if(0>r(Pt,Z))At<H&&0>r(mt,Pt)?(X[I]=mt,X[At]=Z,I=At):(X[I]=Pt,X[_t]=Z,I=_t);else if(At<H&&0>r(mt,Z))X[I]=mt,X[At]=Z,I=At;else break t}}return lt}function r(X,lt){var Z=X.sortIndex-lt.sortIndex;return Z!==0?Z:X.id-lt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,w=3,S=!1,C=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(X){for(var lt=e(p);lt!==null;){if(lt.callback===null)i(p);else if(lt.startTime<=X)i(p),lt.sortIndex=lt.expirationTime,t(f,lt);else break;lt=e(p)}}function D(X){if(x=!1,O(X),!C)if(e(f)!==null)C=!0,q(z);else{var lt=e(p);lt!==null&&J(D,lt.startTime-X)}}function z(X,lt){C=!1,x&&(x=!1,T(Q),Q=-1),S=!0;var Z=w;try{for(O(lt),v=e(f);v!==null&&(!(v.expirationTime>lt)||X&&!ft());){var I=v.callback;if(typeof I=="function"){v.callback=null,w=v.priorityLevel;var H=I(v.expirationTime<=lt);lt=d.unstable_now(),typeof H=="function"?v.callback=H:v===e(f)&&i(f),O(lt)}else i(f);v=e(f)}if(v!==null)var ct=!0;else{var _t=e(p);_t!==null&&J(D,_t.startTime-lt),ct=!1}return ct}finally{v=null,w=Z,S=!1}}var j=!1,B=null,Q=-1,rt=5,wt=-1;function ft(){return!(d.unstable_now()-wt<rt)}function Dt(){if(B!==null){var X=d.unstable_now();wt=X;var lt=!0;try{lt=B(!0,X)}finally{lt?Ft():(j=!1,B=null)}}else j=!1}var Ft;if(typeof L=="function")Ft=function(){L(Dt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,Kt=Et.port2;Et.port1.onmessage=Dt,Ft=function(){Kt.postMessage(null)}}else Ft=function(){k(Dt,0)};function q(X){B=X,j||(j=!0,Ft())}function J(X,lt){Q=k(function(){X(d.unstable_now())},lt)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(X){X.callback=null},d.unstable_continueExecution=function(){C||S||(C=!0,q(z))},d.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):rt=0<X?Math.floor(1e3/X):5},d.unstable_getCurrentPriorityLevel=function(){return w},d.unstable_getFirstCallbackNode=function(){return e(f)},d.unstable_next=function(X){switch(w){case 1:case 2:case 3:var lt=3;break;default:lt=w}var Z=w;w=lt;try{return X()}finally{w=Z}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(X,lt){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=w;w=X;try{return lt()}finally{w=Z}},d.unstable_scheduleCallback=function(X,lt,Z){var I=d.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?I+Z:I):Z=I,X){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,X={id:m++,callback:lt,priorityLevel:X,startTime:Z,expirationTime:H,sortIndex:-1},Z>I?(X.sortIndex=Z,t(p,X),e(f)===null&&X===e(p)&&(x?(T(Q),Q=-1):x=!0,J(D,Z-I))):(X.sortIndex=H,t(f,X),C||S||(C=!0,q(z))),X},d.unstable_shouldYield=ft,d.unstable_wrapCallback=function(X){var lt=w;return function(){var Z=w;w=lt;try{return X.apply(this,arguments)}finally{w=Z}}}}(Om)),Om}var IA;function AE(){return IA||(IA=1,Fm.exports=wE()),Fm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function SE(){if(NA)return En;NA=1;var d=hv(),t=AE();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return f.call(v,n)?!0:f.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function S(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function C(n,s,l,h){if(s===null||typeof s>"u"||S(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(n,s,l,h,g,y,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=b}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new x(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];k[s]=new x(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new x(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new x(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new x(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new x(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new x(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new x(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new x(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function L(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,L);k[s]=new x(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,L);k[s]=new x(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,L);k[s]=new x(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new x(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new x(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,l,h){var g=k.hasOwnProperty(s)?k[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,l,g,h)&&(l=null),h||g===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,h=g.attributeNamespace,l===null?n.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var D=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),j=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),rt=Symbol.for("react.profiler"),wt=Symbol.for("react.provider"),ft=Symbol.for("react.context"),Dt=Symbol.for("react.forward_ref"),Ft=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),Kt=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),X=Symbol.iterator;function lt(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var Z=Object.assign,I;function H(n){if(I===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+n}var ct=!1;function _t(n,s){if(!n||ct)return"";ct=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){h=$}n.call(s.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var g=$.stack.split(`
`),y=h.stack.split(`
`),b=g.length-1,P=y.length-1;1<=b&&0<=P&&g[b]!==y[P];)P--;for(;1<=b&&0<=P;b--,P--)if(g[b]!==y[P]){if(b!==1||P!==1)do if(b--,P--,0>P||g[b]!==y[P]){var R=`
`+g[b].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=b&&0<=P);break}}}finally{ct=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?H(n):""}function Pt(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=_t(n.type,!1),n;case 11:return n=_t(n.type.render,!1),n;case 1:return n=_t(n.type,!0),n;default:return""}}function At(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case j:return"Portal";case rt:return"Profiler";case Q:return"StrictMode";case Ft:return"Suspense";case Et:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ft:return(n.displayName||"Context")+".Consumer";case wt:return(n._context.displayName||"Context")+".Provider";case Dt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Kt:return s=n.displayName||null,s!==null?s:At(n.type)||"Memo";case q:s=n._payload,n=n._init;try{return At(n(s))}catch{}}return null}function mt(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return At(s);case 8:return s===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function It(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function an(n){var s=qt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(b){h=""+b,y.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function cd(n){n._valueTracker||(n._valueTracker=an(n))}function Iv(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=qt(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function hd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function zp(n,s){var l=s.checked;return Z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Nv(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=It(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Dv(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function Hp(n,s){Dv(n,s);var l=It(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Bp(n,s.type,l):s.hasOwnProperty("defaultValue")&&Bp(n,s.type,It(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Fv(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Bp(n,s,l){(s!=="number"||hd(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var bu=Array.isArray;function La(n,s,l,h){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+It(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function jp(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return Z({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ov(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(bu(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:It(l)}}function $v(n,s){var l=It(s.value),h=It(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function zv(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Hv(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Hv(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dd,Bv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function _u(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w1=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(n){w1.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Eu[s]=Eu[n]})});function jv(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Eu.hasOwnProperty(n)&&Eu[n]?(""+s).trim():s+"px"}function Uv(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,g=jv(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,g):n[l]=g}}var A1=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vp(n,s){if(s){if(A1[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Gp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wp=null;function Xp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qp=null,Ia=null,Na=null;function Vv(n){if(n=Wu(n)){if(typeof qp!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Dd(s),qp(n.stateNode,n.type,s))}}function Gv(n){Ia?Na?Na.push(n):Na=[n]:Ia=n}function Wv(){if(Ia){var n=Ia,s=Na;if(Na=Ia=null,Vv(n),s)for(n=0;n<s.length;n++)Vv(s[n])}}function Xv(n,s){return n(s)}function qv(){}var Yp=!1;function Yv(n,s,l){if(Yp)return n(s,l);Yp=!0;try{return Xv(n,s,l)}finally{Yp=!1,(Ia!==null||Na!==null)&&(qv(),Wv())}}function Cu(n,s){var l=n.stateNode;if(l===null)return null;var h=Dd(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Kp=!1;if(c)try{var xu={};Object.defineProperty(xu,"passive",{get:function(){Kp=!0}}),window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Kp=!1}function S1(n,s,l,h,g,y,b,P,R){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(V){this.onError(V)}}var ku=!1,fd=null,pd=!1,Qp=null,b1={onError:function(n){ku=!0,fd=n}};function _1(n,s,l,h,g,y,b,P,R){ku=!1,fd=null,S1.apply(b1,arguments)}function E1(n,s,l,h,g,y,b,P,R){if(_1.apply(this,arguments),ku){if(ku){var $=fd;ku=!1,fd=null}else throw Error(e(198));pd||(pd=!0,Qp=$)}}function io(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function Kv(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Qv(n){if(io(n)!==n)throw Error(e(188))}function C1(n){var s=n.alternate;if(!s){if(s=io(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return Qv(g),n;if(y===h)return Qv(g),s;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=g,h=y;else{for(var b=!1,P=g.child;P;){if(P===l){b=!0,l=g,h=y;break}if(P===h){b=!0,h=g,l=y;break}P=P.sibling}if(!b){for(P=y.child;P;){if(P===l){b=!0,l=y,h=g;break}if(P===h){b=!0,h=y,l=g;break}P=P.sibling}if(!b)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function Zv(n){return n=C1(n),n!==null?Jv(n):null}function Jv(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Jv(n);if(s!==null)return s;n=n.sibling}return null}var t0=t.unstable_scheduleCallback,e0=t.unstable_cancelCallback,x1=t.unstable_shouldYield,k1=t.unstable_requestPaint,fe=t.unstable_now,T1=t.unstable_getCurrentPriorityLevel,Zp=t.unstable_ImmediatePriority,n0=t.unstable_UserBlockingPriority,gd=t.unstable_NormalPriority,P1=t.unstable_LowPriority,i0=t.unstable_IdlePriority,md=null,zi=null;function R1(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(md,n,void 0,(n.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:I1,M1=Math.log,L1=Math.LN2;function I1(n){return n>>>=0,n===0?32:31-(M1(n)/L1|0)|0}var yd=64,vd=4194304;function Tu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wd(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,b=l&268435455;if(b!==0){var P=b&~g;P!==0?h=Tu(P):(y&=b,y!==0&&(h=Tu(y)))}else b=l&~g,b!==0?h=Tu(b):y!==0&&(h=Tu(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if(h&4&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-gi(s),g=1<<l,h|=n[l],s&=~g;return h}function N1(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D1(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var b=31-gi(y),P=1<<b,R=g[b];R===-1?(!(P&l)||P&h)&&(g[b]=N1(P,s)):R<=s&&(n.expiredLanes|=P),y&=~P}}function Jp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function s0(){var n=yd;return yd<<=1,!(yd&4194240)&&(yd=64),n}function tg(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Pu(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-gi(s),n[s]=l}function F1(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-gi(l),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,l&=~y}}function eg(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-gi(l),g=1<<h;g&s|n[h]&s&&(n[h]|=s),l&=~g}}var Ut=0;function r0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var o0,ng,a0,l0,u0,ig=!1,Ad=[],er=null,nr=null,ir=null,Ru=new Map,Mu=new Map,sr=[],O1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c0(n,s){switch(n){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(s.pointerId)}}function Lu(n,s,l,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Wu(s),s!==null&&ng(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function $1(n,s,l,h,g){switch(s){case"focusin":return er=Lu(er,n,s,l,h,g),!0;case"dragenter":return nr=Lu(nr,n,s,l,h,g),!0;case"mouseover":return ir=Lu(ir,n,s,l,h,g),!0;case"pointerover":var y=g.pointerId;return Ru.set(y,Lu(Ru.get(y)||null,n,s,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Mu.set(y,Lu(Mu.get(y)||null,n,s,l,h,g)),!0}return!1}function h0(n){var s=so(n.target);if(s!==null){var l=io(s);if(l!==null){if(s=l.tag,s===13){if(s=Kv(l),s!==null){n.blockedOn=s,u0(n.priority,function(){a0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=rg(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Wp=h,l.target.dispatchEvent(h),Wp=null}else return s=Wu(l),s!==null&&ng(s),n.blockedOn=l,!1;s.shift()}return!0}function d0(n,s,l){Sd(n)&&l.delete(s)}function z1(){ig=!1,er!==null&&Sd(er)&&(er=null),nr!==null&&Sd(nr)&&(nr=null),ir!==null&&Sd(ir)&&(ir=null),Ru.forEach(d0),Mu.forEach(d0)}function Iu(n,s){n.blockedOn===s&&(n.blockedOn=null,ig||(ig=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z1)))}function Nu(n){function s(g){return Iu(g,n)}if(0<Ad.length){Iu(Ad[0],n);for(var l=1;l<Ad.length;l++){var h=Ad[l];h.blockedOn===n&&(h.blockedOn=null)}}for(er!==null&&Iu(er,n),nr!==null&&Iu(nr,n),ir!==null&&Iu(ir,n),Ru.forEach(s),Mu.forEach(s),l=0;l<sr.length;l++)h=sr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<sr.length&&(l=sr[0],l.blockedOn===null);)h0(l),l.blockedOn===null&&sr.shift()}var Da=D.ReactCurrentBatchConfig,bd=!0;function H1(n,s,l,h){var g=Ut,y=Da.transition;Da.transition=null;try{Ut=1,sg(n,s,l,h)}finally{Ut=g,Da.transition=y}}function B1(n,s,l,h){var g=Ut,y=Da.transition;Da.transition=null;try{Ut=4,sg(n,s,l,h)}finally{Ut=g,Da.transition=y}}function sg(n,s,l,h){if(bd){var g=rg(n,s,l,h);if(g===null)bg(n,s,h,_d,l),c0(n,h);else if($1(g,n,s,l,h))h.stopPropagation();else if(c0(n,h),s&4&&-1<O1.indexOf(n)){for(;g!==null;){var y=Wu(g);if(y!==null&&o0(y),y=rg(n,s,l,h),y===null&&bg(n,s,h,_d,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else bg(n,s,h,null,l)}}var _d=null;function rg(n,s,l,h){if(_d=null,n=Xp(h),n=so(n),n!==null)if(s=io(n),s===null)n=null;else if(l=s.tag,l===13){if(n=Kv(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return _d=n,null}function f0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T1()){case Zp:return 1;case n0:return 4;case gd:case P1:return 16;case i0:return 536870912;default:return 16}default:return 16}}var rr=null,og=null,Ed=null;function p0(){if(Ed)return Ed;var n,s=og,l=s.length,h,g="value"in rr?rr.value:rr.textContent,y=g.length;for(n=0;n<l&&s[n]===g[n];n++);var b=l-n;for(h=1;h<=b&&s[l-h]===g[y-h];h++);return Ed=g.slice(n,1<h?1-h:void 0)}function Cd(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function xd(){return!0}function g0(){return!1}function Ln(n){function s(l,h,g,y,b){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=b,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(l=n[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xd:g0,this.isPropagationStopped=g0,this}return Z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xd)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xd)},persist:function(){},isPersistent:xd}),s}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ag=Ln(Fa),Du=Z({},Fa,{view:0,detail:0}),j1=Ln(Du),lg,ug,Fu,kd=Z({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fu&&(Fu&&n.type==="mousemove"?(lg=n.screenX-Fu.screenX,ug=n.screenY-Fu.screenY):ug=lg=0,Fu=n),lg)},movementY:function(n){return"movementY"in n?n.movementY:ug}}),m0=Ln(kd),U1=Z({},kd,{dataTransfer:0}),V1=Ln(U1),G1=Z({},Du,{relatedTarget:0}),cg=Ln(G1),W1=Z({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),X1=Ln(W1),q1=Z({},Fa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Y1=Ln(q1),K1=Z({},Fa,{data:0}),y0=Ln(K1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=J1[n])?!!s[n]:!1}function hg(){return t_}var e_=Z({},Du,{key:function(n){if(n.key){var s=Q1[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Cd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Z1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(n){return n.type==="keypress"?Cd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Cd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),n_=Ln(e_),i_=Z({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v0=Ln(i_),s_=Z({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),r_=Ln(s_),o_=Z({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),a_=Ln(o_),l_=Z({},kd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u_=Ln(l_),c_=[9,13,27,32],dg=c&&"CompositionEvent"in window,Ou=null;c&&"documentMode"in document&&(Ou=document.documentMode);var h_=c&&"TextEvent"in window&&!Ou,w0=c&&(!dg||Ou&&8<Ou&&11>=Ou),A0=" ",S0=!1;function b0(n,s){switch(n){case"keyup":return c_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Oa=!1;function d_(n,s){switch(n){case"compositionend":return _0(s);case"keypress":return s.which!==32?null:(S0=!0,A0);case"textInput":return n=s.data,n===A0&&S0?null:n;default:return null}}function f_(n,s){if(Oa)return n==="compositionend"||!dg&&b0(n,s)?(n=p0(),Ed=og=rr=null,Oa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return w0&&s.locale!=="ko"?null:s.data;default:return null}}var p_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!p_[n.type]:s==="textarea"}function C0(n,s,l,h){Gv(h),s=Ld(s,"onChange"),0<s.length&&(l=new ag("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var $u=null,zu=null;function g_(n){U0(n,0)}function Td(n){var s=ja(n);if(Iv(s))return n}function m_(n,s){if(n==="change")return s}var x0=!1;if(c){var fg;if(c){var pg="oninput"in document;if(!pg){var k0=document.createElement("div");k0.setAttribute("oninput","return;"),pg=typeof k0.oninput=="function"}fg=pg}else fg=!1;x0=fg&&(!document.documentMode||9<document.documentMode)}function T0(){$u&&($u.detachEvent("onpropertychange",P0),zu=$u=null)}function P0(n){if(n.propertyName==="value"&&Td(zu)){var s=[];C0(s,zu,n,Xp(n)),Yv(g_,s)}}function y_(n,s,l){n==="focusin"?(T0(),$u=s,zu=l,$u.attachEvent("onpropertychange",P0)):n==="focusout"&&T0()}function v_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Td(zu)}function w_(n,s){if(n==="click")return Td(s)}function A_(n,s){if(n==="input"||n==="change")return Td(s)}function S_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var mi=typeof Object.is=="function"?Object.is:S_;function Hu(n,s){if(mi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!f.call(s,g)||!mi(n[g],s[g]))return!1}return!0}function R0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function M0(n,s){var l=R0(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=R0(l)}}function L0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?L0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function I0(){for(var n=window,s=hd();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=hd(n.document)}return s}function gg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function b_(n){var s=I0(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&L0(l.ownerDocument.documentElement,l)){if(h!==null&&gg(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=M0(l,y);var b=M0(l,h);g&&b&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==b.node||n.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var __=c&&"documentMode"in document&&11>=document.documentMode,$a=null,mg=null,Bu=null,yg=!1;function N0(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;yg||$a==null||$a!==hd(h)||(h=$a,"selectionStart"in h&&gg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Bu&&Hu(Bu,h)||(Bu=h,h=Ld(mg,"onSelect"),0<h.length&&(s=new ag("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=$a)))}function Pd(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var za={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},vg={},D0={};c&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Rd(n){if(vg[n])return vg[n];if(!za[n])return n;var s=za[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in D0)return vg[n]=s[l];return n}var F0=Rd("animationend"),O0=Rd("animationiteration"),$0=Rd("animationstart"),z0=Rd("transitionend"),H0=new Map,B0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(n,s){H0.set(n,s),o(s,[n])}for(var wg=0;wg<B0.length;wg++){var Ag=B0[wg],E_=Ag.toLowerCase(),C_=Ag[0].toUpperCase()+Ag.slice(1);or(E_,"on"+C_)}or(F0,"onAnimationEnd"),or(O0,"onAnimationIteration"),or($0,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(z0,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function j0(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,E1(h,s,void 0,n),n.currentTarget=null}function U0(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var b=h.length-1;0<=b;b--){var P=h[b],R=P.instance,$=P.currentTarget;if(P=P.listener,R!==y&&g.isPropagationStopped())break t;j0(g,P,$),y=R}else for(b=0;b<h.length;b++){if(P=h[b],R=P.instance,$=P.currentTarget,P=P.listener,R!==y&&g.isPropagationStopped())break t;j0(g,P,$),y=R}}}if(pd)throw n=Qp,pd=!1,Qp=null,n}function Jt(n,s){var l=s[Tg];l===void 0&&(l=s[Tg]=new Set);var h=n+"__bubble";l.has(h)||(V0(s,n,2,!1),l.add(h))}function Sg(n,s,l){var h=0;s&&(h|=4),V0(l,n,h,s)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Uu(n){if(!n[Md]){n[Md]=!0,i.forEach(function(l){l!=="selectionchange"&&(x_.has(l)||Sg(l,!1,n),Sg(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Md]||(s[Md]=!0,Sg("selectionchange",!1,s))}}function V0(n,s,l,h){switch(f0(s)){case 1:var g=H1;break;case 4:g=B1;break;default:g=sg}l=g.bind(null,s,l,n),g=void 0,!Kp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function bg(n,s,l,h,g){var y=h;if(!(s&1)&&!(s&2)&&h!==null)t:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var P=h.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(b===4)for(b=h.return;b!==null;){var R=b.tag;if((R===3||R===4)&&(R=b.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;b=b.return}for(;P!==null;){if(b=so(P),b===null)return;if(R=b.tag,R===5||R===6){h=y=b;continue t}P=P.parentNode}}h=h.return}Yv(function(){var $=y,V=Xp(l),G=[];t:{var U=H0.get(n);if(U!==void 0){var tt=ag,ot=n;switch(n){case"keypress":if(Cd(l)===0)break t;case"keydown":case"keyup":tt=n_;break;case"focusin":ot="focus",tt=cg;break;case"focusout":ot="blur",tt=cg;break;case"beforeblur":case"afterblur":tt=cg;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=V1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=r_;break;case F0:case O0:case $0:tt=X1;break;case z0:tt=a_;break;case"scroll":tt=j1;break;case"wheel":tt=u_;break;case"copy":case"cut":case"paste":tt=Y1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=v0}var at=(s&4)!==0,pe=!at&&n==="scroll",N=at?U!==null?U+"Capture":null:U;at=[];for(var M=$,F;M!==null;){F=M;var W=F.stateNode;if(F.tag===5&&W!==null&&(F=W,N!==null&&(W=Cu(M,N),W!=null&&at.push(Vu(M,W,F)))),pe)break;M=M.return}0<at.length&&(U=new tt(U,ot,null,l,V),G.push({event:U,listeners:at}))}}if(!(s&7)){t:{if(U=n==="mouseover"||n==="pointerover",tt=n==="mouseout"||n==="pointerout",U&&l!==Wp&&(ot=l.relatedTarget||l.fromElement)&&(so(ot)||ot[hs]))break t;if((tt||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,tt?(ot=l.relatedTarget||l.toElement,tt=$,ot=ot?so(ot):null,ot!==null&&(pe=io(ot),ot!==pe||ot.tag!==5&&ot.tag!==6)&&(ot=null)):(tt=null,ot=$),tt!==ot)){if(at=m0,W="onMouseLeave",N="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(at=v0,W="onPointerLeave",N="onPointerEnter",M="pointer"),pe=tt==null?U:ja(tt),F=ot==null?U:ja(ot),U=new at(W,M+"leave",tt,l,V),U.target=pe,U.relatedTarget=F,W=null,so(V)===$&&(at=new at(N,M+"enter",ot,l,V),at.target=F,at.relatedTarget=pe,W=at),pe=W,tt&&ot)e:{for(at=tt,N=ot,M=0,F=at;F;F=Ha(F))M++;for(F=0,W=N;W;W=Ha(W))F++;for(;0<M-F;)at=Ha(at),M--;for(;0<F-M;)N=Ha(N),F--;for(;M--;){if(at===N||N!==null&&at===N.alternate)break e;at=Ha(at),N=Ha(N)}at=null}else at=null;tt!==null&&G0(G,U,tt,at,!1),ot!==null&&pe!==null&&G0(G,pe,ot,at,!0)}}t:{if(U=$?ja($):window,tt=U.nodeName&&U.nodeName.toLowerCase(),tt==="select"||tt==="input"&&U.type==="file")var ut=m_;else if(E0(U))if(x0)ut=A_;else{ut=v_;var pt=y_}else(tt=U.nodeName)&&tt.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ut=w_);if(ut&&(ut=ut(n,$))){C0(G,ut,l,V);break t}pt&&pt(n,U,$),n==="focusout"&&(pt=U._wrapperState)&&pt.controlled&&U.type==="number"&&Bp(U,"number",U.value)}switch(pt=$?ja($):window,n){case"focusin":(E0(pt)||pt.contentEditable==="true")&&($a=pt,mg=$,Bu=null);break;case"focusout":Bu=mg=$a=null;break;case"mousedown":yg=!0;break;case"contextmenu":case"mouseup":case"dragend":yg=!1,N0(G,l,V);break;case"selectionchange":if(__)break;case"keydown":case"keyup":N0(G,l,V)}var gt;if(dg)t:{switch(n){case"compositionstart":var St="onCompositionStart";break t;case"compositionend":St="onCompositionEnd";break t;case"compositionupdate":St="onCompositionUpdate";break t}St=void 0}else Oa?b0(n,l)&&(St="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(St="onCompositionStart");St&&(w0&&l.locale!=="ko"&&(Oa||St!=="onCompositionStart"?St==="onCompositionEnd"&&Oa&&(gt=p0()):(rr=V,og="value"in rr?rr.value:rr.textContent,Oa=!0)),pt=Ld($,St),0<pt.length&&(St=new y0(St,n,null,l,V),G.push({event:St,listeners:pt}),gt?St.data=gt:(gt=_0(l),gt!==null&&(St.data=gt)))),(gt=h_?d_(n,l):f_(n,l))&&($=Ld($,"onBeforeInput"),0<$.length&&(V=new y0("onBeforeInput","beforeinput",null,l,V),G.push({event:V,listeners:$}),V.data=gt))}U0(G,s)})}function Vu(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Ld(n,s){for(var l=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=Cu(n,l),y!=null&&h.unshift(Vu(n,y,g)),y=Cu(n,s),y!=null&&h.push(Vu(n,y,g))),n=n.return}return h}function Ha(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function G0(n,s,l,h,g){for(var y=s._reactName,b=[];l!==null&&l!==h;){var P=l,R=P.alternate,$=P.stateNode;if(R!==null&&R===h)break;P.tag===5&&$!==null&&(P=$,g?(R=Cu(l,y),R!=null&&b.unshift(Vu(l,R,P))):g||(R=Cu(l,y),R!=null&&b.push(Vu(l,R,P)))),l=l.return}b.length!==0&&n.push({event:s,listeners:b})}var k_=/\r\n?/g,T_=/\u0000|\uFFFD/g;function W0(n){return(typeof n=="string"?n:""+n).replace(k_,`
`).replace(T_,"")}function Id(n,s,l){if(s=W0(s),W0(n)!==s&&l)throw Error(e(425))}function Nd(){}var _g=null,Eg=null;function Cg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xg=typeof setTimeout=="function"?setTimeout:void 0,P_=typeof clearTimeout=="function"?clearTimeout:void 0,X0=typeof Promise=="function"?Promise:void 0,R_=typeof queueMicrotask=="function"?queueMicrotask:typeof X0<"u"?function(n){return X0.resolve(null).then(n).catch(M_)}:xg;function M_(n){setTimeout(function(){throw n})}function kg(n,s){var l=s,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(h===0){n.removeChild(g),Nu(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=g}while(l);Nu(s)}function ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function q0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Ba,Gu="__reactProps$"+Ba,hs="__reactContainer$"+Ba,Tg="__reactEvents$"+Ba,L_="__reactListeners$"+Ba,I_="__reactHandles$"+Ba;function so(n){var s=n[Hi];if(s)return s;for(var l=n.parentNode;l;){if(s=l[hs]||l[Hi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=q0(n);n!==null;){if(l=n[Hi])return l;n=q0(n)}return s}n=l,l=n.parentNode}return null}function Wu(n){return n=n[Hi]||n[hs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ja(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Dd(n){return n[Gu]||null}var Pg=[],Ua=-1;function lr(n){return{current:n}}function te(n){0>Ua||(n.current=Pg[Ua],Pg[Ua]=null,Ua--)}function Qt(n,s){Ua++,Pg[Ua]=n.current,n.current=s}var ur={},Xe=lr(ur),wn=lr(!1),ro=ur;function Va(n,s){var l=n.type.contextTypes;if(!l)return ur;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in l)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function An(n){return n=n.childContextTypes,n!=null}function Fd(){te(wn),te(Xe)}function Y0(n,s,l){if(Xe.current!==ur)throw Error(e(168));Qt(Xe,s),Qt(wn,l)}function K0(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(e(108,mt(n)||"Unknown",g));return Z({},l,h)}function Od(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ur,ro=Xe.current,Qt(Xe,n),Qt(wn,wn.current),!0}function Q0(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=K0(n,s,ro),h.__reactInternalMemoizedMergedChildContext=n,te(wn),te(Xe),Qt(Xe,n)):te(wn),Qt(wn,l)}var ds=null,$d=!1,Rg=!1;function Z0(n){ds===null?ds=[n]:ds.push(n)}function N_(n){$d=!0,Z0(n)}function cr(){if(!Rg&&ds!==null){Rg=!0;var n=0,s=Ut;try{var l=ds;for(Ut=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}ds=null,$d=!1}catch(g){throw ds!==null&&(ds=ds.slice(n+1)),t0(Zp,cr),g}finally{Ut=s,Rg=!1}}return null}var Ga=[],Wa=0,zd=null,Hd=0,Zn=[],Jn=0,oo=null,fs=1,ps="";function ao(n,s){Ga[Wa++]=Hd,Ga[Wa++]=zd,zd=n,Hd=s}function J0(n,s,l){Zn[Jn++]=fs,Zn[Jn++]=ps,Zn[Jn++]=oo,oo=n;var h=fs;n=ps;var g=32-gi(h)-1;h&=~(1<<g),l+=1;var y=32-gi(s)+g;if(30<y){var b=g-g%5;y=(h&(1<<b)-1).toString(32),h>>=b,g-=b,fs=1<<32-gi(s)+g|l<<g|h,ps=y+n}else fs=1<<y|l<<g|h,ps=n}function Mg(n){n.return!==null&&(ao(n,1),J0(n,1,0))}function Lg(n){for(;n===zd;)zd=Ga[--Wa],Ga[Wa]=null,Hd=Ga[--Wa],Ga[Wa]=null;for(;n===oo;)oo=Zn[--Jn],Zn[Jn]=null,ps=Zn[--Jn],Zn[Jn]=null,fs=Zn[--Jn],Zn[Jn]=null}var In=null,Nn=null,ne=!1,yi=null;function tw(n,s){var l=ii(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function ew(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,In=n,Nn=ar(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,In=n,Nn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=oo!==null?{id:fs,overflow:ps}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ii(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,In=n,Nn=null,!0):!1;default:return!1}}function Ig(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ng(n){if(ne){var s=Nn;if(s){var l=s;if(!ew(n,s)){if(Ig(n))throw Error(e(418));s=ar(l.nextSibling);var h=In;s&&ew(n,s)?tw(h,l):(n.flags=n.flags&-4097|2,ne=!1,In=n)}}else{if(Ig(n))throw Error(e(418));n.flags=n.flags&-4097|2,ne=!1,In=n}}}function nw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function Bd(n){if(n!==In)return!1;if(!ne)return nw(n),ne=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Cg(n.type,n.memoizedProps)),s&&(s=Nn)){if(Ig(n))throw iw(),Error(e(418));for(;s;)tw(n,s),s=ar(s.nextSibling)}if(nw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Nn=ar(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Nn=null}}else Nn=In?ar(n.stateNode.nextSibling):null;return!0}function iw(){for(var n=Nn;n;)n=ar(n.nextSibling)}function Xa(){Nn=In=null,ne=!1}function Dg(n){yi===null?yi=[n]:yi.push(n)}var D_=D.ReactCurrentBatchConfig;function Xu(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(b){var P=g.refs;b===null?delete P[y]:P[y]=b},s._stringRef=y,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function jd(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function sw(n){var s=n._init;return s(n._payload)}function rw(n){function s(N,M){if(n){var F=N.deletions;F===null?(N.deletions=[M],N.flags|=16):F.push(M)}}function l(N,M){if(!n)return null;for(;M!==null;)s(N,M),M=M.sibling;return null}function h(N,M){for(N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function g(N,M){return N=vr(N,M),N.index=0,N.sibling=null,N}function y(N,M,F){return N.index=F,n?(F=N.alternate,F!==null?(F=F.index,F<M?(N.flags|=2,M):F):(N.flags|=2,M)):(N.flags|=1048576,M)}function b(N){return n&&N.alternate===null&&(N.flags|=2),N}function P(N,M,F,W){return M===null||M.tag!==6?(M=xm(F,N.mode,W),M.return=N,M):(M=g(M,F),M.return=N,M)}function R(N,M,F,W){var ut=F.type;return ut===B?V(N,M,F.props.children,W,F.key):M!==null&&(M.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===q&&sw(ut)===M.type)?(W=g(M,F.props),W.ref=Xu(N,M,F),W.return=N,W):(W=ff(F.type,F.key,F.props,null,N.mode,W),W.ref=Xu(N,M,F),W.return=N,W)}function $(N,M,F,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=km(F,N.mode,W),M.return=N,M):(M=g(M,F.children||[]),M.return=N,M)}function V(N,M,F,W,ut){return M===null||M.tag!==7?(M=mo(F,N.mode,W,ut),M.return=N,M):(M=g(M,F),M.return=N,M)}function G(N,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return M=xm(""+M,N.mode,F),M.return=N,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return F=ff(M.type,M.key,M.props,null,N.mode,F),F.ref=Xu(N,null,M),F.return=N,F;case j:return M=km(M,N.mode,F),M.return=N,M;case q:var W=M._init;return G(N,W(M._payload),F)}if(bu(M)||lt(M))return M=mo(M,N.mode,F,null),M.return=N,M;jd(N,M)}return null}function U(N,M,F,W){var ut=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ut!==null?null:P(N,M,""+F,W);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case z:return F.key===ut?R(N,M,F,W):null;case j:return F.key===ut?$(N,M,F,W):null;case q:return ut=F._init,U(N,M,ut(F._payload),W)}if(bu(F)||lt(F))return ut!==null?null:V(N,M,F,W,null);jd(N,F)}return null}function tt(N,M,F,W,ut){if(typeof W=="string"&&W!==""||typeof W=="number")return N=N.get(F)||null,P(M,N,""+W,ut);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case z:return N=N.get(W.key===null?F:W.key)||null,R(M,N,W,ut);case j:return N=N.get(W.key===null?F:W.key)||null,$(M,N,W,ut);case q:var pt=W._init;return tt(N,M,F,pt(W._payload),ut)}if(bu(W)||lt(W))return N=N.get(F)||null,V(M,N,W,ut,null);jd(M,W)}return null}function ot(N,M,F,W){for(var ut=null,pt=null,gt=M,St=M=0,Le=null;gt!==null&&St<F.length;St++){gt.index>St?(Le=gt,gt=null):Le=gt.sibling;var Ht=U(N,gt,F[St],W);if(Ht===null){gt===null&&(gt=Le);break}n&&gt&&Ht.alternate===null&&s(N,gt),M=y(Ht,M,St),pt===null?ut=Ht:pt.sibling=Ht,pt=Ht,gt=Le}if(St===F.length)return l(N,gt),ne&&ao(N,St),ut;if(gt===null){for(;St<F.length;St++)gt=G(N,F[St],W),gt!==null&&(M=y(gt,M,St),pt===null?ut=gt:pt.sibling=gt,pt=gt);return ne&&ao(N,St),ut}for(gt=h(N,gt);St<F.length;St++)Le=tt(gt,N,St,F[St],W),Le!==null&&(n&&Le.alternate!==null&&gt.delete(Le.key===null?St:Le.key),M=y(Le,M,St),pt===null?ut=Le:pt.sibling=Le,pt=Le);return n&&gt.forEach(function(wr){return s(N,wr)}),ne&&ao(N,St),ut}function at(N,M,F,W){var ut=lt(F);if(typeof ut!="function")throw Error(e(150));if(F=ut.call(F),F==null)throw Error(e(151));for(var pt=ut=null,gt=M,St=M=0,Le=null,Ht=F.next();gt!==null&&!Ht.done;St++,Ht=F.next()){gt.index>St?(Le=gt,gt=null):Le=gt.sibling;var wr=U(N,gt,Ht.value,W);if(wr===null){gt===null&&(gt=Le);break}n&&gt&&wr.alternate===null&&s(N,gt),M=y(wr,M,St),pt===null?ut=wr:pt.sibling=wr,pt=wr,gt=Le}if(Ht.done)return l(N,gt),ne&&ao(N,St),ut;if(gt===null){for(;!Ht.done;St++,Ht=F.next())Ht=G(N,Ht.value,W),Ht!==null&&(M=y(Ht,M,St),pt===null?ut=Ht:pt.sibling=Ht,pt=Ht);return ne&&ao(N,St),ut}for(gt=h(N,gt);!Ht.done;St++,Ht=F.next())Ht=tt(gt,N,St,Ht.value,W),Ht!==null&&(n&&Ht.alternate!==null&&gt.delete(Ht.key===null?St:Ht.key),M=y(Ht,M,St),pt===null?ut=Ht:pt.sibling=Ht,pt=Ht);return n&&gt.forEach(function(fE){return s(N,fE)}),ne&&ao(N,St),ut}function pe(N,M,F,W){if(typeof F=="object"&&F!==null&&F.type===B&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case z:t:{for(var ut=F.key,pt=M;pt!==null;){if(pt.key===ut){if(ut=F.type,ut===B){if(pt.tag===7){l(N,pt.sibling),M=g(pt,F.props.children),M.return=N,N=M;break t}}else if(pt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===q&&sw(ut)===pt.type){l(N,pt.sibling),M=g(pt,F.props),M.ref=Xu(N,pt,F),M.return=N,N=M;break t}l(N,pt);break}else s(N,pt);pt=pt.sibling}F.type===B?(M=mo(F.props.children,N.mode,W,F.key),M.return=N,N=M):(W=ff(F.type,F.key,F.props,null,N.mode,W),W.ref=Xu(N,M,F),W.return=N,N=W)}return b(N);case j:t:{for(pt=F.key;M!==null;){if(M.key===pt)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){l(N,M.sibling),M=g(M,F.children||[]),M.return=N,N=M;break t}else{l(N,M);break}else s(N,M);M=M.sibling}M=km(F,N.mode,W),M.return=N,N=M}return b(N);case q:return pt=F._init,pe(N,M,pt(F._payload),W)}if(bu(F))return ot(N,M,F,W);if(lt(F))return at(N,M,F,W);jd(N,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,M!==null&&M.tag===6?(l(N,M.sibling),M=g(M,F),M.return=N,N=M):(l(N,M),M=xm(F,N.mode,W),M.return=N,N=M),b(N)):l(N,M)}return pe}var qa=rw(!0),ow=rw(!1),Ud=lr(null),Vd=null,Ya=null,Fg=null;function Og(){Fg=Ya=Vd=null}function $g(n){var s=Ud.current;te(Ud),n._currentValue=s}function zg(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function Ka(n,s){Vd=n,Fg=Ya=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Sn=!0),n.firstContext=null)}function ti(n){var s=n._currentValue;if(Fg!==n)if(n={context:n,memoizedValue:s,next:null},Ya===null){if(Vd===null)throw Error(e(308));Ya=n,Vd.dependencies={lanes:0,firstContext:n}}else Ya=Ya.next=n;return s}var lo=null;function Hg(n){lo===null?lo=[n]:lo.push(n)}function aw(n,s,l,h){var g=s.interleaved;return g===null?(l.next=l,Hg(s)):(l.next=g.next,g.next=l),s.interleaved=l,gs(n,h)}function gs(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var hr=!1;function Bg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lw(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function dr(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,$t&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,gs(n,l)}return g=h.interleaved,g===null?(s.next=s,Hg(h)):(s.next=g.next,g.next=s),h.interleaved=s,gs(n,l)}function Gd(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,eg(n,l)}}function uw(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?g=y=b:y=y.next=b,l=l.next}while(l!==null);y===null?g=y=s:y=y.next=s}else g=y=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Wd(n,s,l,h){var g=n.updateQueue;hr=!1;var y=g.firstBaseUpdate,b=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var R=P,$=R.next;R.next=null,b===null?y=$:b.next=$,b=R;var V=n.alternate;V!==null&&(V=V.updateQueue,P=V.lastBaseUpdate,P!==b&&(P===null?V.firstBaseUpdate=$:P.next=$,V.lastBaseUpdate=R))}if(y!==null){var G=g.baseState;b=0,V=$=R=null,P=y;do{var U=P.lane,tt=P.eventTime;if((h&U)===U){V!==null&&(V=V.next={eventTime:tt,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var ot=n,at=P;switch(U=s,tt=l,at.tag){case 1:if(ot=at.payload,typeof ot=="function"){G=ot.call(tt,G,U);break t}G=ot;break t;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=at.payload,U=typeof ot=="function"?ot.call(tt,G,U):ot,U==null)break t;G=Z({},G,U);break t;case 2:hr=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,U=g.effects,U===null?g.effects=[P]:U.push(P))}else tt={eventTime:tt,lane:U,tag:P.tag,payload:P.payload,callback:P.callback,next:null},V===null?($=V=tt,R=G):V=V.next=tt,b|=U;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;U=P,P=U.next,U.next=null,g.lastBaseUpdate=U,g.shared.pending=null}}while(!0);if(V===null&&(R=G),g.baseState=R,g.firstBaseUpdate=$,g.lastBaseUpdate=V,s=g.shared.interleaved,s!==null){g=s;do b|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);ho|=b,n.lanes=b,n.memoizedState=G}}function cw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=l,typeof g!="function")throw Error(e(191,g));g.call(h)}}}var qu={},Bi=lr(qu),Yu=lr(qu),Ku=lr(qu);function uo(n){if(n===qu)throw Error(e(174));return n}function jg(n,s){switch(Qt(Ku,s),Qt(Yu,n),Qt(Bi,qu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Up(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Up(s,n)}te(Bi),Qt(Bi,s)}function Qa(){te(Bi),te(Yu),te(Ku)}function hw(n){uo(Ku.current);var s=uo(Bi.current),l=Up(s,n.type);s!==l&&(Qt(Yu,n),Qt(Bi,l))}function Ug(n){Yu.current===n&&(te(Bi),te(Yu))}var oe=lr(0);function Xd(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vg=[];function Gg(){for(var n=0;n<Vg.length;n++)Vg[n]._workInProgressVersionPrimary=null;Vg.length=0}var qd=D.ReactCurrentDispatcher,Wg=D.ReactCurrentBatchConfig,co=0,ae=null,be=null,Re=null,Yd=!1,Qu=!1,Zu=0,F_=0;function qe(){throw Error(e(321))}function Xg(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!mi(n[l],s[l]))return!1;return!0}function qg(n,s,l,h,g,y){if(co=y,ae=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,qd.current=n===null||n.memoizedState===null?H_:B_,n=l(h,g),Qu){y=0;do{if(Qu=!1,Zu=0,25<=y)throw Error(e(301));y+=1,Re=be=null,s.updateQueue=null,qd.current=j_,n=l(h,g)}while(Qu)}if(qd.current=Zd,s=be!==null&&be.next!==null,co=0,Re=be=ae=null,Yd=!1,s)throw Error(e(300));return n}function Yg(){var n=Zu!==0;return Zu=0,n}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ae.memoizedState=Re=n:Re=Re.next=n,Re}function ei(){if(be===null){var n=ae.alternate;n=n!==null?n.memoizedState:null}else n=be.next;var s=Re===null?ae.memoizedState:Re.next;if(s!==null)Re=s,be=n;else{if(n===null)throw Error(e(310));be=n,n={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Re===null?ae.memoizedState=Re=n:Re=Re.next=n}return Re}function Ju(n,s){return typeof s=="function"?s(n):s}function Kg(n){var s=ei(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=be,g=h.baseQueue,y=l.pending;if(y!==null){if(g!==null){var b=g.next;g.next=y.next,y.next=b}h.baseQueue=g=y,l.pending=null}if(g!==null){y=g.next,h=h.baseState;var P=b=null,R=null,$=y;do{var V=$.lane;if((co&V)===V)R!==null&&(R=R.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var G={lane:V,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};R===null?(P=R=G,b=h):R=R.next=G,ae.lanes|=V,ho|=V}$=$.next}while($!==null&&$!==y);R===null?b=h:R.next=P,mi(h,s.memoizedState)||(Sn=!0),s.memoizedState=h,s.baseState=b,s.baseQueue=R,l.lastRenderedState=h}if(n=l.interleaved,n!==null){g=n;do y=g.lane,ae.lanes|=y,ho|=y,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Qg(n){var s=ei(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,y=s.memoizedState;if(g!==null){l.pending=null;var b=g=g.next;do y=n(y,b.action),b=b.next;while(b!==g);mi(y,s.memoizedState)||(Sn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function dw(){}function fw(n,s){var l=ae,h=ei(),g=s(),y=!mi(h.memoizedState,g);if(y&&(h.memoizedState=g,Sn=!0),h=h.queue,Zg(mw.bind(null,l,h,n),[n]),h.getSnapshot!==s||y||Re!==null&&Re.memoizedState.tag&1){if(l.flags|=2048,tc(9,gw.bind(null,l,h,g,s),void 0,null),Me===null)throw Error(e(349));co&30||pw(l,s,g)}return g}function pw(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=ae.updateQueue,s===null?(s={lastEffect:null,stores:null},ae.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function gw(n,s,l,h){s.value=l,s.getSnapshot=h,yw(s)&&vw(n)}function mw(n,s,l){return l(function(){yw(s)&&vw(n)})}function yw(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!mi(n,l)}catch{return!0}}function vw(n){var s=gs(n,1);s!==null&&Si(s,n,1,-1)}function ww(n){var s=ji();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:n},s.queue=n,n=n.dispatch=z_.bind(null,ae,n),[s.memoizedState,n]}function tc(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=ae.updateQueue,s===null?(s={lastEffect:null,stores:null},ae.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Aw(){return ei().memoizedState}function Kd(n,s,l,h){var g=ji();ae.flags|=n,g.memoizedState=tc(1|s,l,void 0,h===void 0?null:h)}function Qd(n,s,l,h){var g=ei();h=h===void 0?null:h;var y=void 0;if(be!==null){var b=be.memoizedState;if(y=b.destroy,h!==null&&Xg(h,b.deps)){g.memoizedState=tc(s,l,y,h);return}}ae.flags|=n,g.memoizedState=tc(1|s,l,y,h)}function Sw(n,s){return Kd(8390656,8,n,s)}function Zg(n,s){return Qd(2048,8,n,s)}function bw(n,s){return Qd(4,2,n,s)}function _w(n,s){return Qd(4,4,n,s)}function Ew(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cw(n,s,l){return l=l!=null?l.concat([n]):null,Qd(4,4,Ew.bind(null,s,n),l)}function Jg(){}function xw(n,s){var l=ei();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Xg(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function kw(n,s){var l=ei();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Xg(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Tw(n,s,l){return co&21?(mi(l,s)||(l=s0(),ae.lanes|=l,ho|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Sn=!0),n.memoizedState=l)}function O_(n,s){var l=Ut;Ut=l!==0&&4>l?l:4,n(!0);var h=Wg.transition;Wg.transition={};try{n(!1),s()}finally{Ut=l,Wg.transition=h}}function Pw(){return ei().memoizedState}function $_(n,s,l){var h=mr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Rw(n))Mw(s,l);else if(l=aw(n,s,l,h),l!==null){var g=un();Si(l,n,h,g),Lw(l,s,h)}}function z_(n,s,l){var h=mr(n),g={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Rw(n))Mw(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var b=s.lastRenderedState,P=y(b,l);if(g.hasEagerState=!0,g.eagerState=P,mi(P,b)){var R=s.interleaved;R===null?(g.next=g,Hg(s)):(g.next=R.next,R.next=g),s.interleaved=g;return}}catch{}finally{}l=aw(n,s,g,h),l!==null&&(g=un(),Si(l,n,h,g),Lw(l,s,h))}}function Rw(n){var s=n.alternate;return n===ae||s!==null&&s===ae}function Mw(n,s){Qu=Yd=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Lw(n,s,l){if(l&4194240){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,eg(n,l)}}var Zd={readContext:ti,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},H_={readContext:ti,useCallback:function(n,s){return ji().memoizedState=[n,s===void 0?null:s],n},useContext:ti,useEffect:Sw,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Kd(4194308,4,Ew.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Kd(4194308,4,n,s)},useInsertionEffect:function(n,s){return Kd(4,2,n,s)},useMemo:function(n,s){var l=ji();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=ji();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=$_.bind(null,ae,n),[h.memoizedState,n]},useRef:function(n){var s=ji();return n={current:n},s.memoizedState=n},useState:ww,useDebugValue:Jg,useDeferredValue:function(n){return ji().memoizedState=n},useTransition:function(){var n=ww(!1),s=n[0];return n=O_.bind(null,n[1]),ji().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=ae,g=ji();if(ne){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),Me===null)throw Error(e(349));co&30||pw(h,s,l)}g.memoizedState=l;var y={value:l,getSnapshot:s};return g.queue=y,Sw(mw.bind(null,h,y,n),[n]),h.flags|=2048,tc(9,gw.bind(null,h,y,l,s),void 0,null),l},useId:function(){var n=ji(),s=Me.identifierPrefix;if(ne){var l=ps,h=fs;l=(h&~(1<<32-gi(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Zu++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=F_++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},B_={readContext:ti,useCallback:xw,useContext:ti,useEffect:Zg,useImperativeHandle:Cw,useInsertionEffect:bw,useLayoutEffect:_w,useMemo:kw,useReducer:Kg,useRef:Aw,useState:function(){return Kg(Ju)},useDebugValue:Jg,useDeferredValue:function(n){var s=ei();return Tw(s,be.memoizedState,n)},useTransition:function(){var n=Kg(Ju)[0],s=ei().memoizedState;return[n,s]},useMutableSource:dw,useSyncExternalStore:fw,useId:Pw,unstable_isNewReconciler:!1},j_={readContext:ti,useCallback:xw,useContext:ti,useEffect:Zg,useImperativeHandle:Cw,useInsertionEffect:bw,useLayoutEffect:_w,useMemo:kw,useReducer:Qg,useRef:Aw,useState:function(){return Qg(Ju)},useDebugValue:Jg,useDeferredValue:function(n){var s=ei();return be===null?s.memoizedState=n:Tw(s,be.memoizedState,n)},useTransition:function(){var n=Qg(Ju)[0],s=ei().memoizedState;return[n,s]},useMutableSource:dw,useSyncExternalStore:fw,useId:Pw,unstable_isNewReconciler:!1};function vi(n,s){if(n&&n.defaultProps){s=Z({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function tm(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:Z({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Jd={isMounted:function(n){return(n=n._reactInternals)?io(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=un(),g=mr(n),y=ms(h,g);y.payload=s,l!=null&&(y.callback=l),s=dr(n,y,g),s!==null&&(Si(s,n,g,h),Gd(s,n,g))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=un(),g=mr(n),y=ms(h,g);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=dr(n,y,g),s!==null&&(Si(s,n,g,h),Gd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=un(),h=mr(n),g=ms(l,h);g.tag=2,s!=null&&(g.callback=s),s=dr(n,g,h),s!==null&&(Si(s,n,h,l),Gd(s,n,h))}};function Iw(n,s,l,h,g,y,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,b):s.prototype&&s.prototype.isPureReactComponent?!Hu(l,h)||!Hu(g,y):!0}function Nw(n,s,l){var h=!1,g=ur,y=s.contextType;return typeof y=="object"&&y!==null?y=ti(y):(g=An(s)?ro:Xe.current,h=s.contextTypes,y=(h=h!=null)?Va(n,g):ur),s=new s(l,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Jd,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function Dw(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&Jd.enqueueReplaceState(s,s.state,null)}function em(n,s,l,h){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs={},Bg(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=ti(y):(y=An(s)?ro:Xe.current,g.context=Va(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(tm(n,s,y,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Jd.enqueueReplaceState(g,g.state,null),Wd(n,l,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Za(n,s){try{var l="",h=s;do l+=Pt(h),h=h.return;while(h);var g=l}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function nm(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function im(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var U_=typeof WeakMap=="function"?WeakMap:Map;function Fw(n,s,l){l=ms(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){af||(af=!0,vm=h),im(n,s)},l}function Ow(n,s,l){l=ms(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;l.payload=function(){return h(g)},l.callback=function(){im(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){im(n,s),typeof h!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),l}function $w(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new U_;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(g.add(l),n=iE.bind(null,n,s,l),s.then(n,n))}function zw(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Hw(n,s,l,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=ms(-1,1),s.tag=2,dr(l,s,1))),l.lanes|=1),n)}var V_=D.ReactCurrentOwner,Sn=!1;function ln(n,s,l,h){s.child=n===null?ow(s,null,l,h):qa(s,n.child,l,h)}function Bw(n,s,l,h,g){l=l.render;var y=s.ref;return Ka(s,g),h=qg(n,s,l,h,y,g),l=Yg(),n!==null&&!Sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ys(n,s,g)):(ne&&l&&Mg(s),s.flags|=1,ln(n,s,h,g),s.child)}function jw(n,s,l,h,g){if(n===null){var y=l.type;return typeof y=="function"&&!Cm(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Uw(n,s,y,h,g)):(n=ff(l.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&g)){var b=y.memoizedProps;if(l=l.compare,l=l!==null?l:Hu,l(b,h)&&n.ref===s.ref)return ys(n,s,g)}return s.flags|=1,n=vr(y,h),n.ref=s.ref,n.return=s,s.child=n}function Uw(n,s,l,h,g){if(n!==null){var y=n.memoizedProps;if(Hu(y,h)&&n.ref===s.ref)if(Sn=!1,s.pendingProps=h=y,(n.lanes&g)!==0)n.flags&131072&&(Sn=!0);else return s.lanes=n.lanes,ys(n,s,g)}return sm(n,s,l,h,g)}function Vw(n,s,l){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(tl,Dn),Dn|=l;else{if(!(l&1073741824))return n=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qt(tl,Dn),Dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Qt(tl,Dn),Dn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Qt(tl,Dn),Dn|=h;return ln(n,s,g,l),s.child}function Gw(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function sm(n,s,l,h,g){var y=An(l)?ro:Xe.current;return y=Va(s,y),Ka(s,g),l=qg(n,s,l,h,y,g),h=Yg(),n!==null&&!Sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ys(n,s,g)):(ne&&h&&Mg(s),s.flags|=1,ln(n,s,l,g),s.child)}function Ww(n,s,l,h,g){if(An(l)){var y=!0;Od(s)}else y=!1;if(Ka(s,g),s.stateNode===null)ef(n,s),Nw(s,l,h),em(s,l,h,g),h=!0;else if(n===null){var b=s.stateNode,P=s.memoizedProps;b.props=P;var R=b.context,$=l.contextType;typeof $=="object"&&$!==null?$=ti($):($=An(l)?ro:Xe.current,$=Va(s,$));var V=l.getDerivedStateFromProps,G=typeof V=="function"||typeof b.getSnapshotBeforeUpdate=="function";G||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==h||R!==$)&&Dw(s,b,h,$),hr=!1;var U=s.memoizedState;b.state=U,Wd(s,h,b,g),R=s.memoizedState,P!==h||U!==R||wn.current||hr?(typeof V=="function"&&(tm(s,l,V,h),R=s.memoizedState),(P=hr||Iw(s,l,P,h,U,R,$))?(G||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),b.props=h,b.state=R,b.context=$,h=P):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,lw(n,s),P=s.memoizedProps,$=s.type===s.elementType?P:vi(s.type,P),b.props=$,G=s.pendingProps,U=b.context,R=l.contextType,typeof R=="object"&&R!==null?R=ti(R):(R=An(l)?ro:Xe.current,R=Va(s,R));var tt=l.getDerivedStateFromProps;(V=typeof tt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==G||U!==R)&&Dw(s,b,h,R),hr=!1,U=s.memoizedState,b.state=U,Wd(s,h,b,g);var ot=s.memoizedState;P!==G||U!==ot||wn.current||hr?(typeof tt=="function"&&(tm(s,l,tt,h),ot=s.memoizedState),($=hr||Iw(s,l,$,h,U,ot,R)||!1)?(V||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,ot,R),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,ot,R)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ot),b.props=h,b.state=ot,b.context=R,h=$):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=1024),h=!1)}return rm(n,s,l,h,y,g)}function rm(n,s,l,h,g,y){Gw(n,s);var b=(s.flags&128)!==0;if(!h&&!b)return g&&Q0(s,l,!1),ys(n,s,y);h=s.stateNode,V_.current=s;var P=b&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&b?(s.child=qa(s,n.child,null,y),s.child=qa(s,null,P,y)):ln(n,s,P,y),s.memoizedState=h.state,g&&Q0(s,l,!0),s.child}function Xw(n){var s=n.stateNode;s.pendingContext?Y0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Y0(n,s.context,!1),jg(n,s.containerInfo)}function qw(n,s,l,h,g){return Xa(),Dg(g),s.flags|=256,ln(n,s,l,h),s.child}var om={dehydrated:null,treeContext:null,retryLane:0};function am(n){return{baseLanes:n,cachePool:null,transitions:null}}function Yw(n,s,l){var h=s.pendingProps,g=oe.current,y=!1,b=(s.flags&128)!==0,P;if((P=b)||(P=n!==null&&n.memoizedState===null?!1:(g&2)!==0),P?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Qt(oe,g&1),n===null)return Ng(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(b=h.children,n=h.fallback,y?(h=s.mode,y=s.child,b={mode:"hidden",children:b},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=b):y=pf(b,h,0,null),n=mo(n,h,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=am(l),s.memoizedState=om,n):lm(s,b));if(g=n.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return G_(n,s,b,h,P,g,l);if(y){y=h.fallback,b=s.mode,g=n.child,P=g.sibling;var R={mode:"hidden",children:h.children};return!(b&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=vr(g,R),h.subtreeFlags=g.subtreeFlags&14680064),P!==null?y=vr(P,y):(y=mo(y,b,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,b=n.child.memoizedState,b=b===null?am(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},y.memoizedState=b,y.childLanes=n.childLanes&~l,s.memoizedState=om,h}return y=n.child,n=y.sibling,h=vr(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function lm(n,s){return s=pf({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function tf(n,s,l,h){return h!==null&&Dg(h),qa(s,n.child,null,l),n=lm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function G_(n,s,l,h,g,y,b){if(l)return s.flags&256?(s.flags&=-257,h=nm(Error(e(422))),tf(n,s,b,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=pf({mode:"visible",children:h.children},g,0,null),y=mo(y,g,b,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&qa(s,n.child,null,b),s.child.memoizedState=am(b),s.memoizedState=om,y);if(!(s.mode&1))return tf(n,s,b,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var P=h.dgst;return h=P,y=Error(e(419)),h=nm(y,h,void 0),tf(n,s,b,h)}if(P=(b&n.childLanes)!==0,Sn||P){if(h=Me,h!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|b)?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,gs(n,g),Si(h,n,g,-1))}return Em(),h=nm(Error(e(421))),tf(n,s,b,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=sE.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,Nn=ar(g.nextSibling),In=s,ne=!0,yi=null,n!==null&&(Zn[Jn++]=fs,Zn[Jn++]=ps,Zn[Jn++]=oo,fs=n.id,ps=n.overflow,oo=s),s=lm(s,h.children),s.flags|=4096,s)}function Kw(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),zg(n.return,s,l)}function um(n,s,l,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function Qw(n,s,l){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(ln(n,s,h.children,l),h=oe.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kw(n,l,s);else if(n.tag===19)Kw(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Qt(oe,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&Xd(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),um(s,!1,g,l,y);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Xd(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}um(s,!0,l,null,y);break;case"together":um(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ef(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ys(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),ho|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=vr(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=vr(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function W_(n,s,l){switch(s.tag){case 3:Xw(s),Xa();break;case 5:hw(s);break;case 1:An(s.type)&&Od(s);break;case 4:jg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Qt(Ud,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Qt(oe,oe.current&1),s.flags|=128,null):l&s.child.childLanes?Yw(n,s,l):(Qt(oe,oe.current&1),n=ys(n,s,l),n!==null?n.sibling:null);Qt(oe,oe.current&1);break;case 19:if(h=(l&s.childLanes)!==0,n.flags&128){if(h)return Qw(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qt(oe,oe.current),h)break;return null;case 22:case 23:return s.lanes=0,Vw(n,s,l)}return ys(n,s,l)}var Zw,cm,Jw,tA;Zw=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},cm=function(){},Jw=function(n,s,l,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,uo(Bi.current);var y=null;switch(l){case"input":g=zp(n,g),h=zp(n,h),y=[];break;case"select":g=Z({},g,{value:void 0}),h=Z({},h,{value:void 0}),y=[];break;case"textarea":g=jp(n,g),h=jp(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Nd)}Vp(l,h);var b;l=null;for($ in g)if(!h.hasOwnProperty($)&&g.hasOwnProperty($)&&g[$]!=null)if($==="style"){var P=g[$];for(b in P)P.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(r.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var R=h[$];if(P=g!=null?g[$]:void 0,h.hasOwnProperty($)&&R!==P&&(R!=null||P!=null))if($==="style")if(P){for(b in P)!P.hasOwnProperty(b)||R&&R.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in R)R.hasOwnProperty(b)&&P[b]!==R[b]&&(l||(l={}),l[b]=R[b])}else l||(y||(y=[]),y.push($,l)),l=R;else $==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,P=P?P.__html:void 0,R!=null&&P!==R&&(y=y||[]).push($,R)):$==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push($,""+R):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(r.hasOwnProperty($)?(R!=null&&$==="onScroll"&&Jt("scroll",n),y||P===R||(y=[])):(y=y||[]).push($,R))}l&&(y=y||[]).push("style",l);var $=y;(s.updateQueue=$)&&(s.flags|=4)}},tA=function(n,s,l,h){l!==h&&(s.flags|=4)};function ec(n,s){if(!ne)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ye(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function X_(n,s,l){var h=s.pendingProps;switch(Lg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return An(s.type)&&Fd(),Ye(s),null;case 3:return h=s.stateNode,Qa(),te(wn),te(Xe),Gg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Bd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,yi!==null&&(Sm(yi),yi=null))),cm(n,s),Ye(s),null;case 5:Ug(s);var g=uo(Ku.current);if(l=s.type,n!==null&&s.stateNode!=null)Jw(n,s,l,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return Ye(s),null}if(n=uo(Bi.current),Bd(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Hi]=s,h[Gu]=y,n=(s.mode&1)!==0,l){case"dialog":Jt("cancel",h),Jt("close",h);break;case"iframe":case"object":case"embed":Jt("load",h);break;case"video":case"audio":for(g=0;g<ju.length;g++)Jt(ju[g],h);break;case"source":Jt("error",h);break;case"img":case"image":case"link":Jt("error",h),Jt("load",h);break;case"details":Jt("toggle",h);break;case"input":Nv(h,y),Jt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},Jt("invalid",h);break;case"textarea":Ov(h,y),Jt("invalid",h)}Vp(l,y),g=null;for(var b in y)if(y.hasOwnProperty(b)){var P=y[b];b==="children"?typeof P=="string"?h.textContent!==P&&(y.suppressHydrationWarning!==!0&&Id(h.textContent,P,n),g=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Id(h.textContent,P,n),g=["children",""+P]):r.hasOwnProperty(b)&&P!=null&&b==="onScroll"&&Jt("scroll",h)}switch(l){case"input":cd(h),Fv(h,y,!0);break;case"textarea":cd(h),zv(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Nd)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hv(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=b.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=b.createElement(l,{is:h.is}):(n=b.createElement(l),l==="select"&&(b=n,h.multiple?b.multiple=!0:h.size&&(b.size=h.size))):n=b.createElementNS(n,l),n[Hi]=s,n[Gu]=h,Zw(n,s,!1,!1),s.stateNode=n;t:{switch(b=Gp(l,h),l){case"dialog":Jt("cancel",n),Jt("close",n),g=h;break;case"iframe":case"object":case"embed":Jt("load",n),g=h;break;case"video":case"audio":for(g=0;g<ju.length;g++)Jt(ju[g],n);g=h;break;case"source":Jt("error",n),g=h;break;case"img":case"image":case"link":Jt("error",n),Jt("load",n),g=h;break;case"details":Jt("toggle",n),g=h;break;case"input":Nv(n,h),g=zp(n,h),Jt("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=Z({},h,{value:void 0}),Jt("invalid",n);break;case"textarea":Ov(n,h),g=jp(n,h),Jt("invalid",n);break;default:g=h}Vp(l,g),P=g;for(y in P)if(P.hasOwnProperty(y)){var R=P[y];y==="style"?Uv(n,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Bv(n,R)):y==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&_u(n,R):typeof R=="number"&&_u(n,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?R!=null&&y==="onScroll"&&Jt("scroll",n):R!=null&&O(n,y,R,b))}switch(l){case"input":cd(n),Fv(n,h,!1);break;case"textarea":cd(n),zv(n);break;case"option":h.value!=null&&n.setAttribute("value",""+It(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?La(n,!!h.multiple,y,!1):h.defaultValue!=null&&La(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Nd)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ye(s),null;case 6:if(n&&s.stateNode!=null)tA(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=uo(Ku.current),uo(Bi.current),Bd(s)){if(h=s.stateNode,l=s.memoizedProps,h[Hi]=s,(y=h.nodeValue!==l)&&(n=In,n!==null))switch(n.tag){case 3:Id(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Id(h.nodeValue,l,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Hi]=s,s.stateNode=h}return Ye(s),null;case 13:if(te(oe),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ne&&Nn!==null&&s.mode&1&&!(s.flags&128))iw(),Xa(),s.flags|=98560,y=!1;else if(y=Bd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[Hi]=s}else Xa(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ye(s),y=!1}else yi!==null&&(Sm(yi),yi=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||oe.current&1?_e===0&&(_e=3):Em())),s.updateQueue!==null&&(s.flags|=4),Ye(s),null);case 4:return Qa(),cm(n,s),n===null&&Uu(s.stateNode.containerInfo),Ye(s),null;case 10:return $g(s.type._context),Ye(s),null;case 17:return An(s.type)&&Fd(),Ye(s),null;case 19:if(te(oe),y=s.memoizedState,y===null)return Ye(s),null;if(h=(s.flags&128)!==0,b=y.rendering,b===null)if(h)ec(y,!1);else{if(_e!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(b=Xd(n),b!==null){for(s.flags|=128,ec(y,!1),h=b.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,n=h,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,n=b.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Qt(oe,oe.current&1|2),s.child}n=n.sibling}y.tail!==null&&fe()>el&&(s.flags|=128,h=!0,ec(y,!1),s.lanes=4194304)}else{if(!h)if(n=Xd(b),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ec(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!ne)return Ye(s),null}else 2*fe()-y.renderingStartTime>el&&l!==1073741824&&(s.flags|=128,h=!0,ec(y,!1),s.lanes=4194304);y.isBackwards?(b.sibling=s.child,s.child=b):(l=y.last,l!==null?l.sibling=b:s.child=b,y.last=b)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=fe(),s.sibling=null,l=oe.current,Qt(oe,h?l&1|2:l&1),s):(Ye(s),null);case 22:case 23:return _m(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Dn&1073741824&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function q_(n,s){switch(Lg(s),s.tag){case 1:return An(s.type)&&Fd(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Qa(),te(wn),te(Xe),Gg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Ug(s),null;case 13:if(te(oe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Xa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return te(oe),null;case 4:return Qa(),null;case 10:return $g(s.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var nf=!1,Ke=!1,Y_=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Ja(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){he(n,s,h)}else l.current=null}function hm(n,s,l){try{l()}catch(h){he(n,s,h)}}var eA=!1;function K_(n,s){if(_g=bd,n=I0(),gg(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var b=0,P=-1,R=-1,$=0,V=0,G=n,U=null;e:for(;;){for(var tt;G!==l||g!==0&&G.nodeType!==3||(P=b+g),G!==y||h!==0&&G.nodeType!==3||(R=b+h),G.nodeType===3&&(b+=G.nodeValue.length),(tt=G.firstChild)!==null;)U=G,G=tt;for(;;){if(G===n)break e;if(U===l&&++$===g&&(P=b),U===y&&++V===h&&(R=b),(tt=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=tt}l=P===-1||R===-1?null:{start:P,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Eg={focusedElem:n,selectionRange:l},bd=!1,nt=s;nt!==null;)if(s=nt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,nt=n;else for(;nt!==null;){s=nt;try{var ot=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ot!==null){var at=ot.memoizedProps,pe=ot.memoizedState,N=s.stateNode,M=N.getSnapshotBeforeUpdate(s.elementType===s.type?at:vi(s.type,at),pe);N.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(W){he(s,s.return,W)}if(n=s.sibling,n!==null){n.return=s.return,nt=n;break}nt=s.return}return ot=eA,eA=!1,ot}function nc(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&hm(s,l,y)}g=g.next}while(g!==h)}}function sf(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function dm(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function nA(n){var s=n.alternate;s!==null&&(n.alternate=null,nA(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Hi],delete s[Gu],delete s[Tg],delete s[L_],delete s[I_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function iA(n){return n.tag===5||n.tag===3||n.tag===4}function sA(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||iA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Nd));else if(h!==4&&(n=n.child,n!==null))for(fm(n,s,l),n=n.sibling;n!==null;)fm(n,s,l),n=n.sibling}function pm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(pm(n,s,l),n=n.sibling;n!==null;)pm(n,s,l),n=n.sibling}var ze=null,wi=!1;function fr(n,s,l){for(l=l.child;l!==null;)rA(n,s,l),l=l.sibling}function rA(n,s,l){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(md,l)}catch{}switch(l.tag){case 5:Ke||Ja(l,s);case 6:var h=ze,g=wi;ze=null,fr(n,s,l),ze=h,wi=g,ze!==null&&(wi?(n=ze,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ze.removeChild(l.stateNode));break;case 18:ze!==null&&(wi?(n=ze,l=l.stateNode,n.nodeType===8?kg(n.parentNode,l):n.nodeType===1&&kg(n,l),Nu(n)):kg(ze,l.stateNode));break;case 4:h=ze,g=wi,ze=l.stateNode.containerInfo,wi=!0,fr(n,s,l),ze=h,wi=g;break;case 0:case 11:case 14:case 15:if(!Ke&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,b=y.destroy;y=y.tag,b!==void 0&&(y&2||y&4)&&hm(l,s,b),g=g.next}while(g!==h)}fr(n,s,l);break;case 1:if(!Ke&&(Ja(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){he(l,s,P)}fr(n,s,l);break;case 21:fr(n,s,l);break;case 22:l.mode&1?(Ke=(h=Ke)||l.memoizedState!==null,fr(n,s,l),Ke=h):fr(n,s,l);break;default:fr(n,s,l)}}function oA(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Y_),s.forEach(function(h){var g=rE.bind(null,n,h);l.has(h)||(l.add(h),h.then(g,g))})}}function Ai(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];try{var y=n,b=s,P=b;t:for(;P!==null;){switch(P.tag){case 5:ze=P.stateNode,wi=!1;break t;case 3:ze=P.stateNode.containerInfo,wi=!0;break t;case 4:ze=P.stateNode.containerInfo,wi=!0;break t}P=P.return}if(ze===null)throw Error(e(160));rA(y,b,g),ze=null,wi=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch($){he(g,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)aA(s,n),s=s.sibling}function aA(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ai(s,n),Ui(n),h&4){try{nc(3,n,n.return),sf(3,n)}catch(at){he(n,n.return,at)}try{nc(5,n,n.return)}catch(at){he(n,n.return,at)}}break;case 1:Ai(s,n),Ui(n),h&512&&l!==null&&Ja(l,l.return);break;case 5:if(Ai(s,n),Ui(n),h&512&&l!==null&&Ja(l,l.return),n.flags&32){var g=n.stateNode;try{_u(g,"")}catch(at){he(n,n.return,at)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,b=l!==null?l.memoizedProps:y,P=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Dv(g,y),Gp(P,b);var $=Gp(P,y);for(b=0;b<R.length;b+=2){var V=R[b],G=R[b+1];V==="style"?Uv(g,G):V==="dangerouslySetInnerHTML"?Bv(g,G):V==="children"?_u(g,G):O(g,V,G,$)}switch(P){case"input":Hp(g,y);break;case"textarea":$v(g,y);break;case"select":var U=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var tt=y.value;tt!=null?La(g,!!y.multiple,tt,!1):U!==!!y.multiple&&(y.defaultValue!=null?La(g,!!y.multiple,y.defaultValue,!0):La(g,!!y.multiple,y.multiple?[]:"",!1))}g[Gu]=y}catch(at){he(n,n.return,at)}}break;case 6:if(Ai(s,n),Ui(n),h&4){if(n.stateNode===null)throw Error(e(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(at){he(n,n.return,at)}}break;case 3:if(Ai(s,n),Ui(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Nu(s.containerInfo)}catch(at){he(n,n.return,at)}break;case 4:Ai(s,n),Ui(n);break;case 13:Ai(s,n),Ui(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(ym=fe())),h&4&&oA(n);break;case 22:if(V=l!==null&&l.memoizedState!==null,n.mode&1?(Ke=($=Ke)||V,Ai(s,n),Ke=$):Ai(s,n),Ui(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!V&&n.mode&1)for(nt=n,V=n.child;V!==null;){for(G=nt=V;nt!==null;){switch(U=nt,tt=U.child,U.tag){case 0:case 11:case 14:case 15:nc(4,U,U.return);break;case 1:Ja(U,U.return);var ot=U.stateNode;if(typeof ot.componentWillUnmount=="function"){h=U,l=U.return;try{s=h,ot.props=s.memoizedProps,ot.state=s.memoizedState,ot.componentWillUnmount()}catch(at){he(h,l,at)}}break;case 5:Ja(U,U.return);break;case 22:if(U.memoizedState!==null){cA(G);continue}}tt!==null?(tt.return=U,nt=tt):cA(G)}V=V.sibling}t:for(V=null,G=n;;){if(G.tag===5){if(V===null){V=G;try{g=G.stateNode,$?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=G.stateNode,R=G.memoizedProps.style,b=R!=null&&R.hasOwnProperty("display")?R.display:null,P.style.display=jv("display",b))}catch(at){he(n,n.return,at)}}}else if(G.tag===6){if(V===null)try{G.stateNode.nodeValue=$?"":G.memoizedProps}catch(at){he(n,n.return,at)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===n)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===n)break t;for(;G.sibling===null;){if(G.return===null||G.return===n)break t;V===G&&(V=null),G=G.return}V===G&&(V=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Ai(s,n),Ui(n),h&4&&oA(n);break;case 21:break;default:Ai(s,n),Ui(n)}}function Ui(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(iA(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(_u(g,""),h.flags&=-33);var y=sA(n);pm(n,y,g);break;case 3:case 4:var b=h.stateNode.containerInfo,P=sA(n);fm(n,P,b);break;default:throw Error(e(161))}}catch(R){he(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Q_(n,s,l){nt=n,lA(n)}function lA(n,s,l){for(var h=(n.mode&1)!==0;nt!==null;){var g=nt,y=g.child;if(g.tag===22&&h){var b=g.memoizedState!==null||nf;if(!b){var P=g.alternate,R=P!==null&&P.memoizedState!==null||Ke;P=nf;var $=Ke;if(nf=b,(Ke=R)&&!$)for(nt=g;nt!==null;)b=nt,R=b.child,b.tag===22&&b.memoizedState!==null?hA(g):R!==null?(R.return=b,nt=R):hA(g);for(;y!==null;)nt=y,lA(y),y=y.sibling;nt=g,nf=P,Ke=$}uA(n)}else g.subtreeFlags&8772&&y!==null?(y.return=g,nt=y):uA(n)}}function uA(n){for(;nt!==null;){var s=nt;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ke||sf(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ke)if(l===null)h.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:vi(s.type,l.memoizedProps);h.componentDidUpdate(g,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&cw(s,y,h);break;case 3:var b=s.updateQueue;if(b!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}cw(s,b,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var V=$.memoizedState;if(V!==null){var G=V.dehydrated;G!==null&&Nu(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Ke||s.flags&512&&dm(s)}catch(U){he(s,s.return,U)}}if(s===n){nt=null;break}if(l=s.sibling,l!==null){l.return=s.return,nt=l;break}nt=s.return}}function cA(n){for(;nt!==null;){var s=nt;if(s===n){nt=null;break}var l=s.sibling;if(l!==null){l.return=s.return,nt=l;break}nt=s.return}}function hA(n){for(;nt!==null;){var s=nt;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{sf(4,s)}catch(R){he(s,l,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(R){he(s,g,R)}}var y=s.return;try{dm(s)}catch(R){he(s,y,R)}break;case 5:var b=s.return;try{dm(s)}catch(R){he(s,b,R)}}}catch(R){he(s,s.return,R)}if(s===n){nt=null;break}var P=s.sibling;if(P!==null){P.return=s.return,nt=P;break}nt=s.return}}var Z_=Math.ceil,rf=D.ReactCurrentDispatcher,gm=D.ReactCurrentOwner,ni=D.ReactCurrentBatchConfig,$t=0,Me=null,ve=null,He=0,Dn=0,tl=lr(0),_e=0,ic=null,ho=0,of=0,mm=0,sc=null,bn=null,ym=0,el=1/0,vs=null,af=!1,vm=null,pr=null,lf=!1,gr=null,uf=0,rc=0,wm=null,cf=-1,hf=0;function un(){return $t&6?fe():cf!==-1?cf:cf=fe()}function mr(n){return n.mode&1?$t&2&&He!==0?He&-He:D_.transition!==null?(hf===0&&(hf=s0()),hf):(n=Ut,n!==0||(n=window.event,n=n===void 0?16:f0(n.type)),n):1}function Si(n,s,l,h){if(50<rc)throw rc=0,wm=null,Error(e(185));Pu(n,l,h),(!($t&2)||n!==Me)&&(n===Me&&(!($t&2)&&(of|=l),_e===4&&yr(n,He)),_n(n,h),l===1&&$t===0&&!(s.mode&1)&&(el=fe()+500,$d&&cr()))}function _n(n,s){var l=n.callbackNode;D1(n,s);var h=wd(n,n===Me?He:0);if(h===0)l!==null&&e0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&e0(l),s===1)n.tag===0?N_(fA.bind(null,n)):Z0(fA.bind(null,n)),R_(function(){!($t&6)&&cr()}),l=null;else{switch(r0(h)){case 1:l=Zp;break;case 4:l=n0;break;case 16:l=gd;break;case 536870912:l=i0;break;default:l=gd}l=SA(l,dA.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function dA(n,s){if(cf=-1,hf=0,$t&6)throw Error(e(327));var l=n.callbackNode;if(nl()&&n.callbackNode!==l)return null;var h=wd(n,n===Me?He:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=df(n,h);else{s=h;var g=$t;$t|=2;var y=gA();(Me!==n||He!==s)&&(vs=null,el=fe()+500,po(n,s));do try{eE();break}catch(P){pA(n,P)}while(!0);Og(),rf.current=y,$t=g,ve!==null?s=0:(Me=null,He=0,s=_e)}if(s!==0){if(s===2&&(g=Jp(n),g!==0&&(h=g,s=Am(n,g))),s===1)throw l=ic,po(n,0),yr(n,h),_n(n,fe()),l;if(s===6)yr(n,h);else{if(g=n.current.alternate,!(h&30)&&!J_(g)&&(s=df(n,h),s===2&&(y=Jp(n),y!==0&&(h=y,s=Am(n,y))),s===1))throw l=ic,po(n,0),yr(n,h),_n(n,fe()),l;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:go(n,bn,vs);break;case 3:if(yr(n,h),(h&130023424)===h&&(s=ym+500-fe(),10<s)){if(wd(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){un(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=xg(go.bind(null,n,bn,vs),s);break}go(n,bn,vs);break;case 4:if(yr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var b=31-gi(h);y=1<<b,b=s[b],b>g&&(g=b),h&=~y}if(h=g,h=fe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Z_(h/1960))-h,10<h){n.timeoutHandle=xg(go.bind(null,n,bn,vs),h);break}go(n,bn,vs);break;case 5:go(n,bn,vs);break;default:throw Error(e(329))}}}return _n(n,fe()),n.callbackNode===l?dA.bind(null,n):null}function Am(n,s){var l=sc;return n.current.memoizedState.isDehydrated&&(po(n,s).flags|=256),n=df(n,s),n!==2&&(s=bn,bn=l,s!==null&&Sm(s)),n}function Sm(n){bn===null?bn=n:bn.push.apply(bn,n)}function J_(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!mi(y(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yr(n,s){for(s&=~mm,s&=~of,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-gi(s),h=1<<l;n[l]=-1,s&=~h}}function fA(n){if($t&6)throw Error(e(327));nl();var s=wd(n,0);if(!(s&1))return _n(n,fe()),null;var l=df(n,s);if(n.tag!==0&&l===2){var h=Jp(n);h!==0&&(s=h,l=Am(n,h))}if(l===1)throw l=ic,po(n,0),yr(n,s),_n(n,fe()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,go(n,bn,vs),_n(n,fe()),null}function bm(n,s){var l=$t;$t|=1;try{return n(s)}finally{$t=l,$t===0&&(el=fe()+500,$d&&cr())}}function fo(n){gr!==null&&gr.tag===0&&!($t&6)&&nl();var s=$t;$t|=1;var l=ni.transition,h=Ut;try{if(ni.transition=null,Ut=1,n)return n()}finally{Ut=h,ni.transition=l,$t=s,!($t&6)&&cr()}}function _m(){Dn=tl.current,te(tl)}function po(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,P_(l)),ve!==null)for(l=ve.return;l!==null;){var h=l;switch(Lg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Fd();break;case 3:Qa(),te(wn),te(Xe),Gg();break;case 5:Ug(h);break;case 4:Qa();break;case 13:te(oe);break;case 19:te(oe);break;case 10:$g(h.type._context);break;case 22:case 23:_m()}l=l.return}if(Me=n,ve=n=vr(n.current,null),He=Dn=s,_e=0,ic=null,mm=of=ho=0,bn=sc=null,lo!==null){for(s=0;s<lo.length;s++)if(l=lo[s],h=l.interleaved,h!==null){l.interleaved=null;var g=h.next,y=l.pending;if(y!==null){var b=y.next;y.next=g,h.next=b}l.pending=h}lo=null}return n}function pA(n,s){do{var l=ve;try{if(Og(),qd.current=Zd,Yd){for(var h=ae.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Yd=!1}if(co=0,Re=be=ae=null,Qu=!1,Zu=0,gm.current=null,l===null||l.return===null){_e=1,ic=s,ve=null;break}t:{var y=n,b=l.return,P=l,R=s;if(s=He,P.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var $=R,V=P,G=V.tag;if(!(V.mode&1)&&(G===0||G===11||G===15)){var U=V.alternate;U?(V.updateQueue=U.updateQueue,V.memoizedState=U.memoizedState,V.lanes=U.lanes):(V.updateQueue=null,V.memoizedState=null)}var tt=zw(b);if(tt!==null){tt.flags&=-257,Hw(tt,b,P,y,s),tt.mode&1&&$w(y,$,s),s=tt,R=$;var ot=s.updateQueue;if(ot===null){var at=new Set;at.add(R),s.updateQueue=at}else ot.add(R);break t}else{if(!(s&1)){$w(y,$,s),Em();break t}R=Error(e(426))}}else if(ne&&P.mode&1){var pe=zw(b);if(pe!==null){!(pe.flags&65536)&&(pe.flags|=256),Hw(pe,b,P,y,s),Dg(Za(R,P));break t}}y=R=Za(R,P),_e!==4&&(_e=2),sc===null?sc=[y]:sc.push(y),y=b;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var N=Fw(y,R,s);uw(y,N);break t;case 1:P=R;var M=y.type,F=y.stateNode;if(!(y.flags&128)&&(typeof M.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(pr===null||!pr.has(F)))){y.flags|=65536,s&=-s,y.lanes|=s;var W=Ow(y,P,s);uw(y,W);break t}}y=y.return}while(y!==null)}yA(l)}catch(ut){s=ut,ve===l&&l!==null&&(ve=l=l.return);continue}break}while(!0)}function gA(){var n=rf.current;return rf.current=Zd,n===null?Zd:n}function Em(){(_e===0||_e===3||_e===2)&&(_e=4),Me===null||!(ho&268435455)&&!(of&268435455)||yr(Me,He)}function df(n,s){var l=$t;$t|=2;var h=gA();(Me!==n||He!==s)&&(vs=null,po(n,s));do try{tE();break}catch(g){pA(n,g)}while(!0);if(Og(),$t=l,rf.current=h,ve!==null)throw Error(e(261));return Me=null,He=0,_e}function tE(){for(;ve!==null;)mA(ve)}function eE(){for(;ve!==null&&!x1();)mA(ve)}function mA(n){var s=AA(n.alternate,n,Dn);n.memoizedProps=n.pendingProps,s===null?yA(n):ve=s,gm.current=null}function yA(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=q_(l,s),l!==null){l.flags&=32767,ve=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_e=6,ve=null;return}}else if(l=X_(l,s,Dn),l!==null){ve=l;return}if(s=s.sibling,s!==null){ve=s;return}ve=s=n}while(s!==null);_e===0&&(_e=5)}function go(n,s,l){var h=Ut,g=ni.transition;try{ni.transition=null,Ut=1,nE(n,s,l,h)}finally{ni.transition=g,Ut=h}return null}function nE(n,s,l,h){do nl();while(gr!==null);if($t&6)throw Error(e(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(F1(n,y),n===Me&&(ve=Me=null,He=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||lf||(lf=!0,SA(gd,function(){return nl(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=ni.transition,ni.transition=null;var b=Ut;Ut=1;var P=$t;$t|=4,gm.current=null,K_(n,l),aA(l,n),b_(Eg),bd=!!_g,Eg=_g=null,n.current=l,Q_(l),k1(),$t=P,Ut=b,ni.transition=y}else n.current=l;if(lf&&(lf=!1,gr=n,uf=g),y=n.pendingLanes,y===0&&(pr=null),R1(l.stateNode),_n(n,fe()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)g=s[l],h(g.value,{componentStack:g.stack,digest:g.digest});if(af)throw af=!1,n=vm,vm=null,n;return uf&1&&n.tag!==0&&nl(),y=n.pendingLanes,y&1?n===wm?rc++:(rc=0,wm=n):rc=0,cr(),null}function nl(){if(gr!==null){var n=r0(uf),s=ni.transition,l=Ut;try{if(ni.transition=null,Ut=16>n?16:n,gr===null)var h=!1;else{if(n=gr,gr=null,uf=0,$t&6)throw Error(e(331));var g=$t;for($t|=4,nt=n.current;nt!==null;){var y=nt,b=y.child;if(nt.flags&16){var P=y.deletions;if(P!==null){for(var R=0;R<P.length;R++){var $=P[R];for(nt=$;nt!==null;){var V=nt;switch(V.tag){case 0:case 11:case 15:nc(8,V,y)}var G=V.child;if(G!==null)G.return=V,nt=G;else for(;nt!==null;){V=nt;var U=V.sibling,tt=V.return;if(nA(V),V===$){nt=null;break}if(U!==null){U.return=tt,nt=U;break}nt=tt}}}var ot=y.alternate;if(ot!==null){var at=ot.child;if(at!==null){ot.child=null;do{var pe=at.sibling;at.sibling=null,at=pe}while(at!==null)}}nt=y}}if(y.subtreeFlags&2064&&b!==null)b.return=y,nt=b;else t:for(;nt!==null;){if(y=nt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:nc(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,nt=N;break t}nt=y.return}}var M=n.current;for(nt=M;nt!==null;){b=nt;var F=b.child;if(b.subtreeFlags&2064&&F!==null)F.return=b,nt=F;else t:for(b=M;nt!==null;){if(P=nt,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:sf(9,P)}}catch(ut){he(P,P.return,ut)}if(P===b){nt=null;break t}var W=P.sibling;if(W!==null){W.return=P.return,nt=W;break t}nt=P.return}}if($t=g,cr(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(md,n)}catch{}h=!0}return h}finally{Ut=l,ni.transition=s}}return!1}function vA(n,s,l){s=Za(l,s),s=Fw(n,s,1),n=dr(n,s,1),s=un(),n!==null&&(Pu(n,1,s),_n(n,s))}function he(n,s,l){if(n.tag===3)vA(n,n,l);else for(;s!==null;){if(s.tag===3){vA(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(pr===null||!pr.has(h))){n=Za(l,n),n=Ow(s,n,1),s=dr(s,n,1),n=un(),s!==null&&(Pu(s,1,n),_n(s,n));break}}s=s.return}}function iE(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=un(),n.pingedLanes|=n.suspendedLanes&l,Me===n&&(He&l)===l&&(_e===4||_e===3&&(He&130023424)===He&&500>fe()-ym?po(n,0):mm|=l),_n(n,s)}function wA(n,s){s===0&&(n.mode&1?(s=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):s=1);var l=un();n=gs(n,s),n!==null&&(Pu(n,s,l),_n(n,l))}function sE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),wA(n,l)}function rE(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),wA(n,l)}var AA;AA=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||wn.current)Sn=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return Sn=!1,W_(n,s,l);Sn=!!(n.flags&131072)}else Sn=!1,ne&&s.flags&1048576&&J0(s,Hd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ef(n,s),n=s.pendingProps;var g=Va(s,Xe.current);Ka(s,l),g=qg(null,s,h,n,g,l);var y=Yg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,An(h)?(y=!0,Od(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Bg(s),g.updater=Jd,s.stateNode=g,g._reactInternals=s,em(s,h,n,l),s=rm(null,s,h,!0,y,l)):(s.tag=0,ne&&y&&Mg(s),ln(null,s,g,l),s=s.child),s;case 16:h=s.elementType;t:{switch(ef(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=aE(h),n=vi(h,n),g){case 0:s=sm(null,s,h,n,l);break t;case 1:s=Ww(null,s,h,n,l);break t;case 11:s=Bw(null,s,h,n,l);break t;case 14:s=jw(null,s,h,vi(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),sm(n,s,h,g,l);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),Ww(n,s,h,g,l);case 3:t:{if(Xw(s),n===null)throw Error(e(387));h=s.pendingProps,y=s.memoizedState,g=y.element,lw(n,s),Wd(s,h,null,l);var b=s.memoizedState;if(h=b.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=Za(Error(e(423)),s),s=qw(n,s,h,l,g);break t}else if(h!==g){g=Za(Error(e(424)),s),s=qw(n,s,h,l,g);break t}else for(Nn=ar(s.stateNode.containerInfo.firstChild),In=s,ne=!0,yi=null,l=ow(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Xa(),h===g){s=ys(n,s,l);break t}ln(n,s,h,l)}s=s.child}return s;case 5:return hw(s),n===null&&Ng(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,b=g.children,Cg(h,g)?b=null:y!==null&&Cg(h,y)&&(s.flags|=32),Gw(n,s),ln(n,s,b,l),s.child;case 6:return n===null&&Ng(s),null;case 13:return Yw(n,s,l);case 4:return jg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=qa(s,null,h,l):ln(n,s,h,l),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),Bw(n,s,h,g,l);case 7:return ln(n,s,s.pendingProps,l),s.child;case 8:return ln(n,s,s.pendingProps.children,l),s.child;case 12:return ln(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,b=g.value,Qt(Ud,h._currentValue),h._currentValue=b,y!==null)if(mi(y.value,b)){if(y.children===g.children&&!wn.current){s=ys(n,s,l);break t}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){b=y.child;for(var R=P.firstContext;R!==null;){if(R.context===h){if(y.tag===1){R=ms(-1,l&-l),R.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var V=$.pending;V===null?R.next=R:(R.next=V.next,V.next=R),$.pending=R}}y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),zg(y.return,l,s),P.lanes|=l;break}R=R.next}}else if(y.tag===10)b=y.type===s.type?null:y.child;else if(y.tag===18){if(b=y.return,b===null)throw Error(e(341));b.lanes|=l,P=b.alternate,P!==null&&(P.lanes|=l),zg(b,l,s),b=y.sibling}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===s){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}ln(n,s,g.children,l),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Ka(s,l),g=ti(g),h=h(g),s.flags|=1,ln(n,s,h,l),s.child;case 14:return h=s.type,g=vi(h,s.pendingProps),g=vi(h.type,g),jw(n,s,h,g,l);case 15:return Uw(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),ef(n,s),s.tag=1,An(h)?(n=!0,Od(s)):n=!1,Ka(s,l),Nw(s,h,g),em(s,h,g,l),rm(null,s,h,!0,n,l);case 19:return Qw(n,s,l);case 22:return Vw(n,s,l)}throw Error(e(156,s.tag))};function SA(n,s){return t0(n,s)}function oE(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(n,s,l,h){return new oE(n,s,l,h)}function Cm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function aE(n){if(typeof n=="function")return Cm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Dt)return 11;if(n===Kt)return 14}return 2}function vr(n,s){var l=n.alternate;return l===null?(l=ii(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ff(n,s,l,h,g,y){var b=2;if(h=n,typeof n=="function")Cm(n)&&(b=1);else if(typeof n=="string")b=5;else t:switch(n){case B:return mo(l.children,g,y,s);case Q:b=8,g|=8;break;case rt:return n=ii(12,l,s,g|2),n.elementType=rt,n.lanes=y,n;case Ft:return n=ii(13,l,s,g),n.elementType=Ft,n.lanes=y,n;case Et:return n=ii(19,l,s,g),n.elementType=Et,n.lanes=y,n;case J:return pf(l,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case wt:b=10;break t;case ft:b=9;break t;case Dt:b=11;break t;case Kt:b=14;break t;case q:b=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=ii(b,l,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function mo(n,s,l,h){return n=ii(7,n,h,s),n.lanes=l,n}function pf(n,s,l,h){return n=ii(22,n,h,s),n.elementType=J,n.lanes=l,n.stateNode={isHidden:!1},n}function xm(n,s,l){return n=ii(6,n,null,s),n.lanes=l,n}function km(n,s,l){return s=ii(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function lE(n,s,l,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tg(0),this.expirationTimes=tg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tg(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Tm(n,s,l,h,g,y,b,P,R){return n=new lE(n,s,l,P,R),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ii(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bg(y),n}function uE(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function bA(n){if(!n)return ur;n=n._reactInternals;t:{if(io(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(An(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(An(l))return K0(n,l,s)}return s}function _A(n,s,l,h,g,y,b,P,R){return n=Tm(l,h,!0,n,g,y,b,P,R),n.context=bA(null),l=n.current,h=un(),g=mr(l),y=ms(h,g),y.callback=s??null,dr(l,y,g),n.current.lanes=g,Pu(n,g,h),_n(n,h),n}function gf(n,s,l,h){var g=s.current,y=un(),b=mr(g);return l=bA(l),s.context===null?s.context=l:s.pendingContext=l,s=ms(y,b),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=dr(g,s,b),n!==null&&(Si(n,g,b,y),Gd(n,g,b)),b}function mf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function EA(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Pm(n,s){EA(n,s),(n=n.alternate)&&EA(n,s)}var CA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Rm(n){this._internalRoot=n}yf.prototype.render=Rm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));gf(n,s,null,null)},yf.prototype.unmount=Rm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;fo(function(){gf(null,n,null,null)}),s[hs]=null}};function yf(n){this._internalRoot=n}yf.prototype.unstable_scheduleHydration=function(n){if(n){var s=l0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<sr.length&&s!==0&&s<sr[l].priority;l++);sr.splice(l,0,n),l===0&&h0(n)}};function Mm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function xA(){}function cE(n,s,l,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var $=mf(b);y.call($)}}var b=_A(s,h,n,0,null,!1,!1,"",xA);return n._reactRootContainer=b,n[hs]=b.current,Uu(n.nodeType===8?n.parentNode:n),fo(),b}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var P=h;h=function(){var $=mf(R);P.call($)}}var R=Tm(n,0,!1,null,null,!1,!1,"",xA);return n._reactRootContainer=R,n[hs]=R.current,Uu(n.nodeType===8?n.parentNode:n),fo(function(){gf(s,R,l,h)}),R}function wf(n,s,l,h,g){var y=l._reactRootContainer;if(y){var b=y;if(typeof g=="function"){var P=g;g=function(){var R=mf(b);P.call(R)}}gf(s,b,n,g)}else b=cE(l,s,n,g,h);return mf(b)}o0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Tu(s.pendingLanes);l!==0&&(eg(s,l|1),_n(s,fe()),!($t&6)&&(el=fe()+500,cr()))}break;case 13:fo(function(){var h=gs(n,1);if(h!==null){var g=un();Si(h,n,1,g)}}),Pm(n,1)}},ng=function(n){if(n.tag===13){var s=gs(n,134217728);if(s!==null){var l=un();Si(s,n,134217728,l)}Pm(n,134217728)}},a0=function(n){if(n.tag===13){var s=mr(n),l=gs(n,s);if(l!==null){var h=un();Si(l,n,s,h)}Pm(n,s)}},l0=function(){return Ut},u0=function(n,s){var l=Ut;try{return Ut=n,s()}finally{Ut=l}},qp=function(n,s,l){switch(s){case"input":if(Hp(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var g=Dd(h);if(!g)throw Error(e(90));Iv(h),Hp(h,g)}}}break;case"textarea":$v(n,l);break;case"select":s=l.value,s!=null&&La(n,!!l.multiple,s,!1)}},Xv=bm,qv=fo;var hE={usingClientEntryPoint:!1,Events:[Wu,ja,Dd,Gv,Wv,bm]},oc={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dE={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Zv(n),n===null?null:n.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{md=Af.inject(dE),zi=Af}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hE,En.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mm(s))throw Error(e(200));return uE(n,s,null,l)},En.createRoot=function(n,s){if(!Mm(n))throw Error(e(299));var l=!1,h="",g=CA;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Tm(n,1,!1,null,null,l,!1,h,g),n[hs]=s.current,Uu(n.nodeType===8?n.parentNode:n),new Rm(s)},En.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=Zv(s),n=n===null?null:n.stateNode,n},En.flushSync=function(n){return fo(n)},En.hydrate=function(n,s,l){if(!vf(s))throw Error(e(200));return wf(null,n,s,!0,l)},En.hydrateRoot=function(n,s,l){if(!Mm(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,g=!1,y="",b=CA;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),s=_A(s,null,n,1,l??null,g,!1,y,b),n[hs]=s.current,Uu(n),h)for(n=0;n<h.length;n++)l=h[n],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new yf(s)},En.render=function(n,s,l){if(!vf(s))throw Error(e(200));return wf(null,n,s,!1,l)},En.unmountComponentAtNode=function(n){if(!vf(n))throw Error(e(40));return n._reactRootContainer?(fo(function(){wf(null,null,n,!1,function(){n._reactRootContainer=null,n[hs]=null})}),!0):!1},En.unstable_batchedUpdates=bm,En.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!vf(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return wf(n,s,l,!1,h)},En.version="18.3.1-next-f1338f8080-20240426",En}var DA;function bE(){if(DA)return Dm.exports;DA=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Dm.exports=SE(),Dm.exports}var FA;function _E(){if(FA)return Sf;FA=1;var d=bE();return Sf.createRoot=d.createRoot,Sf.hydrateRoot=d.hydrateRoot,Sf}var EE=_E();function xa(d){return Object.keys(d)}function $m(d){return d&&typeof d=="object"&&!Array.isArray(d)}function dv(d,t){const e={...d},i=t;return $m(d)&&$m(t)&&Object.keys(t).forEach(r=>{$m(i[r])&&r in d?e[r]=dv(e[r],i[r]):e[r]=i[r]}),e}function CE(d){var t;return typeof d!="string"||!d.includes("var(--mantine-scale)")?d:(t=d.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function xE(d){const t=CE(d);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function zm(d){return d==="0rem"?"0rem":`calc(${d} * var(--mantine-scale))`}function hS(d,{shouldScale:t=!1}={}){function e(i){if(i===0||i==="0")return`0${d}`;if(typeof i=="number"){const r=`${i/16}${d}`;return t?zm(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(o=>e(o)).join(",");if(i.includes(" "))return i.split(" ").map(o=>e(o)).join(" ");if(i.includes(d))return t?zm(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const o=`${Number(r)/16}${d}`;return t?zm(o):o}}return i}return e}const Y=hS("rem",{shouldScale:!0}),OA=hS("em"),dS=typeof document<"u"?Te.useLayoutEffect:Te.useEffect,fS=Te.createContext(null);function pS(){const d=Te.useContext(fS);if(!d)throw new Error("[@mantine/core] MantineProvider was not found in tree");return d}function kE(){return pS().cssVariablesResolver}function gS(){return pS().getStyleNonce}function TE(d){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(d)}function PE(d){let t=d.replace("#","");if(t.length===3){const u=t.split("");t=[u[0],u[0],u[1],u[1],u[2],u[2]].join("")}if(t.length===8){const u=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:u}}const e=parseInt(t,16),i=e>>16&255,r=e>>8&255,o=e&255;return{r:i,g:r,b:o,a:1}}function RE(d){const[t,e,i,r]=d.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:e,b:i,a:r||1}}function ME(d){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,e=d.match(t);if(!e)return{r:0,g:0,b:0,a:1};const i=parseInt(e[1],10),r=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100,u=e[5]?parseFloat(e[5]):void 0,c=(1-Math.abs(2*o-1))*r,f=i/60,p=c*(1-Math.abs(f%2-1)),m=o-c/2;let v,w,S;return f>=0&&f<1?(v=c,w=p,S=0):f>=1&&f<2?(v=p,w=c,S=0):f>=2&&f<3?(v=0,w=c,S=p):f>=3&&f<4?(v=0,w=p,S=c):f>=4&&f<5?(v=p,w=0,S=c):(v=c,w=0,S=p),{r:Math.round((v+m)*255),g:Math.round((w+m)*255),b:Math.round((S+m)*255),a:u||1}}function fv(d){return TE(d)?PE(d):d.startsWith("rgb")?RE(d):d.startsWith("hsl")?ME(d):{r:0,g:0,b:0,a:1}}function bf(d,t){if(d.startsWith("var("))return`color-mix(in srgb, ${d}, black ${t*100}%)`;const{r:e,g:i,b:r,a:o}=fv(d),u=1-t,c=f=>Math.round(f*u);return`rgba(${c(e)}, ${c(i)}, ${c(r)}, ${o})`}function Lc(d,t){return typeof d.primaryShade=="number"?d.primaryShade:t==="dark"?d.primaryShade.dark:d.primaryShade.light}function Hm(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function LE(d){const t=d.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function IE(d){if(d.startsWith("oklch("))return(LE(d)||0)/100;const{r:t,g:e,b:i}=fv(d),r=t/255,o=e/255,u=i/255,c=Hm(r),f=Hm(o),p=Hm(u);return .2126*c+.7152*f+.0722*p}function lc(d,t=.179){return d.startsWith("var(")?!1:IE(d)>t}function pv({color:d,theme:t,colorScheme:e}){if(typeof d!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof d}`);if(d==="bright")return{color:d,value:e==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lc(e==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(d==="dimmed")return{color:d,value:e==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:lc(e==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(d==="white"||d==="black")return{color:d,value:d==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lc(d==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${d}`};const[i,r]=d.split("."),o=r?Number(r):void 0,u=i in t.colors;if(u){const c=o!==void 0?t.colors[i][o]:t.colors[i][Lc(t,e||"light")];return{color:i,value:c,shade:o,isThemeColor:u,isLight:lc(c,t.luminanceThreshold),variable:r?`--mantine-color-${i}-${o}`:`--mantine-color-${i}-filled`}}return{color:d,value:d,isThemeColor:u,isLight:lc(d,t.luminanceThreshold),shade:o,variable:void 0}}function $A(d,t){const e=pv({color:d||t.primaryColor,theme:t});return e.variable?`var(${e.variable})`:d}function zA(d,t){const e={from:(d==null?void 0:d.from)||t.defaultGradient.from,to:(d==null?void 0:d.to)||t.defaultGradient.to,deg:(d==null?void 0:d.deg)||t.defaultGradient.deg||0},i=$A(e.from,t),r=$A(e.to,t);return`linear-gradient(${e.deg}deg, ${i} 0%, ${r} 100%)`}function ws(d,t){if(typeof d!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(d.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${d}, transparent ${o}%)`}if(d.startsWith("oklch"))return d.includes("/")?d.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):d.replace(")",` / ${t})`);const{r:e,g:i,b:r}=fv(d);return`rgba(${e}, ${i}, ${r}, ${t})`}const il=ws,NE=({color:d,theme:t,variant:e,gradient:i,autoContrast:r})=>{const o=pv({color:d,theme:t}),u=typeof r=="boolean"?r:t.autoContrast;if(e==="filled"){const c=u&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${d}-filled)`,hover:`var(--mantine-color-${d}-filled-hover)`,color:c,border:`${Y(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:c,border:`${Y(1)} solid transparent`}:{background:d,hover:bf(d,.1),color:c,border:`${Y(1)} solid transparent`}}if(e==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${d}-light)`,hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${Y(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:ws(c,.1),hover:ws(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Y(1)} solid transparent`}}return{background:ws(d,.1),hover:ws(d,.12),color:d,border:`${Y(1)} solid transparent`}}if(e==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${d}-outline-hover)`,color:`var(--mantine-color-${d}-outline)`,border:`${Y(1)} solid var(--mantine-color-${d}-outline)`}:{background:"transparent",hover:ws(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${Y(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:ws(d,.05),color:d,border:`${Y(1)} solid ${d}`};if(e==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${Y(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:"transparent",hover:ws(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Y(1)} solid transparent`}}return{background:"transparent",hover:ws(d,.12),color:d,border:`${Y(1)} solid transparent`}}return e==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${d}-light-color)`,border:`${Y(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Y(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:d,border:`${Y(1)} solid transparent`}:e==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:`var(--mantine-color-${d}-filled)`,border:`${Y(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${Y(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:d,border:`${Y(1)} solid transparent`}:e==="gradient"?{background:zA(i,t),hover:zA(i,t),color:"var(--mantine-color-white)",border:"none"}:e==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Y(1)} solid var(--mantine-color-default-border)`}:{}},DE={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},HA="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",gv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:DE,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:NE,autoContrast:!1,luminanceThreshold:.3,fontFamily:HA,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:HA,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Y(34),lineHeight:"1.3"},h2:{fontSize:Y(26),lineHeight:"1.35"},h3:{fontSize:Y(22),lineHeight:"1.4"},h4:{fontSize:Y(18),lineHeight:"1.45"},h5:{fontSize:Y(16),lineHeight:"1.5"},h6:{fontSize:Y(14),lineHeight:"1.5"}}},fontSizes:{xs:Y(12),sm:Y(14),md:Y(16),lg:Y(18),xl:Y(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Y(2),sm:Y(4),md:Y(8),lg:Y(16),xl:Y(32)},spacing:{xs:Y(10),sm:Y(12),md:Y(16),lg:Y(20),xl:Y(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Y(1)} ${Y(3)} rgba(0, 0, 0, 0.05), 0 ${Y(1)} ${Y(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Y(1)} ${Y(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Y(10)} ${Y(15)} ${Y(-5)}, rgba(0, 0, 0, 0.04) 0 ${Y(7)} ${Y(7)} ${Y(-5)}`,md:`0 ${Y(1)} ${Y(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Y(20)} ${Y(25)} ${Y(-5)}, rgba(0, 0, 0, 0.04) 0 ${Y(10)} ${Y(10)} ${Y(-5)}`,lg:`0 ${Y(1)} ${Y(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Y(28)} ${Y(23)} ${Y(-7)}, rgba(0, 0, 0, 0.04) 0 ${Y(12)} ${Y(12)} ${Y(-7)}`,xl:`0 ${Y(1)} ${Y(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Y(36)} ${Y(28)} ${Y(-7)}, rgba(0, 0, 0, 0.04) 0 ${Y(17)} ${Y(17)} ${Y(-7)}`},other:{},components:{}};function BA(d){return d==="auto"||d==="dark"||d==="light"}function FE({key:d="mantine-color-scheme-value"}={}){let t;return{get:e=>{if(typeof window>"u")return e;try{const i=window.localStorage.getItem(d);return BA(i)?i:e}catch{return e}},set:e=>{try{window.localStorage.setItem(d,e)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:e=>{t=i=>{i.storageArea===window.localStorage&&i.key===d&&BA(i.newValue)&&e(i.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(d)}}}const OE="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",jA="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Bm(d){return d<0||d>9?!1:parseInt(d.toString(),10)===d}function UA(d){if(!(d.primaryColor in d.colors))throw new Error(OE);if(typeof d.primaryShade=="object"&&(!Bm(d.primaryShade.dark)||!Bm(d.primaryShade.light)))throw new Error(jA);if(typeof d.primaryShade=="number"&&!Bm(d.primaryShade))throw new Error(jA)}function $E(d,t){var i;if(!t)return UA(d),d;const e=dv(d,t);return t.fontFamily&&!((i=t.headings)!=null&&i.fontFamily)&&(e.headings.fontFamily=t.fontFamily),UA(e),e}const mv=Te.createContext(null),zE=()=>Te.useContext(mv)||gv;function mS(){const d=Te.useContext(mv);if(!d)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return d}function yS({theme:d,children:t,inherit:e=!0}){const i=zE(),r=Te.useMemo(()=>$E(e?i:gv,d),[d,i,e]);return Nt.jsx(mv.Provider,{value:r,children:t})}yS.displayName="@mantine/core/MantineThemeProvider";function HE(){const d=mS(),t=gS(),e=xa(d.breakpoints).reduce((i,r)=>{const o=d.breakpoints[r].includes("px"),u=xE(d.breakpoints[r]),c=o?`${u-.1}px`:OA(u-.1),f=o?`${u}px`:OA(u);return`${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${f}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return Nt.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:e}})}function jm(d){return Object.entries(d).map(([t,e])=>`${t}: ${e};`).join("")}function uc(d,t){return(Array.isArray(d)?d:[d]).reduce((i,r)=>`${r}{${i}}`,t)}function BE(d,t){const e=jm(d.variables),i=e?uc(t,e):"",r=jm(d.dark),o=jm(d.light),u=r?uc(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,r):"",c=o?uc(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${i}${u}${c}`}function jE({color:d,theme:t,autoContrast:e}){return(typeof e=="boolean"?e:t.autoContrast)&&pv({color:d||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function VA(d,t){return jE({color:d.colors[d.primaryColor][Lc(d,t)],theme:d,autoContrast:null})}function _f({theme:d,color:t,colorScheme:e,name:i=t,withColorValues:r=!0}){if(!d.colors[t])return{};if(e==="light"){const c=Lc(d,"light"),f={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${c===9?8:c+1})`,[`--mantine-color-${i}-light`]:il(d.colors[t][c],.1),[`--mantine-color-${i}-light-hover`]:il(d.colors[t][c],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline-hover`]:il(d.colors[t][c],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...f}:f}const o=Lc(d,"dark"),u={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${o===9?8:o+1})`,[`--mantine-color-${i}-light`]:il(d.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${i}-light-hover`]:il(d.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(o-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(o-4,0)})`,[`--mantine-color-${i}-outline-hover`]:il(d.colors[t][Math.max(o-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...u}:u}function UE(d){return!!d&&typeof d=="object"&&"mantine-virtual-color"in d}function sl(d,t,e){xa(t).forEach(i=>Object.assign(d,{[`--mantine-${e}-${i}`]:t[i]}))}const vS=d=>{const t=Lc(d,"light"),e=d.defaultRadius in d.radius?d.radius[d.defaultRadius]:Y(d.defaultRadius),i={variables:{"--mantine-scale":d.scale.toString(),"--mantine-cursor-type":d.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":d.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":d.fontSmoothing?"grayscale":"unset","--mantine-color-white":d.white,"--mantine-color-black":d.black,"--mantine-line-height":d.lineHeights.md,"--mantine-font-family":d.fontFamily,"--mantine-font-family-monospace":d.fontFamilyMonospace,"--mantine-font-family-headings":d.headings.fontFamily,"--mantine-heading-font-weight":d.headings.fontWeight,"--mantine-heading-text-wrap":d.headings.textWrap,"--mantine-radius-default":e,"--mantine-primary-color-filled":`var(--mantine-color-${d.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${d.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${d.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${d.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${d.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":VA(d,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":d.black,"--mantine-color-body":d.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":VA(d,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};sl(i.variables,d.breakpoints,"breakpoint"),sl(i.variables,d.spacing,"spacing"),sl(i.variables,d.fontSizes,"font-size"),sl(i.variables,d.lineHeights,"line-height"),sl(i.variables,d.shadows,"shadow"),sl(i.variables,d.radius,"radius"),d.colors[d.primaryColor].forEach((o,u)=>{i.variables[`--mantine-primary-color-${u}`]=`var(--mantine-color-${d.primaryColor}-${u})`}),xa(d.colors).forEach(o=>{const u=d.colors[o];if(UE(u)){Object.assign(i.light,_f({theme:d,name:u.name,color:u.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,_f({theme:d,name:u.name,color:u.dark,colorScheme:"dark",withColorValues:!0}));return}u.forEach((c,f)=>{i.variables[`--mantine-color-${o}-${f}`]=c}),Object.assign(i.light,_f({theme:d,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,_f({theme:d,color:o,colorScheme:"dark",withColorValues:!1}))});const r=d.headings.sizes;return xa(r).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=r[o].fontSize,i.variables[`--mantine-${o}-line-height`]=r[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=r[o].fontWeight||d.headings.fontWeight}),i};function VE({theme:d,generator:t}){const e=vS(d),i=t==null?void 0:t(d);return i?dv(e,i):e}const Um=vS(gv);function GE(d){const t={variables:{},light:{},dark:{}};return xa(d.variables).forEach(e=>{Um.variables[e]!==d.variables[e]&&(t.variables[e]=d.variables[e])}),xa(d.light).forEach(e=>{Um.light[e]!==d.light[e]&&(t.light[e]=d.light[e])}),xa(d.dark).forEach(e=>{Um.dark[e]!==d.dark[e]&&(t.dark[e]=d.dark[e])}),t}function WE(d){return`
  ${d}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${d}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function wS({cssVariablesSelector:d,deduplicateCssVariables:t}){const e=mS(),i=gS(),r=kE(),o=VE({theme:e,generator:r}),u=d===":root"&&t,c=u?GE(o):o,f=BE(c,d);return f?Nt.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${f}${u?"":WE(d)}`}}):null}wS.displayName="@mantine/CssVariables";function XE(){const d=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||d(...t)}}function rl(d,t){var r;const e=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=d!=="auto"?d:e?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",i)}function qE({manager:d,defaultColorScheme:t,getRootElement:e,forceColorScheme:i}){const r=Te.useRef(null),[o,u]=Te.useState(()=>d.get(t)),c=i||o,f=Te.useCallback(m=>{i||(rl(m,e),u(m),d.set(m))},[d.set,c,i]),p=Te.useCallback(()=>{u(t),rl(t,e),d.clear()},[d.clear,t]);return Te.useEffect(()=>(d.subscribe(f),d.unsubscribe),[d.subscribe,d.unsubscribe]),dS(()=>{rl(d.get(t),e)},[]),Te.useEffect(()=>{var v;if(i)return rl(i,e),()=>{};i===void 0&&rl(o,e),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const m=w=>{o==="auto"&&rl(w.matches?"dark":"light",e)};return(v=r.current)==null||v.addEventListener("change",m),()=>{var w;return(w=r.current)==null?void 0:w.removeEventListener("change",m)}},[o,i]),{colorScheme:c,setColorScheme:f,clearColorScheme:p}}function YE({respectReducedMotion:d,getRootElement:t}){dS(()=>{var e;d&&((e=t())==null||e.setAttribute("data-respect-reduced-motion","true"))},[d])}XE();function AS({theme:d,children:t,getStyleNonce:e,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:o=!0,withCssVariables:u=!0,cssVariablesSelector:c=":root",classNamesPrefix:f="mantine",colorSchemeManager:p=FE(),defaultColorScheme:m="light",getRootElement:v=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:S,stylesTransform:C}){const{colorScheme:x,setColorScheme:k,clearColorScheme:T}=qE({defaultColorScheme:m,forceColorScheme:S,manager:p,getRootElement:v});return YE({respectReducedMotion:(d==null?void 0:d.respectReducedMotion)||!1,getRootElement:v}),Nt.jsx(fS.Provider,{value:{colorScheme:x,setColorScheme:k,clearColorScheme:T,getRootElement:v,classNamesPrefix:f,getStyleNonce:e,cssVariablesResolver:w,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:C},children:Nt.jsxs(yS,{theme:d,children:[u&&Nt.jsx(wS,{cssVariablesSelector:c,deduplicateCssVariables:o}),r&&Nt.jsx(HE,{}),t]})})}AS.displayName="@mantine/core/MantineProvider";var Rc={};Rc.d=(d,t)=>{for(var e in t)Rc.o(t,e)&&!Rc.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})};Rc.o=(d,t)=>Object.prototype.hasOwnProperty.call(d,t);var bt=globalThis.pdfjsLib={};Rc.d(bt,{AbortException:()=>Jr,AnnotationEditorLayer:()=>rv,AnnotationEditorParamsType:()=>Ot,AnnotationEditorType:()=>xt,AnnotationEditorUIManager:()=>Ta,AnnotationLayer:()=>Vx,AnnotationMode:()=>Sr,ColorPicker:()=>up,DOMSVGFactory:()=>Cv,DrawLayer:()=>lv,FeatureTest:()=>mn,GlobalWorkerOptions:()=>Ks,ImageKind:()=>Tf,InvalidPDFException:()=>Zm,MissingPDFException:()=>Ic,OPS:()=>_i,OutputScale:()=>ty,PDFDataRangeTransport:()=>bb,PDFDateString:()=>Sv,PDFWorker:()=>ml,PasswordResponses:()=>JE,PermissionFlag:()=>ZE,PixelsPerInch:()=>to,RenderingCancelledException:()=>wv,TextLayer:()=>Nc,TouchManager:()=>ap,UnexpectedResponseException:()=>sp,Util:()=>dt,VerbosityLevel:()=>Mp,XfaLayer:()=>Eb,build:()=>Ex,createValidAbsoluteUrl:()=>iC,fetchData:()=>Dp,getDocument:()=>gx,getFilenameFromUrl:()=>dC,getPdfFilenameFromUrl:()=>fC,getXfaPageViewport:()=>pC,isDataScheme:()=>Fp,isPdfFile:()=>Av,noContextMenu:()=>Oi,normalizeUnicode:()=>uC,setLayerDimensions:()=>ka,shadow:()=>Lt,stopEvent:()=>Kn,version:()=>_x});const on=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),SS=[1,0,0,1,0,0],Qm=[.001,0,0,.001,0,0],KE=1e7,Vm=1.35,qn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Sr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},QE="pdfjs_internal_editor_",xt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},ZE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Tf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ee={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},cc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Mp={ERRORS:0,WARNINGS:1,INFOS:5},_i={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},JE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Lp=Mp.WARNINGS;function tC(d){Number.isInteger(d)&&(Lp=d)}function eC(){return Lp}function Ip(d){Lp>=Mp.INFOS&&console.log(`Info: ${d}`)}function kt(d){Lp>=Mp.WARNINGS&&console.log(`Warning: ${d}`)}function Yt(d){throw new Error(d)}function Ae(d,t){d||Yt(t)}function nC(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function iC(d,t=null,e=null){if(!d)return null;try{if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=lC(d)}catch{}}const i=t?new URL(d,t):new URL(d);if(nC(i))return i}catch{}return null}function Lt(d,t,e,i=!1){return Object.defineProperty(d,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const no=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class GA extends no{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gm extends no{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Zm extends no{constructor(t){super(t,"InvalidPDFException")}}class Ic extends no{constructor(t){super(t,"MissingPDFException")}}class sp extends no{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class sC extends no{constructor(t){super(t,"FormatError")}}class Jr extends no{constructor(t){super(t,"AbortException")}}function bS(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&Yt("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const i=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),u=d.subarray(r,o);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function Np(d){typeof d!="string"&&Yt("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=d.charCodeAt(i)&255;return e}function rC(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function yv(d){const t=Object.create(null);for(const[e,i]of d)t[e]=i;return t}function oC(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function aC(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Lt(this,"isLittleEndian",oC())}static get isEvalSupported(){return Lt(this,"isEvalSupported",aC())}static get isOffscreenCanvasSupported(){return Lt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Lt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Lt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Lt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Lt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Wm=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var Qs,Pf,Jm;class dt{static makeHexColor(t,e,i){return`#${Wm[t]}${Wm[e]}${Wm[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,o]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),u=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],o[0],u[0]),Math.min(i[1],r[1],o[1],u[1]),Math.max(i[0],r[0],o[0],u[0]),Math.max(i[1],r[1],o[1],u[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],u=t[2]*e[1]+t[3]*e[3],c=(i+u)/2,f=Math.sqrt((i+u)**2-4*(i*u-o*r))/2,p=c+f||1,m=c-f||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[i,o,r,u]}static bezierBoundingBox(t,e,i,r,o,u,c,f,p){return p?(p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,c),Math.min(e,f),Math.max(t,c),Math.max(e,f)],E(this,Qs,Jm).call(this,t,i,o,c,e,r,u,f,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),p),E(this,Qs,Jm).call(this,t,i,o,c,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p),p}}Qs=new WeakSet,Pf=function(t,e,i,r,o,u,c,f,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,S=w*p,C=v*(v*(v*t+3*p*e)+3*w*i)+S*r,x=v*(v*(v*o+3*p*u)+3*w*c)+S*f;m[0]=Math.min(m[0],C),m[1]=Math.min(m[1],x),m[2]=Math.max(m[2],C),m[3]=Math.max(m[3],x)},Jm=function(t,e,i,r,o,u,c,f,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&E(this,Qs,Pf).call(this,t,e,i,r,o,u,c,f,-v/m,w);return}const S=m**2-4*v*p;if(S<0)return;const C=Math.sqrt(S),x=2*p;E(this,Qs,Pf).call(this,t,e,i,r,o,u,c,f,(-m+C)/x,w),E(this,Qs,Pf).call(this,t,e,i,r,o,u,c,f,(-m-C)/x,w)},_(dt,Qs);function lC(d){return decodeURIComponent(escape(d))}let Xm=null,WA=null;function uC(d){return Xm||(Xm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,WA=new Map([["","t"]])),d.replaceAll(Xm,(t,e,i)=>e?e.normalize("NFKC"):WA.get(i))}function cC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),bS(d)}const vv="pdfjs_internal_id_";function hC(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(bS(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});const As="http://www.w3.org/2000/svg",Ao=class Ao{};yt(Ao,"CSS",96),yt(Ao,"PDF",72),yt(Ao,"PDF_TO_CSS_UNITS",Ao.CSS/Ao.PDF);let to=Ao;async function Dp(d,t="text"){if(pc(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class ad{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:o=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=o,this.offsetY=u,i*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,v,w,S;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,v=0,w=0,S=1;break;case 90:m=0,v=1,w=1,S=0;break;case 270:m=0,v=-1,w=-1,S=0;break;case 0:m=1,v=0,w=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(w=-w,S=-S);let C,x,k,T;m===0?(C=Math.abs(p-t[1])*i+o,x=Math.abs(f-t[0])*i+u,k=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(C=Math.abs(f-t[0])*i+o,x=Math.abs(p-t[1])*i+u,k=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[m*i,v*i,w*i,S*i,C-m*i*f-w*i*p,x-v*i*f-S*i*p],this.width=k,this.height=T}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(r=>r*t);return Lt(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new ad({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){return dt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=dt.applyTransform([t[0],t[1]],this.transform),i=dt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return dt.applyInverseTransform([t,e],this.transform)}}class wv extends no{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Fp(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function Av(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function dC(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function fC(d,t="document.pdf"){if(typeof d!="string")return t;if(Fp(d))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(d);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||t}class XA{constructor(){yt(this,"started",Object.create(null));yt(this,"times",[])}time(t){t in this.started&&kt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||kt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-r}ms
`);return t.join("")}}function pc(d,t){try{const{protocol:e}=t?new URL(d,t):new URL(d);return e==="http:"||e==="https:"}catch{return!1}}function Oi(d){d.preventDefault()}function Kn(d){d.preventDefault(),d.stopPropagation()}var Fc;class Sv{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Fc)||A(this,Fc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Fc).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(u+=m,c+=v):p==="+"&&(u-=m,c-=v),new Date(Date.UTC(i,r,o,u,c,f))}}Fc=new WeakMap,_(Sv,Fc);function pC(d,{scale:t=1,rotation:e=0}){const{width:i,height:r}=d.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new ad({viewBox:o,userUnit:1,scale:t,rotation:e})}function bv(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(kt(`Not a valid color format: "${d}"`),[0,0,0])}function gC(d){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of d.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;d.set(e,bv(i))}t.remove()}function se(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform();return[t,e,i,r,o,u]}function Vi(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform().invertSelf();return[t,e,i,r,o,u]}function ka(d,t,e=!1,i=!0){if(t instanceof ad){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:u}=d,c=mn.isCSSRoundSupported,f=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,m=c?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,v=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=v):(u.width=v,u.height=m)}i&&d.setAttribute("data-main-rotation",t.rotation)}class ty{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var br,bo,Ei,_o,Oc,$c,dp,_S,yn,ES,CS,Rf,xS,ny;const _s=class _s{constructor(t){_(this,yn);_(this,br,null);_(this,bo,null);_(this,Ei);_(this,_o,null);_(this,Oc,null);A(this,Ei,t),a(_s,$c)||A(_s,$c,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=A(this,br,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ei)._uiManager._signal;t.addEventListener("contextmenu",Oi,{signal:e}),t.addEventListener("pointerdown",E(_s,dp,_S),{signal:e});const i=A(this,_o,document.createElement("div"));i.className="buttons",t.append(i);const r=a(this,Ei).toolbarPosition;if(r){const{style:o}=t,u=a(this,Ei)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,yn,xS).call(this),t}get div(){return a(this,br)}hide(){var t;a(this,br).classList.add("hidden"),(t=a(this,bo))==null||t.hideDropdown()}show(){var t;a(this,br).classList.remove("hidden"),(t=a(this,Oc))==null||t.shown()}async addAltText(t){const e=await t.render();E(this,yn,Rf).call(this,e),a(this,_o).prepend(e,a(this,yn,ny)),A(this,Oc,t)}addColorPicker(t){A(this,bo,t);const e=t.renderButton();E(this,yn,Rf).call(this,e),a(this,_o).prepend(e,a(this,yn,ny))}remove(){var t;a(this,br).remove(),(t=a(this,bo))==null||t.destroy(),A(this,bo,null)}};br=new WeakMap,bo=new WeakMap,Ei=new WeakMap,_o=new WeakMap,Oc=new WeakMap,$c=new WeakMap,dp=new WeakSet,_S=function(t){t.stopPropagation()},yn=new WeakSet,ES=function(t){a(this,Ei)._focusEventsAllowed=!1,Kn(t)},CS=function(t){a(this,Ei)._focusEventsAllowed=!0,Kn(t)},Rf=function(t){const e=a(this,Ei)._uiManager._signal;t.addEventListener("focusin",E(this,yn,ES).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,yn,CS).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Oi,{signal:e})},xS=function(){const{editorType:t,_uiManager:e}=a(this,Ei),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(_s,$c)[t]),E(this,yn,Rf).call(this,i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,_o).append(i)},ny=function(){const t=document.createElement("div");return t.className="divider",t},_(_s,dp),_(_s,$c,null);let ey=_s;var zc,Eo,Co,eo,kS,TS,PS;class mC{constructor(t){_(this,eo);_(this,zc,null);_(this,Eo,null);_(this,Co);A(this,Co,t)}show(t,e,i){const[r,o]=E(this,eo,TS).call(this,e,i),{style:u}=a(this,Eo)||A(this,Eo,E(this,eo,kS).call(this));t.append(a(this,Eo)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Eo).remove()}}zc=new WeakMap,Eo=new WeakMap,Co=new WeakMap,eo=new WeakSet,kS=function(){const t=A(this,Eo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Oi,{signal:a(this,Co)._signal});const e=A(this,zc,document.createElement("div"));return e.className="buttons",t.append(e),E(this,eo,PS).call(this),t},TS=function(t,e){let i=0,r=0;for(const o of t){const u=o.y+o.height;if(u<i)continue;const c=o.x+(e?o.width:0);if(u>i){r=c,i=u;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,i]},PS=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,Co)._signal;t.addEventListener("contextmenu",Oi,{signal:i}),t.addEventListener("click",()=>{a(this,Co).highlightSelection("floating_button")},{signal:i}),a(this,zc).append(t)};function rp(d,t,e){for(const i of e)t.addEventListener(i,d[i].bind(d))}var fp;class yC{constructor(){_(this,fp,0)}get id(){return`${QE}${cn(this,fp)._++}`}}fp=new WeakMap;var yl,Hc,tn,vl,Mf;const kv=class kv{constructor(){_(this,vl);_(this,yl,cC());_(this,Hc,0);_(this,tn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Lt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:o}=t;return E(this,vl,Mf).call(this,`${e}_${i}_${r}_${o}`,t)}async getFromUrl(t){return E(this,vl,Mf).call(this,t,t)}async getFromBlob(t,e){const i=await e;return E(this,vl,Mf).call(this,t,i)}async getFromId(t){a(this,tn)||A(this,tn,new Map);const e=a(this,tn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,tn)||A(this,tn,new Map);let i=a(this,tn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${a(this,yl)}_${cn(this,Hc)._++}`,refCounter:1,isSvg:!1},a(this,tn).set(t,i),a(this,tn).set(i.id,i),i}getSvgUrl(t){const e=a(this,tn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,tn)||A(this,tn,new Map);const e=a(this,tn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=o.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,yl)}_`)}};yl=new WeakMap,Hc=new WeakMap,tn=new WeakMap,vl=new WeakSet,Mf=async function(t,e){a(this,tn)||A(this,tn,new Map);let i=a(this,tn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,yl)}_${cn(this,Hc)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await Dp(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=kv._isSVGFittingCanvas,u=new FileReader,c=new Image,f=new Promise((p,m)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},u.onload=async()=>{const v=i.svgUrl=u.result;c.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},c.onerror=u.onerror=m});u.readAsDataURL(r),await f}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){kt(r),i=null}return a(this,tn).set(t,i),i&&a(this,tn).set(i.id,i),i};let iy=kv;var ge,_r,Bc,le;class vC{constructor(t=128){_(this,ge,[]);_(this,_r,!1);_(this,Bc);_(this,le,-1);A(this,Bc,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),a(this,_r))return;const f={cmd:t,undo:e,post:i,type:o};if(a(this,le)===-1){a(this,ge).length>0&&(a(this,ge).length=0),A(this,le,0),a(this,ge).push(f);return}if(u&&a(this,ge)[a(this,le)].type===o){c&&(f.undo=a(this,ge)[a(this,le)].undo),a(this,ge)[a(this,le)]=f;return}const p=a(this,le)+1;p===a(this,Bc)?a(this,ge).splice(0,1):(A(this,le,p),p<a(this,ge).length&&a(this,ge).splice(p)),a(this,ge).push(f)}undo(){if(a(this,le)===-1)return;A(this,_r,!0);const{undo:t,post:e}=a(this,ge)[a(this,le)];t(),e==null||e(),A(this,_r,!1),A(this,le,a(this,le)-1)}redo(){if(a(this,le)<a(this,ge).length-1){A(this,le,a(this,le)+1),A(this,_r,!0);const{cmd:t,post:e}=a(this,ge)[a(this,le)];t(),e==null||e(),A(this,_r,!1)}}hasSomethingToUndo(){return a(this,le)!==-1}hasSomethingToRedo(){return a(this,le)<a(this,ge).length-1}cleanType(t){if(a(this,le)!==-1){for(let e=a(this,le);e>=0;e--)if(a(this,ge)[e].type!==t){a(this,ge).splice(e+1,a(this,le)-e),A(this,le,e);return}a(this,ge).length=0,A(this,le,-1)}}destroy(){A(this,ge,null)}}ge=new WeakMap,_r=new WeakMap,Bc=new WeakMap,le=new WeakMap;var pp,RS;class ld{constructor(t){_(this,pp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=mn.platform;for(const[i,r,o={}]of t)for(const u of i){const c=u.startsWith("mac+");e&&c?(this.callbacks.set(u.slice(4),{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!c&&(this.callbacks.set(u,{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(E(this,pp,RS).call(this,e));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:u=[],checker:c=null}}=i;c&&!c(t,e)||(r.bind(t,...u,e)(),o||Kn(e))}}pp=new WeakSet,RS=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const gp=class gp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return gC(t),Lt(this,"_colors",t)}convert(t){const e=bv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((o,u)=>o===e[u]))return gp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?dt.makeHexColor(...e):t}};yt(gp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let sy=gp;var wl,Fn,xe,Be,Al,Cs,Sl,ri,Er,xo,bl,ko,Xi,Ci,To,jc,Uc,_l,Vc,qi,Cr,El,xr,Yi,mp,kr,Gc,Tr,Po,Wc,Xc,Ie,Vt,xs,Ro,qc,Yc,Pr,Ki,ks,Kc,oi,K,Lf,ry,MS,LS,If,IS,NS,DS,oy,FS,ay,ly,OS,hn,Ss,$S,zS,uy,HS,gc,cy;const fl=class fl{constructor(t,e,i,r,o,u,c,f,p,m,v,w,S){_(this,K);_(this,wl,new AbortController);_(this,Fn,null);_(this,xe,new Map);_(this,Be,new Map);_(this,Al,null);_(this,Cs,null);_(this,Sl,null);_(this,ri,new vC);_(this,Er,null);_(this,xo,null);_(this,bl,0);_(this,ko,new Set);_(this,Xi,null);_(this,Ci,null);_(this,To,new Set);yt(this,"_editorUndoBar",null);_(this,jc,!1);_(this,Uc,!1);_(this,_l,!1);_(this,Vc,null);_(this,qi,null);_(this,Cr,null);_(this,El,null);_(this,xr,!1);_(this,Yi,null);_(this,mp,new yC);_(this,kr,!1);_(this,Gc,!1);_(this,Tr,null);_(this,Po,null);_(this,Wc,null);_(this,Xc,null);_(this,Ie,xt.NONE);_(this,Vt,new Set);_(this,xs,null);_(this,Ro,null);_(this,qc,null);_(this,Yc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Pr,[0,0]);_(this,Ki,null);_(this,ks,null);_(this,Kc,null);_(this,oi,null);const C=this._signal=a(this,wl).signal;A(this,ks,t),A(this,Kc,e),A(this,Al,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:C}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),r._on("setpreference",this.onSetPreference.bind(this),{signal:C}),r._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:C}),E(this,K,IS).call(this),E(this,K,OS).call(this),E(this,K,oy).call(this),A(this,Cs,o.annotationStorage),A(this,Vc,o.filterFactory),A(this,Ro,u),A(this,El,c||null),A(this,jc,f),A(this,Uc,p),A(this,_l,m),A(this,Xc,v||null),this.viewParameters={realScale:to.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=fl.prototype,e=u=>a(u,ks).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:f}=c;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Lt(this,"_keyboardManager",new ld([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,ks).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,ks).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,i,r,o;(t=a(this,oi))==null||t.resolve(),A(this,oi,null),(e=a(this,wl))==null||e.abort(),A(this,wl,null),this._signal=null;for(const u of a(this,Be).values())u.destroy();a(this,Be).clear(),a(this,xe).clear(),a(this,To).clear(),A(this,Fn,null),a(this,Vt).clear(),a(this,ri).destroy(),(i=a(this,Al))==null||i.destroy(),(r=a(this,Yi))==null||r.hide(),A(this,Yi,null),a(this,qi)&&(clearTimeout(a(this,qi)),A(this,qi,null)),a(this,Ki)&&(clearTimeout(a(this,Ki)),A(this,Ki,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Xc)}get useNewAltTextFlow(){return a(this,Uc)}get useNewAltTextWhenAddingImage(){return a(this,_l)}get hcmFilter(){return Lt(this,"hcmFilter",a(this,Ro)?a(this,Vc).addHCMFilter(a(this,Ro).foreground,a(this,Ro).background):"none")}get direction(){return Lt(this,"direction",getComputedStyle(a(this,ks)).direction)}get highlightColors(){return Lt(this,"highlightColors",a(this,El)?new Map(a(this,El).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Lt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,xo,t)}setMainHighlightColorPicker(t){A(this,Wc,t)}editAltText(t,e=!1){var i;(i=a(this,Al))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,_l,e);break}}onPageChanging({pageNumber:t}){A(this,bl,t-1)}focusMainContainer(){a(this,ks).focus()}findParent(t,e){for(const i of a(this,Be).values()){const{x:r,y:o,width:u,height:c}=i.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=o&&e<=o+c)return i}return null}disableUserSelect(t=!1){a(this,Kc).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,To).add(t)}removeShouldRescale(t){a(this,To).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*to.PDF_TO_CSS_UNITS;for(const i of a(this,To))i.onScaleChanging();(e=a(this,xo))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u}=e,c=e.toString(),p=E(this,K,Lf).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const v=E(this,K,ry).call(this,p),w=a(this,Ie)===xt.NONE,S=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(xt.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Cs)&&!a(this,Cs).has(t.id)&&a(this,Cs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,xr)&&(A(this,xr,!1),E(this,K,If).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Vt))if(e.div.contains(t)){A(this,Po,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Po))return;const[t,e]=a(this,Po);A(this,Po,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,K,oy).call(this),E(this,K,ay).call(this)}removeEditListeners(){E(this,K,FS).call(this),E(this,K,ly).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,Ci))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,Ci))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,Fn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,Vt)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of a(this,Ci))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){kt(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of i){const p=await r.deserialize(f);if(!p)return;o.push(p)}const u=()=>{for(const f of o)E(this,K,uy).call(this,f);E(this,K,cy).call(this,o)},c=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(o){kt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,Ie)!==xt.NONE&&!this.isEditorHandlingKeyboard&&fl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,xr)&&(A(this,xr,!1),E(this,K,If).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,K,NS).call(this),E(this,K,ay).call(this),E(this,K,hn).call(this,{isEditing:a(this,Ie)!==xt.NONE,isEmpty:E(this,K,gc).call(this),hasSomethingToUndo:a(this,ri).hasSomethingToUndo(),hasSomethingToRedo:a(this,ri).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,K,DS).call(this),E(this,K,ly).call(this),E(this,K,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Ci)){A(this,Ci,t);for(const e of a(this,Ci))E(this,K,Ss).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,mp).id}get currentLayer(){return a(this,Be).get(a(this,bl))}getLayer(t){return a(this,Be).get(t)}get currentPageIndex(){return a(this,bl)}addLayer(t){a(this,Be).set(t.pageIndex,t),a(this,kr)?t.enable():t.disable()}removeLayer(t){a(this,Be).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var r;if(a(this,Ie)!==t&&!(a(this,oi)&&(await a(this,oi).promise,!a(this,oi)))){if(A(this,oi,Promise.withResolvers()),A(this,Ie,t),t===xt.NONE){this.setEditingState(!1),E(this,K,zS).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,oi).resolve();return}this.setEditingState(!0),await E(this,K,$S).call(this),this.unselectAll();for(const o of a(this,Be).values())o.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,oi).resolve();return}for(const o of a(this,xe).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();a(this,oi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,Ie)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,Ci)){switch(t){case Ot.CREATE:this.currentLayer.addNewEditor();return;case Ot.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,Wc))==null||i.updateColor(e);break;case Ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,qc)||A(this,qc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of a(this,Vt))r.updateParams(t,e);for(const r of a(this,Ci))r.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var o;for(const u of a(this,xe).values())u.editorType===t&&u.show(e);(((o=a(this,qc))==null?void 0:o.get(Ot.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,K,Ss).call(this,[[Ot.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Gc)!==t){A(this,Gc,t);for(const e of a(this,Be).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,xe).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,xe).get(t)}addEditor(t){a(this,xe).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,qi)&&clearTimeout(a(this,qi)),A(this,qi,setTimeout(()=>{this.focusMainContainer(),A(this,qi,null)},0))),a(this,xe).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,ko).has(t.annotationElementId))&&((e=a(this,Cs))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,ko).has(t)}removeDeletedAnnotationElement(t){a(this,ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Fn)!==t&&(A(this,Fn,t),t&&E(this,K,Ss).call(this,t.propertiesToUpdate))}updateUI(t){a(this,K,HS)===t&&E(this,K,Ss).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,K,Ss).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Vt).has(t)){a(this,Vt).delete(t),t.unselect(),E(this,K,hn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Vt).add(t),t.select(),E(this,K,Ss).call(this,t.propertiesToUpdate),E(this,K,hn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,xo))==null||e.commitOrRemove();for(const i of a(this,Vt))i!==t&&i.unselect();a(this,Vt).clear(),a(this,Vt).add(t),t.select(),E(this,K,Ss).call(this,t.propertiesToUpdate),E(this,K,hn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Vt).has(t)}get firstSelectedEditor(){return a(this,Vt).values().next().value}unselect(t){t.unselect(),a(this,Vt).delete(t),E(this,K,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Vt).size!==0}get isEnterHandled(){return a(this,Vt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,ri).undo(),E(this,K,hn).call(this,{hasSomethingToUndo:a(this,ri).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,K,gc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,ri).redo(),E(this,K,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ri).hasSomethingToRedo(),isEmpty:E(this,K,gc).call(this)})}addCommands(t){a(this,ri).add(t),E(this,K,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,K,gc).call(this)})}cleanUndoStack(t){a(this,ri).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Vt)],i=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const u of e)E(this,K,uy).call(this,u)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Fn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Fn)||this.hasSelection}selectAll(){for(const t of a(this,Vt))t.commit();E(this,K,cy).call(this,a(this,xe).values())}unselectAll(){var t;if(!(a(this,Fn)&&(a(this,Fn).commitOrRemove(),a(this,Ie)!==xt.NONE))&&!((t=a(this,xo))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Vt))e.unselect();a(this,Vt).clear(),E(this,K,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Pr)[0]+=t,a(this,Pr)[1]+=e;const[r,o]=a(this,Pr),u=[...a(this,Vt)],c=1e3;a(this,Ki)&&clearTimeout(a(this,Ki)),A(this,Ki,setTimeout(()=>{A(this,Ki,null),a(this,Pr)[0]=a(this,Pr)[1]=0,this.addCommands({cmd:()=>{for(const f of u)a(this,xe).has(f.id)&&f.translateInPage(r,o)},undo:()=>{for(const f of u)a(this,xe).has(f.id)&&f.translateInPage(-r,-o)},mustExec:!1})},c));for(const f of u)f.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Xi,new Map);for(const t of a(this,Vt))a(this,Xi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Xi))return!1;this.disableUserSelect(!1);const t=a(this,Xi);A(this,Xi,null);let e=!1;for(const[{x:r,y:o,pageIndex:u},c]of t)c.newX=r,c.newY=o,c.newPageIndex=u,e||(e=r!==c.savedX||o!==c.savedY||u!==c.savedPageIndex);if(!e)return!1;const i=(r,o,u,c)=>{if(a(this,xe).has(r.id)){const f=a(this,Be).get(c);f?r._setParentAndPosition(f,o,u):(r.pageIndex=c,r.x=o,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:u,newPageIndex:c}]of t)i(r,o,u,c)},undo:()=>{for(const[r,{savedX:o,savedY:u,savedPageIndex:c}]of t)i(r,o,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Xi))for(const i of a(this,Xi).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Vt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Fn)===t}getActive(){return a(this,Fn)}getMode(){return a(this,Ie)}get imageManager(){return Lt(this,"imageManager",new iy)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,m,v,w)=>({x:(m-r)/u,y:1-(p+v-i)/o,width:w/u,height:v/o});break;case"180":c=(p,m,v,w)=>({x:1-(p+v-i)/o,y:1-(m+w-r)/u,width:v/o,height:w/u});break;case"270":c=(p,m,v,w)=>({x:1-(m+w-r)/u,y:(p-i)/o,width:w/u,height:v/o});break;default:c=(p,m,v,w)=>({x:(p-i)/o,y:(m-r)/u,width:v/o,height:w/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const v=e.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:S,width:C,height:x}of v.getClientRects())C===0||x===0||f.push(c(w,S,C,x))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Sl)||A(this,Sl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Sl))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,Sl))==null?void 0:r.get(t.data.id);if(!e)return;const i=a(this,Cs).getRawValue(e);i&&(a(this,Ie)===xt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};wl=new WeakMap,Fn=new WeakMap,xe=new WeakMap,Be=new WeakMap,Al=new WeakMap,Cs=new WeakMap,Sl=new WeakMap,ri=new WeakMap,Er=new WeakMap,xo=new WeakMap,bl=new WeakMap,ko=new WeakMap,Xi=new WeakMap,Ci=new WeakMap,To=new WeakMap,jc=new WeakMap,Uc=new WeakMap,_l=new WeakMap,Vc=new WeakMap,qi=new WeakMap,Cr=new WeakMap,El=new WeakMap,xr=new WeakMap,Yi=new WeakMap,mp=new WeakMap,kr=new WeakMap,Gc=new WeakMap,Tr=new WeakMap,Po=new WeakMap,Wc=new WeakMap,Xc=new WeakMap,Ie=new WeakMap,Vt=new WeakMap,xs=new WeakMap,Ro=new WeakMap,qc=new WeakMap,Yc=new WeakMap,Pr=new WeakMap,Ki=new WeakMap,ks=new WeakMap,Kc=new WeakMap,oi=new WeakMap,K=new WeakSet,Lf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},ry=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,Be).values())if(i.hasTextLayer(t))return i;return null},MS=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,K,Lf).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(a(this,Yi)||A(this,Yi,new mC(this)),a(this,Yi).show(i,r,this.direction==="ltr"))},LS=function(){var o,u,c;const t=document.getSelection();if(!t||t.isCollapsed){a(this,xs)&&((o=a(this,Yi))==null||o.hide(),A(this,xs,null),E(this,K,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,xs))return;const r=E(this,K,Lf).call(this,t).closest(".textLayer");if(!r){a(this,xs)&&((u=a(this,Yi))==null||u.hide(),A(this,xs,null),E(this,K,hn).call(this,{hasSelectedText:!1}));return}if((c=a(this,Yi))==null||c.hide(),A(this,xs,e),E(this,K,hn).call(this,{hasSelectedText:!0}),!(a(this,Ie)!==xt.HIGHLIGHT&&a(this,Ie)!==xt.NONE)&&(a(this,Ie)===xt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,xr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=a(this,Ie)===xt.HIGHLIGHT?E(this,K,ry).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),w.type==="pointerup"&&E(this,K,If).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},If=function(t=""){a(this,Ie)===xt.HIGHLIGHT?this.highlightSelection(t):a(this,jc)&&E(this,K,MS).call(this)},IS=function(){document.addEventListener("selectionchange",E(this,K,LS).bind(this),{signal:this._signal})},NS=function(){if(a(this,Cr))return;A(this,Cr,new AbortController);const t=this.combinedSignal(a(this,Cr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},DS=function(){var t;(t=a(this,Cr))==null||t.abort(),A(this,Cr,null)},oy=function(){if(a(this,Tr))return;A(this,Tr,new AbortController);const t=this.combinedSignal(a(this,Tr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},FS=function(){var t;(t=a(this,Tr))==null||t.abort(),A(this,Tr,null)},ay=function(){if(a(this,Er))return;A(this,Er,new AbortController);const t=this.combinedSignal(a(this,Er));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},ly=function(){var t;(t=a(this,Er))==null||t.abort(),A(this,Er,null)},OS=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},hn=function(t){Object.entries(t).some(([i,r])=>a(this,Yc)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Yc),t)}),a(this,Ie)===xt.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,K,Ss).call(this,[[Ot.HIGHLIGHT_FREE,!0]]))},Ss=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},$S=async function(){if(!a(this,kr)){A(this,kr,!0);const t=[];for(const e of a(this,Be).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,xe).values())e.enable()}},zS=function(){if(this.unselectAll(),a(this,kr)){A(this,kr,!1);for(const t of a(this,Be).values())t.disable();for(const t of a(this,xe).values())t.disable()}},uy=function(t){const e=a(this,Be).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},HS=function(){let t=null;for(t of a(this,Vt));return t},gc=function(){if(a(this,xe).size===0)return!0;if(a(this,xe).size===1)for(const t of a(this,xe).values())return t.isEmpty();return!1},cy=function(t){for(const e of a(this,Vt))e.unselect();a(this,Vt).clear();for(const e of t)e.isEmpty()||(a(this,Vt).add(e),e.select());E(this,K,hn).call(this,{hasSelectedEditor:this.hasSelection})},yt(fl,"TRANSLATE_SMALL",1),yt(fl,"TRANSLATE_BIG",10);let Ta=fl;var Ne,Qi,xi,Cl,Zi,On,xl,Ji,Tn,Ts,Mo,ts,Rr,Fi,mc,Nf;const dn=class dn{constructor(t){_(this,Fi);_(this,Ne,null);_(this,Qi,!1);_(this,xi,null);_(this,Cl,null);_(this,Zi,null);_(this,On,null);_(this,xl,!1);_(this,Ji,null);_(this,Tn,null);_(this,Ts,null);_(this,Mo,null);_(this,ts,!1);A(this,Tn,t),A(this,ts,t._uiManager.useNewAltTextFlow),a(dn,Rr)||A(dn,Rr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){dn._l10n??(dn._l10n=t)}async render(){const t=A(this,xi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,Cl,document.createElement("span"));t.append(e),a(this,ts)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(dn,Rr).missing),e.setAttribute("data-l10n-id",a(dn,Rr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,Tn)._uiManager._signal;t.addEventListener("contextmenu",Oi,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),a(this,Tn)._uiManager.editAltText(a(this,Tn)),a(this,ts)&&a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Fi,mc)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,xl,!0),r(o))},{signal:i}),await E(this,Fi,Nf).call(this),t}finish(){a(this,xi)&&(a(this,xi).focus({focusVisible:a(this,xl)}),A(this,xl,!1))}isEmpty(){return a(this,ts)?a(this,Ne)===null:!a(this,Ne)&&!a(this,Qi)}hasData(){return a(this,ts)?a(this,Ne)!==null||!!a(this,Ts):this.isEmpty()}get guessedText(){return a(this,Ts)}async setGuessedText(t){a(this,Ne)===null&&(A(this,Ts,t),A(this,Mo,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Fi,Nf).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,ts)||a(this,Ne)){(e=a(this,Ji))==null||e.remove(),A(this,Ji,null);return}if(!a(this,Ji)){const i=A(this,Ji,document.createElement("div"));i.className="noAltTextBadge",a(this,Tn).div.append(i)}a(this,Ji).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Ne);return!t&&a(this,Ts)===e&&(e=a(this,Mo)),{altText:e,decorative:a(this,Qi),guessedText:a(this,Ts),textWithDisclaimer:a(this,Mo)}}get data(){return{altText:a(this,Ne),decorative:a(this,Qi)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:o=!1}){i&&(A(this,Ts,i),A(this,Mo,r)),!(a(this,Ne)===t&&a(this,Qi)===e)&&(o||(A(this,Ne,t),A(this,Qi,e)),E(this,Fi,Nf).call(this))}toggle(t=!1){a(this,xi)&&(!t&&a(this,On)&&(clearTimeout(a(this,On)),A(this,On,null)),a(this,xi).disabled=!t)}shown(){a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Fi,mc)}})}destroy(){var t,e;(t=a(this,xi))==null||t.remove(),A(this,xi,null),A(this,Cl,null),A(this,Zi,null),(e=a(this,Ji))==null||e.remove(),A(this,Ji,null)}};Ne=new WeakMap,Qi=new WeakMap,xi=new WeakMap,Cl=new WeakMap,Zi=new WeakMap,On=new WeakMap,xl=new WeakMap,Ji=new WeakMap,Tn=new WeakMap,Ts=new WeakMap,Mo=new WeakMap,ts=new WeakMap,Rr=new WeakMap,Fi=new WeakSet,mc=function(){return a(this,Ne)&&"added"||a(this,Ne)===null&&this.guessedText&&"review"||"missing"},Nf=async function(){var r,o,u;const t=a(this,xi);if(!t)return;if(a(this,ts)){if(t.classList.toggle("done",!!a(this,Ne)),t.setAttribute("data-l10n-id",a(dn,Rr)[a(this,Fi,mc)]),(r=a(this,Cl))==null||r.setAttribute("data-l10n-id",a(dn,Rr)[`${a(this,Fi,mc)}-label`]),!a(this,Ne)){(o=a(this,Zi))==null||o.remove();return}}else{if(!a(this,Ne)&&!a(this,Qi)){t.classList.remove("done"),(u=a(this,Zi))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Zi);if(!e){A(this,Zi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Tn).id}`;const c=100,f=a(this,Tn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(a(this,On)),A(this,On,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,On,setTimeout(()=>{A(this,On,null),a(this,Zi).classList.add("show"),a(this,Tn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;a(this,On)&&(clearTimeout(a(this,On)),A(this,On,null)),(p=a(this,Zi))==null||p.classList.remove("show")},{signal:f})}a(this,Qi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Ne)),e.parentNode||t.append(e);const i=a(this,Tn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},_(dn,Rr,null),yt(dn,"_l10n",null);let op=dn;var Qc,Lo,Zc,Jc,th,eh,nh,kl,Ps,Io,Mr,Js,BS,jS,hy;const Tv=class Tv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:u=null,signal:c}){_(this,Js);_(this,Qc);_(this,Lo,!1);_(this,Zc,null);_(this,Jc);_(this,th);_(this,eh);_(this,nh);_(this,kl);_(this,Ps,null);_(this,Io);_(this,Mr,null);A(this,Qc,t),A(this,Zc,i),A(this,Jc,e),A(this,th,r),A(this,eh,o),A(this,nh,u),A(this,Io,new AbortController),A(this,kl,AbortSignal.any([c,a(this,Io).signal])),t.addEventListener("touchstart",E(this,Js,BS).bind(this),{passive:!1,signal:a(this,kl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Lt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=a(this,Io))==null||t.abort(),A(this,Io,null)}};Qc=new WeakMap,Lo=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,kl=new WeakMap,Ps=new WeakMap,Io=new WeakMap,Mr=new WeakMap,Js=new WeakSet,BS=function(t){var r,o,u;if((r=a(this,Jc))!=null&&r.call(this)||t.touches.length<2)return;if(!a(this,Mr)){A(this,Mr,new AbortController);const c=AbortSignal.any([a(this,kl),a(this,Mr).signal]),f=a(this,Qc),p={signal:c,passive:!1};f.addEventListener("touchmove",E(this,Js,jS).bind(this),p),f.addEventListener("touchend",E(this,Js,hy).bind(this),p),f.addEventListener("touchcancel",E(this,Js,hy).bind(this),p),(o=a(this,th))==null||o.call(this)}if(Kn(t),t.touches.length!==2||(u=a(this,Zc))!=null&&u.call(this)){A(this,Ps,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),A(this,Ps,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},jS=function(t){var D;if(!a(this,Ps)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:o}=e,{screenX:u,screenY:c}=i,f=a(this,Ps),{touch0X:p,touch0Y:m,touch1X:v,touch1Y:w}=f,S=v-p,C=w-m,x=u-r,k=c-o,T=Math.hypot(x,k)||1,L=Math.hypot(S,C)||1;if(!a(this,Lo)&&Math.abs(L-T)<=Tv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=u,f.touch1Y=c,t.preventDefault(),!a(this,Lo)){A(this,Lo,!0);return}const O=[(r+u)/2,(o+c)/2];(D=a(this,eh))==null||D.call(this,O,L,T)},hy=function(t){var e;a(this,Mr).abort(),A(this,Mr,null),(e=a(this,nh))==null||e.call(this),a(this,Ps)&&(t.preventDefault(),A(this,Ps,null),A(this,Lo,!1))};let ap=Tv;var No,ki,ee,Tl,Lr,ih,Do,je,Fo,Rs,Ir,sh,Oo,$n,rh,$o,Ms,es,Pl,Rl,ai,zo,oh,yp,vt,dy,ah,fy,Df,US,VS,py,Ff,gy,GS,WS,XS,my,qS,yy,YS,KS,QS,vy,yc;const Tt=class Tt{constructor(t){_(this,vt);_(this,No,null);_(this,ki,null);_(this,ee,null);_(this,Tl,!1);_(this,Lr,null);_(this,ih,"");_(this,Do,!1);_(this,je,null);_(this,Fo,null);_(this,Rs,null);_(this,Ir,null);_(this,sh,"");_(this,Oo,!1);_(this,$n,null);_(this,rh,!1);_(this,$o,!1);_(this,Ms,!1);_(this,es,null);_(this,Pl,0);_(this,Rl,0);_(this,ai,null);_(this,zo,null);yt(this,"_editToolbar",null);yt(this,"_initialOptions",Object.create(null));yt(this,"_initialData",null);yt(this,"_isVisible",!0);yt(this,"_uiManager",null);yt(this,"_focusEventsAllowed",!0);_(this,oh,!1);_(this,yp,Tt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,u];const[c,f]=this.parentDimensions;this.x=t.x/c,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Tt.prototype._resizeWithKeyboard,e=Ta.TRANSLATE_SMALL,i=Ta.TRANSLATE_BIG;return Lt(this,"_resizerKeyboardManager",new ld([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Tt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Lt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new wC({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Tt._l10n??(Tt._l10n=t),Tt._l10nResizer||(Tt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Tt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Tt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Yt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,oh)}set _isDraggable(t){var e;A(this,oh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,yp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,vt,yc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Oo)?A(this,Oo,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[o,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/o,this.y=(e+r)/u,this.fixAndSetPosition()}translate(t,e){E(this,vt,dy).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]),E(this,vt,dy).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[f,p]=this.getBaseTranslation();u+=f,c+=p;const{style:m}=i;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,$n)&&(a(this,$n)[0]!==this.x||a(this,$n)[1]!==this.y)}get _hasBeenResized(){return!!a(this,$n)&&(a(this,$n)[2]!==this.width||a(this,$n)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Tt,r=i/t,o=i/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:o,y:u,width:c,height:f}=this;if(c*=i,f*=r,o*=i,u*=r,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(i-c,o)),u=Math.max(0,Math.min(r-f,u));break;case 90:o=Math.max(0,Math.min(i-f,o)),u=Math.min(r,Math.max(c,u));break;case 180:o=Math.min(i,Math.max(c,o)),u=Math.min(r,Math.max(f,u));break;case 270:o=Math.min(i,Math.max(f,o)),u=Math.max(0,Math.min(r-c,u));break}this.x=o/=i,this.y=u/=r;const[p,m]=this.getBaseTranslation();o+=p,u+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return E(i=Tt,ah,fy).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return E(i=Tt,ah,fy).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,a(this,Do)||(o.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),o=!a(this,Do)&&e.endsWith("%");if(r&&o)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!a(this,Do)&&!o&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,ee))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,$o)?this._editToolbar:(this._editToolbar=new ey(this),this.div.append(this._editToolbar.render()),a(this,ee)&&await this._editToolbar.addAltText(a(this,ee)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,ee))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,ee)||(op.initialize(Tt._l10n),A(this,ee,new op(this)),a(this,No)&&(a(this,ee).data=a(this,No),A(this,No,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,ee))==null?void 0:t.data}set altTextData(t){a(this,ee)&&(a(this,ee).data=t)}get guessedAltText(){var t;return(t=a(this,ee))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,ee))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,ee))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,ee)&&!a(this,ee).isEmpty()}hasAltTextData(){var t;return((t=a(this,ee))==null?void 0:t.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,Tl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,vt,yy).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),rp(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,zo)||A(this,zo,new ap({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,vt,GS).bind(this),onPinching:E(this,vt,WS).bind(this),onPinchEnd:E(this,vt,XS).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(t){const{isMac:e}=mn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Oo,!0),this._isDraggable){E(this,vt,qS).call(this,t);return}E(this,vt,my).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,es)&&clearTimeout(a(this,es)),A(this,es,setTimeout(()=>{var t;A(this,es,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[o,u]=this.pageDimensions,[c,f]=this.pageTranslation,p=t/r,m=e/r,v=this.x*o,w=this.y*u,S=this.width*o,C=this.height*u;switch(i){case 0:return[v+p+c,u-w-m-C+f,v+p+S+c,u-w-m+f];case 90:return[v+m+c,u-w+p+f,v+m+C+c,u-w+p+S+f];case 180:return[v-p-S+c,u-w+m+f,v-p+c,u-w+m+C+f];case 270:return[v-m-C+c,u-w-p-S+f,v-m+c,u-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,o,u]=t,c=o-i,f=u-r;switch(this.rotation){case 0:return[i,e-u,c,f];case 90:return[i,e-r,f,c];case 180:return[o,e-r,c,f];case 270:return[o,e-u,f,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){A(this,$o,!0)}disableEditMode(){A(this,$o,!1)}isInEditMode(){return a(this,$o)}shouldGetKeyboardEvents(){return a(this,Ms)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&r>0&&t<o&&i>0}rebuild(){E(this,vt,yy).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Yt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,A(r,No,t.accessibilityData);const[o,u]=r.pageDimensions,[c,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/o,r.y=f/u,r.width=p/o,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Ir))==null||t.abort(),A(this,Ir,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,es)&&(clearTimeout(a(this,es)),A(this,es,null)),E(this,vt,yc).call(this),this.removeEditToolbar(),a(this,ai)){for(const i of a(this,ai).values())clearTimeout(i);A(this,ai,null)}this.parent=null,(e=a(this,zo))==null||e.destroy(),A(this,zo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,vt,US).call(this),a(this,je).classList.remove("hidden"),rp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,je).children;if(!a(this,ki)){A(this,ki,Array.from(e));const u=E(this,vt,YS).bind(this),c=E(this,vt,KS).bind(this),f=this._uiManager._signal;for(const p of a(this,ki)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",c,{signal:f}),p.addEventListener("focus",E(this,vt,QS).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Tt._l10nResizer[m])}}const i=a(this,ki)[0];let r=0;for(const u of e){if(u===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(a(this,ki).length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)a(this,je).append(a(this,je).firstChild);else if(o>r)for(let c=0;c<o-r;c++)a(this,je).firstChild.before(a(this,je).lastChild);let u=0;for(const c of e){const p=a(this,ki)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Tt._l10nResizer[p])}}E(this,vt,vy).call(this,0),A(this,Ms,!0),a(this,je).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Ms)&&E(this,vt,gy).call(this,a(this,sh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,vt,yc).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,ee))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,r,o;(t=a(this,je))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=a(this,ee))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,rh)}set isEditing(t){A(this,rh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,Do,!0);const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,ai)||A(this,ai,new Map);const{action:i}=t;let r=a(this,ai).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,ai).delete(i),a(this,ai).size===0&&A(this,ai,null)},Tt._telemetryTimeout),a(this,ai).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Tl,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Tl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};No=new WeakMap,ki=new WeakMap,ee=new WeakMap,Tl=new WeakMap,Lr=new WeakMap,ih=new WeakMap,Do=new WeakMap,je=new WeakMap,Fo=new WeakMap,Rs=new WeakMap,Ir=new WeakMap,sh=new WeakMap,Oo=new WeakMap,$n=new WeakMap,rh=new WeakMap,$o=new WeakMap,Ms=new WeakMap,es=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,ai=new WeakMap,zo=new WeakMap,oh=new WeakMap,yp=new WeakMap,vt=new WeakSet,dy=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ah=new WeakSet,fy=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Df=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},US=function(){if(a(this,je))return;A(this,je,document.createElement("div")),a(this,je).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");a(this,je).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",E(this,vt,VS).bind(this,i),{signal:e}),r.addEventListener("contextmenu",Oi,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,je))},VS=function(t,e){var m;e.preventDefault();const{isMac:i}=mn.platform;if(e.button!==0||e.ctrlKey&&i)return;(m=a(this,ee))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,Fo,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,vt,gy).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Kn,{passive:!1,signal:u}),window.addEventListener("contextmenu",Oi,{signal:u}),A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var v;o.abort(),this.parent.togglePointerEvents(!0),(v=a(this,ee))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=f,E(this,vt,Ff).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},py=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[o,u]=this.parentDimensions;this.setDims(o*i,u*r),this.fixAndSetPosition(),this._onResized()},Ff=function(){if(!a(this,Rs))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=a(this,Rs);A(this,Rs,null);const o=this.x,u=this.y,c=this.width,f=this.height;o===t&&u===e&&c===i&&f===r||this.addCommands({cmd:E(this,vt,py).bind(this,o,u,c,f),undo:E(this,vt,py).bind(this,t,e,i,r),mustExec:!0})},gy=function(t,e){const[i,r]=this.parentDimensions,o=this.x,u=this.y,c=this.width,f=this.height,p=Tt.MIN_SIZE/i,m=Tt.MIN_SIZE/r,v=E(this,vt,Df).call(this,this.rotation),w=(q,J)=>[v[0]*q+v[2]*J,v[1]*q+v[3]*J],S=E(this,vt,Df).call(this,360-this.rotation),C=(q,J)=>[S[0]*q+S[2]*J,S[1]*q+S[3]*J];let x,k,T=!1,L=!1;switch(t){case"topLeft":T=!0,x=(q,J)=>[0,0],k=(q,J)=>[q,J];break;case"topMiddle":x=(q,J)=>[q/2,0],k=(q,J)=>[q/2,J];break;case"topRight":T=!0,x=(q,J)=>[q,0],k=(q,J)=>[0,J];break;case"middleRight":L=!0,x=(q,J)=>[q,J/2],k=(q,J)=>[0,J/2];break;case"bottomRight":T=!0,x=(q,J)=>[q,J],k=(q,J)=>[0,0];break;case"bottomMiddle":x=(q,J)=>[q/2,J],k=(q,J)=>[q/2,0];break;case"bottomLeft":T=!0,x=(q,J)=>[0,J],k=(q,J)=>[q,0];break;case"middleLeft":L=!0,x=(q,J)=>[0,J/2],k=(q,J)=>[q,J/2];break}const O=x(c,f),D=k(c,f);let z=w(...D);const j=Tt._round(o+z[0]),B=Tt._round(u+z[1]);let Q=1,rt=1,wt,ft;if(e.fromKeyboard)({deltaX:wt,deltaY:ft}=e);else{const{screenX:q,screenY:J}=e,[X,lt]=a(this,Fo);[wt,ft]=this.screenToPageTranslation(q-X,J-lt),a(this,Fo)[0]=q,a(this,Fo)[1]=J}if([wt,ft]=C(wt/i,ft/r),T){const q=Math.hypot(c,f);Q=rt=Math.max(Math.min(Math.hypot(D[0]-O[0]-wt,D[1]-O[1]-ft)/q,1/c,1/f),p/c,m/f)}else L?Q=Math.max(p,Math.min(1,Math.abs(D[0]-O[0]-wt)))/c:rt=Math.max(m,Math.min(1,Math.abs(D[1]-O[1]-ft)))/f;const Dt=Tt._round(c*Q),Ft=Tt._round(f*rt);z=w(...k(Dt,Ft));const Et=j-z[0],Kt=B-z[1];a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]),this.width=Dt,this.height=Ft,this.x=Et,this.y=Kt,this.setDims(i*Dt,r*Ft),this.fixAndSetPosition(),this._onResizing()},GS=function(){var t;A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,ee))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},WS=function(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const u=E(this,vt,Df).call(this,this.rotation),c=(j,B)=>[u[0]*j+u[2]*B,u[1]*j+u[3]*B],[f,p]=this.parentDimensions,m=this.x,v=this.y,w=this.width,S=this.height,C=Tt.MIN_SIZE/f,x=Tt.MIN_SIZE/p;o=Math.max(Math.min(o,1/w,1/S),C/w,x/S);const k=Tt._round(w*o),T=Tt._round(S*o);if(k===w&&T===S)return;a(this,$n)||A(this,$n,[m,v,w,S]);const L=c(w/2,S/2),O=Tt._round(m+L[0]),D=Tt._round(v+L[1]),z=c(k/2,T/2);this.x=O-z[0],this.y=D-z[1],this.width=k,this.height=T,this.setDims(f*k,p*T),this.fixAndSetPosition(),this._onResizing()},XS=function(){var t;(t=a(this,ee))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,vt,Ff).call(this)},my=function(t){const{isMac:e}=mn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},qS=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:o},c=p=>{r.abort(),A(this,Lr,null),A(this,Oo,!1),this._uiManager.endDragSession()||E(this,vt,my).call(this,p),i&&this._onStopDragging()};e&&(A(this,Pl,t.clientX),A(this,Rl,t.clientY),A(this,Lr,t.pointerId),A(this,ih,t.pointerType),window.addEventListener("pointermove",p=>{i||(i=!0,this._onStartDragging());const{clientX:m,clientY:v,pointerId:w}=p;if(w!==a(this,Lr)){Kn(p);return}const[S,C]=this.screenToPageTranslation(m-a(this,Pl),v-a(this,Rl));A(this,Pl,m),A(this,Rl,v),this._uiManager.dragSelectedEditors(S,C)},u),window.addEventListener("touchmove",Kn,u),window.addEventListener("pointerdown",p=>{p.pointerType===a(this,ih)&&(a(this,zo)||p.isPrimary)&&c(p),Kn(p)},u));const f=p=>{if(!a(this,Lr)||a(this,Lr)===p.pointerId){c(p);return}Kn(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},yy=function(){if(a(this,Ir)||!this.div)return;A(this,Ir,new AbortController);const t=this._uiManager.combinedSignal(a(this,Ir));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},YS=function(t){Tt._resizerKeyboardManager.exec(this,t)},KS=function(t){var e;a(this,Ms)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,je)&&E(this,vt,yc).call(this)},QS=function(t){A(this,sh,a(this,Ms)?t:"")},vy=function(t){if(a(this,ki))for(const e of a(this,ki))e.tabIndex=t},yc=function(){A(this,Ms,!1),E(this,vt,vy).call(this,-1),E(this,vt,Ff).call(this)},_(Tt,ah),yt(Tt,"_l10n",null),yt(Tt,"_l10nResizer",null),yt(Tt,"_borderLineWidth",-1),yt(Tt,"_colorManager",new sy),yt(Tt,"_zIndex",1),yt(Tt,"_telemetryTimeout",1e3);let ce=Tt;class wC extends ce{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qA=3285377520,si=4294901760,Gi=65535;class ZS{constructor(t){this.h1=t?t&4294967295:qA,this.h2=t?t&4294967295:qA}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,k=t.length;x<k;x++){const T=t.charCodeAt(x);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,u=new Uint32Array(e.buffer,0,r);let c=0,f=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,S=v&Gi,C=w&Gi;for(let x=0;x<r;x++)x&1?(c=u[x],c=c*v&si|c*S&Gi,c=c<<15|c>>>17,c=c*w&si|c*C&Gi,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[x],f=f*v&si|f*S&Gi,f=f<<15|f>>>17,f=f*w&si|f*C&Gi,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,o){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*v&si|c*S&Gi,c=c<<15|c>>>17,c=c*w&si|c*C&Gi,r&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&si|t*36045&Gi,e=e*4283543511&si|((e<<16|t>>>16)*2950163797&si)>>>16,t^=e>>>1,t=t*444984403&si|t*60499&Gi,e=e*3301882366&si|((e<<16|t>>>16)*3120437893&si)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const wy=Object.freeze({map:null,hash:"",transfer:void 0});var Ho,Bo,De,vp,JS;class _v{constructor(){_(this,vp);_(this,Ho,!1);_(this,Bo,null);_(this,De,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,De).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,De).get(t)}remove(t){if(a(this,De).delete(t),a(this,De).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,De).values())if(e instanceof ce)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,De).get(t);let r=!1;if(i!==void 0)for(const[o,u]of Object.entries(e))i[o]!==u&&(r=!0,i[o]=u);else r=!0,a(this,De).set(t,e);r&&E(this,vp,JS).call(this),e instanceof ce&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,De).has(t)}getAll(){return a(this,De).size>0?yv(a(this,De)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,De).size}resetModified(){a(this,Ho)&&(A(this,Ho,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tb(this)}get serializable(){if(a(this,De).size===0)return wy;const t=new Map,e=new ZS,i=[],r=Object.create(null);let o=!1;for(const[u,c]of a(this,De)){const f=c instanceof ce?c.serialize(!1,r):c;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of t.values())u.bitmap&&i.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:wy}get editorStats(){let t=null;const e=new Map;for(const i of a(this,De).values()){if(!(i instanceof ce))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const u=t[o]||(t[o]=new Map);for(const[c,f]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){A(this,Bo,null)}get modifiedIds(){if(a(this,Bo))return a(this,Bo);const t=[];for(const e of a(this,De).values())!(e instanceof ce)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return A(this,Bo,{ids:new Set(t),hash:t.join(",")})}}Ho=new WeakMap,Bo=new WeakMap,De=new WeakMap,vp=new WeakSet,JS=function(){a(this,Ho)||(A(this,Ho,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lh;class tb extends _v{constructor(e){super();_(this,lh);const{map:i,hash:r,transfer:o}=e.serializable,u=structuredClone(i,o?{transfer:o}:null);A(this,lh,{map:u,hash:r,transfer:o})}get print(){Yt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,lh)}get modifiedIds(){return Lt(this,"modifiedIds",{ids:new Set,hash:""})}}lh=new WeakMap;var Ml;class AC{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,Ml,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ml).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,Ml).has(t.loadedName))){if(Ae(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,u=new FontFace(i,r,o);this.addNativeFontFace(u);try{await u.load(),a(this,Ml).add(i),e==null||e(t)}catch{kt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Yt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw kt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Lt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(on||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Lt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Ae(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Lt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,z){return D.charCodeAt(z)<<24|D.charCodeAt(z+1)<<16|D.charCodeAt(z+2)<<8|D.charCodeAt(z+3)&255}function r(D,z,j,B){const Q=D.substring(0,z),rt=D.substring(z+j);return Q+B+rt}let o,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const f=c.getContext("2d");let p=0;function m(D,z){if(++p>30){kt("Load test font never loaded."),z();return}if(f.font="30px "+D,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(m.bind(null,D,z))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const C=16,x=1482184792;let k=i(w,C);for(o=0,u=v.length-3;o<u;o+=4)k=k-x+i(v,o)|0;o<v.length&&(k=k-x+i(v+"XXX",o)|0),w=r(w,C,4,rC(k));const T=`url(data:font/opentype;base64,${btoa(w)});`,L=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(L);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const D of[t.loadedName,v]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=D,O.append(z)}this._document.body.append(O),m(v,()=>{O.remove(),e.complete()})}}Ml=new WeakMap;class SC{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${hC(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(u){kt(`getPathGenerator - ignoring character: "${u}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}}const Ef={DATA:1,ERROR:2},we={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function YA(){}function xn(d){if(d instanceof Jr||d instanceof Zm||d instanceof Ic||d instanceof GA||d instanceof sp||d instanceof Gm)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Yt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Jr(d.message);case"InvalidPDFException":return new Zm(d.message);case"MissingPDFException":return new Ic(d.message);case"PasswordException":return new GA(d.message,d.code);case"UnexpectedResponseException":return new sp(d.message,d.status);case"UnknownErrorException":return new Gm(d.message,d.details)}return new Gm(d.message,d.toString())}var Ll,pi,eb,nb,ib,Of;class vc{constructor(t,e,i){_(this,pi);_(this,Ll,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,pi,eb).bind(this),{signal:a(this,Ll).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,i,r){const o=this.streamId++,u=this.sourceName,c=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:c,action:t,streamId:o,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:c,stream:we.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Ae(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:c,stream:we.CANCEL,streamId:o,reason:xn(p)}),m.promise}},i)}destroy(){var t;(t=a(this,Ll))==null||t.abort(),A(this,Ll,null)}}Ll=new WeakMap,pi=new WeakSet,eb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,pi,ib).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ef.DATA)r.resolve(t.data);else if(t.callback===Ef.ERROR)r.reject(xn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:i,targetName:r,callback:Ef.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:i,targetName:r,callback:Ef.ERROR,callbackId:t.callbackId,reason:xn(u)})});return}if(t.streamId){E(this,pi,nb).call(this,t);return}e(t.data)},nb=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this,c=this.actionHandler[t.action],f={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:we.ENQUEUE,streamId:e,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:we.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){Ae(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:we.ERROR,streamId:e,reason:xn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(c,t.data,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:we.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:we.START_COMPLETE,streamId:e,reason:xn(p)})})},ib=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case we.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(xn(t.reason));break;case we.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(xn(t.reason));break;case we.PULL:if(!c){o.postMessage({sourceName:i,targetName:r,stream:we.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||YA).then(function(){o.postMessage({sourceName:i,targetName:r,stream:we.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:we.PULL_COMPLETE,streamId:e,reason:xn(p)})});break;case we.ENQUEUE:if(Ae(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case we.CLOSE:if(Ae(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,pi,Of).call(this,u,e);break;case we.ERROR:Ae(u,"error should have stream controller"),u.controller.error(xn(t.reason)),E(this,pi,Of).call(this,u,e);break;case we.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(xn(t.reason)),E(this,pi,Of).call(this,u,e);break;case we.CANCEL:if(!c)break;const f=xn(t.reason);Promise.try(c.onCancel||YA,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:we.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:we.CANCEL_COMPLETE,streamId:e,reason:xn(p)})}),c.sinkCapability.reject(f),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Of=async function(t,e){var i,r,o;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var uh;class sb{constructor({enableHWA:t=!1}){_(this,uh,!1);A(this,uh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,uh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Yt("Abstract method `_createCanvas` called.")}}uh=new WeakMap;class bC extends sb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class rb{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class ob extends rb{async _fetch(t){const e=await Dp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Np(e)}}class ab{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,o){return"none"}destroy(t=!1){}}var jo,Il,Ls,Is,en,Uo,Vo,et,Ze,wc,ol,$f,al,lb,Ay,ll,Ac,Sc,Sy,bc;class _C extends ab{constructor({docId:e,ownerDocument:i=globalThis.document}){super();_(this,et);_(this,jo);_(this,Il);_(this,Ls);_(this,Is);_(this,en);_(this,Uo);_(this,Vo,0);A(this,Is,e),A(this,en,i)}addFilter(e){if(!e)return"none";let i=a(this,et,Ze).get(e);if(i)return i;const[r,o,u]=E(this,et,$f).call(this,e),c=e.length===1?r:`${r}${o}${u}`;if(i=a(this,et,Ze).get(c),i)return a(this,et,Ze).set(e,i),i;const f=`g_${a(this,Is)}_transfer_map_${cn(this,Vo)._++}`,p=E(this,et,al).call(this,f);a(this,et,Ze).set(e,p),a(this,et,Ze).set(c,p);const m=E(this,et,ll).call(this,f);return E(this,et,Sc).call(this,r,o,u,m),p}addHCMFilter(e,i){var C;const r=`${e}-${i}`,o="base";let u=a(this,et,wc).get(o);if((u==null?void 0:u.key)===r||(u?((C=u.filter)==null||C.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},a(this,et,wc).set(o,u)),!e||!i))return u.url;const c=E(this,et,bc).call(this,e);e=dt.makeHexColor(...c);const f=E(this,et,bc).call(this,i);if(i=dt.makeHexColor(...f),a(this,et,ol).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return u.url;const p=new Array(256);for(let x=0;x<=255;x++){const k=x/255;p[x]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const m=p.join(","),v=`g_${a(this,Is)}_hcm_filter`,w=u.filter=E(this,et,ll).call(this,v);E(this,et,Sc).call(this,m,m,m,w),E(this,et,Ay).call(this,w);const S=(x,k)=>{const T=c[x]/255,L=f[x]/255,O=new Array(k+1);for(let D=0;D<=k;D++)O[D]=T+D/k*(L-T);return O.join(",")};return E(this,et,Sc).call(this,S(0,5),S(1,5),S(2,5),w),u.url=E(this,et,al).call(this,v),u.url}addAlphaFilter(e){let i=a(this,et,Ze).get(e);if(i)return i;const[r]=E(this,et,$f).call(this,[e]),o=`alpha_${r}`;if(i=a(this,et,Ze).get(o),i)return a(this,et,Ze).set(e,i),i;const u=`g_${a(this,Is)}_alpha_map_${cn(this,Vo)._++}`,c=E(this,et,al).call(this,u);a(this,et,Ze).set(e,c),a(this,et,Ze).set(o,c);const f=E(this,et,ll).call(this,u);return E(this,et,Sy).call(this,r,f),c}addLuminosityFilter(e){let i=a(this,et,Ze).get(e||"luminosity");if(i)return i;let r,o;if(e?([r]=E(this,et,$f).call(this,[e]),o=`luminosity_${r}`):o="luminosity",i=a(this,et,Ze).get(o),i)return a(this,et,Ze).set(e,i),i;const u=`g_${a(this,Is)}_luminosity_map_${cn(this,Vo)._++}`,c=E(this,et,al).call(this,u);a(this,et,Ze).set(e,c),a(this,et,Ze).set(o,c);const f=E(this,et,ll).call(this,u);return E(this,et,lb).call(this,f),e&&E(this,et,Sy).call(this,r,f),c}addHighlightHCMFilter(e,i,r,o,u){var L;const c=`${i}-${r}-${o}-${u}`;let f=a(this,et,wc).get(e);if((f==null?void 0:f.key)===c||(f?((L=f.filter)==null||L.remove(),f.key=c,f.url="none",f.filter=null):(f={key:c,url:"none",filter:null},a(this,et,wc).set(e,f)),!i||!r))return f.url;const[p,m]=[i,r].map(E(this,et,bc).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,C]=[o,u].map(E(this,et,bc).bind(this));w<v&&([v,w,S,C]=[w,v,C,S]),a(this,et,ol).style.color="";const x=(O,D,z)=>{const j=new Array(256),B=(w-v)/z,Q=O/255,rt=(D-O)/(255*z);let wt=0;for(let ft=0;ft<=z;ft++){const Dt=Math.round(v+ft*B),Ft=Q+ft*rt;for(let Et=wt;Et<=Dt;Et++)j[Et]=Ft;wt=Dt+1}for(let ft=wt;ft<256;ft++)j[ft]=j[wt-1];return j.join(",")},k=`g_${a(this,Is)}_hcm_${e}_filter`,T=f.filter=E(this,et,ll).call(this,k);return E(this,et,Ay).call(this,T),E(this,et,Sc).call(this,x(S[0],C[0],5),x(S[1],C[1],5),x(S[2],C[2],5),T),f.url=E(this,et,al).call(this,k),f.url}destroy(e=!1){var i,r,o,u;e&&((i=a(this,Uo))!=null&&i.size)||((r=a(this,Ls))==null||r.parentNode.parentNode.remove(),A(this,Ls,null),(o=a(this,Il))==null||o.clear(),A(this,Il,null),(u=a(this,Uo))==null||u.clear(),A(this,Uo,null),A(this,Vo,0))}}jo=new WeakMap,Il=new WeakMap,Ls=new WeakMap,Is=new WeakMap,en=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,et=new WeakSet,Ze=function(){return a(this,Il)||A(this,Il,new Map)},wc=function(){return a(this,Uo)||A(this,Uo,new Map)},ol=function(){if(!a(this,Ls)){const e=a(this,en).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=a(this,en).createElementNS(As,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Ls,a(this,en).createElementNS(As,"defs")),e.append(r),r.append(a(this,Ls)),a(this,en).body.append(e)}return a(this,Ls)},$f=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,o]=e,u=new Array(256),c=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,c[p]=r[p]/255,f[p]=o[p]/255;return[u.join(","),c.join(","),f.join(",")]},al=function(e){if(a(this,jo)===void 0){A(this,jo,"");const i=a(this,en).URL;i!==a(this,en).baseURI&&(Fp(i)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,jo,i.split("#",1)[0]))}return`url(${a(this,jo)}#${e})`},lb=function(e){const i=a(this,en).createElementNS(As,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Ay=function(e){const i=a(this,en).createElementNS(As,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},ll=function(e){const i=a(this,en).createElementNS(As,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,et,ol).append(i),i},Ac=function(e,i,r){const o=a(this,en).createElementNS(As,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Sc=function(e,i,r,o){const u=a(this,en).createElementNS(As,"feComponentTransfer");o.append(u),E(this,et,Ac).call(this,u,"feFuncR",e),E(this,et,Ac).call(this,u,"feFuncG",i),E(this,et,Ac).call(this,u,"feFuncB",r)},Sy=function(e,i){const r=a(this,en).createElementNS(As,"feComponentTransfer");i.append(r),E(this,et,Ac).call(this,r,"feFuncA",e)},bc=function(e){return a(this,et,ol).style.color=e,bv(getComputedStyle(a(this,et,ol)).getPropertyValue("color"))};class ub{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Yt("Abstract method `_fetch` called.")}}class cb extends ub{async _fetch(t){const e=await Dp(t,"arraybuffer");return new Uint8Array(e)}}on&&kt("Please use the `legacy` build in Node.js environments.");async function hb(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class EC extends ab{}class CC extends sb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class xC extends rb{async _fetch(t){return hb(t)}}class kC extends ub{async _fetch(t){return hb(t)}}const rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function by(d,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),d.clip(r)}class Ev{getPattern(){Yt("Abstract method `getPattern` called.")}}class TC extends Ev{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let o;if(r===rn.STROKE||r===rn.FILL){const u=e.current.getClippedPathBoundingBox(r,se(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),i=dt.transform(i,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),by(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);o.setTransform(v)}else by(t,this._bbox),o=this._createGradient(t);return o}}function qm(d,t,e,i,r,o,u,c){const f=t.coords,p=t.colors,m=d.data,v=d.width*4;let w;f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w),f[i+1]>f[r+1]&&(w=i,i=r,r=w,w=u,u=c,c=w),f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w);const S=(f[e]+t.offsetX)*t.scaleX,C=(f[e+1]+t.offsetY)*t.scaleY,x=(f[i]+t.offsetX)*t.scaleX,k=(f[i+1]+t.offsetY)*t.scaleY,T=(f[r]+t.offsetX)*t.scaleX,L=(f[r+1]+t.offsetY)*t.scaleY;if(C>=L)return;const O=p[o],D=p[o+1],z=p[o+2],j=p[u],B=p[u+1],Q=p[u+2],rt=p[c],wt=p[c+1],ft=p[c+2],Dt=Math.round(C),Ft=Math.round(L);let Et,Kt,q,J,X,lt,Z,I;for(let H=Dt;H<=Ft;H++){if(H<k){const mt=H<C?0:(C-H)/(C-k);Et=S-(S-x)*mt,Kt=O-(O-j)*mt,q=D-(D-B)*mt,J=z-(z-Q)*mt}else{let mt;H>L?mt=1:k===L?mt=0:mt=(k-H)/(k-L),Et=x-(x-T)*mt,Kt=j-(j-rt)*mt,q=B-(B-wt)*mt,J=Q-(Q-ft)*mt}let ct;H<C?ct=0:H>L?ct=1:ct=(C-H)/(C-L),X=S-(S-T)*ct,lt=O-(O-rt)*ct,Z=D-(D-wt)*ct,I=z-(z-ft)*ct;const _t=Math.round(Math.min(Et,X)),Pt=Math.round(Math.max(Et,X));let At=v*H+_t*4;for(let mt=_t;mt<=Pt;mt++)ct=(Et-mt)/(Et-X),ct<0?ct=0:ct>1&&(ct=1),m[At++]=Kt-(Kt-lt)*ct|0,m[At++]=q-(q-Z)*ct|0,m[At++]=J-(J-I)*ct|0,m[At++]=255}}function PC(d,t,e){const i=t.coords,r=t.colors;let o,u;switch(t.type){case"lattice":const c=t.verticesPerRow,f=Math.floor(i.length/c)-1,p=c-1;for(o=0;o<f;o++){let m=o*c;for(let v=0;v<p;v++,m++)qm(d,e,i[m],i[m+1],i[m+c],r[m],r[m+1],r[m+c]),qm(d,e,i[m+c+1],i[m+1],i[m+c],r[m+c+1],r[m+1],r[m+c])}break;case"triangles":for(o=0,u=i.length;o<u;o+=3)qm(d,e,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class RC extends Ev{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const c=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),S=p/v,C=m/w,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-f,scaleX:1/S,scaleY:1/C},k=v+2*2,T=w+2*2,L=i.getCanvas("mesh",k,T),O=L.context,D=O.createImageData(v,w);if(e){const j=D.data;for(let B=0,Q=j.length;B<Q;B+=4)j[B]=e[0],j[B+1]=e[1],j[B+2]=e[2],j[B+3]=255}for(const j of this._figures)PC(D,j,x);return O.putImageData(D,2,2),{canvas:L.canvas,offsetX:c-2*S,offsetY:f-2*C,scaleX:S,scaleY:C}}getPattern(t,e,i,r){by(t,this._bbox);let o;if(r===rn.SHADING)o=dt.singularValueDecompose2dScale(se(t));else if(o=dt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=dt.singularValueDecompose2dScale(this.matrix);o=[o[0]*c[0],o[1]*c[1]]}const u=this._createMeshCanvas(o,r===rn.SHADING?null:this._background,e.cachedCanvases);return r!==rn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class MC extends Ev{getPattern(){return"hotpink"}}function LC(d){switch(d[0]){case"RadialAxial":return new TC(d);case"Mesh":return new RC(d);case"Dummy":return new MC}throw new Error(`Unknown IR type: ${d[0]}`)}const KA={COLORED:1,UNCOLORED:2},wp=class wp{constructor(t,e,i,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:o,color:u,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Ip("TilingType: "+o);const m=e[0],v=e[1],w=e[2],S=e[3],C=w-m,x=S-v,k=dt.singularValueDecompose2dScale(this.matrix),T=dt.singularValueDecompose2dScale(this.baseTransform),L=k[0]*T[0],O=k[1]*T[1];let D=C,z=x,j=!1,B=!1;const Q=Math.ceil(f*L),rt=Math.ceil(p*O),wt=Math.ceil(C*L),ft=Math.ceil(x*O);Q>=wt?D=f:j=!0,rt>=ft?z=p:B=!0;const Dt=this.getSizeAndScale(D,this.ctx.canvas.width,L),Ft=this.getSizeAndScale(z,this.ctx.canvas.height,O),Et=t.cachedCanvases.getCanvas("pattern",Dt.size,Ft.size),Kt=Et.context,q=c.createCanvasGraphics(Kt);if(q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(q,r,u),Kt.translate(-Dt.scale*m,-Ft.scale*v),q.transform(Dt.scale,0,0,Ft.scale,0,0),Kt.save(),this.clipBbox(q,m,v,w,S),q.baseTransform=se(q.ctx),q.executeOperatorList(i),q.endDrawing(),Kt.restore(),j||B){const J=Et.canvas;j&&(D=f),B&&(z=p);const X=this.getSizeAndScale(D,this.ctx.canvas.width,L),lt=this.getSizeAndScale(z,this.ctx.canvas.height,O),Z=X.size,I=lt.size,H=t.cachedCanvases.getCanvas("pattern-workaround",Z,I),ct=H.context,_t=j?Math.floor(C/f):0,Pt=B?Math.floor(x/p):0;for(let At=0;At<=_t;At++)for(let mt=0;mt<=Pt;mt++)ct.drawImage(J,Z*At,I*mt,Z,I,0,0,Z,I);return{canvas:H.canvas,scaleX:X.scale,scaleY:lt.scale,offsetX:m,offsetY:v}}return{canvas:Et.canvas,scaleX:Dt.scale,scaleY:Ft.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,i){const r=Math.max(wp.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=r?o=r:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,r,o){const u=r-e,c=o-i;t.ctx.rect(e,i,u,c),t.current.updateRectMinMax(se(t.ctx),[e,i,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,o=t.current;switch(e){case KA.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,o.fillColor=u.fillStyle,o.strokeColor=u.strokeStyle;break;case KA.UNCOLORED:const c=dt.makeHexColor(i[0],i[1],i[2]);r.fillStyle=c,r.strokeStyle=c,o.fillColor=c,o.strokeColor=c;break;default:throw new sC(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let o=i;r!==rn.SHADING&&(o=dt.transform(o,e.baseTransform),this.matrix&&(o=dt.transform(o,this.matrix)));const u=this.createPatternCanvas(e);let c=new DOMMatrix(o);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(c),f}};yt(wp,"MAX_PATTERN_SIZE",3e3);let _y=wp;function IC({src:d,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const c=mn.isLittleEndian?4278190080:255,[f,p]=u?[o,c]:[c,o],m=i>>3,v=i&7,w=d.length;e=new Uint32Array(e.buffer);let S=0;for(let C=0;C<r;C++){for(const k=t+m;t<k;t++){const T=t<w?d[t]:255;e[S++]=T&128?p:f,e[S++]=T&64?p:f,e[S++]=T&32?p:f,e[S++]=T&16?p:f,e[S++]=T&8?p:f,e[S++]=T&4?p:f,e[S++]=T&2?p:f,e[S++]=T&1?p:f}if(v===0)continue;const x=t<w?d[t++]:255;for(let k=0;k<v;k++)e[S++]=x&1<<7-k?p:f}return{srcPos:t,destPos:S}}const QA=16,ZA=100,NC=15,JA=10,tS=1e3,Mn=16;function DC(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},d.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},d.transform=function(i,r,o,u,c,f){t.transform(i,r,o,u,c,f),this.__originalTransform(i,r,o,u,c,f)},d.setTransform=function(i,r,o,u,c,f){t.setTransform(i,r,o,u,c,f),this.__originalSetTransform(i,r,o,u,c,f)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},d.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},d.bezierCurveTo=function(e,i,r,o,u,c){t.bezierCurveTo(e,i,r,o,u,c),this.__originalBezierCurveTo(e,i,r,o,u,c)},d.rect=function(e,i,r,o){t.rect(e,i,r,o),this.__originalRect(e,i,r,o)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class FC{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Cf(d,t,e,i,r,o,u,c,f,p){const[m,v,w,S,C,x]=se(d);if(v===0&&w===0){const L=u*m+C,O=Math.round(L),D=c*S+x,z=Math.round(D),j=(u+f)*m+C,B=Math.abs(Math.round(j)-O)||1,Q=(c+p)*S+x,rt=Math.abs(Math.round(Q)-z)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(S),O,z),d.drawImage(t,e,i,r,o,0,0,B,rt),d.setTransform(m,v,w,S,C,x),[B,rt]}if(m===0&&S===0){const L=c*w+C,O=Math.round(L),D=u*v+x,z=Math.round(D),j=(c+p)*w+C,B=Math.abs(Math.round(j)-O)||1,Q=(u+f)*v+x,rt=Math.abs(Math.round(Q)-z)||1;return d.setTransform(0,Math.sign(v),Math.sign(w),0,O,z),d.drawImage(t,e,i,r,o,0,0,rt,B),d.setTransform(m,v,w,S,C,x),[rt,B]}d.drawImage(t,e,i,r,o,u,c,f,p);const k=Math.hypot(m,v),T=Math.hypot(w,S);return[k*f,T*p]}function OC(d){const{width:t,height:e}=d;if(t>tS||e>tS)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let u=new Uint8Array(o*(e+1)),c,f,p;const m=t+7&-8;let v=new Uint8Array(m*e),w=0;for(const T of d.data){let L=128;for(;L>0;)v[w++]=T&L?0:255,L>>=1}let S=0;for(w=0,v[w]!==0&&(u[0]=1,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[f]=v[w]?2:1,++S),w++;for(v[w]!==0&&(u[f]=2,++S),c=1;c<e;c++){w=c*m,p=c*o,v[w-m]!==v[w]&&(u[p]=v[w]?1:8,++S);let T=(v[w]?4:0)+(v[w-m]?8:0);for(f=1;f<t;f++)T=(T>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[T]&&(u[p+f]=r[T],++S),w++;if(v[w-m]!==v[w]&&(u[p+f]=v[w]?2:4,++S),S>i)return null}for(w=m*(e-1),p=c*o,v[w]!==0&&(u[p]=8,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[p+f]=v[w]?4:8,++S),w++;if(v[w]!==0&&(u[p+f]=4,++S),S>i)return null;const C=new Int32Array([0,o,-1,0,-o,0,0,0,1]),x=new Path2D;for(c=0;S&&c<=e;c++){let T=c*o;const L=T+t;for(;T<L&&!u[T];)T++;if(T===L)continue;x.moveTo(T%o,c);const O=T;let D=u[T];do{const z=C[D];do T+=z;while(!u[T]);const j=u[T];j!==5&&j!==10?(D=j,u[T]=0):(D=j&51*D>>4,u[T]&=D>>2|D<<2),x.lineTo(T%o,T/o|0),u[T]||--S}while(O!==T);--c}return v=null,u=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(x),T.beginPath(),T.restore()}}class eS{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=SS,this.textMatrixScale=1,this.fontMatrix=Qm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Qe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=dt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=dt.applyTransform(e,t),r=dt.applyTransform(e.slice(2),t),o=dt.applyTransform([e[0],e[3]],t),u=dt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],o[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],u[1])}updateScalingPathMinMax(t,e){dt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,o,u,c,f,p,m){const v=dt.bezierBoundingBox(e,i,r,o,u,c,f,p,m);m||this.updateRectMinMax(t,v)}getPathBoundingBox(t=rn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===rn.STROKE){e||Yt("Stroke bounding box must include transform.");const r=dt.singularValueDecompose2dScale(e),o=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=u,i[2]+=o,i[3]+=u}return i}updateClipFromPath(){const t=dt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=rn.FILL,e=null){return dt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function nS(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%Mn,o=(e-r)/Mn,u=r===0?o:o+1,c=d.createImageData(i,Mn);let f=0,p;const m=t.data,v=c.data;let w,S,C,x;if(t.kind===Tf.GRAYSCALE_1BPP){const k=m.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),L=T.length,O=i+7>>3,D=4294967295,z=mn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(C=w<o?Mn:r,p=0,S=0;S<C;S++){const j=k-f;let B=0;const Q=j>O?i:j*8-7,rt=Q&-8;let wt=0,ft=0;for(;B<rt;B+=8)ft=m[f++],T[p++]=ft&128?D:z,T[p++]=ft&64?D:z,T[p++]=ft&32?D:z,T[p++]=ft&16?D:z,T[p++]=ft&8?D:z,T[p++]=ft&4?D:z,T[p++]=ft&2?D:z,T[p++]=ft&1?D:z;for(;B<Q;B++)wt===0&&(ft=m[f++],wt=128),T[p++]=ft&wt?D:z,wt>>=1}for(;p<L;)T[p++]=0;d.putImageData(c,0,w*Mn)}}else if(t.kind===Tf.RGBA_32BPP){for(S=0,x=i*Mn*4,w=0;w<o;w++)v.set(m.subarray(f,f+x)),f+=x,d.putImageData(c,0,S),S+=Mn;w<u&&(x=i*r*4,v.set(m.subarray(f,f+x)),d.putImageData(c,0,S))}else if(t.kind===Tf.RGB_24BPP)for(C=Mn,x=i*C,w=0;w<u;w++){for(w>=o&&(C=r,x=i*C),p=0,S=x;S--;)v[p++]=m[f++],v[p++]=m[f++],v[p++]=m[f++],v[p++]=255;d.putImageData(c,0,w*Mn)}else throw new Error(`bad image kind: ${t.kind}`)}function iS(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%Mn,o=(e-r)/Mn,u=r===0?o:o+1,c=d.createImageData(i,Mn);let f=0;const p=t.data,m=c.data;for(let v=0;v<u;v++){const w=v<o?Mn:r;({srcPos:f}=IC({src:p,srcPos:f,dest:m,width:i,height:w,nonBlackColor:0})),d.putImageData(c,0,v*Mn)}}function hc(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)d[i]!==void 0&&(t[i]=d[i]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function xf(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!on){const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}}function sS(d,t){if(t)return!0;const e=dt.singularValueDecompose2dScale(d);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*to.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const $C=["butt","round","square"],zC=["miter","round","bevel"],HC={},rS={};var $i,Ey,Cy,xy;const Pv=class Pv{constructor(t,e,i,r,o,{optionalContentConfig:u,markedContentStack:c=null},f,p){_(this,$i);this.ctx=t,this.current=new eS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new FC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=c,i){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...se(this.compositeCtx))}this.ctx.save(),xf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=se(this.ctx)}executeOperatorList(t,e,i,r){const o=t.argsArray,u=t.fnArray;let c=e||0;const f=o.length;if(f===c)return c;const p=f-c>JA&&typeof i=="function",m=p?Date.now()+NC:0;let v=0;const w=this.commonObjs,S=this.objs;let C;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(C=u[c],C!==_i.dependency)this[C].apply(this,o[c]);else for(const x of o[c]){const k=x.startsWith("g_")?w:S;if(!k.has(x))return k.get(x,i),c}if(c++,c===f)return c;if(p&&++v>JA){if(Date.now()>m)return i(),c;v=0}}}endDrawing(){E(this,$i,Ey).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,$i,Cy).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=i,f=r,p="prescale1",m,v;for(;o>2&&c>1||u>2&&f>1;){let w=c,S=f;o>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/w),u>2&&f>1&&(S=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/S),m=this.cachedCanvases.getCanvas(p,w,S),v=m.context,v.clearRect(0,0,w,S),v.drawImage(t,0,0,c,f,0,0,w,S),t=m.canvas,c=w,f=S,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,u=this.current.patternFill,c=se(e);let f,p,m,v;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),o]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const rt=f.get(p);if(rt&&!u){const wt=Math.round(Math.min(c[0],c[2])+c[4]),ft=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:rt,offsetX:wt,offsetY:ft}}m=rt}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),iS(v.context,t));let w=dt.transform(c,[1/i,0,0,-1/r,0,0]);w=dt.transform(w,[1,0,0,1,0,-r]);const[S,C,x,k]=dt.getAxialAlignedBoundingBox([0,0,i,r],w),T=Math.round(x-S)||1,L=Math.round(k-C)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,L),D=O.context,z=S,j=C;D.translate(-z,-j),D.transform(...w),m||(m=this._scaleImage(v.canvas,Vi(D)),m=m.img,f&&u&&f.set(p,m)),D.imageSmoothingEnabled=sS(se(D),t.interpolate),Cf(D,m,0,0,m.width,m.height,0,0,i,r),D.globalCompositeOperation="source-in";const B=dt.transform(Vi(D),[1,0,0,1,-z,-j]);return D.fillStyle=u?o.getPattern(e,this,B,rn.FILL):o,D.fillRect(0,0,i,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),{canvas:O.canvas,offsetX:Math.round(z),offsetY:Math.round(j)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=$C[t]}setLineJoin(t){this.ctx.lineJoin=zC[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...se(this.suspendedCtx)),hc(this.suspendedCtx,o),DC(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const o=r[0],u=r[1],c=r[2]-o,f=r[3]-u;c===0||f===0||(this.genericComposeSMask(e.context,i,c,f,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,o,u,c,f,p,m,v){let w=t.canvas,S=f-m,C=p-v;if(u){const k=dt.makeHexColor(...u);if(S<0||C<0||S+i>w.width||C+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),L=T.context;L.drawImage(w,-S,-C),L.globalCompositeOperation="destination-atop",L.fillStyle=k,L.fillRect(0,0,i,r),L.globalCompositeOperation="source-over",w=T.canvas,S=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,C,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(S,C,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(f,p,i,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(w,S,C,i,r,f,p,i,r),e.restore()}save(){this.inSMaskMode?(hc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,o,u){this.ctx.transform(t,e,i,r,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,o=this.current;let u=o.x,c=o.y,f,p;const m=se(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let S=0,C=0,x=t.length;S<x;S++)switch(t[S]|0){case _i.rectangle:u=e[C++],c=e[C++];const k=e[C++],T=e[C++],L=u+k,O=c+T;r.moveTo(u,c),k===0||T===0?r.lineTo(L,O):(r.lineTo(L,c),r.lineTo(L,O),r.lineTo(u,O)),v||o.updateRectMinMax(m,[u,c,L,O]),r.closePath();break;case _i.moveTo:u=e[C++],c=e[C++],r.moveTo(u,c),v||o.updatePathMinMax(m,u,c);break;case _i.lineTo:u=e[C++],c=e[C++],r.lineTo(u,c),v||o.updatePathMinMax(m,u,c);break;case _i.curveTo:f=u,p=c,u=e[C+4],c=e[C+5],r.bezierCurveTo(e[C],e[C+1],e[C+2],e[C+3],u,c),o.updateCurvePathMinMax(m,f,p,e[C],e[C+1],e[C+2],e[C+3],u,c,w),C+=6;break;case _i.curveTo2:f=u,p=c,r.bezierCurveTo(u,c,e[C],e[C+1],e[C+2],e[C+3]),o.updateCurvePathMinMax(m,f,p,u,c,e[C],e[C+1],e[C+2],e[C+3],w),u=e[C+2],c=e[C+3],C+=4;break;case _i.curveTo3:f=u,p=c,u=e[C+2],c=e[C+3],r.bezierCurveTo(e[C],e[C+1],u,c,u,c),o.updateCurvePathMinMax(m,f,p,e[C],e[C+1],u,c,u,c,w),C+=4;break;case _i.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(m,w),o.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Vi(e),rn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,Vi(e),rn.FILL),o=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=HC}eoClip(){this.pendingClip=rS}beginText(){this.current.textMatrix=SS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,r=e.getTransform().invertSelf();for(const{transform:o,x:u,y:c,fontSize:f,path:p}of t)i.addPath(p,new DOMMatrix(o).preMultiplySelf(r).translate(u,c).scale(f,-f));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Qm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&kt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif",u=((m=i.systemFontInfo)==null?void 0:m.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const f=i.italic?"italic":"normal";let p=e;e<QA?p=QA:e>ZA&&(p=ZA),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,o,u){this.current.textMatrix=[t,e,i,r,o,u],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,o){const u=this.ctx,c=this.current,f=c.font,p=c.textRenderingMode,m=c.fontSize/c.fontSizeScale,v=p&Qe.FILL_STROKE_MASK,w=!!(p&Qe.ADD_TO_PATH_FLAG),S=c.patternFill&&!f.missingFile,C=c.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||w||S||C)&&(x=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||S||C){if(u.save(),u.translate(e,i),u.scale(m,-m),v===Qe.FILL||v===Qe.FILL_STROKE)if(r){const k=u.getTransform();u.setTransform(...r),u.fill(E(this,$i,xy).call(this,x,k,r))}else u.fill(x);if(v===Qe.STROKE||v===Qe.FILL_STROKE)if(o){const k=u.getTransform();u.setTransform(...o),u.stroke(E(this,$i,xy).call(this,x,k,o))}else u.lineWidth/=m,u.stroke(x);u.restore()}else(v===Qe.FILL||v===Qe.FILL_STROKE)&&u.fillText(t,e,i),(v===Qe.STROKE||v===Qe.FILL_STROKE)&&u.strokeText(t,e,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:se(u),x:e,y:i,fontSize:m,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return Lt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const o=this.ctx,u=e.fontSizeScale,c=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,v=t.length,w=i.vertical,S=w?1:-1,C=i.defaultVMetrics,x=r*e.fontMatrix[0],k=e.textRenderingMode===Qe.FILL&&!i.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(m,-1):o.scale(m,1);let T,L;if(e.patternFill){o.save();const B=e.fillColor.getPattern(o,this,Vi(o),rn.FILL);T=se(o),o.restore(),o.fillStyle=B}if(e.patternStroke){o.save();const B=e.strokeColor.getPattern(o,this,Vi(o),rn.STROKE);L=se(o),o.restore(),o.strokeStyle=B}let O=e.lineWidth;const D=e.textMatrixScale;if(D===0||O===0){const B=e.textRenderingMode&Qe.FILL_STROKE_MASK;(B===Qe.STROKE||B===Qe.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=D;if(u!==1&&(o.scale(u,u),O/=u),o.lineWidth=O,i.isInvalidPDFjsFont){const B=[];let Q=0;for(const rt of t)B.push(rt.unicode),Q+=rt.width;o.fillText(B.join(""),0,0),e.x+=Q*x*m,o.restore(),this.compose();return}let z=0,j;for(j=0;j<v;++j){const B=t[j];if(typeof B=="number"){z+=S*B*r/1e3;continue}let Q=!1;const rt=(B.isSpace?f:0)+c,wt=B.fontChar,ft=B.accent;let Dt,Ft,Et=B.width;if(w){const q=B.vmetric||C,J=-(B.vmetric?q[1]:Et*.5)*x,X=q[2]*x;Et=q?-q[0]:Et,Dt=J/u,Ft=(z+X)/u}else Dt=z/u,Ft=0;if(i.remeasure&&Et>0){const q=o.measureText(wt).width*1e3/r*u;if(Et<q&&this.isFontSubpixelAAEnabled){const J=Et/q;Q=!0,o.save(),o.scale(J,1),Dt/=J}else Et!==q&&(Dt+=(Et-q)/2e3*r/u)}if(this.contentVisible&&(B.isInFont||i.missingFile)){if(k&&!ft)o.fillText(wt,Dt,Ft);else if(this.paintChar(wt,Dt,Ft,T,L),ft){const q=Dt+r*ft.offset.x/u,J=Ft-r*ft.offset.y/u;this.paintChar(ft.fontChar,q,J,T,L)}}const Kt=w?Et*x-rt*p:Et*x+rt*p;z+=Kt,Q&&o.restore()}w?e.y-=z:e.x+=z*m,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,o=i.fontSize,u=i.fontDirection,c=r.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||Qm,w=t.length,S=i.textRenderingMode===Qe.INVISIBLE;let C,x,k,T;if(!(S||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(m,u),C=0;C<w;++C){if(x=t[C],typeof x=="number"){T=c*x*o/1e3,this.ctx.translate(T,0),i.x+=T*m;continue}const L=(x.isSpace?p:0)+f,O=r.charProcOperatorList[x.operatorListId];if(!O){kt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),e.scale(o,o),e.transform(...v),this.executeOperatorList(O),this.restore()),k=dt.applyTransform([x.width,0],v)[0]*o+L,e.translate(k,0),i.x+=k*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,o,u){this.ctx.rect(i,r,o-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||se(this.ctx),o={createCanvasGraphics:u=>new Pv(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new _y(t,i,this.ctx,o,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=dt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=dt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=LC(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Vi(e),rn.SHADING);const r=Vi(e);{const{width:o,height:u}=e.canvas,[c,f,p,m]=dt.getAxialAlignedBoundingBox([0,0,o,u],r);this.ctx.fillRect(c,f,p-c,m-f)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Yt("Should not call beginInlineImage")}beginImageData(){Yt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=se(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(se(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Ip("TODO: Support non-isolated groups."),t.knockout&&kt("Knockout groups not supported.");const i=se(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=dt.getAxialAlignedBoundingBox(t.bbox,se(e));const o=[0,0,e.canvas.width,e.canvas.height];r=dt.intersect(r,o)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),w=v.context;w.translate(-u,-c),w.transform(...i),t.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.save()),hc(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=se(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=dt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,o){if(E(this,$i,Ey).call(this),xf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],c=e[3]-e[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=c;const[f,p]=dt.singularValueDecompose2dScale(se(this.ctx)),{viewportScale:m}=this,v=Math.ceil(u*this.outputScaleX*m),w=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:S,context:C}=this.annotationCanvas;this.annotationCanvasMap.set(t,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=C,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,c*p),xf(this.ctx)}else xf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],u,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new eS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,$i,Cy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=OC(t)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(t),u=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,o,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const f=se(c);c.transform(e,i,r,o,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,v=u.length;m<v;m+=2){const w=dt.transform(f,[e,i,r,o,u[m],u[m+1]]),[S,C]=dt.applyTransform([0,0],w);c.drawImage(p.canvas,S,C)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:u,width:c,height:f,transform:p}=o,m=this.cachedCanvases.getCanvas("maskCanvas",c,f),v=m.context;v.save();const w=this.getObject(u,o);iS(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,Vi(e),rn.FILL):i,v.fillRect(0,0,c,f),v.restore(),e.save(),e.transform(...p),e.scale(1,-1),Cf(e,m.canvas,0,0,c,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){kt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){kt("Dependent image isn't ready yet");return}const u=o.width,c=o.height,f=[];for(let p=0,m=r.length;p<m;p+=2)f.push({transform:[e,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,r),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!on){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,i).context;nS(f,t),o=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(o,Vi(r));r.imageSmoothingEnabled=sS(se(r),t.interpolate),Cf(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;nS(f,t),r=this.applyTransferMapsToCanvas(f)}for(const o of e)i.save(),i.transform(...o.transform),i.scale(1,-1),Cf(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===rS?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:o}=this.ctx.getTransform();let u,c;if(i===0&&r===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)u=c=1/f;else{const m=f*t;u=c=m<1?1/m:1}else if(t===0)u=1/f,c=1/p;else{const m=f*t,v=p*t;u=m<1?1/m:1,c=v<1?1/v:1}}else{const f=Math.abs(e*o-i*r),p=Math.hypot(e,i),m=Math.hypot(r,o);if(t===0)u=m/f,c=p/f;else{const v=t*f;u=m>v?m/v:1,c=p>v?p/v:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&o===1){e.stroke();return}const u=e.getLineDash();if(t&&e.save(),e.scale(r,o),u.length>0){const c=Math.max(r,o);e.setLineDash(u.map(f=>f/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};$i=new WeakSet,Ey=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cy=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},xy=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let gl=Pv;for(const d in _i)gl.prototype[d]!==void 0&&(gl.prototype[_i[d]]=gl.prototype[d]);var ch,hh;class Ks{static get workerPort(){return a(this,ch)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,ch,t)}static get workerSrc(){return a(this,hh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,hh,t)}}ch=new WeakMap,hh=new WeakMap,_(Ks,ch,null),_(Ks,hh,"");var Go,dh;class BC{constructor({parsedData:t,rawData:e}){_(this,Go);_(this,dh);A(this,Go,t),A(this,dh,e)}getRaw(){return a(this,dh)}get(t){return a(this,Go).get(t)??null}getAll(){return yv(a(this,Go))}has(t){return a(this,Go).has(t)}}Go=new WeakMap,dh=new WeakMap;const ul=Symbol("INTERNAL");var fh,ph,gh,Nl;class jC{constructor(t,{name:e,intent:i,usage:r,rbGroups:o}){_(this,fh,!1);_(this,ph,!1);_(this,gh,!1);_(this,Nl,!0);A(this,fh,!!(t&qn.DISPLAY)),A(this,ph,!!(t&qn.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=o}get visible(){if(a(this,gh))return a(this,Nl);if(!a(this,Nl))return!1;const{print:t,view:e}=this.usage;return a(this,fh)?(e==null?void 0:e.viewState)!=="OFF":a(this,ph)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==ul&&Yt("Internal method `_setVisible` called."),A(this,gh,i),A(this,Nl,e)}}fh=new WeakMap,ph=new WeakMap,gh=new WeakMap,Nl=new WeakMap;var Nr,Gt,Dl,Fl,mh,ky;class UC{constructor(t,e=qn.DISPLAY){_(this,mh);_(this,Nr,null);_(this,Gt,new Map);_(this,Dl,null);_(this,Fl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Fl,t.order);for(const i of t.groups)a(this,Gt).set(i.id,new jC(e,i));if(t.baseState==="OFF")for(const i of a(this,Gt).values())i._setVisible(ul,!1);for(const i of t.on)a(this,Gt).get(i)._setVisible(ul,!0);for(const i of t.off)a(this,Gt).get(i)._setVisible(ul,!1);A(this,Dl,this.getHash())}}isVisible(t){if(a(this,Gt).size===0)return!0;if(!t)return Ip("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Gt).has(t.id)?a(this,Gt).get(t.id).visible:(kt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,mh,ky).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Gt).has(e))return kt(`Optional content group not found: ${e}`),!0;if(a(this,Gt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Gt).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!a(this,Gt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Gt).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!a(this,Gt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Gt).has(e))return kt(`Optional content group not found: ${e}`),!0;if(a(this,Gt).get(e).visible)return!1}return!0}return kt(`Unknown optional content policy ${t.policy}.`),!0}return kt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var o;const r=a(this,Gt).get(t);if(!r){kt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==t&&((o=a(this,Gt).get(c))==null||o._setVisible(ul,!1,!0));r._setVisible(ul,!!e,!0),A(this,Nr,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=a(this,Gt).get(r);if(o)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}A(this,Nr,null)}get hasInitialVisibility(){return a(this,Dl)===null||this.getHash()===a(this,Dl)}getOrder(){return a(this,Gt).size?a(this,Fl)?a(this,Fl).slice():[...a(this,Gt).keys()]:null}getGroups(){return a(this,Gt).size>0?yv(a(this,Gt)):null}getGroup(t){return a(this,Gt).get(t)||null}getHash(){if(a(this,Nr)!==null)return a(this,Nr);const t=new ZS;for(const[e,i]of a(this,Gt))t.update(`${e}:${i.visible}`);return A(this,Nr,t.hexdigest())}}Nr=new WeakMap,Gt=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,mh=new WeakSet,ky=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const o=t[r];let u;if(Array.isArray(o))u=E(this,mh,ky).call(this,o);else if(a(this,Gt).has(o))u=a(this,Gt).get(o).visible;else return kt(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class VC{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Ae(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});Ae(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,o;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ae(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new GC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new WC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class GC{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Av(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class WC{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XC(d){let t=!0,e=i("filename\\*","i").exec(d);if(e){e=e[1];let m=c(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=u(d),e){const m=p(e);return o(m)}if(e=i("filename","i").exec(d),e){e=e[1];let m=c(e);return m=p(m),o(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),S=Np(v);v=w.decode(S),t=!1}catch{}}return v}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const v=[];let w;const S=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=S.exec(m))!==null;){let[,x,k,T]=w;if(x=parseInt(x,10),x in v){if(x===0)break;continue}v[x]=[k,T]}const C=[];for(let x=0;x<v.length&&x in v;++x){let[k,T]=v[x];T=c(T),k&&(T=unescape(T),x===0&&(T=f(T))),C.push(T)}return C.join("")}function c(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const S=v[w].indexOf('"');S!==-1&&(v[w]=v[w].slice(0,S),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function f(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),C=m.slice(v+1).replace(/^[^']*'/,"");return r(w,C)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,S,C){if(S==="q"||S==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,k){return String.fromCharCode(parseInt(k,16))}),r(w,C);try{C=atob(C)}catch{}return r(w,C)})}return""}function db(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function Op(d){try{return new URL(d).origin}catch{}return null}function fb({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||i||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function pb(d){const t=d.get("Content-Disposition");if(t){let e=XC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Av(e))return e}return null}function $p(d,t){return d===404||d===0&&t.startsWith("file:")?new Ic('Missing PDF "'+t+'".'):new sp(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d)}function gb(d){return d===200||d===206}function mb(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function yb(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(kt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class oS{constructor(t){yt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=db(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ae(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new YC(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class qC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,mb(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Op(o.url),!gb(o.status))throw $p(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:c,suggestedLength:f}=fb({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=f||this._contentLength,this._filename=pb(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Jr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:yb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class YC{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const u=r.url;fetch(u,mb(o,this._withCredentials,this._abortController)).then(c=>{const f=Op(c.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!gb(c.status))throw $p(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:yb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Ym=200,Km=206;function KC(d){const t=d.response;return typeof t!="string"?t:Np(t).buffer}class QC{constructor({url:t,httpHeaders:e,withCredentials:i}){yt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=db(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,u]of this.headers)e.setRequestHeader(o,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Km):r.expectedStatus=Ym,e.responseType="arraybuffer",Ae(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const o=r.status||Ym;if(!(o===Ym&&i.expectedStatus===Km)&&o!==i.expectedStatus){i.onError(r.status);return}const c=KC(r);if(o===Km){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?i.onDone({begin:parseInt(p[1],10),chunk:c}):(kt('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone({begin:0,chunk:c}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ZC{constructor(t){this._source=t,this._manager=new QC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ae(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new JC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new tx(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class JC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Op(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[f,...p]=c.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:u}=fb({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=pb(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=$p(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tx{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Op((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=$p(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ex=/^[a-z][a-z0-9\-+.]+:/i;function nx(d){if(ex.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class ix{constructor(t){this.source=t,this.url=nx(t.url),Ae(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ae(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new sx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new rx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class sx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ic(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Jr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rx{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ox=1e5,Cn=30,ax=.8;var cS,Dr,Pn,yh,vh,Wo,Ns,wh,Ah,Xo,Ol,$l,Fr,zl,Sh,Hl,qo,bh,_h,Yo,Ko,Eh,Or,Bl,tr,vb,wb,Ty,Qn,zf,Py,Ab,Sb;const Ce=class Ce{constructor({textContentSource:t,container:e,viewport:i}){_(this,tr);_(this,Dr,Promise.withResolvers());_(this,Pn,null);_(this,yh,!1);_(this,vh,!!((cS=globalThis.FontInspector)!=null&&cS.enabled));_(this,Wo,null);_(this,Ns,null);_(this,wh,0);_(this,Ah,0);_(this,Xo,null);_(this,Ol,null);_(this,$l,0);_(this,Fr,0);_(this,zl,Object.create(null));_(this,Sh,[]);_(this,Hl,null);_(this,qo,[]);_(this,bh,new WeakMap);_(this,_h,null);var f;if(t instanceof ReadableStream)A(this,Hl,t);else if(typeof t=="object")A(this,Hl,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Pn,A(this,Ol,e)),A(this,Fr,i.scale*(globalThis.devicePixelRatio||1)),A(this,$l,i.rotation),A(this,Ns,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:u,pageY:c}=i.rawDims;A(this,_h,[1,0,0,-1,-u,c+o]),A(this,Ah,r),A(this,wh,o),E(f=Ce,Qn,Ab).call(f),ka(e,i),a(this,Dr).promise.finally(()=>{a(Ce,Bl).delete(this),A(this,Ns,null),A(this,zl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=mn.platform;return Lt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Xo).read().then(({value:e,done:i})=>{if(i){a(this,Dr).resolve();return}a(this,Wo)??A(this,Wo,e.lang),Object.assign(a(this,zl),e.styles),E(this,tr,vb).call(this,e.items),t()},a(this,Dr).reject)};return A(this,Xo,a(this,Hl).getReader()),a(Ce,Bl).add(this),t(),a(this,Dr).promise}update({viewport:t,onBefore:e=null}){var o;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==a(this,$l)&&(e==null||e(),A(this,$l,r),ka(a(this,Ol),{rotation:r})),i!==a(this,Fr)){e==null||e(),A(this,Fr,i);const u={div:null,properties:null,ctx:E(o=Ce,Qn,zf).call(o,a(this,Wo))};for(const c of a(this,qo))u.properties=a(this,bh).get(c),u.div=c,E(this,tr,Ty).call(this,u)}}cancel(){var e;const t=new Jr("TextLayer task cancelled.");(e=a(this,Xo))==null||e.cancel(t).catch(()=>{}),A(this,Xo,null),a(this,Dr).reject(t)}get textDivs(){return a(this,qo)}get textContentItemsStr(){return a(this,Sh)}static cleanup(){if(!(a(this,Bl).size>0)){a(this,Yo).clear();for(const{canvas:t}of a(this,Ko).values())t.remove();a(this,Ko).clear()}}};Dr=new WeakMap,Pn=new WeakMap,yh=new WeakMap,vh=new WeakMap,Wo=new WeakMap,Ns=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Xo=new WeakMap,Ol=new WeakMap,$l=new WeakMap,Fr=new WeakMap,zl=new WeakMap,Sh=new WeakMap,Hl=new WeakMap,qo=new WeakMap,bh=new WeakMap,_h=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Eh=new WeakMap,Or=new WeakMap,Bl=new WeakMap,tr=new WeakSet,vb=function(t){var r,o;if(a(this,yh))return;(o=a(this,Ns)).ctx??(o.ctx=E(r=Ce,Qn,zf).call(r,a(this,Wo)));const e=a(this,qo),i=a(this,Sh);for(const u of t){if(e.length>ox){kt("Ignoring additional textDivs for performance reasons."),A(this,yh,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=a(this,Pn);A(this,Pn,document.createElement("span")),a(this,Pn).classList.add("markedContent"),u.id!==null&&a(this,Pn).setAttribute("id",`${u.id}`),c.append(a(this,Pn))}else u.type==="endMarkedContent"&&A(this,Pn,a(this,Pn).parentNode);continue}i.push(u.str),E(this,tr,wb).call(this,u)}},wb=function(t){var x;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,qo).push(e);const r=dt.transform(a(this,_h),t.transform);let o=Math.atan2(r[1],r[0]);const u=a(this,zl)[t.fontName];u.vertical&&(o+=Math.PI/2);let c=a(this,vh)&&u.fontSubstitution||u.fontFamily;c=Ce.fontFamilyMap.get(c)||c;const f=Math.hypot(r[2],r[3]),p=f*E(x=Ce,Qn,Sb).call(x,c,a(this,Wo));let m,v;o===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(o),v=r[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",S=e.style;a(this,Pn)===a(this,Ol)?(S.left=`${(100*m/a(this,Ah)).toFixed(2)}%`,S.top=`${(100*v/a(this,wh)).toFixed(2)}%`):(S.left=`${w}${m.toFixed(2)}px)`,S.top=`${w}${v.toFixed(2)}px)`),S.fontSize=`${w}${(a(Ce,Or)*f).toFixed(2)}px)`,S.fontFamily=c,i.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,vh)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let C=!1;if(t.str.length>1)C=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(C=!0)}if(C&&(i.canvasWidth=u.vertical?t.height:t.width),a(this,bh).set(e,i),a(this,Ns).div=e,a(this,Ns).properties=i,E(this,tr,Ty).call(this,a(this,Ns)),i.hasText&&a(this,Pn).append(e),i.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),a(this,Pn).append(k)}},Ty=function(t){var c;const{div:e,properties:i,ctx:r}=t,{style:o}=e;let u="";if(a(Ce,Or)>1&&(u=`scale(${1/a(Ce,Or)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:f}=o,{canvasWidth:p,fontSize:m}=i;E(c=Ce,Qn,Py).call(c,r,m*a(this,Fr),f);const{width:v}=r.measureText(e.textContent);v>0&&(u=`scaleX(${p*a(this,Fr)/v}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(o.transform=u)},Qn=new WeakSet,zf=function(t=null){let e=a(this,Ko).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Ko).set(t,e),a(this,Eh).set(e,{size:0,family:""})}return e},Py=function(t,e,i){const r=a(this,Eh).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},Ab=function(){if(a(this,Or)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Or,t.getBoundingClientRect().height),t.remove()},Sb=function(t,e){const i=a(this,Yo).get(t);if(i)return i;const r=E(this,Qn,zf).call(this,e);r.canvas.width=r.canvas.height=Cn,E(this,Qn,Py).call(this,r,Cn,t);const o=r.measureText("");let u=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(u){const m=u/(u+c);return a(this,Yo).set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Cn,Cn),r.strokeText("g",0,0);let f=r.getImageData(0,0,Cn,Cn).data;c=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){c=Math.ceil(m/4/Cn);break}r.clearRect(0,0,Cn,Cn),r.strokeText("A",0,Cn),f=r.getImageData(0,0,Cn,Cn).data,u=0;for(let m=0,v=f.length;m<v;m+=4)if(f[m]>0){u=Cn-Math.floor(m/4/Cn);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+c):ax;return a(this,Yo).set(t,p),p},_(Ce,Qn),_(Ce,Yo,new Map),_(Ce,Ko,new Map),_(Ce,Eh,new WeakMap),_(Ce,Or,null),_(Ce,Bl,new Set);let Nc=Ce;class Dc{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(o){var f;if(!o)return;let u=null;const c=o.name;if(c==="#text")u=o.value;else if(Dc.shouldBuildText(c))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const p of o.children)r(p)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const lx=65536,ux=100,cx=5e3,hx=on?CC:bC,dx=on?xC:ob,fx=on?EC:_C,px=on?kC:cb;function gx(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new Ry,{docId:e}=t,i=d.url?mx(d.url):null,r=d.data?yx(d.data):null,o=d.httpHeaders||null,u=d.withCredentials===!0,c=d.password??null,f=d.range instanceof bb?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:lx;let m=d.worker instanceof ml?d.worker:null;const v=d.verbosity,w=typeof d.docBaseUrl=="string"&&!Fp(d.docBaseUrl)?d.docBaseUrl:null,S=typeof d.cMapUrl=="string"?d.cMapUrl:null,C=d.cMapPacked!==!1,x=d.CMapReaderFactory||dx,k=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,T=d.StandardFontDataFactory||px,L=d.stopAtErrors!==!0,O=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,D=d.isEvalSupported!==!1,z=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!on,j=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!on&&(mn.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Q=typeof d.disableFontFace=="boolean"?d.disableFontFace:on,rt=d.fontExtraProperties===!0,wt=d.enableXfa===!0,ft=d.ownerDocument||globalThis.document,Dt=d.disableRange===!0,Ft=d.disableStream===!0,Et=d.disableAutoFetch===!0,Kt=d.pdfBug===!0,q=d.CanvasFactory||hx,J=d.FilterFactory||fx,X=d.enableHWA===!0,lt=f?f.length:d.length??NaN,Z=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!on&&!Q,I=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:x===ob&&T===cb&&S&&k&&pc(S,document.baseURI)&&pc(k,document.baseURI),H=null;tC(v);const ct={canvasFactory:new q({ownerDocument:ft,enableHWA:X}),filterFactory:new J({docId:e,ownerDocument:ft}),cMapReaderFactory:I?null:new x({baseUrl:S,isCompressed:C}),standardFontDataFactory:I?null:new T({baseUrl:k})};if(!m){const At={verbosity:v,port:Ks.workerPort};m=At.port?ml.fromPort(At):new ml(At),t._worker=m}const _t={docId:e,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:Et,rangeChunkSize:p,length:lt,docBaseUrl:w,enableXfa:wt,evaluatorOptions:{maxImageSize:O,disableFontFace:Q,ignoreErrors:L,isEvalSupported:D,isOffscreenCanvasSupported:z,isImageDecoderSupported:j,canvasMaxAreaInBytes:B,fontExtraProperties:rt,useSystemFonts:Z,cMapUrl:I?S:null,standardFontDataUrl:I?k:null}},Pt={disableFontFace:Q,fontExtraProperties:rt,ownerDocument:ft,pdfBug:Kt,styleElement:H,loadingParams:{disableAutoFetch:Et,enableXfa:wt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const At=m.messageHandler.sendWithPromise("GetDocRequest",_t,r?[r.buffer]:null);let mt;if(f)mt=new VC(f,{disableRange:Dt,disableStream:Ft});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let It;if(on)if(pc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");It=oS}else It=ix;else It=pc(i)?oS:ZC;mt=new It({url:i,length:lt,httpHeaders:o,withCredentials:u,rangeChunkSize:p,disableRange:Dt,disableStream:Ft})}return At.then(It=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const qt=new vc(e,It,m.port),an=new Sx(qt,t,mt,Pt,ct);t._transport=an,qt.send("Ready",null)})}).catch(t._capability.reject),t}function mx(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(on&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function yx(d){if(on&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Np(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function aS(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var Ap;const Sp=class Sp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${cn(Sp,Ap)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Ap=new WeakMap,_(Sp,Ap,0);let Ry=Sp;class bb{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Yt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class vx{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Lt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $r,Ds,di,cl,Hf;class wx{constructor(t,e,i,r=!1){_(this,di);_(this,$r,null);_(this,Ds,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new XA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new _b,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new ad({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Lt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=Sr.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var D,z;(D=this._stats)==null||D.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:S,cacheKey:C}=w;A(this,Ds,!1),E(this,di,Hf).call(this),c||(c=this._transport.getOptionalContentConfig(S));let x=this._intentStates.get(C);x||(x=Object.create(null),this._intentStates.set(C,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const k=!!(S&qn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(w));const T=j=>{var B;x.renderTasks.delete(L),(this._maybeCleanupAfterRender||k)&&A(this,Ds,!0),E(this,di,cl).call(this,!k),j?(L.capability.reject(j),this._abortOperatorList({intentState:x,reason:j instanceof Error?j:new Error(j)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new Ly({callback:T,params:{canvasContext:t,viewport:e,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(x.renderTasks||(x.renderTasks=new Set)).add(L);const O=L.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([j,B])=>{var Q;if(this.destroyed){T();return}if((Q=this._stats)==null||Q.time("Rendering"),!(B.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:j,optionalContentConfig:B}),L.operatorListChanged()}).catch(T),O}getOperatorList({intent:t="display",annotationMode:e=Sr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,i,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Dc.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function o(){u.read().then(function({value:f,done:p}){if(p){i(c);return}c.lang??(c.lang=f.lang),Object.assign(c.styles,f.styles),c.items.push(...f.items),o()},r)}const u=e.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),A(this,Ds,!1),E(this,di,Hf).call(this),Promise.all(t)}cleanup(t=!1){A(this,Ds,!0);const e=E(this,di,cl).call(this,!1);return t&&e&&this._stats&&(this._stats=new XA),e}_startRenderPage(t,e){var r,o;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,di,cl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:o,transfer:u}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();E(this,di,cl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof wv){let r=ux;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Jr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}$r=new WeakMap,Ds=new WeakMap,di=new WeakSet,cl=function(t=!1){if(E(this,di,Hf).call(this),!a(this,Ds)||this.destroyed)return!1;if(t)return A(this,$r,setTimeout(()=>{A(this,$r,null),E(this,di,cl).call(this,!1)},cx)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Ds,!1),!0},Hf=function(){a(this,$r)&&(clearTimeout(a(this,$r)),A(this,$r,null))};var Fs,bp;class Ax{constructor(){_(this,Fs,new Map);_(this,bp,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,bp).then(()=>{for(const[r]of a(this,Fs))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){kt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}a(this,Fs).set(e,r)}removeEventListener(t,e){const i=a(this,Fs).get(e);i==null||i(),a(this,Fs).delete(e)}terminate(){for(const[,t]of a(this,Fs))t==null||t();a(this,Fs).clear()}}Fs=new WeakMap,bp=new WeakMap;var _p,Qo,Zo,jl,Bf,Ul,jf;const ie=class ie{constructor({name:t=null,port:e=null,verbosity:i=eC()}={}){_(this,jl);var r;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=a(ie,Zo))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(ie,Zo)||A(ie,Zo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new vc("main","worker",t),this._messageHandler.on("ready",function(){}),E(this,jl,Bf).call(this)}_initialize(){if(a(ie,Qo)||a(ie,Ul,jf)){this._setupFakeWorker();return}let{workerSrc:t}=ie;try{ie._isSameOrigin(window.location.href,t)||(t=ie._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new vc("main","worker",e),r=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,E(this,jl,Bf).call(this)}),i.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};u();return}catch{Ip("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(ie,Qo)||(kt("Setting up fake worker."),A(ie,Qo,!0)),ie._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Ax;this._port=e;const i=`fake${cn(ie,_p)._++}`,r=new vc(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new vc(i,i+"_worker",e),E(this,jl,Bf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(ie,Zo))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,Zo))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ie(t)}static get workerSrc(){if(Ks.workerSrc)return Ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Lt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Ul,jf)?a(this,Ul,jf):(await import(this.workerSrc)).WorkerMessageHandler)())}};_p=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,jl=new WeakSet,Bf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ul=new WeakSet,jf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(ie,Ul),_(ie,_p,0),_(ie,Qo,!1),_(ie,Zo),on&&(A(ie,Qo,!0),Ks.workerSrc||(Ks.workerSrc="./pdf.worker.mjs")),ie._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},ie._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let ml=ie;var Os,ns,Vl,Gl,$s,Jo,_c;class Sx{constructor(t,e,i,r,o){_(this,Jo);_(this,Os,new Map);_(this,ns,new Map);_(this,Vl,new Map);_(this,Gl,new Map);_(this,$s,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new _b,this.fontLoader=new AC({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Lt(this,"annotationStorage",new _v)}getRenderingIntent(t,e=Sr.ENABLE,i=null,r=!1,o=!1){let u=qn.DISPLAY,c=wy;switch(t){case"any":u=qn.ANY;break;case"display":break;case"print":u=qn.PRINT;break;default:kt(`getRenderingIntent - invalid intent: ${t}`)}const f=u&qn.PRINT&&i instanceof tb?i:this.annotationStorage;switch(e){case Sr.DISABLE:u+=qn.ANNOTATIONS_DISABLE;break;case Sr.ENABLE:break;case Sr.ENABLE_FORMS:u+=qn.ANNOTATIONS_FORMS;break;case Sr.ENABLE_STORAGE:u+=qn.ANNOTATIONS_STORAGE,c=f.serializable;break;default:kt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=qn.IS_EDITING),o&&(u+=qn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,v=[u,c.hash,m];return{renderingIntent:u,cacheKey:v.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,$s))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,ns).values())t.push(r._destroy());a(this,ns).clear(),a(this,Vl).clear(),a(this,Gl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Os).clear(),this.filterFactory.destroy(),Nc.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Jr("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{Ae(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){r.close();return}Ae(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:u}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(i,r)=>{Ae(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:u,done:c}){if(c){r.close();return}Ae(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{o.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new vx(i,this))}),t.on("DocException",i=>{e._capability.reject(xn(i))}),t.on("PasswordRequest",i=>{A(this,$s,Promise.withResolvers());try{if(!e.onPassword)throw xn(i);const r=o=>{o instanceof Error?a(this,$s).reject(o):a(this,$s).resolve({password:o})};e.onPassword(r,i.code)}catch(r){a(this,$s).reject(r)}return a(this,$s).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,ns).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,o])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const S=o.error;kt(`Error during font loading: ${S}`),this.commonObjs.resolve(i,S);break}const m=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(S,C)=>globalThis.FontInspector.fontAdded(S,C):null,v=new SC(o,{disableFontFace:c,fontExtraProperties:f,inspectFont:m});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=o;Ae(w,"The imageRef must be defined.");for(const S of a(this,ns).values())for(const[,C]of S.objs)if((C==null?void 0:C.ref)===w)return C.dataLen?(this.commonObjs.resolve(i,structuredClone(C)),C.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,o,u])=>{var f;if(this.destroyed)return;const c=a(this,ns).get(r);if(!c.objs.has(i)){if(c._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":c.objs.resolve(i,u),(u==null?void 0:u.dataLen)>KE&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Vl).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,Gl).set(o.refStr,t);const u=new wx(e,o,this,this._params.pdfBug);return a(this,ns).set(e,u),u});return a(this,Vl).set(e,r),r}getPageIndex(t){return aS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,Jo,_c).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Jo,_c).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Jo,_c).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,Jo,_c).call(this,"GetOptionalContentConfig").then(e=>new UC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Os).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,u;return{info:r[0],metadata:r[1]?new BC(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return a(this,Os).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,ns).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Os).clear(),this.filterFactory.destroy(!0),Nc.cleanup()}}cachedPageNumber(t){if(!aS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Gl).get(e)??null}}Os=new WeakMap,ns=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,$s=new WeakMap,Jo=new WeakSet,_c=function(t,e=null){const i=a(this,Os).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return a(this,Os).set(t,r),r};const dc=Symbol("INITIAL_DATA");var zn,Ch,My;class _b{constructor(){_(this,Ch);_(this,zn,Object.create(null))}get(t,e=null){if(e){const r=E(this,Ch,My).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=a(this,zn)[t];if(!i||i.data===dc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,zn)[t];return!!e&&e.data!==dc}delete(t){const e=a(this,zn)[t];return!e||e.data===dc?!1:(delete a(this,zn)[t],!0)}resolve(t,e=null){const i=E(this,Ch,My).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,zn)){const{data:i}=a(this,zn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}A(this,zn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,zn)){const{data:e}=a(this,zn)[t];e!==dc&&(yield[t,e])}}}zn=new WeakMap,Ch=new WeakSet,My=function(t){var e;return(e=a(this,zn))[t]||(e[t]={...Promise.withResolvers(),data:dc})};var zr;class bx{constructor(t){_(this,zr,null);A(this,zr,t),this.onContinue=null}get promise(){return a(this,zr).capability.promise}cancel(t=0){a(this,zr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,zr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,zr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}zr=new WeakMap;var Hr,ta;const So=class So{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:u,pageIndex:c,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){_(this,Hr,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,f;if(this.cancelled)return;if(this._canvas){if(a(So,ta).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(So,ta).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:u}=this.params;this.gfx=new gl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,Hr)&&(window.cancelAnimationFrame(a(this,Hr)),A(this,Hr,null)),a(So,ta).delete(this._canvas),this.callback(t||new wv(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Hr,window.requestAnimationFrame(()=>{A(this,Hr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(So,ta).delete(this._canvas),this.callback())))}};Hr=new WeakMap,ta=new WeakMap,_(So,ta,new WeakSet);let Ly=So;const _x="4.10.38",Ex="f9bea397f";function lS(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function fc(d){return Math.max(0,Math.min(255,255*d))}class uS{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fc(t),[t,t,t]}static G_HTML([t]){const e=lS(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(fc)}static RGB_HTML(t){return`#${t.map(lS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[fc(1-Math.min(1,t+r)),fc(1-Math.min(1,i+r)),fc(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,o=1-e,u=1-i,c=Math.min(r,o,u);return["CMYK",r,o,u,c]}}class Cx{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Yt("Abstract method `_createSVG` called.")}}class Cv extends Cx{_createSVG(t){return document.createElementNS(As,t)}}class Eb{static setupStorage(t,e,i,r,o){const u=r.getValue(e,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?t.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of i.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const f=c.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:o}){const{attributes:u}=e,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}c&&o.addLinkAttributes(t,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(t,u.dataId,e,i)}static render(t){var v,w;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,o=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:o,linkService:i});const c=o!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}c&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);u.append(S),c&&Dc.shouldBuildText(r.name)&&p.push(S)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[S,C,x]=m.at(-1);if(C+1===S.children.length){m.pop();continue}const k=S.children[++m.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const O=document.createTextNode(k.value);p.push(O),x.append(O);continue}const L=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(x.append(L),k.attributes&&this.setAttributes({html:L,element:k,storage:e,intent:o,linkService:i}),((w=k.children)==null?void 0:w.length)>0)m.push([k,-1,L]);else if(k.value){const O=document.createTextNode(k.value);c&&Dc.shouldBuildText(T)&&p.push(O),L.append(O)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ud=1e3,xx=9,Pa=new WeakSet;function Zr(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class kx{static create(t){switch(t.data.annotationType){case Ee.LINK:return new Cb(t);case Ee.TEXT:return new Tx(t);case Ee.WIDGET:switch(t.data.fieldType){case"Tx":return new Px(t);case"Btn":return t.data.radioButton?new Tb(t):t.data.checkBox?new Mx(t):new Lx(t);case"Ch":return new Ix(t);case"Sig":return new Rx(t)}return new Ma(t);case Ee.POPUP:return new Ny(t);case Ee.FREETEXT:return new Ib(t);case Ee.LINE:return new Dx(t);case Ee.SQUARE:return new Fx(t);case Ee.CIRCLE:return new Ox(t);case Ee.POLYLINE:return new Nb(t);case Ee.CARET:return new zx(t);case Ee.INK:return new xv(t);case Ee.POLYGON:return new $x(t);case Ee.HIGHLIGHT:return new Db(t);case Ee.UNDERLINE:return new Hx(t);case Ee.SQUIGGLY:return new Bx(t);case Ee.STRIKEOUT:return new jx(t);case Ee.STAMP:return new Fb(t);case Ee.FILEATTACHMENT:return new Ux(t);default:return new ye(t)}}}var ea,Wl,Xl,xh,Iy;const Rv=class Rv{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){_(this,xh);_(this,ea,null);_(this,Wl,!1);_(this,Xl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Rv._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,ea)||A(this,ea,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&E(this,xh,Iy).call(this,e),(i=a(this,Xl))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,ea)&&(E(this,xh,Iy).call(this,a(this,ea).rect),(t=a(this,Xl))==null||t.popup.resetEdited(),A(this,ea,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Ma||(o.tabIndex=ud);const{style:u}=o;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Ny){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:c,height:f}=Zr(e.rect);if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(x>0||k>0){const L=`calc(${x}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;u.borderRadius=L}else if(this instanceof Tb){const L=`calc(${c}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;u.borderRadius=L}switch(e.borderStyle.style){case cc.SOLID:u.borderStyle="solid";break;case cc.DASHED:u.borderStyle="dashed";break;case cc.BEVELED:kt("Unimplemented border style: beveled");break;case cc.INSET:kt("Unimplemented border style: inset");break;case cc.UNDERLINE:u.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(A(this,Wl,!0),u.borderColor=dt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):u.borderWidth=0}const p=dt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:S}=r.rawDims;u.left=`${100*(p[0]-w)/m}%`,u.top=`${100*(p[1]-S)/v}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(u.width=`${100*c/m}%`,u.height=`${100*f/v}%`):this.setRotation(C,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:u}=Zr(this.data.rect);let c,f;t%180===0?(c=100*o/i,f=100*u/r):(c=100*u/i,f=100*o/r),e.style.width=`${c}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const o=r.detail[e],u=o[0],c=o.slice(1);r.target.style[i]=uS[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:uS[`${u}_rgb`](c)})};return Lt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||i[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,o]of Object.entries(e)){const u=i[r];if(u){const c={detail:{[r]:o},target:t};u(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,k,T,L]=t.subarray(2,6);if(r===x&&o===k&&e===T&&i===L)return}const{style:u}=this.container;let c;if(a(this,Wl)){const{borderColor:x,borderWidth:k}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const f=r-e,p=o-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const S=m.createElement("clipPath"),C=`clippath_${this.data.id}`;S.setAttribute("id",C),S.setAttribute("clipPathUnits","objectBoundingBox"),w.append(S);for(let x=2,k=t.length;x<k;x+=8){const T=t[x],L=t[x+1],O=t[x+2],D=t[x+3],z=m.createElement("rect"),j=(O-e)/f,B=(o-L)/p,Q=(T-O)/f,rt=(L-D)/p;z.setAttribute("x",j),z.setAttribute("y",B),z.setAttribute("width",Q),z.setAttribute("height",rt),S.append(z),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${B}" width="${Q}" height="${rt}"/>`)}a(this,Wl)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(v),this.container.style.clipPath=`url(#${C})`}_createPopup(){const{data:t}=this,e=A(this,Xl,new Ny({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Yt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:u,exportValues:c}of r){if(o===-1||u===e)continue;const f=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Pa.has(p)){kt(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:f,domElement:p})}return i}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,u=r.getAttribute("data-element-id");u!==e&&Pa.has(r)&&i.push({id:u,exportValue:o,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ea=new WeakMap,Wl=new WeakMap,Xl=new WeakMap,xh=new WeakSet,Iy=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}}}=this;i==null||i.splice(0,4,...t);const{width:p,height:m}=Zr(t);e.left=`${100*(t[0]-c)/o}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*p/o}%`,e.height=`${100*m/u}%`):this.setRotation(r)};let ye=Rv;var Yn,yo,xb,kb;class Cb extends ye{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});_(this,Yn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action),o=!0):e.attachment?(E(this,Yn,xb).call(this,r,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(E(this,Yn,kb).call(this,r,e.setOCGState),o=!0):e.dest?(this._bindLink(r,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Yn,yo).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Yn,yo).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const u=r.get(o);u&&(e[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),E(this,Yn,yo).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,Yn,yo).call(this),!this._fieldObjects){kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var v;r==null||r();const{fields:o,refs:u,include:c}=i,f=[];if(o.length!==0||u.length!==0){const w=new Set(u);for(const S of o){const C=this._fieldObjects[S]||[];for(const{id:x}of C)w.add(x)}for(const S of Object.values(this._fieldObjects))for(const C of S)w.has(C.id)===c&&f.push(C)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,m=[];for(const w of f){const{id:S}=w;switch(m.push(S),w.type){case"text":{const x=w.defaultValue||"";p.setValue(S,{value:x});break}case"checkbox":case"radiobutton":{const x=w.defaultValue===w.exportValues;p.setValue(S,{value:x});break}case"combobox":case"listbox":{const x=w.defaultValue||"";p.setValue(S,{value:x});break}default:continue}const C=document.querySelector(`[data-element-id="${S}"]`);if(C){if(!Pa.has(C)){kt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;C.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Yn=new WeakSet,yo=function(){this.container.setAttribute("data-internal-link","")},xb=function(e,i,r=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},E(this,Yn,yo).call(this)},kb=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Yn,yo).call(this)};class Tx extends ye{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ma extends ye{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return mn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,o){i.includes("mouse")?t.addEventListener(i,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(i,u=>{var c;if(i==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u)}}))})}_setEventListeners(t,e,i,r){var o,u,c;for(const[f,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":dt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||xx,o=t.style;let u;const c=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(p/(Vm*r))||1,v=p/m;u=Math.min(r,f(v/Vm))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,f(p/Vm))}o.fontSize=`calc(${u}px * var(--scale-factor))`,o.color=dt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Px extends Ma{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=i),o.setValue(u.id,{[r]:i})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let c=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&c.length>f&&(c=c.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Pa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ud,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";i.value=m.userValue=S,m.formattedValue=null});let v=w=>{const{formattedValue:S}=m;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{var x;if(m.focused)return;const{target:C}=S;m.userValue&&(C.value=m.userValue),m.lastCommittedValue=C.value,m.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(x){m.userValue=x.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),x.target.value=m.userValue},formattedValue(x){const{formattedValue:k}=x.detail;m.formattedValue=k,k!=null&&x.target!==document.activeElement&&(x.target.value=k),t.setValue(e,{formattedValue:k})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var O;const{charLimit:k}=x.detail,{target:T}=x;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let L=m.userValue;!L||L.length<=k||(L=L.slice(0,k),T.value=m.userValue=L,t.setValue(e,{value:L}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),i.addEventListener("keydown",S=>{var k;m.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(m.commitKey=3),C===-1)return;const{value:x}=S.target;m.lastCommittedValue!==x&&(m.lastCommittedValue=x,m.userValue=x,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",S=>{var x,k;if(!m.focused||!S.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(m.focused=!1);const{value:C}=S.target;m.userValue=C,m.lastCommittedValue!==C&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:m.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),w(S)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",S=>{var z;m.lastCommittedValue=null;const{data:C,target:x}=S,{value:k,selectionStart:T,selectionEnd:L}=x;let O=T,D=L;switch(S.inputType){case"deleteWordBackward":{const j=k.substring(0,T).match(/\w*[^\w]*$/);j&&(O-=j[0].length);break}case"deleteWordForward":{const j=k.substring(T).match(/^[^\w]*\w*/);j&&(D+=j[0].length);break}case"deleteContentBackward":T===L&&(O-=1);break;case"deleteContentForward":T===L&&(D+=1);break}S.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:C||"",willCommit:!1,selStart:O,selEnd:D}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Rx extends Ma{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Mx extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Pa.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=ud,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue||"Off";u.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const c={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Tb extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,i))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Pa.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=ud,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue;u.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",c=>{const f={value:p=>{const m=u===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),t.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(f,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Lx extends Cb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class Ix extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Pa.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=ud;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=m=>{const v=m?"value":"textContent",{options:w,multiple:S}=r;return S?Array.prototype.filter.call(w,C=>C.selected).map(C=>C[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let f=c(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){u==null||u();const S=w.detail.value,C=new Set(Array.isArray(S)?S:[S]);for(const x of r.options)x.selected=C.has(x.value);t.setValue(e,{value:c(!0)}),f=c(!1)},multipleSelection(w){r.multiple=!0},remove(w){const S=r.options,C=w.detail.remove;S[C].selected=!1,r.remove(C),S.length>0&&Array.prototype.findIndex.call(S,k=>k.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},clear(w){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=c(!1)},insert(w){const{index:S,displayValue:C,exportValue:x}=w.detail.insert,k=r.children[S],T=document.createElement("option");T.textContent=C,T.value=x,k?k.before(T):r.append(T),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},items(w){const{items:S}=w.detail;for(;r.length!==0;)r.remove(0);for(const C of S){const{displayValue:x,exportValue:k}=C,T=document.createElement("option");T.textContent=x,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},indices(w){const S=new Set(w.detail.indices);for(const C of w.target.options)C.selected=S.has(C.index);t.setValue(e,{value:c(!0)}),f=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var S;const v=c(!0),w=c(!1);t.setValue(e,{value:v}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ny extends ye{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ye._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Nx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${vv}${i}`).join(",")),this.container}}var ql,Ep,Cp,Yl,na,de,zs,Kl,kh,Th,Ql,Hs,Ti,Bs,Ph,js,Rh,ia,sa,Xt,Uf,Dy,Pb,Rb,Mb,Lb,Vf,Gf,Fy;class Nx{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:o,contentsObj:u,richText:c,parent:f,rect:p,parentRect:m,open:v}){_(this,Xt);_(this,ql,E(this,Xt,Mb).bind(this));_(this,Ep,E(this,Xt,Fy).bind(this));_(this,Cp,E(this,Xt,Gf).bind(this));_(this,Yl,E(this,Xt,Vf).bind(this));_(this,na,null);_(this,de,null);_(this,zs,null);_(this,Kl,null);_(this,kh,null);_(this,Th,null);_(this,Ql,null);_(this,Hs,!1);_(this,Ti,null);_(this,Bs,null);_(this,Ph,null);_(this,js,null);_(this,Rh,null);_(this,ia,null);_(this,sa,!1);var w;A(this,de,t),A(this,Rh,r),A(this,zs,u),A(this,js,c),A(this,Th,f),A(this,na,e),A(this,Ph,p),A(this,Ql,m),A(this,kh,i),A(this,Kl,Sv.toDateObject(o)),this.trigger=i.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",a(this,Yl)),S.addEventListener("mouseenter",a(this,Cp)),S.addEventListener("mouseleave",a(this,Ep)),S.classList.add("popupTriggerArea");for(const S of i)(w=S.container)==null||w.addEventListener("keydown",a(this,ql));a(this,de).hidden=!0,v&&E(this,Xt,Vf).call(this)}render(){if(a(this,Ti))return;const t=A(this,Ti,document.createElement("div"));if(t.className="popup",a(this,na)){const o=t.style.outlineColor=dt.makeHexColor(...a(this,na));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=dt.makeHexColor(...a(this,na).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,Rh),t.append(e),a(this,Kl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Kl).valueOf()})),e.append(o)}const r=a(this,Xt,Uf);if(r)Eb.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(a(this,zs));t.append(o)}a(this,de).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,u=r.length;o<u;++o){const c=r[o];i.append(document.createTextNode(c)),o<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,ia)||A(this,ia,{contentsObj:a(this,zs),richText:a(this,js)}),t&&A(this,Bs,null),e&&(A(this,js,E(this,Xt,Rb).call(this,e)),A(this,zs,null)),(i=a(this,Ti))==null||i.remove(),A(this,Ti,null)}resetEdited(){var t;a(this,ia)&&({contentsObj:cn(this,zs)._,richText:cn(this,js)._}=a(this,ia),A(this,ia,null),(t=a(this,Ti))==null||t.remove(),A(this,Ti,null),A(this,Bs,null))}forceHide(){A(this,sa,this.isVisible),a(this,sa)&&(a(this,de).hidden=!0)}maybeShow(){a(this,sa)&&(a(this,Ti)||E(this,Xt,Gf).call(this),A(this,sa,!1),a(this,de).hidden=!1)}get isVisible(){return a(this,de).hidden===!1}}ql=new WeakMap,Ep=new WeakMap,Cp=new WeakMap,Yl=new WeakMap,na=new WeakMap,de=new WeakMap,zs=new WeakMap,Kl=new WeakMap,kh=new WeakMap,Th=new WeakMap,Ql=new WeakMap,Hs=new WeakMap,Ti=new WeakMap,Bs=new WeakMap,Ph=new WeakMap,js=new WeakMap,Rh=new WeakMap,ia=new WeakMap,sa=new WeakMap,Xt=new WeakSet,Uf=function(){const t=a(this,js),e=a(this,zs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,js).html||null},Dy=function(){var t,e,i;return((i=(e=(t=a(this,Xt,Uf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Pb=function(){var t,e,i;return((i=(e=(t=a(this,Xt,Uf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Rb=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,Xt,Pb),fontSize:a(this,Xt,Dy)?`calc(${a(this,Xt,Dy)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return i},Mb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Hs))&&E(this,Xt,Vf).call(this)},Lb=function(){if(a(this,Bs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:o}}}=a(this,Th);let u=!!a(this,Ql),c=u?a(this,Ql):a(this,Ph);for(const C of a(this,kh))if(!c||dt.intersect(C.data.rect,c)!==null){c=C.data.rect,u=!0;break}const f=dt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),m=u?c[2]-c[0]+5:0,v=f[0]+m,w=f[1];A(this,Bs,[100*(v-r)/e,100*(w-o)/i]);const{style:S}=a(this,de);S.left=`${a(this,Bs)[0]}%`,S.top=`${a(this,Bs)[1]}%`},Vf=function(){A(this,Hs,!a(this,Hs)),a(this,Hs)?(E(this,Xt,Gf).call(this),a(this,de).addEventListener("click",a(this,Yl)),a(this,de).addEventListener("keydown",a(this,ql))):(E(this,Xt,Fy).call(this),a(this,de).removeEventListener("click",a(this,Yl)),a(this,de).removeEventListener("keydown",a(this,ql)))},Gf=function(){a(this,Ti)||this.render(),this.isVisible?a(this,Hs)&&a(this,de).classList.add("focused"):(E(this,Xt,Lb).call(this),a(this,de).hidden=!1,a(this,de).style.zIndex=parseInt(a(this,de).style.zIndex)+1e3)},Fy=function(){a(this,de).classList.remove("focused"),!(a(this,Hs)||!this.isVisible)&&(a(this,de).hidden=!0,a(this,de).style.zIndex=parseInt(a(this,de).style.zIndex)-1e3)};class Ib extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=xt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Mh;class Dx extends ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Mh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=A(this,Mh,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mh=new WeakMap;var Lh;class Fx extends ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Lh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Lh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",i-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lh=new WeakMap;var Ih;class Ox extends ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ih,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Ih,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",r/2),c.setAttribute("rx",i/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Nh;class Nb extends ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Nh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:u,height:c}=Zr(e),f=this.svgFactory.create(u,c,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const S=i[v]-e[0],C=e[3]-i[v+1];p.push(`${S},${C}`)}p=p.join(" ");const m=A(this,Nh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;class $x extends Nb{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zx extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dh,ra,Fh,Oy;class xv extends ye{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Fh);_(this,Dh,null);_(this,ra,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?xt.HIGHLIGHT:xt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:o,popupRef:u}}=this,{transform:c,width:f,height:p}=E(this,Fh,Oy).call(this,i,e),m=this.svgFactory.create(f,p,!0),v=A(this,Dh,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",o.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",c);for(let w=0,S=r.length;w<S;w++){const C=this.svgFactory.createElement(this.svgElementName);a(this,ra).push(C),C.setAttribute("points",r[w].join(",")),v.append(C)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:o}=e,u=a(this,Dh);if(i>=0&&u.setAttribute("stroke-width",i||1),r)for(let c=0,f=a(this,ra).length;c<f;c++)a(this,ra)[c].setAttribute("points",r[c].join(","));if(o){const{transform:c,width:f,height:p}=E(this,Fh,Oy).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",c)}}getElementsToTriggerPopup(){return a(this,ra)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dh=new WeakMap,ra=new WeakMap,Fh=new WeakSet,Oy=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class Db extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=xt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Hx extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Bx extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class jx extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Fb extends ye{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=xt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Oh,$h,$y;class Ux extends ye{constructor(e){var r;super(e,{isRenderable:!0});_(this,$h);_(this,Oh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,$h,$y).bind(this)),A(this,Oh,r);const{isMac:o}=mn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&E(this,$h,$y).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,Oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oh=new WeakMap,$h=new WeakSet,$y=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var zh,oa,aa,Hh,Ra,Ob,zy;class Vx{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:u,structTreeLayer:c}){_(this,Ra);_(this,zh,null);_(this,oa,null);_(this,aa,new Map);_(this,Hh,null);this.div=t,A(this,zh,e),A(this,oa,i),A(this,Hh,c||null),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return a(this,aa).size>0}async render(t){var u;const{annotations:e}=t,i=this.div;ka(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Cv,annotationStorage:t.annotationStorage||new _v,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const f=c.annotationType===Ee.POPUP;if(f){const v=r.get(c.id);if(!v)continue;o.elements=v}else{const{width:v,height:w}=Zr(c.rect);if(v<=0||w<=0)continue}o.data=c;const p=kx.create(o);if(!p.isRenderable)continue;if(!f&&c.popupRef){const v=r.get(c.popupRef);v?v.push(p):r.set(c.popupRef,[p])}const m=p.render();c.hidden&&(m.style.visibility="hidden"),await E(this,Ra,Ob).call(this,m,c.id),p._isEditable&&(a(this,aa).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}E(this,Ra,zy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,ka(e,{rotation:t.rotation}),E(this,Ra,zy).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,aa).values())}getEditableAnnotation(t){return a(this,aa).get(t)}}zh=new WeakMap,oa=new WeakMap,aa=new WeakMap,Hh=new WeakMap,Ra=new WeakSet,Ob=async function(t,e){var u,c;const i=t.firstChild||t,r=i.id=`${vv}${e}`,o=await((u=a(this,Hh))==null?void 0:u.getAriaAttributes(r));if(o)for(const[f,p]of o)i.setAttribute(f,p);this.div.append(t),(c=a(this,zh))==null||c.moveElementInDOM(this.div,t,i,!1)},zy=function(){if(!a(this,oa))return;const t=this.div;for(const[e,i]of a(this,oa)){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}a(this,oa).clear()};const kf=/\r\n?|\n/g;var Pi,Hn,Bh,la,Bn,Se,$b,zb,Hb,Wf,Zs,Xf,qf,Bb,By,jb;const Zt=class Zt extends ce{constructor(e){super({...e,name:"freeTextEditor"});_(this,Se);_(this,Pi);_(this,Hn,"");_(this,Bh,`${this.id}-editor`);_(this,la,null);_(this,Bn);A(this,Pi,e.color||Zt._defaultColor||ce._defaultLineColor),A(this,Bn,e.fontSize||Zt._defaultFontSize)}static get _keyboardManager(){const e=Zt.prototype,i=u=>u.isEmpty(),r=Ta.TRANSLATE_SMALL,o=Ta.TRANSLATE_BIG;return Lt(this,"_keyboardManager",new ld([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(e,i){ce.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case Ot.FREETEXT_SIZE:Zt._defaultFontSize=i;break;case Ot.FREETEXT_COLOR:Zt._defaultColor=i;break}}updateParams(e,i){switch(e){case Ot.FREETEXT_SIZE:E(this,Se,$b).call(this,i);break;case Ot.FREETEXT_COLOR:E(this,Se,zb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ot.FREETEXT_SIZE,Zt._defaultFontSize],[Ot.FREETEXT_COLOR,Zt._defaultColor||ce._defaultLineColor]]}get propertiesToUpdate(){return[[Ot.FREETEXT_SIZE,a(this,Bn)],[Ot.FREETEXT_COLOR,a(this,Pi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Zt._internalPadding*e,-(Zt._internalPadding+a(this,Bn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(xt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,la,new AbortController);const e=this._uiManager.combinedSignal(a(this,la));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Bh)),this._isDraggable=!0,(e=a(this,la))==null||e.abort(),A(this,la,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Hn),i=A(this,Hn,E(this,Se,Hb).call(this).trimEnd());if(e===i)return;const r=o=>{if(A(this,Hn,o),!o){this.remove();return}E(this,Se,qf).call(this),this._uiManager.rebuild(this),E(this,Se,Wf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),E(this,Se,Wf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Zt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Bh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,Bn)}px * var(--scale-factor))`,r.color=a(this,Pi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),rp(this,this.div,["dblclick","keydown"]),this.width){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,v]=this.pageDimensions,[w,S]=this.pageTranslation;let C,x;switch(this.rotation){case 0:C=e+(c[0]-w)/m,x=i+this.height-(c[1]-S)/v;break;case 90:C=e+(c[0]-w)/m,x=i-(c[1]-S)/v,[f,p]=[p,-f];break;case 180:C=e-this.width+(c[0]-w)/m,x=i-(c[1]-S)/v,[f,p]=[-f,-p];break;case 270:C=e+(c[0]-w-this.height*v)/m,x=i+(c[1]-S-this.width*m)/v,[f,p]=[-p,f];break}this.setAt(C*o,x*u,f,p)}else this.setAt(e*o,i*u,this.width*o,this.height*u);E(this,Se,qf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var C,x,k;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=E(C=Zt,Zs,By).call(C,i.getData("text")||"").replaceAll(kf,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!o.includes(`
`)){c.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=c,m=[],v=[];if(f.nodeType===Node.TEXT_NODE){const T=f.parentElement;if(v.push(f.nodeValue.slice(p).replaceAll(kf,"")),T!==this.editorDiv){let L=m;for(const O of this.editorDiv.childNodes){if(O===T){L=v;continue}L.push(E(x=Zt,Zs,Xf).call(x,O))}}m.push(f.nodeValue.slice(0,p).replaceAll(kf,""))}else if(f===this.editorDiv){let T=m,L=0;for(const O of this.editorDiv.childNodes)L++===p&&(T=v),T.push(E(k=Zt,Zs,Xf).call(k,O))}A(this,Hn,`${m.join(`
`)}${o}${v.join(`
`)}`),E(this,Se,qf).call(this);const w=new Range;let S=m.reduce((T,L)=>T+L.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const L=T.nodeValue.length;if(S<=L){w.setStart(T,S),w.setEnd(T,S);break}S-=L}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,r){var c;let o=null;if(e instanceof Ib){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:v,id:w,popupRef:S},textContent:C,textPosition:x,parent:{page:{pageNumber:k}}}=e;if(!C||C.length===0)return null;o=e={annotationType:xt.FREETEXT,color:Array.from(p),fontSize:f,value:C.join(`
`),position:x,pageIndex:k-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:S}}const u=await super.deserialize(e,i,r);return A(u,Bn,e.fontSize),A(u,Pi,dt.makeHexColor(...e.color)),A(u,Hn,E(c=Zt,Zs,By).call(c,e.value)),u.annotationElementId=e.id||null,u._initialData=o,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Zt._internalPadding*this.parentScale,r=this.getRect(i,i),o=ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,Pi)),u={annotationType:xt.FREETEXT,color:o,fontSize:a(this,Bn),value:E(this,Se,Bb).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!E(this,Se,jb).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${a(this,Bn)}px * var(--scale-factor))`,r.color=a(this,Pi),i.replaceChildren();for(const u of a(this,Hn).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),i.append(c)}const o=Zt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:a(this,Hn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Pi=new WeakMap,Hn=new WeakMap,Bh=new WeakMap,la=new WeakMap,Bn=new WeakMap,Se=new WeakSet,$b=function(e){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-a(this,Bn))*this.parentScale),A(this,Bn,o),E(this,Se,Wf).call(this)},r=a(this,Bn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zb=function(e){const i=o=>{A(this,Pi,this.editorDiv.style.color=o)},r=a(this,Pi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Hb=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(E(r=Zt,Zs,Xf).call(r,o)),i=o);return e.join(`
`)},Wf=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,c=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},Zs=new WeakSet,Xf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(kf,"")},qf=function(){if(this.editorDiv.replaceChildren(),!!a(this,Hn))for(const e of a(this,Hn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},Bb=function(){return a(this,Hn).replaceAll(""," ")},By=function(e){return e.replaceAll(" ","")},jb=function(e){const{value:i,fontSize:r,color:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((c,f)=>c!==o[f])||e.pageIndex!==u},_(Zt,Zs),yt(Zt,"_freeTextDefaultContent",""),yt(Zt,"_internalPadding",0),yt(Zt,"_defaultColor",null),yt(Zt,"_defaultFontSize",10),yt(Zt,"_type","freetext"),yt(Zt,"_editorType",xt.FREETEXT);let Hy=Zt;class it{toSVGPath(){Yt("Abstract method `toSVGPath` must be implemented.")}get box(){Yt("Abstract getter `box` must be implemented.")}serialize(t,e){Yt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c]*r,u[c+1]=i+t[c+1]*o;return u}static _rescaleAndSwap(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c+1]*r,u[c+1]=i+t[c]*o;return u}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)r[o]=e+t[o],r[o+1]=i+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,o){switch(o){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,o,u){return[(t+5*i)/6,(e+5*r)/6,(5*i+o)/6,(5*r+u)/6,(i+o)/2,(r+u)/2]}}yt(it,"PRECISION",1e-4);var jn,Ri,Zl,Jl,is,Mt,ua,ca,jh,Uh,tu,eu,Br,Vh,xp,kp,Pe,Ec,Ub,Vb,Gb,Wb,Xb,qb;const Es=class Es{constructor({x:t,y:e},i,r,o,u,c=0){_(this,Pe);_(this,jn);_(this,Ri,[]);_(this,Zl);_(this,Jl);_(this,is,[]);_(this,Mt,new Float32Array(18));_(this,ua);_(this,ca);_(this,jh);_(this,Uh);_(this,tu);_(this,eu);_(this,Br,[]);A(this,jn,i),A(this,eu,o*r),A(this,Jl,u),a(this,Mt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,Zl,c),A(this,Uh,a(Es,Vh)*r),A(this,jh,a(Es,kp)*r),A(this,tu,r),a(this,Br).push(t,e)}isEmpty(){return isNaN(a(this,Mt)[8])}add({x:t,y:e}){var rt;A(this,ua,t),A(this,ca,e);const[i,r,o,u]=a(this,jn);let[c,f,p,m]=a(this,Mt).subarray(8,12);const v=t-p,w=e-m,S=Math.hypot(v,w);if(S<a(this,jh))return!1;const C=S-a(this,Uh),x=C/S,k=x*v,T=x*w;let L=c,O=f;c=p,f=m,p+=k,m+=T,(rt=a(this,Br))==null||rt.push(t,e);const D=-T/C,z=k/C,j=D*a(this,eu),B=z*a(this,eu);return a(this,Mt).set(a(this,Mt).subarray(2,8),0),a(this,Mt).set([p+j,m+B],4),a(this,Mt).set(a(this,Mt).subarray(14,18),12),a(this,Mt).set([p-j,m-B],16),isNaN(a(this,Mt)[6])?(a(this,is).length===0&&(a(this,Mt).set([c+j,f+B],2),a(this,is).push(NaN,NaN,NaN,NaN,(c+j-i)/o,(f+B-r)/u),a(this,Mt).set([c-j,f-B],14),a(this,Ri).push(NaN,NaN,NaN,NaN,(c-j-i)/o,(f-B-r)/u)),a(this,Mt).set([L,O,c,f,p,m],6),!this.isEmpty()):(a(this,Mt).set([L,O,c,f,p,m],6),Math.abs(Math.atan2(O-f,L-c)-Math.atan2(T,k))<Math.PI/2?([c,f,p,m]=a(this,Mt).subarray(2,6),a(this,is).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/o,((f+m)/2-r)/u),[c,f,L,O]=a(this,Mt).subarray(14,18),a(this,Ri).push(NaN,NaN,NaN,NaN,((L+c)/2-i)/o,((O+f)/2-r)/u),!0):([L,O,c,f,p,m]=a(this,Mt).subarray(0,6),a(this,is).push(((L+5*c)/6-i)/o,((O+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),[p,m,c,f,L,O]=a(this,Mt).subarray(12,18),a(this,Ri).push(((L+5*c)/6-i)/o,((O+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,is),e=a(this,Ri);if(isNaN(a(this,Mt)[6])&&!this.isEmpty())return E(this,Pe,Ub).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,Pe,Gb).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,Pe,Vb).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,o,u){return new Yb(t,e,i,r,o,u)}getOutlines(){var v;const t=a(this,is),e=a(this,Ri),i=a(this,Mt),[r,o,u,c]=a(this,jn),f=new Float32Array((((v=a(this,Br))==null?void 0:v.length)??0)+2);for(let w=0,S=f.length-2;w<S;w+=2)f[w]=(a(this,Br)[w]-r)/u,f[w+1]=(a(this,Br)[w+1]-o)/c;if(f[f.length-2]=(a(this,ua)-r)/u,f[f.length-1]=(a(this,ca)-o)/c,isNaN(i[6])&&!this.isEmpty())return E(this,Pe,Wb).call(this,f);const p=new Float32Array(a(this,is).length+24+a(this,Ri).length);let m=t.length;for(let w=0;w<m;w+=2){if(isNaN(t[w])){p[w]=p[w+1]=NaN;continue}p[w]=t[w],p[w+1]=t[w+1]}m=E(this,Pe,qb).call(this,p,m);for(let w=e.length-6;w>=6;w-=6)for(let S=0;S<6;S+=2){if(isNaN(e[w+S])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[w+S],p[m+1]=e[w+S+1],m+=2}return E(this,Pe,Xb).call(this,p,m),this.newFreeDrawOutline(p,f,a(this,jn),a(this,tu),a(this,Zl),a(this,Jl))}};jn=new WeakMap,Ri=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,is=new WeakMap,Mt=new WeakMap,ua=new WeakMap,ca=new WeakMap,jh=new WeakMap,Uh=new WeakMap,tu=new WeakMap,eu=new WeakMap,Br=new WeakMap,Vh=new WeakMap,xp=new WeakMap,kp=new WeakMap,Pe=new WeakSet,Ec=function(){const t=a(this,Mt).subarray(4,6),e=a(this,Mt).subarray(16,18),[i,r,o,u]=a(this,jn);return[(a(this,ua)+(t[0]-e[0])/2-i)/o,(a(this,ca)+(t[1]-e[1])/2-r)/u,(a(this,ua)+(e[0]-t[0])/2-i)/o,(a(this,ca)+(e[1]-t[1])/2-r)/u]},Ub=function(){const[t,e,i,r]=a(this,jn),[o,u,c,f]=E(this,Pe,Ec).call(this);return`M${(a(this,Mt)[2]-t)/i} ${(a(this,Mt)[3]-e)/r} L${(a(this,Mt)[4]-t)/i} ${(a(this,Mt)[5]-e)/r} L${o} ${u} L${c} ${f} L${(a(this,Mt)[16]-t)/i} ${(a(this,Mt)[17]-e)/r} L${(a(this,Mt)[14]-t)/i} ${(a(this,Mt)[15]-e)/r} Z`},Vb=function(t){const e=a(this,Ri);t.push(`L${e[4]} ${e[5]} Z`)},Gb=function(t){const[e,i,r,o]=a(this,jn),u=a(this,Mt).subarray(4,6),c=a(this,Mt).subarray(16,18),[f,p,m,v]=E(this,Pe,Ec).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-i)/o} L${f} ${p} L${m} ${v} L${(c[0]-e)/r} ${(c[1]-i)/o}`)},Wb=function(t){const e=a(this,Mt),[i,r,o,u]=a(this,jn),[c,f,p,m]=E(this,Pe,Ec).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-r)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-r)/u],0),this.newFreeDrawOutline(v,t,a(this,jn),a(this,tu),a(this,Zl),a(this,Jl))},Xb=function(t,e){const i=a(this,Ri);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},qb=function(t,e){const i=a(this,Mt).subarray(4,6),r=a(this,Mt).subarray(16,18),[o,u,c,f]=a(this,jn),[p,m,v,w]=E(this,Pe,Ec).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/c,(i[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-u)/f],e),e+=24},_(Es,Vh,8),_(Es,xp,2),_(Es,kp,a(Es,Vh)+a(Es,xp));let lp=Es;var nu,ha,Us,Gh,Un,Wh,me,Tp,Kb;class Yb extends it{constructor(e,i,r,o,u,c){super();_(this,Tp);_(this,nu);_(this,ha,new Float32Array(4));_(this,Us);_(this,Gh);_(this,Un);_(this,Wh);_(this,me);A(this,me,e),A(this,Un,i),A(this,nu,r),A(this,Wh,o),A(this,Us,u),A(this,Gh,c),this.lastPoint=[NaN,NaN],E(this,Tp,Kb).call(this,c);const[f,p,m,v]=a(this,ha);for(let w=0,S=e.length;w<S;w+=2)e[w]=(e[w]-f)/m,e[w+1]=(e[w+1]-p)/v;for(let w=0,S=i.length;w<S;w+=2)i[w]=(i[w]-f)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const e=[`M${a(this,me)[4]} ${a(this,me)[5]}`];for(let i=6,r=a(this,me).length;i<r;i+=6){if(isNaN(a(this,me)[i])){e.push(`L${a(this,me)[i+4]} ${a(this,me)[i+5]}`);continue}e.push(`C${a(this,me)[i]} ${a(this,me)[i+1]} ${a(this,me)[i+2]} ${a(this,me)[i+3]} ${a(this,me)[i+4]} ${a(this,me)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,o],u){const c=r-e,f=o-i;let p,m;switch(u){case 0:p=it._rescale(a(this,me),e,o,c,-f),m=it._rescale(a(this,Un),e,o,c,-f);break;case 90:p=it._rescaleAndSwap(a(this,me),e,i,c,f),m=it._rescaleAndSwap(a(this,Un),e,i,c,f);break;case 180:p=it._rescale(a(this,me),r,i,-c,f),m=it._rescale(a(this,Un),r,i,-c,f);break;case 270:p=it._rescaleAndSwap(a(this,me),r,o,-c,-f),m=it._rescaleAndSwap(a(this,Un),r,o,-c,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return a(this,ha)}newOutliner(e,i,r,o,u,c=0){return new lp(e,i,r,o,u,c)}getNewOutline(e,i){const[r,o,u,c]=a(this,ha),[f,p,m,v]=a(this,nu),w=u*m,S=c*v,C=r*m+f,x=o*v+p,k=this.newOutliner({x:a(this,Un)[0]*w+C,y:a(this,Un)[1]*S+x},a(this,nu),a(this,Wh),e,a(this,Gh),i??a(this,Us));for(let T=2;T<a(this,Un).length;T+=2)k.add({x:a(this,Un)[T]*w+C,y:a(this,Un)[T+1]*S+x});return k.getOutlines()}}nu=new WeakMap,ha=new WeakMap,Us=new WeakMap,Gh=new WeakMap,Un=new WeakMap,Wh=new WeakMap,me=new WeakMap,Tp=new WeakSet,Kb=function(e){const i=a(this,me);let r=i[4],o=i[5],u=r,c=o,f=r,p=o,m=r,v=o;const w=e?Math.max:Math.min;for(let C=6,x=i.length;C<x;C+=6){if(isNaN(i[C]))u=Math.min(u,i[C+4]),c=Math.min(c,i[C+5]),f=Math.max(f,i[C+4]),p=Math.max(p,i[C+5]),v<i[C+5]?(m=i[C+4],v=i[C+5]):v===i[C+5]&&(m=w(m,i[C+4]));else{const k=dt.bezierBoundingBox(r,o,...i.slice(C,C+6));u=Math.min(u,k[0]),c=Math.min(c,k[1]),f=Math.max(f,k[2]),p=Math.max(p,k[3]),v<k[3]?(m=k[2],v=k[3]):v===k[3]&&(m=w(m,k[2]))}r=i[C+4],o=i[C+5]}const S=a(this,ha);S[0]=u-a(this,Us),S[1]=c-a(this,Us),S[2]=f-u+2*a(this,Us),S[3]=p-c+2*a(this,Us),this.lastPoint=[m,v]};var Xh,qh,jr,Mi,vn,Qb,Yf,Zb,Jb,Uy;class jy{constructor(t,e=0,i=0,r=!0){_(this,vn);_(this,Xh);_(this,qh);_(this,jr,[]);_(this,Mi,[]);let o=1/0,u=-1/0,c=1/0,f=-1/0;const p=10**-4;for(const{x:k,y:T,width:L,height:O}of t){const D=Math.floor((k-e)/p)*p,z=Math.ceil((k+L+e)/p)*p,j=Math.floor((T-e)/p)*p,B=Math.ceil((T+O+e)/p)*p,Q=[D,j,B,!0],rt=[z,j,B,!1];a(this,jr).push(Q,rt),o=Math.min(o,D),u=Math.max(u,z),c=Math.min(c,j),f=Math.max(f,B)}const m=u-o+2*i,v=f-c+2*i,w=o-i,S=c-i,C=a(this,jr).at(r?-1:-2),x=[C[0],C[2]];for(const k of a(this,jr)){const[T,L,O]=k;k[0]=(T-w)/m,k[1]=(L-S)/v,k[2]=(O-S)/v}A(this,Xh,new Float32Array([w,S,m,v])),A(this,qh,x)}getOutlines(){a(this,jr).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,jr))e[3]?(t.push(...E(this,vn,Uy).call(this,e)),E(this,vn,Zb).call(this,e)):(E(this,vn,Jb).call(this,e),t.push(...E(this,vn,Uy).call(this,e)));return E(this,vn,Qb).call(this,t)}}Xh=new WeakMap,qh=new WeakMap,jr=new WeakMap,Mi=new WeakMap,vn=new WeakSet,Qb=function(t){const e=[],i=new Set;for(const u of t){const[c,f,p]=u;e.push([c,f,u],[c,p,u])}e.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=e.length;u<c;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const r=[];let o;for(;i.size>0;){const u=i.values().next().value;let[c,f,p,m,v]=u;i.delete(u);let w=c,S=f;for(o=[c,p],r.push(o);;){let C;if(i.has(m))C=m;else if(i.has(v))C=v;else break;i.delete(C),[c,f,p,m,v]=C,w!==c&&(o.push(w,S,c,S===f?f:p),w=c),S=S===f?p:f}o.push(w,S)}return new Gx(r,a(this,Xh),a(this,qh))},Yf=function(t){const e=a(this,Mi);let i=0,r=e.length-1;for(;i<=r;){const o=i+r>>1,u=e[o][0];if(u===t)return o;u<t?i=o+1:r=o-1}return r+1},Zb=function([,t,e]){const i=E(this,vn,Yf).call(this,t);a(this,Mi).splice(i,0,[t,e])},Jb=function([,t,e]){const i=E(this,vn,Yf).call(this,t);for(let r=i;r<a(this,Mi).length;r++){const[o,u]=a(this,Mi)[r];if(o!==t)break;if(o===t&&u===e){a(this,Mi).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,u]=a(this,Mi)[r];if(o!==t)break;if(o===t&&u===e){a(this,Mi).splice(r,1);return}}},Uy=function(t){const[e,i,r]=t,o=[[e,i,r]],u=E(this,vn,Yf).call(this,r);for(let c=0;c<u;c++){const[f,p]=a(this,Mi)[c];for(let m=0,v=o.length;m<v;m++){const[,w,S]=o[m];if(!(p<=w||S<=f)){if(w>=f){if(S>p)o[m][1]=p;else{if(v===1)return[];o.splice(m,1),m--,v--}continue}o[m][2]=f,S>p&&o.push([e,p,S])}}}return o};var Yh,iu;class Gx extends it{constructor(e,i,r){super();_(this,Yh);_(this,iu);A(this,iu,e),A(this,Yh,i),this.lastPoint=r}toSVGPath(){const e=[];for(const i of a(this,iu)){let[r,o]=i;e.push(`M${r} ${o}`);for(let u=2;u<i.length;u+=2){const c=i[u],f=i[u+1];c===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,i,r,o],u){const c=[],f=r-e,p=o-i;for(const m of a(this,iu)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=e+m[w]*f,v[w+1]=o-m[w+1]*p;c.push(v)}return c}get box(){return a(this,Yh)}get classNamesForOutlining(){return["highlightOutline"]}}Yh=new WeakMap,iu=new WeakMap;class Vy extends lp{newFreeDrawOutline(t,e,i,r,o,u){return new Wx(t,e,i,r,o,u)}}class Wx extends Yb{newOutliner(t,e,i,r,o,u=0){return new Vy(t,e,i,r,o,u)}}var Li,da,su,ke,Kh,ru,Qh,Zh,Ur,Ii,ou,Jh,Wt,Gy,Wy,Xy,vo,t1,Ar;const kn=class kn{constructor({editor:t=null,uiManager:e=null}){_(this,Wt);_(this,Li,null);_(this,da,null);_(this,su);_(this,ke,null);_(this,Kh,!1);_(this,ru,!1);_(this,Qh,null);_(this,Zh);_(this,Ur,null);_(this,Ii,null);_(this,ou);var i;t?(A(this,ru,!1),A(this,ou,Ot.HIGHLIGHT_COLOR),A(this,Qh,t)):(A(this,ru,!0),A(this,ou,Ot.HIGHLIGHT_DEFAULT_COLOR)),A(this,Ii,(t==null?void 0:t._uiManager)||e),A(this,Zh,a(this,Ii)._eventBus),A(this,su,(t==null?void 0:t.color)||((i=a(this,Ii))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(kn,Jh)||A(kn,Jh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Lt(this,"_keyboardManager",new ld([[["Escape","mac+Escape"],kn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],kn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],kn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],kn.prototype._moveToPrevious],[["Home","mac+Home"],kn.prototype._moveToBeginning],[["End","mac+End"],kn.prototype._moveToEnd]]))}renderButton(){const t=A(this,Li,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Ii)._signal;t.addEventListener("click",E(this,Wt,vo).bind(this),{signal:e}),t.addEventListener("keydown",E(this,Wt,Xy).bind(this),{signal:e});const i=A(this,da,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,su),t.append(i),t}renderMainDropdown(){const t=A(this,ke,E(this,Wt,Gy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,Li)){E(this,Wt,vo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,Wt,Wy).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Wt,Ar)){E(this,Wt,vo).call(this,t);return}if(t.target===a(this,Li)){(e=a(this,ke).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,ke))==null?void 0:e.firstChild)||t.target===a(this,Li)){a(this,Wt,Ar)&&this._hideDropdownFromKeyboard();return}a(this,Wt,Ar)||E(this,Wt,vo).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Wt,Ar)){E(this,Wt,vo).call(this,t);return}(e=a(this,ke).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Wt,Ar)){E(this,Wt,vo).call(this,t);return}(e=a(this,ke).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,ke))==null||t.classList.add("hidden"),(e=a(this,Ur))==null||e.abort(),A(this,Ur,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,ru)){if(!a(this,Wt,Ar)){(t=a(this,Qh))==null||t.unselect();return}this.hideDropdown(),a(this,Li).focus({preventScroll:!0,focusVisible:a(this,Kh)})}}updateColor(t){if(a(this,da)&&(a(this,da).style.backgroundColor=t),!a(this,ke))return;const e=a(this,Ii).highlightColors.values();for(const i of a(this,ke).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,Li))==null||t.remove(),A(this,Li,null),A(this,da,null),(e=a(this,ke))==null||e.remove(),A(this,ke,null)}};Li=new WeakMap,da=new WeakMap,su=new WeakMap,ke=new WeakMap,Kh=new WeakMap,ru=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,Ur=new WeakMap,Ii=new WeakMap,ou=new WeakMap,Jh=new WeakMap,Wt=new WeakSet,Gy=function(){const t=document.createElement("div"),e=a(this,Ii)._signal;t.addEventListener("contextmenu",Oi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of a(this,Ii).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",a(kn,Jh)[i]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=r,o.setAttribute("aria-selected",r===a(this,su)),o.addEventListener("click",E(this,Wt,Wy).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",E(this,Wt,Xy).bind(this),{signal:e}),t},Wy=function(t,e){e.stopPropagation(),a(this,Zh).dispatch("switchannotationeditorparams",{source:this,type:a(this,ou),value:t})},Xy=function(t){kn._keyboardManager.exec(this,t)},vo=function(t){if(a(this,Wt,Ar)){this.hideDropdown();return}if(A(this,Kh,t.detail===0),a(this,Ur)||(A(this,Ur,new AbortController),window.addEventListener("pointerdown",E(this,Wt,t1).bind(this),{signal:a(this,Ii).combinedSignal(a(this,Ur))})),a(this,ke)){a(this,ke).classList.remove("hidden");return}const e=A(this,ke,E(this,Wt,Gy).call(this));a(this,Li).append(e)},t1=function(t){var e;(e=a(this,ke))!=null&&e.contains(t.target)||this.hideDropdown()},Ar=function(){return a(this,ke)&&!a(this,ke).classList.contains("hidden")},_(kn,Jh,null);let up=kn;var au,td,Vs,fa,lu,Rn,ed,nd,pa,li,Vn,Ue,uu,Gs,nn,cu,ui,id,Ct,qy,Kf,e1,n1,i1,Yy,wo,fi,hl,s1,Qf,Cc,r1,o1,a1,l1,u1;const jt=class jt extends ce{constructor(e){super({...e,name:"highlightEditor"});_(this,Ct);_(this,au,null);_(this,td,0);_(this,Vs);_(this,fa,null);_(this,lu,null);_(this,Rn,null);_(this,ed,null);_(this,nd,0);_(this,pa,null);_(this,li,null);_(this,Vn,null);_(this,Ue,!1);_(this,uu,null);_(this,Gs);_(this,nn,null);_(this,cu,"");_(this,ui);_(this,id,"");this.color=e.color||jt._defaultColor,A(this,ui,e.thickness||jt._defaultThickness),A(this,Gs,e.opacity||jt._defaultOpacity),A(this,Vs,e.boxes||null),A(this,id,e.methodOfCreation||""),A(this,cu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(A(this,Ue,!0),E(this,Ct,Kf).call(this,e),E(this,Ct,wo).call(this)):a(this,Vs)&&(A(this,au,e.anchorNode),A(this,td,e.anchorOffset),A(this,ed,e.focusNode),A(this,nd,e.focusOffset),E(this,Ct,qy).call(this),E(this,Ct,wo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=jt.prototype;return Lt(this,"_keyboardManager",new ld([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Ue)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,ui),methodOfCreation:a(this,id)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;ce.initialize(e,i),jt._defaultColor||(jt._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case Ot.HIGHLIGHT_DEFAULT_COLOR:jt._defaultColor=i;break;case Ot.HIGHLIGHT_THICKNESS:jt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,uu)}updateParams(e,i){switch(e){case Ot.HIGHLIGHT_COLOR:E(this,Ct,e1).call(this,i);break;case Ot.HIGHLIGHT_THICKNESS:E(this,Ct,n1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ot.HIGHLIGHT_DEFAULT_COLOR,jt._defaultColor],[Ot.HIGHLIGHT_THICKNESS,jt._defaultThickness]]}get propertiesToUpdate(){return[[Ot.HIGHLIGHT_COLOR,this.color||jt._defaultColor],[Ot.HIGHLIGHT_THICKNESS,a(this,ui)||jt._defaultThickness],[Ot.HIGHLIGHT_FREE,a(this,Ue)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(A(this,lu,new up({editor:this})),e.addColorPicker(a(this,lu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Ct,Cc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,E(this,Ct,Cc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,Ct,Yy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Ct,wo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?E(this,Ct,Yy).call(this):e&&(E(this,Ct,wo).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var o,u,c;const{drawLayer:i}=this.parent;let r;a(this,Ue)?(e=(e-this.rotation+360)%360,r=E(o=jt,fi,hl).call(o,a(this,li).box,e)):r=E(u=jt,fi,hl).call(u,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,Vn),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(a(this,nn),{bbox:E(c=jt,fi,hl).call(c,a(this,Rn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,cu)&&(e.setAttribute("aria-label",a(this,cu)),e.setAttribute("role","mark")),a(this,Ue)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,Ct,s1).bind(this),{signal:this._uiManager._signal});const i=A(this,pa,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,fa);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),rp(this,a(this,pa),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Ct,Qf).call(this,!0);break;case 1:case 3:E(this,Ct,Qf).call(this,!1);break}}select(){var e;super.select(),a(this,nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{selected:!1}}),a(this,Ue)||E(this,Ct,Qf).call(this,!1))}get _mustFixPosition(){return!a(this,Ue)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Vn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,nn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:o,y:u}){const{x:c,y:f,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=e.combinedSignal(v),S=C=>{v.abort(),E(this,fi,l1).call(this,e,C)};window.addEventListener("blur",S,{signal:w}),window.addEventListener("pointerup",S,{signal:w}),window.addEventListener("pointerdown",Kn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Oi,{signal:w}),r.addEventListener("pointermove",E(this,fi,a1).bind(this,e),{signal:w}),this._freeHighlight=new Vy({x:o,y:u},[c,f,p,m],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var x,k,T,L;let o=null;if(e instanceof Db){const{data:{quadPoints:O,rect:D,rotation:z,id:j,color:B,opacity:Q,popupRef:rt},parent:{page:{pageNumber:wt}}}=e;o=e={annotationType:xt.HIGHLIGHT,color:Array.from(B),opacity:Q,quadPoints:O,boxes:null,pageIndex:wt-1,rect:D.slice(0),rotation:z,id:j,deleted:!1,popupRef:rt}}else if(e instanceof xv){const{data:{inkLists:O,rect:D,rotation:z,id:j,color:B,borderStyle:{rawWidth:Q},popupRef:rt},parent:{page:{pageNumber:wt}}}=e;o=e={annotationType:xt.HIGHLIGHT,color:Array.from(B),thickness:Q,inkLists:O,boxes:null,pageIndex:wt-1,rect:D.slice(0),rotation:z,id:j,deleted:!1,popupRef:rt}}const{color:u,quadPoints:c,inkLists:f,opacity:p}=e,m=await super.deserialize(e,i,r);m.color=dt.makeHexColor(...u),A(m,Gs,p||1),f&&A(m,ui,e.thickness),m.annotationElementId=e.id||null,m._initialData=o;const[v,w]=m.pageDimensions,[S,C]=m.pageTranslation;if(c){const O=A(m,Vs,[]);for(let D=0;D<c.length;D+=8)O.push({x:(c[D]-S)/v,y:1-(c[D+1]-C)/w,width:(c[D+2]-c[D])/v,height:(c[D+1]-c[D+5])/w});E(x=m,Ct,qy).call(x),E(k=m,Ct,wo).call(k),m.rotate(m.rotation)}else if(f){A(m,Ue,!0);const O=f[0],D={x:O[0]-S,y:w-(O[1]-C)},z=new Vy(D,[0,0,v,w],1,a(m,ui)/2,!0,.001);for(let Q=0,rt=O.length;Q<rt;Q+=2)D.x=O[Q]-S,D.y=w-(O[Q+1]-C),z.add(D);const{id:j,clipPathId:B}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);E(T=m,Ct,Kf).call(T,{highlightOutlines:z.getOutlines(),highlightId:j,clipPathId:B}),E(L=m,Ct,wo).call(L)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=ce._colorManager.convert(this.color),o={annotationType:xt.HIGHLIGHT,color:r,opacity:a(this,Gs),thickness:a(this,ui),quadPoints:E(this,Ct,r1).call(this),outlines:E(this,Ct,o1).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,Ct,Cc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Ct,u1).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};au=new WeakMap,td=new WeakMap,Vs=new WeakMap,fa=new WeakMap,lu=new WeakMap,Rn=new WeakMap,ed=new WeakMap,nd=new WeakMap,pa=new WeakMap,li=new WeakMap,Vn=new WeakMap,Ue=new WeakMap,uu=new WeakMap,Gs=new WeakMap,nn=new WeakMap,cu=new WeakMap,ui=new WeakMap,id=new WeakMap,Ct=new WeakSet,qy=function(){const e=new jy(a(this,Vs),.001);A(this,li,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,li).box;const i=new jy(a(this,Vs),.0025,.001,this._uiManager.direction==="ltr");A(this,Rn,i.getOutlines());const{lastPoint:r}=a(this,Rn);A(this,uu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Kf=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var v,w;if(A(this,li,e),A(this,Rn,e.getNewOutline(a(this,ui)/2+1.5,.0025)),i>=0)A(this,Vn,i),A(this,fa,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,nn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Rn).box,path:{d:a(this,Rn).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Vn),{bbox:E(v=jt,fi,hl).call(v,a(this,li).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,nn),{bbox:E(w=jt,fi,hl).call(w,a(this,Rn).box,S),path:{d:a(this,Rn).toSVGPath()}})}const[u,c,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=f,this.height=p;break;case 90:{const[S,C]=this.parentDimensions;this.x=c,this.y=1-u,this.width=f*C/S,this.height=p*S/C;break}case 180:this.x=1-u,this.y=1-c,this.width=f,this.height=p;break;case 270:{const[S,C]=this.parentDimensions;this.x=1-c,this.y=u,this.width=f*C/S,this.height=p*S/C;break}}const{lastPoint:m}=a(this,Rn);A(this,uu,[(m[0]-u)/f,(m[1]-c)/p])},e1=function(e){const i=(u,c)=>{var f,p;this.color=u,A(this,Gs,c),(f=this.parent)==null||f.drawLayer.updateProperties(a(this,Vn),{root:{fill:u,"fill-opacity":c}}),(p=a(this,lu))==null||p.updateColor(u)},r=this.color,o=a(this,Gs);this.addCommands({cmd:i.bind(this,e,jt._defaultOpacity),undo:i.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},n1=function(e){const i=a(this,ui),r=o=>{A(this,ui,o),E(this,Ct,i1).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},i1=function(e){if(!a(this,Ue))return;E(this,Ct,Kf).call(this,{highlightOutlines:a(this,li).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},Yy=function(){a(this,Vn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Vn)),A(this,Vn,null),this.parent.drawLayer.remove(a(this,nn)),A(this,nn,null))},wo=function(e=this.parent){a(this,Vn)===null&&({id:cn(this,Vn)._,clipPathId:cn(this,fa)._}=e.drawLayer.draw({bbox:a(this,li).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Gs)},rootClass:{highlight:!0,free:a(this,Ue)},path:{d:a(this,li).toSVGPath()}},!1,!0),A(this,nn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Ue)},bbox:a(this,Rn).box,path:{d:a(this,Rn).toSVGPath()}},a(this,Ue))),a(this,pa)&&(a(this,pa).style.clipPath=a(this,fa)))},fi=new WeakSet,hl=function([e,i,r,o],u){switch(u){case 90:return[1-i-o,e,o,r];case 180:return[1-e-r,1-i-o,r,o];case 270:return[i,1-e-r,o,r]}return[e,i,r,o]},s1=function(e){jt._keyboardManager.exec(this,e)},Qf=function(e){if(!a(this,au))return;const i=window.getSelection();e?i.setPosition(a(this,au),a(this,td)):i.setPosition(a(this,ed),a(this,nd))},Cc=function(){return a(this,Ue)?this.rotation:0},r1=function(){if(a(this,Ue))return null;const[e,i]=this.pageDimensions,[r,o]=this.pageTranslation,u=a(this,Vs),c=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:v,height:w}of u){const S=p*e+r,C=(1-m)*i+o;c[f]=c[f+4]=S,c[f+1]=c[f+3]=C,c[f+2]=c[f+6]=S+v*e,c[f+5]=c[f+7]=C-w*i,f+=8}return c},o1=function(e){return a(this,li).serialize(e,E(this,Ct,Cc).call(this))},a1=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},l1=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},u1=function(e){const{color:i}=this._initialData;return e.color.some((r,o)=>r!==i[o])},_(jt,fi),yt(jt,"_defaultColor",null),yt(jt,"_defaultOpacity",1),yt(jt,"_defaultThickness",12),yt(jt,"_type","highlight"),yt(jt,"_editorType",xt.HIGHLIGHT),yt(jt,"_freeHighlightId",-1),yt(jt,"_freeHighlight",null),yt(jt,"_freeHighlightClipId","");let cp=jt;var ga;class Xx{constructor(){_(this,ga,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,ga)[t]=e}toSVGProperties(){const t=a(this,ga);return A(this,ga,Object.create(null)),{root:t}}reset(){A(this,ga,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Yt("Not implemented")}}ga=new WeakMap;var Gn,hu,Fe,ma,ya,Vr,Gr,Wr,va,zt,Qy,Zy,Jy,xc,c1,Zf,kc,dl;const st=class st extends ce{constructor(e){super(e);_(this,zt);_(this,Gn,null);_(this,hu);yt(this,"_drawId",null);A(this,hu,e.mustBeCommitted||!1),e.drawOutlines&&(E(this,zt,Qy).call(this,e),E(this,zt,xc).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[o,u]of Object.entries(i))r.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){Yt("Not implemented")}static get typesMap(){Yt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(a(st,Fe).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,i[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,i[o]]);return e}_updateProperty(e,i,r){const o=this._drawingOptions,u=o[i],c=f=>{var m;o.updateProperty(i,f);const p=a(this,Gn).updateProperty(i,f);p&&E(this,zt,kc).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(a(this,Gn).getPathResizingSVGProperties(E(this,zt,Zf).call(this)),{bbox:E(this,zt,dl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(a(this,Gn).getPathResizedSVGProperties(E(this,zt,Zf).call(this)),{bbox:E(this,zt,dl).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,zt,dl).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties(a(this,Gn).getPathTranslatedSVGProperties(E(this,zt,Zf).call(this),this.parentDimensions),{bbox:E(this,zt,dl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,hu)&&(A(this,hu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,zt,Jy).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,zt,xc).call(this),E(this,zt,kc).call(this,a(this,Gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,zt,Jy).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,zt,xc).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,st._mergeSVGProperties({bbox:E(this,zt,dl).call(this)},a(this,Gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,zt,kc).call(this,a(this,Gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,r,o,u){Yt("Not implemented")}static startDrawing(e,i,r,o){var k;const{target:u,offsetX:c,offsetY:f,pointerId:p,pointerType:m}=o;if(a(st,Gr)&&a(st,Gr)!==m)return;const{viewport:{rotation:v}}=e,{width:w,height:S}=u.getBoundingClientRect(),C=A(st,ma,new AbortController),x=e.combinedSignal(C);if(a(st,Vr)||A(st,Vr,p),a(st,Gr)??A(st,Gr,m),window.addEventListener("pointerup",T=>{var L;a(st,Vr)===T.pointerId?this._endDraw(T):(L=a(st,Wr))==null||L.delete(T.pointerId)},{signal:x}),window.addEventListener("pointercancel",T=>{var L;a(st,Vr)===T.pointerId?this._currentParent.endDrawingSession():(L=a(st,Wr))==null||L.delete(T.pointerId)},{signal:x}),window.addEventListener("pointerdown",T=>{a(st,Gr)===T.pointerType&&((a(st,Wr)||A(st,Wr,new Set)).add(T.pointerId),a(st,Fe).isCancellable()&&(a(st,Fe).removeLastElement(),a(st,Fe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Oi,{signal:x}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),u.addEventListener("touchmove",T=>{T.timeStamp===a(st,va)&&Kn(T)},{signal:x}),e.toggleDrawing(),(k=i._editorUndoBar)==null||k.hide(),a(st,Fe)){e.drawLayer.updateProperties(this._currentDrawId,a(st,Fe).startNew(c,f,w,S,v));return}i.updateUIForDefaultProperties(this),A(st,Fe,this.createDrawerInstance(c,f,w,S,v)),A(st,ya,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(st,ya).toSVGProperties(),a(st,Fe).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(st,va,-1),!a(st,Fe))return;const{offsetX:i,offsetY:r,pointerId:o}=e;if(a(st,Vr)===o){if(((u=a(st,Wr))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(st,Fe).add(i,r)),A(st,va,e.timeStamp),Kn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(st,Fe,null),A(st,ya,null),A(st,Gr,null),A(st,va,NaN)),a(st,ma)&&(a(st,ma).abort(),A(st,ma,null),A(st,Vr,NaN),A(st,Wr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,a(st,Fe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(st,Fe),o=this._currentDrawId,u=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(o,r.setLastElement(u))},undo:()=>{i.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:Ot.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ot.DRAW_STEP),!a(st,Fe).isEmpty()){const{pageDimensions:[r,o],scale:u}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(st,Fe).getOutlines(r*u,o*u,u,this._INNER_MARGIN),drawingOptions:a(st,ya),mustBeCommitted:!e});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,o,u,c){Yt("Not implemented")}static async deserialize(e,i,r){var v,w;const{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}=i.viewport,p=this.deserializeDraw(c,f,o,u,this._INNER_MARGIN,e),m=await super.deserialize(e,i,r);return m.createDrawingOptions(e),E(v=m,zt,Qy).call(v,{drawOutlines:p}),E(w=m,zt,xc).call(w),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[i,r]=this.pageTranslation,[o,u]=this.pageDimensions;return a(this,Gn).serialize([i,r,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gn=new WeakMap,hu=new WeakMap,Fe=new WeakMap,ma=new WeakMap,ya=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,va=new WeakMap,zt=new WeakSet,Qy=function({drawOutlines:e,drawId:i,drawingOptions:r}){A(this,Gn,e),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=E(this,zt,Zy).call(this,e,this.parent),E(this,zt,kc).call(this,e.box)},Zy=function(e,i){const{id:r}=i.drawLayer.draw(st._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},Jy=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},xc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,zt,Zy).call(this,a(this,Gn),e)}},c1=function([e,i,r,o]){const{parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[i,1-e,r*(c/u),o*(u/c)];case 180:return[1-e,1-i,r,o];case 270:return[1-i,e,r*(c/u),o*(u/c)];default:return[e,i,r,o]}},Zf=function(){const{x:e,y:i,width:r,height:o,parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[1-i,e,r*(u/c),o*(c/u)];case 180:return[1-e,1-i,r,o];case 270:return[i,1-e,r*(u/c),o*(c/u)];default:return[e,i,r,o]}},kc=function(e){if([this.x,this.y,this.width,this.height]=E(this,zt,c1).call(this,e),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},dl=function(){const{x:e,y:i,width:r,height:o,rotation:u,parentRotation:c,parentDimensions:[f,p]}=this;switch((u*4+c)/90){case 1:return[1-i-o,e,o,r];case 2:return[1-e-r,1-i-o,r,o];case 3:return[i,1-e-r,o,r];case 4:return[e,i-r*(f/p),o*(p/f),r*(f/p)];case 5:return[1-i,e,r*(f/p),o*(p/f)];case 6:return[1-e-o*(p/f),1-i,o*(p/f),r*(f/p)];case 7:return[i-r*(f/p),1-e-o*(p/f),r*(f/p),o*(p/f)];case 8:return[e-r,i-o,r,o];case 9:return[1-i,e-r,o,r];case 10:return[1-e,1-i,r,o];case 11:return[i-o,1-e,o,r];case 12:return[e-o*(p/f),i,o*(p/f),r*(f/p)];case 13:return[1-i-r*(f/p),e-o*(p/f),r*(f/p),o*(p/f)];case 14:return[1-e,1-i-r*(f/p),o*(p/f),r*(f/p)];case 15:return[i,1-e,r*(f/p),o*(p/f)];default:return[e,i,r,o]}},yt(st,"_currentDrawId",-1),yt(st,"_currentParent",null),_(st,Fe,null),_(st,ma,null),_(st,ya,null),_(st,Vr,NaN),_(st,Gr,null),_(st,Wr,null),_(st,va,NaN),yt(st,"_INNER_MARGIN",3);let Ky=st;var ss,Oe,$e,wa,du,fn,Ve,ci,Aa,Sa,ba,fu,Jf;class qx{constructor(t,e,i,r,o,u){_(this,fu);_(this,ss,new Float64Array(6));_(this,Oe);_(this,$e);_(this,wa);_(this,du);_(this,fn);_(this,Ve,"");_(this,ci,0);_(this,Aa,new hp);_(this,Sa);_(this,ba);A(this,Sa,i),A(this,ba,r),A(this,wa,o),A(this,du,u),[t,e]=E(this,fu,Jf).call(this,t,e);const c=A(this,Oe,[NaN,NaN,NaN,NaN,t,e]);A(this,fn,[t,e]),A(this,$e,[{line:c,points:a(this,fn)}]),a(this,ss).set(c,0)}updateProperty(t,e){t==="stroke-width"&&A(this,du,e)}isEmpty(){return!a(this,$e)||a(this,$e).length===0}isCancellable(){return a(this,fn).length<=10}add(t,e){[t,e]=E(this,fu,Jf).call(this,t,e);const[i,r,o,u]=a(this,ss).subarray(2,6),c=t-o,f=e-u;return Math.hypot(a(this,Sa)*c,a(this,ba)*f)<=2?null:(a(this,fn).push(t,e),isNaN(i)?(a(this,ss).set([o,u,t,e],2),a(this,Oe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,ss)[0])&&a(this,Oe).splice(6,6),a(this,ss).set([i,r,o,u,t,e],0),a(this,Oe).push(...it.createBezierPoints(i,r,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,fn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,o){A(this,Sa,i),A(this,ba,r),A(this,wa,o),[t,e]=E(this,fu,Jf).call(this,t,e);const u=A(this,Oe,[NaN,NaN,NaN,NaN,t,e]);A(this,fn,[t,e]);const c=a(this,$e).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),a(this,$e).push({line:u,points:a(this,fn)}),a(this,ss).set(u,0),A(this,ci,0),this.toSVGPath(),null}getLastElement(){return a(this,$e).at(-1)}setLastElement(t){return a(this,$e)?(a(this,$e).push(t),A(this,Oe,t.line),A(this,fn,t.points),A(this,ci,0),{path:{d:this.toSVGPath()}}):a(this,Aa).setLastElement(t)}removeLastElement(){if(!a(this,$e))return a(this,Aa).removeLastElement();a(this,$e).pop(),A(this,Ve,"");for(let t=0,e=a(this,$e).length;t<e;t++){const{line:i,points:r}=a(this,$e)[t];A(this,Oe,i),A(this,fn,r),A(this,ci,0),this.toSVGPath()}return{path:{d:a(this,Ve)}}}toSVGPath(){const t=it.svgRound(a(this,Oe)[4]),e=it.svgRound(a(this,Oe)[5]);if(a(this,fn).length===2)return A(this,Ve,`${a(this,Ve)} M ${t} ${e} Z`),a(this,Ve);if(a(this,fn).length<=6){const r=a(this,Ve).lastIndexOf("M");A(this,Ve,`${a(this,Ve).slice(0,r)} M ${t} ${e}`),A(this,ci,6)}if(a(this,fn).length===4){const r=it.svgRound(a(this,Oe)[10]),o=it.svgRound(a(this,Oe)[11]);return A(this,Ve,`${a(this,Ve)} L ${r} ${o}`),A(this,ci,12),a(this,Ve)}const i=[];a(this,ci)===0&&(i.push(`M ${t} ${e}`),A(this,ci,6));for(let r=a(this,ci),o=a(this,Oe).length;r<o;r+=6){const[u,c,f,p,m,v]=a(this,Oe).slice(r,r+6).map(it.svgRound);i.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}return A(this,Ve,a(this,Ve)+i.join(" ")),A(this,ci,a(this,Oe).length),a(this,Ve)}getOutlines(t,e,i,r){const o=a(this,$e).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),a(this,Aa).build(a(this,$e),t,e,i,a(this,wa),a(this,du),r),A(this,ss,null),A(this,Oe,null),A(this,$e,null),A(this,Ve,null),a(this,Aa)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ss=new WeakMap,Oe=new WeakMap,$e=new WeakMap,wa=new WeakMap,du=new WeakMap,fn=new WeakMap,Ve=new WeakMap,ci=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,ba=new WeakMap,fu=new WeakSet,Jf=function(t,e){return it._normalizePoint(t,e,a(this,Sa),a(this,ba),a(this,wa))};var pn,sd,rd,Wn,rs,os,pu,gu,mu,We,bs,h1,d1,f1;const Mv=class Mv extends it{constructor(){super(...arguments);_(this,We);_(this,pn);_(this,sd,0);_(this,rd);_(this,Wn);_(this,rs);_(this,os);_(this,pu);_(this,gu);_(this,mu)}build(e,i,r,o,u,c,f){A(this,rs,i),A(this,os,r),A(this,pu,o),A(this,gu,u),A(this,mu,c),A(this,rd,f??0),A(this,Wn,e),E(this,We,d1).call(this)}setLastElement(e){return a(this,Wn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Wn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,Wn)){if(e.push(`M${it.svgRound(i[4])} ${it.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${it.svgRound(i[10])} ${it.svgRound(i[11])}`);continue}for(let r=6,o=i.length;r<o;r+=6){const[u,c,f,p,m,v]=i.subarray(r,r+6).map(it.svgRound);e.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}}return e.join("")}serialize([e,i,r,o],u){const c=[],f=[],[p,m,v,w]=E(this,We,h1).call(this);let S,C,x,k,T,L,O,D,z;switch(a(this,gu)){case 0:z=it._rescale,S=e,C=i+o,x=r,k=-o,T=e+p*r,L=i+(1-m-w)*o,O=e+(p+v)*r,D=i+(1-m)*o;break;case 90:z=it._rescaleAndSwap,S=e,C=i,x=r,k=o,T=e+m*r,L=i+p*o,O=e+(m+w)*r,D=i+(p+v)*o;break;case 180:z=it._rescale,S=e+r,C=i,x=-r,k=o,T=e+(1-p-v)*r,L=i+m*o,O=e+(1-p)*r,D=i+(m+w)*o;break;case 270:z=it._rescaleAndSwap,S=e+r,C=i+o,x=-r,k=-o,T=e+(1-m-w)*r,L=i+(1-p-v)*o,O=e+(1-m)*r,D=i+(1-p)*o;break}for(const{line:j,points:B}of a(this,Wn))c.push(z(j,S,C,x,k,u?new Array(j.length):null)),f.push(z(B,S,C,x,k,u?new Array(B.length):null));return{lines:c,points:f,rect:[T,L,O,D]}}static deserialize(e,i,r,o,u,{paths:{lines:c,points:f},rotation:p,thickness:m}){const v=[];let w,S,C,x,k;switch(p){case 0:k=it._rescale,w=-e/r,S=i/o+1,C=1/r,x=-1/o;break;case 90:k=it._rescaleAndSwap,w=-i/o,S=-e/r,C=1/o,x=1/r;break;case 180:k=it._rescale,w=e/r+1,S=-i/o,C=-1/r,x=1/o;break;case 270:k=it._rescaleAndSwap,w=i/o+1,S=e/r+1,C=-1/o,x=-1/r;break}if(!c){c=[];for(const L of f){const O=L.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const D=new Float32Array(3*(O-2));c.push(D);let[z,j,B,Q]=L.subarray(0,4);D.set([NaN,NaN,NaN,NaN,z,j],0);for(let rt=4;rt<O;rt+=2){const wt=L[rt],ft=L[rt+1];D.set(it.createBezierPoints(z,j,B,Q,wt,ft),(rt-2)*3),[z,j,B,Q]=[B,Q,wt,ft]}}}for(let L=0,O=c.length;L<O;L++)v.push({line:k(c[L].map(D=>D??NaN),w,S,C,x),points:k(f[L].map(D=>D??NaN),w,S,C,x)});const T=new Mv;return T.build(v,r,o,1,p,m,u),T}get box(){return a(this,pn)}updateProperty(e,i){return e==="stroke-width"?E(this,We,f1).call(this,i):null}updateParentDimensions([e,i],r){const[o,u]=E(this,We,bs).call(this);A(this,rs,e),A(this,os,i),A(this,pu,r);const[c,f]=E(this,We,bs).call(this),p=c-o,m=f-u,v=a(this,pn);return v[0]-=p,v[1]-=m,v[2]+=2*p,v[3]+=2*m,v}updateRotation(e){return A(this,sd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,pn).map(it.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,pn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(e)} ${it.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,pn);let r=0,o=0,u=0,c=0,f=0,p=0;switch(a(this,sd)){case 90:o=i/e,u=-e/i,f=e;break;case 180:r=-1,c=-1,f=e,p=i;break;case 270:o=-i/e,u=e/i,p=i;break;default:return""}return`matrix(${r} ${o} ${u} ${c} ${it.svgRound(f)} ${it.svgRound(p)})`}getPathResizingSVGProperties([e,i,r,o]){const[u,c]=E(this,We,bs).call(this),[f,p,m,v]=a(this,pn);if(Math.abs(m-u)<=it.PRECISION||Math.abs(v-c)<=it.PRECISION){const k=e+r/2-(f+m/2),T=i+o/2-(p+v/2);return{path:{"transform-origin":`${it.svgRound(e)} ${it.svgRound(i)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const w=(r-2*u)/(m-2*u),S=(o-2*c)/(v-2*c),C=m/r,x=v/o;return{path:{"transform-origin":`${it.svgRound(f)} ${it.svgRound(p)}`,transform:`${this.rotationTransform} scale(${C} ${x}) translate(${it.svgRound(u)} ${it.svgRound(c)}) scale(${w} ${S}) translate(${it.svgRound(-u)} ${it.svgRound(-c)})`}}}getPathResizedSVGProperties([e,i,r,o]){const[u,c]=E(this,We,bs).call(this),f=a(this,pn),[p,m,v,w]=f;if(f[0]=e,f[1]=i,f[2]=r,f[3]=o,Math.abs(v-u)<=it.PRECISION||Math.abs(w-c)<=it.PRECISION){const T=e+r/2-(p+v/2),L=i+o/2-(m+w/2);for(const{line:O,points:D}of a(this,Wn))it._translate(O,T,L,O),it._translate(D,T,L,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(e)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*u)/(v-2*u),C=(o-2*c)/(w-2*c),x=-S*(p+u)+e+u,k=-C*(m+c)+i+c;if(S!==1||C!==1||x!==0||k!==0)for(const{line:T,points:L}of a(this,Wn))it._rescale(T,x,k,S,C,T),it._rescale(L,x,k,S,C,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(e)} ${it.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[o,u]=r,c=a(this,pn),f=e-c[0],p=i-c[1];if(a(this,rs)===o&&a(this,os)===u)for(const{line:m,points:v}of a(this,Wn))it._translate(m,f,p,m),it._translate(v,f,p,v);else{const m=a(this,rs)/o,v=a(this,os)/u;A(this,rs,o),A(this,os,u);for(const{line:w,points:S}of a(this,Wn))it._rescale(w,f,p,m,v,w),it._rescale(S,f,p,m,v,S);c[2]*=m,c[3]*=v}return c[0]=e,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(e)} ${it.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,pn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(e[0])} ${it.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};pn=new WeakMap,sd=new WeakMap,rd=new WeakMap,Wn=new WeakMap,rs=new WeakMap,os=new WeakMap,pu=new WeakMap,gu=new WeakMap,mu=new WeakMap,We=new WeakSet,bs=function(e=a(this,mu)){const i=a(this,rd)+e/2*a(this,pu);return a(this,gu)%180===0?[i/a(this,rs),i/a(this,os)]:[i/a(this,os),i/a(this,rs)]},h1=function(){const[e,i,r,o]=a(this,pn),[u,c]=E(this,We,bs).call(this,0);return[e+u,i+c,r-2*u,o-2*c]},d1=function(){const e=A(this,pn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of a(this,Wn)){if(o.length<=12){for(let f=4,p=o.length;f<p;f+=6){const[m,v]=o.subarray(f,f+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],v),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],v)}continue}let u=o[4],c=o[5];for(let f=6,p=o.length;f<p;f+=6){const[m,v,w,S,C,x]=o.subarray(f,f+6);dt.bezierBoundingBox(u,c,m,v,w,S,C,x,e),u=C,c=x}}const[i,r]=E(this,We,bs).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]},f1=function(e){const[i,r]=E(this,We,bs).call(this);A(this,mu,e);const[o,u]=E(this,We,bs).call(this),[c,f]=[o-i,u-r],p=a(this,pn);return p[0]-=c,p[1]-=f,p[2]+=2*c,p[3]+=2*f,p};let hp=Mv;var yu;const Lv=class Lv extends Xx{constructor(e){super();_(this,yu);A(this,yu,e),super.updateProperties({fill:"none",stroke:ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=a(this,yu).realScale),super.updateSVGProperty(e,i)}clone(){const e=new Lv(a(this,yu));return e.updateAll(this),e}};yu=new WeakMap;let tv=Lv;var Pp,p1;const pl=class pl extends Ky{constructor(e){super({...e,name:"inkEditor"});_(this,Pp);this._willKeepAspectRatio=!0}static initialize(e,i){ce.initialize(e,i),this._defaultDrawingOptions=new tv(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Lt(this,"typesMap",new Map([[Ot.INK_THICKNESS,"stroke-width"],[Ot.INK_COLOR,"stroke"],[Ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,o,u){return new qx(e,i,r,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,o,u,c){return hp.deserialize(e,i,r,o,u,c)}static async deserialize(e,i,r){let o=null;if(e instanceof xv){const{data:{inkLists:c,rect:f,rotation:p,id:m,color:v,opacity:w,borderStyle:{rawWidth:S},popupRef:C},parent:{page:{pageNumber:x}}}=e;o=e={annotationType:xt.INK,color:Array.from(v),thickness:S,opacity:w,paths:{points:c},boxes:null,pageIndex:x-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:C}}const u=await super.deserialize(e,i,r);return u.annotationElementId=e.id||null,u._initialData=o,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=pl.getDefaultDrawingOptions({stroke:dt.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":c,"stroke-width":f}}=this,p={annotationType:xt.INK,color:ce._colorManager.convert(u),opacity:c,thickness:f,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?p:this.annotationElementId&&!E(this,Pp,p1).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Pp=new WeakSet,p1=function(e){const{color:i,thickness:r,opacity:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,f)=>c!==i[f])||e.thickness!==r||e.opacity!==o||e.pageIndex!==u},yt(pl,"_type","ink"),yt(pl,"_editorType",xt.INK),yt(pl,"_defaultDrawingOptions",null);let ev=pl;var ue,Ge,Xr,Ws,qr,vu,as,ls,Xn,wu,Bt,Tc,Pc,tp,iv,ep,sv,np,g1;const Mc=class Mc extends ce{constructor(e){super({...e,name:"stampEditor"});_(this,Bt);_(this,ue,null);_(this,Ge,null);_(this,Xr,null);_(this,Ws,null);_(this,qr,null);_(this,vu,"");_(this,as,null);_(this,ls,null);_(this,Xn,!1);_(this,wu,!1);A(this,Ws,e.bitmapUrl),A(this,qr,e.bitmapFile)}static initialize(e,i){ce.initialize(e,i)}static get supportedTypes(){return Lt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Lt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(xt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:c}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:u,height:c,channels:o.length/(u*c)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;a(this,Ge)&&(A(this,ue,null),this._uiManager.imageManager.deleteId(a(this,Ge)),(e=a(this,as))==null||e.remove(),A(this,as,null),a(this,ls)&&(clearTimeout(a(this,ls)),A(this,ls,null))),super.remove()}rebuild(){if(!this.parent){a(this,Ge)&&E(this,Bt,tp).call(this);return}super.rebuild(),this.div!==null&&(a(this,Ge)&&a(this,as)===null&&E(this,Bt,tp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Xr)||a(this,ue)||a(this,Ws)||a(this,qr)||a(this,Ge))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,ue)?E(this,Bt,iv).call(this):E(this,Bt,tp).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(e*r,i*o,this.width*r,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,ls)!==null&&clearTimeout(a(this,ls)),A(this,ls,setTimeout(()=>{A(this,ls,null),E(this,Bt,sv).call(this)},200))}copyCanvas(e,i,r=!1){var S;e||(e=224);const{width:o,height:u}=a(this,ue),c=new ty;let f=a(this,ue),p=o,m=u,v=null;if(i){if(o>i||u>i){const Q=Math.min(i/o,i/u);p=Math.floor(o*Q),m=Math.floor(u*Q)}v=document.createElement("canvas");const C=v.width=Math.ceil(p*c.sx),x=v.height=Math.ceil(m*c.sy);a(this,Xn)||(f=E(this,Bt,ep).call(this,C,x));const k=v.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",L="#42414d");const O=15,D=O*c.sx,z=O*c.sy,j=new OffscreenCanvas(D*2,z*2),B=j.getContext("2d");B.fillStyle=T,B.fillRect(0,0,D*2,z*2),B.fillStyle=L,B.fillRect(0,0,D,z),B.fillRect(D,z,D,z),k.fillStyle=k.createPattern(j,"repeat"),k.fillRect(0,0,C,x),k.drawImage(f,0,0,f.width,f.height,0,0,C,x)}let w=null;if(r){let C,x;if(c.symmetric&&f.width<e&&f.height<e)C=f.width,x=f.height;else if(f=a(this,ue),o>e||u>e){const L=Math.min(e/o,e/u);C=Math.floor(o*L),x=Math.floor(u*L),a(this,Xn)||(f=E(this,Bt,ep).call(this,C,x))}const T=new OffscreenCanvas(C,x).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,C,x),w={width:C,height:x,data:T.getImageData(0,0,C,x).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return a(this,as)}static async deserialize(e,i,r){var x;let o=null;if(e instanceof Fb){const{data:{rect:k,rotation:T,id:L,structParent:O,popupRef:D},container:z,parent:{page:{pageNumber:j}}}=e,B=z.querySelector("canvas"),Q=r.imageManager.getFromCanvas(z.id,B);B.remove();const rt=((x=await i._structTree.getAriaAttributes(`${vv}${L}`))==null?void 0:x.get("aria-label"))||"";o=e={annotationType:xt.STAMP,bitmapId:Q.id,bitmap:Q.bitmap,pageIndex:j-1,rect:k.slice(0),rotation:T,id:L,deleted:!1,accessibilityData:{decorative:!1,altText:rt},isSvg:!1,structParent:O,popupRef:D}}const u=await super.deserialize(e,i,r),{rect:c,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=e;m&&r.imageManager.isValidId(m)?(A(u,Ge,m),f&&A(u,ue,f)):A(u,Ws,p),A(u,Xn,v);const[S,C]=u.pageDimensions;return u.width=(c[2]-c[0])/S,u.height=(c[3]-c[1])/C,u.annotationElementId=e.id||null,w&&(u.altTextData=w),u._initialData=o,A(u,wu,!!o),u}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:xt.STAMP,bitmapId:a(this,Ge),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Xn),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=E(this,Bt,np).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=E(this,Bt,g1).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const c=a(this,Xn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(a(this,Ge)))i.stamps.set(a(this,Ge),{area:c,serialized:r}),r.bitmap=E(this,Bt,np).call(this,!1);else if(a(this,Xn)){const f=i.stamps.get(a(this,Ge));c>f.area&&(f.area=c,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,Bt,np).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ue=new WeakMap,Ge=new WeakMap,Xr=new WeakMap,Ws=new WeakMap,qr=new WeakMap,vu=new WeakMap,as=new WeakMap,ls=new WeakMap,Xn=new WeakMap,wu=new WeakMap,Bt=new WeakSet,Tc=function(e,i=!1){if(!e){this.remove();return}A(this,ue,e.bitmap),i||(A(this,Ge,e.id),A(this,Xn,e.isSvg)),e.file&&A(this,vu,e.file.name),E(this,Bt,iv).call(this)},Pc=function(){if(A(this,Xr,null),this._uiManager.enableWaiting(!1),!!a(this,as)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ue)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ue)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},tp=function(){if(a(this,Ge)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Ge)).then(r=>E(this,Bt,Tc).call(this,r,!0)).finally(()=>E(this,Bt,Pc).call(this));return}if(a(this,Ws)){const r=a(this,Ws);A(this,Ws,null),this._uiManager.enableWaiting(!0),A(this,Xr,this._uiManager.imageManager.getFromUrl(r).then(o=>E(this,Bt,Tc).call(this,o)).finally(()=>E(this,Bt,Pc).call(this)));return}if(a(this,qr)){const r=a(this,qr);A(this,qr,null),this._uiManager.enableWaiting(!0),A(this,Xr,this._uiManager.imageManager.getFromFile(r).then(o=>E(this,Bt,Tc).call(this,o)).finally(()=>E(this,Bt,Pc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Mc.supportedTypesStr;const i=this._uiManager._signal;A(this,Xr,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Bt,Tc).call(this,o)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>E(this,Bt,Pc).call(this))),e.click()},iv=function(){var v;const{div:e}=this;let{width:i,height:r}=a(this,ue);const[o,u]=this.pageDimensions,c=.75;if(this.width)i=this.width*o,r=this.height*u;else if(i>c*o||r>c*u){const w=Math.min(c*o/i,c*u/r);i*=w,r*=w}const[f,p]=this.parentDimensions;this.setDims(i*f/o,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,as,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=i/o,this.height=r/u,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,Bt,sv).call(this),a(this,wu)||(this.parent.addUndoableEditor(this),A(this,wu,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,vu)&&m.setAttribute("aria-label",a(this,vu))},ep=function(e,i){const{width:r,height:o}=a(this,ue);let u=r,c=o,f=a(this,ue);for(;u>2*e||c>2*i;){const p=u,m=c;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const v=new OffscreenCanvas(u,c);v.getContext("2d").drawImage(f,0,0,p,m,0,0,u,c),f=v.transferToImageBitmap()}return f},sv=function(){const[e,i]=this.parentDimensions,{width:r,height:o}=this,u=new ty,c=Math.ceil(r*e*u.sx),f=Math.ceil(o*i*u.sy),p=a(this,as);if(!p||p.width===c&&p.height===f)return;p.width=c,p.height=f;const m=a(this,Xn)?a(this,ue):E(this,Bt,ep).call(this,c,f),v=p.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,c,f)},np=function(e){if(e){if(a(this,Xn)){const o=this._uiManager.imageManager.getSvgUrl(a(this,Ge));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,ue),i.getContext("2d").drawImage(a(this,ue),0,0),i.toDataURL()}if(a(this,Xn)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*to.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*to.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(o,u);return c.getContext("2d").drawImage(a(this,ue),0,0,a(this,ue).width,a(this,ue).height,0,0,o,u),c.transferToImageBitmap()}return structuredClone(a(this,ue))},g1=function(e){var c;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===i,u=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},yt(Mc,"_type","stamp"),yt(Mc,"_editorType",xt.STAMP);let nv=Mc;var _a,Au,us,Yr,Xs,hi,Kr,Su,Ea,Ni,qs,sn,Ys,ht,Qr,re,m1,Wi,ov,av,ip;const bi=class bi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:o,annotationLayer:u,drawLayer:c,textLayer:f,viewport:p,l10n:m}){_(this,re);_(this,_a);_(this,Au,!1);_(this,us,null);_(this,Yr,null);_(this,Xs,null);_(this,hi,new Map);_(this,Kr,!1);_(this,Su,!1);_(this,Ea,!1);_(this,Ni,null);_(this,qs,null);_(this,sn,null);_(this,Ys,null);_(this,ht);const v=[...a(bi,Qr).values()];if(!bi._initialized){bi._initialized=!0;for(const w of v)w.initialize(m,t)}t.registerEditorTypes(v),A(this,ht,t),this.pageIndex=e,this.div=i,A(this,_a,o),A(this,us,u),this.viewport=p,A(this,sn,f),this.drawLayer=c,this._structTree=r,a(this,ht).addLayer(this)}get isEmpty(){return a(this,hi).size===0}get isInvisible(){return this.isEmpty&&a(this,ht).getMode()===xt.NONE}updateToolbar(t){a(this,ht).updateToolbar(t)}updateMode(t=a(this,ht).getMode()){switch(E(this,re,ip).call(this),t){case xt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case xt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case xt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(bi,Qr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,sn))==null?void 0:e.div)}setEditingState(t){a(this,ht).setEditingState(t)}addCommands(t){a(this,ht).addCommands(t)}cleanUndoStack(t){a(this,ht).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,us))==null||e.div.classList.toggle("disabled",!t)}async enable(){A(this,Ea,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,hi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,ht).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,us)){A(this,Ea,!1);return}const e=a(this,us).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,ht).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,Ea,!1)}disable(){var r;A(this,Su,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of a(this,hi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(a(this,us)){const o=a(this,us).getEditableAnnotations();for(const u of o){const{id:c}=u.data;if(a(this,ht).isDeletedAnnotationElement(c))continue;let f=e.get(c);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(c),f&&(a(this,ht).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}E(this,re,ip).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of a(bi,Qr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Su,!1)}getEditableAnnotation(t){var e;return((e=a(this,us))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,ht).getActive()!==t&&a(this,ht).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,sn))!=null&&t.div&&!a(this,Ys)){A(this,Ys,new AbortController);const e=a(this,ht).combinedSignal(a(this,Ys));a(this,sn).div.addEventListener("pointerdown",E(this,re,m1).bind(this),{signal:e}),a(this,sn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,sn))!=null&&t.div&&a(this,Ys)&&(a(this,Ys).abort(),A(this,Ys,null),a(this,sn).div.classList.remove("highlighting"))}enableClick(){if(a(this,Yr))return;A(this,Yr,new AbortController);const t=a(this,ht).combinedSignal(a(this,Yr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Yr))==null||t.abort(),A(this,Yr,null)}attach(t){a(this,hi).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,ht).isDeletedAnnotationElement(e)&&a(this,ht).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,hi).delete(t.id),(e=a(this,_a))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Su)&&t.annotationElementId&&a(this,ht).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,ht).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,ht).addDeletedAnnotationElement(t.annotationElementId),ce.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,ht).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Ea)),a(this,ht).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Xs)&&(t._focusEventsAllowed=!1,A(this,Xs,setTimeout(()=>{A(this,Xs,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,ht)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,_a))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,ht).getId()}combinedSignal(t){return a(this,ht).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,re,Wi))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,ht).updateToolbar(t),a(this,ht).updateMode(t);const{offsetX:i,offsetY:r}=E(this,re,av).call(this),o=this.getNextId(),u=E(this,re,ov).call(this,{parent:this,id:o,x:i,y:r,uiManager:a(this,ht),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=a(bi,Qr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,ht)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),o=E(this,re,ov).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,ht),isCentered:e,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(E(this,re,av).call(this),!0)}setSelected(t){a(this,ht).setSelected(t)}toggleSelected(t){a(this,ht).toggleSelected(t)}unselect(t){a(this,ht).unselect(t)}pointerup(t){var i;const{isMac:e}=mn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,Kr)&&(A(this,Kr,!1),!((i=a(this,re,Wi))!=null&&i.isDrawer&&a(this,re,Wi).supportMultipleDrawings))){if(!a(this,Au)){A(this,Au,!0);return}if(a(this,ht).getMode()===xt.STAMP){a(this,ht).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var r;if(a(this,ht).getMode()===xt.HIGHLIGHT&&this.enableTextSelection(),a(this,Kr)){A(this,Kr,!1);return}const{isMac:e}=mn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Kr,!0),(r=a(this,re,Wi))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=a(this,ht).getActive();A(this,Au,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),a(this,Ni)){a(this,re,Wi).startDrawing(this,a(this,ht),!1,t);return}a(this,ht).setCurrentDrawingSession(this),A(this,Ni,new AbortController);const e=a(this,ht).combinedSignal(a(this,Ni));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(A(this,qs,null),this.commitOrRemove())},{signal:e}),a(this,re,Wi).startDrawing(this,a(this,ht),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,qs,e);return}a(this,qs)&&setTimeout(()=>{var e;(e=a(this,qs))==null||e.focus(),A(this,qs,null)},0)}endDrawingSession(t=!1){return a(this,Ni)?(a(this,ht).setCurrentDrawingSession(null),a(this,Ni).abort(),A(this,Ni,null),A(this,qs,null),a(this,re,Wi).endDrawing(t)):null}findNewParent(t,e,i){const r=a(this,ht).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,Ni)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Ni)&&a(this,re,Wi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,ht).getActive())==null?void 0:t.parent)===this&&(a(this,ht).commitOrRemove(),a(this,ht).setActiveEditor(null)),a(this,Xs)&&(clearTimeout(a(this,Xs)),A(this,Xs,null));for(const i of a(this,hi).values())(e=a(this,_a))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,hi).clear(),a(this,ht).removeLayer(this)}render({viewport:t}){this.viewport=t,ka(this.div,t);for(const e of a(this,ht).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,ht).commitOrRemove(),E(this,re,ip).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ka(this.div,{rotation:i}),e!==i)for(const r of a(this,hi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,ht).viewParameters.realScale}};_a=new WeakMap,Au=new WeakMap,us=new WeakMap,Yr=new WeakMap,Xs=new WeakMap,hi=new WeakMap,Kr=new WeakMap,Su=new WeakMap,Ea=new WeakMap,Ni=new WeakMap,qs=new WeakMap,sn=new WeakMap,Ys=new WeakMap,ht=new WeakMap,Qr=new WeakMap,re=new WeakSet,m1=function(t){a(this,ht).unselectAll();const{target:e}=t;if(e===a(this,sn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,sn).div.contains(e)){const{isMac:i}=mn.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,ht).showAllEditors("highlight",!0,!0),a(this,sn).div.classList.add("free"),this.toggleDrawing(),cp.startHighlighting(this,a(this,ht).direction==="ltr",{target:a(this,sn).div,x:t.x,y:t.y}),a(this,sn).div.addEventListener("pointerup",()=>{a(this,sn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,ht)._signal}),t.preventDefault()}},Wi=function(){return a(bi,Qr).get(a(this,ht).getMode())},ov=function(t){const e=a(this,re,Wi);return e?new e.prototype.constructor(t):null},av=function(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),u=Math.max(0,e),c=Math.min(window.innerWidth,t+i),f=Math.min(window.innerHeight,e+r),p=(o+c)/2-t,m=(u+f)/2-e,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},ip=function(){for(const t of a(this,hi).values())t.isEmpty()&&t.remove()},yt(bi,"_initialized",!1),_(bi,Qr,new Map([Hy,ev,nv,cp].map(t=>[t._editorType,t])));let rv=bi;var Di,od,gn,Ca,Rp,y1,cs,uv,v1,cv;const Je=class Je{constructor({pageIndex:t}){_(this,cs);_(this,Di,null);_(this,od,0);_(this,gn,new Map);_(this,Ca,new Map);this.pageIndex=t}setParent(t){if(!a(this,Di)){A(this,Di,t);return}if(a(this,Di)!==t){if(a(this,gn).size>0)for(const e of a(this,gn).values())e.remove(),t.append(e);A(this,Di,t)}}static get _svgFactory(){return Lt(this,"_svgFactory",new Cv)}draw(t,e=!1,i=!1){const r=cn(this,od)._++,o=E(this,cs,uv).call(this),u=Je._svgFactory.createElement("defs");o.append(u);const c=Je._svgFactory.createElement("path");u.append(c);const f=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",f),c.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Ca).set(r,c);const p=i?E(this,cs,v1).call(this,u,f):null,m=Je._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),a(this,gn).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=cn(this,od)._++,r=E(this,cs,uv).call(this),o=Je._svgFactory.createElement("defs");r.append(o);const u=Je._svgFactory.createElement("path");o.append(u);const c=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const v=Je._svgFactory.createElement("mask");o.append(v),f=`mask_p${this.pageIndex}_${i}`,v.setAttribute("id",f),v.setAttribute("maskUnits","objectBoundingBox");const w=Je._svgFactory.createElement("rect");v.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const S=Je._svgFactory.createElement("use");v.append(S),S.setAttribute("href",`#${c}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const p=Je._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,gn).set(i,r),i}finalizeDraw(t,e){a(this,Ca).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:i,bbox:r,rootClass:o,path:u}=e,c=typeof t=="number"?a(this,gn).get(t):t;if(c){if(i&&E(this,cs,cv).call(this,c,i),r&&E(f=Je,Rp,y1).call(f,c,r),o){const{classList:p}=c;for(const[m,v]of Object.entries(o))p.toggle(m,v)}if(u){const m=c.firstChild.firstChild;E(this,cs,cv).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const i=a(this,gn).get(t);i&&(a(e,Di).append(i),a(this,gn).delete(t),a(e,gn).set(t,i))}remove(t){a(this,Ca).delete(t),a(this,Di)!==null&&(a(this,gn).get(t).remove(),a(this,gn).delete(t))}destroy(){A(this,Di,null);for(const t of a(this,gn).values())t.remove();a(this,gn).clear(),a(this,Ca).clear()}};Di=new WeakMap,od=new WeakMap,gn=new WeakMap,Ca=new WeakMap,Rp=new WeakSet,y1=function(t,[e,i,r,o]){const{style:u}=t;u.top=`${100*i}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*o}%`},cs=new WeakSet,uv=function(){const t=Je._svgFactory.create(1,1,!0);return a(this,Di).append(t),t.setAttribute("aria-hidden",!0),t},v1=function(t,e){const i=Je._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Je._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},cv=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},_(Je,Rp);let lv=Je;globalThis.pdfjsTestingUtils={HighlightOutliner:jy};bt.AbortException;bt.AnnotationEditorLayer;bt.AnnotationEditorParamsType;bt.AnnotationEditorType;bt.AnnotationEditorUIManager;bt.AnnotationLayer;bt.AnnotationMode;bt.ColorPicker;bt.DOMSVGFactory;bt.DrawLayer;bt.FeatureTest;var Yx=bt.GlobalWorkerOptions;bt.ImageKind;bt.InvalidPDFException;bt.MissingPDFException;bt.OPS;bt.OutputScale;bt.PDFDataRangeTransport;bt.PDFDateString;bt.PDFWorker;bt.PasswordResponses;bt.PermissionFlag;bt.PixelsPerInch;bt.RenderingCancelledException;bt.TextLayer;bt.TouchManager;bt.UnexpectedResponseException;bt.Util;bt.VerbosityLevel;bt.XfaLayer;bt.build;bt.createValidAbsoluteUrl;bt.fetchData;bt.getDocument;bt.getFilenameFromUrl;bt.getPdfFilenameFromUrl;bt.getXfaPageViewport;bt.isDataScheme;bt.isPdfFile;bt.noContextMenu;bt.normalizeUnicode;bt.setLayerDimensions;bt.shadow;bt.stopEvent;bt.version;const Kx="_showData_1lhgj_1",Qx={showData:Kx};Yx.workerSrc="../pdf.worker.mjs";const Zx=()=>{const[d,t]=Te.useState(null),[e,i]=Te.useState(null),[r,o]=Te.useState(null),u=c=>{if(c.target.files){const f=Array.from(c.target.files);console.log(f),t({files:f})}};return Te.useEffect(()=>{if(d){const c=[];let f=[];const p=async()=>{const v=new FormData;Array.from(d.files).forEach(w=>{v.append("files",w,w.name),console.log(w),c.push(URL.createObjectURL(w))}),f=c.map((w,S)=>{const C=d.files[S];return C.type==="image/jpeg"?Nt.jsx("img",{src:w,alt:"uploaded"},S):C.type==="application/pdf"?Nt.jsx("embed",{src:w,width:"100%",height:"500px",type:"application/pdf"},S):Nt.jsx("div",{children:"wrong file"})}),console.log(f),i(f);try{console.log("wysyam");const w=await fetch("http://localhost:3000/ask",{method:"POST",body:v});if(w.ok){const S=await w.json();return console.log("Plik wysany pomylnie:",S.files),S.files}else console.error("Bd podczas wysyania:",w.statusText)}catch(w){console.error("Wystpi bd:",w)}};(async()=>{const v=await p();if(v){const w=v.map((S,C)=>Nt.jsxs("div",{children:[Nt.jsxs("div",{children:[Nt.jsx("p",{children:"Nazwa Firmy:"}),Nt.jsx("p",{children:S.data.name})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{children:"Numer faktury:"}),Nt.jsx("p",{children:S.data.invoiceNo})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{children:"Data faktury:"}),Nt.jsx("p",{children:S.data.invoiceDate})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{children:"Kwota:"}),Nt.jsx("p",{children:S.data.value})]}),Nt.jsxs("div",{children:[Nt.jsx("p",{children:"Termin patnoci:"}),Nt.jsx("p",{children:S.data.paymentDate})]})]},C));o(w)}})()}},[d,o]),Nt.jsxs("div",{className:"App",children:[Nt.jsx("h1",{children:"Extract Text from PDF or Image"}),Nt.jsx("input",{type:"file",multiple:!0,accept:".pdf,image/*",onChange:u}),r&&Nt.jsxs("div",{className:Qx.showData,children:[Nt.jsxs("div",{children:[Nt.jsx("h2",{children:"Found Invoice Data:"}),r]}),Nt.jsx("div",{children:e})]})]})};EE.createRoot(document.getElementById("root")).render(Nt.jsx(Te.StrictMode,{children:Nt.jsx(AS,{children:Nt.jsx(Zx,{})})}));
