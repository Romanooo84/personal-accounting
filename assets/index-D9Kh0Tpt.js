var yx=Object.defineProperty;var ub=c=>{throw TypeError(c)};var vx=(c,e,t)=>e in c?yx(c,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[e]=t;var Se=(c,e,t)=>vx(c,typeof e!="symbol"?e+"":e,t),ny=(c,e,t)=>e.has(c)||ub("Cannot "+t);var o=(c,e,t)=>(ny(c,e,"read from private field"),t?t.call(c):e.get(c)),E=(c,e,t)=>e.has(c)?ub("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(c):e.set(c,t),b=(c,e,t,i)=>(ny(c,e,"write to private field"),i?i.call(c,t):e.set(c,t),t),x=(c,e,t)=>(ny(c,e,"access private method"),t);var dn=(c,e,t,i)=>({set _(r){b(c,e,r,t)},get _(){return o(c,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();var iy={exports:{}},vc={},sy={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb;function wx(){if(cb)return Ne;cb=1;var c=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=y&&N[y]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function T(N,U,pe){this.props=N,this.context=U,this.refs=C,this.updater=pe||A}T.prototype.isReactComponent={},T.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},T.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function k(){}k.prototype=T.prototype;function R(N,U,pe){this.props=N,this.context=U,this.refs=C,this.updater=pe||A}var M=R.prototype=new k;M.constructor=R,S(M,T.prototype),M.isPureReactComponent=!0;var D=Array.isArray,$=Object.prototype.hasOwnProperty,j={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function K(N,U,pe){var ke,Ie={},Ee=null,be=null;if(U!=null)for(ke in U.ref!==void 0&&(be=U.ref),U.key!==void 0&&(Ee=""+U.key),U)$.call(U,ke)&&!B.hasOwnProperty(ke)&&(Ie[ke]=U[ke]);var $e=arguments.length-2;if($e===1)Ie.children=pe;else if(1<$e){for(var Ke=Array($e),un=0;un<$e;un++)Ke[un]=arguments[un+2];Ie.children=Ke}if(N&&N.defaultProps)for(ke in $e=N.defaultProps,$e)Ie[ke]===void 0&&(Ie[ke]=$e[ke]);return{$$typeof:c,type:N,key:Ee,ref:be,props:Ie,_owner:j.current}}function Z(N,U){return{$$typeof:c,type:N.type,key:U,ref:N.ref,props:N.props,_owner:N._owner}}function me(N){return typeof N=="object"&&N!==null&&N.$$typeof===c}function de(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(pe){return U[pe]})}var Oe=/\/+/g;function Me(N,U){return typeof N=="object"&&N!==null&&N.key!=null?de(""+N.key):U.toString(36)}function ue(N,U,pe,ke,Ie){var Ee=typeof N;(Ee==="undefined"||Ee==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(Ee){case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case c:case e:be=!0}}if(be)return be=N,Ie=Ie(be),N=ke===""?"."+Me(be,0):ke,D(Ie)?(pe="",N!=null&&(pe=N.replace(Oe,"$&/")+"/"),ue(Ie,U,pe,"",function(un){return un})):Ie!=null&&(me(Ie)&&(Ie=Z(Ie,pe+(!Ie.key||be&&be.key===Ie.key?"":(""+Ie.key).replace(Oe,"$&/")+"/")+N)),U.push(Ie)),1;if(be=0,ke=ke===""?".":ke+":",D(N))for(var $e=0;$e<N.length;$e++){Ee=N[$e];var Ke=ke+Me(Ee,$e);be+=ue(Ee,U,pe,Ke,Ie)}else if(Ke=w(N),typeof Ke=="function")for(N=Ke.call(N),$e=0;!(Ee=N.next()).done;)Ee=Ee.value,Ke=ke+Me(Ee,$e++),be+=ue(Ee,U,pe,Ke,Ie);else if(Ee==="object")throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return be}function ve(N,U,pe){if(N==null)return N;var ke=[],Ie=0;return ue(N,ke,"","",function(Ee){return U.call(pe,Ee,Ie++)}),ke}function X(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=pe)},function(pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=pe)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var J={current:null},V={transition:null},ne={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:V,ReactCurrentOwner:j};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ve,forEach:function(N,U,pe){ve(N,function(){U.apply(this,arguments)},pe)},count:function(N){var U=0;return ve(N,function(){U++}),U},toArray:function(N){return ve(N,function(U){return U})||[]},only:function(N){if(!me(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ne.Component=T,Ne.Fragment=t,Ne.Profiler=r,Ne.PureComponent=R,Ne.StrictMode=i,Ne.Suspense=d,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ne,Ne.act=Q,Ne.cloneElement=function(N,U,pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ke=S({},N.props),Ie=N.key,Ee=N.ref,be=N._owner;if(U!=null){if(U.ref!==void 0&&(Ee=U.ref,be=j.current),U.key!==void 0&&(Ie=""+U.key),N.type&&N.type.defaultProps)var $e=N.type.defaultProps;for(Ke in U)$.call(U,Ke)&&!B.hasOwnProperty(Ke)&&(ke[Ke]=U[Ke]===void 0&&$e!==void 0?$e[Ke]:U[Ke])}var Ke=arguments.length-2;if(Ke===1)ke.children=pe;else if(1<Ke){$e=Array(Ke);for(var un=0;un<Ke;un++)$e[un]=arguments[un+2];ke.children=$e}return{$$typeof:c,type:N.type,key:Ie,ref:Ee,props:ke,_owner:be}},Ne.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},Ne.createElement=K,Ne.createFactory=function(N){var U=K.bind(null,N);return U.type=N,U},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:h,render:N}},Ne.isValidElement=me,Ne.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:X}},Ne.memo=function(N,U){return{$$typeof:p,type:N,compare:U===void 0?null:U}},Ne.startTransition=function(N){var U=V.transition;V.transition={};try{N()}finally{V.transition=U}},Ne.unstable_act=Q,Ne.useCallback=function(N,U){return J.current.useCallback(N,U)},Ne.useContext=function(N){return J.current.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N){return J.current.useDeferredValue(N)},Ne.useEffect=function(N,U){return J.current.useEffect(N,U)},Ne.useId=function(){return J.current.useId()},Ne.useImperativeHandle=function(N,U,pe){return J.current.useImperativeHandle(N,U,pe)},Ne.useInsertionEffect=function(N,U){return J.current.useInsertionEffect(N,U)},Ne.useLayoutEffect=function(N,U){return J.current.useLayoutEffect(N,U)},Ne.useMemo=function(N,U){return J.current.useMemo(N,U)},Ne.useReducer=function(N,U,pe){return J.current.useReducer(N,U,pe)},Ne.useRef=function(N){return J.current.useRef(N)},Ne.useState=function(N){return J.current.useState(N)},Ne.useSyncExternalStore=function(N,U,pe){return J.current.useSyncExternalStore(N,U,pe)},Ne.useTransition=function(){return J.current.useTransition()},Ne.version="18.3.1",Ne}var hb;function zv(){return hb||(hb=1,sy.exports=wx()),sy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function Ax(){if(db)return vc;db=1;var c=zv(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(h,d,p){var g,y={},w=null,A=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(A=d.ref);for(g in d)i.call(d,g)&&!a.hasOwnProperty(g)&&(y[g]=d[g]);if(h&&h.defaultProps)for(g in d=h.defaultProps,d)y[g]===void 0&&(y[g]=d[g]);return{$$typeof:e,type:h,key:w,ref:A,props:y,_owner:r.current}}return vc.Fragment=t,vc.jsx=u,vc.jsxs=u,vc}var fb;function bx(){return fb||(fb=1,iy.exports=Ax()),iy.exports}var le=bx(),H=zv(),zf={},ry={exports:{}},Cn={},ay={exports:{}},oy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function Sx(){return pb||(pb=1,function(c){function e(V,ne){var Q=V.length;V.push(ne);e:for(;0<Q;){var N=Q-1>>>1,U=V[N];if(0<r(U,ne))V[N]=ne,V[Q]=U,Q=N;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var ne=V[0],Q=V.pop();if(Q!==ne){V[0]=Q;e:for(var N=0,U=V.length,pe=U>>>1;N<pe;){var ke=2*(N+1)-1,Ie=V[ke],Ee=ke+1,be=V[Ee];if(0>r(Ie,Q))Ee<U&&0>r(be,Ie)?(V[N]=be,V[Ee]=Q,N=Ee):(V[N]=Ie,V[ke]=Q,N=ke);else if(Ee<U&&0>r(be,Q))V[N]=be,V[Ee]=Q,N=Ee;else break e}}return ne}function r(V,ne){var Q=V.sortIndex-ne.sortIndex;return Q!==0?Q:V.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;c.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();c.unstable_now=function(){return u.now()-h}}var d=[],p=[],g=1,y=null,w=3,A=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(V){for(var ne=t(p);ne!==null;){if(ne.callback===null)i(p);else if(ne.startTime<=V)i(p),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=t(p)}}function D(V){if(C=!1,M(V),!S)if(t(d)!==null)S=!0,X($);else{var ne=t(p);ne!==null&&J(D,ne.startTime-V)}}function $(V,ne){S=!1,C&&(C=!1,k(K),K=-1),A=!0;var Q=w;try{for(M(ne),y=t(d);y!==null&&(!(y.expirationTime>ne)||V&&!de());){var N=y.callback;if(typeof N=="function"){y.callback=null,w=y.priorityLevel;var U=N(y.expirationTime<=ne);ne=c.unstable_now(),typeof U=="function"?y.callback=U:y===t(d)&&i(d),M(ne)}else i(d);y=t(d)}if(y!==null)var pe=!0;else{var ke=t(p);ke!==null&&J(D,ke.startTime-ne),pe=!1}return pe}finally{y=null,w=Q,A=!1}}var j=!1,B=null,K=-1,Z=5,me=-1;function de(){return!(c.unstable_now()-me<Z)}function Oe(){if(B!==null){var V=c.unstable_now();me=V;var ne=!0;try{ne=B(!0,V)}finally{ne?Me():(j=!1,B=null)}}else j=!1}var Me;if(typeof R=="function")Me=function(){R(Oe)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ve=ue.port2;ue.port1.onmessage=Oe,Me=function(){ve.postMessage(null)}}else Me=function(){T(Oe,0)};function X(V){B=V,j||(j=!0,Me())}function J(V,ne){K=T(function(){V(c.unstable_now())},ne)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(V){V.callback=null},c.unstable_continueExecution=function(){S||A||(S=!0,X($))},c.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<V?Math.floor(1e3/V):5},c.unstable_getCurrentPriorityLevel=function(){return w},c.unstable_getFirstCallbackNode=function(){return t(d)},c.unstable_next=function(V){switch(w){case 1:case 2:case 3:var ne=3;break;default:ne=w}var Q=w;w=ne;try{return V()}finally{w=Q}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(V,ne){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=w;w=V;try{return ne()}finally{w=Q}},c.unstable_scheduleCallback=function(V,ne,Q){var N=c.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?N+Q:N):Q=N,V){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Q+U,V={id:g++,callback:ne,priorityLevel:V,startTime:Q,expirationTime:U,sortIndex:-1},Q>N?(V.sortIndex=Q,e(p,V),t(d)===null&&V===t(p)&&(C?(k(K),K=-1):C=!0,J(D,Q-N))):(V.sortIndex=U,e(d,V),S||A||(S=!0,X($))),V},c.unstable_shouldYield=de,c.unstable_wrapCallback=function(V){var ne=w;return function(){var Q=w;w=ne;try{return V.apply(this,arguments)}finally{w=Q}}}}(oy)),oy}var gb;function _x(){return gb||(gb=1,ay.exports=Sx()),ay.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function Ex(){if(mb)return Cn;mb=1;var c=zv(),e=_x();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function w(n){return d.call(y,n)?!0:d.call(g,n)?!1:p.test(n)?y[n]=!0:(g[n]=!0,!1)}function A(n,s,l,f){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,l,f){if(s===null||typeof s>"u"||A(n,s,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,l,f,m,v,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=_}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){T[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];T[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){T[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){T[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){T[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){T[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){T[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){T[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){T[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(k,R);T[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(k,R);T[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(k,R);T[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){T[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),T.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){T[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function M(n,s,l,f){var m=T.hasOwnProperty(s)?T[s]:null;(m!==null?m.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,l,m,f)&&(l=null),f||m===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):m.mustUseProperty?n[m.propertyName]=l===null?m.type===3?!1:"":l:(s=m.attributeName,f=m.attributeNamespace,l===null?n.removeAttribute(s):(m=m.type,l=m===3||m===4&&l===!0?"":""+l,f?n.setAttributeNS(f,s,l):n.setAttribute(s,l))))}var D=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),j=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),de=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),V=Symbol.iterator;function ne(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,N;function U(n){if(N===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var pe=!1;function ke(n,s){if(!n||pe)return"";pe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var f=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){f=z}n.call(s.prototype)}else{try{throw Error()}catch(z){f=z}n()}}catch(z){if(z&&f&&typeof z.stack=="string"){for(var m=z.stack.split(`
`),v=f.stack.split(`
`),_=m.length-1,P=v.length-1;1<=_&&0<=P&&m[_]!==v[P];)P--;for(;1<=_&&0<=P;_--,P--)if(m[_]!==v[P]){if(_!==1||P!==1)do if(_--,P--,0>P||m[_]!==v[P]){var L=`
`+m[_].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=_&&0<=P);break}}}finally{pe=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?U(n):""}function Ie(n){switch(n.tag){case 5:return U(n.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function Ee(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case j:return"Portal";case Z:return"Profiler";case K:return"StrictMode";case Me:return"Suspense";case ue:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case de:return(n.displayName||"Context")+".Consumer";case me:return(n._context.displayName||"Context")+".Provider";case Oe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ve:return s=n.displayName||null,s!==null?s:Ee(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return Ee(n(s))}catch{}}return null}function be(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(s);case 8:return s===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function $e(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function un(n){var s=Ke(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,v=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(_){f=""+_,v.call(this,_)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(_){f=""+_},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Td(n){n._valueTracker||(n._valueTracker=un(n))}function g0(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),f="";return n&&(f=Ke(n)?n.checked?"true":"false":n.value),n=f,n!==l?(s.setValue(n),!0):!1}function Pd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ug(n,s){var l=s.checked;return Q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function m0(n,s){var l=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;l=$e(s.value!=null?s.value:l),n._wrapperState={initialChecked:f,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function y0(n,s){s=s.checked,s!=null&&M(n,"checked",s,!1)}function cg(n,s){y0(n,s);var l=$e(s.value),f=s.type;if(l!=null)f==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?hg(n,s.type,l):s.hasOwnProperty("defaultValue")&&hg(n,s.type,$e(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function v0(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function hg(n,s,l){(s!=="number"||Pd(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Iu=Array.isArray;function Ho(n,s,l,f){if(n=n.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=s.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&f&&(n[l].defaultSelected=!0)}else{for(l=""+$e(l),s=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,f&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function dg(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return Q({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function w0(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(Iu(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:$e(l)}}function A0(n,s){var l=$e(s.value),f=$e(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),f!=null&&(n.defaultValue=""+f)}function b0(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function S0(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fg(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?S0(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Rd,_0=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,f,m){MSApp.execUnsafeLocalFunction(function(){return n(s,l,f,m)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Rd=Rd||document.createElement("div"),Rd.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Nu(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S_=["Webkit","ms","Moz","O"];Object.keys(Du).forEach(function(n){S_.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Du[s]=Du[n]})});function E0(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Du.hasOwnProperty(n)&&Du[n]?(""+s).trim():s+"px"}function x0(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var f=l.indexOf("--")===0,m=E0(l,s[l],f);l==="float"&&(l="cssFloat"),f?n.setProperty(l,m):n[l]=m}}var __=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(n,s){if(s){if(__[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function gg(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mg=null;function yg(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vg=null,Bo=null,jo=null;function C0(n){if(n=ic(n)){if(typeof vg!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Zd(s),vg(n.stateNode,n.type,s))}}function k0(n){Bo?jo?jo.push(n):jo=[n]:Bo=n}function T0(){if(Bo){var n=Bo,s=jo;if(jo=Bo=null,C0(n),s)for(n=0;n<s.length;n++)C0(s[n])}}function P0(n,s){return n(s)}function R0(){}var wg=!1;function L0(n,s,l){if(wg)return n(s,l);wg=!0;try{return P0(n,s,l)}finally{wg=!1,(Bo!==null||jo!==null)&&(R0(),T0())}}function Fu(n,s){var l=n.stateNode;if(l===null)return null;var f=Zd(l);if(f===null)return null;l=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var Ag=!1;if(h)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){Ag=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{Ag=!1}function E_(n,s,l,f,m,v,_,P,L){var z=Array.prototype.slice.call(arguments,3);try{s.apply(l,z)}catch(G){this.onError(G)}}var $u=!1,Ld=null,Md=!1,bg=null,x_={onError:function(n){$u=!0,Ld=n}};function C_(n,s,l,f,m,v,_,P,L){$u=!1,Ld=null,E_.apply(x_,arguments)}function k_(n,s,l,f,m,v,_,P,L){if(C_.apply(this,arguments),$u){if($u){var z=Ld;$u=!1,Ld=null}else throw Error(t(198));Md||(Md=!0,bg=z)}}function ha(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function M0(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function I0(n){if(ha(n)!==n)throw Error(t(188))}function T_(n){var s=n.alternate;if(!s){if(s=ha(n),s===null)throw Error(t(188));return s!==n?null:n}for(var l=n,f=s;;){var m=l.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){l=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===l)return I0(m),n;if(v===f)return I0(m),s;v=v.sibling}throw Error(t(188))}if(l.return!==f.return)l=m,f=v;else{for(var _=!1,P=m.child;P;){if(P===l){_=!0,l=m,f=v;break}if(P===f){_=!0,f=m,l=v;break}P=P.sibling}if(!_){for(P=v.child;P;){if(P===l){_=!0,l=v,f=m;break}if(P===f){_=!0,f=v,l=m;break}P=P.sibling}if(!_)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?n:s}function N0(n){return n=T_(n),n!==null?D0(n):null}function D0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=D0(n);if(s!==null)return s;n=n.sibling}return null}var F0=e.unstable_scheduleCallback,O0=e.unstable_cancelCallback,P_=e.unstable_shouldYield,R_=e.unstable_requestPaint,gt=e.unstable_now,L_=e.unstable_getCurrentPriorityLevel,Sg=e.unstable_ImmediatePriority,$0=e.unstable_UserBlockingPriority,Id=e.unstable_NormalPriority,M_=e.unstable_LowPriority,z0=e.unstable_IdlePriority,Nd=null,Ui=null;function I_(n){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(Nd,n,void 0,(n.current.flags&128)===128)}catch{}}var yi=Math.clz32?Math.clz32:F_,N_=Math.log,D_=Math.LN2;function F_(n){return n>>>=0,n===0?32:31-(N_(n)/D_|0)|0}var Dd=64,Fd=4194304;function zu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Od(n,s){var l=n.pendingLanes;if(l===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes,_=l&268435455;if(_!==0){var P=_&~m;P!==0?f=zu(P):(v&=_,v!==0&&(f=zu(v)))}else _=l&~m,_!==0?f=zu(_):v!==0&&(f=zu(v));if(f===0)return 0;if(s!==0&&s!==f&&!(s&m)&&(m=f&-f,v=s&-s,m>=v||m===16&&(v&4194240)!==0))return s;if(f&4&&(f|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)l=31-yi(s),m=1<<l,f|=n[l],s&=~m;return f}function O_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $_(n,s){for(var l=n.suspendedLanes,f=n.pingedLanes,m=n.expirationTimes,v=n.pendingLanes;0<v;){var _=31-yi(v),P=1<<_,L=m[_];L===-1?(!(P&l)||P&f)&&(m[_]=O_(P,s)):L<=s&&(n.expiredLanes|=P),v&=~P}}function _g(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function H0(){var n=Dd;return Dd<<=1,!(Dd&4194240)&&(Dd=64),n}function Eg(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Hu(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-yi(s),n[s]=l}function z_(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<l;){var m=31-yi(l),v=1<<m;s[m]=0,f[m]=-1,n[m]=-1,l&=~v}}function xg(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var f=31-yi(l),m=1<<f;m&s|n[f]&s&&(n[f]|=s),l&=~m}}var We=0;function B0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var j0,Cg,U0,V0,W0,kg=!1,$d=[],or=null,lr=null,ur=null,Bu=new Map,ju=new Map,cr=[],H_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function G0(n,s){switch(n){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Bu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(s.pointerId)}}function Uu(n,s,l,f,m,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:l,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},s!==null&&(s=ic(s),s!==null&&Cg(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function B_(n,s,l,f,m){switch(s){case"focusin":return or=Uu(or,n,s,l,f,m),!0;case"dragenter":return lr=Uu(lr,n,s,l,f,m),!0;case"mouseover":return ur=Uu(ur,n,s,l,f,m),!0;case"pointerover":var v=m.pointerId;return Bu.set(v,Uu(Bu.get(v)||null,n,s,l,f,m)),!0;case"gotpointercapture":return v=m.pointerId,ju.set(v,Uu(ju.get(v)||null,n,s,l,f,m)),!0}return!1}function X0(n){var s=da(n.target);if(s!==null){var l=ha(s);if(l!==null){if(s=l.tag,s===13){if(s=M0(l),s!==null){n.blockedOn=s,W0(n.priority,function(){U0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Pg(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var f=new l.constructor(l.type,l);mg=f,l.target.dispatchEvent(f),mg=null}else return s=ic(l),s!==null&&Cg(s),n.blockedOn=l,!1;s.shift()}return!0}function q0(n,s,l){zd(n)&&l.delete(s)}function j_(){kg=!1,or!==null&&zd(or)&&(or=null),lr!==null&&zd(lr)&&(lr=null),ur!==null&&zd(ur)&&(ur=null),Bu.forEach(q0),ju.forEach(q0)}function Vu(n,s){n.blockedOn===s&&(n.blockedOn=null,kg||(kg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,j_)))}function Wu(n){function s(m){return Vu(m,n)}if(0<$d.length){Vu($d[0],n);for(var l=1;l<$d.length;l++){var f=$d[l];f.blockedOn===n&&(f.blockedOn=null)}}for(or!==null&&Vu(or,n),lr!==null&&Vu(lr,n),ur!==null&&Vu(ur,n),Bu.forEach(s),ju.forEach(s),l=0;l<cr.length;l++)f=cr[l],f.blockedOn===n&&(f.blockedOn=null);for(;0<cr.length&&(l=cr[0],l.blockedOn===null);)X0(l),l.blockedOn===null&&cr.shift()}var Uo=D.ReactCurrentBatchConfig,Hd=!0;function U_(n,s,l,f){var m=We,v=Uo.transition;Uo.transition=null;try{We=1,Tg(n,s,l,f)}finally{We=m,Uo.transition=v}}function V_(n,s,l,f){var m=We,v=Uo.transition;Uo.transition=null;try{We=4,Tg(n,s,l,f)}finally{We=m,Uo.transition=v}}function Tg(n,s,l,f){if(Hd){var m=Pg(n,s,l,f);if(m===null)Gg(n,s,f,Bd,l),G0(n,f);else if(B_(m,n,s,l,f))f.stopPropagation();else if(G0(n,f),s&4&&-1<H_.indexOf(n)){for(;m!==null;){var v=ic(m);if(v!==null&&j0(v),v=Pg(n,s,l,f),v===null&&Gg(n,s,f,Bd,l),v===m)break;m=v}m!==null&&f.stopPropagation()}else Gg(n,s,f,null,l)}}var Bd=null;function Pg(n,s,l,f){if(Bd=null,n=yg(f),n=da(n),n!==null)if(s=ha(n),s===null)n=null;else if(l=s.tag,l===13){if(n=M0(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Bd=n,null}function Y0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L_()){case Sg:return 1;case $0:return 4;case Id:case M_:return 16;case z0:return 536870912;default:return 16}default:return 16}}var hr=null,Rg=null,jd=null;function K0(){if(jd)return jd;var n,s=Rg,l=s.length,f,m="value"in hr?hr.value:hr.textContent,v=m.length;for(n=0;n<l&&s[n]===m[n];n++);var _=l-n;for(f=1;f<=_&&s[l-f]===m[v-f];f++);return jd=m.slice(n,1<f?1-f:void 0)}function Ud(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Vd(){return!0}function Q0(){return!1}function Nn(n){function s(l,f,m,v,_){this._reactName=l,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=_,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(l=n[P],this[P]=l?l(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Vd:Q0,this.isPropagationStopped=Q0,this}return Q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),s}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=Nn(Vo),Gu=Q({},Vo,{view:0,detail:0}),W_=Nn(Gu),Mg,Ig,Xu,Wd=Q({},Gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xu&&(Xu&&n.type==="mousemove"?(Mg=n.screenX-Xu.screenX,Ig=n.screenY-Xu.screenY):Ig=Mg=0,Xu=n),Mg)},movementY:function(n){return"movementY"in n?n.movementY:Ig}}),J0=Nn(Wd),G_=Q({},Wd,{dataTransfer:0}),X_=Nn(G_),q_=Q({},Gu,{relatedTarget:0}),Ng=Nn(q_),Y_=Q({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),K_=Nn(Y_),Q_=Q({},Vo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),J_=Nn(Q_),Z_=Q({},Vo,{data:0}),Z0=Nn(Z_),eE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iE(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=nE[n])?!!s[n]:!1}function Dg(){return iE}var sE=Q({},Gu,{key:function(n){if(n.key){var s=eE[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ud(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tE[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dg,charCode:function(n){return n.type==="keypress"?Ud(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ud(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rE=Nn(sE),aE=Q({},Wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ew=Nn(aE),oE=Q({},Gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dg}),lE=Nn(oE),uE=Q({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),cE=Nn(uE),hE=Q({},Wd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dE=Nn(hE),fE=[9,13,27,32],Fg=h&&"CompositionEvent"in window,qu=null;h&&"documentMode"in document&&(qu=document.documentMode);var pE=h&&"TextEvent"in window&&!qu,tw=h&&(!Fg||qu&&8<qu&&11>=qu),nw=" ",iw=!1;function sw(n,s){switch(n){case"keyup":return fE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wo=!1;function gE(n,s){switch(n){case"compositionend":return rw(s);case"keypress":return s.which!==32?null:(iw=!0,nw);case"textInput":return n=s.data,n===nw&&iw?null:n;default:return null}}function mE(n,s){if(Wo)return n==="compositionend"||!Fg&&sw(n,s)?(n=K0(),jd=Rg=hr=null,Wo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return tw&&s.locale!=="ko"?null:s.data;default:return null}}var yE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aw(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!yE[n.type]:s==="textarea"}function ow(n,s,l,f){k0(f),s=Kd(s,"onChange"),0<s.length&&(l=new Lg("onChange","change",null,l,f),n.push({event:l,listeners:s}))}var Yu=null,Ku=null;function vE(n){xw(n,0)}function Gd(n){var s=Ko(n);if(g0(s))return n}function wE(n,s){if(n==="change")return s}var lw=!1;if(h){var Og;if(h){var $g="oninput"in document;if(!$g){var uw=document.createElement("div");uw.setAttribute("oninput","return;"),$g=typeof uw.oninput=="function"}Og=$g}else Og=!1;lw=Og&&(!document.documentMode||9<document.documentMode)}function cw(){Yu&&(Yu.detachEvent("onpropertychange",hw),Ku=Yu=null)}function hw(n){if(n.propertyName==="value"&&Gd(Ku)){var s=[];ow(s,Ku,n,yg(n)),L0(vE,s)}}function AE(n,s,l){n==="focusin"?(cw(),Yu=s,Ku=l,Yu.attachEvent("onpropertychange",hw)):n==="focusout"&&cw()}function bE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gd(Ku)}function SE(n,s){if(n==="click")return Gd(s)}function _E(n,s){if(n==="input"||n==="change")return Gd(s)}function EE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var vi=typeof Object.is=="function"?Object.is:EE;function Qu(n,s){if(vi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),f=Object.keys(s);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var m=l[f];if(!d.call(s,m)||!vi(n[m],s[m]))return!1}return!0}function dw(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function fw(n,s){var l=dw(n);n=0;for(var f;l;){if(l.nodeType===3){if(f=n+l.textContent.length,n<=s&&f>=s)return{node:l,offset:s-n};n=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dw(l)}}function pw(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?pw(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function gw(){for(var n=window,s=Pd();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Pd(n.document)}return s}function zg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function xE(n){var s=gw(),l=n.focusedElem,f=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&pw(l.ownerDocument.documentElement,l)){if(f!==null&&zg(l)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var m=l.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!n.extend&&v>f&&(m=f,f=v,v=m),m=fw(l,v);var _=fw(l,f);m&&_&&(n.rangeCount!==1||n.anchorNode!==m.node||n.anchorOffset!==m.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),n.removeAllRanges(),v>f?(n.addRange(s),n.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var CE=h&&"documentMode"in document&&11>=document.documentMode,Go=null,Hg=null,Ju=null,Bg=!1;function mw(n,s,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bg||Go==null||Go!==Pd(f)||(f=Go,"selectionStart"in f&&zg(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ju&&Qu(Ju,f)||(Ju=f,f=Kd(Hg,"onSelect"),0<f.length&&(s=new Lg("onSelect","select",null,s,l),n.push({event:s,listeners:f}),s.target=Go)))}function Xd(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Xo={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},jg={},yw={};h&&(yw=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function qd(n){if(jg[n])return jg[n];if(!Xo[n])return n;var s=Xo[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in yw)return jg[n]=s[l];return n}var vw=qd("animationend"),ww=qd("animationiteration"),Aw=qd("animationstart"),bw=qd("transitionend"),Sw=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(n,s){Sw.set(n,s),a(s,[n])}for(var Ug=0;Ug<_w.length;Ug++){var Vg=_w[Ug],kE=Vg.toLowerCase(),TE=Vg[0].toUpperCase()+Vg.slice(1);dr(kE,"on"+TE)}dr(vw,"onAnimationEnd"),dr(ww,"onAnimationIteration"),dr(Aw,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(bw,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zu));function Ew(n,s,l){var f=n.type||"unknown-event";n.currentTarget=l,k_(f,s,void 0,n),n.currentTarget=null}function xw(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var f=n[l],m=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var _=f.length-1;0<=_;_--){var P=f[_],L=P.instance,z=P.currentTarget;if(P=P.listener,L!==v&&m.isPropagationStopped())break e;Ew(m,P,z),v=L}else for(_=0;_<f.length;_++){if(P=f[_],L=P.instance,z=P.currentTarget,P=P.listener,L!==v&&m.isPropagationStopped())break e;Ew(m,P,z),v=L}}}if(Md)throw n=bg,Md=!1,bg=null,n}function et(n,s){var l=s[Jg];l===void 0&&(l=s[Jg]=new Set);var f=n+"__bubble";l.has(f)||(Cw(s,n,2,!1),l.add(f))}function Wg(n,s,l){var f=0;s&&(f|=4),Cw(l,n,f,s)}var Yd="_reactListening"+Math.random().toString(36).slice(2);function ec(n){if(!n[Yd]){n[Yd]=!0,i.forEach(function(l){l!=="selectionchange"&&(PE.has(l)||Wg(l,!1,n),Wg(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Yd]||(s[Yd]=!0,Wg("selectionchange",!1,s))}}function Cw(n,s,l,f){switch(Y0(s)){case 1:var m=U_;break;case 4:m=V_;break;default:m=Tg}l=m.bind(null,s,l,n),m=void 0,!Ag||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),f?m!==void 0?n.addEventListener(s,l,{capture:!0,passive:m}):n.addEventListener(s,l,!0):m!==void 0?n.addEventListener(s,l,{passive:m}):n.addEventListener(s,l,!1)}function Gg(n,s,l,f,m){var v=f;if(!(s&1)&&!(s&2)&&f!==null)e:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var P=f.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(_===4)for(_=f.return;_!==null;){var L=_.tag;if((L===3||L===4)&&(L=_.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;_=_.return}for(;P!==null;){if(_=da(P),_===null)return;if(L=_.tag,L===5||L===6){f=v=_;continue e}P=P.parentNode}}f=f.return}L0(function(){var z=v,G=yg(l),q=[];e:{var W=Sw.get(n);if(W!==void 0){var ie=Lg,ce=n;switch(n){case"keypress":if(Ud(l)===0)break e;case"keydown":case"keyup":ie=rE;break;case"focusin":ce="focus",ie=Ng;break;case"focusout":ce="blur",ie=Ng;break;case"beforeblur":case"afterblur":ie=Ng;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=J0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=X_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=lE;break;case vw:case ww:case Aw:ie=K_;break;case bw:ie=cE;break;case"scroll":ie=W_;break;case"wheel":ie=dE;break;case"copy":case"cut":case"paste":ie=J_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ew}var he=(s&4)!==0,mt=!he&&n==="scroll",F=he?W!==null?W+"Capture":null:W;he=[];for(var I=z,O;I!==null;){O=I;var Y=O.stateNode;if(O.tag===5&&Y!==null&&(O=Y,F!==null&&(Y=Fu(I,F),Y!=null&&he.push(tc(I,Y,O)))),mt)break;I=I.return}0<he.length&&(W=new ie(W,ce,null,l,G),q.push({event:W,listeners:he}))}}if(!(s&7)){e:{if(W=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",W&&l!==mg&&(ce=l.relatedTarget||l.fromElement)&&(da(ce)||ce[ms]))break e;if((ie||W)&&(W=G.window===G?G:(W=G.ownerDocument)?W.defaultView||W.parentWindow:window,ie?(ce=l.relatedTarget||l.toElement,ie=z,ce=ce?da(ce):null,ce!==null&&(mt=ha(ce),ce!==mt||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(ie=null,ce=z),ie!==ce)){if(he=J0,Y="onMouseLeave",F="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(he=ew,Y="onPointerLeave",F="onPointerEnter",I="pointer"),mt=ie==null?W:Ko(ie),O=ce==null?W:Ko(ce),W=new he(Y,I+"leave",ie,l,G),W.target=mt,W.relatedTarget=O,Y=null,da(G)===z&&(he=new he(F,I+"enter",ce,l,G),he.target=O,he.relatedTarget=mt,Y=he),mt=Y,ie&&ce)t:{for(he=ie,F=ce,I=0,O=he;O;O=qo(O))I++;for(O=0,Y=F;Y;Y=qo(Y))O++;for(;0<I-O;)he=qo(he),I--;for(;0<O-I;)F=qo(F),O--;for(;I--;){if(he===F||F!==null&&he===F.alternate)break t;he=qo(he),F=qo(F)}he=null}else he=null;ie!==null&&kw(q,W,ie,he,!1),ce!==null&&mt!==null&&kw(q,mt,ce,he,!0)}}e:{if(W=z?Ko(z):window,ie=W.nodeName&&W.nodeName.toLowerCase(),ie==="select"||ie==="input"&&W.type==="file")var fe=wE;else if(aw(W))if(lw)fe=_E;else{fe=bE;var we=AE}else(ie=W.nodeName)&&ie.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(fe=SE);if(fe&&(fe=fe(n,z))){ow(q,fe,l,G);break e}we&&we(n,W,z),n==="focusout"&&(we=W._wrapperState)&&we.controlled&&W.type==="number"&&hg(W,"number",W.value)}switch(we=z?Ko(z):window,n){case"focusin":(aw(we)||we.contentEditable==="true")&&(Go=we,Hg=z,Ju=null);break;case"focusout":Ju=Hg=Go=null;break;case"mousedown":Bg=!0;break;case"contextmenu":case"mouseup":case"dragend":Bg=!1,mw(q,l,G);break;case"selectionchange":if(CE)break;case"keydown":case"keyup":mw(q,l,G)}var Ae;if(Fg)e:{switch(n){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Wo?sw(n,l)&&(xe="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(xe="onCompositionStart");xe&&(tw&&l.locale!=="ko"&&(Wo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Wo&&(Ae=K0()):(hr=G,Rg="value"in hr?hr.value:hr.textContent,Wo=!0)),we=Kd(z,xe),0<we.length&&(xe=new Z0(xe,n,null,l,G),q.push({event:xe,listeners:we}),Ae?xe.data=Ae:(Ae=rw(l),Ae!==null&&(xe.data=Ae)))),(Ae=pE?gE(n,l):mE(n,l))&&(z=Kd(z,"onBeforeInput"),0<z.length&&(G=new Z0("onBeforeInput","beforeinput",null,l,G),q.push({event:G,listeners:z}),G.data=Ae))}xw(q,s)})}function tc(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Kd(n,s){for(var l=s+"Capture",f=[];n!==null;){var m=n,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=Fu(n,l),v!=null&&f.unshift(tc(n,v,m)),v=Fu(n,s),v!=null&&f.push(tc(n,v,m))),n=n.return}return f}function qo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function kw(n,s,l,f,m){for(var v=s._reactName,_=[];l!==null&&l!==f;){var P=l,L=P.alternate,z=P.stateNode;if(L!==null&&L===f)break;P.tag===5&&z!==null&&(P=z,m?(L=Fu(l,v),L!=null&&_.unshift(tc(l,L,P))):m||(L=Fu(l,v),L!=null&&_.push(tc(l,L,P)))),l=l.return}_.length!==0&&n.push({event:s,listeners:_})}var RE=/\r\n?/g,LE=/\u0000|\uFFFD/g;function Tw(n){return(typeof n=="string"?n:""+n).replace(RE,`
`).replace(LE,"")}function Qd(n,s,l){if(s=Tw(s),Tw(n)!==s&&l)throw Error(t(425))}function Jd(){}var Xg=null,qg=null;function Yg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kg=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,Pw=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof Pw<"u"?function(n){return Pw.resolve(null).then(n).catch(NE)}:Kg;function NE(n){setTimeout(function(){throw n})}function Qg(n,s){var l=s,f=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"){if(f===0){n.removeChild(m),Wu(s);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=m}while(l);Wu(s)}function fr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Rw(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Yo=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Yo,nc="__reactProps$"+Yo,ms="__reactContainer$"+Yo,Jg="__reactEvents$"+Yo,DE="__reactListeners$"+Yo,FE="__reactHandles$"+Yo;function da(n){var s=n[Vi];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ms]||l[Vi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Rw(n);n!==null;){if(l=n[Vi])return l;n=Rw(n)}return s}n=l,l=n.parentNode}return null}function ic(n){return n=n[Vi]||n[ms],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ko(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Zd(n){return n[nc]||null}var Zg=[],Qo=-1;function pr(n){return{current:n}}function tt(n){0>Qo||(n.current=Zg[Qo],Zg[Qo]=null,Qo--)}function Je(n,s){Qo++,Zg[Qo]=n.current,n.current=s}var gr={},Yt=pr(gr),bn=pr(!1),fa=gr;function Jo(n,s){var l=n.type.contextTypes;if(!l)return gr;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in l)m[v]=s[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=m),m}function Sn(n){return n=n.childContextTypes,n!=null}function ef(){tt(bn),tt(Yt)}function Lw(n,s,l){if(Yt.current!==gr)throw Error(t(168));Je(Yt,s),Je(bn,l)}function Mw(n,s,l){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var m in f)if(!(m in s))throw Error(t(108,be(n)||"Unknown",m));return Q({},l,f)}function tf(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||gr,fa=Yt.current,Je(Yt,n),Je(bn,bn.current),!0}function Iw(n,s,l){var f=n.stateNode;if(!f)throw Error(t(169));l?(n=Mw(n,s,fa),f.__reactInternalMemoizedMergedChildContext=n,tt(bn),tt(Yt),Je(Yt,n)):tt(bn),Je(bn,l)}var ys=null,nf=!1,em=!1;function Nw(n){ys===null?ys=[n]:ys.push(n)}function OE(n){nf=!0,Nw(n)}function mr(){if(!em&&ys!==null){em=!0;var n=0,s=We;try{var l=ys;for(We=1;n<l.length;n++){var f=l[n];do f=f(!0);while(f!==null)}ys=null,nf=!1}catch(m){throw ys!==null&&(ys=ys.slice(n+1)),F0(Sg,mr),m}finally{We=s,em=!1}}return null}var Zo=[],el=0,sf=null,rf=0,ei=[],ti=0,pa=null,vs=1,ws="";function ga(n,s){Zo[el++]=rf,Zo[el++]=sf,sf=n,rf=s}function Dw(n,s,l){ei[ti++]=vs,ei[ti++]=ws,ei[ti++]=pa,pa=n;var f=vs;n=ws;var m=32-yi(f)-1;f&=~(1<<m),l+=1;var v=32-yi(s)+m;if(30<v){var _=m-m%5;v=(f&(1<<_)-1).toString(32),f>>=_,m-=_,vs=1<<32-yi(s)+m|l<<m|f,ws=v+n}else vs=1<<v|l<<m|f,ws=n}function tm(n){n.return!==null&&(ga(n,1),Dw(n,1,0))}function nm(n){for(;n===sf;)sf=Zo[--el],Zo[el]=null,rf=Zo[--el],Zo[el]=null;for(;n===pa;)pa=ei[--ti],ei[ti]=null,ws=ei[--ti],ei[ti]=null,vs=ei[--ti],ei[ti]=null}var Dn=null,Fn=null,it=!1,wi=null;function Fw(n,s){var l=ri(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function Ow(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Dn=n,Fn=fr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Dn=n,Fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=pa!==null?{id:vs,overflow:ws}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ri(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Dn=n,Fn=null,!0):!1;default:return!1}}function im(n){return(n.mode&1)!==0&&(n.flags&128)===0}function sm(n){if(it){var s=Fn;if(s){var l=s;if(!Ow(n,s)){if(im(n))throw Error(t(418));s=fr(l.nextSibling);var f=Dn;s&&Ow(n,s)?Fw(f,l):(n.flags=n.flags&-4097|2,it=!1,Dn=n)}}else{if(im(n))throw Error(t(418));n.flags=n.flags&-4097|2,it=!1,Dn=n}}}function $w(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Dn=n}function af(n){if(n!==Dn)return!1;if(!it)return $w(n),it=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Yg(n.type,n.memoizedProps)),s&&(s=Fn)){if(im(n))throw zw(),Error(t(418));for(;s;)Fw(n,s),s=fr(s.nextSibling)}if($w(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Fn=fr(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Fn=null}}else Fn=Dn?fr(n.stateNode.nextSibling):null;return!0}function zw(){for(var n=Fn;n;)n=fr(n.nextSibling)}function tl(){Fn=Dn=null,it=!1}function rm(n){wi===null?wi=[n]:wi.push(n)}var $E=D.ReactCurrentBatchConfig;function sc(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,n));var m=f,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(_){var P=m.refs;_===null?delete P[v]:P[v]=_},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,n))}return n}function of(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Hw(n){var s=n._init;return s(n._payload)}function Bw(n){function s(F,I){if(n){var O=F.deletions;O===null?(F.deletions=[I],F.flags|=16):O.push(I)}}function l(F,I){if(!n)return null;for(;I!==null;)s(F,I),I=I.sibling;return null}function f(F,I){for(F=new Map;I!==null;)I.key!==null?F.set(I.key,I):F.set(I.index,I),I=I.sibling;return F}function m(F,I){return F=Er(F,I),F.index=0,F.sibling=null,F}function v(F,I,O){return F.index=O,n?(O=F.alternate,O!==null?(O=O.index,O<I?(F.flags|=2,I):O):(F.flags|=2,I)):(F.flags|=1048576,I)}function _(F){return n&&F.alternate===null&&(F.flags|=2),F}function P(F,I,O,Y){return I===null||I.tag!==6?(I=Km(O,F.mode,Y),I.return=F,I):(I=m(I,O),I.return=F,I)}function L(F,I,O,Y){var fe=O.type;return fe===B?G(F,I,O.props.children,Y,O.key):I!==null&&(I.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&Hw(fe)===I.type)?(Y=m(I,O.props),Y.ref=sc(F,I,O),Y.return=F,Y):(Y=Lf(O.type,O.key,O.props,null,F.mode,Y),Y.ref=sc(F,I,O),Y.return=F,Y)}function z(F,I,O,Y){return I===null||I.tag!==4||I.stateNode.containerInfo!==O.containerInfo||I.stateNode.implementation!==O.implementation?(I=Qm(O,F.mode,Y),I.return=F,I):(I=m(I,O.children||[]),I.return=F,I)}function G(F,I,O,Y,fe){return I===null||I.tag!==7?(I=_a(O,F.mode,Y,fe),I.return=F,I):(I=m(I,O),I.return=F,I)}function q(F,I,O){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Km(""+I,F.mode,O),I.return=F,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case $:return O=Lf(I.type,I.key,I.props,null,F.mode,O),O.ref=sc(F,null,I),O.return=F,O;case j:return I=Qm(I,F.mode,O),I.return=F,I;case X:var Y=I._init;return q(F,Y(I._payload),O)}if(Iu(I)||ne(I))return I=_a(I,F.mode,O,null),I.return=F,I;of(F,I)}return null}function W(F,I,O,Y){var fe=I!==null?I.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return fe!==null?null:P(F,I,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case $:return O.key===fe?L(F,I,O,Y):null;case j:return O.key===fe?z(F,I,O,Y):null;case X:return fe=O._init,W(F,I,fe(O._payload),Y)}if(Iu(O)||ne(O))return fe!==null?null:G(F,I,O,Y,null);of(F,O)}return null}function ie(F,I,O,Y,fe){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return F=F.get(O)||null,P(I,F,""+Y,fe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case $:return F=F.get(Y.key===null?O:Y.key)||null,L(I,F,Y,fe);case j:return F=F.get(Y.key===null?O:Y.key)||null,z(I,F,Y,fe);case X:var we=Y._init;return ie(F,I,O,we(Y._payload),fe)}if(Iu(Y)||ne(Y))return F=F.get(O)||null,G(I,F,Y,fe,null);of(I,Y)}return null}function ce(F,I,O,Y){for(var fe=null,we=null,Ae=I,xe=I=0,Nt=null;Ae!==null&&xe<O.length;xe++){Ae.index>xe?(Nt=Ae,Ae=null):Nt=Ae.sibling;var je=W(F,Ae,O[xe],Y);if(je===null){Ae===null&&(Ae=Nt);break}n&&Ae&&je.alternate===null&&s(F,Ae),I=v(je,I,xe),we===null?fe=je:we.sibling=je,we=je,Ae=Nt}if(xe===O.length)return l(F,Ae),it&&ga(F,xe),fe;if(Ae===null){for(;xe<O.length;xe++)Ae=q(F,O[xe],Y),Ae!==null&&(I=v(Ae,I,xe),we===null?fe=Ae:we.sibling=Ae,we=Ae);return it&&ga(F,xe),fe}for(Ae=f(F,Ae);xe<O.length;xe++)Nt=ie(Ae,F,xe,O[xe],Y),Nt!==null&&(n&&Nt.alternate!==null&&Ae.delete(Nt.key===null?xe:Nt.key),I=v(Nt,I,xe),we===null?fe=Nt:we.sibling=Nt,we=Nt);return n&&Ae.forEach(function(xr){return s(F,xr)}),it&&ga(F,xe),fe}function he(F,I,O,Y){var fe=ne(O);if(typeof fe!="function")throw Error(t(150));if(O=fe.call(O),O==null)throw Error(t(151));for(var we=fe=null,Ae=I,xe=I=0,Nt=null,je=O.next();Ae!==null&&!je.done;xe++,je=O.next()){Ae.index>xe?(Nt=Ae,Ae=null):Nt=Ae.sibling;var xr=W(F,Ae,je.value,Y);if(xr===null){Ae===null&&(Ae=Nt);break}n&&Ae&&xr.alternate===null&&s(F,Ae),I=v(xr,I,xe),we===null?fe=xr:we.sibling=xr,we=xr,Ae=Nt}if(je.done)return l(F,Ae),it&&ga(F,xe),fe;if(Ae===null){for(;!je.done;xe++,je=O.next())je=q(F,je.value,Y),je!==null&&(I=v(je,I,xe),we===null?fe=je:we.sibling=je,we=je);return it&&ga(F,xe),fe}for(Ae=f(F,Ae);!je.done;xe++,je=O.next())je=ie(Ae,F,xe,je.value,Y),je!==null&&(n&&je.alternate!==null&&Ae.delete(je.key===null?xe:je.key),I=v(je,I,xe),we===null?fe=je:we.sibling=je,we=je);return n&&Ae.forEach(function(mx){return s(F,mx)}),it&&ga(F,xe),fe}function mt(F,I,O,Y){if(typeof O=="object"&&O!==null&&O.type===B&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case $:e:{for(var fe=O.key,we=I;we!==null;){if(we.key===fe){if(fe=O.type,fe===B){if(we.tag===7){l(F,we.sibling),I=m(we,O.props.children),I.return=F,F=I;break e}}else if(we.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===X&&Hw(fe)===we.type){l(F,we.sibling),I=m(we,O.props),I.ref=sc(F,we,O),I.return=F,F=I;break e}l(F,we);break}else s(F,we);we=we.sibling}O.type===B?(I=_a(O.props.children,F.mode,Y,O.key),I.return=F,F=I):(Y=Lf(O.type,O.key,O.props,null,F.mode,Y),Y.ref=sc(F,I,O),Y.return=F,F=Y)}return _(F);case j:e:{for(we=O.key;I!==null;){if(I.key===we)if(I.tag===4&&I.stateNode.containerInfo===O.containerInfo&&I.stateNode.implementation===O.implementation){l(F,I.sibling),I=m(I,O.children||[]),I.return=F,F=I;break e}else{l(F,I);break}else s(F,I);I=I.sibling}I=Qm(O,F.mode,Y),I.return=F,F=I}return _(F);case X:return we=O._init,mt(F,I,we(O._payload),Y)}if(Iu(O))return ce(F,I,O,Y);if(ne(O))return he(F,I,O,Y);of(F,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,I!==null&&I.tag===6?(l(F,I.sibling),I=m(I,O),I.return=F,F=I):(l(F,I),I=Km(O,F.mode,Y),I.return=F,F=I),_(F)):l(F,I)}return mt}var nl=Bw(!0),jw=Bw(!1),lf=pr(null),uf=null,il=null,am=null;function om(){am=il=uf=null}function lm(n){var s=lf.current;tt(lf),n._currentValue=s}function um(n,s,l){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===l)break;n=n.return}}function sl(n,s){uf=n,am=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(_n=!0),n.firstContext=null)}function ni(n){var s=n._currentValue;if(am!==n)if(n={context:n,memoizedValue:s,next:null},il===null){if(uf===null)throw Error(t(308));il=n,uf.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return s}var ma=null;function cm(n){ma===null?ma=[n]:ma.push(n)}function Uw(n,s,l,f){var m=s.interleaved;return m===null?(l.next=l,cm(s)):(l.next=m.next,m.next=l),s.interleaved=l,As(n,f)}function As(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var yr=!1;function hm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vw(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function bs(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function vr(n,s,l){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,He&2){var m=f.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),f.pending=s,As(n,l)}return m=f.interleaved,m===null?(s.next=s,cm(f)):(s.next=m.next,m.next=s),f.interleaved=s,As(n,l)}function cf(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,l|=f,s.lanes=l,xg(n,l)}}function Ww(n,s){var l=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var m=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var _={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};v===null?m=v=_:v=v.next=_,l=l.next}while(l!==null);v===null?m=v=s:v=v.next=s}else m=v=s;l={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function hf(n,s,l,f){var m=n.updateQueue;yr=!1;var v=m.firstBaseUpdate,_=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var L=P,z=L.next;L.next=null,_===null?v=z:_.next=z,_=L;var G=n.alternate;G!==null&&(G=G.updateQueue,P=G.lastBaseUpdate,P!==_&&(P===null?G.firstBaseUpdate=z:P.next=z,G.lastBaseUpdate=L))}if(v!==null){var q=m.baseState;_=0,G=z=L=null,P=v;do{var W=P.lane,ie=P.eventTime;if((f&W)===W){G!==null&&(G=G.next={eventTime:ie,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ce=n,he=P;switch(W=s,ie=l,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){q=ce.call(ie,q,W);break e}q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,W=typeof ce=="function"?ce.call(ie,q,W):ce,W==null)break e;q=Q({},q,W);break e;case 2:yr=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,W=m.effects,W===null?m.effects=[P]:W.push(P))}else ie={eventTime:ie,lane:W,tag:P.tag,payload:P.payload,callback:P.callback,next:null},G===null?(z=G=ie,L=q):G=G.next=ie,_|=W;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;W=P,P=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);if(G===null&&(L=q),m.baseState=L,m.firstBaseUpdate=z,m.lastBaseUpdate=G,s=m.shared.interleaved,s!==null){m=s;do _|=m.lane,m=m.next;while(m!==s)}else v===null&&(m.shared.lanes=0);wa|=_,n.lanes=_,n.memoizedState=q}}function Gw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],m=f.callback;if(m!==null){if(f.callback=null,f=l,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var rc={},Wi=pr(rc),ac=pr(rc),oc=pr(rc);function ya(n){if(n===rc)throw Error(t(174));return n}function dm(n,s){switch(Je(oc,s),Je(ac,n),Je(Wi,rc),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:fg(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=fg(s,n)}tt(Wi),Je(Wi,s)}function rl(){tt(Wi),tt(ac),tt(oc)}function Xw(n){ya(oc.current);var s=ya(Wi.current),l=fg(s,n.type);s!==l&&(Je(ac,n),Je(Wi,l))}function fm(n){ac.current===n&&(tt(Wi),tt(ac))}var lt=pr(0);function df(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pm=[];function gm(){for(var n=0;n<pm.length;n++)pm[n]._workInProgressVersionPrimary=null;pm.length=0}var ff=D.ReactCurrentDispatcher,mm=D.ReactCurrentBatchConfig,va=0,ut=null,xt=null,Mt=null,pf=!1,lc=!1,uc=0,zE=0;function Kt(){throw Error(t(321))}function ym(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!vi(n[l],s[l]))return!1;return!0}function vm(n,s,l,f,m,v){if(va=v,ut=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ff.current=n===null||n.memoizedState===null?UE:VE,n=l(f,m),lc){v=0;do{if(lc=!1,uc=0,25<=v)throw Error(t(301));v+=1,Mt=xt=null,s.updateQueue=null,ff.current=WE,n=l(f,m)}while(lc)}if(ff.current=yf,s=xt!==null&&xt.next!==null,va=0,Mt=xt=ut=null,pf=!1,s)throw Error(t(300));return n}function wm(){var n=uc!==0;return uc=0,n}function Gi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ut.memoizedState=Mt=n:Mt=Mt.next=n,Mt}function ii(){if(xt===null){var n=ut.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var s=Mt===null?ut.memoizedState:Mt.next;if(s!==null)Mt=s,xt=n;else{if(n===null)throw Error(t(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Mt===null?ut.memoizedState=Mt=n:Mt=Mt.next=n}return Mt}function cc(n,s){return typeof s=="function"?s(n):s}function Am(n){var s=ii(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var f=xt,m=f.baseQueue,v=l.pending;if(v!==null){if(m!==null){var _=m.next;m.next=v.next,v.next=_}f.baseQueue=m=v,l.pending=null}if(m!==null){v=m.next,f=f.baseState;var P=_=null,L=null,z=v;do{var G=z.lane;if((va&G)===G)L!==null&&(L=L.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),f=z.hasEagerState?z.eagerState:n(f,z.action);else{var q={lane:G,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};L===null?(P=L=q,_=f):L=L.next=q,ut.lanes|=G,wa|=G}z=z.next}while(z!==null&&z!==v);L===null?_=f:L.next=P,vi(f,s.memoizedState)||(_n=!0),s.memoizedState=f,s.baseState=_,s.baseQueue=L,l.lastRenderedState=f}if(n=l.interleaved,n!==null){m=n;do v=m.lane,ut.lanes|=v,wa|=v,m=m.next;while(m!==n)}else m===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function bm(n){var s=ii(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=n;var f=l.dispatch,m=l.pending,v=s.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do v=n(v,_.action),_=_.next;while(_!==m);vi(v,s.memoizedState)||(_n=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,f]}function qw(){}function Yw(n,s){var l=ut,f=ii(),m=s(),v=!vi(f.memoizedState,m);if(v&&(f.memoizedState=m,_n=!0),f=f.queue,Sm(Jw.bind(null,l,f,n),[n]),f.getSnapshot!==s||v||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,hc(9,Qw.bind(null,l,f,m,s),void 0,null),It===null)throw Error(t(349));va&30||Kw(l,s,m)}return m}function Kw(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function Qw(n,s,l,f){s.value=l,s.getSnapshot=f,Zw(s)&&eA(n)}function Jw(n,s,l){return l(function(){Zw(s)&&eA(n)})}function Zw(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!vi(n,l)}catch{return!0}}function eA(n){var s=As(n,1);s!==null&&_i(s,n,1,-1)}function tA(n){var s=Gi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cc,lastRenderedState:n},s.queue=n,n=n.dispatch=jE.bind(null,ut,n),[s.memoizedState,n]}function hc(n,s,l,f){return n={tag:n,create:s,destroy:l,deps:f,next:null},s=ut.updateQueue,s===null?(s={lastEffect:null,stores:null},ut.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(f=l.next,l.next=n,n.next=f,s.lastEffect=n)),n}function nA(){return ii().memoizedState}function gf(n,s,l,f){var m=Gi();ut.flags|=n,m.memoizedState=hc(1|s,l,void 0,f===void 0?null:f)}function mf(n,s,l,f){var m=ii();f=f===void 0?null:f;var v=void 0;if(xt!==null){var _=xt.memoizedState;if(v=_.destroy,f!==null&&ym(f,_.deps)){m.memoizedState=hc(s,l,v,f);return}}ut.flags|=n,m.memoizedState=hc(1|s,l,v,f)}function iA(n,s){return gf(8390656,8,n,s)}function Sm(n,s){return mf(2048,8,n,s)}function sA(n,s){return mf(4,2,n,s)}function rA(n,s){return mf(4,4,n,s)}function aA(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function oA(n,s,l){return l=l!=null?l.concat([n]):null,mf(4,4,aA.bind(null,s,n),l)}function _m(){}function lA(n,s){var l=ii();s=s===void 0?null:s;var f=l.memoizedState;return f!==null&&s!==null&&ym(s,f[1])?f[0]:(l.memoizedState=[n,s],n)}function uA(n,s){var l=ii();s=s===void 0?null:s;var f=l.memoizedState;return f!==null&&s!==null&&ym(s,f[1])?f[0]:(n=n(),l.memoizedState=[n,s],n)}function cA(n,s,l){return va&21?(vi(l,s)||(l=H0(),ut.lanes|=l,wa|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,_n=!0),n.memoizedState=l)}function HE(n,s){var l=We;We=l!==0&&4>l?l:4,n(!0);var f=mm.transition;mm.transition={};try{n(!1),s()}finally{We=l,mm.transition=f}}function hA(){return ii().memoizedState}function BE(n,s,l){var f=Sr(n);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},dA(n))fA(s,l);else if(l=Uw(n,s,l,f),l!==null){var m=hn();_i(l,n,f,m),pA(l,s,f)}}function jE(n,s,l){var f=Sr(n),m={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(dA(n))fA(s,m);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var _=s.lastRenderedState,P=v(_,l);if(m.hasEagerState=!0,m.eagerState=P,vi(P,_)){var L=s.interleaved;L===null?(m.next=m,cm(s)):(m.next=L.next,L.next=m),s.interleaved=m;return}}catch{}finally{}l=Uw(n,s,m,f),l!==null&&(m=hn(),_i(l,n,f,m),pA(l,s,f))}}function dA(n){var s=n.alternate;return n===ut||s!==null&&s===ut}function fA(n,s){lc=pf=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function pA(n,s,l){if(l&4194240){var f=s.lanes;f&=n.pendingLanes,l|=f,s.lanes=l,xg(n,l)}}var yf={readContext:ni,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},UE={readContext:ni,useCallback:function(n,s){return Gi().memoizedState=[n,s===void 0?null:s],n},useContext:ni,useEffect:iA,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,gf(4194308,4,aA.bind(null,s,n),l)},useLayoutEffect:function(n,s){return gf(4194308,4,n,s)},useInsertionEffect:function(n,s){return gf(4,2,n,s)},useMemo:function(n,s){var l=Gi();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var f=Gi();return s=l!==void 0?l(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=BE.bind(null,ut,n),[f.memoizedState,n]},useRef:function(n){var s=Gi();return n={current:n},s.memoizedState=n},useState:tA,useDebugValue:_m,useDeferredValue:function(n){return Gi().memoizedState=n},useTransition:function(){var n=tA(!1),s=n[0];return n=HE.bind(null,n[1]),Gi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var f=ut,m=Gi();if(it){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),It===null)throw Error(t(349));va&30||Kw(f,s,l)}m.memoizedState=l;var v={value:l,getSnapshot:s};return m.queue=v,iA(Jw.bind(null,f,v,n),[n]),f.flags|=2048,hc(9,Qw.bind(null,f,v,l,s),void 0,null),l},useId:function(){var n=Gi(),s=It.identifierPrefix;if(it){var l=ws,f=vs;l=(f&~(1<<32-yi(f)-1)).toString(32)+l,s=":"+s+"R"+l,l=uc++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=zE++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},VE={readContext:ni,useCallback:lA,useContext:ni,useEffect:Sm,useImperativeHandle:oA,useInsertionEffect:sA,useLayoutEffect:rA,useMemo:uA,useReducer:Am,useRef:nA,useState:function(){return Am(cc)},useDebugValue:_m,useDeferredValue:function(n){var s=ii();return cA(s,xt.memoizedState,n)},useTransition:function(){var n=Am(cc)[0],s=ii().memoizedState;return[n,s]},useMutableSource:qw,useSyncExternalStore:Yw,useId:hA,unstable_isNewReconciler:!1},WE={readContext:ni,useCallback:lA,useContext:ni,useEffect:Sm,useImperativeHandle:oA,useInsertionEffect:sA,useLayoutEffect:rA,useMemo:uA,useReducer:bm,useRef:nA,useState:function(){return bm(cc)},useDebugValue:_m,useDeferredValue:function(n){var s=ii();return xt===null?s.memoizedState=n:cA(s,xt.memoizedState,n)},useTransition:function(){var n=bm(cc)[0],s=ii().memoizedState;return[n,s]},useMutableSource:qw,useSyncExternalStore:Yw,useId:hA,unstable_isNewReconciler:!1};function Ai(n,s){if(n&&n.defaultProps){s=Q({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function Em(n,s,l,f){s=n.memoizedState,l=l(f,s),l=l==null?s:Q({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var vf={isMounted:function(n){return(n=n._reactInternals)?ha(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var f=hn(),m=Sr(n),v=bs(f,m);v.payload=s,l!=null&&(v.callback=l),s=vr(n,v,m),s!==null&&(_i(s,n,m,f),cf(s,n,m))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var f=hn(),m=Sr(n),v=bs(f,m);v.tag=1,v.payload=s,l!=null&&(v.callback=l),s=vr(n,v,m),s!==null&&(_i(s,n,m,f),cf(s,n,m))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=hn(),f=Sr(n),m=bs(l,f);m.tag=2,s!=null&&(m.callback=s),s=vr(n,m,f),s!==null&&(_i(s,n,f,l),cf(s,n,f))}};function gA(n,s,l,f,m,v,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,_):s.prototype&&s.prototype.isPureReactComponent?!Qu(l,f)||!Qu(m,v):!0}function mA(n,s,l){var f=!1,m=gr,v=s.contextType;return typeof v=="object"&&v!==null?v=ni(v):(m=Sn(s)?fa:Yt.current,f=s.contextTypes,v=(f=f!=null)?Jo(n,m):gr),s=new s(l,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=vf,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=m,n.__reactInternalMemoizedMaskedChildContext=v),s}function yA(n,s,l,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,f),s.state!==n&&vf.enqueueReplaceState(s,s.state,null)}function xm(n,s,l,f){var m=n.stateNode;m.props=l,m.state=n.memoizedState,m.refs={},hm(n);var v=s.contextType;typeof v=="object"&&v!==null?m.context=ni(v):(v=Sn(s)?fa:Yt.current,m.context=Jo(n,v)),m.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Em(n,s,v,l),m.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&vf.enqueueReplaceState(m,m.state,null),hf(n,l,m,f),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308)}function al(n,s){try{var l="",f=s;do l+=Ie(f),f=f.return;while(f);var m=l}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:m,digest:null}}function Cm(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function km(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var GE=typeof WeakMap=="function"?WeakMap:Map;function vA(n,s,l){l=bs(-1,l),l.tag=3,l.payload={element:null};var f=s.value;return l.callback=function(){xf||(xf=!0,jm=f),km(n,s)},l}function wA(n,s,l){l=bs(-1,l),l.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var m=s.value;l.payload=function(){return f(m)},l.callback=function(){km(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(l.callback=function(){km(n,s),typeof f!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),l}function AA(n,s,l){var f=n.pingCache;if(f===null){f=n.pingCache=new GE;var m=new Set;f.set(s,m)}else m=f.get(s),m===void 0&&(m=new Set,f.set(s,m));m.has(l)||(m.add(l),n=ax.bind(null,n,s,l),s.then(n,n))}function bA(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function SA(n,s,l,f,m){return n.mode&1?(n.flags|=65536,n.lanes=m,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=bs(-1,1),s.tag=2,vr(l,s,1))),l.lanes|=1),n)}var XE=D.ReactCurrentOwner,_n=!1;function cn(n,s,l,f){s.child=n===null?jw(s,null,l,f):nl(s,n.child,l,f)}function _A(n,s,l,f,m){l=l.render;var v=s.ref;return sl(s,m),f=vm(n,s,l,f,v,m),l=wm(),n!==null&&!_n?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,Ss(n,s,m)):(it&&l&&tm(s),s.flags|=1,cn(n,s,f,m),s.child)}function EA(n,s,l,f,m){if(n===null){var v=l.type;return typeof v=="function"&&!Ym(v)&&v.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=v,xA(n,s,v,f,m)):(n=Lf(l.type,null,f,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,!(n.lanes&m)){var _=v.memoizedProps;if(l=l.compare,l=l!==null?l:Qu,l(_,f)&&n.ref===s.ref)return Ss(n,s,m)}return s.flags|=1,n=Er(v,f),n.ref=s.ref,n.return=s,s.child=n}function xA(n,s,l,f,m){if(n!==null){var v=n.memoizedProps;if(Qu(v,f)&&n.ref===s.ref)if(_n=!1,s.pendingProps=f=v,(n.lanes&m)!==0)n.flags&131072&&(_n=!0);else return s.lanes=n.lanes,Ss(n,s,m)}return Tm(n,s,l,f,m)}function CA(n,s,l){var f=s.pendingProps,m=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(ll,On),On|=l;else{if(!(l&1073741824))return n=v!==null?v.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Je(ll,On),On|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:l,Je(ll,On),On|=f}else v!==null?(f=v.baseLanes|l,s.memoizedState=null):f=l,Je(ll,On),On|=f;return cn(n,s,m,l),s.child}function kA(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function Tm(n,s,l,f,m){var v=Sn(l)?fa:Yt.current;return v=Jo(s,v),sl(s,m),l=vm(n,s,l,f,v,m),f=wm(),n!==null&&!_n?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~m,Ss(n,s,m)):(it&&f&&tm(s),s.flags|=1,cn(n,s,l,m),s.child)}function TA(n,s,l,f,m){if(Sn(l)){var v=!0;tf(s)}else v=!1;if(sl(s,m),s.stateNode===null)Af(n,s),mA(s,l,f),xm(s,l,f,m),f=!0;else if(n===null){var _=s.stateNode,P=s.memoizedProps;_.props=P;var L=_.context,z=l.contextType;typeof z=="object"&&z!==null?z=ni(z):(z=Sn(l)?fa:Yt.current,z=Jo(s,z));var G=l.getDerivedStateFromProps,q=typeof G=="function"||typeof _.getSnapshotBeforeUpdate=="function";q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==f||L!==z)&&yA(s,_,f,z),yr=!1;var W=s.memoizedState;_.state=W,hf(s,f,_,m),L=s.memoizedState,P!==f||W!==L||bn.current||yr?(typeof G=="function"&&(Em(s,l,G,f),L=s.memoizedState),(P=yr||gA(s,l,P,f,W,L,z))?(q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=L),_.props=f,_.state=L,_.context=z,f=P):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{_=s.stateNode,Vw(n,s),P=s.memoizedProps,z=s.type===s.elementType?P:Ai(s.type,P),_.props=z,q=s.pendingProps,W=_.context,L=l.contextType,typeof L=="object"&&L!==null?L=ni(L):(L=Sn(l)?fa:Yt.current,L=Jo(s,L));var ie=l.getDerivedStateFromProps;(G=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(P!==q||W!==L)&&yA(s,_,f,L),yr=!1,W=s.memoizedState,_.state=W,hf(s,f,_,m);var ce=s.memoizedState;P!==q||W!==ce||bn.current||yr?(typeof ie=="function"&&(Em(s,l,ie,f),ce=s.memoizedState),(z=yr||gA(s,l,z,f,W,ce,L)||!1)?(G||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(f,ce,L),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(f,ce,L)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=ce),_.props=f,_.state=ce,_.context=L,f=z):(typeof _.componentDidUpdate!="function"||P===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),f=!1)}return Pm(n,s,l,f,v,m)}function Pm(n,s,l,f,m,v){kA(n,s);var _=(s.flags&128)!==0;if(!f&&!_)return m&&Iw(s,l,!1),Ss(n,s,v);f=s.stateNode,XE.current=s;var P=_&&typeof l.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&_?(s.child=nl(s,n.child,null,v),s.child=nl(s,null,P,v)):cn(n,s,P,v),s.memoizedState=f.state,m&&Iw(s,l,!0),s.child}function PA(n){var s=n.stateNode;s.pendingContext?Lw(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Lw(n,s.context,!1),dm(n,s.containerInfo)}function RA(n,s,l,f,m){return tl(),rm(m),s.flags|=256,cn(n,s,l,f),s.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Lm(n){return{baseLanes:n,cachePool:null,transitions:null}}function LA(n,s,l){var f=s.pendingProps,m=lt.current,v=!1,_=(s.flags&128)!==0,P;if((P=_)||(P=n!==null&&n.memoizedState===null?!1:(m&2)!==0),P?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(m|=1),Je(lt,m&1),n===null)return sm(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(_=f.children,n=f.fallback,v?(f=s.mode,v=s.child,_={mode:"hidden",children:_},!(f&1)&&v!==null?(v.childLanes=0,v.pendingProps=_):v=Mf(_,f,0,null),n=_a(n,f,l,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Lm(l),s.memoizedState=Rm,n):Mm(s,_));if(m=n.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return qE(n,s,_,f,P,m,l);if(v){v=f.fallback,_=s.mode,m=n.child,P=m.sibling;var L={mode:"hidden",children:f.children};return!(_&1)&&s.child!==m?(f=s.child,f.childLanes=0,f.pendingProps=L,s.deletions=null):(f=Er(m,L),f.subtreeFlags=m.subtreeFlags&14680064),P!==null?v=Er(P,v):(v=_a(v,_,l,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,_=n.child.memoizedState,_=_===null?Lm(l):{baseLanes:_.baseLanes|l,cachePool:null,transitions:_.transitions},v.memoizedState=_,v.childLanes=n.childLanes&~l,s.memoizedState=Rm,f}return v=n.child,n=v.sibling,f=Er(v,{mode:"visible",children:f.children}),!(s.mode&1)&&(f.lanes=l),f.return=s,f.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=f,s.memoizedState=null,f}function Mm(n,s){return s=Mf({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function wf(n,s,l,f){return f!==null&&rm(f),nl(s,n.child,null,l),n=Mm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function qE(n,s,l,f,m,v,_){if(l)return s.flags&256?(s.flags&=-257,f=Cm(Error(t(422))),wf(n,s,_,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=f.fallback,m=s.mode,f=Mf({mode:"visible",children:f.children},m,0,null),v=_a(v,m,_,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,s.mode&1&&nl(s,n.child,null,_),s.child.memoizedState=Lm(_),s.memoizedState=Rm,v);if(!(s.mode&1))return wf(n,s,_,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var P=f.dgst;return f=P,v=Error(t(419)),f=Cm(v,f,void 0),wf(n,s,_,f)}if(P=(_&n.childLanes)!==0,_n||P){if(f=It,f!==null){switch(_&-_){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=m&(f.suspendedLanes|_)?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,As(n,m),_i(f,n,m,-1))}return qm(),f=Cm(Error(t(421))),wf(n,s,_,f)}return m.data==="$?"?(s.flags|=128,s.child=n.child,s=ox.bind(null,n),m._reactRetry=s,null):(n=v.treeContext,Fn=fr(m.nextSibling),Dn=s,it=!0,wi=null,n!==null&&(ei[ti++]=vs,ei[ti++]=ws,ei[ti++]=pa,vs=n.id,ws=n.overflow,pa=s),s=Mm(s,f.children),s.flags|=4096,s)}function MA(n,s,l){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),um(n.return,s,l)}function Im(n,s,l,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=l,v.tailMode=m)}function IA(n,s,l){var f=s.pendingProps,m=f.revealOrder,v=f.tail;if(cn(n,s,f.children,l),f=lt.current,f&2)f=f&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&MA(n,l,s);else if(n.tag===19)MA(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Je(lt,f),!(s.mode&1))s.memoizedState=null;else switch(m){case"forwards":for(l=s.child,m=null;l!==null;)n=l.alternate,n!==null&&df(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),Im(s,!1,m,l,v);break;case"backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&df(n)===null){s.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}Im(s,!0,l,null,v);break;case"together":Im(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Af(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ss(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),wa|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,l=Er(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Er(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function YE(n,s,l){switch(s.tag){case 3:PA(s),tl();break;case 5:Xw(s);break;case 1:Sn(s.type)&&tf(s);break;case 4:dm(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,m=s.memoizedProps.value;Je(lf,f._currentValue),f._currentValue=m;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Je(lt,lt.current&1),s.flags|=128,null):l&s.child.childLanes?LA(n,s,l):(Je(lt,lt.current&1),n=Ss(n,s,l),n!==null?n.sibling:null);Je(lt,lt.current&1);break;case 19:if(f=(l&s.childLanes)!==0,n.flags&128){if(f)return IA(n,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Je(lt,lt.current),f)break;return null;case 22:case 23:return s.lanes=0,CA(n,s,l)}return Ss(n,s,l)}var NA,Nm,DA,FA;NA=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Nm=function(){},DA=function(n,s,l,f){var m=n.memoizedProps;if(m!==f){n=s.stateNode,ya(Wi.current);var v=null;switch(l){case"input":m=ug(n,m),f=ug(n,f),v=[];break;case"select":m=Q({},m,{value:void 0}),f=Q({},f,{value:void 0}),v=[];break;case"textarea":m=dg(n,m),f=dg(n,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=Jd)}pg(l,f);var _;l=null;for(z in m)if(!f.hasOwnProperty(z)&&m.hasOwnProperty(z)&&m[z]!=null)if(z==="style"){var P=m[z];for(_ in P)P.hasOwnProperty(_)&&(l||(l={}),l[_]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?v||(v=[]):(v=v||[]).push(z,null));for(z in f){var L=f[z];if(P=m!=null?m[z]:void 0,f.hasOwnProperty(z)&&L!==P&&(L!=null||P!=null))if(z==="style")if(P){for(_ in P)!P.hasOwnProperty(_)||L&&L.hasOwnProperty(_)||(l||(l={}),l[_]="");for(_ in L)L.hasOwnProperty(_)&&P[_]!==L[_]&&(l||(l={}),l[_]=L[_])}else l||(v||(v=[]),v.push(z,l)),l=L;else z==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,P=P?P.__html:void 0,L!=null&&P!==L&&(v=v||[]).push(z,L)):z==="children"?typeof L!="string"&&typeof L!="number"||(v=v||[]).push(z,""+L):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(L!=null&&z==="onScroll"&&et("scroll",n),v||P===L||(v=[])):(v=v||[]).push(z,L))}l&&(v=v||[]).push("style",l);var z=v;(s.updateQueue=z)&&(s.flags|=4)}},FA=function(n,s,l,f){l!==f&&(s.flags|=4)};function dc(n,s){if(!it)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Qt(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,f=0;if(s)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=f,n.childLanes=l,s}function KE(n,s,l){var f=s.pendingProps;switch(nm(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(s),null;case 1:return Sn(s.type)&&ef(),Qt(s),null;case 3:return f=s.stateNode,rl(),tt(bn),tt(Yt),gm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(af(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,wi!==null&&(Wm(wi),wi=null))),Nm(n,s),Qt(s),null;case 5:fm(s);var m=ya(oc.current);if(l=s.type,n!==null&&s.stateNode!=null)DA(n,s,l,f,m),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Qt(s),null}if(n=ya(Wi.current),af(s)){f=s.stateNode,l=s.type;var v=s.memoizedProps;switch(f[Vi]=s,f[nc]=v,n=(s.mode&1)!==0,l){case"dialog":et("cancel",f),et("close",f);break;case"iframe":case"object":case"embed":et("load",f);break;case"video":case"audio":for(m=0;m<Zu.length;m++)et(Zu[m],f);break;case"source":et("error",f);break;case"img":case"image":case"link":et("error",f),et("load",f);break;case"details":et("toggle",f);break;case"input":m0(f,v),et("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},et("invalid",f);break;case"textarea":w0(f,v),et("invalid",f)}pg(l,v),m=null;for(var _ in v)if(v.hasOwnProperty(_)){var P=v[_];_==="children"?typeof P=="string"?f.textContent!==P&&(v.suppressHydrationWarning!==!0&&Qd(f.textContent,P,n),m=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(v.suppressHydrationWarning!==!0&&Qd(f.textContent,P,n),m=["children",""+P]):r.hasOwnProperty(_)&&P!=null&&_==="onScroll"&&et("scroll",f)}switch(l){case"input":Td(f),v0(f,v,!0);break;case"textarea":Td(f),b0(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Jd)}f=m,s.updateQueue=f,f!==null&&(s.flags|=4)}else{_=m.nodeType===9?m:m.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=S0(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=_.createElement(l,{is:f.is}):(n=_.createElement(l),l==="select"&&(_=n,f.multiple?_.multiple=!0:f.size&&(_.size=f.size))):n=_.createElementNS(n,l),n[Vi]=s,n[nc]=f,NA(n,s,!1,!1),s.stateNode=n;e:{switch(_=gg(l,f),l){case"dialog":et("cancel",n),et("close",n),m=f;break;case"iframe":case"object":case"embed":et("load",n),m=f;break;case"video":case"audio":for(m=0;m<Zu.length;m++)et(Zu[m],n);m=f;break;case"source":et("error",n),m=f;break;case"img":case"image":case"link":et("error",n),et("load",n),m=f;break;case"details":et("toggle",n),m=f;break;case"input":m0(n,f),m=ug(n,f),et("invalid",n);break;case"option":m=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},m=Q({},f,{value:void 0}),et("invalid",n);break;case"textarea":w0(n,f),m=dg(n,f),et("invalid",n);break;default:m=f}pg(l,m),P=m;for(v in P)if(P.hasOwnProperty(v)){var L=P[v];v==="style"?x0(n,L):v==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&_0(n,L)):v==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&Nu(n,L):typeof L=="number"&&Nu(n,""+L):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(r.hasOwnProperty(v)?L!=null&&v==="onScroll"&&et("scroll",n):L!=null&&M(n,v,L,_))}switch(l){case"input":Td(n),v0(n,f,!1);break;case"textarea":Td(n),b0(n);break;case"option":f.value!=null&&n.setAttribute("value",""+$e(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?Ho(n,!!f.multiple,v,!1):f.defaultValue!=null&&Ho(n,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(n.onclick=Jd)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Qt(s),null;case 6:if(n&&s.stateNode!=null)FA(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(l=ya(oc.current),ya(Wi.current),af(s)){if(f=s.stateNode,l=s.memoizedProps,f[Vi]=s,(v=f.nodeValue!==l)&&(n=Dn,n!==null))switch(n.tag){case 3:Qd(f.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Qd(f.nodeValue,l,(n.mode&1)!==0)}v&&(s.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Vi]=s,s.stateNode=f}return Qt(s),null;case 13:if(tt(lt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&Fn!==null&&s.mode&1&&!(s.flags&128))zw(),tl(),s.flags|=98560,v=!1;else if(v=af(s),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Vi]=s}else tl(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Qt(s),v=!1}else wi!==null&&(Wm(wi),wi=null),v=!0;if(!v)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,s.mode&1&&(n===null||lt.current&1?Ct===0&&(Ct=3):qm())),s.updateQueue!==null&&(s.flags|=4),Qt(s),null);case 4:return rl(),Nm(n,s),n===null&&ec(s.stateNode.containerInfo),Qt(s),null;case 10:return lm(s.type._context),Qt(s),null;case 17:return Sn(s.type)&&ef(),Qt(s),null;case 19:if(tt(lt),v=s.memoizedState,v===null)return Qt(s),null;if(f=(s.flags&128)!==0,_=v.rendering,_===null)if(f)dc(v,!1);else{if(Ct!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(_=df(n),_!==null){for(s.flags|=128,dc(v,!1),f=_.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=l,l=s.child;l!==null;)v=l,n=f,v.flags&=14680066,_=v.alternate,_===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=_.childLanes,v.lanes=_.lanes,v.child=_.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=_.memoizedProps,v.memoizedState=_.memoizedState,v.updateQueue=_.updateQueue,v.type=_.type,n=_.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Je(lt,lt.current&1|2),s.child}n=n.sibling}v.tail!==null&&gt()>ul&&(s.flags|=128,f=!0,dc(v,!1),s.lanes=4194304)}else{if(!f)if(n=df(_),n!==null){if(s.flags|=128,f=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),dc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!_.alternate&&!it)return Qt(s),null}else 2*gt()-v.renderingStartTime>ul&&l!==1073741824&&(s.flags|=128,f=!0,dc(v,!1),s.lanes=4194304);v.isBackwards?(_.sibling=s.child,s.child=_):(l=v.last,l!==null?l.sibling=_:s.child=_,v.last=_)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=gt(),s.sibling=null,l=lt.current,Je(lt,f?l&1|2:l&1),s):(Qt(s),null);case 22:case 23:return Xm(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&s.mode&1?On&1073741824&&(Qt(s),s.subtreeFlags&6&&(s.flags|=8192)):Qt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function QE(n,s){switch(nm(s),s.tag){case 1:return Sn(s.type)&&ef(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return rl(),tt(bn),tt(Yt),gm(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return fm(s),null;case 13:if(tt(lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));tl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(lt),null;case 4:return rl(),null;case 10:return lm(s.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var bf=!1,Jt=!1,JE=typeof WeakSet=="function"?WeakSet:Set,re=null;function ol(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){ft(n,s,f)}else l.current=null}function Dm(n,s,l){try{l()}catch(f){ft(n,s,f)}}var OA=!1;function ZE(n,s){if(Xg=Hd,n=gw(),zg(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var _=0,P=-1,L=-1,z=0,G=0,q=n,W=null;t:for(;;){for(var ie;q!==l||m!==0&&q.nodeType!==3||(P=_+m),q!==v||f!==0&&q.nodeType!==3||(L=_+f),q.nodeType===3&&(_+=q.nodeValue.length),(ie=q.firstChild)!==null;)W=q,q=ie;for(;;){if(q===n)break t;if(W===l&&++z===m&&(P=_),W===v&&++G===f&&(L=_),(ie=q.nextSibling)!==null)break;q=W,W=q.parentNode}q=ie}l=P===-1||L===-1?null:{start:P,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(qg={focusedElem:n,selectionRange:l},Hd=!1,re=s;re!==null;)if(s=re,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,re=n;else for(;re!==null;){s=re;try{var ce=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,mt=ce.memoizedState,F=s.stateNode,I=F.getSnapshotBeforeUpdate(s.elementType===s.type?he:Ai(s.type,he),mt);F.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var O=s.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){ft(s,s.return,Y)}if(n=s.sibling,n!==null){n.return=s.return,re=n;break}re=s.return}return ce=OA,OA=!1,ce}function fc(n,s,l){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&n)===n){var v=m.destroy;m.destroy=void 0,v!==void 0&&Dm(s,l,v)}m=m.next}while(m!==f)}}function Sf(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var f=l.create;l.destroy=f()}l=l.next}while(l!==s)}}function Fm(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function $A(n){var s=n.alternate;s!==null&&(n.alternate=null,$A(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Vi],delete s[nc],delete s[Jg],delete s[DE],delete s[FE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function zA(n){return n.tag===5||n.tag===3||n.tag===4}function HA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Om(n,s,l){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Jd));else if(f!==4&&(n=n.child,n!==null))for(Om(n,s,l),n=n.sibling;n!==null;)Om(n,s,l),n=n.sibling}function $m(n,s,l){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for($m(n,s,l),n=n.sibling;n!==null;)$m(n,s,l),n=n.sibling}var Bt=null,bi=!1;function wr(n,s,l){for(l=l.child;l!==null;)BA(n,s,l),l=l.sibling}function BA(n,s,l){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(Nd,l)}catch{}switch(l.tag){case 5:Jt||ol(l,s);case 6:var f=Bt,m=bi;Bt=null,wr(n,s,l),Bt=f,bi=m,Bt!==null&&(bi?(n=Bt,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):Bt.removeChild(l.stateNode));break;case 18:Bt!==null&&(bi?(n=Bt,l=l.stateNode,n.nodeType===8?Qg(n.parentNode,l):n.nodeType===1&&Qg(n,l),Wu(n)):Qg(Bt,l.stateNode));break;case 4:f=Bt,m=bi,Bt=l.stateNode.containerInfo,bi=!0,wr(n,s,l),Bt=f,bi=m;break;case 0:case 11:case 14:case 15:if(!Jt&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,_=v.destroy;v=v.tag,_!==void 0&&(v&2||v&4)&&Dm(l,s,_),m=m.next}while(m!==f)}wr(n,s,l);break;case 1:if(!Jt&&(ol(l,s),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(P){ft(l,s,P)}wr(n,s,l);break;case 21:wr(n,s,l);break;case 22:l.mode&1?(Jt=(f=Jt)||l.memoizedState!==null,wr(n,s,l),Jt=f):wr(n,s,l);break;default:wr(n,s,l)}}function jA(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new JE),s.forEach(function(f){var m=lx.bind(null,n,f);l.has(f)||(l.add(f),f.then(m,m))})}}function Si(n,s){var l=s.deletions;if(l!==null)for(var f=0;f<l.length;f++){var m=l[f];try{var v=n,_=s,P=_;e:for(;P!==null;){switch(P.tag){case 5:Bt=P.stateNode,bi=!1;break e;case 3:Bt=P.stateNode.containerInfo,bi=!0;break e;case 4:Bt=P.stateNode.containerInfo,bi=!0;break e}P=P.return}if(Bt===null)throw Error(t(160));BA(v,_,m),Bt=null,bi=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(z){ft(m,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)UA(s,n),s=s.sibling}function UA(n,s){var l=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Si(s,n),Xi(n),f&4){try{fc(3,n,n.return),Sf(3,n)}catch(he){ft(n,n.return,he)}try{fc(5,n,n.return)}catch(he){ft(n,n.return,he)}}break;case 1:Si(s,n),Xi(n),f&512&&l!==null&&ol(l,l.return);break;case 5:if(Si(s,n),Xi(n),f&512&&l!==null&&ol(l,l.return),n.flags&32){var m=n.stateNode;try{Nu(m,"")}catch(he){ft(n,n.return,he)}}if(f&4&&(m=n.stateNode,m!=null)){var v=n.memoizedProps,_=l!==null?l.memoizedProps:v,P=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{P==="input"&&v.type==="radio"&&v.name!=null&&y0(m,v),gg(P,_);var z=gg(P,v);for(_=0;_<L.length;_+=2){var G=L[_],q=L[_+1];G==="style"?x0(m,q):G==="dangerouslySetInnerHTML"?_0(m,q):G==="children"?Nu(m,q):M(m,G,q,z)}switch(P){case"input":cg(m,v);break;case"textarea":A0(m,v);break;case"select":var W=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var ie=v.value;ie!=null?Ho(m,!!v.multiple,ie,!1):W!==!!v.multiple&&(v.defaultValue!=null?Ho(m,!!v.multiple,v.defaultValue,!0):Ho(m,!!v.multiple,v.multiple?[]:"",!1))}m[nc]=v}catch(he){ft(n,n.return,he)}}break;case 6:if(Si(s,n),Xi(n),f&4){if(n.stateNode===null)throw Error(t(162));m=n.stateNode,v=n.memoizedProps;try{m.nodeValue=v}catch(he){ft(n,n.return,he)}}break;case 3:if(Si(s,n),Xi(n),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Wu(s.containerInfo)}catch(he){ft(n,n.return,he)}break;case 4:Si(s,n),Xi(n);break;case 13:Si(s,n),Xi(n),m=n.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(Bm=gt())),f&4&&jA(n);break;case 22:if(G=l!==null&&l.memoizedState!==null,n.mode&1?(Jt=(z=Jt)||G,Si(s,n),Jt=z):Si(s,n),Xi(n),f&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!G&&n.mode&1)for(re=n,G=n.child;G!==null;){for(q=re=G;re!==null;){switch(W=re,ie=W.child,W.tag){case 0:case 11:case 14:case 15:fc(4,W,W.return);break;case 1:ol(W,W.return);var ce=W.stateNode;if(typeof ce.componentWillUnmount=="function"){f=W,l=W.return;try{s=f,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(he){ft(f,l,he)}}break;case 5:ol(W,W.return);break;case 22:if(W.memoizedState!==null){GA(q);continue}}ie!==null?(ie.return=W,re=ie):GA(q)}G=G.sibling}e:for(G=null,q=n;;){if(q.tag===5){if(G===null){G=q;try{m=q.stateNode,z?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(P=q.stateNode,L=q.memoizedProps.style,_=L!=null&&L.hasOwnProperty("display")?L.display:null,P.style.display=E0("display",_))}catch(he){ft(n,n.return,he)}}}else if(q.tag===6){if(G===null)try{q.stateNode.nodeValue=z?"":q.memoizedProps}catch(he){ft(n,n.return,he)}}else if((q.tag!==22&&q.tag!==23||q.memoizedState===null||q===n)&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===n)break e;for(;q.sibling===null;){if(q.return===null||q.return===n)break e;G===q&&(G=null),q=q.return}G===q&&(G=null),q.sibling.return=q.return,q=q.sibling}}break;case 19:Si(s,n),Xi(n),f&4&&jA(n);break;case 21:break;default:Si(s,n),Xi(n)}}function Xi(n){var s=n.flags;if(s&2){try{e:{for(var l=n.return;l!==null;){if(zA(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Nu(m,""),f.flags&=-33);var v=HA(n);$m(n,v,m);break;case 3:case 4:var _=f.stateNode.containerInfo,P=HA(n);Om(n,P,_);break;default:throw Error(t(161))}}catch(L){ft(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ex(n,s,l){re=n,VA(n)}function VA(n,s,l){for(var f=(n.mode&1)!==0;re!==null;){var m=re,v=m.child;if(m.tag===22&&f){var _=m.memoizedState!==null||bf;if(!_){var P=m.alternate,L=P!==null&&P.memoizedState!==null||Jt;P=bf;var z=Jt;if(bf=_,(Jt=L)&&!z)for(re=m;re!==null;)_=re,L=_.child,_.tag===22&&_.memoizedState!==null?XA(m):L!==null?(L.return=_,re=L):XA(m);for(;v!==null;)re=v,VA(v),v=v.sibling;re=m,bf=P,Jt=z}WA(n)}else m.subtreeFlags&8772&&v!==null?(v.return=m,re=v):WA(n)}}function WA(n){for(;re!==null;){var s=re;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Jt||Sf(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Jt)if(l===null)f.componentDidMount();else{var m=s.elementType===s.type?l.memoizedProps:Ai(s.type,l.memoizedProps);f.componentDidUpdate(m,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Gw(s,v,f);break;case 3:var _=s.updateQueue;if(_!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Gw(s,_,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var G=z.memoizedState;if(G!==null){var q=G.dehydrated;q!==null&&Wu(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&Fm(s)}catch(W){ft(s,s.return,W)}}if(s===n){re=null;break}if(l=s.sibling,l!==null){l.return=s.return,re=l;break}re=s.return}}function GA(n){for(;re!==null;){var s=re;if(s===n){re=null;break}var l=s.sibling;if(l!==null){l.return=s.return,re=l;break}re=s.return}}function XA(n){for(;re!==null;){var s=re;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Sf(4,s)}catch(L){ft(s,l,L)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var m=s.return;try{f.componentDidMount()}catch(L){ft(s,m,L)}}var v=s.return;try{Fm(s)}catch(L){ft(s,v,L)}break;case 5:var _=s.return;try{Fm(s)}catch(L){ft(s,_,L)}}}catch(L){ft(s,s.return,L)}if(s===n){re=null;break}var P=s.sibling;if(P!==null){P.return=s.return,re=P;break}re=s.return}}var tx=Math.ceil,_f=D.ReactCurrentDispatcher,zm=D.ReactCurrentOwner,si=D.ReactCurrentBatchConfig,He=0,It=null,At=null,jt=0,On=0,ll=pr(0),Ct=0,pc=null,wa=0,Ef=0,Hm=0,gc=null,En=null,Bm=0,ul=1/0,_s=null,xf=!1,jm=null,Ar=null,Cf=!1,br=null,kf=0,mc=0,Um=null,Tf=-1,Pf=0;function hn(){return He&6?gt():Tf!==-1?Tf:Tf=gt()}function Sr(n){return n.mode&1?He&2&&jt!==0?jt&-jt:$E.transition!==null?(Pf===0&&(Pf=H0()),Pf):(n=We,n!==0||(n=window.event,n=n===void 0?16:Y0(n.type)),n):1}function _i(n,s,l,f){if(50<mc)throw mc=0,Um=null,Error(t(185));Hu(n,l,f),(!(He&2)||n!==It)&&(n===It&&(!(He&2)&&(Ef|=l),Ct===4&&_r(n,jt)),xn(n,f),l===1&&He===0&&!(s.mode&1)&&(ul=gt()+500,nf&&mr()))}function xn(n,s){var l=n.callbackNode;$_(n,s);var f=Od(n,n===It?jt:0);if(f===0)l!==null&&O0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(l!=null&&O0(l),s===1)n.tag===0?OE(YA.bind(null,n)):Nw(YA.bind(null,n)),IE(function(){!(He&6)&&mr()}),l=null;else{switch(B0(f)){case 1:l=Sg;break;case 4:l=$0;break;case 16:l=Id;break;case 536870912:l=z0;break;default:l=Id}l=ib(l,qA.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function qA(n,s){if(Tf=-1,Pf=0,He&6)throw Error(t(327));var l=n.callbackNode;if(cl()&&n.callbackNode!==l)return null;var f=Od(n,n===It?jt:0);if(f===0)return null;if(f&30||f&n.expiredLanes||s)s=Rf(n,f);else{s=f;var m=He;He|=2;var v=QA();(It!==n||jt!==s)&&(_s=null,ul=gt()+500,ba(n,s));do try{sx();break}catch(P){KA(n,P)}while(!0);om(),_f.current=v,He=m,At!==null?s=0:(It=null,jt=0,s=Ct)}if(s!==0){if(s===2&&(m=_g(n),m!==0&&(f=m,s=Vm(n,m))),s===1)throw l=pc,ba(n,0),_r(n,f),xn(n,gt()),l;if(s===6)_r(n,f);else{if(m=n.current.alternate,!(f&30)&&!nx(m)&&(s=Rf(n,f),s===2&&(v=_g(n),v!==0&&(f=v,s=Vm(n,v))),s===1))throw l=pc,ba(n,0),_r(n,f),xn(n,gt()),l;switch(n.finishedWork=m,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:Sa(n,En,_s);break;case 3:if(_r(n,f),(f&130023424)===f&&(s=Bm+500-gt(),10<s)){if(Od(n,0)!==0)break;if(m=n.suspendedLanes,(m&f)!==f){hn(),n.pingedLanes|=n.suspendedLanes&m;break}n.timeoutHandle=Kg(Sa.bind(null,n,En,_s),s);break}Sa(n,En,_s);break;case 4:if(_r(n,f),(f&4194240)===f)break;for(s=n.eventTimes,m=-1;0<f;){var _=31-yi(f);v=1<<_,_=s[_],_>m&&(m=_),f&=~v}if(f=m,f=gt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*tx(f/1960))-f,10<f){n.timeoutHandle=Kg(Sa.bind(null,n,En,_s),f);break}Sa(n,En,_s);break;case 5:Sa(n,En,_s);break;default:throw Error(t(329))}}}return xn(n,gt()),n.callbackNode===l?qA.bind(null,n):null}function Vm(n,s){var l=gc;return n.current.memoizedState.isDehydrated&&(ba(n,s).flags|=256),n=Rf(n,s),n!==2&&(s=En,En=l,s!==null&&Wm(s)),n}function Wm(n){En===null?En=n:En.push.apply(En,n)}function nx(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var m=l[f],v=m.getSnapshot;m=m.value;try{if(!vi(v(),m))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _r(n,s){for(s&=~Hm,s&=~Ef,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-yi(s),f=1<<l;n[l]=-1,s&=~f}}function YA(n){if(He&6)throw Error(t(327));cl();var s=Od(n,0);if(!(s&1))return xn(n,gt()),null;var l=Rf(n,s);if(n.tag!==0&&l===2){var f=_g(n);f!==0&&(s=f,l=Vm(n,f))}if(l===1)throw l=pc,ba(n,0),_r(n,s),xn(n,gt()),l;if(l===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,Sa(n,En,_s),xn(n,gt()),null}function Gm(n,s){var l=He;He|=1;try{return n(s)}finally{He=l,He===0&&(ul=gt()+500,nf&&mr())}}function Aa(n){br!==null&&br.tag===0&&!(He&6)&&cl();var s=He;He|=1;var l=si.transition,f=We;try{if(si.transition=null,We=1,n)return n()}finally{We=f,si.transition=l,He=s,!(He&6)&&mr()}}function Xm(){On=ll.current,tt(ll)}function ba(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,ME(l)),At!==null)for(l=At.return;l!==null;){var f=l;switch(nm(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&ef();break;case 3:rl(),tt(bn),tt(Yt),gm();break;case 5:fm(f);break;case 4:rl();break;case 13:tt(lt);break;case 19:tt(lt);break;case 10:lm(f.type._context);break;case 22:case 23:Xm()}l=l.return}if(It=n,At=n=Er(n.current,null),jt=On=s,Ct=0,pc=null,Hm=Ef=wa=0,En=gc=null,ma!==null){for(s=0;s<ma.length;s++)if(l=ma[s],f=l.interleaved,f!==null){l.interleaved=null;var m=f.next,v=l.pending;if(v!==null){var _=v.next;v.next=m,f.next=_}l.pending=f}ma=null}return n}function KA(n,s){do{var l=At;try{if(om(),ff.current=yf,pf){for(var f=ut.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}pf=!1}if(va=0,Mt=xt=ut=null,lc=!1,uc=0,zm.current=null,l===null||l.return===null){Ct=1,pc=s,At=null;break}e:{var v=n,_=l.return,P=l,L=s;if(s=jt,P.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var z=L,G=P,q=G.tag;if(!(G.mode&1)&&(q===0||q===11||q===15)){var W=G.alternate;W?(G.updateQueue=W.updateQueue,G.memoizedState=W.memoizedState,G.lanes=W.lanes):(G.updateQueue=null,G.memoizedState=null)}var ie=bA(_);if(ie!==null){ie.flags&=-257,SA(ie,_,P,v,s),ie.mode&1&&AA(v,z,s),s=ie,L=z;var ce=s.updateQueue;if(ce===null){var he=new Set;he.add(L),s.updateQueue=he}else ce.add(L);break e}else{if(!(s&1)){AA(v,z,s),qm();break e}L=Error(t(426))}}else if(it&&P.mode&1){var mt=bA(_);if(mt!==null){!(mt.flags&65536)&&(mt.flags|=256),SA(mt,_,P,v,s),rm(al(L,P));break e}}v=L=al(L,P),Ct!==4&&(Ct=2),gc===null?gc=[v]:gc.push(v),v=_;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var F=vA(v,L,s);Ww(v,F);break e;case 1:P=L;var I=v.type,O=v.stateNode;if(!(v.flags&128)&&(typeof I.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Ar===null||!Ar.has(O)))){v.flags|=65536,s&=-s,v.lanes|=s;var Y=wA(v,P,s);Ww(v,Y);break e}}v=v.return}while(v!==null)}ZA(l)}catch(fe){s=fe,At===l&&l!==null&&(At=l=l.return);continue}break}while(!0)}function QA(){var n=_f.current;return _f.current=yf,n===null?yf:n}function qm(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),It===null||!(wa&268435455)&&!(Ef&268435455)||_r(It,jt)}function Rf(n,s){var l=He;He|=2;var f=QA();(It!==n||jt!==s)&&(_s=null,ba(n,s));do try{ix();break}catch(m){KA(n,m)}while(!0);if(om(),He=l,_f.current=f,At!==null)throw Error(t(261));return It=null,jt=0,Ct}function ix(){for(;At!==null;)JA(At)}function sx(){for(;At!==null&&!P_();)JA(At)}function JA(n){var s=nb(n.alternate,n,On);n.memoizedProps=n.pendingProps,s===null?ZA(n):At=s,zm.current=null}function ZA(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=QE(l,s),l!==null){l.flags&=32767,At=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,At=null;return}}else if(l=KE(l,s,On),l!==null){At=l;return}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);Ct===0&&(Ct=5)}function Sa(n,s,l){var f=We,m=si.transition;try{si.transition=null,We=1,rx(n,s,l,f)}finally{si.transition=m,We=f}return null}function rx(n,s,l,f){do cl();while(br!==null);if(He&6)throw Error(t(327));l=n.finishedWork;var m=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=l.lanes|l.childLanes;if(z_(n,v),n===It&&(At=It=null,jt=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Cf||(Cf=!0,ib(Id,function(){return cl(),null})),v=(l.flags&15990)!==0,l.subtreeFlags&15990||v){v=si.transition,si.transition=null;var _=We;We=1;var P=He;He|=4,zm.current=null,ZE(n,l),UA(l,n),xE(qg),Hd=!!Xg,qg=Xg=null,n.current=l,ex(l),R_(),He=P,We=_,si.transition=v}else n.current=l;if(Cf&&(Cf=!1,br=n,kf=m),v=n.pendingLanes,v===0&&(Ar=null),I_(l.stateNode),xn(n,gt()),s!==null)for(f=n.onRecoverableError,l=0;l<s.length;l++)m=s[l],f(m.value,{componentStack:m.stack,digest:m.digest});if(xf)throw xf=!1,n=jm,jm=null,n;return kf&1&&n.tag!==0&&cl(),v=n.pendingLanes,v&1?n===Um?mc++:(mc=0,Um=n):mc=0,mr(),null}function cl(){if(br!==null){var n=B0(kf),s=si.transition,l=We;try{if(si.transition=null,We=16>n?16:n,br===null)var f=!1;else{if(n=br,br=null,kf=0,He&6)throw Error(t(331));var m=He;for(He|=4,re=n.current;re!==null;){var v=re,_=v.child;if(re.flags&16){var P=v.deletions;if(P!==null){for(var L=0;L<P.length;L++){var z=P[L];for(re=z;re!==null;){var G=re;switch(G.tag){case 0:case 11:case 15:fc(8,G,v)}var q=G.child;if(q!==null)q.return=G,re=q;else for(;re!==null;){G=re;var W=G.sibling,ie=G.return;if($A(G),G===z){re=null;break}if(W!==null){W.return=ie,re=W;break}re=ie}}}var ce=v.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var mt=he.sibling;he.sibling=null,he=mt}while(he!==null)}}re=v}}if(v.subtreeFlags&2064&&_!==null)_.return=v,re=_;else e:for(;re!==null;){if(v=re,v.flags&2048)switch(v.tag){case 0:case 11:case 15:fc(9,v,v.return)}var F=v.sibling;if(F!==null){F.return=v.return,re=F;break e}re=v.return}}var I=n.current;for(re=I;re!==null;){_=re;var O=_.child;if(_.subtreeFlags&2064&&O!==null)O.return=_,re=O;else e:for(_=I;re!==null;){if(P=re,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:Sf(9,P)}}catch(fe){ft(P,P.return,fe)}if(P===_){re=null;break e}var Y=P.sibling;if(Y!==null){Y.return=P.return,re=Y;break e}re=P.return}}if(He=m,mr(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(Nd,n)}catch{}f=!0}return f}finally{We=l,si.transition=s}}return!1}function eb(n,s,l){s=al(l,s),s=vA(n,s,1),n=vr(n,s,1),s=hn(),n!==null&&(Hu(n,1,s),xn(n,s))}function ft(n,s,l){if(n.tag===3)eb(n,n,l);else for(;s!==null;){if(s.tag===3){eb(s,n,l);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ar===null||!Ar.has(f))){n=al(l,n),n=wA(s,n,1),s=vr(s,n,1),n=hn(),s!==null&&(Hu(s,1,n),xn(s,n));break}}s=s.return}}function ax(n,s,l){var f=n.pingCache;f!==null&&f.delete(s),s=hn(),n.pingedLanes|=n.suspendedLanes&l,It===n&&(jt&l)===l&&(Ct===4||Ct===3&&(jt&130023424)===jt&&500>gt()-Bm?ba(n,0):Hm|=l),xn(n,s)}function tb(n,s){s===0&&(n.mode&1?(s=Fd,Fd<<=1,!(Fd&130023424)&&(Fd=4194304)):s=1);var l=hn();n=As(n,s),n!==null&&(Hu(n,s,l),xn(n,l))}function ox(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),tb(n,l)}function lx(n,s){var l=0;switch(n.tag){case 13:var f=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),tb(n,l)}var nb;nb=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||bn.current)_n=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return _n=!1,YE(n,s,l);_n=!!(n.flags&131072)}else _n=!1,it&&s.flags&1048576&&Dw(s,rf,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Af(n,s),n=s.pendingProps;var m=Jo(s,Yt.current);sl(s,l),m=vm(null,s,f,n,m,l);var v=wm();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Sn(f)?(v=!0,tf(s)):v=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,hm(s),m.updater=vf,s.stateNode=m,m._reactInternals=s,xm(s,f,n,l),s=Pm(null,s,f,!0,v,l)):(s.tag=0,it&&v&&tm(s),cn(null,s,m,l),s=s.child),s;case 16:f=s.elementType;e:{switch(Af(n,s),n=s.pendingProps,m=f._init,f=m(f._payload),s.type=f,m=s.tag=cx(f),n=Ai(f,n),m){case 0:s=Tm(null,s,f,n,l);break e;case 1:s=TA(null,s,f,n,l);break e;case 11:s=_A(null,s,f,n,l);break e;case 14:s=EA(null,s,f,Ai(f.type,n),l);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ai(f,m),Tm(n,s,f,m,l);case 1:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ai(f,m),TA(n,s,f,m,l);case 3:e:{if(PA(s),n===null)throw Error(t(387));f=s.pendingProps,v=s.memoizedState,m=v.element,Vw(n,s),hf(s,f,null,l);var _=s.memoizedState;if(f=_.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){m=al(Error(t(423)),s),s=RA(n,s,f,l,m);break e}else if(f!==m){m=al(Error(t(424)),s),s=RA(n,s,f,l,m);break e}else for(Fn=fr(s.stateNode.containerInfo.firstChild),Dn=s,it=!0,wi=null,l=jw(s,null,f,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(tl(),f===m){s=Ss(n,s,l);break e}cn(n,s,f,l)}s=s.child}return s;case 5:return Xw(s),n===null&&sm(s),f=s.type,m=s.pendingProps,v=n!==null?n.memoizedProps:null,_=m.children,Yg(f,m)?_=null:v!==null&&Yg(f,v)&&(s.flags|=32),kA(n,s),cn(n,s,_,l),s.child;case 6:return n===null&&sm(s),null;case 13:return LA(n,s,l);case 4:return dm(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=nl(s,null,f,l):cn(n,s,f,l),s.child;case 11:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ai(f,m),_A(n,s,f,m,l);case 7:return cn(n,s,s.pendingProps,l),s.child;case 8:return cn(n,s,s.pendingProps.children,l),s.child;case 12:return cn(n,s,s.pendingProps.children,l),s.child;case 10:e:{if(f=s.type._context,m=s.pendingProps,v=s.memoizedProps,_=m.value,Je(lf,f._currentValue),f._currentValue=_,v!==null)if(vi(v.value,_)){if(v.children===m.children&&!bn.current){s=Ss(n,s,l);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var P=v.dependencies;if(P!==null){_=v.child;for(var L=P.firstContext;L!==null;){if(L.context===f){if(v.tag===1){L=bs(-1,l&-l),L.tag=2;var z=v.updateQueue;if(z!==null){z=z.shared;var G=z.pending;G===null?L.next=L:(L.next=G.next,G.next=L),z.pending=L}}v.lanes|=l,L=v.alternate,L!==null&&(L.lanes|=l),um(v.return,l,s),P.lanes|=l;break}L=L.next}}else if(v.tag===10)_=v.type===s.type?null:v.child;else if(v.tag===18){if(_=v.return,_===null)throw Error(t(341));_.lanes|=l,P=_.alternate,P!==null&&(P.lanes|=l),um(_,l,s),_=v.sibling}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===s){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}cn(n,s,m.children,l),s=s.child}return s;case 9:return m=s.type,f=s.pendingProps.children,sl(s,l),m=ni(m),f=f(m),s.flags|=1,cn(n,s,f,l),s.child;case 14:return f=s.type,m=Ai(f,s.pendingProps),m=Ai(f.type,m),EA(n,s,f,m,l);case 15:return xA(n,s,s.type,s.pendingProps,l);case 17:return f=s.type,m=s.pendingProps,m=s.elementType===f?m:Ai(f,m),Af(n,s),s.tag=1,Sn(f)?(n=!0,tf(s)):n=!1,sl(s,l),mA(s,f,m),xm(s,f,m,l),Pm(null,s,f,!0,n,l);case 19:return IA(n,s,l);case 22:return CA(n,s,l)}throw Error(t(156,s.tag))};function ib(n,s){return F0(n,s)}function ux(n,s,l,f){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(n,s,l,f){return new ux(n,s,l,f)}function Ym(n){return n=n.prototype,!(!n||!n.isReactComponent)}function cx(n){if(typeof n=="function")return Ym(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Oe)return 11;if(n===ve)return 14}return 2}function Er(n,s){var l=n.alternate;return l===null?(l=ri(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function Lf(n,s,l,f,m,v){var _=2;if(f=n,typeof n=="function")Ym(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case B:return _a(l.children,m,v,s);case K:_=8,m|=8;break;case Z:return n=ri(12,l,s,m|2),n.elementType=Z,n.lanes=v,n;case Me:return n=ri(13,l,s,m),n.elementType=Me,n.lanes=v,n;case ue:return n=ri(19,l,s,m),n.elementType=ue,n.lanes=v,n;case J:return Mf(l,m,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case me:_=10;break e;case de:_=9;break e;case Oe:_=11;break e;case ve:_=14;break e;case X:_=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=ri(_,l,s,m),s.elementType=n,s.type=f,s.lanes=v,s}function _a(n,s,l,f){return n=ri(7,n,f,s),n.lanes=l,n}function Mf(n,s,l,f){return n=ri(22,n,f,s),n.elementType=J,n.lanes=l,n.stateNode={isHidden:!1},n}function Km(n,s,l){return n=ri(6,n,null,s),n.lanes=l,n}function Qm(n,s,l){return s=ri(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function hx(n,s,l,f,m){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eg(0),this.expirationTimes=Eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eg(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Jm(n,s,l,f,m,v,_,P,L){return n=new hx(n,s,l,P,L),s===1?(s=1,v===!0&&(s|=8)):s=0,v=ri(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hm(v),n}function dx(n,s,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:f==null?null:""+f,children:n,containerInfo:s,implementation:l}}function sb(n){if(!n)return gr;n=n._reactInternals;e:{if(ha(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var l=n.type;if(Sn(l))return Mw(n,l,s)}return s}function rb(n,s,l,f,m,v,_,P,L){return n=Jm(l,f,!0,n,m,v,_,P,L),n.context=sb(null),l=n.current,f=hn(),m=Sr(l),v=bs(f,m),v.callback=s??null,vr(l,v,m),n.current.lanes=m,Hu(n,m,f),xn(n,f),n}function If(n,s,l,f){var m=s.current,v=hn(),_=Sr(m);return l=sb(l),s.context===null?s.context=l:s.pendingContext=l,s=bs(v,_),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=vr(m,s,_),n!==null&&(_i(n,m,_,v),cf(n,m,_)),_}function Nf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ab(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Zm(n,s){ab(n,s),(n=n.alternate)&&ab(n,s)}var ob=typeof reportError=="function"?reportError:function(n){console.error(n)};function ey(n){this._internalRoot=n}Df.prototype.render=ey.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));If(n,s,null,null)},Df.prototype.unmount=ey.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Aa(function(){If(null,n,null,null)}),s[ms]=null}};function Df(n){this._internalRoot=n}Df.prototype.unstable_scheduleHydration=function(n){if(n){var s=V0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<cr.length&&s!==0&&s<cr[l].priority;l++);cr.splice(l,0,n),l===0&&X0(n)}};function ty(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ff(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function lb(){}function fx(n,s,l,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var z=Nf(_);v.call(z)}}var _=rb(s,f,n,0,null,!1,!1,"",lb);return n._reactRootContainer=_,n[ms]=_.current,ec(n.nodeType===8?n.parentNode:n),Aa(),_}for(;m=n.lastChild;)n.removeChild(m);if(typeof f=="function"){var P=f;f=function(){var z=Nf(L);P.call(z)}}var L=Jm(n,0,!1,null,null,!1,!1,"",lb);return n._reactRootContainer=L,n[ms]=L.current,ec(n.nodeType===8?n.parentNode:n),Aa(function(){If(s,L,l,f)}),L}function Of(n,s,l,f,m){var v=l._reactRootContainer;if(v){var _=v;if(typeof m=="function"){var P=m;m=function(){var L=Nf(_);P.call(L)}}If(s,_,n,m)}else _=fx(l,s,n,m,f);return Nf(_)}j0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=zu(s.pendingLanes);l!==0&&(xg(s,l|1),xn(s,gt()),!(He&6)&&(ul=gt()+500,mr()))}break;case 13:Aa(function(){var f=As(n,1);if(f!==null){var m=hn();_i(f,n,1,m)}}),Zm(n,1)}},Cg=function(n){if(n.tag===13){var s=As(n,134217728);if(s!==null){var l=hn();_i(s,n,134217728,l)}Zm(n,134217728)}},U0=function(n){if(n.tag===13){var s=Sr(n),l=As(n,s);if(l!==null){var f=hn();_i(l,n,s,f)}Zm(n,s)}},V0=function(){return We},W0=function(n,s){var l=We;try{return We=n,s()}finally{We=l}},vg=function(n,s,l){switch(s){case"input":if(cg(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var f=l[s];if(f!==n&&f.form===n.form){var m=Zd(f);if(!m)throw Error(t(90));g0(f),cg(f,m)}}}break;case"textarea":A0(n,l);break;case"select":s=l.value,s!=null&&Ho(n,!!l.multiple,s,!1)}},P0=Gm,R0=Aa;var px={usingClientEntryPoint:!1,Events:[ic,Ko,Zd,k0,T0,Gm]},yc={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=N0(n),n===null?null:n.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$f.isDisabled&&$f.supportsFiber)try{Nd=$f.inject(gx),Ui=$f}catch{}}return Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=px,Cn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ty(s))throw Error(t(200));return dx(n,s,null,l)},Cn.createRoot=function(n,s){if(!ty(n))throw Error(t(299));var l=!1,f="",m=ob;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=Jm(n,1,!1,null,null,l,!1,f,m),n[ms]=s.current,ec(n.nodeType===8?n.parentNode:n),new ey(s)},Cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=N0(s),n=n===null?null:n.stateNode,n},Cn.flushSync=function(n){return Aa(n)},Cn.hydrate=function(n,s,l){if(!Ff(s))throw Error(t(200));return Of(null,n,s,!0,l)},Cn.hydrateRoot=function(n,s,l){if(!ty(n))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,m=!1,v="",_=ob;if(l!=null&&(l.unstable_strictMode===!0&&(m=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onRecoverableError!==void 0&&(_=l.onRecoverableError)),s=rb(s,null,n,1,l??null,m,!1,v,_),n[ms]=s.current,ec(n),f)for(n=0;n<f.length;n++)l=f[n],m=l._getVersion,m=m(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,m]:s.mutableSourceEagerHydrationData.push(l,m);return new Df(s)},Cn.render=function(n,s,l){if(!Ff(s))throw Error(t(200));return Of(null,n,s,!1,l)},Cn.unmountComponentAtNode=function(n){if(!Ff(n))throw Error(t(40));return n._reactRootContainer?(Aa(function(){Of(null,null,n,!1,function(){n._reactRootContainer=null,n[ms]=null})}),!0):!1},Cn.unstable_batchedUpdates=Gm,Cn.unstable_renderSubtreeIntoContainer=function(n,s,l,f){if(!Ff(l))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Of(n,s,l,!1,f)},Cn.version="18.3.1-next-f1338f8080-20240426",Cn}var yb;function xx(){if(yb)return ry.exports;yb=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(e){console.error(e)}}return c(),ry.exports=Ex(),ry.exports}var vb;function Cx(){if(vb)return zf;vb=1;var c=xx();return zf.createRoot=c.createRoot,zf.hydrateRoot=c.hydrateRoot,zf}var kx=Cx();function No(c){return Object.keys(c)}function ly(c){return c&&typeof c=="object"&&!Array.isArray(c)}function Hv(c,e){const t={...c},i=e;return ly(c)&&ly(e)&&Object.keys(e).forEach(r=>{ly(i[r])&&r in c?t[r]=Hv(t[r],i[r]):t[r]=i[r]}),t}function Tx(c){var e;return typeof c!="string"||!c.includes("var(--mantine-scale)")?c:(e=c.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Px(c){const e=Tx(c);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function uy(c){return c==="0rem"?"0rem":`calc(${c} * var(--mantine-scale))`}function eS(c,{shouldScale:e=!1}={}){function t(i){if(i===0||i==="0")return`0${c}`;if(typeof i=="number"){const r=`${i/16}${c}`;return e?uy(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(a=>t(a)).join(",");if(i.includes(" "))return i.split(" ").map(a=>t(a)).join(" ");if(i.includes(c))return e?uy(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const a=`${Number(r)/16}${c}`;return e?uy(a):a}}return i}return t}const ee=eS("rem",{shouldScale:!0}),wb=eS("em"),tS=typeof document<"u"?H.useLayoutEffect:H.useEffect,nS=H.createContext(null);function iS(){const c=H.useContext(nS);if(!c)throw new Error("[@mantine/core] MantineProvider was not found in tree");return c}function Rx(){return iS().cssVariablesResolver}function sS(){return iS().getStyleNonce}function Lx(c){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(c)}function Mx(c){let e=c.replace("#","");if(e.length===3){const u=e.split("");e=[u[0],u[0],u[1],u[1],u[2],u[2]].join("")}if(e.length===8){const u=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:u}}const t=parseInt(e,16),i=t>>16&255,r=t>>8&255,a=t&255;return{r:i,g:r,b:a,a:1}}function Ix(c){const[e,t,i,r]=c.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:t,b:i,a:r||1}}function Nx(c){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,t=c.match(e);if(!t)return{r:0,g:0,b:0,a:1};const i=parseInt(t[1],10),r=parseInt(t[2],10)/100,a=parseInt(t[3],10)/100,u=t[5]?parseFloat(t[5]):void 0,h=(1-Math.abs(2*a-1))*r,d=i/60,p=h*(1-Math.abs(d%2-1)),g=a-h/2;let y,w,A;return d>=0&&d<1?(y=h,w=p,A=0):d>=1&&d<2?(y=p,w=h,A=0):d>=2&&d<3?(y=0,w=h,A=p):d>=3&&d<4?(y=0,w=p,A=h):d>=4&&d<5?(y=p,w=0,A=h):(y=h,w=0,A=p),{r:Math.round((y+g)*255),g:Math.round((w+g)*255),b:Math.round((A+g)*255),a:u||1}}function Bv(c){return Lx(c)?Mx(c):c.startsWith("rgb")?Ix(c):c.startsWith("hsl")?Nx(c):{r:0,g:0,b:0,a:1}}function Hf(c,e){if(c.startsWith("var("))return`color-mix(in srgb, ${c}, black ${e*100}%)`;const{r:t,g:i,b:r,a}=Bv(c),u=1-e,h=d=>Math.round(d*u);return`rgba(${h(t)}, ${h(i)}, ${h(r)}, ${a})`}function Xc(c,e){return typeof c.primaryShade=="number"?c.primaryShade:e==="dark"?c.primaryShade.dark:c.primaryShade.light}function cy(c){return c<=.03928?c/12.92:((c+.055)/1.055)**2.4}function Dx(c){const e=c.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Fx(c){if(c.startsWith("oklch("))return(Dx(c)||0)/100;const{r:e,g:t,b:i}=Bv(c),r=e/255,a=t/255,u=i/255,h=cy(r),d=cy(a),p=cy(u);return .2126*h+.7152*d+.0722*p}function wc(c,e=.179){return c.startsWith("var(")?!1:Fx(c)>e}function jv({color:c,theme:e,colorScheme:t}){if(typeof c!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof c}`);if(c==="bright")return{color:c,value:t==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:wc(t==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(c==="dimmed")return{color:c,value:t==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:wc(t==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(c==="white"||c==="black")return{color:c,value:c==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:wc(c==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${c}`};const[i,r]=c.split("."),a=r?Number(r):void 0,u=i in e.colors;if(u){const h=a!==void 0?e.colors[i][a]:e.colors[i][Xc(e,t||"light")];return{color:i,value:h,shade:a,isThemeColor:u,isLight:wc(h,e.luminanceThreshold),variable:r?`--mantine-color-${i}-${a}`:`--mantine-color-${i}-filled`}}return{color:c,value:c,isThemeColor:u,isLight:wc(c,e.luminanceThreshold),shade:a,variable:void 0}}function Ab(c,e){const t=jv({color:c||e.primaryColor,theme:e});return t.variable?`var(${t.variable})`:c}function bb(c,e){const t={from:(c==null?void 0:c.from)||e.defaultGradient.from,to:(c==null?void 0:c.to)||e.defaultGradient.to,deg:(c==null?void 0:c.deg)||e.defaultGradient.deg||0},i=Ab(t.from,e),r=Ab(t.to,e);return`linear-gradient(${t.deg}deg, ${i} 0%, ${r} 100%)`}function Es(c,e){if(typeof c!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(c.startsWith("var(")){const a=(1-e)*100;return`color-mix(in srgb, ${c}, transparent ${a}%)`}if(c.startsWith("oklch"))return c.includes("/")?c.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):c.replace(")",` / ${e})`);const{r:t,g:i,b:r}=Bv(c);return`rgba(${t}, ${i}, ${r}, ${e})`}const hl=Es,Ox=({color:c,theme:e,variant:t,gradient:i,autoContrast:r})=>{const a=jv({color:c,theme:e}),u=typeof r=="boolean"?r:e.autoContrast;if(t==="filled"){const h=u&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${c}-filled)`,hover:`var(--mantine-color-${c}-filled-hover)`,color:h,border:`${ee(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:h,border:`${ee(1)} solid transparent`}:{background:c,hover:Hf(c,.1),color:h,border:`${ee(1)} solid transparent`}}if(t==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${c}-light)`,hover:`var(--mantine-color-${c}-light-hover)`,color:`var(--mantine-color-${c}-light-color)`,border:`${ee(1)} solid transparent`};const h=e.colors[a.color][a.shade];return{background:Es(h,.1),hover:Es(h,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ee(1)} solid transparent`}}return{background:Es(c,.1),hover:Es(c,.12),color:c,border:`${ee(1)} solid transparent`}}if(t==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${c}-outline-hover)`,color:`var(--mantine-color-${c}-outline)`,border:`${ee(1)} solid var(--mantine-color-${c}-outline)`}:{background:"transparent",hover:Es(e.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${ee(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:Es(c,.05),color:c,border:`${ee(1)} solid ${c}`};if(t==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${c}-light-hover)`,color:`var(--mantine-color-${c}-light-color)`,border:`${ee(1)} solid transparent`};const h=e.colors[a.color][a.shade];return{background:"transparent",hover:Es(h,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ee(1)} solid transparent`}}return{background:"transparent",hover:Es(c,.12),color:c,border:`${ee(1)} solid transparent`}}return t==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${c}-light-color)`,border:`${ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:c,border:`${ee(1)} solid transparent`}:t==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:Hf(e.white,.01),color:`var(--mantine-color-${c}-filled)`,border:`${ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Hf(e.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Hf(e.white,.01),color:c,border:`${ee(1)} solid transparent`}:t==="gradient"?{background:bb(i,e),hover:bb(i,e),color:"var(--mantine-color-white)",border:"none"}:t==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ee(1)} solid var(--mantine-color-default-border)`}:{}},$x={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Sb="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Uv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:$x,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Ox,autoContrast:!1,luminanceThreshold:.3,fontFamily:Sb,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Sb,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ee(34),lineHeight:"1.3"},h2:{fontSize:ee(26),lineHeight:"1.35"},h3:{fontSize:ee(22),lineHeight:"1.4"},h4:{fontSize:ee(18),lineHeight:"1.45"},h5:{fontSize:ee(16),lineHeight:"1.5"},h6:{fontSize:ee(14),lineHeight:"1.5"}}},fontSizes:{xs:ee(12),sm:ee(14),md:ee(16),lg:ee(18),xl:ee(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ee(2),sm:ee(4),md:ee(8),lg:ee(16),xl:ee(32)},spacing:{xs:ee(10),sm:ee(12),md:ee(16),lg:ee(20),xl:ee(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ee(1)} ${ee(3)} rgba(0, 0, 0, 0.05), 0 ${ee(1)} ${ee(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ee(1)} ${ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ee(10)} ${ee(15)} ${ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${ee(7)} ${ee(7)} ${ee(-5)}`,md:`0 ${ee(1)} ${ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ee(20)} ${ee(25)} ${ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${ee(10)} ${ee(10)} ${ee(-5)}`,lg:`0 ${ee(1)} ${ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ee(28)} ${ee(23)} ${ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${ee(12)} ${ee(12)} ${ee(-7)}`,xl:`0 ${ee(1)} ${ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ee(36)} ${ee(28)} ${ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${ee(17)} ${ee(17)} ${ee(-7)}`},other:{},components:{}};function _b(c){return c==="auto"||c==="dark"||c==="light"}function zx({key:c="mantine-color-scheme-value"}={}){let e;return{get:t=>{if(typeof window>"u")return t;try{const i=window.localStorage.getItem(c);return _b(i)?i:t}catch{return t}},set:t=>{try{window.localStorage.setItem(c,t)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:t=>{e=i=>{i.storageArea===window.localStorage&&i.key===c&&_b(i.newValue)&&t(i.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(c)}}}const Hx="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",Eb="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function hy(c){return c<0||c>9?!1:parseInt(c.toString(),10)===c}function xb(c){if(!(c.primaryColor in c.colors))throw new Error(Hx);if(typeof c.primaryShade=="object"&&(!hy(c.primaryShade.dark)||!hy(c.primaryShade.light)))throw new Error(Eb);if(typeof c.primaryShade=="number"&&!hy(c.primaryShade))throw new Error(Eb)}function Bx(c,e){var i;if(!e)return xb(c),c;const t=Hv(c,e);return e.fontFamily&&!((i=e.headings)!=null&&i.fontFamily)&&(t.headings.fontFamily=e.fontFamily),xb(t),t}const Vv=H.createContext(null),jx=()=>H.useContext(Vv)||Uv;function rS(){const c=H.useContext(Vv);if(!c)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return c}function aS({theme:c,children:e,inherit:t=!0}){const i=jx(),r=H.useMemo(()=>Bx(t?i:Uv,c),[c,i,t]);return le.jsx(Vv.Provider,{value:r,children:e})}aS.displayName="@mantine/core/MantineThemeProvider";function Ux(){const c=rS(),e=sS(),t=No(c.breakpoints).reduce((i,r)=>{const a=c.breakpoints[r].includes("px"),u=Px(c.breakpoints[r]),h=a?`${u-.1}px`:wb(u-.1),d=a?`${u}px`:wb(u);return`${i}@media (max-width: ${h}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${d}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return le.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:t}})}function dy(c){return Object.entries(c).map(([e,t])=>`${e}: ${t};`).join("")}function Ac(c,e){return(Array.isArray(c)?c:[c]).reduce((i,r)=>`${r}{${i}}`,e)}function Vx(c,e){const t=dy(c.variables),i=t?Ac(e,t):"",r=dy(c.dark),a=dy(c.light),u=r?Ac(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,r):"",h=a?Ac(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,a):"";return`${i}${u}${h}`}function Wx({color:c,theme:e,autoContrast:t}){return(typeof t=="boolean"?t:e.autoContrast)&&jv({color:c||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Cb(c,e){return Wx({color:c.colors[c.primaryColor][Xc(c,e)],theme:c,autoContrast:null})}function Bf({theme:c,color:e,colorScheme:t,name:i=e,withColorValues:r=!0}){if(!c.colors[e])return{};if(t==="light"){const h=Xc(c,"light"),d={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${h})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${h===9?8:h+1})`,[`--mantine-color-${i}-light`]:hl(c.colors[e][h],.1),[`--mantine-color-${i}-light-hover`]:hl(c.colors[e][h],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${h})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${h})`,[`--mantine-color-${i}-outline-hover`]:hl(c.colors[e][h],.05)};return r?{[`--mantine-color-${i}-0`]:c.colors[e][0],[`--mantine-color-${i}-1`]:c.colors[e][1],[`--mantine-color-${i}-2`]:c.colors[e][2],[`--mantine-color-${i}-3`]:c.colors[e][3],[`--mantine-color-${i}-4`]:c.colors[e][4],[`--mantine-color-${i}-5`]:c.colors[e][5],[`--mantine-color-${i}-6`]:c.colors[e][6],[`--mantine-color-${i}-7`]:c.colors[e][7],[`--mantine-color-${i}-8`]:c.colors[e][8],[`--mantine-color-${i}-9`]:c.colors[e][9],...d}:d}const a=Xc(c,"dark"),u={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${a===9?8:a+1})`,[`--mantine-color-${i}-light`]:hl(c.colors[e][Math.max(0,a-2)],.15),[`--mantine-color-${i}-light-hover`]:hl(c.colors[e][Math.max(0,a-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(a-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(a-4,0)})`,[`--mantine-color-${i}-outline-hover`]:hl(c.colors[e][Math.max(a-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:c.colors[e][0],[`--mantine-color-${i}-1`]:c.colors[e][1],[`--mantine-color-${i}-2`]:c.colors[e][2],[`--mantine-color-${i}-3`]:c.colors[e][3],[`--mantine-color-${i}-4`]:c.colors[e][4],[`--mantine-color-${i}-5`]:c.colors[e][5],[`--mantine-color-${i}-6`]:c.colors[e][6],[`--mantine-color-${i}-7`]:c.colors[e][7],[`--mantine-color-${i}-8`]:c.colors[e][8],[`--mantine-color-${i}-9`]:c.colors[e][9],...u}:u}function Gx(c){return!!c&&typeof c=="object"&&"mantine-virtual-color"in c}function dl(c,e,t){No(e).forEach(i=>Object.assign(c,{[`--mantine-${t}-${i}`]:e[i]}))}const oS=c=>{const e=Xc(c,"light"),t=c.defaultRadius in c.radius?c.radius[c.defaultRadius]:ee(c.defaultRadius),i={variables:{"--mantine-scale":c.scale.toString(),"--mantine-cursor-type":c.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":c.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":c.fontSmoothing?"grayscale":"unset","--mantine-color-white":c.white,"--mantine-color-black":c.black,"--mantine-line-height":c.lineHeights.md,"--mantine-font-family":c.fontFamily,"--mantine-font-family-monospace":c.fontFamilyMonospace,"--mantine-font-family-headings":c.headings.fontFamily,"--mantine-heading-font-weight":c.headings.fontWeight,"--mantine-heading-text-wrap":c.headings.textWrap,"--mantine-radius-default":t,"--mantine-primary-color-filled":`var(--mantine-color-${c.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${c.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${c.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${c.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${c.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Cb(c,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":c.black,"--mantine-color-body":c.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${c.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Cb(c,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${c.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};dl(i.variables,c.breakpoints,"breakpoint"),dl(i.variables,c.spacing,"spacing"),dl(i.variables,c.fontSizes,"font-size"),dl(i.variables,c.lineHeights,"line-height"),dl(i.variables,c.shadows,"shadow"),dl(i.variables,c.radius,"radius"),c.colors[c.primaryColor].forEach((a,u)=>{i.variables[`--mantine-primary-color-${u}`]=`var(--mantine-color-${c.primaryColor}-${u})`}),No(c.colors).forEach(a=>{const u=c.colors[a];if(Gx(u)){Object.assign(i.light,Bf({theme:c,name:u.name,color:u.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,Bf({theme:c,name:u.name,color:u.dark,colorScheme:"dark",withColorValues:!0}));return}u.forEach((h,d)=>{i.variables[`--mantine-color-${a}-${d}`]=h}),Object.assign(i.light,Bf({theme:c,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,Bf({theme:c,color:a,colorScheme:"dark",withColorValues:!1}))});const r=c.headings.sizes;return No(r).forEach(a=>{i.variables[`--mantine-${a}-font-size`]=r[a].fontSize,i.variables[`--mantine-${a}-line-height`]=r[a].lineHeight,i.variables[`--mantine-${a}-font-weight`]=r[a].fontWeight||c.headings.fontWeight}),i};function Xx({theme:c,generator:e}){const t=oS(c),i=e==null?void 0:e(c);return i?Hv(t,i):t}const fy=oS(Uv);function qx(c){const e={variables:{},light:{},dark:{}};return No(c.variables).forEach(t=>{fy.variables[t]!==c.variables[t]&&(e.variables[t]=c.variables[t])}),No(c.light).forEach(t=>{fy.light[t]!==c.light[t]&&(e.light[t]=c.light[t])}),No(c.dark).forEach(t=>{fy.dark[t]!==c.dark[t]&&(e.dark[t]=c.dark[t])}),e}function Yx(c){return`
  ${c}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${c}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function lS({cssVariablesSelector:c,deduplicateCssVariables:e}){const t=rS(),i=sS(),r=Rx(),a=Xx({theme:t,generator:r}),u=c===":root"&&e,h=u?qx(a):a,d=Vx(h,c);return d?le.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${d}${u?"":Yx(c)}`}}):null}lS.displayName="@mantine/CssVariables";function Kx(){const c=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||c(...e)}}function fl(c,e){var r;const t=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=c!=="auto"?c:t?"dark":"light";(r=e())==null||r.setAttribute("data-mantine-color-scheme",i)}function Qx({manager:c,defaultColorScheme:e,getRootElement:t,forceColorScheme:i}){const r=H.useRef(null),[a,u]=H.useState(()=>c.get(e)),h=i||a,d=H.useCallback(g=>{i||(fl(g,t),u(g),c.set(g))},[c.set,h,i]),p=H.useCallback(()=>{u(e),fl(e,t),c.clear()},[c.clear,e]);return H.useEffect(()=>(c.subscribe(d),c.unsubscribe),[c.subscribe,c.unsubscribe]),tS(()=>{fl(c.get(e),t)},[]),H.useEffect(()=>{var y;if(i)return fl(i,t),()=>{};i===void 0&&fl(a,t),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const g=w=>{a==="auto"&&fl(w.matches?"dark":"light",t)};return(y=r.current)==null||y.addEventListener("change",g),()=>{var w;return(w=r.current)==null?void 0:w.removeEventListener("change",g)}},[a,i]),{colorScheme:h,setColorScheme:d,clearColorScheme:p}}function Jx({respectReducedMotion:c,getRootElement:e}){tS(()=>{var t;c&&((t=e())==null||t.setAttribute("data-respect-reduced-motion","true"))},[c])}Kx();function uS({theme:c,children:e,getStyleNonce:t,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:a=!0,withCssVariables:u=!0,cssVariablesSelector:h=":root",classNamesPrefix:d="mantine",colorSchemeManager:p=zx(),defaultColorScheme:g="light",getRootElement:y=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:A,stylesTransform:S}){const{colorScheme:C,setColorScheme:T,clearColorScheme:k}=Qx({defaultColorScheme:g,forceColorScheme:A,manager:p,getRootElement:y});return Jx({respectReducedMotion:(c==null?void 0:c.respectReducedMotion)||!1,getRootElement:y}),le.jsx(nS.Provider,{value:{colorScheme:C,setColorScheme:T,clearColorScheme:k,getRootElement:y,classNamesPrefix:d,getStyleNonce:t,cssVariablesResolver:w,cssVariablesSelector:h,withStaticClasses:i,stylesTransform:S},children:le.jsxs(aS,{theme:c,children:[u&&le.jsx(lS,{cssVariablesSelector:h,deduplicateCssVariables:a}),r&&le.jsx(Ux,{}),e]})})}uS.displayName="@mantine/core/MantineProvider";var bc={},kb;function Zx(){if(kb)return bc;kb=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.parse=u,bc.serialize=p;const c=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,a=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,A){const S=new a,C=w.length;if(C<2)return S;const T=(A==null?void 0:A.decode)||g;let k=0;do{const R=w.indexOf("=",k);if(R===-1)break;const M=w.indexOf(";",k),D=M===-1?C:M;if(R>D){k=w.lastIndexOf(";",R-1)+1;continue}const $=h(w,k,R),j=d(w,R,$),B=w.slice($,j);if(S[B]===void 0){let K=h(w,R+1,D),Z=d(w,D,K);const me=T(w.slice(K,Z));S[B]=me}k=D+1}while(k<C);return S}function h(w,A,S){do{const C=w.charCodeAt(A);if(C!==32&&C!==9)return A}while(++A<S);return S}function d(w,A,S){for(;A>S;){const C=w.charCodeAt(--A);if(C!==32&&C!==9)return A+1}return S}function p(w,A,S){const C=(S==null?void 0:S.encode)||encodeURIComponent;if(!c.test(w))throw new TypeError(`argument name is invalid: ${w}`);const T=C(A);if(!e.test(T))throw new TypeError(`argument val is invalid: ${A}`);let k=w+"="+T;if(!S)return k;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);k+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);k+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);k+="; Path="+S.path}if(S.expires){if(!y(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);k+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(k+="; HttpOnly"),S.secure&&(k+="; Secure"),S.partitioned&&(k+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return k}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function y(w){return r.call(w)==="[object Date]"}return bc}Zx();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tb="popstate";function eC(c={}){function e(i,r){let{pathname:a,search:u,hash:h}=i.location;return _y("",{pathname:a,search:u,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:qc(r)}return nC(e,t,null,c)}function ot(c,e){if(c===!1||c===null||typeof c>"u")throw new Error(e)}function zi(c,e){if(!c){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tC(){return Math.random().toString(36).substring(2,10)}function Pb(c,e){return{usr:c.state,key:c.key,idx:e}}function _y(c,e,t=null,i){return{pathname:typeof c=="string"?c:c.pathname,search:"",hash:"",...typeof e=="string"?Ru(e):e,state:t,key:e&&e.key||i||tC()}}function qc({pathname:c="/",search:e="",hash:t=""}){return e&&e!=="?"&&(c+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(c+=t.charAt(0)==="#"?t:"#"+t),c}function Ru(c){let e={};if(c){let t=c.indexOf("#");t>=0&&(e.hash=c.substring(t),c=c.substring(0,t));let i=c.indexOf("?");i>=0&&(e.search=c.substring(i),c=c.substring(0,i)),c&&(e.pathname=c)}return e}function nC(c,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,u=r.history,h="POP",d=null,p=g();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function g(){return(u.state||{idx:null}).idx}function y(){h="POP";let T=g(),k=T==null?null:T-p;p=T,d&&d({action:h,location:C.location,delta:k})}function w(T,k){h="PUSH";let R=_y(C.location,T,k);p=g()+1;let M=Pb(R,p),D=C.createHref(R);try{u.pushState(M,"",D)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;r.location.assign(D)}a&&d&&d({action:h,location:C.location,delta:1})}function A(T,k){h="REPLACE";let R=_y(C.location,T,k);p=g();let M=Pb(R,p),D=C.createHref(R);u.replaceState(M,"",D),a&&d&&d({action:h,location:C.location,delta:0})}function S(T){let k=r.location.origin!=="null"?r.location.origin:r.location.href,R=typeof T=="string"?T:qc(T);return R=R.replace(/ $/,"%20"),ot(k,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,k)}let C={get action(){return h},get location(){return c(r,u)},listen(T){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Tb,y),d=T,()=>{r.removeEventListener(Tb,y),d=null}},createHref(T){return e(r,T)},createURL:S,encodeLocation(T){let k=S(T);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:w,replace:A,go(T){return u.go(T)}};return C}function cS(c,e,t="/"){return iC(c,e,t,!1)}function iC(c,e,t,i){let r=typeof e=="string"?Ru(e):e,a=ra(r.pathname||"/",t);if(a==null)return null;let u=hS(c);sC(u);let h=null;for(let d=0;h==null&&d<u.length;++d){let p=gC(a);h=fC(u[d],p,i)}return h}function hS(c,e=[],t=[],i=""){let r=(a,u,h)=>{let d={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:u,route:a};d.relativePath.startsWith("/")&&(ot(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let p=nr([i,d.relativePath]),g=t.concat(d);a.children&&a.children.length>0&&(ot(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),hS(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:hC(p,a.index),routesMeta:g})};return c.forEach((a,u)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))r(a,u);else for(let d of dS(a.path))r(a,u,d)}),e}function dS(c){let e=c.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let u=dS(i.join("/")),h=[];return h.push(...u.map(d=>d===""?a:[a,d].join("/"))),r&&h.push(...u),h.map(d=>c.startsWith("/")&&d===""?"/":d)}function sC(c){c.sort((e,t)=>e.score!==t.score?t.score-e.score:dC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var rC=/^:[\w-]+$/,aC=3,oC=2,lC=1,uC=10,cC=-2,Rb=c=>c==="*";function hC(c,e){let t=c.split("/"),i=t.length;return t.some(Rb)&&(i+=cC),e&&(i+=oC),t.filter(r=>!Rb(r)).reduce((r,a)=>r+(rC.test(a)?aC:a===""?lC:uC),i)}function dC(c,e){return c.length===e.length&&c.slice(0,-1).every((i,r)=>i===e[r])?c[c.length-1]-e[e.length-1]:0}function fC(c,e,t=!1){let{routesMeta:i}=c,r={},a="/",u=[];for(let h=0;h<i.length;++h){let d=i[h],p=h===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=xp({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),w=d.route;if(!y&&p&&t&&!i[i.length-1].route.index&&(y=xp({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),u.push({params:r,pathname:nr([a,y.pathname]),pathnameBase:wC(nr([a,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(a=nr([a,y.pathnameBase]))}return u}function xp(c,e){typeof c=="string"&&(c={path:c,caseSensitive:!1,end:!0});let[t,i]=pC(c.path,c.caseSensitive,c.end),r=e.match(t);if(!r)return null;let a=r[0],u=a.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},w)=>{if(g==="*"){let S=h[w]||"";u=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const A=h[w];return y&&!A?p[g]=void 0:p[g]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:c}}function pC(c,e=!1,t=!0){zi(c==="*"||!c.endsWith("*")||c.endsWith("/*"),`Route path "${c}" will be treated as if it were "${c.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${c.replace(/\*$/,"/*")}".`);let i=[],r="^"+c.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return c.endsWith("*")?(i.push({paramName:"*"}),r+=c==="*"||c==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":c!==""&&c!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function gC(c){try{return c.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zi(!1,`The URL path "${c}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),c}}function ra(c,e){if(e==="/")return c;if(!c.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=c.charAt(t);return i&&i!=="/"?null:c.slice(t)||"/"}function mC(c,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof c=="string"?Ru(c):c;return{pathname:t?t.startsWith("/")?t:yC(t,e):e,search:AC(i),hash:bC(r)}}function yC(c,e){let t=e.replace(/\/+$/,"").split("/");return c.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function py(c,e,t,i){return`Cannot include a '${c}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vC(c){return c.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wv(c){let e=vC(c);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Gv(c,e,t,i=!1){let r;typeof c=="string"?r=Ru(c):(r={...c},ot(!r.pathname||!r.pathname.includes("?"),py("?","pathname","search",r)),ot(!r.pathname||!r.pathname.includes("#"),py("#","pathname","hash",r)),ot(!r.search||!r.search.includes("#"),py("#","search","hash",r)));let a=c===""||r.pathname==="",u=a?"/":r.pathname,h;if(u==null)h=t;else{let y=e.length-1;if(!i&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;r.pathname=w.join("/")}h=y>=0?e[y]:"/"}let d=mC(r,h),p=u&&u!=="/"&&u.endsWith("/"),g=(a||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}var nr=c=>c.join("/").replace(/\/\/+/g,"/"),wC=c=>c.replace(/\/+$/,"").replace(/^\/*/,"/"),AC=c=>!c||c==="?"?"":c.startsWith("?")?c:"?"+c,bC=c=>!c||c==="#"?"":c.startsWith("#")?c:"#"+c;function SC(c){return c!=null&&typeof c.status=="number"&&typeof c.statusText=="string"&&typeof c.internal=="boolean"&&"data"in c}var fS=["POST","PUT","PATCH","DELETE"];new Set(fS);var _C=["GET",...fS];new Set(_C);var Lu=H.createContext(null);Lu.displayName="DataRouter";var Zp=H.createContext(null);Zp.displayName="DataRouterState";var pS=H.createContext({isTransitioning:!1});pS.displayName="ViewTransition";var EC=H.createContext(new Map);EC.displayName="Fetchers";var xC=H.createContext(null);xC.displayName="Await";var ji=H.createContext(null);ji.displayName="Navigation";var _d=H.createContext(null);_d.displayName="Location";var gs=H.createContext({outlet:null,matches:[],isDataRoute:!1});gs.displayName="Route";var Xv=H.createContext(null);Xv.displayName="RouteError";function CC(c,{relative:e}={}){ot(Mu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=H.useContext(ji),{hash:r,pathname:a,search:u}=Ed(c,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:nr([t,a])),i.createHref({pathname:h,search:u,hash:r})}function Mu(){return H.useContext(_d)!=null}function ua(){return ot(Mu(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(_d).location}var gS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mS(c){H.useContext(ji).static||H.useLayoutEffect(c)}function yS(){let{isDataRoute:c}=H.useContext(gs);return c?zC():kC()}function kC(){ot(Mu(),"useNavigate() may be used only in the context of a <Router> component.");let c=H.useContext(Lu),{basename:e,navigator:t}=H.useContext(ji),{matches:i}=H.useContext(gs),{pathname:r}=ua(),a=JSON.stringify(Wv(i)),u=H.useRef(!1);return mS(()=>{u.current=!0}),H.useCallback((d,p={})=>{if(zi(u.current,gS),!u.current)return;if(typeof d=="number"){t.go(d);return}let g=Gv(d,JSON.parse(a),r,p.relative==="path");c==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:nr([e,g.pathname])),(p.replace?t.replace:t.push)(g,p.state,p)},[e,t,a,r,c])}H.createContext(null);function Ed(c,{relative:e}={}){let{matches:t}=H.useContext(gs),{pathname:i}=ua(),r=JSON.stringify(Wv(t));return H.useMemo(()=>Gv(c,JSON.parse(r),i,e==="path"),[c,r,i,e])}function TC(c,e){return vS(c,e)}function vS(c,e,t,i){var R;ot(Mu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:a}=H.useContext(ji),{matches:u}=H.useContext(gs),h=u[u.length-1],d=h?h.params:{},p=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let M=y&&y.path||"";wS(p,!y||M.endsWith("*")||M.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${M}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${M}"> to <Route path="${M==="/"?"*":`${M}/*`}">.`)}let w=ua(),A;if(e){let M=typeof e=="string"?Ru(e):e;ot(g==="/"||((R=M.pathname)==null?void 0:R.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${M.pathname}" was given in the \`location\` prop.`),A=M}else A=w;let S=A.pathname||"/",C=S;if(g!=="/"){let M=g.replace(/^\//,"").split("/");C="/"+S.replace(/^\//,"").split("/").slice(M.length).join("/")}let T=!a&&t&&t.matches&&t.matches.length>0?t.matches:cS(c,{pathname:C});zi(y||T!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),zi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=IC(T&&T.map(M=>Object.assign({},M,{params:Object.assign({},d,M.params),pathname:nr([g,r.encodeLocation?r.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?g:nr([g,r.encodeLocation?r.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),u,t,i);return e&&k?H.createElement(_d.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},k):k}function PC(){let c=$C(),e=SC(c)?`${c.status} ${c.statusText}`:c instanceof Error?c.message:JSON.stringify(c),t=c instanceof Error?c.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",c),u=H.createElement(H.Fragment,null,H.createElement("p",null,"💿 Hey developer 👋"),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:a},"ErrorBoundary")," or"," ",H.createElement("code",{style:a},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:r},t):null,u)}var RC=H.createElement(PC,null),LC=class extends H.Component{constructor(c){super(c),this.state={location:c.location,revalidation:c.revalidation,error:c.error}}static getDerivedStateFromError(c){return{error:c}}static getDerivedStateFromProps(c,e){return e.location!==c.location||e.revalidation!=="idle"&&c.revalidation==="idle"?{error:c.error,location:c.location,revalidation:c.revalidation}:{error:c.error!==void 0?c.error:e.error,location:e.location,revalidation:c.revalidation||e.revalidation}}componentDidCatch(c,e){console.error("React Router caught the following error during render",c,e)}render(){return this.state.error!==void 0?H.createElement(gs.Provider,{value:this.props.routeContext},H.createElement(Xv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function MC({routeContext:c,match:e,children:t}){let i=H.useContext(Lu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(gs.Provider,{value:c},t)}function IC(c,e=[],t=null,i=null){if(c==null){if(!t)return null;if(t.errors)c=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)c=t.matches;else return null}let r=c,a=t==null?void 0:t.errors;if(a!=null){let d=r.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);ot(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let u=!1,h=-1;if(t)for(let d=0;d<r.length;d++){let p=r[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=d),p.route.id){let{loaderData:g,errors:y}=t,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!y||y[p.route.id]===void 0);if(p.route.lazy||w){u=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}return r.reduceRight((d,p,g)=>{let y,w=!1,A=null,S=null;t&&(y=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||RC,u&&(h<0&&g===0?(wS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):h===g&&(w=!0,S=p.route.hydrateFallbackElement||null)));let C=e.concat(r.slice(0,g+1)),T=()=>{let k;return y?k=A:w?k=S:p.route.Component?k=H.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=d,H.createElement(MC,{match:p,routeContext:{outlet:d,matches:C,isDataRoute:t!=null},children:k})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?H.createElement(LC,{location:t.location,revalidation:t.revalidation,component:A,error:y,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):T()},null)}function qv(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NC(c){let e=H.useContext(Lu);return ot(e,qv(c)),e}function DC(c){let e=H.useContext(Zp);return ot(e,qv(c)),e}function FC(c){let e=H.useContext(gs);return ot(e,qv(c)),e}function Yv(c){let e=FC(c),t=e.matches[e.matches.length-1];return ot(t.route.id,`${c} can only be used on routes that contain a unique "id"`),t.route.id}function OC(){return Yv("useRouteId")}function $C(){var i;let c=H.useContext(Xv),e=DC("useRouteError"),t=Yv("useRouteError");return c!==void 0?c:(i=e.errors)==null?void 0:i[t]}function zC(){let{router:c}=NC("useNavigate"),e=Yv("useNavigate"),t=H.useRef(!1);return mS(()=>{t.current=!0}),H.useCallback(async(r,a={})=>{zi(t.current,gS),t.current&&(typeof r=="number"?c.navigate(r):await c.navigate(r,{fromRouteId:e,...a}))},[c,e])}var Lb={};function wS(c,e,t){!e&&!Lb[c]&&(Lb[c]=!0,zi(!1,t))}H.memo(HC);function HC({routes:c,future:e,state:t}){return vS(c,void 0,t,e)}function Mb({to:c,replace:e,state:t,relative:i}){ot(Mu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=H.useContext(ji);zi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=H.useContext(gs),{pathname:u}=ua(),h=yS(),d=Gv(c,Wv(a),u,i==="path"),p=JSON.stringify(d);return H.useEffect(()=>{h(JSON.parse(p),{replace:e,state:t,relative:i})},[h,p,i,e,t]),null}function Tc(c){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BC({basename:c="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1}){ot(!Mu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=c.replace(/^\/*/,"/"),h=H.useMemo(()=>({basename:u,navigator:r,static:a,future:{}}),[u,r,a]);typeof t=="string"&&(t=Ru(t));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:w="default"}=t,A=H.useMemo(()=>{let S=ra(d,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:y,key:w},navigationType:i}},[u,d,p,g,y,w,i]);return zi(A!=null,`<Router basename="${u}"> is not able to match the URL "${d}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:H.createElement(ji.Provider,{value:h},H.createElement(_d.Provider,{children:e,value:A}))}function jC({children:c,location:e}){return TC(Ey(c),e)}function Ey(c,e=[]){let t=[];return H.Children.forEach(c,(i,r)=>{if(!H.isValidElement(i))return;let a=[...e,r];if(i.type===H.Fragment){t.push.apply(t,Ey(i.props.children,a));return}ot(i.type===Tc,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Ey(i.props.children,a)),t.push(u)}),t}var Xf="get",qf="application/x-www-form-urlencoded";function eg(c){return c!=null&&typeof c.tagName=="string"}function UC(c){return eg(c)&&c.tagName.toLowerCase()==="button"}function VC(c){return eg(c)&&c.tagName.toLowerCase()==="form"}function WC(c){return eg(c)&&c.tagName.toLowerCase()==="input"}function GC(c){return!!(c.metaKey||c.altKey||c.ctrlKey||c.shiftKey)}function XC(c,e){return c.button===0&&(!e||e==="_self")&&!GC(c)}var jf=null;function qC(){if(jf===null)try{new FormData(document.createElement("form"),0),jf=!1}catch{jf=!0}return jf}var YC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gy(c){return c!=null&&!YC.has(c)?(zi(!1,`"${c}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qf}"`),null):c}function KC(c,e){let t,i,r,a,u;if(VC(c)){let h=c.getAttribute("action");i=h?ra(h,e):null,t=c.getAttribute("method")||Xf,r=gy(c.getAttribute("enctype"))||qf,a=new FormData(c)}else if(UC(c)||WC(c)&&(c.type==="submit"||c.type==="image")){let h=c.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=c.getAttribute("formaction")||h.getAttribute("action");if(i=d?ra(d,e):null,t=c.getAttribute("formmethod")||h.getAttribute("method")||Xf,r=gy(c.getAttribute("formenctype"))||gy(h.getAttribute("enctype"))||qf,a=new FormData(h,c),!qC()){let{name:p,type:g,value:y}=c;if(g==="image"){let w=p?`${p}.`:"";a.append(`${w}x`,"0"),a.append(`${w}y`,"0")}else p&&a.append(p,y)}}else{if(eg(c))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Xf,i=null,r=qf,u=c}return a&&r==="text/plain"&&(u=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:u}}function Kv(c,e){if(c===!1||c===null||typeof c>"u")throw new Error(e)}async function QC(c,e){if(c.id in e)return e[c.id];try{let t=await import(c.module);return e[c.id]=t,t}catch(t){return console.error(`Error loading route module \`${c.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function JC(c){return c==null?!1:c.href==null?c.rel==="preload"&&typeof c.imageSrcSet=="string"&&typeof c.imageSizes=="string":typeof c.rel=="string"&&typeof c.href=="string"}async function ZC(c,e,t){let i=await Promise.all(c.map(async r=>{let a=e.routes[r.route.id];if(a){let u=await QC(a,t);return u.links?u.links():[]}return[]}));return ik(i.flat(1).filter(JC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Ib(c,e,t,i,r,a){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,h=(d,p)=>{var g;return t[p].pathname!==d.pathname||((g=t[p].route.path)==null?void 0:g.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,p)=>u(d,p)||h(d,p)):a==="data"?e.filter((d,p)=>{var y;let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(u(d,p)||h(d,p))return!0;if(d.route.shouldRevalidate){let w=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(c,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function ek(c,e){return tk(c.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let r=[i.module];return i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function tk(c){return[...new Set(c)]}function nk(c){let e={},t=Object.keys(c).sort();for(let i of t)e[i]=c[i];return e}function ik(c,e){let t=new Set;return new Set(e),c.reduce((i,r)=>{let a=JSON.stringify(nk(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function sk(c){let e=typeof c=="string"?new URL(c,typeof window>"u"?"server://singlefetch/":window.location.origin):c;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function rk(){let c=H.useContext(Lu);return Kv(c,"You must render this element inside a <DataRouterContext.Provider> element"),c}function ak(){let c=H.useContext(Zp);return Kv(c,"You must render this element inside a <DataRouterStateContext.Provider> element"),c}var Qv=H.createContext(void 0);Qv.displayName="FrameworkContext";function AS(){let c=H.useContext(Qv);return Kv(c,"You must render this element inside a <HydratedRouter> element"),c}function ok(c,e){let t=H.useContext(Qv),[i,r]=H.useState(!1),[a,u]=H.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=e,w=H.useRef(null);H.useEffect(()=>{if(c==="render"&&u(!0),c==="viewport"){let C=k=>{k.forEach(R=>{u(R.isIntersecting)})},T=new IntersectionObserver(C,{threshold:.5});return w.current&&T.observe(w.current),()=>{T.disconnect()}}},[c]),H.useEffect(()=>{if(i){let C=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(C)}}},[i]);let A=()=>{r(!0)},S=()=>{r(!1),u(!1)};return t?c!=="intent"?[a,w,{}]:[a,w,{onFocus:Sc(h,A),onBlur:Sc(d,S),onMouseEnter:Sc(p,A),onMouseLeave:Sc(g,S),onTouchStart:Sc(y,A)}]:[!1,w,{}]}function Sc(c,e){return t=>{c&&c(t),t.defaultPrevented||e(t)}}function lk({page:c,...e}){let{router:t}=rk(),i=H.useMemo(()=>cS(t.routes,c,t.basename),[t.routes,c,t.basename]);return i?H.createElement(ck,{page:c,matches:i,...e}):null}function uk(c){let{manifest:e,routeModules:t}=AS(),[i,r]=H.useState([]);return H.useEffect(()=>{let a=!1;return ZC(c,e,t).then(u=>{a||r(u)}),()=>{a=!0}},[c,e,t]),i}function ck({page:c,matches:e,...t}){let i=ua(),{manifest:r,routeModules:a}=AS(),{loaderData:u,matches:h}=ak(),d=H.useMemo(()=>Ib(c,e,h,r,i,"data"),[c,e,h,r,i]),p=H.useMemo(()=>Ib(c,e,h,r,i,"assets"),[c,e,h,r,i]),g=H.useMemo(()=>{if(c===i.pathname+i.search+i.hash)return[];let A=new Set,S=!1;if(e.forEach(T=>{var R;let k=r.routes[T.route.id];!k||!k.hasLoader||(!d.some(M=>M.route.id===T.route.id)&&T.route.id in u&&((R=a[T.route.id])!=null&&R.shouldRevalidate)||k.hasClientLoader?S=!0:A.add(T.route.id))}),A.size===0)return[];let C=sk(c);return S&&A.size>0&&C.searchParams.set("_routes",e.filter(T=>A.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[u,i,r,d,e,c,a]),y=H.useMemo(()=>ek(p,r),[p,r]),w=uk(p);return H.createElement(H.Fragment,null,g.map(A=>H.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),y.map(A=>H.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:S})=>H.createElement("link",{key:A,...S})))}function hk(...c){return e=>{c.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bS&&(window.__reactRouterVersion="7.1.5")}catch{}function dk({basename:c,children:e,window:t}){let i=H.useRef();i.current==null&&(i.current=eC({window:t,v5Compat:!0}));let r=i.current,[a,u]=H.useState({action:r.action,location:r.location}),h=H.useCallback(d=>{H.startTransition(()=>u(d))},[u]);return H.useLayoutEffect(()=>r.listen(h),[r,h]),H.createElement(BC,{basename:c,children:e,location:a.location,navigationType:a.action,navigator:r})}var SS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jv=H.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:u,state:h,target:d,to:p,preventScrollReset:g,viewTransition:y,...w},A){let{basename:S}=H.useContext(ji),C=typeof p=="string"&&SS.test(p),T,k=!1;if(typeof p=="string"&&C&&(T=p,bS))try{let Z=new URL(window.location.href),me=p.startsWith("//")?new URL(Z.protocol+p):new URL(p),de=ra(me.pathname,S);me.origin===Z.origin&&de!=null?p=de+me.search+me.hash:k=!0}catch{zi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=CC(p,{relative:r}),[M,D,$]=ok(i,w),j=mk(p,{replace:u,state:h,target:d,preventScrollReset:g,relative:r,viewTransition:y});function B(Z){e&&e(Z),Z.defaultPrevented||j(Z)}let K=H.createElement("a",{...w,...$,href:T||R,onClick:k||a?e:B,ref:hk(A,D),target:d,"data-discover":!C&&t==="render"?"true":void 0});return M&&!C?H.createElement(H.Fragment,null,K,H.createElement(lk,{page:R})):K});Jv.displayName="Link";var fk=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:u,viewTransition:h,children:d,...p},g){let y=Ed(u,{relative:p.relative}),w=ua(),A=H.useContext(Zp),{navigator:S,basename:C}=H.useContext(ji),T=A!=null&&bk(y)&&h===!0,k=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,R=w.pathname,M=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(R=R.toLowerCase(),M=M?M.toLowerCase():null,k=k.toLowerCase()),M&&C&&(M=ra(M,C)||M);const D=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let $=R===k||!r&&R.startsWith(k)&&R.charAt(D)==="/",j=M!=null&&(M===k||!r&&M.startsWith(k)&&M.charAt(k.length)==="/"),B={isActive:$,isPending:j,isTransitioning:T},K=$?e:void 0,Z;typeof i=="function"?Z=i(B):Z=[i,$?"active":null,j?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let me=typeof a=="function"?a(B):a;return H.createElement(Jv,{...p,"aria-current":K,className:Z,ref:g,style:me,to:u,viewTransition:h},typeof d=="function"?d(B):d)});fk.displayName="NavLink";var pk=H.forwardRef(({discover:c="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:u=Xf,action:h,onSubmit:d,relative:p,preventScrollReset:g,viewTransition:y,...w},A)=>{let S=wk(),C=Ak(h,{relative:p}),T=u.toLowerCase()==="get"?"get":"post",k=typeof h=="string"&&SS.test(h),R=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let D=M.nativeEvent.submitter,$=(D==null?void 0:D.getAttribute("formmethod"))||u;S(D||M.currentTarget,{fetcherKey:e,method:$,navigate:t,replace:r,state:a,relative:p,preventScrollReset:g,viewTransition:y})};return H.createElement("form",{ref:A,method:T,action:C,onSubmit:i?d:R,...w,"data-discover":!k&&c==="render"?"true":void 0})});pk.displayName="Form";function gk(c){return`${c} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _S(c){let e=H.useContext(Lu);return ot(e,gk(c)),e}function mk(c,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:u}={}){let h=yS(),d=ua(),p=Ed(c,{relative:a});return H.useCallback(g=>{if(XC(g,e)){g.preventDefault();let y=t!==void 0?t:qc(d)===qc(p);h(c,{replace:y,state:i,preventScrollReset:r,relative:a,viewTransition:u})}},[d,h,p,t,i,e,c,r,a,u])}var yk=0,vk=()=>`__${String(++yk)}__`;function wk(){let{router:c}=_S("useSubmit"),{basename:e}=H.useContext(ji),t=OC();return H.useCallback(async(i,r={})=>{let{action:a,method:u,encType:h,formData:d,body:p}=KC(i,e);if(r.navigate===!1){let g=r.fetcherKey||vk();await c.fetch(g,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||u,formEncType:r.encType||h,flushSync:r.flushSync})}else await c.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:p,formMethod:r.method||u,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[c,e,t])}function Ak(c,{relative:e}={}){let{basename:t}=H.useContext(ji),i=H.useContext(gs);ot(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Ed(c||".",{relative:e})},u=ua();if(c==null){a.search=u.search;let h=new URLSearchParams(a.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();a.search=g?`?${g}`:""}}return(!c||c===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:nr([t,a.pathname])),qc(a)}function bk(c,e={}){let t=H.useContext(pS);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_S("useViewTransitionState"),r=Ed(c,{relative:e.relative});if(!t.isTransitioning)return!1;let a=ra(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=ra(t.nextLocation.pathname,i)||t.nextLocation.pathname;return xp(r.pathname,u)!=null||xp(r.pathname,a)!=null}new TextEncoder;var Wc={};Wc.d=(c,e)=>{for(var t in e)Wc.o(e,t)&&!Wc.o(c,t)&&Object.defineProperty(c,t,{enumerable:!0,get:e[t]})};Wc.o=(c,e)=>Object.prototype.hasOwnProperty.call(c,e);var Ce=globalThis.pdfjsLib={};Wc.d(Ce,{AbortException:()=>aa,AnnotationEditorLayer:()=>Iv,AnnotationEditorParamsType:()=>ze,AnnotationEditorType:()=>Pe,AnnotationEditorUIManager:()=>Fo,AnnotationLayer:()=>mP,AnnotationMode:()=>kr,ColorPicker:()=>Lp,DOMSVGFactory:()=>o0,DrawLayer:()=>Fv,FeatureTest:()=>vn,GlobalWorkerOptions:()=>tr,ImageKind:()=>Yf,InvalidPDFException:()=>Cy,MissingPDFException:()=>Yc,OPS:()=>xi,OutputScale:()=>Ty,PDFDataRangeTransport:()=>x1,PDFDateString:()=>i0,PDFWorker:()=>El,PasswordResponses:()=>xk,PermissionFlag:()=>Ek,PixelsPerInch:()=>oa,RenderingCancelledException:()=>t0,TextLayer:()=>Kc,TouchManager:()=>Pp,UnexpectedResponseException:()=>Cp,Util:()=>ye,VerbosityLevel:()=>tg,XfaLayer:()=>k1,build:()=>KT,createValidAbsoluteUrl:()=>Pk,fetchData:()=>rg,getDocument:()=>BT,getFilenameFromUrl:()=>$k,getPdfFilenameFromUrl:()=>zk,getXfaPageViewport:()=>Hk,isDataScheme:()=>ag,isPdfFile:()=>n0,noContextMenu:()=>Hi,normalizeUnicode:()=>Dk,setLayerDimensions:()=>Do,shadow:()=>Fe,stopEvent:()=>Jn,version:()=>YT});const ln=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),ES=[1,0,0,1,0,0],xy=[.001,0,0,.001,0,0],Sk=1e7,my=1.35,Kn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},kr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},_k="pdfjs_internal_editor_",Pe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ze={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Ek={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},tg={ERRORS:0,WARNINGS:1,INFOS:5},xi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},xk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ng=tg.WARNINGS;function Ck(c){Number.isInteger(c)&&(ng=c)}function kk(){return ng}function ig(c){ng>=tg.INFOS&&console.log(`Info: ${c}`)}function Re(c){ng>=tg.WARNINGS&&console.log(`Warning: ${c}`)}function Qe(c){throw new Error(c)}function _t(c,e){c||Qe(e)}function Tk(c){switch(c==null?void 0:c.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Pk(c,e=null,t=null){if(!c)return null;try{if(t&&typeof c=="string"){if(t.addDefaultProtocol&&c.startsWith("www.")){const r=c.match(/\./g);(r==null?void 0:r.length)>=2&&(c=`http://${c}`)}if(t.tryConvertEncoding)try{c=Nk(c)}catch{}}const i=e?new URL(c,e):new URL(c);if(Tk(i))return i}catch{}return null}function Fe(c,e,t,i=!1){return Object.defineProperty(c,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const ca=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class Nb extends ca{constructor(e,t){super(e,"PasswordException"),this.code=t}}class yy extends ca{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Cy extends ca{constructor(e){super(e,"InvalidPDFException")}}class Yc extends ca{constructor(e){super(e,"MissingPDFException")}}class Cp extends ca{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Rk extends ca{constructor(e){super(e,"FormatError")}}class aa extends ca{constructor(e){super(e,"AbortException")}}function xS(c){(typeof c!="object"||(c==null?void 0:c.length)===void 0)&&Qe("Invalid argument for bytesToString");const e=c.length,t=8192;if(e<t)return String.fromCharCode.apply(null,c);const i=[];for(let r=0;r<e;r+=t){const a=Math.min(r+t,e),u=c.subarray(r,a);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function sg(c){typeof c!="string"&&Qe("Invalid argument for stringToBytes");const e=c.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=c.charCodeAt(i)&255;return t}function Lk(c){return String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255)}function Zv(c){const e=Object.create(null);for(const[t,i]of c)e[t]=i;return e}function Mk(){const c=new Uint8Array(4);return c[0]=1,new Uint32Array(c.buffer,0,1)[0]===1}function Ik(){try{return new Function(""),!0}catch{return!1}}class vn{static get isLittleEndian(){return Fe(this,"isLittleEndian",Mk())}static get isEvalSupported(){return Fe(this,"isEvalSupported",Ik())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Fe(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Fe(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Fe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const vy=Array.from(Array(256).keys(),c=>c.toString(16).padStart(2,"0"));var ir,Kf,ky;class ye{static makeHexColor(e,t,i){return`#${vy[e]}${vy[t]}${vy[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,a=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,a]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),u=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],a[0],u[0]),Math.min(i[1],r[1],a[1],u[1]),Math.max(i[0],r[0],a[0],u[0]),Math.max(i[1],r[1],a[1],u[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],u=e[2]*t[1]+e[3]*t[3],h=(i+u)/2,d=Math.sqrt((i+u)**2-4*(i*u-a*r))/2,p=h+d||1,g=h-d||1;return[Math.sqrt(p),Math.sqrt(g)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),u=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>u?null:[i,a,r,u]}static bezierBoundingBox(e,t,i,r,a,u,h,d,p){return p?(p[0]=Math.min(p[0],e,h),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,h),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,h),Math.min(t,d),Math.max(e,h),Math.max(t,d)],x(this,ir,ky).call(this,e,i,a,h,t,r,u,d,3*(-e+3*(i-a)+h),6*(e-2*i+a),3*(i-e),p),x(this,ir,ky).call(this,e,i,a,h,t,r,u,d,3*(-t+3*(r-u)+d),6*(t-2*r+u),3*(r-t),p),p}}ir=new WeakSet,Kf=function(e,t,i,r,a,u,h,d,p,g){if(p<=0||p>=1)return;const y=1-p,w=p*p,A=w*p,S=y*(y*(y*e+3*p*t)+3*w*i)+A*r,C=y*(y*(y*a+3*p*u)+3*w*h)+A*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],C),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],C)},ky=function(e,t,i,r,a,u,h,d,p,g,y,w){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&x(this,ir,Kf).call(this,e,t,i,r,a,u,h,d,-y/g,w);return}const A=g**2-4*y*p;if(A<0)return;const S=Math.sqrt(A),C=2*p;x(this,ir,Kf).call(this,e,t,i,r,a,u,h,d,(-g+S)/C,w),x(this,ir,Kf).call(this,e,t,i,r,a,u,h,d,(-g-S)/C,w)},E(ye,ir);function Nk(c){return decodeURIComponent(escape(c))}let wy=null,Db=null;function Dk(c){return wy||(wy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Db=new Map([["ﬅ","ſt"]])),c.replaceAll(wy,(e,t,i)=>t?t.normalize("NFKC"):Db.get(i))}function Fk(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const c=new Uint8Array(32);return crypto.getRandomValues(c),xS(c)}const e0="pdfjs_internal_id_";function Ok(c){return Uint8Array.prototype.toBase64?c.toBase64():btoa(xS(c))}typeof Promise.try!="function"&&(Promise.try=function(c,...e){return new Promise(t=>{t(c(...e))})});const xs="http://www.w3.org/2000/svg",ka=class ka{};Se(ka,"CSS",96),Se(ka,"PDF",72),Se(ka,"PDF_TO_CSS_UNITS",ka.CSS/ka.PDF);let oa=ka;async function rg(c,e="text"){if(Pc(c,document.baseURI)){const t=await fetch(c);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",c,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class xd{constructor({viewBox:e,userUnit:t,scale:i,rotation:r,offsetX:a=0,offsetY:u=0,dontFlip:h=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=u,i*=t;const d=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let g,y,w,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,w=0,A=1;break;case 90:g=0,y=1,w=1,A=0;break;case 270:g=0,y=-1,w=-1,A=0;break;case 0:g=1,y=0,w=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(w=-w,A=-A);let S,C,T,k;g===0?(S=Math.abs(p-e[1])*i+a,C=Math.abs(d-e[0])*i+u,T=(e[3]-e[1])*i,k=(e[2]-e[0])*i):(S=Math.abs(d-e[0])*i+a,C=Math.abs(p-e[1])*i+u,T=(e[2]-e[0])*i,k=(e[3]-e[1])*i),this.transform=[g*i,y*i,w*i,A*i,S-g*i*d-w*i*p,C-y*i*d-A*i*p],this.width=T,this.height=k}get rawDims(){const{userUnit:e,viewBox:t}=this,i=t.map(r=>r*e);return Fe(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new xd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(e,t){return ye.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ye.applyTransform([e[0],e[1]],this.transform),i=ye.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ye.applyInverseTransform([e,t],this.transform)}}class t0 extends ca{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ag(c){const e=c.length;let t=0;for(;t<e&&c[t].trim()==="";)t++;return c.substring(t,t+5).toLowerCase()==="data:"}function n0(c){return typeof c=="string"&&/\.pdf$/i.test(c)}function $k(c){return[c]=c.split(/[#?]/,1),c.substring(c.lastIndexOf("/")+1)}function zk(c,e="document.pdf"){if(typeof c!="string")return e;if(ag(c))return Re('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(c);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||e}class Fb{constructor(){Se(this,"started",Object.create(null));Se(this,"times",[])}time(e){e in this.started&&Re(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Re(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:a}of this.times)e.push(`${i.padEnd(t)} ${a-r}ms
`);return e.join("")}}function Pc(c,e){try{const{protocol:t}=e?new URL(c,e):new URL(c);return t==="http:"||t==="https:"}catch{return!1}}function Hi(c){c.preventDefault()}function Jn(c){c.preventDefault(),c.stopPropagation()}var Jc;class i0{static toDateObject(e){if(!e||typeof e!="string")return null;o(this,Jc)||b(this,Jc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=o(this,Jc).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let u=parseInt(t[4],10);u=u>=0&&u<=23?u:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let g=parseInt(t[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(u+=g,h+=y):p==="+"&&(u-=g,h-=y),new Date(Date.UTC(i,r,a,u,h,d))}}Jc=new WeakMap,E(i0,Jc);function Hk(c,{scale:e=1,rotation:t=0}){const{width:i,height:r}=c.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new xd({viewBox:a,userUnit:1,scale:e,rotation:t})}function s0(c){if(c.startsWith("#")){const e=parseInt(c.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return c.startsWith("rgb(")?c.slice(4,-1).split(",").map(e=>parseInt(e)):c.startsWith("rgba(")?c.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Re(`Not a valid color format: "${c}"`),[0,0,0])}function Bk(c){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of c.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;c.set(t,s0(i))}e.remove()}function rt(c){const{a:e,b:t,c:i,d:r,e:a,f:u}=c.getTransform();return[e,t,i,r,a,u]}function qi(c){const{a:e,b:t,c:i,d:r,e:a,f:u}=c.getTransform().invertSelf();return[e,t,i,r,a,u]}function Do(c,e,t=!1,i=!0){if(e instanceof xd){const{pageWidth:r,pageHeight:a}=e.rawDims,{style:u}=c,h=vn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${a}px`,g=h?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,y=h?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(u.width=g,u.height=y):(u.width=y,u.height=g)}i&&c.setAttribute("data-main-rotation",e.rotation)}class Ty{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Tr,Pa,Ci,Ra,Zc,eh,Np,CS,wn,kS,TS,Qf,PS,Ry;const Ts=class Ts{constructor(e){E(this,wn);E(this,Tr,null);E(this,Pa,null);E(this,Ci);E(this,Ra,null);E(this,Zc,null);b(this,Ci,e),o(Ts,eh)||b(Ts,eh,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,Tr,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=o(this,Ci)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.addEventListener("pointerdown",x(Ts,Np,CS),{signal:t});const i=b(this,Ra,document.createElement("div"));i.className="buttons",e.append(i);const r=o(this,Ci).toolbarPosition;if(r){const{style:a}=e,u=o(this,Ci)._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*u}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,wn,PS).call(this),e}get div(){return o(this,Tr)}hide(){var e;o(this,Tr).classList.add("hidden"),(e=o(this,Pa))==null||e.hideDropdown()}show(){var e;o(this,Tr).classList.remove("hidden"),(e=o(this,Zc))==null||e.shown()}async addAltText(e){const t=await e.render();x(this,wn,Qf).call(this,t),o(this,Ra).prepend(t,o(this,wn,Ry)),b(this,Zc,e)}addColorPicker(e){b(this,Pa,e);const t=e.renderButton();x(this,wn,Qf).call(this,t),o(this,Ra).prepend(t,o(this,wn,Ry))}remove(){var e;o(this,Tr).remove(),(e=o(this,Pa))==null||e.destroy(),b(this,Pa,null)}};Tr=new WeakMap,Pa=new WeakMap,Ci=new WeakMap,Ra=new WeakMap,Zc=new WeakMap,eh=new WeakMap,Np=new WeakSet,CS=function(e){e.stopPropagation()},wn=new WeakSet,kS=function(e){o(this,Ci)._focusEventsAllowed=!1,Jn(e)},TS=function(e){o(this,Ci)._focusEventsAllowed=!0,Jn(e)},Qf=function(e){const t=o(this,Ci)._uiManager._signal;e.addEventListener("focusin",x(this,wn,kS).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",x(this,wn,TS).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Hi,{signal:t})},PS=function(){const{editorType:e,_uiManager:t}=o(this,Ci),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",o(Ts,eh)[e]),x(this,wn,Qf).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),o(this,Ra).append(i)},Ry=function(){const e=document.createElement("div");return e.className="divider",e},E(Ts,Np),E(Ts,eh,null);let Py=Ts;var th,La,Ma,la,RS,LS,MS;class jk{constructor(e){E(this,la);E(this,th,null);E(this,La,null);E(this,Ma);b(this,Ma,e)}show(e,t,i){const[r,a]=x(this,la,LS).call(this,t,i),{style:u}=o(this,La)||b(this,La,x(this,la,RS).call(this));e.append(o(this,La)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,La).remove()}}th=new WeakMap,La=new WeakMap,Ma=new WeakMap,la=new WeakSet,RS=function(){const e=b(this,La,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Hi,{signal:o(this,Ma)._signal});const t=b(this,th,document.createElement("div"));return t.className="buttons",e.append(t),x(this,la,MS).call(this),e},LS=function(e,t){let i=0,r=0;for(const a of e){const u=a.y+a.height;if(u<i)continue;const h=a.x+(t?a.width:0);if(u>i){r=h,i=u;continue}t?h>r&&(r=h):h<r&&(r=h)}return[t?1-r:r,i]},MS=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=o(this,Ma)._signal;e.addEventListener("contextmenu",Hi,{signal:i}),e.addEventListener("click",()=>{o(this,Ma).highlightSelection("floating_button")},{signal:i}),o(this,th).append(e)};function kp(c,e,t){for(const i of t)e.addEventListener(i,c[i].bind(c))}var Dp;class Uk{constructor(){E(this,Dp,0)}get id(){return`${_k}${dn(this,Dp)._++}`}}Dp=new WeakMap;var xl,nh,nn,Cl,Jf;const u0=class u0{constructor(){E(this,Cl);E(this,xl,Fk());E(this,nh,0);E(this,nn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:a}=e;return x(this,Cl,Jf).call(this,`${t}_${i}_${r}_${a}`,e)}async getFromUrl(e){return x(this,Cl,Jf).call(this,e,e)}async getFromBlob(e,t){const i=await t;return x(this,Cl,Jf).call(this,e,i)}async getFromId(e){o(this,nn)||b(this,nn,new Map);const t=o(this,nn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){o(this,nn)||b(this,nn,new Map);let i=o(this,nn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${o(this,xl)}_${dn(this,nh)._++}`,refCounter:1,isSvg:!1},o(this,nn).set(e,i),o(this,nn).set(i.id,i),i}getSvgUrl(e){const t=o(this,nn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;o(this,nn)||b(this,nn,new Map);const t=o(this,nn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${o(this,xl)}_`)}};xl=new WeakMap,nh=new WeakMap,nn=new WeakMap,Cl=new WeakSet,Jf=async function(e,t){o(this,nn)||b(this,nn,new Map);let i=o(this,nn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${o(this,xl)}_${dn(this,nh)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await rg(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const a=u0._isSVGFittingCanvas,u=new FileReader,h=new Image,d=new Promise((p,g)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,p()},u.onload=async()=>{const y=i.svgUrl=u.result;h.src=await a?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=u.onerror=g});u.readAsDataURL(r),await d}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Re(r),i=null}return o(this,nn).set(e,i),i&&o(this,nn).set(i.id,i),i};let Ly=u0;var yt,Pr,ih,ct;class Vk{constructor(e=128){E(this,yt,[]);E(this,Pr,!1);E(this,ih);E(this,ct,-1);b(this,ih,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:u=!1,keepUndo:h=!1}){if(r&&e(),o(this,Pr))return;const d={cmd:e,undo:t,post:i,type:a};if(o(this,ct)===-1){o(this,yt).length>0&&(o(this,yt).length=0),b(this,ct,0),o(this,yt).push(d);return}if(u&&o(this,yt)[o(this,ct)].type===a){h&&(d.undo=o(this,yt)[o(this,ct)].undo),o(this,yt)[o(this,ct)]=d;return}const p=o(this,ct)+1;p===o(this,ih)?o(this,yt).splice(0,1):(b(this,ct,p),p<o(this,yt).length&&o(this,yt).splice(p)),o(this,yt).push(d)}undo(){if(o(this,ct)===-1)return;b(this,Pr,!0);const{undo:e,post:t}=o(this,yt)[o(this,ct)];e(),t==null||t(),b(this,Pr,!1),b(this,ct,o(this,ct)-1)}redo(){if(o(this,ct)<o(this,yt).length-1){b(this,ct,o(this,ct)+1),b(this,Pr,!0);const{cmd:e,post:t}=o(this,yt)[o(this,ct)];e(),t==null||t(),b(this,Pr,!1)}}hasSomethingToUndo(){return o(this,ct)!==-1}hasSomethingToRedo(){return o(this,ct)<o(this,yt).length-1}cleanType(e){if(o(this,ct)!==-1){for(let t=o(this,ct);t>=0;t--)if(o(this,yt)[t].type!==e){o(this,yt).splice(t+1,o(this,ct)-t),b(this,ct,t);return}o(this,yt).length=0,b(this,ct,-1)}}destroy(){b(this,yt,null)}}yt=new WeakMap,Pr=new WeakMap,ih=new WeakMap,ct=new WeakMap;var Fp,IS;class Cd{constructor(e){E(this,Fp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=vn.platform;for(const[i,r,a={}]of e)for(const u of i){const h=u.startsWith("mac+");t&&h?(this.callbacks.set(u.slice(4),{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1))):!t&&!h&&(this.callbacks.set(u,{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(x(this,Fp,IS).call(this,t));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:u=[],checker:h=null}}=i;h&&!h(e,t)||(r.bind(e,...u,t)(),a||Jn(t))}}Fp=new WeakSet,IS=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Op=class Op{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Bk(e),Fe(this,"_colors",e)}convert(e){const t=s0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((a,u)=>a===t[u]))return Op._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ye.makeHexColor(...t):e}};Se(Op,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let My=Op;var kl,$n,Pt,Ut,Tl,Rs,Pl,oi,Rr,Ia,Rl,Na,Qi,ki,Da,sh,rh,Ll,ah,Ji,Lr,Ml,Mr,Zi,$p,Ir,oh,Nr,Fa,lh,uh,Dt,Ge,Ls,Oa,ch,hh,Dr,es,Ms,dh,li,te,Zf,Iy,NS,DS,ep,FS,OS,$S,Ny,zS,Dy,Fy,HS,fn,Cs,BS,jS,Oy,US,Rc,$y;const bl=class bl{constructor(e,t,i,r,a,u,h,d,p,g,y,w,A){E(this,te);E(this,kl,new AbortController);E(this,$n,null);E(this,Pt,new Map);E(this,Ut,new Map);E(this,Tl,null);E(this,Rs,null);E(this,Pl,null);E(this,oi,new Vk);E(this,Rr,null);E(this,Ia,null);E(this,Rl,0);E(this,Na,new Set);E(this,Qi,null);E(this,ki,null);E(this,Da,new Set);Se(this,"_editorUndoBar",null);E(this,sh,!1);E(this,rh,!1);E(this,Ll,!1);E(this,ah,null);E(this,Ji,null);E(this,Lr,null);E(this,Ml,null);E(this,Mr,!1);E(this,Zi,null);E(this,$p,new Uk);E(this,Ir,!1);E(this,oh,!1);E(this,Nr,null);E(this,Fa,null);E(this,lh,null);E(this,uh,null);E(this,Dt,Pe.NONE);E(this,Ge,new Set);E(this,Ls,null);E(this,Oa,null);E(this,ch,null);E(this,hh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Dr,[0,0]);E(this,es,null);E(this,Ms,null);E(this,dh,null);E(this,li,null);const S=this._signal=o(this,kl).signal;b(this,Ms,e),b(this,dh,t),b(this,Tl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:S}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),r._on("setpreference",this.onSetPreference.bind(this),{signal:S}),r._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:S}),x(this,te,FS).call(this),x(this,te,HS).call(this),x(this,te,Ny).call(this),b(this,Rs,a.annotationStorage),b(this,ah,a.filterFactory),b(this,Oa,u),b(this,Ml,h||null),b(this,sh,d),b(this,rh,p),b(this,Ll,g),b(this,uh,y||null),this.viewParameters={realScale:oa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const e=bl.prototype,t=u=>o(u,Ms).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Cd([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&o(u,Ms).contains(h)&&!u.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(u,{target:h})=>!(h instanceof HTMLButtonElement)&&o(u,Ms).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,i,r,a;(e=o(this,li))==null||e.resolve(),b(this,li,null),(t=o(this,kl))==null||t.abort(),b(this,kl,null),this._signal=null;for(const u of o(this,Ut).values())u.destroy();o(this,Ut).clear(),o(this,Pt).clear(),o(this,Da).clear(),b(this,$n,null),o(this,Ge).clear(),o(this,oi).destroy(),(i=o(this,Tl))==null||i.destroy(),(r=o(this,Zi))==null||r.hide(),b(this,Zi,null),o(this,Ji)&&(clearTimeout(o(this,Ji)),b(this,Ji,null)),o(this,es)&&(clearTimeout(o(this,es)),b(this,es,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return o(this,uh)}get useNewAltTextFlow(){return o(this,rh)}get useNewAltTextWhenAddingImage(){return o(this,Ll)}get hcmFilter(){return Fe(this,"hcmFilter",o(this,Oa)?o(this,ah).addHCMFilter(o(this,Oa).foreground,o(this,Oa).background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(o(this,Ms)).direction)}get highlightColors(){return Fe(this,"highlightColors",o(this,Ml)?new Map(o(this,Ml).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,Ia,e)}setMainHighlightColorPicker(e){b(this,lh,e)}editAltText(e,t=!1){var i;(i=o(this,Tl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,Ll,t);break}}onPageChanging({pageNumber:e}){b(this,Rl,e-1)}focusMainContainer(){o(this,Ms).focus()}findParent(e,t){for(const i of o(this,Ut).values()){const{x:r,y:a,width:u,height:h}=i.div.getBoundingClientRect();if(e>=r&&e<=r+u&&t>=a&&t<=a+h)return i}return null}disableUserSelect(e=!1){o(this,dh).classList.toggle("noUserSelect",e)}addShouldRescale(e){o(this,Da).add(e)}removeShouldRescale(e){o(this,Da).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*oa.PDF_TO_CSS_UNITS;for(const i of o(this,Da))i.onScaleChanging();(t=o(this,Ia))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u}=t,h=t.toString(),p=x(this,te,Zf).call(this,t).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;t.empty();const y=x(this,te,Iy).call(this,p),w=o(this,Dt)===Pe.NONE,A=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u,text:h}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Pe.HIGHLIGHT,A);return}A()}addToAnnotationStorage(e){!e.isEmpty()&&o(this,Rs)&&!o(this,Rs).has(e.id)&&o(this,Rs).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,o(this,Mr)&&(b(this,Mr,!1),x(this,te,ep).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of o(this,Ge))if(t.div.contains(e)){b(this,Fa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!o(this,Fa))return;const[e,t]=o(this,Fa);b(this,Fa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){x(this,te,Ny).call(this),x(this,te,Dy).call(this)}removeEditListeners(){x(this,te,zS).call(this),x(this,te,Fy).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of o(this,ki))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of o(this,ki))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=o(this,$n))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of o(this,Ge)){const a=r.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const u of o(this,ki))if(u.isHandlingMimeForPasting(a.type)){u.paste(a,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Re(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const d of i){const p=await r.deserialize(d);if(!p)return;a.push(p)}const u=()=>{for(const d of a)x(this,te,Oy).call(this,d);x(this,te,$y).call(this,a)},h=()=>{for(const d of a)d.remove()};this.addCommands({cmd:u,undo:h,mustExec:!0})}catch(a){Re(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Dt)!==Pe.NONE&&!this.isEditorHandlingKeyboard&&bl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Mr)&&(b(this,Mr,!1),x(this,te,ep).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(x(this,te,OS).call(this),x(this,te,Dy).call(this),x(this,te,fn).call(this,{isEditing:o(this,Dt)!==Pe.NONE,isEmpty:x(this,te,Rc).call(this),hasSomethingToUndo:o(this,oi).hasSomethingToUndo(),hasSomethingToRedo:o(this,oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,te,$S).call(this),x(this,te,Fy).call(this),x(this,te,fn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!o(this,ki)){b(this,ki,e);for(const t of o(this,ki))x(this,te,Cs).call(this,t.defaultPropertiesToUpdate)}}getId(){return o(this,$p).id}get currentLayer(){return o(this,Ut).get(o(this,Rl))}getLayer(e){return o(this,Ut).get(e)}get currentPageIndex(){return o(this,Rl)}addLayer(e){o(this,Ut).set(e.pageIndex,e),o(this,Ir)?e.enable():e.disable()}removeLayer(e){o(this,Ut).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){var r;if(o(this,Dt)!==e&&!(o(this,li)&&(await o(this,li).promise,!o(this,li)))){if(b(this,li,Promise.withResolvers()),b(this,Dt,e),e===Pe.NONE){this.setEditingState(!1),x(this,te,jS).call(this),(r=this._editorUndoBar)==null||r.hide(),o(this,li).resolve();return}this.setEditingState(!0),await x(this,te,BS).call(this),this.unselectAll();for(const a of o(this,Ut).values())a.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),o(this,li).resolve();return}for(const a of o(this,Pt).values())a.annotationElementId===t?(this.setSelected(a),a.enterInEditMode()):a.unselect();o(this,li).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==o(this,Dt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(o(this,ki)){switch(e){case ze.CREATE:this.currentLayer.addNewEditor();return;case ze.HIGHLIGHT_DEFAULT_COLOR:(i=o(this,lh))==null||i.updateColor(t);break;case ze.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,ch)||b(this,ch,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of o(this,Ge))r.updateParams(e,t);for(const r of o(this,ki))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var a;for(const u of o(this,Pt).values())u.editorType===e&&u.show(t);(((a=o(this,ch))==null?void 0:a.get(ze.HIGHLIGHT_SHOW_ALL))??!0)!==t&&x(this,te,Cs).call(this,[[ze.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(o(this,oh)!==e){b(this,oh,e);for(const t of o(this,Ut).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of o(this,Pt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return o(this,Pt).get(e)}addEditor(e){o(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(o(this,Ji)&&clearTimeout(o(this,Ji)),b(this,Ji,setTimeout(()=>{this.focusMainContainer(),b(this,Ji,null)},0))),o(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!o(this,Na).has(e.annotationElementId))&&((t=o(this,Rs))==null||t.remove(e.id))}addDeletedAnnotationElement(e){o(this,Na).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return o(this,Na).has(e)}removeDeletedAnnotationElement(e){o(this,Na).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){o(this,$n)!==e&&(b(this,$n,e),e&&x(this,te,Cs).call(this,e.propertiesToUpdate))}updateUI(e){o(this,te,US)===e&&x(this,te,Cs).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){x(this,te,Cs).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(o(this,Ge).has(e)){o(this,Ge).delete(e),e.unselect(),x(this,te,fn).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Ge).add(e),e.select(),x(this,te,Cs).call(this,e.propertiesToUpdate),x(this,te,fn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=o(this,Ia))==null||t.commitOrRemove();for(const i of o(this,Ge))i!==e&&i.unselect();o(this,Ge).clear(),o(this,Ge).add(e),e.select(),x(this,te,Cs).call(this,e.propertiesToUpdate),x(this,te,fn).call(this,{hasSelectedEditor:!0})}isSelected(e){return o(this,Ge).has(e)}get firstSelectedEditor(){return o(this,Ge).values().next().value}unselect(e){e.unselect(),o(this,Ge).delete(e),x(this,te,fn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Ge).size!==0}get isEnterHandled(){return o(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;o(this,oi).undo(),x(this,te,fn).call(this,{hasSomethingToUndo:o(this,oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,te,Rc).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){o(this,oi).redo(),x(this,te,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,oi).hasSomethingToRedo(),isEmpty:x(this,te,Rc).call(this)})}addCommands(e){o(this,oi).add(e),x(this,te,fn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,te,Rc).call(this)})}cleanUndoStack(e){o(this,oi).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...o(this,Ge)],i=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,t.length===1?t[0].editorType:t.length);for(const h of t)h.remove()},r=()=>{for(const u of t)x(this,te,Oy).call(this,u)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=o(this,$n))==null||e.commitOrRemove()}hasSomethingToControl(){return o(this,$n)||this.hasSelection}selectAll(){for(const e of o(this,Ge))e.commit();x(this,te,$y).call(this,o(this,Pt).values())}unselectAll(){var e;if(!(o(this,$n)&&(o(this,$n).commitOrRemove(),o(this,Dt)!==Pe.NONE))&&!((e=o(this,Ia))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of o(this,Ge))t.unselect();o(this,Ge).clear(),x(this,te,fn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;o(this,Dr)[0]+=e,o(this,Dr)[1]+=t;const[r,a]=o(this,Dr),u=[...o(this,Ge)],h=1e3;o(this,es)&&clearTimeout(o(this,es)),b(this,es,setTimeout(()=>{b(this,es,null),o(this,Dr)[0]=o(this,Dr)[1]=0,this.addCommands({cmd:()=>{for(const d of u)o(this,Pt).has(d.id)&&d.translateInPage(r,a)},undo:()=>{for(const d of u)o(this,Pt).has(d.id)&&d.translateInPage(-r,-a)},mustExec:!1})},h));for(const d of u)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Qi,new Map);for(const e of o(this,Ge))o(this,Qi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Qi))return!1;this.disableUserSelect(!1);const e=o(this,Qi);b(this,Qi,null);let t=!1;for(const[{x:r,y:a,pageIndex:u},h]of e)h.newX=r,h.newY=a,h.newPageIndex=u,t||(t=r!==h.savedX||a!==h.savedY||u!==h.savedPageIndex);if(!t)return!1;const i=(r,a,u,h)=>{if(o(this,Pt).has(r.id)){const d=o(this,Ut).get(h);d?r._setParentAndPosition(d,a,u):(r.pageIndex=h,r.x=a,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:u,newPageIndex:h}]of e)i(r,a,u,h)},undo:()=>{for(const[r,{savedX:a,savedY:u,savedPageIndex:h}]of e)i(r,a,u,h)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(o(this,Qi))for(const i of o(this,Qi).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||o(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return o(this,$n)===e}getActive(){return o(this,$n)}getMode(){return o(this,Dt)}get imageManager(){return Fe(this,"imageManager",new Ly)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,g=t.rangeCount;p<g;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:u}=e.getBoundingClientRect();let h;switch(e.getAttribute("data-main-rotation")){case"90":h=(p,g,y,w)=>({x:(g-r)/u,y:1-(p+y-i)/a,width:w/u,height:y/a});break;case"180":h=(p,g,y,w)=>({x:1-(p+y-i)/a,y:1-(g+w-r)/u,width:y/a,height:w/u});break;case"270":h=(p,g,y,w)=>({x:1-(g+w-r)/u,y:(p-i)/a,width:w/u,height:y/a});break;default:h=(p,g,y,w)=>({x:(p-i)/a,y:(g-r)/u,width:y/a,height:w/u});break}const d=[];for(let p=0,g=t.rangeCount;p<g;p++){const y=t.getRangeAt(p);if(!y.collapsed)for(const{x:w,y:A,width:S,height:C}of y.getClientRects())S===0||C===0||d.push(h(w,A,S,C))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(o(this,Pl)||b(this,Pl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=o(this,Pl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=o(this,Pl))==null?void 0:r.get(e.data.id);if(!t)return;const i=o(this,Rs).getRawValue(t);i&&(o(this,Dt)===Pe.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};kl=new WeakMap,$n=new WeakMap,Pt=new WeakMap,Ut=new WeakMap,Tl=new WeakMap,Rs=new WeakMap,Pl=new WeakMap,oi=new WeakMap,Rr=new WeakMap,Ia=new WeakMap,Rl=new WeakMap,Na=new WeakMap,Qi=new WeakMap,ki=new WeakMap,Da=new WeakMap,sh=new WeakMap,rh=new WeakMap,Ll=new WeakMap,ah=new WeakMap,Ji=new WeakMap,Lr=new WeakMap,Ml=new WeakMap,Mr=new WeakMap,Zi=new WeakMap,$p=new WeakMap,Ir=new WeakMap,oh=new WeakMap,Nr=new WeakMap,Fa=new WeakMap,lh=new WeakMap,uh=new WeakMap,Dt=new WeakMap,Ge=new WeakMap,Ls=new WeakMap,Oa=new WeakMap,ch=new WeakMap,hh=new WeakMap,Dr=new WeakMap,es=new WeakMap,Ms=new WeakMap,dh=new WeakMap,li=new WeakMap,te=new WeakSet,Zf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Iy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of o(this,Ut).values())if(i.hasTextLayer(e))return i;return null},NS=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=x(this,te,Zf).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(o(this,Zi)||b(this,Zi,new jk(this)),o(this,Zi).show(i,r,this.direction==="ltr"))},DS=function(){var a,u,h;const e=document.getSelection();if(!e||e.isCollapsed){o(this,Ls)&&((a=o(this,Zi))==null||a.hide(),b(this,Ls,null),x(this,te,fn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===o(this,Ls))return;const r=x(this,te,Zf).call(this,e).closest(".textLayer");if(!r){o(this,Ls)&&((u=o(this,Zi))==null||u.hide(),b(this,Ls,null),x(this,te,fn).call(this,{hasSelectedText:!1}));return}if((h=o(this,Zi))==null||h.hide(),b(this,Ls,t),x(this,te,fn).call(this,{hasSelectedText:!0}),!(o(this,Dt)!==Pe.HIGHLIGHT&&o(this,Dt)!==Pe.NONE)&&(o(this,Dt)===Pe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Mr,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=o(this,Dt)===Pe.HIGHLIGHT?x(this,te,Iy).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&x(this,te,ep).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},ep=function(e=""){o(this,Dt)===Pe.HIGHLIGHT?this.highlightSelection(e):o(this,sh)&&x(this,te,NS).call(this)},FS=function(){document.addEventListener("selectionchange",x(this,te,DS).bind(this),{signal:this._signal})},OS=function(){if(o(this,Lr))return;b(this,Lr,new AbortController);const e=this.combinedSignal(o(this,Lr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},$S=function(){var e;(e=o(this,Lr))==null||e.abort(),b(this,Lr,null)},Ny=function(){if(o(this,Nr))return;b(this,Nr,new AbortController);const e=this.combinedSignal(o(this,Nr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},zS=function(){var e;(e=o(this,Nr))==null||e.abort(),b(this,Nr,null)},Dy=function(){if(o(this,Rr))return;b(this,Rr,new AbortController);const e=this.combinedSignal(o(this,Rr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Fy=function(){var e;(e=o(this,Rr))==null||e.abort(),b(this,Rr,null)},HS=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},fn=function(e){Object.entries(e).some(([i,r])=>o(this,hh)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,hh),e)}),o(this,Dt)===Pe.HIGHLIGHT&&e.hasSelectedEditor===!1&&x(this,te,Cs).call(this,[[ze.HIGHLIGHT_FREE,!0]]))},Cs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},BS=async function(){if(!o(this,Ir)){b(this,Ir,!0);const e=[];for(const t of o(this,Ut).values())e.push(t.enable());await Promise.all(e);for(const t of o(this,Pt).values())t.enable()}},jS=function(){if(this.unselectAll(),o(this,Ir)){b(this,Ir,!1);for(const e of o(this,Ut).values())e.disable();for(const e of o(this,Pt).values())e.disable()}},Oy=function(e){const t=o(this,Ut).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},US=function(){let e=null;for(e of o(this,Ge));return e},Rc=function(){if(o(this,Pt).size===0)return!0;if(o(this,Pt).size===1)for(const e of o(this,Pt).values())return e.isEmpty();return!1},$y=function(e){for(const t of o(this,Ge))t.unselect();o(this,Ge).clear();for(const t of e)t.isEmpty()||(o(this,Ge).add(t),t.select());x(this,te,fn).call(this,{hasSelectedEditor:this.hasSelection})},Se(bl,"TRANSLATE_SMALL",1),Se(bl,"TRANSLATE_BIG",10);let Fo=bl;var Ft,ts,Ti,Il,ns,zn,Nl,is,Rn,Is,$a,ss,Fr,$i,Lc,tp;const pn=class pn{constructor(e){E(this,$i);E(this,Ft,null);E(this,ts,!1);E(this,Ti,null);E(this,Il,null);E(this,ns,null);E(this,zn,null);E(this,Nl,!1);E(this,is,null);E(this,Rn,null);E(this,Is,null);E(this,$a,null);E(this,ss,!1);b(this,Rn,e),b(this,ss,e._uiManager.useNewAltTextFlow),o(pn,Fr)||b(pn,Fr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){pn._l10n??(pn._l10n=e)}async render(){const e=b(this,Ti,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,Il,document.createElement("span"));e.append(t),o(this,ss)?(e.classList.add("new"),e.setAttribute("data-l10n-id",o(pn,Fr).missing),t.setAttribute("data-l10n-id",o(pn,Fr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=o(this,Rn)._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:i}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),o(this,Rn)._uiManager.editAltText(o(this,Rn)),o(this,ss)&&o(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,$i,Lc)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(b(this,Nl,!0),r(a))},{signal:i}),await x(this,$i,tp).call(this),e}finish(){o(this,Ti)&&(o(this,Ti).focus({focusVisible:o(this,Nl)}),b(this,Nl,!1))}isEmpty(){return o(this,ss)?o(this,Ft)===null:!o(this,Ft)&&!o(this,ts)}hasData(){return o(this,ss)?o(this,Ft)!==null||!!o(this,Is):this.isEmpty()}get guessedText(){return o(this,Is)}async setGuessedText(e){o(this,Ft)===null&&(b(this,Is,e),b(this,$a,await pn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),x(this,$i,tp).call(this))}toggleAltTextBadge(e=!1){var t;if(!o(this,ss)||o(this,Ft)){(t=o(this,is))==null||t.remove(),b(this,is,null);return}if(!o(this,is)){const i=b(this,is,document.createElement("div"));i.className="noAltTextBadge",o(this,Rn).div.append(i)}o(this,is).classList.toggle("hidden",!e)}serialize(e){let t=o(this,Ft);return!e&&o(this,Is)===t&&(t=o(this,$a)),{altText:t,decorative:o(this,ts),guessedText:o(this,Is),textWithDisclaimer:o(this,$a)}}get data(){return{altText:o(this,Ft),decorative:o(this,ts)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(b(this,Is,i),b(this,$a,r)),!(o(this,Ft)===e&&o(this,ts)===t)&&(a||(b(this,Ft,e),b(this,ts,t)),x(this,$i,tp).call(this))}toggle(e=!1){o(this,Ti)&&(!e&&o(this,zn)&&(clearTimeout(o(this,zn)),b(this,zn,null)),o(this,Ti).disabled=!e)}shown(){o(this,Rn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,$i,Lc)}})}destroy(){var e,t;(e=o(this,Ti))==null||e.remove(),b(this,Ti,null),b(this,Il,null),b(this,ns,null),(t=o(this,is))==null||t.remove(),b(this,is,null)}};Ft=new WeakMap,ts=new WeakMap,Ti=new WeakMap,Il=new WeakMap,ns=new WeakMap,zn=new WeakMap,Nl=new WeakMap,is=new WeakMap,Rn=new WeakMap,Is=new WeakMap,$a=new WeakMap,ss=new WeakMap,Fr=new WeakMap,$i=new WeakSet,Lc=function(){return o(this,Ft)&&"added"||o(this,Ft)===null&&this.guessedText&&"review"||"missing"},tp=async function(){var r,a,u;const e=o(this,Ti);if(!e)return;if(o(this,ss)){if(e.classList.toggle("done",!!o(this,Ft)),e.setAttribute("data-l10n-id",o(pn,Fr)[o(this,$i,Lc)]),(r=o(this,Il))==null||r.setAttribute("data-l10n-id",o(pn,Fr)[`${o(this,$i,Lc)}-label`]),!o(this,Ft)){(a=o(this,ns))==null||a.remove();return}}else{if(!o(this,Ft)&&!o(this,ts)){e.classList.remove("done"),(u=o(this,ns))==null||u.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=o(this,ns);if(!t){b(this,ns,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${o(this,Rn).id}`;const h=100,d=o(this,Rn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(o(this,zn)),b(this,zn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,zn,setTimeout(()=>{b(this,zn,null),o(this,ns).classList.add("show"),o(this,Rn)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;o(this,zn)&&(clearTimeout(o(this,zn)),b(this,zn,null)),(p=o(this,ns))==null||p.classList.remove("show")},{signal:d})}o(this,ts)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=o(this,Ft)),t.parentNode||e.append(t);const i=o(this,Rn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},E(pn,Fr,null),Se(pn,"_l10n",null);let Tp=pn;var fh,za,ph,gh,mh,yh,vh,Dl,Ns,Ha,Or,rr,VS,WS,zy;const c0=class c0{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:u=null,signal:h}){E(this,rr);E(this,fh);E(this,za,!1);E(this,ph,null);E(this,gh);E(this,mh);E(this,yh);E(this,vh);E(this,Dl);E(this,Ns,null);E(this,Ha);E(this,Or,null);b(this,fh,e),b(this,ph,i),b(this,gh,t),b(this,mh,r),b(this,yh,a),b(this,vh,u),b(this,Ha,new AbortController),b(this,Dl,AbortSignal.any([h,o(this,Ha).signal])),e.addEventListener("touchstart",x(this,rr,VS).bind(this),{passive:!1,signal:o(this,Dl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Fe(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=o(this,Ha))==null||e.abort(),b(this,Ha,null)}};fh=new WeakMap,za=new WeakMap,ph=new WeakMap,gh=new WeakMap,mh=new WeakMap,yh=new WeakMap,vh=new WeakMap,Dl=new WeakMap,Ns=new WeakMap,Ha=new WeakMap,Or=new WeakMap,rr=new WeakSet,VS=function(e){var r,a,u;if((r=o(this,gh))!=null&&r.call(this)||e.touches.length<2)return;if(!o(this,Or)){b(this,Or,new AbortController);const h=AbortSignal.any([o(this,Dl),o(this,Or).signal]),d=o(this,fh),p={signal:h,passive:!1};d.addEventListener("touchmove",x(this,rr,WS).bind(this),p),d.addEventListener("touchend",x(this,rr,zy).bind(this),p),d.addEventListener("touchcancel",x(this,rr,zy).bind(this),p),(a=o(this,mh))==null||a.call(this)}if(Jn(e),e.touches.length!==2||(u=o(this,ph))!=null&&u.call(this)){b(this,Ns,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),b(this,Ns,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},WS=function(e){var D;if(!o(this,Ns)||e.touches.length!==2)return;let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:r,screenY:a}=t,{screenX:u,screenY:h}=i,d=o(this,Ns),{touch0X:p,touch0Y:g,touch1X:y,touch1Y:w}=d,A=y-p,S=w-g,C=u-r,T=h-a,k=Math.hypot(C,T)||1,R=Math.hypot(A,S)||1;if(!o(this,za)&&Math.abs(R-k)<=c0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=a,d.touch1X=u,d.touch1Y=h,e.preventDefault(),!o(this,za)){b(this,za,!0);return}const M=[(r+u)/2,(a+h)/2];(D=o(this,yh))==null||D.call(this,M,R,k)},zy=function(e){var t;o(this,Or).abort(),b(this,Or,null),(t=o(this,vh))==null||t.call(this),o(this,Ns)&&(e.preventDefault(),b(this,Ns,null),b(this,za,!1))};let Pp=c0;var Ba,Pi,nt,Fl,$r,wh,ja,Vt,Ua,Ds,zr,Ah,Va,Hn,bh,Wa,Fs,rs,Ol,$l,ui,Ga,Sh,zp,_e,Hy,_h,By,np,GS,XS,jy,ip,Uy,qS,YS,KS,Vy,QS,Wy,JS,ZS,e1,Gy,Mc;const Le=class Le{constructor(e){E(this,_e);E(this,Ba,null);E(this,Pi,null);E(this,nt,null);E(this,Fl,!1);E(this,$r,null);E(this,wh,"");E(this,ja,!1);E(this,Vt,null);E(this,Ua,null);E(this,Ds,null);E(this,zr,null);E(this,Ah,"");E(this,Va,!1);E(this,Hn,null);E(this,bh,!1);E(this,Wa,!1);E(this,Fs,!1);E(this,rs,null);E(this,Ol,0);E(this,$l,0);E(this,ui,null);E(this,Ga,null);Se(this,"_editToolbar",null);Se(this,"_initialOptions",Object.create(null));Se(this,"_initialData",null);Se(this,"_isVisible",!0);Se(this,"_uiManager",null);Se(this,"_focusEventsAllowed",!0);E(this,Sh,!1);E(this,zp,Le._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:u}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,u];const[h,d]=this.parentDimensions;this.x=e.x/h,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Le.prototype._resizeWithKeyboard,t=Fo.TRANSLATE_SMALL,i=Fo.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new Cd([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Wk({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Le._l10n??(Le._l10n=e),Le._l10nResizer||(Le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Le._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Le._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Qe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,Sh)}set _isDraggable(e){var t;b(this,Sh,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,zp)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):x(this,_e,Mc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(o(this,Va)?b(this,Va,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[a,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/a,this.y=(t+r)/u,this.fixAndSetPosition()}translate(e,t){x(this,_e,Hy).call(this,this.parentDimensions,e,t)}translateInPage(e,t){o(this,Hn)||b(this,Hn,[this.x,this.y,this.width,this.height]),x(this,_e,Hy).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){o(this,Hn)||b(this,Hn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,a]}=this;if(this.x+=e/r,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:h}=this;const[d,p]=this.getBaseTranslation();u+=d,h+=p;const{style:g}=i;g.left=`${(100*u).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(u,h),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!o(this,Hn)&&(o(this,Hn)[0]!==this.x||o(this,Hn)[1]!==this.y)}get _hasBeenResized(){return!!o(this,Hn)&&(o(this,Hn)[2]!==this.width||o(this,Hn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Le,r=i/e,a=i/t;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,r]}=this;let{x:a,y:u,width:h,height:d}=this;if(h*=i,d*=r,a*=i,u*=r,this._mustFixPosition)switch(e){case 0:a=Math.max(0,Math.min(i-h,a)),u=Math.max(0,Math.min(r-d,u));break;case 90:a=Math.max(0,Math.min(i-d,a)),u=Math.min(r,Math.max(h,u));break;case 180:a=Math.min(i,Math.max(h,a)),u=Math.min(r,Math.max(d,u));break;case 270:a=Math.min(i,Math.max(d,a)),u=Math.max(0,Math.min(r-h,u));break}this.x=a/=i,this.y=u/=r;const[p,g]=this.getBaseTranslation();a+=p,u+=g,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return x(i=Le,_h,By).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return x(i=Le,_h,By).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*e/i).toFixed(2)}%`,o(this,ja)||(a.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),a=!o(this,ja)&&t.endsWith("%");if(r&&a)return;const[u,h]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!o(this,ja)&&!a&&(e.height=`${(100*parseFloat(t)/h).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=o(this,nt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||o(this,Wa)?this._editToolbar:(this._editToolbar=new Py(this),this.div.append(this._editToolbar.render()),o(this,nt)&&await this._editToolbar.addAltText(o(this,nt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=o(this,nt))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,nt)||(Tp.initialize(Le._l10n),b(this,nt,new Tp(this)),o(this,Ba)&&(o(this,nt).data=o(this,Ba),b(this,Ba,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=o(this,nt))==null?void 0:e.data}set altTextData(e){o(this,nt)&&(o(this,nt).data=e)}get guessedAltText(){var e;return(e=o(this,nt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=o(this,nt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=o(this,nt))==null?void 0:t.serialize(e)}hasAltText(){return!!o(this,nt)&&!o(this,nt).isEmpty()}hasAltTextData(){var e;return((e=o(this,nt))==null?void 0:e.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,Fl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,_e,Wy).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),kp(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,Ga)||b(this,Ga,new Pp({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:x(this,_e,qS).bind(this),onPinching:x(this,_e,YS).bind(this),onPinchEnd:x(this,_e,KS).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(e){const{isMac:t}=vn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,Va,!0),this._isDraggable){x(this,_e,QS).call(this,e);return}x(this,_e,Vy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,rs)&&clearTimeout(o(this,rs)),b(this,rs,setTimeout(()=>{var e;b(this,rs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const r=this.parentScale,[a,u]=this.pageDimensions,[h,d]=this.pageTranslation,p=e/r,g=t/r,y=this.x*a,w=this.y*u,A=this.width*a,S=this.height*u;switch(i){case 0:return[y+p+h,u-w-g-S+d,y+p+A+h,u-w-g+d];case 90:return[y+g+h,u-w+p+d,y+g+S+h,u-w+p+A+d];case 180:return[y-p-A+h,u-w+g+d,y-p+h,u-w+g+S+d];case 270:return[y-g-S+h,u-w-p-A+d,y-g+h,u-w-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,a,u]=e,h=a-i,d=u-r;switch(this.rotation){case 0:return[i,t-u,h,d];case 90:return[i,t-r,d,h];case 180:return[a,t-r,h,d];case 270:return[a,t-u,d,h];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){b(this,Wa,!0)}disableEditMode(){b(this,Wa,!1)}isInEditMode(){return o(this,Wa)}shouldGetKeyboardEvents(){return o(this,Fs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:u}=window;return t<u&&r>0&&e<a&&i>0}rebuild(){x(this,_e,Wy).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Qe("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,b(r,Ba,e.accessibilityData);const[a,u]=r.pageDimensions,[h,d,p,g]=r.getRectInCurrentCoords(e.rect,u);return r.x=h/a,r.y=d/u,r.width=p/a,r.height=g/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=o(this,zr))==null||e.abort(),b(this,zr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,rs)&&(clearTimeout(o(this,rs)),b(this,rs,null)),x(this,_e,Mc).call(this),this.removeEditToolbar(),o(this,ui)){for(const i of o(this,ui).values())clearTimeout(i);b(this,ui,null)}this.parent=null,(t=o(this,Ga))==null||t.destroy(),b(this,Ga,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,_e,GS).call(this),o(this,Vt).classList.remove("hidden"),kp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Ds,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=o(this,Vt).children;if(!o(this,Pi)){b(this,Pi,Array.from(t));const u=x(this,_e,JS).bind(this),h=x(this,_e,ZS).bind(this),d=this._uiManager._signal;for(const p of o(this,Pi)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",x(this,_e,e1).bind(this,g),{signal:d}),p.setAttribute("data-l10n-id",Le._l10nResizer[g])}}const i=o(this,Pi)[0];let r=0;for(const u of t){if(u===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(o(this,Pi).length/4);if(a!==r){if(a<r)for(let h=0;h<r-a;h++)o(this,Vt).append(o(this,Vt).firstChild);else if(a>r)for(let h=0;h<a-r;h++)o(this,Vt).firstChild.before(o(this,Vt).lastChild);let u=0;for(const h of t){const p=o(this,Pi)[u++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",Le._l10nResizer[p])}}x(this,_e,Gy).call(this,0),b(this,Fs,!0),o(this,Vt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){o(this,Fs)&&x(this,_e,Uy).call(this,o(this,Ah),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){x(this,_e,Mc).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,a;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(i=o(this,nt))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,a;(e=o(this,Vt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(a=o(this,nt))==null||a.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,bh)}set isEditing(e){b(this,bh,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,ja,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){o(this,ui)||b(this,ui,new Map);const{action:i}=e;let r=o(this,ui).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),o(this,ui).delete(i),o(this,ui).size===0&&b(this,ui,null)},Le._telemetryTimeout),o(this,ui).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Fl,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Fl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ba=new WeakMap,Pi=new WeakMap,nt=new WeakMap,Fl=new WeakMap,$r=new WeakMap,wh=new WeakMap,ja=new WeakMap,Vt=new WeakMap,Ua=new WeakMap,Ds=new WeakMap,zr=new WeakMap,Ah=new WeakMap,Va=new WeakMap,Hn=new WeakMap,bh=new WeakMap,Wa=new WeakMap,Fs=new WeakMap,rs=new WeakMap,Ol=new WeakMap,$l=new WeakMap,ui=new WeakMap,Ga=new WeakMap,Sh=new WeakMap,zp=new WeakMap,_e=new WeakSet,Hy=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},_h=new WeakSet,By=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},np=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},GS=function(){if(o(this,Vt))return;b(this,Vt,document.createElement("div")),o(this,Vt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");o(this,Vt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",x(this,_e,XS).bind(this,i),{signal:t}),r.addEventListener("contextmenu",Hi,{signal:t}),r.tabIndex=-1}this.div.prepend(o(this,Vt))},XS=function(e,t){var g;t.preventDefault();const{isMac:i}=vn.platform;if(t.button!==0||t.ctrlKey&&i)return;(g=o(this,nt))==null||g.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,b(this,Ua,[t.screenX,t.screenY]);const a=new AbortController,u=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,_e,Uy).bind(this,e),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Jn,{passive:!1,signal:u}),window.addEventListener("contextmenu",Hi,{signal:u}),b(this,Ds,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var y;a.abort(),this.parent.togglePointerEvents(!0),(y=o(this,nt))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=d,x(this,_e,ip).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},jy=function(e,t,i,r){this.width=i,this.height=r,this.x=e,this.y=t;const[a,u]=this.parentDimensions;this.setDims(a*i,u*r),this.fixAndSetPosition(),this._onResized()},ip=function(){if(!o(this,Ds))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=o(this,Ds);b(this,Ds,null);const a=this.x,u=this.y,h=this.width,d=this.height;a===e&&u===t&&h===i&&d===r||this.addCommands({cmd:x(this,_e,jy).bind(this,a,u,h,d),undo:x(this,_e,jy).bind(this,e,t,i,r),mustExec:!0})},Uy=function(e,t){const[i,r]=this.parentDimensions,a=this.x,u=this.y,h=this.width,d=this.height,p=Le.MIN_SIZE/i,g=Le.MIN_SIZE/r,y=x(this,_e,np).call(this,this.rotation),w=(X,J)=>[y[0]*X+y[2]*J,y[1]*X+y[3]*J],A=x(this,_e,np).call(this,360-this.rotation),S=(X,J)=>[A[0]*X+A[2]*J,A[1]*X+A[3]*J];let C,T,k=!1,R=!1;switch(e){case"topLeft":k=!0,C=(X,J)=>[0,0],T=(X,J)=>[X,J];break;case"topMiddle":C=(X,J)=>[X/2,0],T=(X,J)=>[X/2,J];break;case"topRight":k=!0,C=(X,J)=>[X,0],T=(X,J)=>[0,J];break;case"middleRight":R=!0,C=(X,J)=>[X,J/2],T=(X,J)=>[0,J/2];break;case"bottomRight":k=!0,C=(X,J)=>[X,J],T=(X,J)=>[0,0];break;case"bottomMiddle":C=(X,J)=>[X/2,J],T=(X,J)=>[X/2,0];break;case"bottomLeft":k=!0,C=(X,J)=>[0,J],T=(X,J)=>[X,0];break;case"middleLeft":R=!0,C=(X,J)=>[0,J/2],T=(X,J)=>[X,J/2];break}const M=C(h,d),D=T(h,d);let $=w(...D);const j=Le._round(a+$[0]),B=Le._round(u+$[1]);let K=1,Z=1,me,de;if(t.fromKeyboard)({deltaX:me,deltaY:de}=t);else{const{screenX:X,screenY:J}=t,[V,ne]=o(this,Ua);[me,de]=this.screenToPageTranslation(X-V,J-ne),o(this,Ua)[0]=X,o(this,Ua)[1]=J}if([me,de]=S(me/i,de/r),k){const X=Math.hypot(h,d);K=Z=Math.max(Math.min(Math.hypot(D[0]-M[0]-me,D[1]-M[1]-de)/X,1/h,1/d),p/h,g/d)}else R?K=Math.max(p,Math.min(1,Math.abs(D[0]-M[0]-me)))/h:Z=Math.max(g,Math.min(1,Math.abs(D[1]-M[1]-de)))/d;const Oe=Le._round(h*K),Me=Le._round(d*Z);$=w(...T(Oe,Me));const ue=j-$[0],ve=B-$[1];o(this,Hn)||b(this,Hn,[this.x,this.y,this.width,this.height]),this.width=Oe,this.height=Me,this.x=ue,this.y=ve,this.setDims(i*Oe,r*Me),this.fixAndSetPosition(),this._onResizing()},qS=function(){var e;b(this,Ds,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=o(this,nt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},YS=function(e,t,i){let a=.7*(i/t)+1-.7;if(a===1)return;const u=x(this,_e,np).call(this,this.rotation),h=(j,B)=>[u[0]*j+u[2]*B,u[1]*j+u[3]*B],[d,p]=this.parentDimensions,g=this.x,y=this.y,w=this.width,A=this.height,S=Le.MIN_SIZE/d,C=Le.MIN_SIZE/p;a=Math.max(Math.min(a,1/w,1/A),S/w,C/A);const T=Le._round(w*a),k=Le._round(A*a);if(T===w&&k===A)return;o(this,Hn)||b(this,Hn,[g,y,w,A]);const R=h(w/2,A/2),M=Le._round(g+R[0]),D=Le._round(y+R[1]),$=h(T/2,k/2);this.x=M-$[0],this.y=D-$[1],this.width=T,this.height=k,this.setDims(d*T,p*k),this.fixAndSetPosition(),this._onResizing()},KS=function(){var e;(e=o(this,nt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),x(this,_e,ip).call(this)},Vy=function(e){const{isMac:t}=vn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},QS=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:a},h=p=>{r.abort(),b(this,$r,null),b(this,Va,!1),this._uiManager.endDragSession()||x(this,_e,Vy).call(this,p),i&&this._onStopDragging()};t&&(b(this,Ol,e.clientX),b(this,$l,e.clientY),b(this,$r,e.pointerId),b(this,wh,e.pointerType),window.addEventListener("pointermove",p=>{i||(i=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:w}=p;if(w!==o(this,$r)){Jn(p);return}const[A,S]=this.screenToPageTranslation(g-o(this,Ol),y-o(this,$l));b(this,Ol,g),b(this,$l,y),this._uiManager.dragSelectedEditors(A,S)},u),window.addEventListener("touchmove",Jn,u),window.addEventListener("pointerdown",p=>{p.pointerType===o(this,wh)&&(o(this,Ga)||p.isPrimary)&&h(p),Jn(p)},u));const d=p=>{if(!o(this,$r)||o(this,$r)===p.pointerId){h(p);return}Jn(p)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},Wy=function(){if(o(this,zr)||!this.div)return;b(this,zr,new AbortController);const e=this._uiManager.combinedSignal(o(this,zr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},JS=function(e){Le._resizerKeyboardManager.exec(this,e)},ZS=function(e){var t;o(this,Fs)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==o(this,Vt)&&x(this,_e,Mc).call(this)},e1=function(e){b(this,Ah,o(this,Fs)?e:"")},Gy=function(e){if(o(this,Pi))for(const t of o(this,Pi))t.tabIndex=e},Mc=function(){b(this,Fs,!1),x(this,_e,Gy).call(this,-1),x(this,_e,ip).call(this)},E(Le,_h),Se(Le,"_l10n",null),Se(Le,"_l10nResizer",null),Se(Le,"_borderLineWidth",-1),Se(Le,"_colorManager",new My),Se(Le,"_zIndex",1),Se(Le,"_telemetryTimeout",1e3);let dt=Le;class Wk extends dt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ob=3285377520,ai=4294901760,Yi=65535;class t1{constructor(e){this.h1=e?e&4294967295:Ob,this.h2=e?e&4294967295:Ob}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let C=0,T=e.length;C<T;C++){const k=e.charCodeAt(C);k<=255?t[i++]=k:(t[i++]=k>>>8,t[i++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,u=new Uint32Array(t.buffer,0,r);let h=0,d=0,p=this.h1,g=this.h2;const y=3432918353,w=461845907,A=y&Yi,S=w&Yi;for(let C=0;C<r;C++)C&1?(h=u[C],h=h*y&ai|h*A&Yi,h=h<<15|h>>>17,h=h*w&ai|h*S&Yi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=u[C],d=d*y&ai|d*A&Yi,d=d<<15|d>>>17,d=d*w&ai|d*S&Yi,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,a){case 3:h^=t[r*4+2]<<16;case 2:h^=t[r*4+1]<<8;case 1:h^=t[r*4],h=h*y&ai|h*A&Yi,h=h<<15|h>>>17,h=h*w&ai|h*S&Yi,r&1?p^=h:g^=h}this.h1=p,this.h2=g}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ai|e*36045&Yi,t=t*4283543511&ai|((t<<16|e>>>16)*2950163797&ai)>>>16,e^=t>>>1,e=e*444984403&ai|e*60499&Yi,t=t*3301882366&ai|((t<<16|e>>>16)*3120437893&ai)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Xy=Object.freeze({map:null,hash:"",transfer:void 0});var Xa,qa,Ot,Hp,n1;class r0{constructor(){E(this,Hp);E(this,Xa,!1);E(this,qa,null);E(this,Ot,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=o(this,Ot).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return o(this,Ot).get(e)}remove(e){if(o(this,Ot).delete(e),o(this,Ot).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of o(this,Ot).values())if(t instanceof dt)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=o(this,Ot).get(e);let r=!1;if(i!==void 0)for(const[a,u]of Object.entries(t))i[a]!==u&&(r=!0,i[a]=u);else r=!0,o(this,Ot).set(e,t);r&&x(this,Hp,n1).call(this),t instanceof dt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return o(this,Ot).has(e)}getAll(){return o(this,Ot).size>0?Zv(o(this,Ot)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return o(this,Ot).size}resetModified(){o(this,Xa)&&(b(this,Xa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new i1(this)}get serializable(){if(o(this,Ot).size===0)return Xy;const e=new Map,t=new t1,i=[],r=Object.create(null);let a=!1;for(const[u,h]of o(this,Ot)){const d=h instanceof dt?h.serialize(!1,r):h;d&&(e.set(u,d),t.update(`${u}:${JSON.stringify(d)}`),a||(a=!!d.bitmap))}if(a)for(const u of e.values())u.bitmap&&i.push(u.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Xy}get editorStats(){let e=null;const t=new Map;for(const i of o(this,Ot).values()){if(!(i instanceof dt))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const u=e[a]||(e[a]=new Map);for(const[h,d]of Object.entries(r)){if(h==="type")continue;let p=u.get(h);p||(p=new Map,u.set(h,p));const g=p.get(d)??0;p.set(d,g+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){b(this,qa,null)}get modifiedIds(){if(o(this,qa))return o(this,qa);const e=[];for(const t of o(this,Ot).values())!(t instanceof dt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,qa,{ids:new Set(e),hash:e.join(",")})}}Xa=new WeakMap,qa=new WeakMap,Ot=new WeakMap,Hp=new WeakSet,n1=function(){o(this,Xa)||(b(this,Xa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Eh;class i1 extends r0{constructor(t){super();E(this,Eh);const{map:i,hash:r,transfer:a}=t.serializable,u=structuredClone(i,a?{transfer:a}:null);b(this,Eh,{map:u,hash:r,transfer:a})}get print(){Qe("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,Eh)}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}Eh=new WeakMap;var zl;class Gk{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,zl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),o(this,zl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||o(this,zl).has(e.loadedName))){if(_t(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=e,u=new FontFace(i,r,a);this.addNativeFontFace(u);try{await u.load(),o(this,zl).add(i),t==null||t(e)}catch{Re(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Qe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Re(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Fe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ln||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Fe(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(_t(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(D,$){return D.charCodeAt($)<<24|D.charCodeAt($+1)<<16|D.charCodeAt($+2)<<8|D.charCodeAt($+3)&255}function r(D,$,j,B){const K=D.substring(0,$),Z=D.substring($+j);return K+B+Z}let a,u;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function g(D,$){if(++p>30){Re("Load test font never loaded."),$();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){$();return}setTimeout(g.bind(null,D,$))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,y.length,y);const S=16,C=1482184792;let T=i(w,S);for(a=0,u=y.length-3;a<u;a+=4)T=T-C+i(y,a)|0;a<y.length&&(T=T-C+i(y+"XXX",a)|0),w=r(w,S,4,Lk(T));const k=`url(data:font/opentype;base64,${btoa(w)});`,R=`@font-face {font-family:"${y}";src:${k}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const D of[e.loadedName,y]){const $=this._document.createElement("span");$.textContent="Hi",$.style.fontFamily=D,M.append($)}this._document.body.append(M),g(y,()=>{M.remove(),t.complete()})}}zl=new WeakMap;class Xk{constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const a in e)this[a]=e[a];this.disableFontFace=t===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Ok(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let r;try{r=e.get(i)}catch(u){Re(`getPathGenerator - ignoring character: "${u}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=a}}const Uf={DATA:1,ERROR:2},bt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $b(){}function Tn(c){if(c instanceof aa||c instanceof Cy||c instanceof Yc||c instanceof Nb||c instanceof Cp||c instanceof yy)return c;switch(c instanceof Error||typeof c=="object"&&c!==null||Qe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),c.name){case"AbortException":return new aa(c.message);case"InvalidPDFException":return new Cy(c.message);case"MissingPDFException":return new Yc(c.message);case"PasswordException":return new Nb(c.message,c.code);case"UnexpectedResponseException":return new Cp(c.message,c.status);case"UnknownErrorException":return new yy(c.message,c.details)}return new yy(c.message,c.toString())}var Hl,mi,s1,r1,a1,sp;class Ic{constructor(e,t,i){E(this,mi);E(this,Hl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",x(this,mi,s1).bind(this),{signal:o(this,Hl).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(u){a.reject(u)}return a.promise}sendWithStream(e,t,i,r){const a=this.streamId++,u=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:u,targetName:h,action:e,streamId:a,data:t,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[a].pullCall=g,d.postMessage({sourceName:u,targetName:h,stream:bt.PULL,streamId:a,desiredSize:p.desiredSize}),g.promise},cancel:p=>{_t(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[a].cancelCall=g,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:u,targetName:h,stream:bt.CANCEL,streamId:a,reason:Tn(p)}),g.promise}},i)}destroy(){var e;(e=o(this,Hl))==null||e.abort(),b(this,Hl,null)}}Hl=new WeakMap,mi=new WeakSet,s1=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){x(this,mi,a1).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Uf.DATA)r.resolve(e.data);else if(e.callback===Uf.ERROR)r.reject(Tn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(u){a.postMessage({sourceName:i,targetName:r,callback:Uf.DATA,callbackId:e.callbackId,data:u})},function(u){a.postMessage({sourceName:i,targetName:r,callback:Uf.ERROR,callbackId:e.callbackId,reason:Tn(u)})});return}if(e.streamId){x(this,mi,r1).call(this,e);return}t(e.data)},r1=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,u=this,h=this.actionHandler[e.action],d={enqueue(p,g=1,y){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=g,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:bt.ENQUEUE,streamId:t,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:bt.CLOSE,streamId:t}),delete u.streamSinks[t])},error(p){_t(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:bt.ERROR,streamId:t,reason:Tn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(h,e.data,d).then(function(){a.postMessage({sourceName:i,targetName:r,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:bt.START_COMPLETE,streamId:t,reason:Tn(p)})})},a1=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,a=this.comObj,u=this.streamControllers[t],h=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?u.startCall.resolve():u.startCall.reject(Tn(e.reason));break;case bt.PULL_COMPLETE:e.success?u.pullCall.resolve():u.pullCall.reject(Tn(e.reason));break;case bt.PULL:if(!h){a.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}h.desiredSize<=0&&e.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=e.desiredSize,Promise.try(h.onPull||$b).then(function(){a.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,reason:Tn(p)})});break;case bt.ENQUEUE:if(_t(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(e.chunk);break;case bt.CLOSE:if(_t(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),x(this,mi,sp).call(this,u,t);break;case bt.ERROR:_t(u,"error should have stream controller"),u.controller.error(Tn(e.reason)),x(this,mi,sp).call(this,u,t);break;case bt.CANCEL_COMPLETE:e.success?u.cancelCall.resolve():u.cancelCall.reject(Tn(e.reason)),x(this,mi,sp).call(this,u,t);break;case bt.CANCEL:if(!h)break;const d=Tn(e.reason);Promise.try(h.onCancel||$b,d).then(function(){a.postMessage({sourceName:i,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,reason:Tn(p)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},sp=async function(e,t){var i,r,a;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var xh;class o1{constructor({enableHWA:e=!1}){E(this,xh,!1);b(this,xh,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!o(this,xh)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Qe("Abstract method `_createCanvas` called.")}}xh=new WeakMap;class qk extends o1{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class l1{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class u1 extends l1{async _fetch(e){const t=await rg(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):sg(t)}}class c1{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,a){return"none"}destroy(e=!1){}}var Ya,Bl,Os,$s,sn,Ka,Qa,se,en,Nc,pl,rp,gl,h1,qy,ml,Dc,Fc,Yy,Oc;class Yk extends c1{constructor({docId:t,ownerDocument:i=globalThis.document}){super();E(this,se);E(this,Ya);E(this,Bl);E(this,Os);E(this,$s);E(this,sn);E(this,Ka);E(this,Qa,0);b(this,$s,t),b(this,sn,i)}addFilter(t){if(!t)return"none";let i=o(this,se,en).get(t);if(i)return i;const[r,a,u]=x(this,se,rp).call(this,t),h=t.length===1?r:`${r}${a}${u}`;if(i=o(this,se,en).get(h),i)return o(this,se,en).set(t,i),i;const d=`g_${o(this,$s)}_transfer_map_${dn(this,Qa)._++}`,p=x(this,se,gl).call(this,d);o(this,se,en).set(t,p),o(this,se,en).set(h,p);const g=x(this,se,ml).call(this,d);return x(this,se,Fc).call(this,r,a,u,g),p}addHCMFilter(t,i){var S;const r=`${t}-${i}`,a="base";let u=o(this,se,Nc).get(a);if((u==null?void 0:u.key)===r||(u?((S=u.filter)==null||S.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},o(this,se,Nc).set(a,u)),!t||!i))return u.url;const h=x(this,se,Oc).call(this,t);t=ye.makeHexColor(...h);const d=x(this,se,Oc).call(this,i);if(i=ye.makeHexColor(...d),o(this,se,pl).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return u.url;const p=new Array(256);for(let C=0;C<=255;C++){const T=C/255;p[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const g=p.join(","),y=`g_${o(this,$s)}_hcm_filter`,w=u.filter=x(this,se,ml).call(this,y);x(this,se,Fc).call(this,g,g,g,w),x(this,se,qy).call(this,w);const A=(C,T)=>{const k=h[C]/255,R=d[C]/255,M=new Array(T+1);for(let D=0;D<=T;D++)M[D]=k+D/T*(R-k);return M.join(",")};return x(this,se,Fc).call(this,A(0,5),A(1,5),A(2,5),w),u.url=x(this,se,gl).call(this,y),u.url}addAlphaFilter(t){let i=o(this,se,en).get(t);if(i)return i;const[r]=x(this,se,rp).call(this,[t]),a=`alpha_${r}`;if(i=o(this,se,en).get(a),i)return o(this,se,en).set(t,i),i;const u=`g_${o(this,$s)}_alpha_map_${dn(this,Qa)._++}`,h=x(this,se,gl).call(this,u);o(this,se,en).set(t,h),o(this,se,en).set(a,h);const d=x(this,se,ml).call(this,u);return x(this,se,Yy).call(this,r,d),h}addLuminosityFilter(t){let i=o(this,se,en).get(t||"luminosity");if(i)return i;let r,a;if(t?([r]=x(this,se,rp).call(this,[t]),a=`luminosity_${r}`):a="luminosity",i=o(this,se,en).get(a),i)return o(this,se,en).set(t,i),i;const u=`g_${o(this,$s)}_luminosity_map_${dn(this,Qa)._++}`,h=x(this,se,gl).call(this,u);o(this,se,en).set(t,h),o(this,se,en).set(a,h);const d=x(this,se,ml).call(this,u);return x(this,se,h1).call(this,d),t&&x(this,se,Yy).call(this,r,d),h}addHighlightHCMFilter(t,i,r,a,u){var R;const h=`${i}-${r}-${a}-${u}`;let d=o(this,se,Nc).get(t);if((d==null?void 0:d.key)===h||(d?((R=d.filter)==null||R.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},o(this,se,Nc).set(t,d)),!i||!r))return d.url;const[p,g]=[i,r].map(x(this,se,Oc).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[A,S]=[a,u].map(x(this,se,Oc).bind(this));w<y&&([y,w,A,S]=[w,y,S,A]),o(this,se,pl).style.color="";const C=(M,D,$)=>{const j=new Array(256),B=(w-y)/$,K=M/255,Z=(D-M)/(255*$);let me=0;for(let de=0;de<=$;de++){const Oe=Math.round(y+de*B),Me=K+de*Z;for(let ue=me;ue<=Oe;ue++)j[ue]=Me;me=Oe+1}for(let de=me;de<256;de++)j[de]=j[me-1];return j.join(",")},T=`g_${o(this,$s)}_hcm_${t}_filter`,k=d.filter=x(this,se,ml).call(this,T);return x(this,se,qy).call(this,k),x(this,se,Fc).call(this,C(A[0],S[0],5),C(A[1],S[1],5),C(A[2],S[2],5),k),d.url=x(this,se,gl).call(this,T),d.url}destroy(t=!1){var i,r,a,u;t&&((i=o(this,Ka))!=null&&i.size)||((r=o(this,Os))==null||r.parentNode.parentNode.remove(),b(this,Os,null),(a=o(this,Bl))==null||a.clear(),b(this,Bl,null),(u=o(this,Ka))==null||u.clear(),b(this,Ka,null),b(this,Qa,0))}}Ya=new WeakMap,Bl=new WeakMap,Os=new WeakMap,$s=new WeakMap,sn=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,se=new WeakSet,en=function(){return o(this,Bl)||b(this,Bl,new Map)},Nc=function(){return o(this,Ka)||b(this,Ka,new Map)},pl=function(){if(!o(this,Os)){const t=o(this,sn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=o(this,sn).createElementNS(xs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),b(this,Os,o(this,sn).createElementNS(xs,"defs")),t.append(r),r.append(o(this,Os)),o(this,sn).body.append(t)}return o(this,Os)},rp=function(t){if(t.length===1){const p=t[0],g=new Array(256);for(let w=0;w<256;w++)g[w]=p[w]/255;const y=g.join(",");return[y,y,y]}const[i,r,a]=t,u=new Array(256),h=new Array(256),d=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,h[p]=r[p]/255,d[p]=a[p]/255;return[u.join(","),h.join(","),d.join(",")]},gl=function(t){if(o(this,Ya)===void 0){b(this,Ya,"");const i=o(this,sn).URL;i!==o(this,sn).baseURI&&(ag(i)?Re('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Ya,i.split("#",1)[0]))}return`url(${o(this,Ya)}#${t})`},h1=function(t){const i=o(this,sn).createElementNS(xs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},qy=function(t){const i=o(this,sn).createElementNS(xs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},ml=function(t){const i=o(this,sn).createElementNS(xs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),o(this,se,pl).append(i),i},Dc=function(t,i,r){const a=o(this,sn).createElementNS(xs,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",r),t.append(a)},Fc=function(t,i,r,a){const u=o(this,sn).createElementNS(xs,"feComponentTransfer");a.append(u),x(this,se,Dc).call(this,u,"feFuncR",t),x(this,se,Dc).call(this,u,"feFuncG",i),x(this,se,Dc).call(this,u,"feFuncB",r)},Yy=function(t,i){const r=o(this,sn).createElementNS(xs,"feComponentTransfer");i.append(r),x(this,se,Dc).call(this,r,"feFuncA",t)},Oc=function(t){return o(this,se,pl).style.color=t,s0(getComputedStyle(o(this,se,pl)).getPropertyValue("color"))};class d1{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Qe("Abstract method `_fetch` called.")}}class f1 extends d1{async _fetch(e){const t=await rg(e,"arraybuffer");return new Uint8Array(t)}}ln&&Re("Please use the `legacy` build in Node.js environments.");async function p1(c){const t=await process.getBuiltinModule("fs").promises.readFile(c);return new Uint8Array(t)}class Kk extends c1{}class Qk extends o1{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Jk extends l1{async _fetch(e){return p1(e)}}class Zk extends d1{async _fetch(e){return p1(e)}}const on={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ky(c,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),c.clip(r)}class a0{getPattern(){Qe("Abstract method `getPattern` called.")}}class eT extends a0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let a;if(r===on.STROKE||r===on.FILL){const u=t.current.getClippedPathBoundingBox(r,rt(e))||[0,0,0,0],h=Math.ceil(u[2]-u[0])||1,d=Math.ceil(u[3]-u[1])||1,p=t.cachedCanvases.getCanvas("pattern",h,d),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-u[0],-u[1]),i=ye.transform(i,[1,0,0,1,u[0],u[1]]),g.transform(...t.baseTransform),this.matrix&&g.transform(...this.matrix),Ky(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),a=e.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);a.setTransform(y)}else Ky(e,this._bbox),a=this._createGradient(e);return a}}function Ay(c,e,t,i,r,a,u,h){const d=e.coords,p=e.colors,g=c.data,y=c.width*4;let w;d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=u,u=w),d[i+1]>d[r+1]&&(w=i,i=r,r=w,w=u,u=h,h=w),d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=a,a=u,u=w);const A=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,C=(d[i]+e.offsetX)*e.scaleX,T=(d[i+1]+e.offsetY)*e.scaleY,k=(d[r]+e.offsetX)*e.scaleX,R=(d[r+1]+e.offsetY)*e.scaleY;if(S>=R)return;const M=p[a],D=p[a+1],$=p[a+2],j=p[u],B=p[u+1],K=p[u+2],Z=p[h],me=p[h+1],de=p[h+2],Oe=Math.round(S),Me=Math.round(R);let ue,ve,X,J,V,ne,Q,N;for(let U=Oe;U<=Me;U++){if(U<T){const be=U<S?0:(S-U)/(S-T);ue=A-(A-C)*be,ve=M-(M-j)*be,X=D-(D-B)*be,J=$-($-K)*be}else{let be;U>R?be=1:T===R?be=0:be=(T-U)/(T-R),ue=C-(C-k)*be,ve=j-(j-Z)*be,X=B-(B-me)*be,J=K-(K-de)*be}let pe;U<S?pe=0:U>R?pe=1:pe=(S-U)/(S-R),V=A-(A-k)*pe,ne=M-(M-Z)*pe,Q=D-(D-me)*pe,N=$-($-de)*pe;const ke=Math.round(Math.min(ue,V)),Ie=Math.round(Math.max(ue,V));let Ee=y*U+ke*4;for(let be=ke;be<=Ie;be++)pe=(ue-be)/(ue-V),pe<0?pe=0:pe>1&&(pe=1),g[Ee++]=ve-(ve-ne)*pe|0,g[Ee++]=X-(X-Q)*pe|0,g[Ee++]=J-(J-N)*pe|0,g[Ee++]=255}}function tT(c,e,t){const i=e.coords,r=e.colors;let a,u;switch(e.type){case"lattice":const h=e.verticesPerRow,d=Math.floor(i.length/h)-1,p=h-1;for(a=0;a<d;a++){let g=a*h;for(let y=0;y<p;y++,g++)Ay(c,t,i[g],i[g+1],i[g+h],r[g],r[g+1],r[g+h]),Ay(c,t,i[g+h+1],i[g+1],i[g+h],r[g+h+1],r[g+1],r[g+h])}break;case"triangles":for(a=0,u=i.length;a<u;a+=3)Ay(c,t,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class nT extends a0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(g*e[1]*1.1)),3e3),A=p/y,S=g/w,C={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/S},T=y+2*2,k=w+2*2,R=i.getCanvas("mesh",T,k),M=R.context,D=M.createImageData(y,w);if(t){const j=D.data;for(let B=0,K=j.length;B<K;B+=4)j[B]=t[0],j[B+1]=t[1],j[B+2]=t[2],j[B+3]=255}for(const j of this._figures)tT(D,j,C);return M.putImageData(D,2,2),{canvas:R.canvas,offsetX:h-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}getPattern(e,t,i,r){Ky(e,this._bbox);let a;if(r===on.SHADING)a=ye.singularValueDecompose2dScale(rt(e));else if(a=ye.singularValueDecompose2dScale(t.baseTransform),this.matrix){const h=ye.singularValueDecompose2dScale(this.matrix);a=[a[0]*h[0],a[1]*h[1]]}const u=this._createMeshCanvas(a,r===on.SHADING?null:this._background,t.cachedCanvases);return r!==on.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(u.offsetX,u.offsetY),e.scale(u.scaleX,u.scaleY),e.createPattern(u.canvas,"no-repeat")}}class iT extends a0{getPattern(){return"hotpink"}}function sT(c){switch(c[0]){case"RadialAxial":return new eT(c);case"Mesh":return new nT(c);case"Dummy":return new iT}throw new Error(`Unknown IR type: ${c[0]}`)}const zb={COLORED:1,UNCOLORED:2},Bp=class Bp{constructor(e,t,i,r,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:a,color:u,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),ig("TilingType: "+a);const g=t[0],y=t[1],w=t[2],A=t[3],S=w-g,C=A-y,T=ye.singularValueDecompose2dScale(this.matrix),k=ye.singularValueDecompose2dScale(this.baseTransform),R=T[0]*k[0],M=T[1]*k[1];let D=S,$=C,j=!1,B=!1;const K=Math.ceil(d*R),Z=Math.ceil(p*M),me=Math.ceil(S*R),de=Math.ceil(C*M);K>=me?D=d:j=!0,Z>=de?$=p:B=!0;const Oe=this.getSizeAndScale(D,this.ctx.canvas.width,R),Me=this.getSizeAndScale($,this.ctx.canvas.height,M),ue=e.cachedCanvases.getCanvas("pattern",Oe.size,Me.size),ve=ue.context,X=h.createCanvasGraphics(ve);if(X.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(X,r,u),ve.translate(-Oe.scale*g,-Me.scale*y),X.transform(Oe.scale,0,0,Me.scale,0,0),ve.save(),this.clipBbox(X,g,y,w,A),X.baseTransform=rt(X.ctx),X.executeOperatorList(i),X.endDrawing(),ve.restore(),j||B){const J=ue.canvas;j&&(D=d),B&&($=p);const V=this.getSizeAndScale(D,this.ctx.canvas.width,R),ne=this.getSizeAndScale($,this.ctx.canvas.height,M),Q=V.size,N=ne.size,U=e.cachedCanvases.getCanvas("pattern-workaround",Q,N),pe=U.context,ke=j?Math.floor(S/d):0,Ie=B?Math.floor(C/p):0;for(let Ee=0;Ee<=ke;Ee++)for(let be=0;be<=Ie;be++)pe.drawImage(J,Q*Ee,N*be,Q,N,0,0,Q,N);return{canvas:U.canvas,scaleX:V.scale,scaleY:ne.scale,offsetX:g,offsetY:y}}return{canvas:ue.canvas,scaleX:Oe.scale,scaleY:Me.scale,offsetX:g,offsetY:y}}getSizeAndScale(e,t,i){const r=Math.max(Bp.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*i);return a>=r?a=r:i=a/e,{scale:i,size:a}}clipBbox(e,t,i,r,a){const u=r-t,h=a-i;e.ctx.rect(t,i,u,h),e.current.updateRectMinMax(rt(e.ctx),[t,i,r,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,a=e.current;switch(t){case zb.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,a.fillColor=u.fillStyle,a.strokeColor=u.strokeStyle;break;case zb.UNCOLORED:const h=ye.makeHexColor(i[0],i[1],i[2]);r.fillStyle=h,r.strokeStyle=h,a.fillColor=h,a.strokeColor=h;break;default:throw new Rk(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let a=i;r!==on.SHADING&&(a=ye.transform(a,t.baseTransform),this.matrix&&(a=ye.transform(a,this.matrix)));const u=this.createPatternCanvas(t);let h=new DOMMatrix(a);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const d=e.createPattern(u.canvas,"repeat");return d.setTransform(h),d}};Se(Bp,"MAX_PATTERN_SIZE",3e3);let Qy=Bp;function rT({src:c,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:u=!1}){const h=vn.isLittleEndian?4278190080:255,[d,p]=u?[a,h]:[h,a],g=i>>3,y=i&7,w=c.length;t=new Uint32Array(t.buffer);let A=0;for(let S=0;S<r;S++){for(const T=e+g;e<T;e++){const k=e<w?c[e]:255;t[A++]=k&128?p:d,t[A++]=k&64?p:d,t[A++]=k&32?p:d,t[A++]=k&16?p:d,t[A++]=k&8?p:d,t[A++]=k&4?p:d,t[A++]=k&2?p:d,t[A++]=k&1?p:d}if(y===0)continue;const C=e<w?c[e++]:255;for(let T=0;T<y;T++)t[A++]=C&1<<7-T?p:d}return{srcPos:e,destPos:A}}const Hb=16,Bb=100,aT=15,jb=10,Ub=1e3,In=16;function oT(c,e){if(c._removeMirroring)throw new Error("Context is already forwarding operations.");c.__originalSave=c.save,c.__originalRestore=c.restore,c.__originalRotate=c.rotate,c.__originalScale=c.scale,c.__originalTranslate=c.translate,c.__originalTransform=c.transform,c.__originalSetTransform=c.setTransform,c.__originalResetTransform=c.resetTransform,c.__originalClip=c.clip,c.__originalMoveTo=c.moveTo,c.__originalLineTo=c.lineTo,c.__originalBezierCurveTo=c.bezierCurveTo,c.__originalRect=c.rect,c.__originalClosePath=c.closePath,c.__originalBeginPath=c.beginPath,c._removeMirroring=()=>{c.save=c.__originalSave,c.restore=c.__originalRestore,c.rotate=c.__originalRotate,c.scale=c.__originalScale,c.translate=c.__originalTranslate,c.transform=c.__originalTransform,c.setTransform=c.__originalSetTransform,c.resetTransform=c.__originalResetTransform,c.clip=c.__originalClip,c.moveTo=c.__originalMoveTo,c.lineTo=c.__originalLineTo,c.bezierCurveTo=c.__originalBezierCurveTo,c.rect=c.__originalRect,c.closePath=c.__originalClosePath,c.beginPath=c.__originalBeginPath,delete c._removeMirroring},c.save=function(){e.save(),this.__originalSave()},c.restore=function(){e.restore(),this.__originalRestore()},c.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},c.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},c.transform=function(i,r,a,u,h,d){e.transform(i,r,a,u,h,d),this.__originalTransform(i,r,a,u,h,d)},c.setTransform=function(i,r,a,u,h,d){e.setTransform(i,r,a,u,h,d),this.__originalSetTransform(i,r,a,u,h,d)},c.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},c.rotate=function(i){e.rotate(i),this.__originalRotate(i)},c.clip=function(i){e.clip(i),this.__originalClip(i)},c.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},c.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},c.bezierCurveTo=function(t,i,r,a,u,h){e.bezierCurveTo(t,i,r,a,u,h),this.__originalBezierCurveTo(t,i,r,a,u,h)},c.rect=function(t,i,r,a){e.rect(t,i,r,a),this.__originalRect(t,i,r,a)},c.closePath=function(){e.closePath(),this.__originalClosePath()},c.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class lT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Vf(c,e,t,i,r,a,u,h,d,p){const[g,y,w,A,S,C]=rt(c);if(y===0&&w===0){const R=u*g+S,M=Math.round(R),D=h*A+C,$=Math.round(D),j=(u+d)*g+S,B=Math.abs(Math.round(j)-M)||1,K=(h+p)*A+C,Z=Math.abs(Math.round(K)-$)||1;return c.setTransform(Math.sign(g),0,0,Math.sign(A),M,$),c.drawImage(e,t,i,r,a,0,0,B,Z),c.setTransform(g,y,w,A,S,C),[B,Z]}if(g===0&&A===0){const R=h*w+S,M=Math.round(R),D=u*y+C,$=Math.round(D),j=(h+p)*w+S,B=Math.abs(Math.round(j)-M)||1,K=(u+d)*y+C,Z=Math.abs(Math.round(K)-$)||1;return c.setTransform(0,Math.sign(y),Math.sign(w),0,M,$),c.drawImage(e,t,i,r,a,0,0,Z,B),c.setTransform(g,y,w,A,S,C),[Z,B]}c.drawImage(e,t,i,r,a,u,h,d,p);const T=Math.hypot(g,y),k=Math.hypot(w,A);return[T*d,k*p]}function uT(c){const{width:e,height:t}=c;if(e>Ub||t>Ub)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=e+1;let u=new Uint8Array(a*(t+1)),h,d,p;const g=e+7&-8;let y=new Uint8Array(g*t),w=0;for(const k of c.data){let R=128;for(;R>0;)y[w++]=k&R?0:255,R>>=1}let A=0;for(w=0,y[w]!==0&&(u[0]=1,++A),d=1;d<e;d++)y[w]!==y[w+1]&&(u[d]=y[w]?2:1,++A),w++;for(y[w]!==0&&(u[d]=2,++A),h=1;h<t;h++){w=h*g,p=h*a,y[w-g]!==y[w]&&(u[p]=y[w]?1:8,++A);let k=(y[w]?4:0)+(y[w-g]?8:0);for(d=1;d<e;d++)k=(k>>2)+(y[w+1]?4:0)+(y[w-g+1]?8:0),r[k]&&(u[p+d]=r[k],++A),w++;if(y[w-g]!==y[w]&&(u[p+d]=y[w]?2:4,++A),A>i)return null}for(w=g*(t-1),p=h*a,y[w]!==0&&(u[p]=8,++A),d=1;d<e;d++)y[w]!==y[w+1]&&(u[p+d]=y[w]?4:8,++A),w++;if(y[w]!==0&&(u[p+d]=4,++A),A>i)return null;const S=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(h=0;A&&h<=t;h++){let k=h*a;const R=k+e;for(;k<R&&!u[k];)k++;if(k===R)continue;C.moveTo(k%a,h);const M=k;let D=u[k];do{const $=S[D];do k+=$;while(!u[k]);const j=u[k];j!==5&&j!==10?(D=j,u[k]=0):(D=j&51*D>>4,u[k]&=D>>2|D<<2),C.lineTo(k%a,k/a|0),u[k]||--A}while(M!==k);--h}return y=null,u=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(C),k.beginPath(),k.restore()}}class Vb{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=ES,this.textMatrixScale=1,this.fontMatrix=xy,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Zt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ye.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ye.applyTransform(t,e),r=ye.applyTransform(t.slice(2),e),a=ye.applyTransform([t[0],t[3]],e),u=ye.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],a[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],u[1])}updateScalingPathMinMax(e,t){ye.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,a,u,h,d,p,g){const y=ye.bezierBoundingBox(t,i,r,a,u,h,d,p,g);g||this.updateRectMinMax(e,y)}getPathBoundingBox(e=on.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===on.STROKE){t||Qe("Stroke bounding box must include transform.");const r=ye.singularValueDecompose2dScale(t),a=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=u,i[2]+=a,i[3]+=u}return i}updateClipFromPath(){const e=ye.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=on.FILL,t=null){return ye.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Wb(c,e){if(e instanceof ImageData){c.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%In,a=(t-r)/In,u=r===0?a:a+1,h=c.createImageData(i,In);let d=0,p;const g=e.data,y=h.data;let w,A,S,C;if(e.kind===Yf.GRAYSCALE_1BPP){const T=g.byteLength,k=new Uint32Array(y.buffer,0,y.byteLength>>2),R=k.length,M=i+7>>3,D=4294967295,$=vn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(S=w<a?In:r,p=0,A=0;A<S;A++){const j=T-d;let B=0;const K=j>M?i:j*8-7,Z=K&-8;let me=0,de=0;for(;B<Z;B+=8)de=g[d++],k[p++]=de&128?D:$,k[p++]=de&64?D:$,k[p++]=de&32?D:$,k[p++]=de&16?D:$,k[p++]=de&8?D:$,k[p++]=de&4?D:$,k[p++]=de&2?D:$,k[p++]=de&1?D:$;for(;B<K;B++)me===0&&(de=g[d++],me=128),k[p++]=de&me?D:$,me>>=1}for(;p<R;)k[p++]=0;c.putImageData(h,0,w*In)}}else if(e.kind===Yf.RGBA_32BPP){for(A=0,C=i*In*4,w=0;w<a;w++)y.set(g.subarray(d,d+C)),d+=C,c.putImageData(h,0,A),A+=In;w<u&&(C=i*r*4,y.set(g.subarray(d,d+C)),c.putImageData(h,0,A))}else if(e.kind===Yf.RGB_24BPP)for(S=In,C=i*S,w=0;w<u;w++){for(w>=a&&(S=r,C=i*S),p=0,A=C;A--;)y[p++]=g[d++],y[p++]=g[d++],y[p++]=g[d++],y[p++]=255;c.putImageData(h,0,w*In)}else throw new Error(`bad image kind: ${e.kind}`)}function Gb(c,e){if(e.bitmap){c.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%In,a=(t-r)/In,u=r===0?a:a+1,h=c.createImageData(i,In);let d=0;const p=e.data,g=h.data;for(let y=0;y<u;y++){const w=y<a?In:r;({srcPos:d}=rT({src:p,srcPos:d,dest:g,width:i,height:w,nonBlackColor:0})),c.putImageData(h,0,y*In)}}function Ec(c,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)c[i]!==void 0&&(e[i]=c[i]);c.setLineDash!==void 0&&(e.setLineDash(c.getLineDash()),e.lineDashOffset=c.lineDashOffset)}function Wf(c){if(c.strokeStyle=c.fillStyle="#000000",c.fillRule="nonzero",c.globalAlpha=1,c.lineWidth=1,c.lineCap="butt",c.lineJoin="miter",c.miterLimit=10,c.globalCompositeOperation="source-over",c.font="10px sans-serif",c.setLineDash!==void 0&&(c.setLineDash([]),c.lineDashOffset=0),!ln){const{filter:e}=c;e!=="none"&&e!==""&&(c.filter="none")}}function Xb(c,e){if(e)return!0;const t=ye.singularValueDecompose2dScale(c);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*oa.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const cT=["butt","round","square"],hT=["miter","round","bevel"],dT={},qb={};var Bi,Jy,Zy,ev;const h0=class h0{constructor(e,t,i,r,a,{optionalContentConfig:u,markedContentStack:h=null},d,p){E(this,Bi);this.ctx=e,this.current=new Vb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=u,this.cachedCanvases=new lT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,u=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,u),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",a,u);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...rt(this.compositeCtx))}this.ctx.save(),Wf(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=rt(this.ctx)}executeOperatorList(e,t,i,r){const a=e.argsArray,u=e.fnArray;let h=t||0;const d=a.length;if(d===h)return h;const p=d-h>jb&&typeof i=="function",g=p?Date.now()+aT:0;let y=0;const w=this.commonObjs,A=this.objs;let S;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if(S=u[h],S!==xi.dependency)this[S].apply(this,a[h]);else for(const C of a[h]){const T=C.startsWith("g_")?w:A;if(!T.has(C))return T.get(C,i),h}if(h++,h===d)return h;if(p&&++y>jb){if(Date.now()>g)return i(),h;y=0}}}endDrawing(){x(this,Bi,Jy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),x(this,Bi,Zy).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),u=Math.max(Math.hypot(t[2],t[3]),1),h=i,d=r,p="prescale1",g,y;for(;a>2&&h>1||u>2&&d>1;){let w=h,A=d;a>2&&h>1&&(w=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),a/=h/w),u>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,u/=d/A),g=this.cachedCanvases.getCanvas(p,w,A),y=g.context,y.clearRect(0,0,w,A),y.drawImage(e,0,0,h,d,0,0,w,A),e=g.canvas,h=w,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:h,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,a=this.current.fillColor,u=this.current.patternFill,h=rt(t);let d,p,g,y;if((e.bitmap||e.data)&&e.count>1){const K=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),a]),d=this._cachedBitmapsMap.get(K),d||(d=new Map,this._cachedBitmapsMap.set(K,d));const Z=d.get(p);if(Z&&!u){const me=Math.round(Math.min(h[0],h[2])+h[4]),de=Math.round(Math.min(h[1],h[3])+h[5]);return{canvas:Z,offsetX:me,offsetY:de}}g=Z}g||(y=this.cachedCanvases.getCanvas("maskCanvas",i,r),Gb(y.context,e));let w=ye.transform(h,[1/i,0,0,-1/r,0,0]);w=ye.transform(w,[1,0,0,1,0,-r]);const[A,S,C,T]=ye.getAxialAlignedBoundingBox([0,0,i,r],w),k=Math.round(C-A)||1,R=Math.round(T-S)||1,M=this.cachedCanvases.getCanvas("fillCanvas",k,R),D=M.context,$=A,j=S;D.translate(-$,-j),D.transform(...w),g||(g=this._scaleImage(y.canvas,qi(D)),g=g.img,d&&u&&d.set(p,g)),D.imageSmoothingEnabled=Xb(rt(D),e.interpolate),Vf(D,g,0,0,g.width,g.height,0,0,i,r),D.globalCompositeOperation="source-in";const B=ye.transform(qi(D),[1,0,0,1,-$,-j]);return D.fillStyle=u?a.getPattern(t,this,B,on.FILL):a,D.fillRect(0,0,i,r),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,M.canvas)),{canvas:M.canvas,offsetX:Math.round($),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=cT[e]}setLineJoin(e){this.ctx.lineJoin=hT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...rt(this.suspendedCtx)),Ec(this.suspendedCtx,a),oT(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ec(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const a=r[0],u=r[1],h=r[2]-a,d=r[3]-u;h===0||d===0||(this.genericComposeSMask(t.context,i,h,d,t.subtype,t.backdrop,t.transferMap,a,u,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,a,u,h,d,p,g,y){let w=e.canvas,A=d-g,S=p-y;if(u){const T=ye.makeHexColor(...u);if(A<0||S<0||A+i>w.width||S+r>w.height){const k=this.cachedCanvases.getCanvas("maskExtension",i,r),R=k.context;R.drawImage(w,-A,-S),R.globalCompositeOperation="destination-atop",R.fillStyle=T,R.fillRect(0,0,i,r),R.globalCompositeOperation="source-over",w=k.canvas,A=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(A,S,i,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=T,e.fillRect(A,S,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&h?t.filter=this.filterFactory.addAlphaFilter(h):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(h));const C=new Path2D;C.rect(d,p,i,r),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(w,A,S,i,r,d,p,i,r),t.restore()}save(){this.inSMaskMode?(Ec(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ec(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,a,u){this.ctx.transform(e,t,i,r,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,a=this.current;let u=a.x,h=a.y,d,p;const g=rt(r),y=g[0]===0&&g[3]===0||g[1]===0&&g[2]===0,w=y?i.slice(0):null;for(let A=0,S=0,C=e.length;A<C;A++)switch(e[A]|0){case xi.rectangle:u=t[S++],h=t[S++];const T=t[S++],k=t[S++],R=u+T,M=h+k;r.moveTo(u,h),T===0||k===0?r.lineTo(R,M):(r.lineTo(R,h),r.lineTo(R,M),r.lineTo(u,M)),y||a.updateRectMinMax(g,[u,h,R,M]),r.closePath();break;case xi.moveTo:u=t[S++],h=t[S++],r.moveTo(u,h),y||a.updatePathMinMax(g,u,h);break;case xi.lineTo:u=t[S++],h=t[S++],r.lineTo(u,h),y||a.updatePathMinMax(g,u,h);break;case xi.curveTo:d=u,p=h,u=t[S+4],h=t[S+5],r.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],u,h),a.updateCurvePathMinMax(g,d,p,t[S],t[S+1],t[S+2],t[S+3],u,h,w),S+=6;break;case xi.curveTo2:d=u,p=h,r.bezierCurveTo(u,h,t[S],t[S+1],t[S+2],t[S+3]),a.updateCurvePathMinMax(g,d,p,u,h,t[S],t[S+1],t[S+2],t[S+3],w),u=t[S+2],h=t[S+3],S+=4;break;case xi.curveTo3:d=u,p=h,u=t[S+2],h=t[S+3],r.bezierCurveTo(t[S],t[S+1],u,h,u,h),a.updateCurvePathMinMax(g,d,p,t[S],t[S+1],u,h,u,h,w),S+=4;break;case xi.closePath:r.closePath();break}y&&a.updateScalingPathMinMax(g,w),a.setCurrentPoint(u,h)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,qi(t),on.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,qi(t),on.FILL),a=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=dT}eoClip(){this.pendingClip=qb}beginText(){this.current.textMatrix=ES,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const i=new Path2D,r=t.getTransform().invertSelf();for(const{transform:a,x:u,y:h,fontSize:d,path:p}of e)i.addPath(p,new DOMMatrix(a).preMultiplySelf(r).translate(u,h).scale(d,-d));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var g;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||xy,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Re("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const a=i.loadedName||"sans-serif",u=((g=i.systemFontInfo)==null?void 0:g.css)||`"${a}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const d=i.italic?"italic":"normal";let p=t;t<Hb?p=Hb:t>Bb&&(p=Bb),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${h} ${p}px ${u}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,a,u){this.current.textMatrix=[e,t,i,r,a,u],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r,a){const u=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,y=p&Zt.FILL_STROKE_MASK,w=!!(p&Zt.ADD_TO_PATH_FLAG),A=h.patternFill&&!d.missingFile,S=h.patternStroke&&!d.missingFile;let C;if((d.disableFontFace||w||A||S)&&(C=d.getPathGenerator(this.commonObjs,e)),d.disableFontFace||A||S){if(u.save(),u.translate(t,i),u.scale(g,-g),y===Zt.FILL||y===Zt.FILL_STROKE)if(r){const T=u.getTransform();u.setTransform(...r),u.fill(x(this,Bi,ev).call(this,C,T,r))}else u.fill(C);if(y===Zt.STROKE||y===Zt.FILL_STROKE)if(a){const T=u.getTransform();u.setTransform(...a),u.stroke(x(this,Bi,ev).call(this,C,T,a))}else u.lineWidth/=g,u.stroke(C);u.restore()}else(y===Zt.FILL||y===Zt.FILL_STROKE)&&u.fillText(e,t,i),(y===Zt.STROKE||y===Zt.FILL_STROKE)&&u.strokeText(e,t,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:rt(u),x:t,y:i,fontSize:g,path:C})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return Fe(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const a=this.ctx,u=t.fontSizeScale,h=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,g=t.textHScale*p,y=e.length,w=i.vertical,A=w?1:-1,S=i.defaultVMetrics,C=r*t.fontMatrix[0],T=t.textRenderingMode===Zt.FILL&&!i.disableFontFace&&!t.patternFill;a.save(),a.transform(...t.textMatrix),a.translate(t.x,t.y+t.textRise),p>0?a.scale(g,-1):a.scale(g,1);let k,R;if(t.patternFill){a.save();const B=t.fillColor.getPattern(a,this,qi(a),on.FILL);k=rt(a),a.restore(),a.fillStyle=B}if(t.patternStroke){a.save();const B=t.strokeColor.getPattern(a,this,qi(a),on.STROKE);R=rt(a),a.restore(),a.strokeStyle=B}let M=t.lineWidth;const D=t.textMatrixScale;if(D===0||M===0){const B=t.textRenderingMode&Zt.FILL_STROKE_MASK;(B===Zt.STROKE||B===Zt.FILL_STROKE)&&(M=this.getSinglePixelWidth())}else M/=D;if(u!==1&&(a.scale(u,u),M/=u),a.lineWidth=M,i.isInvalidPDFjsFont){const B=[];let K=0;for(const Z of e)B.push(Z.unicode),K+=Z.width;a.fillText(B.join(""),0,0),t.x+=K*C*g,a.restore(),this.compose();return}let $=0,j;for(j=0;j<y;++j){const B=e[j];if(typeof B=="number"){$+=A*B*r/1e3;continue}let K=!1;const Z=(B.isSpace?d:0)+h,me=B.fontChar,de=B.accent;let Oe,Me,ue=B.width;if(w){const X=B.vmetric||S,J=-(B.vmetric?X[1]:ue*.5)*C,V=X[2]*C;ue=X?-X[0]:ue,Oe=J/u,Me=($+V)/u}else Oe=$/u,Me=0;if(i.remeasure&&ue>0){const X=a.measureText(me).width*1e3/r*u;if(ue<X&&this.isFontSubpixelAAEnabled){const J=ue/X;K=!0,a.save(),a.scale(J,1),Oe/=J}else ue!==X&&(Oe+=(ue-X)/2e3*r/u)}if(this.contentVisible&&(B.isInFont||i.missingFile)){if(T&&!de)a.fillText(me,Oe,Me);else if(this.paintChar(me,Oe,Me,k,R),de){const X=Oe+r*de.offset.x/u,J=Me-r*de.offset.y/u;this.paintChar(de.fontChar,X,J,k,R)}}const ve=w?ue*C-Z*p:ue*C+Z*p;$+=ve,K&&a.restore()}w?t.y-=$:t.x+=$*g,a.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,a=i.fontSize,u=i.fontDirection,h=r.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,g=i.textHScale*u,y=i.fontMatrix||xy,w=e.length,A=i.textRenderingMode===Zt.INVISIBLE;let S,C,T,k;if(!(A||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(g,u),S=0;S<w;++S){if(C=e[S],typeof C=="number"){k=h*C*a/1e3,this.ctx.translate(k,0),i.x+=k*g;continue}const R=(C.isSpace?p:0)+d,M=r.charProcOperatorList[C.operatorListId];if(!M){Re(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),t.scale(a,a),t.transform(...y),this.executeOperatorList(M),this.restore()),T=ye.applyTransform([C.width,0],y)[0]*a+R,t.translate(T,0),i.x+=T*g}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,a,u){this.ctx.rect(i,r,a-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||rt(this.ctx),a={createCanvasGraphics:u=>new h0(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Qy(e,i,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ye.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ye.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=sT(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,qi(t),on.SHADING);const r=qi(t);{const{width:a,height:u}=t.canvas,[h,d,p,g]=ye.getAxialAlignedBoundingBox([0,0,a,u],r);this.ctx.fillRect(h,d,p-h,g-d)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qe("Should not call beginInlineImage")}beginImageData(){Qe("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=rt(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(rt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||ig("TODO: Support non-isolated groups."),e.knockout&&Re("Knockout groups not supported.");const i=rt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ye.getAxialAlignedBoundingBox(e.bbox,rt(t));const a=[0,0,t.canvas.width,t.canvas.height];r=ye.intersect(r,a)||[0,0,0,0];const u=Math.floor(r[0]),h=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,d,p),w=y.context;w.translate(-u,-h),w.transform(...i),e.smask?this.smaskStack.push({canvas:y.canvas,context:w,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(u,h),t.save()),Ec(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=rt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=ye.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,i,r,a){if(x(this,Bi,Jy).call(this),Wf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const u=t[2]-t[0],h=t[3]-t[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=u,t[3]=h;const[d,p]=ye.singularValueDecompose2dScale(rt(this.ctx)),{viewportScale:g}=this,y=Math.ceil(u*this.outputScaleX*g),w=Math.ceil(h*this.outputScaleY*g);this.annotationCanvas=this.canvasFactory.create(y,w);const{canvas:A,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,h*p),Wf(this.ctx)}else Wf(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],u,h),this.ctx.clip(),this.ctx.beginPath()}this.current=new Vb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,Bi,Zy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=uT(e)),r.compiled)){r.compiled(i);return}const a=this._createMaskCanvas(e),u=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,a,u){if(!this.contentVisible)return;e=this.getObject(e.data,e);const h=this.ctx;h.save();const d=rt(h);h.transform(t,i,r,a,0,0);const p=this._createMaskCanvas(e);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let g=0,y=u.length;g<y;g+=2){const w=ye.transform(d,[t,i,r,a,u[g],u[g+1]]),[A,S]=ye.applyTransform([0,0],w);h.drawImage(p.canvas,A,S)}h.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:u,width:h,height:d,transform:p}=a,g=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=g.context;y.save();const w=this.getObject(u,a);Gb(y,w),y.globalCompositeOperation="source-in",y.fillStyle=r?i.getPattern(y,this,qi(t),on.FILL):i,y.fillRect(0,0,h,d),y.restore(),t.save(),t.transform(...p),t.scale(1,-1),Vf(t,g.canvas,0,0,h,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Re("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const a=this.getObject(e);if(!a){Re("Dependent image isn't ready yet");return}const u=a.width,h=a.height,d=[];for(let p=0,g=r.length;p<g;p+=2)d.push({transform:[t,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(a,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,a=this.cachedCanvases.getCanvas("inlineImage",i,r),u=a.context;return u.filter=this.current.transferMaps,u.drawImage(t,0,0),u.filter="none",a.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!ln){const{filter:h}=r;h!=="none"&&h!==""&&(r.filter="none")}r.scale(1/t,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,i).context;Wb(d,e),a=this.applyTransferMapsToCanvas(d)}const u=this._scaleImage(a,qi(r));r.imageSmoothingEnabled=Xb(rt(r),e.interpolate),Vf(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const a=e.width,u=e.height,d=this.cachedCanvases.getCanvas("inlineImage",a,u).context;Wb(d,e),r=this.applyTransferMapsToCanvas(d)}for(const a of t)i.save(),i.transform(...a.transform),i.scale(1,-1),Vf(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===qb?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=rt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:a}=this.ctx.getTransform();let u,h;if(i===0&&r===0){const d=Math.abs(t),p=Math.abs(a);if(d===p)if(e===0)u=h=1/d;else{const g=d*e;u=h=g<1?1/g:1}else if(e===0)u=1/d,h=1/p;else{const g=d*e,y=p*e;u=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(t*a-i*r),p=Math.hypot(t,i),g=Math.hypot(r,a);if(e===0)u=g/d,h=p/d;else{const y=e*d;u=g>y?g/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&a===1){t.stroke();return}const u=t.getLineDash();if(e&&t.save(),t.scale(r,a),u.length>0){const h=Math.max(r,a);t.setLineDash(u.map(d=>d/h)),t.lineDashOffset/=h}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Bi=new WeakSet,Jy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Zy=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ev=function(e,t,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),r};let _l=h0;for(const c in xi)_l.prototype[c]!==void 0&&(_l.prototype[xi[c]]=_l.prototype[c]);var Ch,kh;class tr{static get workerPort(){return o(this,Ch)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,Ch,e)}static get workerSrc(){return o(this,kh)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,kh,e)}}Ch=new WeakMap,kh=new WeakMap,E(tr,Ch,null),E(tr,kh,"");var Ja,Th;class fT{constructor({parsedData:e,rawData:t}){E(this,Ja);E(this,Th);b(this,Ja,e),b(this,Th,t)}getRaw(){return o(this,Th)}get(e){return o(this,Ja).get(e)??null}getAll(){return Zv(o(this,Ja))}has(e){return o(this,Ja).has(e)}}Ja=new WeakMap,Th=new WeakMap;const yl=Symbol("INTERNAL");var Ph,Rh,Lh,jl;class pT{constructor(e,{name:t,intent:i,usage:r,rbGroups:a}){E(this,Ph,!1);E(this,Rh,!1);E(this,Lh,!1);E(this,jl,!0);b(this,Ph,!!(e&Kn.DISPLAY)),b(this,Rh,!!(e&Kn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(o(this,Lh))return o(this,jl);if(!o(this,jl))return!1;const{print:e,view:t}=this.usage;return o(this,Ph)?(t==null?void 0:t.viewState)!=="OFF":o(this,Rh)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==yl&&Qe("Internal method `_setVisible` called."),b(this,Lh,i),b(this,jl,t)}}Ph=new WeakMap,Rh=new WeakMap,Lh=new WeakMap,jl=new WeakMap;var Hr,Xe,Ul,Vl,Mh,tv;class gT{constructor(e,t=Kn.DISPLAY){E(this,Mh);E(this,Hr,null);E(this,Xe,new Map);E(this,Ul,null);E(this,Vl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,Vl,e.order);for(const i of e.groups)o(this,Xe).set(i.id,new pT(t,i));if(e.baseState==="OFF")for(const i of o(this,Xe).values())i._setVisible(yl,!1);for(const i of e.on)o(this,Xe).get(i)._setVisible(yl,!0);for(const i of e.off)o(this,Xe).get(i)._setVisible(yl,!1);b(this,Ul,this.getHash())}}isVisible(e){if(o(this,Xe).size===0)return!0;if(!e)return ig("Optional content group not defined."),!0;if(e.type==="OCG")return o(this,Xe).has(e.id)?o(this,Xe).get(e.id).visible:(Re(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return x(this,Mh,tv).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!o(this,Xe).has(t))return Re(`Optional content group not found: ${t}`),!0;if(o(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!o(this,Xe).has(t))return Re(`Optional content group not found: ${t}`),!0;if(!o(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!o(this,Xe).has(t))return Re(`Optional content group not found: ${t}`),!0;if(!o(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!o(this,Xe).has(t))return Re(`Optional content group not found: ${t}`),!0;if(o(this,Xe).get(t).visible)return!1}return!0}return Re(`Unknown optional content policy ${e.policy}.`),!0}return Re(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var a;const r=o(this,Xe).get(e);if(!r){Re(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const u of r.rbGroups)for(const h of u)h!==e&&((a=o(this,Xe).get(h))==null||a._setVisible(yl,!1,!0));r._setVisible(yl,!!t,!0),b(this,Hr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=o(this,Xe).get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!a.visible,t);break}}b(this,Hr,null)}get hasInitialVisibility(){return o(this,Ul)===null||this.getHash()===o(this,Ul)}getOrder(){return o(this,Xe).size?o(this,Vl)?o(this,Vl).slice():[...o(this,Xe).keys()]:null}getGroups(){return o(this,Xe).size>0?Zv(o(this,Xe)):null}getGroup(e){return o(this,Xe).get(e)||null}getHash(){if(o(this,Hr)!==null)return o(this,Hr);const e=new t1;for(const[t,i]of o(this,Xe))e.update(`${t}:${i.visible}`);return b(this,Hr,e.hexdigest())}}Hr=new WeakMap,Xe=new WeakMap,Ul=new WeakMap,Vl=new WeakMap,Mh=new WeakSet,tv=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const a=e[r];let u;if(Array.isArray(a))u=x(this,Mh,tv).call(this,a);else if(o(this,Xe).has(a))u=o(this,Xe).get(a).visible;else return Re(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class mT{constructor(e,{disableRange:t=!1,disableStream:i=!1}){_t(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:u,contentDispositionFilename:h}=e;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=h,(a==null?void 0:a.length)>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(i),!0)});_t(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,a;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(a=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||a.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){_t(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new yT(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new vT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class yT{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=n0(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vT{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function wT(c){let e=!0,t=i("filename\\*","i").exec(c);if(t){t=t[1];let g=h(t);return g=unescape(g),g=d(g),g=p(g),a(g)}if(t=u(c),t){const g=p(t);return a(g)}if(t=i("filename","i").exec(c),t){t=t[1];let g=h(t);return g=p(g),a(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const w=new TextDecoder(g,{fatal:!0}),A=sg(y);y=w.decode(A),e=!1}catch{}}return y}function a(g){return e&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),e&&(g=r("iso-8859-1",g))),g}function u(g){const y=[];let w;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(g))!==null;){let[,C,T,k]=w;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[T,k]}const S=[];for(let C=0;C<y.length&&C in y;++C){let[T,k]=y[C];k=h(k),T&&(k=unescape(k),C===0&&(k=d(k))),S.push(k)}return S.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let w=0;w<y.length;++w){const A=y[w].indexOf('"');A!==-1&&(y[w]=y[w].slice(0,A),y.length=w+1),y[w]=y[w].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const w=g.slice(0,y),S=g.slice(y+1).replace(/^[^']*'/,"");return r(w,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,w,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),r(w,S);try{S=atob(S)}catch{}return r(w,S)})}return""}function g1(c,e){const t=new Headers;if(!c||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function og(c){try{return new URL(c).origin}catch{}return null}function m1({responseHeaders:c,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(c.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*t)||i||!e||c.get("Accept-Ranges")!=="bytes"||(c.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function y1(c){const e=c.get("Content-Disposition");if(e){let t=wT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(n0(t))return t}return null}function lg(c,e){return c===404||c===0&&e.startsWith("file:")?new Yc('Missing PDF "'+e+'".'):new Cp(`Unexpected server response (${c}) while retrieving PDF "${e}".`,c)}function v1(c){return c===200||c===206}function w1(c,e,t){return{method:"GET",headers:c,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function A1(c){return c instanceof Uint8Array?c.buffer:c instanceof ArrayBuffer?c:(Re(`getArrayBuffer - unexpected data format: ${c}`),new Uint8Array(c).buffer)}class Yb{constructor(e){Se(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=g1(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _t(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new AT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new bT(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class AT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,w1(i,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=og(a.url),!v1(a.status))throw lg(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const u=a.headers,{allowRangeRequests:h,suggestedLength:d}=m1({responseHeaders:u,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=y1(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new aa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:A1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class bT{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${i-1}`);const u=r.url;fetch(u,w1(a,this._withCredentials,this._abortController)).then(h=>{const d=og(h.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!v1(h.status))throw lg(h.status,u);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:A1(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const by=200,Sy=206;function ST(c){const e=c.response;return typeof e!="string"?e:sg(e).buffer}class _T{constructor({url:e,httpHeaders:t,withCredentials:i}){Se(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=g1(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,u]of this.headers)t.setRequestHeader(a,u);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Sy):r.expectedStatus=by,t.responseType="arraybuffer",_t(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||by;if(!(a===by&&i.expectedStatus===Sy)&&a!==i.expectedStatus){i.onError(r.status);return}const h=ST(r);if(a===Sy){const d=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?i.onDone({begin:parseInt(p[1],10),chunk:h}):(Re('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ET{constructor(e){this._source=e,this._manager=new _T(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return _t(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new CT(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class xT{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=og(t.responseURL);const i=t.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...p]=h.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:u}=m1({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=y1(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=lg(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class CT{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=og((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=lg(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kT=/^[a-z][a-z0-9\-+.]+:/i;function TT(c){if(kT.test(c))return new URL(c);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(c))}class PT{constructor(e){this.source=e,this.url=TT(e.url),_t(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return _t(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new RT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new LT(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class RT{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Yc(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new aa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class LT{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const MT=1e5,kn=30,IT=.8;var Zb,Br,Ln,Ih,Nh,Za,zs,Dh,Fh,eo,Wl,Gl,jr,Xl,Oh,ql,to,$h,zh,no,io,Hh,Ur,Yl,ar,b1,S1,nv,Zn,ap,iv,_1,E1;const Tt=class Tt{constructor({textContentSource:e,container:t,viewport:i}){E(this,ar);E(this,Br,Promise.withResolvers());E(this,Ln,null);E(this,Ih,!1);E(this,Nh,!!((Zb=globalThis.FontInspector)!=null&&Zb.enabled));E(this,Za,null);E(this,zs,null);E(this,Dh,0);E(this,Fh,0);E(this,eo,null);E(this,Wl,null);E(this,Gl,0);E(this,jr,0);E(this,Xl,Object.create(null));E(this,Oh,[]);E(this,ql,null);E(this,to,[]);E(this,$h,new WeakMap);E(this,zh,null);var d;if(e instanceof ReadableStream)b(this,ql,e);else if(typeof e=="object")b(this,ql,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Ln,b(this,Wl,t)),b(this,jr,i.scale*(globalThis.devicePixelRatio||1)),b(this,Gl,i.rotation),b(this,zs,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:u,pageY:h}=i.rawDims;b(this,zh,[1,0,0,-1,-u,h+a]),b(this,Fh,r),b(this,Dh,a),x(d=Tt,Zn,_1).call(d),Do(t,i),o(this,Br).promise.finally(()=>{o(Tt,Yl).delete(this),b(this,zs,null),b(this,Xl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=vn.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{o(this,eo).read().then(({value:t,done:i})=>{if(i){o(this,Br).resolve();return}o(this,Za)??b(this,Za,t.lang),Object.assign(o(this,Xl),t.styles),x(this,ar,b1).call(this,t.items),e()},o(this,Br).reject)};return b(this,eo,o(this,ql).getReader()),o(Tt,Yl).add(this),e(),o(this,Br).promise}update({viewport:e,onBefore:t=null}){var a;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==o(this,Gl)&&(t==null||t(),b(this,Gl,r),Do(o(this,Wl),{rotation:r})),i!==o(this,jr)){t==null||t(),b(this,jr,i);const u={div:null,properties:null,ctx:x(a=Tt,Zn,ap).call(a,o(this,Za))};for(const h of o(this,to))u.properties=o(this,$h).get(h),u.div=h,x(this,ar,nv).call(this,u)}}cancel(){var t;const e=new aa("TextLayer task cancelled.");(t=o(this,eo))==null||t.cancel(e).catch(()=>{}),b(this,eo,null),o(this,Br).reject(e)}get textDivs(){return o(this,to)}get textContentItemsStr(){return o(this,Oh)}static cleanup(){if(!(o(this,Yl).size>0)){o(this,no).clear();for(const{canvas:e}of o(this,io).values())e.remove();o(this,io).clear()}}};Br=new WeakMap,Ln=new WeakMap,Ih=new WeakMap,Nh=new WeakMap,Za=new WeakMap,zs=new WeakMap,Dh=new WeakMap,Fh=new WeakMap,eo=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,jr=new WeakMap,Xl=new WeakMap,Oh=new WeakMap,ql=new WeakMap,to=new WeakMap,$h=new WeakMap,zh=new WeakMap,no=new WeakMap,io=new WeakMap,Hh=new WeakMap,Ur=new WeakMap,Yl=new WeakMap,ar=new WeakSet,b1=function(e){var r,a;if(o(this,Ih))return;(a=o(this,zs)).ctx??(a.ctx=x(r=Tt,Zn,ap).call(r,o(this,Za)));const t=o(this,to),i=o(this,Oh);for(const u of e){if(t.length>MT){Re("Ignoring additional textDivs for performance reasons."),b(this,Ih,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const h=o(this,Ln);b(this,Ln,document.createElement("span")),o(this,Ln).classList.add("markedContent"),u.id!==null&&o(this,Ln).setAttribute("id",`${u.id}`),h.append(o(this,Ln))}else u.type==="endMarkedContent"&&b(this,Ln,o(this,Ln).parentNode);continue}i.push(u.str),x(this,ar,S1).call(this,u)}},S1=function(e){var C;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};o(this,to).push(t);const r=ye.transform(o(this,zh),e.transform);let a=Math.atan2(r[1],r[0]);const u=o(this,Xl)[e.fontName];u.vertical&&(a+=Math.PI/2);let h=o(this,Nh)&&u.fontSubstitution||u.fontFamily;h=Tt.fontFamilyMap.get(h)||h;const d=Math.hypot(r[2],r[3]),p=d*x(C=Tt,Zn,E1).call(C,h,o(this,Za));let g,y;a===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(a),y=r[5]-p*Math.cos(a));const w="calc(var(--scale-factor)*",A=t.style;o(this,Ln)===o(this,Wl)?(A.left=`${(100*g/o(this,Fh)).toFixed(2)}%`,A.top=`${(100*y/o(this,Dh)).toFixed(2)}%`):(A.left=`${w}${g.toFixed(2)}px)`,A.top=`${w}${y.toFixed(2)}px)`),A.fontSize=`${w}${(o(Tt,Ur)*d).toFixed(2)}px)`,A.fontFamily=h,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,o(this,Nh)&&(t.dataset.fontName=u.fontSubstitutionLoadedName||e.fontName),a!==0&&(i.angle=a*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const T=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);T!==k&&Math.max(T,k)/Math.min(T,k)>1.5&&(S=!0)}if(S&&(i.canvasWidth=u.vertical?e.height:e.width),o(this,$h).set(t,i),o(this,zs).div=t,o(this,zs).properties=i,x(this,ar,nv).call(this,o(this,zs)),i.hasText&&o(this,Ln).append(t),i.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),o(this,Ln).append(T)}},nv=function(e){var h;const{div:t,properties:i,ctx:r}=e,{style:a}=t;let u="";if(o(Tt,Ur)>1&&(u=`scale(${1/o(Tt,Ur)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=a,{canvasWidth:p,fontSize:g}=i;x(h=Tt,Zn,iv).call(h,r,g*o(this,jr),d);const{width:y}=r.measureText(t.textContent);y>0&&(u=`scaleX(${p*o(this,jr)/y}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(a.transform=u)},Zn=new WeakSet,ap=function(e=null){let t=o(this,io).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,io).set(e,t),o(this,Hh).set(t,{size:0,family:""})}return t},iv=function(e,t,i){const r=o(this,Hh).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},_1=function(){if(o(this,Ur)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,Ur,e.getBoundingClientRect().height),e.remove()},E1=function(e,t){const i=o(this,no).get(e);if(i)return i;const r=x(this,Zn,ap).call(this,t);r.canvas.width=r.canvas.height=kn,x(this,Zn,iv).call(this,r,kn,e);const a=r.measureText("");let u=a.fontBoundingBoxAscent,h=Math.abs(a.fontBoundingBoxDescent);if(u){const g=u/(u+h);return o(this,no).set(e,g),r.canvas.width=r.canvas.height=0,g}r.strokeStyle="red",r.clearRect(0,0,kn,kn),r.strokeText("g",0,0);let d=r.getImageData(0,0,kn,kn).data;h=0;for(let g=d.length-1-3;g>=0;g-=4)if(d[g]>0){h=Math.ceil(g/4/kn);break}r.clearRect(0,0,kn,kn),r.strokeText("A",0,kn),d=r.getImageData(0,0,kn,kn).data,u=0;for(let g=0,y=d.length;g<y;g+=4)if(d[g]>0){u=kn-Math.floor(g/4/kn);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+h):IT;return o(this,no).set(e,p),p},E(Tt,Zn),E(Tt,no,new Map),E(Tt,io,new Map),E(Tt,Hh,new WeakMap),E(Tt,Ur,null),E(Tt,Yl,new Set);let Kc=Tt;class Qc{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(a){var d;if(!a)return;let u=null;const h=a.name;if(h==="#text")u=a.value;else if(Qc.shouldBuildText(h))(d=a==null?void 0:a.attributes)!=null&&d.textContent?u=a.attributes.textContent:a.value&&(u=a.value);else return;if(u!==null&&t.push({str:u}),!!a.children)for(const p of a.children)r(p)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const NT=65536,DT=100,FT=5e3,OT=ln?Qk:qk,$T=ln?Jk:u1,zT=ln?Kk:Yk,HT=ln?Zk:f1;function BT(c={}){typeof c=="string"||c instanceof URL?c={url:c}:(c instanceof ArrayBuffer||ArrayBuffer.isView(c))&&(c={data:c});const e=new sv,{docId:t}=e,i=c.url?jT(c.url):null,r=c.data?UT(c.data):null,a=c.httpHeaders||null,u=c.withCredentials===!0,h=c.password??null,d=c.range instanceof x1?c.range:null,p=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:NT;let g=c.worker instanceof El?c.worker:null;const y=c.verbosity,w=typeof c.docBaseUrl=="string"&&!ag(c.docBaseUrl)?c.docBaseUrl:null,A=typeof c.cMapUrl=="string"?c.cMapUrl:null,S=c.cMapPacked!==!1,C=c.CMapReaderFactory||$T,T=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,k=c.StandardFontDataFactory||HT,R=c.stopAtErrors!==!0,M=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,D=c.isEvalSupported!==!1,$=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!ln,j=typeof c.isImageDecoderSupported=="boolean"?c.isImageDecoderSupported:!ln&&(vn.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,K=typeof c.disableFontFace=="boolean"?c.disableFontFace:ln,Z=c.fontExtraProperties===!0,me=c.enableXfa===!0,de=c.ownerDocument||globalThis.document,Oe=c.disableRange===!0,Me=c.disableStream===!0,ue=c.disableAutoFetch===!0,ve=c.pdfBug===!0,X=c.CanvasFactory||OT,J=c.FilterFactory||zT,V=c.enableHWA===!0,ne=d?d.length:c.length??NaN,Q=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!ln&&!K,N=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:C===u1&&k===f1&&A&&T&&Pc(A,document.baseURI)&&Pc(T,document.baseURI),U=null;Ck(y);const pe={canvasFactory:new X({ownerDocument:de,enableHWA:V}),filterFactory:new J({docId:t,ownerDocument:de}),cMapReaderFactory:N?null:new C({baseUrl:A,isCompressed:S}),standardFontDataFactory:N?null:new k({baseUrl:T})};if(!g){const Ee={verbosity:y,port:tr.workerPort};g=Ee.port?El.fromPort(Ee):new El(Ee),e._worker=g}const ke={docId:t,apiVersion:"4.10.38",data:r,password:h,disableAutoFetch:ue,rangeChunkSize:p,length:ne,docBaseUrl:w,enableXfa:me,evaluatorOptions:{maxImageSize:M,disableFontFace:K,ignoreErrors:R,isEvalSupported:D,isOffscreenCanvasSupported:$,isImageDecoderSupported:j,canvasMaxAreaInBytes:B,fontExtraProperties:Z,useSystemFonts:Q,cMapUrl:N?A:null,standardFontDataUrl:N?T:null}},Ie={disableFontFace:K,fontExtraProperties:Z,ownerDocument:de,pdfBug:ve,styleElement:U,loadingParams:{disableAutoFetch:ue,enableXfa:me}};return g.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ee=g.messageHandler.sendWithPromise("GetDocRequest",ke,r?[r.buffer]:null);let be;if(d)be=new mT(d,{disableRange:Oe,disableStream:Me});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let $e;if(ln)if(Pc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");$e=Yb}else $e=PT;else $e=Pc(i)?Yb:ET;be=new $e({url:i,length:ne,httpHeaders:a,withCredentials:u,rangeChunkSize:p,disableRange:Oe,disableStream:Me})}return Ee.then($e=>{if(e.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ke=new Ic(t,$e,g.port),un=new XT(Ke,e,be,Ie,pe);e._transport=un,Ke.send("Ready",null)})}).catch(e._capability.reject),e}function jT(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(ln&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function UT(c){if(ln&&typeof Buffer<"u"&&c instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return sg(c);if(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||typeof c=="object"&&!isNaN(c==null?void 0:c.length))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Kb(c){return typeof c=="object"&&Number.isInteger(c==null?void 0:c.num)&&c.num>=0&&Number.isInteger(c==null?void 0:c.gen)&&c.gen>=0}var jp;const Up=class Up{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${dn(Up,jp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,a}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};jp=new WeakMap,E(Up,jp,0);let sv=Up;class x1{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Qe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class VT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Vr,Hs,pi,vl,op;class WT{constructor(e,t,i,r=!1){E(this,pi);E(this,Vr,null);E(this,Hs,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Fb:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new C1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new xd({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=kr.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var D,$;(D=this._stats)==null||D.time("Overall");const w=this._transport.getRenderingIntent(i,r,g,y),{renderingIntent:A,cacheKey:S}=w;b(this,Hs,!1),x(this,pi,op).call(this),h||(h=this._transport.getOptionalContentConfig(A));let C=this._intentStates.get(S);C||(C=Object.create(null),this._intentStates.set(S,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(A&Kn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},($=this._stats)==null||$.time("Page Request"),this._pumpOperatorList(w));const k=j=>{var B;C.renderTasks.delete(R),(this._maybeCleanupAfterRender||T)&&b(this,Hs,!0),x(this,pi,vl).call(this,!T),j?(R.capability.reject(j),this._abortOperatorList({intentState:C,reason:j instanceof Error?j:new Error(j)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new av({callback:k,params:{canvasContext:e,viewport:t,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(R);const M=R.task;return Promise.all([C.displayReadyCapability.promise,h]).then(([j,B])=>{var K;if(this.destroyed){k();return}if((K=this._stats)==null||K.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:j,optionalContentConfig:B}),R.operatorListChanged()}).catch(k),M}getOperatorList({intent:e="display",annotationMode:t=kr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function a(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const u=this._transport.getRenderingIntent(e,t,i,r,!0);let h=this._intentStates.get(u.cacheKey);h||(h=Object.create(null),this._intentStates.set(u.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Qc.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function a(){u.read().then(function({value:d,done:p}){if(p){i(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),a()},r)}const u=t.getReader(),h={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),b(this,Hs,!1),x(this,pi,op).call(this),Promise.all(e)}cleanup(e=!1){b(this,Hs,!0);const t=x(this,pi,vl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Fb),t}_startRenderPage(e,t){var r,a;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&x(this,pi,vl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:u}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:r},u).getReader(),p=this._intentStates.get(t);p.streamReader=d;const g=()=>{d.read().then(({value:y,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();x(this,pi,vl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof t0){let r=DT;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new aa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Vr=new WeakMap,Hs=new WeakMap,pi=new WeakSet,vl=function(e=!1){if(x(this,pi,op).call(this),!o(this,Hs)||this.destroyed)return!1;if(e)return b(this,Vr,setTimeout(()=>{b(this,Vr,null),x(this,pi,vl).call(this,!1)},FT)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Hs,!1),!0},op=function(){o(this,Vr)&&(clearTimeout(o(this,Vr)),b(this,Vr,null))};var Bs,Vp;class GT{constructor(){E(this,Bs,new Map);E(this,Vp,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};o(this,Vp).then(()=>{for(const[r]of o(this,Bs))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Re("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(e,t);r=()=>a.removeEventListener("abort",u),a.addEventListener("abort",u)}o(this,Bs).set(t,r)}removeEventListener(e,t){const i=o(this,Bs).get(t);i==null||i(),o(this,Bs).delete(t)}terminate(){for(const[,e]of o(this,Bs))e==null||e();o(this,Bs).clear()}}Bs=new WeakMap,Vp=new WeakMap;var Wp,so,ro,Kl,lp,Ql,up;const st=class st{constructor({name:e=null,port:t=null,verbosity:i=kk()}={}){E(this,Kl);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=o(st,ro))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(o(st,ro)||b(st,ro,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ic("main","worker",e),this._messageHandler.on("ready",function(){}),x(this,Kl,lp).call(this)}_initialize(){if(o(st,so)||o(st,Ql,up)){this._setupFakeWorker();return}let{workerSrc:e}=st;try{st._isSameOrigin(window.location.href,e)||(e=st._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Ic("main","worker",t),r=()=>{a.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",h=>{if(a.abort(),this.destroyed||!h){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,x(this,Kl,lp).call(this)}),i.on("ready",h=>{if(a.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};u();return}catch{ig("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){o(st,so)||(Re("Setting up fake worker."),b(st,so,!0)),st._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new GT;this._port=t;const i=`fake${dn(st,Wp)._++}`,r=new Ic(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new Ic(i,i+"_worker",t),x(this,Kl,lp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,i;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=o(st,ro))==null||t.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=o(this,ro))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new st(e)}static get workerSrc(){if(tr.workerSrc)return tr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>o(this,Ql,up)?o(this,Ql,up):(await import(this.workerSrc)).WorkerMessageHandler)())}};Wp=new WeakMap,so=new WeakMap,ro=new WeakMap,Kl=new WeakSet,lp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ql=new WeakSet,up=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(st,Ql),E(st,Wp,0),E(st,so,!1),E(st,ro),ln&&(b(st,so,!0),tr.workerSrc||(tr.workerSrc="./pdf.worker.mjs")),st._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},st._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let El=st;var js,as,Jl,Zl,Us,ao,$c;class XT{constructor(e,t,i,r,a){E(this,ao);E(this,js,new Map);E(this,as,new Map);E(this,Jl,new Map);E(this,Zl,new Map);E(this,Us,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new C1,this.fontLoader=new Gk({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Fe(this,"annotationStorage",new r0)}getRenderingIntent(e,t=kr.ENABLE,i=null,r=!1,a=!1){let u=Kn.DISPLAY,h=Xy;switch(e){case"any":u=Kn.ANY;break;case"display":break;case"print":u=Kn.PRINT;break;default:Re(`getRenderingIntent - invalid intent: ${e}`)}const d=u&Kn.PRINT&&i instanceof i1?i:this.annotationStorage;switch(t){case kr.DISABLE:u+=Kn.ANNOTATIONS_DISABLE;break;case kr.ENABLE:break;case kr.ENABLE_FORMS:u+=Kn.ANNOTATIONS_FORMS;break;case kr.ENABLE_STORAGE:u+=Kn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Re(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(u+=Kn.IS_EDITING),a&&(u+=Kn.OPLIST);const{ids:p,hash:g}=d.modifiedIds,y=[u,h.hash,g];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=o(this,Us))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of o(this,as).values())e.push(r._destroy());o(this,as).clear(),o(this,Jl).clear(),o(this,Zl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,a;this.commonObjs.clear(),this.fontLoader.clear(),o(this,js).clear(),this.filterFactory.destroy(),Kc.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new aa("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{_t(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:u}){if(u){r.close();return}_t(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("ReaderHeadersReady",async i=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:u}=this._fullReader;return(!r||!a)&&(this._lastProgress&&((h=t.onProgress)==null||h.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:u}}),e.on("GetRangeReader",(i,r)=>{_t(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:u,done:h}){if(h){r.close();return}_t(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{a.cancel(u),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new VT(i,this))}),e.on("DocException",i=>{t._capability.reject(Tn(i))}),e.on("PasswordRequest",i=>{b(this,Us,Promise.withResolvers());try{if(!t.onPassword)throw Tn(i);const r=a=>{a instanceof Error?o(this,Us).reject(a):o(this,Us).resolve({password:a})};t.onPassword(r,i.code)}catch(r){o(this,Us).reject(r)}return o(this,Us).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;o(this,as).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,a])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:h,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in a){const A=a.error;Re(`Error during font loading: ${A}`),this.commonObjs.resolve(i,A);break}const g=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(A,S)=>globalThis.FontInspector.fontAdded(A,S):null,y=new Xk(a,{disableFontFace:h,fontExtraProperties:d,inspectFont:g});this.fontLoader.bind(y).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d&&y.data&&(y.data=null),this.commonObjs.resolve(i,y)});break;case"CopyLocalImage":const{imageRef:w}=a;_t(w,"The imageRef must be defined.");for(const A of o(this,as).values())for(const[,S]of A.objs)if((S==null?void 0:S.ref)===w)return S.dataLen?(this.commonObjs.resolve(i,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,a,u])=>{var d;if(this.destroyed)return;const h=o(this,as).get(r);if(!h.objs.has(i)){if(h._intentStates.size===0){(d=u==null?void 0:u.bitmap)==null||d.close();return}switch(a){case"Image":h.objs.resolve(i,u),(u==null?void 0:u.dataLen)>Sk&&(h._maybeCleanupAfterRender=!0);break;case"Pattern":h.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Re("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=o(this,Jl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&o(this,Zl).set(a.refStr,e);const u=new WT(t,a,this,this._params.pdfBug);return o(this,as).set(t,u),u});return o(this,Jl).set(t,r),r}getPageIndex(e){return Kb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return x(this,ao,$c).call(this,"GetFieldObjects")}hasJSActions(){return x(this,ao,$c).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,ao,$c).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return x(this,ao,$c).call(this,"GetOptionalContentConfig").then(t=>new gT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=o(this,js).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var a,u;return{info:r[0],metadata:r[1]?new fT(r[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return o(this,js).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of o(this,as).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),o(this,js).clear(),this.filterFactory.destroy(!0),Kc.cleanup()}}cachedPageNumber(e){if(!Kb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return o(this,Zl).get(t)??null}}js=new WeakMap,as=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,Us=new WeakMap,ao=new WeakSet,$c=function(e,t=null){const i=o(this,js).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return o(this,js).set(e,r),r};const xc=Symbol("INITIAL_DATA");var Bn,Bh,rv;class C1{constructor(){E(this,Bh);E(this,Bn,Object.create(null))}get(e,t=null){if(t){const r=x(this,Bh,rv).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=o(this,Bn)[e];if(!i||i.data===xc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=o(this,Bn)[e];return!!t&&t.data!==xc}delete(e){const t=o(this,Bn)[e];return!t||t.data===xc?!1:(delete o(this,Bn)[e],!0)}resolve(e,t=null){const i=x(this,Bh,rv).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in o(this,Bn)){const{data:i}=o(this,Bn)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}b(this,Bn,Object.create(null))}*[Symbol.iterator](){for(const e in o(this,Bn)){const{data:t}=o(this,Bn)[e];t!==xc&&(yield[e,t])}}}Bn=new WeakMap,Bh=new WeakSet,rv=function(e){var t;return(t=o(this,Bn))[e]||(t[e]={...Promise.withResolvers(),data:xc})};var Wr;class qT{constructor(e){E(this,Wr,null);b(this,Wr,e),this.onContinue=null}get promise(){return o(this,Wr).capability.promise}cancel(e=0){o(this,Wr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=o(this,Wr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=o(this,Wr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Wr=new WeakMap;var Gr,oo;const Ta=class Ta{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:u,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:w=null}){E(this,Gr,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new qT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var h,d;if(this.cancelled)return;if(this._canvas){if(o(Ta,oo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Ta,oo).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)!=null&&h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:a,background:u}=this.params;this.gfx=new _l(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:e,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),o(this,Gr)&&(window.cancelAnimationFrame(o(this,Gr)),b(this,Gr,null)),o(Ta,oo).delete(this._canvas),this.callback(e||new t0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,Gr,window.requestAnimationFrame(()=>{b(this,Gr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Ta,oo).delete(this._canvas),this.callback())))}};Gr=new WeakMap,oo=new WeakMap,E(Ta,oo,new WeakSet);let av=Ta;const YT="4.10.38",KT="f9bea397f";function Qb(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function Cc(c){return Math.max(0,Math.min(255,255*c))}class Jb{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Cc(e),[e,e,e]}static G_HTML([e]){const t=Qb(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Cc)}static RGB_HTML(e){return`#${e.map(Qb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Cc(1-Math.min(1,e+r)),Cc(1-Math.min(1,i+r)),Cc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,a=1-t,u=1-i,h=Math.min(r,a,u);return["CMYK",r,a,u,h]}}class QT{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Qe("Abstract method `_createSVG` called.")}}class o0 extends QT{_createSVG(e){return document.createElementNS(xs,e)}}class k1{static setupStorage(e,t,i,r,a){const u=r.getValue(t,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(e.textContent=u.value),a==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?e.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",h=>{r.setValue(t,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&e.setAttribute("value",u.value),a==="print")break;e.addEventListener("input",h=>{r.setValue(t,{value:h.target.value})})}break;case"select":if(u.value!==null){e.setAttribute("value",u.value);for(const h of i.children)h.attributes.value===u.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}e.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:a}){const{attributes:u}=t,h=e instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[d,p]of Object.entries(u))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}h&&a.addLinkAttributes(e,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(e,u.dataId,t,i)}static render(e){var y,w;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,a=e.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:a,linkService:i});const h=a!=="richText",d=e.div;if(d.append(u),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=A}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);u.append(A),h&&Qc.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const g=[[r,-1,u]];for(;g.length>0;){const[A,S,C]=g.at(-1);if(S+1===A.children.length){g.pop();continue}const T=A.children[++g.at(-1)[1]];if(T===null)continue;const{name:k}=T;if(k==="#text"){const M=document.createTextNode(T.value);p.push(M),C.append(M);continue}const R=(y=T==null?void 0:T.attributes)!=null&&y.xmlns?document.createElementNS(T.attributes.xmlns,k):document.createElement(k);if(C.append(R),T.attributes&&this.setAttributes({html:R,element:T,storage:t,intent:a,linkService:i}),((w=T.children)==null?void 0:w.length)>0)g.push([T,-1,R]);else if(T.value){const M=document.createTextNode(T.value);h&&Qc.shouldBuildText(k)&&p.push(M),R.append(M)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const kd=1e3,JT=9,Oo=new WeakSet;function sa(c){return{width:c[2]-c[0],height:c[3]-c[1]}}class ZT{static create(e){switch(e.data.annotationType){case kt.LINK:return new T1(e);case kt.TEXT:return new eP(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new tP(e);case"Btn":return e.data.radioButton?new L1(e):e.data.checkBox?new iP(e):new sP(e);case"Ch":return new rP(e);case"Sig":return new nP(e)}return new zo(e);case kt.POPUP:return new lv(e);case kt.FREETEXT:return new F1(e);case kt.LINE:return new oP(e);case kt.SQUARE:return new lP(e);case kt.CIRCLE:return new uP(e);case kt.POLYLINE:return new O1(e);case kt.CARET:return new hP(e);case kt.INK:return new l0(e);case kt.POLYGON:return new cP(e);case kt.HIGHLIGHT:return new $1(e);case kt.UNDERLINE:return new dP(e);case kt.SQUIGGLY:return new fP(e);case kt.STRIKEOUT:return new pP(e);case kt.STAMP:return new z1(e);case kt.FILEATTACHMENT:return new gP(e);default:return new wt(e)}}}var lo,eu,tu,jh,ov;const d0=class d0{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){E(this,jh);E(this,lo,null);E(this,eu,!1);E(this,tu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return d0._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;o(this,lo)||b(this,lo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&x(this,jh,ov).call(this,t),(i=o(this,tu))==null||i.popup.updateEdited(e)}resetEdited(){var e;o(this,lo)&&(x(this,jh,ov).call(this,o(this,lo).rect),(e=o(this,tu))==null||e.popup.resetEdited(),b(this,lo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof zo||(a.tabIndex=kd);const{style:u}=a;if(u.zIndex=this.parent.zIndex++,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof lv){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:h,height:d}=sa(t.rect);if(!e&&t.borderStyle.width>0){u.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,T=t.borderStyle.verticalCornerRadius;if(C>0||T>0){const R=`calc(${C}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;u.borderRadius=R}else if(this instanceof L1){const R=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;u.borderRadius=R}switch(t.borderStyle.style){case _c.SOLID:u.borderStyle="solid";break;case _c.DASHED:u.borderStyle="dashed";break;case _c.BEVELED:Re("Unimplemented border style: beveled");break;case _c.INSET:Re("Unimplemented border style: inset");break;case _c.UNDERLINE:u.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(b(this,eu,!0),u.borderColor=ye.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):u.borderWidth=0}const p=ye.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:w,pageY:A}=r.rawDims;u.left=`${100*(p[0]-w)/g}%`,u.top=`${100*(p[1]-A)/y}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(u.width=`${100*h/g}%`,u.height=`${100*d/y}%`):this.setRotation(S,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:u}=sa(this.data.rect);let h,d;e%180===0?(h=100*a/i,d=100*u/r):(h=100*u/i,d=100*a/r),t.style.width=`${h}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const a=r.detail[t],u=a[0],h=a.slice(1);r.target.style[i]=Jb[`${u}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:Jb[`${u}_rgb`](h)})};return Fe(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const a=e[r]||i[r];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,a]of Object.entries(t)){const u=i[r];if(u){const h={detail:{[r]:a},target:e};u(h),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,T,k,R]=e.subarray(2,6);if(r===C&&a===T&&t===k&&i===R)return}const{style:u}=this.container;let h;if(o(this,eu)){const{borderColor:C,borderWidth:T}=u;u.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-t,p=a-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const w=g.createElement("defs");y.append(w);const A=g.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let C=2,T=e.length;C<T;C+=8){const k=e[C],R=e[C+1],M=e[C+2],D=e[C+3],$=g.createElement("rect"),j=(M-t)/d,B=(a-R)/p,K=(k-M)/d,Z=(R-D)/p;$.setAttribute("x",j),$.setAttribute("y",B),$.setAttribute("width",K),$.setAttribute("height",Z),A.append($),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${B}" width="${K}" height="${Z}"/>`)}o(this,eu)&&(h.push("</g></svg>')"),u.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=b(this,tu,new lv({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Qe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:a,id:u,exportValues:h}of r){if(a===-1||u===t)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Oo.has(p)){Re(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:d,domElement:p})}return i}for(const r of document.getElementsByName(e)){const{exportValue:a}=r,u=r.getAttribute("data-element-id");u!==t&&Oo.has(r)&&i.push({id:u,exportValue:a,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};lo=new WeakMap,eu=new WeakMap,tu=new WeakMap,jh=new WeakSet,ov=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:u,pageX:h,pageY:d}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:g}=sa(e);t.left=`${100*(e[0]-h)/a}%`,t.top=`${100*(u-e[3]+d)/u}%`,r===0?(t.width=`${100*p/a}%`,t.height=`${100*g/u}%`):this.setRotation(r)};let wt=d0;var Qn,Ea,P1,R1;class T1 extends wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,Qn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let a=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(r,t.action),a=!0):t.attachment?(x(this,Qn,P1).call(this,r,t.attachment,t.attachmentDest),a=!0):t.setOCGState?(x(this,Qn,R1).call(this,r,t.setOCGState),a=!0):t.dest?(this._bindLink(r,t.dest),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),a=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(r,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&x(this,Qn,Ea).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),x(this,Qn,Ea).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const u=r.get(a);u&&(t[u]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}t.onclick||(t.onclick=()=>!1),x(this,Qn,Ea).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),x(this,Qn,Ea).call(this),!this._fieldObjects){Re('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var y;r==null||r();const{fields:a,refs:u,include:h}=i,d=[];if(a.length!==0||u.length!==0){const w=new Set(u);for(const A of a){const S=this._fieldObjects[A]||[];for(const{id:C}of S)w.add(C)}for(const A of Object.values(this._fieldObjects))for(const S of A)w.has(S.id)===h&&d.push(S)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const p=this.annotationStorage,g=[];for(const w of d){const{id:A}=w;switch(g.push(A),w.type){case"text":{const C=w.defaultValue||"";p.setValue(A,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(A,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(A,{value:C});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!Oo.has(S)){Re(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Qn=new WeakSet,Ea=function(){this.container.setAttribute("data-internal-link","")},P1=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,r),!1},x(this,Qn,Ea).call(this)},R1=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),x(this,Qn,Ea).call(this)};class eP extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class zo extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return vn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,a){i.includes("mouse")?e.addEventListener(i,u=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):e.addEventListener(i,u=>{var h;if(i==="blur"){if(!t.focused||!u.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}a&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u)}}))})}_setEventListeners(e,t,i,r){var a,u,h;for(const[d,p]of i)(p==="Action"||(a=this.data.actions)!=null&&a[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ye.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||JT,a=e.style;let u;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(p/(my*r))||1,y=p/g;u=Math.min(r,d(y/my))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);u=Math.min(r,d(p/my))}a.fontSize=`calc(${u}px * var(--scale-factor))`,a.color=ye.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class tP extends zo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const a=this.annotationStorage;for(const u of this._getElementsByName(e.name,e.id))u.domElement&&(u.domElement[t]=i),a.setValue(u.id,{[r]:i})}render(){var r,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=e.getValue(t,{value:this.data.fieldValue});let h=u.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:h,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??h,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??h),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Oo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=kd,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",w=>{const A=this.data.defaultFieldValue??"";i.value=g.userValue=A,g.formattedValue=null});let y=w=>{const{formattedValue:A}=g;A!=null&&(w.target.value=A),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",A=>{var C;if(g.focused)return;const{target:S}=A;g.userValue&&(S.value=g.userValue),g.lastCommittedValue=S.value,g.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const S={value(C){g.userValue=C.detail.value??"",e.setValue(t,{value:g.userValue.toString()}),C.target.value=g.userValue},formattedValue(C){const{formattedValue:T}=C.detail;g.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T),e.setValue(t,{formattedValue:T})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var M;const{charLimit:T}=C.detail,{target:k}=C;if(T===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",T);let R=g.userValue;!R||R.length<=T||(R=R.slice(0,T),k.value=g.userValue=R,e.setValue(t,{value:R}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(S,A)}),i.addEventListener("keydown",A=>{var T;g.commitKey=1;let S=-1;if(A.key==="Escape"?S=0:A.key==="Enter"&&!this.data.multiLine?S=2:A.key==="Tab"&&(g.commitKey=3),S===-1)return;const{value:C}=A.target;g.lastCommittedValue!==C&&(g.lastCommittedValue=C,g.userValue=C,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:S,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",A=>{var C,T;if(!g.focused||!A.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(g.focused=!1);const{value:S}=A.target;g.userValue=S,g.lastCommittedValue!==S&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:g.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),w(A)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",A=>{var $;g.lastCommittedValue=null;const{data:S,target:C}=A,{value:T,selectionStart:k,selectionEnd:R}=C;let M=k,D=R;switch(A.inputType){case"deleteWordBackward":{const j=T.substring(0,k).match(/\w*[^\w]*$/);j&&(M-=j[0].length);break}case"deleteWordForward":{const j=T.substring(k).match(/^[^\w]*\w*/);j&&(D+=j[0].length);break}case"deleteContentBackward":k===R&&(M-=1);break;case"deleteContentForward":k===R&&(D+=1);break}A.preventDefault(),($=this.linkService.eventBus)==null||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,change:S||"",willCommit:!1,selStart:M,selEnd:D}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class nP extends zo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class iP extends zo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Oo.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=kd,a.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const p of this._getElementsByName(h,i)){const g=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=g),e.setValue(p.id,{value:g})}e.setValue(i,{value:d})}),a.addEventListener("resetform",u=>{const h=t.defaultFieldValue||"Off";u.target.checked=h===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",u=>{const h={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class L1 extends zo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const u of this._getElementsByName(t.fieldName,i))e.setValue(u.id,{value:!1});const a=document.createElement("input");if(Oo.add(a),a.setAttribute("data-element-id",i),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=kd,a.addEventListener("change",u=>{const{name:h,checked:d}=u.target;for(const p of this._getElementsByName(h,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:d})}),a.addEventListener("resetform",u=>{const h=t.defaultFieldValue;u.target.checked=h!=null&&h===t.buttonValue}),this.enableScripting&&this.hasJSActions){const u=t.buttonValue;a.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const g=u===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const w=g&&y.id===i;y.domElement&&(y.domElement.checked=w),e.setValue(y.id,{value:w})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class sP extends T1{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class rP extends zo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Oo.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=kd;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),a=!1),r.append(y)}let u=null;if(a){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),u=()=>{g.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const h=g=>{const y=g?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,S=>S.selected).map(S=>S[y]):w.selectedIndex===-1?null:w[w.selectedIndex][y]};let d=h(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(w){u==null||u();const A=w.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const C of r.options)C.selected=S.has(C.value);e.setValue(t,{value:h(!0)}),d=h(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,S=w.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),e.setValue(t,{value:h(!0),items:p(w)}),d=h(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=h(!1)},insert(w){const{index:A,displayValue:S,exportValue:C}=w.detail.insert,T=r.children[A],k=document.createElement("option");k.textContent=S,k.value=C,T?T.before(k):r.append(k),e.setValue(t,{value:h(!0),items:p(w)}),d=h(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:C,exportValue:T}=S,k=document.createElement("option");k.textContent=C,k.value=T,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:h(!0),items:p(w)}),d=h(!1)},indices(w){const A=new Set(w.detail.indices);for(const S of w.target.options)S.selected=A.has(S.index);e.setValue(t,{value:h(!0)}),d=h(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var A;const y=h(!0),w=h(!1);e.setValue(t,{value:y}),g.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){e.setValue(t,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class lv extends wt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new aP({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${e0}${i}`).join(",")),this.container}}var nu,Gp,Xp,iu,uo,pt,Vs,su,Uh,Vh,ru,Ws,Ri,Gs,Wh,Xs,Gh,co,ho,Ye,cp,uv,M1,I1,N1,D1,hp,dp,cv;class aP{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:a,contentsObj:u,richText:h,parent:d,rect:p,parentRect:g,open:y}){E(this,Ye);E(this,nu,x(this,Ye,N1).bind(this));E(this,Gp,x(this,Ye,cv).bind(this));E(this,Xp,x(this,Ye,dp).bind(this));E(this,iu,x(this,Ye,hp).bind(this));E(this,uo,null);E(this,pt,null);E(this,Vs,null);E(this,su,null);E(this,Uh,null);E(this,Vh,null);E(this,ru,null);E(this,Ws,!1);E(this,Ri,null);E(this,Gs,null);E(this,Wh,null);E(this,Xs,null);E(this,Gh,null);E(this,co,null);E(this,ho,!1);var w;b(this,pt,e),b(this,Gh,r),b(this,Vs,u),b(this,Xs,h),b(this,Vh,d),b(this,uo,t),b(this,Wh,p),b(this,ru,g),b(this,Uh,i),b(this,su,i0.toDateObject(a)),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",o(this,iu)),A.addEventListener("mouseenter",o(this,Xp)),A.addEventListener("mouseleave",o(this,Gp)),A.classList.add("popupTriggerArea");for(const A of i)(w=A.container)==null||w.addEventListener("keydown",o(this,nu));o(this,pt).hidden=!0,y&&x(this,Ye,hp).call(this)}render(){if(o(this,Ri))return;const e=b(this,Ri,document.createElement("div"));if(e.className="popup",o(this,uo)){const a=e.style.outlineColor=ye.makeHexColor(...o(this,uo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:e.style.backgroundColor=ye.makeHexColor(...o(this,uo).map(h=>Math.floor(.7*(255-h)+h)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=o(this,Gh),e.append(t),o(this,su)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,su).valueOf()})),t.append(a)}const r=o(this,Ye,cp);if(r)k1.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(o(this,Vs));e.append(a)}o(this,pt).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let a=0,u=r.length;a<u;++a){const h=r[a];i.append(document.createTextNode(h)),a<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;o(this,co)||b(this,co,{contentsObj:o(this,Vs),richText:o(this,Xs)}),e&&b(this,Gs,null),t&&(b(this,Xs,x(this,Ye,I1).call(this,t)),b(this,Vs,null)),(i=o(this,Ri))==null||i.remove(),b(this,Ri,null)}resetEdited(){var e;o(this,co)&&({contentsObj:dn(this,Vs)._,richText:dn(this,Xs)._}=o(this,co),b(this,co,null),(e=o(this,Ri))==null||e.remove(),b(this,Ri,null),b(this,Gs,null))}forceHide(){b(this,ho,this.isVisible),o(this,ho)&&(o(this,pt).hidden=!0)}maybeShow(){o(this,ho)&&(o(this,Ri)||x(this,Ye,dp).call(this),b(this,ho,!1),o(this,pt).hidden=!1)}get isVisible(){return o(this,pt).hidden===!1}}nu=new WeakMap,Gp=new WeakMap,Xp=new WeakMap,iu=new WeakMap,uo=new WeakMap,pt=new WeakMap,Vs=new WeakMap,su=new WeakMap,Uh=new WeakMap,Vh=new WeakMap,ru=new WeakMap,Ws=new WeakMap,Ri=new WeakMap,Gs=new WeakMap,Wh=new WeakMap,Xs=new WeakMap,Gh=new WeakMap,co=new WeakMap,ho=new WeakMap,Ye=new WeakSet,cp=function(){const e=o(this,Xs),t=o(this,Vs);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&o(this,Xs).html||null},uv=function(){var e,t,i;return((i=(t=(e=o(this,Ye,cp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},M1=function(){var e,t,i;return((i=(t=(e=o(this,Ye,cp))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},I1=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:o(this,Ye,M1),fontSize:o(this,Ye,uv)?`calc(${o(this,Ye,uv)}px * var(--scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:r});return i},N1=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&o(this,Ws))&&x(this,Ye,hp).call(this)},D1=function(){if(o(this,Gs)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:a}}}=o(this,Vh);let u=!!o(this,ru),h=u?o(this,ru):o(this,Wh);for(const S of o(this,Uh))if(!h||ye.intersect(S.data.rect,h)!==null){h=S.data.rect,u=!0;break}const d=ye.normalizeRect([h[0],e[3]-h[1]+e[1],h[2],e[3]-h[3]+e[1]]),g=u?h[2]-h[0]+5:0,y=d[0]+g,w=d[1];b(this,Gs,[100*(y-r)/t,100*(w-a)/i]);const{style:A}=o(this,pt);A.left=`${o(this,Gs)[0]}%`,A.top=`${o(this,Gs)[1]}%`},hp=function(){b(this,Ws,!o(this,Ws)),o(this,Ws)?(x(this,Ye,dp).call(this),o(this,pt).addEventListener("click",o(this,iu)),o(this,pt).addEventListener("keydown",o(this,nu))):(x(this,Ye,cv).call(this),o(this,pt).removeEventListener("click",o(this,iu)),o(this,pt).removeEventListener("keydown",o(this,nu)))},dp=function(){o(this,Ri)||this.render(),this.isVisible?o(this,Ws)&&o(this,pt).classList.add("focused"):(x(this,Ye,D1).call(this),o(this,pt).hidden=!1,o(this,pt).style.zIndex=parseInt(o(this,pt).style.zIndex)+1e3)},cv=function(){o(this,pt).classList.remove("focused"),!(o(this,Ws)||!this.isVisible)&&(o(this,pt).hidden=!0,o(this,pt).style.zIndex=parseInt(o(this,pt).style.zIndex)-1e3)};class F1 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xh;class oP extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Xh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=sa(t.rect),a=this.svgFactory.create(i,r,!0),u=b(this,Xh,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),u.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),u.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),u.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),u.setAttribute("stroke-width",t.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Xh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xh=new WeakMap;var qh;class lP extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,qh,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=sa(t.rect),a=this.svgFactory.create(i,r,!0),u=t.borderStyle.width,h=b(this,qh,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",u/2),h.setAttribute("y",u/2),h.setAttribute("width",i-u),h.setAttribute("height",r-u),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),a.append(h),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,qh)}addHighlightArea(){this.container.classList.add("highlightArea")}}qh=new WeakMap;var Yh;class uP extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Yh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=sa(t.rect),a=this.svgFactory.create(i,r,!0),u=t.borderStyle.width,h=b(this,Yh,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",i/2),h.setAttribute("cy",r/2),h.setAttribute("rx",i/2-u/2),h.setAttribute("ry",r/2-u/2),h.setAttribute("stroke-width",u||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),a.append(h),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Yh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yh=new WeakMap;var Kh;class O1 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Kh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:a}}=this;if(!i)return this.container;const{width:u,height:h}=sa(t),d=this.svgFactory.create(u,h,!0);let p=[];for(let y=0,w=i.length;y<w;y+=2){const A=i[y]-t[0],S=t[3]-i[y+1];p.push(`${A},${S}`)}p=p.join(" ");const g=b(this,Kh,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),d.append(g),this.container.append(d),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Kh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kh=new WeakMap;class cP extends O1{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hP extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Qh,fo,Jh,hv;class l0 extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Jh);E(this,Qh,null);E(this,fo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pe.HIGHLIGHT:Pe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:r,borderStyle:a,popupRef:u}}=this,{transform:h,width:d,height:p}=x(this,Jh,hv).call(this,i,t),g=this.svgFactory.create(d,p,!0),y=b(this,Qh,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",h);for(let w=0,A=r.length;w<A;w++){const S=this.svgFactory.createElement(this.svgElementName);o(this,fo).push(S),S.setAttribute("points",r[w].join(",")),y.append(S)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:r,rect:a}=t,u=o(this,Qh);if(i>=0&&u.setAttribute("stroke-width",i||1),r)for(let h=0,d=o(this,fo).length;h<d;h++)o(this,fo)[h].setAttribute("points",r[h].join(","));if(a){const{transform:h,width:d,height:p}=x(this,Jh,hv).call(this,this.data.rotation,a);u.parentElement.setAttribute("viewBox",`0 0 ${d} ${p}`),u.setAttribute("transform",h)}}getElementsToTriggerPopup(){return o(this,fo)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qh=new WeakMap,fo=new WeakMap,Jh=new WeakSet,hv=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class $1 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pe.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class dP extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fP extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pP extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class z1 extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Zh,ed,dv;class gP extends wt{constructor(t){var r;super(t,{isRenderable:!0});E(this,ed);E(this,Zh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",x(this,ed,dv).bind(this)),b(this,Zh,r);const{isMac:a}=vn.platform;return t.addEventListener("keydown",u=>{u.key==="Enter"&&(a?u.metaKey:u.ctrlKey)&&x(this,ed,dv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return o(this,Zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zh=new WeakMap,ed=new WeakSet,dv=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var td,po,go,nd,$o,H1,fv;class mP{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:u,structTreeLayer:h}){E(this,$o);E(this,td,null);E(this,po,null);E(this,go,new Map);E(this,nd,null);this.div=e,b(this,td,t),b(this,po,i),b(this,nd,h||null),this.page=a,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return o(this,go).size>0}async render(e){var u;const{annotations:t}=e,i=this.div;Do(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new o0,annotationStorage:e.annotationStorage||new r0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const h of t){if(h.noHTML)continue;const d=h.annotationType===kt.POPUP;if(d){const y=r.get(h.id);if(!y)continue;a.elements=y}else{const{width:y,height:w}=sa(h.rect);if(y<=0||w<=0)continue}a.data=h;const p=ZT.create(a);if(!p.isRenderable)continue;if(!d&&h.popupRef){const y=r.get(h.popupRef);y?y.push(p):r.set(h.popupRef,[p])}const g=p.render();h.hidden&&(g.style.visibility="hidden"),await x(this,$o,H1).call(this,g,h.id),p._isEditable&&(o(this,go).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}x(this,$o,fv).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Do(t,{rotation:e.rotation}),x(this,$o,fv).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(o(this,go).values())}getEditableAnnotation(e){return o(this,go).get(e)}}td=new WeakMap,po=new WeakMap,go=new WeakMap,nd=new WeakMap,$o=new WeakSet,H1=async function(e,t){var u,h;const i=e.firstChild||e,r=i.id=`${e0}${t}`,a=await((u=o(this,nd))==null?void 0:u.getAriaAttributes(r));if(a)for(const[d,p]of a)i.setAttribute(d,p);this.div.append(e),(h=o(this,td))==null||h.moveElementInDOM(this.div,e,i,!1)},fv=function(){if(!o(this,po))return;const e=this.div;for(const[t,i]of o(this,po)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}o(this,po).clear()};const Gf=/\r\n?|\n/g;var Li,jn,id,mo,Un,Et,B1,j1,U1,fp,sr,pp,gp,V1,gv,W1;const Ze=class Ze extends dt{constructor(t){super({...t,name:"freeTextEditor"});E(this,Et);E(this,Li);E(this,jn,"");E(this,id,`${this.id}-editor`);E(this,mo,null);E(this,Un);b(this,Li,t.color||Ze._defaultColor||dt._defaultLineColor),b(this,Un,t.fontSize||Ze._defaultFontSize)}static get _keyboardManager(){const t=Ze.prototype,i=u=>u.isEmpty(),r=Fo.TRANSLATE_SMALL,a=Fo.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Cd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(t,i){dt.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case ze.FREETEXT_SIZE:Ze._defaultFontSize=i;break;case ze.FREETEXT_COLOR:Ze._defaultColor=i;break}}updateParams(t,i){switch(t){case ze.FREETEXT_SIZE:x(this,Et,B1).call(this,i);break;case ze.FREETEXT_COLOR:x(this,Et,j1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ze.FREETEXT_SIZE,Ze._defaultFontSize],[ze.FREETEXT_COLOR,Ze._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[ze.FREETEXT_SIZE,o(this,Un)],[ze.FREETEXT_COLOR,o(this,Li)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ze._internalPadding*t,-(Ze._internalPadding+o(this,Un))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pe.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,mo,new AbortController);const t=this._uiManager.combinedSignal(o(this,mo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,id)),this._isDraggable=!0,(t=o(this,mo))==null||t.abort(),b(this,mo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=o(this,jn),i=b(this,jn,x(this,Et,U1).call(this).trimEnd());if(t===i)return;const r=a=>{if(b(this,jn,a),!a){this.remove();return}x(this,Et,gp).call(this),this._uiManager.rebuild(this),x(this,Et,fp).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),x(this,Et,fp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ze._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,id)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${o(this,Un)}px * var(--scale-factor))`,r.color=o(this,Li),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),kp(this,this.div,["dblclick","keydown"]),this.width){const[a,u]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[g,y]=this.pageDimensions,[w,A]=this.pageTranslation;let S,C;switch(this.rotation){case 0:S=t+(h[0]-w)/g,C=i+this.height-(h[1]-A)/y;break;case 90:S=t+(h[0]-w)/g,C=i-(h[1]-A)/y,[d,p]=[p,-d];break;case 180:S=t-this.width+(h[0]-w)/g,C=i-(h[1]-A)/y,[d,p]=[-d,-p];break;case 270:S=t+(h[0]-w-this.height*y)/g,C=i+(h[1]-A-this.width*g)/y,[d,p]=[-p,d];break}this.setAt(S*a,C*u,d,p)}else this.setAt(t*a,i*u,this.width*a,this.height*u);x(this,Et,gp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,C,T;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const a=x(S=Ze,sr,gv).call(S,i.getData("text")||"").replaceAll(Gf,`
`);if(!a)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const h=u.getRangeAt(0);if(!a.includes(`
`)){h.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:d,startOffset:p}=h,g=[],y=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(y.push(d.nodeValue.slice(p).replaceAll(Gf,"")),k!==this.editorDiv){let R=g;for(const M of this.editorDiv.childNodes){if(M===k){R=y;continue}R.push(x(C=Ze,sr,pp).call(C,M))}}g.push(d.nodeValue.slice(0,p).replaceAll(Gf,""))}else if(d===this.editorDiv){let k=g,R=0;for(const M of this.editorDiv.childNodes)R++===p&&(k=y),k.push(x(T=Ze,sr,pp).call(T,M))}b(this,jn,`${g.join(`
`)}${a}${y.join(`
`)}`),x(this,Et,gp).call(this);const w=new Range;let A=g.reduce((k,R)=>k+R.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const R=k.nodeValue.length;if(A<=R){w.setStart(k,A),w.setEnd(k,A);break}A-=R}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var h;let a=null;if(t instanceof F1){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:g,rotation:y,id:w,popupRef:A},textContent:S,textPosition:C,parent:{page:{pageNumber:T}}}=t;if(!S||S.length===0)return null;a=t={annotationType:Pe.FREETEXT,color:Array.from(p),fontSize:d,value:S.join(`
`),position:C,pageIndex:T-1,rect:g.slice(0),rotation:y,id:w,deleted:!1,popupRef:A}}const u=await super.deserialize(t,i,r);return b(u,Un,t.fontSize),b(u,Li,ye.makeHexColor(...t.color)),b(u,jn,x(h=Ze,sr,gv).call(h,t.value)),u.annotationElementId=t.id||null,u._initialData=a,u}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ze._internalPadding*this.parentScale,r=this.getRect(i,i),a=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,Li)),u={annotationType:Pe.FREETEXT,color:a,fontSize:o(this,Un),value:x(this,Et,V1).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!x(this,Et,W1).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${o(this,Un)}px * var(--scale-factor))`,r.color=o(this,Li),i.replaceChildren();for(const u of o(this,jn).split(`
`)){const h=document.createElement("div");h.append(u?document.createTextNode(u):document.createElement("br")),i.append(h)}const a=Ze._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:o(this,jn)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Li=new WeakMap,jn=new WeakMap,id=new WeakMap,mo=new WeakMap,Un=new WeakMap,Et=new WeakSet,B1=function(t){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-o(this,Un))*this.parentScale),b(this,Un,a),x(this,Et,fp).call(this)},r=o(this,Un);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},j1=function(t){const i=a=>{b(this,Li,this.editorDiv.style.color=a)},r=o(this,Li);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},U1=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(x(r=Ze,sr,pp).call(r,a)),i=a);return t.join(`
`)},fp=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:a,div:u}=this,h=u.style.display,d=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",a.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=h,u.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},sr=new WeakSet,pp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Gf,"")},gp=function(){if(this.editorDiv.replaceChildren(),!!o(this,jn))for(const t of o(this,jn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},V1=function(){return o(this,jn).replaceAll(" "," ")},gv=function(t){return t.replaceAll(" "," ")},W1=function(t){const{value:i,fontSize:r,color:a,pageIndex:u}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((h,d)=>h!==a[d])||t.pageIndex!==u},E(Ze,sr),Se(Ze,"_freeTextDefaultContent",""),Se(Ze,"_internalPadding",0),Se(Ze,"_defaultColor",null),Se(Ze,"_defaultFontSize",10),Se(Ze,"_type","freetext"),Se(Ze,"_editorType",Pe.FREETEXT);let pv=Ze;class ae{toSVGPath(){Qe("Abstract method `toSVGPath` must be implemented.")}get box(){Qe("Abstract getter `box` must be implemented.")}serialize(e,t){Qe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,r,a,u){u||(u=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)u[h]=t+e[h]*r,u[h+1]=i+e[h+1]*a;return u}static _rescaleAndSwap(e,t,i,r,a,u){u||(u=new Float32Array(e.length));for(let h=0,d=e.length;h<d;h+=2)u[h]=t+e[h+1]*r,u[h+1]=i+e[h]*a;return u}static _translate(e,t,i,r){r||(r=new Float32Array(e.length));for(let a=0,u=e.length;a<u;a+=2)r[a]=t+e[a],r[a+1]=i+e[a+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,r,a){switch(a){case 90:return[1-t/i,e/r];case 180:return[1-e/i,1-t/r];case 270:return[t/i,1-e/r];default:return[e/i,t/r]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,r,a,u){return[(e+5*i)/6,(t+5*r)/6,(5*i+a)/6,(5*r+u)/6,(i+a)/2,(r+u)/2]}}Se(ae,"PRECISION",1e-4);var Vn,Mi,au,ou,os,De,yo,vo,sd,rd,lu,uu,Xr,ad,qp,Yp,Lt,zc,G1,X1,q1,Y1,K1,Q1;const Ps=class Ps{constructor({x:e,y:t},i,r,a,u,h=0){E(this,Lt);E(this,Vn);E(this,Mi,[]);E(this,au);E(this,ou);E(this,os,[]);E(this,De,new Float32Array(18));E(this,yo);E(this,vo);E(this,sd);E(this,rd);E(this,lu);E(this,uu);E(this,Xr,[]);b(this,Vn,i),b(this,uu,a*r),b(this,ou,u),o(this,De).set([NaN,NaN,NaN,NaN,e,t],6),b(this,au,h),b(this,rd,o(Ps,ad)*r),b(this,sd,o(Ps,Yp)*r),b(this,lu,r),o(this,Xr).push(e,t)}isEmpty(){return isNaN(o(this,De)[8])}add({x:e,y:t}){var Z;b(this,yo,e),b(this,vo,t);const[i,r,a,u]=o(this,Vn);let[h,d,p,g]=o(this,De).subarray(8,12);const y=e-p,w=t-g,A=Math.hypot(y,w);if(A<o(this,sd))return!1;const S=A-o(this,rd),C=S/A,T=C*y,k=C*w;let R=h,M=d;h=p,d=g,p+=T,g+=k,(Z=o(this,Xr))==null||Z.push(e,t);const D=-k/S,$=T/S,j=D*o(this,uu),B=$*o(this,uu);return o(this,De).set(o(this,De).subarray(2,8),0),o(this,De).set([p+j,g+B],4),o(this,De).set(o(this,De).subarray(14,18),12),o(this,De).set([p-j,g-B],16),isNaN(o(this,De)[6])?(o(this,os).length===0&&(o(this,De).set([h+j,d+B],2),o(this,os).push(NaN,NaN,NaN,NaN,(h+j-i)/a,(d+B-r)/u),o(this,De).set([h-j,d-B],14),o(this,Mi).push(NaN,NaN,NaN,NaN,(h-j-i)/a,(d-B-r)/u)),o(this,De).set([R,M,h,d,p,g],6),!this.isEmpty()):(o(this,De).set([R,M,h,d,p,g],6),Math.abs(Math.atan2(M-d,R-h)-Math.atan2(k,T))<Math.PI/2?([h,d,p,g]=o(this,De).subarray(2,6),o(this,os).push(NaN,NaN,NaN,NaN,((h+p)/2-i)/a,((d+g)/2-r)/u),[h,d,R,M]=o(this,De).subarray(14,18),o(this,Mi).push(NaN,NaN,NaN,NaN,((R+h)/2-i)/a,((M+d)/2-r)/u),!0):([R,M,h,d,p,g]=o(this,De).subarray(0,6),o(this,os).push(((R+5*h)/6-i)/a,((M+5*d)/6-r)/u,((5*h+p)/6-i)/a,((5*d+g)/6-r)/u,((h+p)/2-i)/a,((d+g)/2-r)/u),[p,g,h,d,R,M]=o(this,De).subarray(12,18),o(this,Mi).push(((R+5*h)/6-i)/a,((M+5*d)/6-r)/u,((5*h+p)/6-i)/a,((5*d+g)/6-r)/u,((h+p)/2-i)/a,((d+g)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const e=o(this,os),t=o(this,Mi);if(isNaN(o(this,De)[6])&&!this.isEmpty())return x(this,Lt,G1).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);x(this,Lt,q1).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return x(this,Lt,X1).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,a,u){return new J1(e,t,i,r,a,u)}getOutlines(){var y;const e=o(this,os),t=o(this,Mi),i=o(this,De),[r,a,u,h]=o(this,Vn),d=new Float32Array((((y=o(this,Xr))==null?void 0:y.length)??0)+2);for(let w=0,A=d.length-2;w<A;w+=2)d[w]=(o(this,Xr)[w]-r)/u,d[w+1]=(o(this,Xr)[w+1]-a)/h;if(d[d.length-2]=(o(this,yo)-r)/u,d[d.length-1]=(o(this,vo)-a)/h,isNaN(i[6])&&!this.isEmpty())return x(this,Lt,Y1).call(this,d);const p=new Float32Array(o(this,os).length+24+o(this,Mi).length);let g=e.length;for(let w=0;w<g;w+=2){if(isNaN(e[w])){p[w]=p[w+1]=NaN;continue}p[w]=e[w],p[w+1]=e[w+1]}g=x(this,Lt,Q1).call(this,p,g);for(let w=t.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(t[w+A])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=t[w+A],p[g+1]=t[w+A+1],g+=2}return x(this,Lt,K1).call(this,p,g),this.newFreeDrawOutline(p,d,o(this,Vn),o(this,lu),o(this,au),o(this,ou))}};Vn=new WeakMap,Mi=new WeakMap,au=new WeakMap,ou=new WeakMap,os=new WeakMap,De=new WeakMap,yo=new WeakMap,vo=new WeakMap,sd=new WeakMap,rd=new WeakMap,lu=new WeakMap,uu=new WeakMap,Xr=new WeakMap,ad=new WeakMap,qp=new WeakMap,Yp=new WeakMap,Lt=new WeakSet,zc=function(){const e=o(this,De).subarray(4,6),t=o(this,De).subarray(16,18),[i,r,a,u]=o(this,Vn);return[(o(this,yo)+(e[0]-t[0])/2-i)/a,(o(this,vo)+(e[1]-t[1])/2-r)/u,(o(this,yo)+(t[0]-e[0])/2-i)/a,(o(this,vo)+(t[1]-e[1])/2-r)/u]},G1=function(){const[e,t,i,r]=o(this,Vn),[a,u,h,d]=x(this,Lt,zc).call(this);return`M${(o(this,De)[2]-e)/i} ${(o(this,De)[3]-t)/r} L${(o(this,De)[4]-e)/i} ${(o(this,De)[5]-t)/r} L${a} ${u} L${h} ${d} L${(o(this,De)[16]-e)/i} ${(o(this,De)[17]-t)/r} L${(o(this,De)[14]-e)/i} ${(o(this,De)[15]-t)/r} Z`},X1=function(e){const t=o(this,Mi);e.push(`L${t[4]} ${t[5]} Z`)},q1=function(e){const[t,i,r,a]=o(this,Vn),u=o(this,De).subarray(4,6),h=o(this,De).subarray(16,18),[d,p,g,y]=x(this,Lt,zc).call(this);e.push(`L${(u[0]-t)/r} ${(u[1]-i)/a} L${d} ${p} L${g} ${y} L${(h[0]-t)/r} ${(h[1]-i)/a}`)},Y1=function(e){const t=o(this,De),[i,r,a,u]=o(this,Vn),[h,d,p,g]=x(this,Lt,zc).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-i)/a,(t[3]-r)/u,NaN,NaN,NaN,NaN,(t[4]-i)/a,(t[5]-r)/u,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(t[16]-i)/a,(t[17]-r)/u,NaN,NaN,NaN,NaN,(t[14]-i)/a,(t[15]-r)/u],0),this.newFreeDrawOutline(y,e,o(this,Vn),o(this,lu),o(this,au),o(this,ou))},K1=function(e,t){const i=o(this,Mi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},Q1=function(e,t){const i=o(this,De).subarray(4,6),r=o(this,De).subarray(16,18),[a,u,h,d]=o(this,Vn),[p,g,y,w]=x(this,Lt,zc).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-a)/h,(i[1]-u)/d,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,w,NaN,NaN,NaN,NaN,(r[0]-a)/h,(r[1]-u)/d],t),t+=24},E(Ps,ad,8),E(Ps,qp,2),E(Ps,Yp,o(Ps,ad)+o(Ps,qp));let Rp=Ps;var cu,wo,qs,od,Wn,ld,vt,Kp,Z1;class J1 extends ae{constructor(t,i,r,a,u,h){super();E(this,Kp);E(this,cu);E(this,wo,new Float32Array(4));E(this,qs);E(this,od);E(this,Wn);E(this,ld);E(this,vt);b(this,vt,t),b(this,Wn,i),b(this,cu,r),b(this,ld,a),b(this,qs,u),b(this,od,h),this.lastPoint=[NaN,NaN],x(this,Kp,Z1).call(this,h);const[d,p,g,y]=o(this,wo);for(let w=0,A=t.length;w<A;w+=2)t[w]=(t[w]-d)/g,t[w+1]=(t[w+1]-p)/y;for(let w=0,A=i.length;w<A;w+=2)i[w]=(i[w]-d)/g,i[w+1]=(i[w+1]-p)/y}toSVGPath(){const t=[`M${o(this,vt)[4]} ${o(this,vt)[5]}`];for(let i=6,r=o(this,vt).length;i<r;i+=6){if(isNaN(o(this,vt)[i])){t.push(`L${o(this,vt)[i+4]} ${o(this,vt)[i+5]}`);continue}t.push(`C${o(this,vt)[i]} ${o(this,vt)[i+1]} ${o(this,vt)[i+2]} ${o(this,vt)[i+3]} ${o(this,vt)[i+4]} ${o(this,vt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,a],u){const h=r-t,d=a-i;let p,g;switch(u){case 0:p=ae._rescale(o(this,vt),t,a,h,-d),g=ae._rescale(o(this,Wn),t,a,h,-d);break;case 90:p=ae._rescaleAndSwap(o(this,vt),t,i,h,d),g=ae._rescaleAndSwap(o(this,Wn),t,i,h,d);break;case 180:p=ae._rescale(o(this,vt),r,i,-h,d),g=ae._rescale(o(this,Wn),r,i,-h,d);break;case 270:p=ae._rescaleAndSwap(o(this,vt),r,a,-h,-d),g=ae._rescaleAndSwap(o(this,Wn),r,a,-h,-d);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return o(this,wo)}newOutliner(t,i,r,a,u,h=0){return new Rp(t,i,r,a,u,h)}getNewOutline(t,i){const[r,a,u,h]=o(this,wo),[d,p,g,y]=o(this,cu),w=u*g,A=h*y,S=r*g+d,C=a*y+p,T=this.newOutliner({x:o(this,Wn)[0]*w+S,y:o(this,Wn)[1]*A+C},o(this,cu),o(this,ld),t,o(this,od),i??o(this,qs));for(let k=2;k<o(this,Wn).length;k+=2)T.add({x:o(this,Wn)[k]*w+S,y:o(this,Wn)[k+1]*A+C});return T.getOutlines()}}cu=new WeakMap,wo=new WeakMap,qs=new WeakMap,od=new WeakMap,Wn=new WeakMap,ld=new WeakMap,vt=new WeakMap,Kp=new WeakSet,Z1=function(t){const i=o(this,vt);let r=i[4],a=i[5],u=r,h=a,d=r,p=a,g=r,y=a;const w=t?Math.max:Math.min;for(let S=6,C=i.length;S<C;S+=6){if(isNaN(i[S]))u=Math.min(u,i[S+4]),h=Math.min(h,i[S+5]),d=Math.max(d,i[S+4]),p=Math.max(p,i[S+5]),y<i[S+5]?(g=i[S+4],y=i[S+5]):y===i[S+5]&&(g=w(g,i[S+4]));else{const T=ye.bezierBoundingBox(r,a,...i.slice(S,S+6));u=Math.min(u,T[0]),h=Math.min(h,T[1]),d=Math.max(d,T[2]),p=Math.max(p,T[3]),y<T[3]?(g=T[2],y=T[3]):y===T[3]&&(g=w(g,T[2]))}r=i[S+4],a=i[S+5]}const A=o(this,wo);A[0]=u-o(this,qs),A[1]=h-o(this,qs),A[2]=d-u+2*o(this,qs),A[3]=p-h+2*o(this,qs),this.lastPoint=[g,y]};var ud,cd,qr,Ii,An,e_,mp,t_,n_,yv;class mv{constructor(e,t=0,i=0,r=!0){E(this,An);E(this,ud);E(this,cd);E(this,qr,[]);E(this,Ii,[]);let a=1/0,u=-1/0,h=1/0,d=-1/0;const p=10**-4;for(const{x:T,y:k,width:R,height:M}of e){const D=Math.floor((T-t)/p)*p,$=Math.ceil((T+R+t)/p)*p,j=Math.floor((k-t)/p)*p,B=Math.ceil((k+M+t)/p)*p,K=[D,j,B,!0],Z=[$,j,B,!1];o(this,qr).push(K,Z),a=Math.min(a,D),u=Math.max(u,$),h=Math.min(h,j),d=Math.max(d,B)}const g=u-a+2*i,y=d-h+2*i,w=a-i,A=h-i,S=o(this,qr).at(r?-1:-2),C=[S[0],S[2]];for(const T of o(this,qr)){const[k,R,M]=T;T[0]=(k-w)/g,T[1]=(R-A)/y,T[2]=(M-A)/y}b(this,ud,new Float32Array([w,A,g,y])),b(this,cd,C)}getOutlines(){o(this,qr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of o(this,qr))t[3]?(e.push(...x(this,An,yv).call(this,t)),x(this,An,t_).call(this,t)):(x(this,An,n_).call(this,t),e.push(...x(this,An,yv).call(this,t)));return x(this,An,e_).call(this,e)}}ud=new WeakMap,cd=new WeakMap,qr=new WeakMap,Ii=new WeakMap,An=new WeakSet,e_=function(e){const t=[],i=new Set;for(const u of e){const[h,d,p]=u;t.push([h,d,u],[h,p,u])}t.sort((u,h)=>u[1]-h[1]||u[0]-h[0]);for(let u=0,h=t.length;u<h;u+=2){const d=t[u][2],p=t[u+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const r=[];let a;for(;i.size>0;){const u=i.values().next().value;let[h,d,p,g,y]=u;i.delete(u);let w=h,A=d;for(a=[h,p],r.push(a);;){let S;if(i.has(g))S=g;else if(i.has(y))S=y;else break;i.delete(S),[h,d,p,g,y]=S,w!==h&&(a.push(w,A,h,A===d?d:p),w=h),A=A===d?p:d}a.push(w,A)}return new yP(r,o(this,ud),o(this,cd))},mp=function(e){const t=o(this,Ii);let i=0,r=t.length-1;for(;i<=r;){const a=i+r>>1,u=t[a][0];if(u===e)return a;u<e?i=a+1:r=a-1}return r+1},t_=function([,e,t]){const i=x(this,An,mp).call(this,e);o(this,Ii).splice(i,0,[e,t])},n_=function([,e,t]){const i=x(this,An,mp).call(this,e);for(let r=i;r<o(this,Ii).length;r++){const[a,u]=o(this,Ii)[r];if(a!==e)break;if(a===e&&u===t){o(this,Ii).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,u]=o(this,Ii)[r];if(a!==e)break;if(a===e&&u===t){o(this,Ii).splice(r,1);return}}},yv=function(e){const[t,i,r]=e,a=[[t,i,r]],u=x(this,An,mp).call(this,r);for(let h=0;h<u;h++){const[d,p]=o(this,Ii)[h];for(let g=0,y=a.length;g<y;g++){const[,w,A]=a[g];if(!(p<=w||A<=d)){if(w>=d){if(A>p)a[g][1]=p;else{if(y===1)return[];a.splice(g,1),g--,y--}continue}a[g][2]=d,A>p&&a.push([t,p,A])}}}return a};var hd,hu;class yP extends ae{constructor(t,i,r){super();E(this,hd);E(this,hu);b(this,hu,t),b(this,hd,i),this.lastPoint=r}toSVGPath(){const t=[];for(const i of o(this,hu)){let[r,a]=i;t.push(`M${r} ${a}`);for(let u=2;u<i.length;u+=2){const h=i[u],d=i[u+1];h===r?(t.push(`V${d}`),a=d):d===a&&(t.push(`H${h}`),r=h)}t.push("Z")}return t.join(" ")}serialize([t,i,r,a],u){const h=[],d=r-t,p=a-i;for(const g of o(this,hu)){const y=new Array(g.length);for(let w=0;w<g.length;w+=2)y[w]=t+g[w]*d,y[w+1]=a-g[w+1]*p;h.push(y)}return h}get box(){return o(this,hd)}get classNamesForOutlining(){return["highlightOutline"]}}hd=new WeakMap,hu=new WeakMap;class vv extends Rp{newFreeDrawOutline(e,t,i,r,a,u){return new vP(e,t,i,r,a,u)}}class vP extends J1{newOutliner(e,t,i,r,a,u=0){return new vv(e,t,i,r,a,u)}}var Ni,Ao,du,Rt,dd,fu,fd,pd,Yr,Di,pu,gd,qe,wv,Av,bv,xa,i_,Cr;const Pn=class Pn{constructor({editor:e=null,uiManager:t=null}){E(this,qe);E(this,Ni,null);E(this,Ao,null);E(this,du);E(this,Rt,null);E(this,dd,!1);E(this,fu,!1);E(this,fd,null);E(this,pd);E(this,Yr,null);E(this,Di,null);E(this,pu);var i;e?(b(this,fu,!1),b(this,pu,ze.HIGHLIGHT_COLOR),b(this,fd,e)):(b(this,fu,!0),b(this,pu,ze.HIGHLIGHT_DEFAULT_COLOR)),b(this,Di,(e==null?void 0:e._uiManager)||t),b(this,pd,o(this,Di)._eventBus),b(this,du,(e==null?void 0:e.color)||((i=o(this,Di))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),o(Pn,gd)||b(Pn,gd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fe(this,"_keyboardManager",new Cd([[["Escape","mac+Escape"],Pn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pn.prototype._moveToPrevious],[["Home","mac+Home"],Pn.prototype._moveToBeginning],[["End","mac+End"],Pn.prototype._moveToEnd]]))}renderButton(){const e=b(this,Ni,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=o(this,Di)._signal;e.addEventListener("click",x(this,qe,xa).bind(this),{signal:t}),e.addEventListener("keydown",x(this,qe,bv).bind(this),{signal:t});const i=b(this,Ao,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=o(this,du),e.append(i),e}renderMainDropdown(){const e=b(this,Rt,x(this,qe,wv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===o(this,Ni)){x(this,qe,xa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&x(this,qe,Av).call(this,t,e)}_moveToNext(e){var t,i;if(!o(this,qe,Cr)){x(this,qe,xa).call(this,e);return}if(e.target===o(this,Ni)){(t=o(this,Rt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=o(this,Rt))==null?void 0:t.firstChild)||e.target===o(this,Ni)){o(this,qe,Cr)&&this._hideDropdownFromKeyboard();return}o(this,qe,Cr)||x(this,qe,xa).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!o(this,qe,Cr)){x(this,qe,xa).call(this,e);return}(t=o(this,Rt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!o(this,qe,Cr)){x(this,qe,xa).call(this,e);return}(t=o(this,Rt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=o(this,Rt))==null||e.classList.add("hidden"),(t=o(this,Yr))==null||t.abort(),b(this,Yr,null)}_hideDropdownFromKeyboard(){var e;if(!o(this,fu)){if(!o(this,qe,Cr)){(e=o(this,fd))==null||e.unselect();return}this.hideDropdown(),o(this,Ni).focus({preventScroll:!0,focusVisible:o(this,dd)})}}updateColor(e){if(o(this,Ao)&&(o(this,Ao).style.backgroundColor=e),!o(this,Rt))return;const t=o(this,Di).highlightColors.values();for(const i of o(this,Rt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=o(this,Ni))==null||e.remove(),b(this,Ni,null),b(this,Ao,null),(t=o(this,Rt))==null||t.remove(),b(this,Rt,null)}};Ni=new WeakMap,Ao=new WeakMap,du=new WeakMap,Rt=new WeakMap,dd=new WeakMap,fu=new WeakMap,fd=new WeakMap,pd=new WeakMap,Yr=new WeakMap,Di=new WeakMap,pu=new WeakMap,gd=new WeakMap,qe=new WeakSet,wv=function(){const e=document.createElement("div"),t=o(this,Di)._signal;e.addEventListener("contextmenu",Hi,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of o(this,Di).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",o(Pn,gd)[i]);const u=document.createElement("span");a.append(u),u.className="swatch",u.style.backgroundColor=r,a.setAttribute("aria-selected",r===o(this,du)),a.addEventListener("click",x(this,qe,Av).bind(this,r),{signal:t}),e.append(a)}return e.addEventListener("keydown",x(this,qe,bv).bind(this),{signal:t}),e},Av=function(e,t){t.stopPropagation(),o(this,pd).dispatch("switchannotationeditorparams",{source:this,type:o(this,pu),value:e})},bv=function(e){Pn._keyboardManager.exec(this,e)},xa=function(e){if(o(this,qe,Cr)){this.hideDropdown();return}if(b(this,dd,e.detail===0),o(this,Yr)||(b(this,Yr,new AbortController),window.addEventListener("pointerdown",x(this,qe,i_).bind(this),{signal:o(this,Di).combinedSignal(o(this,Yr))})),o(this,Rt)){o(this,Rt).classList.remove("hidden");return}const t=b(this,Rt,x(this,qe,wv).call(this));o(this,Ni).append(t)},i_=function(e){var t;(t=o(this,Rt))!=null&&t.contains(e.target)||this.hideDropdown()},Cr=function(){return o(this,Rt)&&!o(this,Rt).classList.contains("hidden")},E(Pn,gd,null);let Lp=Pn;var gu,md,Ys,bo,mu,Mn,yd,vd,So,ci,Gn,Wt,yu,Ks,rn,vu,hi,wd,Te,Sv,yp,s_,r_,a_,_v,Ca,gi,wl,o_,vp,Hc,l_,u_,c_,h_,d_;const Ve=class Ve extends dt{constructor(t){super({...t,name:"highlightEditor"});E(this,Te);E(this,gu,null);E(this,md,0);E(this,Ys);E(this,bo,null);E(this,mu,null);E(this,Mn,null);E(this,yd,null);E(this,vd,0);E(this,So,null);E(this,ci,null);E(this,Gn,null);E(this,Wt,!1);E(this,yu,null);E(this,Ks);E(this,rn,null);E(this,vu,"");E(this,hi);E(this,wd,"");this.color=t.color||Ve._defaultColor,b(this,hi,t.thickness||Ve._defaultThickness),b(this,Ks,t.opacity||Ve._defaultOpacity),b(this,Ys,t.boxes||null),b(this,wd,t.methodOfCreation||""),b(this,vu,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,Wt,!0),x(this,Te,yp).call(this,t),x(this,Te,Ca).call(this)):o(this,Ys)&&(b(this,gu,t.anchorNode),b(this,md,t.anchorOffset),b(this,yd,t.focusNode),b(this,vd,t.focusOffset),x(this,Te,Sv).call(this),x(this,Te,Ca).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ve.prototype;return Fe(this,"_keyboardManager",new Cd([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Wt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,hi),methodOfCreation:o(this,wd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;dt.initialize(t,i),Ve._defaultColor||(Ve._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case ze.HIGHLIGHT_DEFAULT_COLOR:Ve._defaultColor=i;break;case ze.HIGHLIGHT_THICKNESS:Ve._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return o(this,yu)}updateParams(t,i){switch(t){case ze.HIGHLIGHT_COLOR:x(this,Te,s_).call(this,i);break;case ze.HIGHLIGHT_THICKNESS:x(this,Te,r_).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ze.HIGHLIGHT_DEFAULT_COLOR,Ve._defaultColor],[ze.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[ze.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[ze.HIGHLIGHT_THICKNESS,o(this,hi)||Ve._defaultThickness],[ze.HIGHLIGHT_FREE,o(this,Wt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,mu,new Lp({editor:this})),t.addColorPicker(o(this,mu))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,Te,Hc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,x(this,Te,Hc).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){x(this,Te,_v).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Te,Ca).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?x(this,Te,_v).call(this):t&&(x(this,Te,Ca).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var a,u,h;const{drawLayer:i}=this.parent;let r;o(this,Wt)?(t=(t-this.rotation+360)%360,r=x(a=Ve,gi,wl).call(a,o(this,ci).box,t)):r=x(u=Ve,gi,wl).call(u,[this.x,this.y,this.width,this.height],t),i.updateProperties(o(this,Gn),{bbox:r,root:{"data-main-rotation":t}}),i.updateProperties(o(this,rn),{bbox:x(h=Ve,gi,wl).call(h,o(this,Mn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();o(this,vu)&&(t.setAttribute("aria-label",o(this,vu)),t.setAttribute("role","mark")),o(this,Wt)?t.classList.add("free"):this.div.addEventListener("keydown",x(this,Te,o_).bind(this),{signal:this._uiManager._signal});const i=b(this,So,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=o(this,bo);const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),kp(this,o(this,So),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,rn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(o(this,rn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:x(this,Te,vp).call(this,!0);break;case 1:case 3:x(this,Te,vp).call(this,!1);break}}select(){var t;super.select(),o(this,rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,rn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),o(this,rn)&&((t=this.parent)==null||t.drawLayer.updateProperties(o(this,rn),{rootClass:{selected:!1}}),o(this,Wt)||x(this,Te,vp).call(this,!1))}get _mustFixPosition(){return!o(this,Wt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(o(this,Gn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(o(this,rn),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:r,x:a,y:u}){const{x:h,y:d,width:p,height:g}=r.getBoundingClientRect(),y=new AbortController,w=t.combinedSignal(y),A=S=>{y.abort(),x(this,gi,h_).call(this,t,S)};window.addEventListener("blur",A,{signal:w}),window.addEventListener("pointerup",A,{signal:w}),window.addEventListener("pointerdown",Jn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Hi,{signal:w}),r.addEventListener("pointermove",x(this,gi,c_).bind(this,t),{signal:w}),this._freeHighlight=new vv({x:a,y:u},[h,d,p,g],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,r){var C,T,k,R;let a=null;if(t instanceof $1){const{data:{quadPoints:M,rect:D,rotation:$,id:j,color:B,opacity:K,popupRef:Z},parent:{page:{pageNumber:me}}}=t;a=t={annotationType:Pe.HIGHLIGHT,color:Array.from(B),opacity:K,quadPoints:M,boxes:null,pageIndex:me-1,rect:D.slice(0),rotation:$,id:j,deleted:!1,popupRef:Z}}else if(t instanceof l0){const{data:{inkLists:M,rect:D,rotation:$,id:j,color:B,borderStyle:{rawWidth:K},popupRef:Z},parent:{page:{pageNumber:me}}}=t;a=t={annotationType:Pe.HIGHLIGHT,color:Array.from(B),thickness:K,inkLists:M,boxes:null,pageIndex:me-1,rect:D.slice(0),rotation:$,id:j,deleted:!1,popupRef:Z}}const{color:u,quadPoints:h,inkLists:d,opacity:p}=t,g=await super.deserialize(t,i,r);g.color=ye.makeHexColor(...u),b(g,Ks,p||1),d&&b(g,hi,t.thickness),g.annotationElementId=t.id||null,g._initialData=a;const[y,w]=g.pageDimensions,[A,S]=g.pageTranslation;if(h){const M=b(g,Ys,[]);for(let D=0;D<h.length;D+=8)M.push({x:(h[D]-A)/y,y:1-(h[D+1]-S)/w,width:(h[D+2]-h[D])/y,height:(h[D+1]-h[D+5])/w});x(C=g,Te,Sv).call(C),x(T=g,Te,Ca).call(T),g.rotate(g.rotation)}else if(d){b(g,Wt,!0);const M=d[0],D={x:M[0]-A,y:w-(M[1]-S)},$=new vv(D,[0,0,y,w],1,o(g,hi)/2,!0,.001);for(let K=0,Z=M.length;K<Z;K+=2)D.x=M[K]-A,D.y=w-(M[K+1]-S),$.add(D);const{id:j,clipPathId:B}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:$.toSVGPath()}},!0,!0);x(k=g,Te,yp).call(k,{highlightOutlines:$.getOutlines(),highlightId:j,clipPathId:B}),x(R=g,Te,Ca).call(R)}return g}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=dt._colorManager.convert(this.color),a={annotationType:Pe.HIGHLIGHT,color:r,opacity:o(this,Ks),thickness:o(this,hi),quadPoints:x(this,Te,l_).call(this),outlines:x(this,Te,u_).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:x(this,Te,Hc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,Te,d_).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};gu=new WeakMap,md=new WeakMap,Ys=new WeakMap,bo=new WeakMap,mu=new WeakMap,Mn=new WeakMap,yd=new WeakMap,vd=new WeakMap,So=new WeakMap,ci=new WeakMap,Gn=new WeakMap,Wt=new WeakMap,yu=new WeakMap,Ks=new WeakMap,rn=new WeakMap,vu=new WeakMap,hi=new WeakMap,wd=new WeakMap,Te=new WeakSet,Sv=function(){const t=new mv(o(this,Ys),.001);b(this,ci,t.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,ci).box;const i=new mv(o(this,Ys),.0025,.001,this._uiManager.direction==="ltr");b(this,Mn,i.getOutlines());const{lastPoint:r}=o(this,Mn);b(this,yu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},yp=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var y,w;if(b(this,ci,t),b(this,Mn,t.getNewOutline(o(this,hi)/2+1.5,.0025)),i>=0)b(this,Gn,i),b(this,bo,r),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),b(this,rn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,Mn).box,path:{d:o(this,Mn).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,Gn),{bbox:x(y=Ve,gi,wl).call(y,o(this,ci).box,(A-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,rn),{bbox:x(w=Ve,gi,wl).call(w,o(this,Mn).box,A),path:{d:o(this,Mn).toSVGPath()}})}const[u,h,d,p]=t.box;switch(this.rotation){case 0:this.x=u,this.y=h,this.width=d,this.height=p;break;case 90:{const[A,S]=this.parentDimensions;this.x=h,this.y=1-u,this.width=d*S/A,this.height=p*A/S;break}case 180:this.x=1-u,this.y=1-h,this.width=d,this.height=p;break;case 270:{const[A,S]=this.parentDimensions;this.x=1-h,this.y=u,this.width=d*S/A,this.height=p*A/S;break}}const{lastPoint:g}=o(this,Mn);b(this,yu,[(g[0]-u)/d,(g[1]-h)/p])},s_=function(t){const i=(u,h)=>{var d,p;this.color=u,b(this,Ks,h),(d=this.parent)==null||d.drawLayer.updateProperties(o(this,Gn),{root:{fill:u,"fill-opacity":h}}),(p=o(this,mu))==null||p.updateColor(u)},r=this.color,a=o(this,Ks);this.addCommands({cmd:i.bind(this,t,Ve._defaultOpacity),undo:i.bind(this,r,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},r_=function(t){const i=o(this,hi),r=a=>{b(this,hi,a),x(this,Te,a_).call(this,a)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ze.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},a_=function(t){if(!o(this,Wt))return;x(this,Te,yp).call(this,{highlightOutlines:o(this,ci).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},_v=function(){o(this,Gn)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Gn)),b(this,Gn,null),this.parent.drawLayer.remove(o(this,rn)),b(this,rn,null))},Ca=function(t=this.parent){o(this,Gn)===null&&({id:dn(this,Gn)._,clipPathId:dn(this,bo)._}=t.drawLayer.draw({bbox:o(this,ci).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":o(this,Ks)},rootClass:{highlight:!0,free:o(this,Wt)},path:{d:o(this,ci).toSVGPath()}},!1,!0),b(this,rn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Wt)},bbox:o(this,Mn).box,path:{d:o(this,Mn).toSVGPath()}},o(this,Wt))),o(this,So)&&(o(this,So).style.clipPath=o(this,bo)))},gi=new WeakSet,wl=function([t,i,r,a],u){switch(u){case 90:return[1-i-a,t,a,r];case 180:return[1-t-r,1-i-a,r,a];case 270:return[i,1-t-r,a,r]}return[t,i,r,a]},o_=function(t){Ve._keyboardManager.exec(this,t)},vp=function(t){if(!o(this,gu))return;const i=window.getSelection();t?i.setPosition(o(this,gu),o(this,md)):i.setPosition(o(this,yd),o(this,vd))},Hc=function(){return o(this,Wt)?this.rotation:0},l_=function(){if(o(this,Wt))return null;const[t,i]=this.pageDimensions,[r,a]=this.pageTranslation,u=o(this,Ys),h=new Float32Array(u.length*8);let d=0;for(const{x:p,y:g,width:y,height:w}of u){const A=p*t+r,S=(1-g)*i+a;h[d]=h[d+4]=A,h[d+1]=h[d+3]=S,h[d+2]=h[d+6]=A+y*t,h[d+5]=h[d+7]=S-w*i,d+=8}return h},u_=function(t){return o(this,ci).serialize(t,x(this,Te,Hc).call(this))},c_=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},h_=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},d_=function(t){const{color:i}=this._initialData;return t.color.some((r,a)=>r!==i[a])},E(Ve,gi),Se(Ve,"_defaultColor",null),Se(Ve,"_defaultOpacity",1),Se(Ve,"_defaultThickness",12),Se(Ve,"_type","highlight"),Se(Ve,"_editorType",Pe.HIGHLIGHT),Se(Ve,"_freeHighlightId",-1),Se(Ve,"_freeHighlight",null),Se(Ve,"_freeHighlightClipId","");let Mp=Ve;var _o;class wP{constructor(){E(this,_o,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){o(this,_o)[e]=t}toSVGProperties(){const e=o(this,_o);return b(this,_o,Object.create(null)),{root:e}}reset(){b(this,_o,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Qe("Not implemented")}}_o=new WeakMap;var Xn,wu,$t,Eo,xo,Kr,Qr,Jr,Co,Be,xv,Cv,kv,Bc,f_,wp,jc,Al;const oe=class oe extends dt{constructor(t){super(t);E(this,Be);E(this,Xn,null);E(this,wu);Se(this,"_drawId",null);b(this,wu,t.mustBeCommitted||!1),t.drawOutlines&&(x(this,Be,xv).call(this,t),x(this,Be,Bc).call(this))}static _mergeSVGProperties(t,i){const r=new Set(Object.keys(t));for(const[a,u]of Object.entries(i))r.has(a)?Object.assign(t[a],u):t[a]=u;return t}static getDefaultDrawingOptions(t){Qe("Not implemented")}static get typesMap(){Qe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(o(oe,$t).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[r,a]of this.typesMap)t.push([r,i[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[r,a]of this.constructor.typesMap)t.push([r,i[a]]);return t}_updateProperty(t,i,r){const a=this._drawingOptions,u=a[i],h=d=>{var g;a.updateProperty(i,d);const p=o(this,Xn).updateProperty(i,d);p&&x(this,Be,jc).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:h.bind(this,r),undo:h.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(o(this,Xn).getPathResizingSVGProperties(x(this,Be,wp).call(this)),{bbox:x(this,Be,Al).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(o(this,Xn).getPathResizedSVGProperties(x(this,Be,wp).call(this)),{bbox:x(this,Be,Al).call(this)}))}_onTranslating(t,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:x(this,Be,Al).call(this,t,i)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(o(this,Xn).getPathTranslatedSVGProperties(x(this,Be,wp).call(this),this.parentDimensions),{bbox:x(this,Be,Al).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,wu)&&(b(this,wu,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){x(this,Be,kv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,Be,Bc).call(this),x(this,Be,jc).call(this,o(this,Xn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),x(this,Be,kv).call(this)):t&&(this._uiManager.addShouldRescale(this),x(this,Be,Bc).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties({bbox:x(this,Be,Al).call(this)},o(this,Xn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&x(this,Be,jc).call(this,o(this,Xn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const i=document.createElement("div");t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,i,r,a,u){Qe("Not implemented")}static startDrawing(t,i,r,a){var T;const{target:u,offsetX:h,offsetY:d,pointerId:p,pointerType:g}=a;if(o(oe,Qr)&&o(oe,Qr)!==g)return;const{viewport:{rotation:y}}=t,{width:w,height:A}=u.getBoundingClientRect(),S=b(oe,Eo,new AbortController),C=t.combinedSignal(S);if(o(oe,Kr)||b(oe,Kr,p),o(oe,Qr)??b(oe,Qr,g),window.addEventListener("pointerup",k=>{var R;o(oe,Kr)===k.pointerId?this._endDraw(k):(R=o(oe,Jr))==null||R.delete(k.pointerId)},{signal:C}),window.addEventListener("pointercancel",k=>{var R;o(oe,Kr)===k.pointerId?this._currentParent.endDrawingSession():(R=o(oe,Jr))==null||R.delete(k.pointerId)},{signal:C}),window.addEventListener("pointerdown",k=>{o(oe,Qr)===k.pointerType&&((o(oe,Jr)||b(oe,Jr,new Set)).add(k.pointerId),o(oe,$t).isCancellable()&&(o(oe,$t).removeLastElement(),o(oe,$t).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Hi,{signal:C}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),u.addEventListener("touchmove",k=>{k.timeStamp===o(oe,Co)&&Jn(k)},{signal:C}),t.toggleDrawing(),(T=i._editorUndoBar)==null||T.hide(),o(oe,$t)){t.drawLayer.updateProperties(this._currentDrawId,o(oe,$t).startNew(h,d,w,A,y));return}i.updateUIForDefaultProperties(this),b(oe,$t,this.createDrawerInstance(h,d,w,A,y)),b(oe,xo,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(o(oe,xo).toSVGProperties(),o(oe,$t).defaultSVGProperties),!0,!1)}static _drawMove(t){var u;if(b(oe,Co,-1),!o(oe,$t))return;const{offsetX:i,offsetY:r,pointerId:a}=t;if(o(oe,Kr)===a){if(((u=o(oe,Jr))==null?void 0:u.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(oe,$t).add(i,r)),b(oe,Co,t.timeStamp),Jn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,b(oe,$t,null),b(oe,xo,null),b(oe,Qr,null),b(oe,Co,NaN)),o(oe,Eo)&&(o(oe,Eo).abort(),b(oe,Eo,null),b(oe,Kr,NaN),b(oe,Jr,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t&&i.drawLayer.updateProperties(this._currentDrawId,o(oe,$t).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=o(oe,$t),a=this._currentDrawId,u=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,r.setLastElement(u))},undo:()=>{i.drawLayer.updateProperties(a,r.removeLastElement())},mustExec:!1,type:ze.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ze.DRAW_STEP),!o(oe,$t).isEmpty()){const{pageDimensions:[r,a],scale:u}=i,h=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(oe,$t).getOutlines(r*u,a*u,u,this._INNER_MARGIN),drawingOptions:o(oe,xo),mustBeCommitted:!t});return this._cleanup(!0),h}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,r,a,u,h){Qe("Not implemented")}static async deserialize(t,i,r){var y,w;const{rawDims:{pageWidth:a,pageHeight:u,pageX:h,pageY:d}}=i.viewport,p=this.deserializeDraw(h,d,a,u,this._INNER_MARGIN,t),g=await super.deserialize(t,i,r);return g.createDrawingOptions(t),x(y=g,Be,xv).call(y,{drawOutlines:p}),x(w=g,Be,Bc).call(w),g.onScaleChanging(),g.rotate(),g}serializeDraw(t){const[i,r]=this.pageTranslation,[a,u]=this.pageDimensions;return o(this,Xn).serialize([i,r,a,u],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Xn=new WeakMap,wu=new WeakMap,$t=new WeakMap,Eo=new WeakMap,xo=new WeakMap,Kr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Co=new WeakMap,Be=new WeakSet,xv=function({drawOutlines:t,drawId:i,drawingOptions:r}){b(this,Xn,t),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=x(this,Be,Cv).call(this,t,this.parent),x(this,Be,jc).call(this,t.box)},Cv=function(t,i){const{id:r}=i.drawLayer.draw(oe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},kv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Bc=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=x(this,Be,Cv).call(this,o(this,Xn),t)}},f_=function([t,i,r,a]){const{parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[i,1-t,r*(h/u),a*(u/h)];case 180:return[1-t,1-i,r,a];case 270:return[1-i,t,r*(h/u),a*(u/h)];default:return[t,i,r,a]}},wp=function(){const{x:t,y:i,width:r,height:a,parentDimensions:[u,h],rotation:d}=this;switch(d){case 90:return[1-i,t,r*(u/h),a*(h/u)];case 180:return[1-t,1-i,r,a];case 270:return[i,1-t,r*(u/h),a*(h/u)];default:return[t,i,r,a]}},jc=function(t){if([this.x,this.y,this.width,this.height]=x(this,Be,f_).call(this,t),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},Al=function(){const{x:t,y:i,width:r,height:a,rotation:u,parentRotation:h,parentDimensions:[d,p]}=this;switch((u*4+h)/90){case 1:return[1-i-a,t,a,r];case 2:return[1-t-r,1-i-a,r,a];case 3:return[i,1-t-r,a,r];case 4:return[t,i-r*(d/p),a*(p/d),r*(d/p)];case 5:return[1-i,t,r*(d/p),a*(p/d)];case 6:return[1-t-a*(p/d),1-i,a*(p/d),r*(d/p)];case 7:return[i-r*(d/p),1-t-a*(p/d),r*(d/p),a*(p/d)];case 8:return[t-r,i-a,r,a];case 9:return[1-i,t-r,a,r];case 10:return[1-t,1-i,r,a];case 11:return[i-a,1-t,a,r];case 12:return[t-a*(p/d),i,a*(p/d),r*(d/p)];case 13:return[1-i-r*(d/p),t-a*(p/d),r*(d/p),a*(p/d)];case 14:return[1-t,1-i-r*(d/p),a*(p/d),r*(d/p)];case 15:return[i,1-t,r*(d/p),a*(p/d)];default:return[t,i,r,a]}},Se(oe,"_currentDrawId",-1),Se(oe,"_currentParent",null),E(oe,$t,null),E(oe,Eo,null),E(oe,xo,null),E(oe,Kr,NaN),E(oe,Qr,null),E(oe,Jr,null),E(oe,Co,NaN),Se(oe,"_INNER_MARGIN",3);let Ev=oe;var ls,zt,Ht,ko,Au,gn,Gt,di,To,Po,Ro,bu,Ap;class AP{constructor(e,t,i,r,a,u){E(this,bu);E(this,ls,new Float64Array(6));E(this,zt);E(this,Ht);E(this,ko);E(this,Au);E(this,gn);E(this,Gt,"");E(this,di,0);E(this,To,new Ip);E(this,Po);E(this,Ro);b(this,Po,i),b(this,Ro,r),b(this,ko,a),b(this,Au,u),[e,t]=x(this,bu,Ap).call(this,e,t);const h=b(this,zt,[NaN,NaN,NaN,NaN,e,t]);b(this,gn,[e,t]),b(this,Ht,[{line:h,points:o(this,gn)}]),o(this,ls).set(h,0)}updateProperty(e,t){e==="stroke-width"&&b(this,Au,t)}isEmpty(){return!o(this,Ht)||o(this,Ht).length===0}isCancellable(){return o(this,gn).length<=10}add(e,t){[e,t]=x(this,bu,Ap).call(this,e,t);const[i,r,a,u]=o(this,ls).subarray(2,6),h=e-a,d=t-u;return Math.hypot(o(this,Po)*h,o(this,Ro)*d)<=2?null:(o(this,gn).push(e,t),isNaN(i)?(o(this,ls).set([a,u,e,t],2),o(this,zt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(o(this,ls)[0])&&o(this,zt).splice(6,6),o(this,ls).set([i,r,a,u,e,t],0),o(this,zt).push(...ae.createBezierPoints(i,r,a,u,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(o(this,gn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,r,a){b(this,Po,i),b(this,Ro,r),b(this,ko,a),[e,t]=x(this,bu,Ap).call(this,e,t);const u=b(this,zt,[NaN,NaN,NaN,NaN,e,t]);b(this,gn,[e,t]);const h=o(this,Ht).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),o(this,Ht).push({line:u,points:o(this,gn)}),o(this,ls).set(u,0),b(this,di,0),this.toSVGPath(),null}getLastElement(){return o(this,Ht).at(-1)}setLastElement(e){return o(this,Ht)?(o(this,Ht).push(e),b(this,zt,e.line),b(this,gn,e.points),b(this,di,0),{path:{d:this.toSVGPath()}}):o(this,To).setLastElement(e)}removeLastElement(){if(!o(this,Ht))return o(this,To).removeLastElement();o(this,Ht).pop(),b(this,Gt,"");for(let e=0,t=o(this,Ht).length;e<t;e++){const{line:i,points:r}=o(this,Ht)[e];b(this,zt,i),b(this,gn,r),b(this,di,0),this.toSVGPath()}return{path:{d:o(this,Gt)}}}toSVGPath(){const e=ae.svgRound(o(this,zt)[4]),t=ae.svgRound(o(this,zt)[5]);if(o(this,gn).length===2)return b(this,Gt,`${o(this,Gt)} M ${e} ${t} Z`),o(this,Gt);if(o(this,gn).length<=6){const r=o(this,Gt).lastIndexOf("M");b(this,Gt,`${o(this,Gt).slice(0,r)} M ${e} ${t}`),b(this,di,6)}if(o(this,gn).length===4){const r=ae.svgRound(o(this,zt)[10]),a=ae.svgRound(o(this,zt)[11]);return b(this,Gt,`${o(this,Gt)} L ${r} ${a}`),b(this,di,12),o(this,Gt)}const i=[];o(this,di)===0&&(i.push(`M ${e} ${t}`),b(this,di,6));for(let r=o(this,di),a=o(this,zt).length;r<a;r+=6){const[u,h,d,p,g,y]=o(this,zt).slice(r,r+6).map(ae.svgRound);i.push(`C${u} ${h} ${d} ${p} ${g} ${y}`)}return b(this,Gt,o(this,Gt)+i.join(" ")),b(this,di,o(this,zt).length),o(this,Gt)}getOutlines(e,t,i,r){const a=o(this,Ht).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),o(this,To).build(o(this,Ht),e,t,i,o(this,ko),o(this,Au),r),b(this,ls,null),b(this,zt,null),b(this,Ht,null),b(this,Gt,null),o(this,To)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ls=new WeakMap,zt=new WeakMap,Ht=new WeakMap,ko=new WeakMap,Au=new WeakMap,gn=new WeakMap,Gt=new WeakMap,di=new WeakMap,To=new WeakMap,Po=new WeakMap,Ro=new WeakMap,bu=new WeakSet,Ap=function(e,t){return ae._normalizePoint(e,t,o(this,Po),o(this,Ro),o(this,ko))};var mn,Ad,bd,qn,us,cs,Su,_u,Eu,qt,ks,p_,g_,m_;const f0=class f0 extends ae{constructor(){super(...arguments);E(this,qt);E(this,mn);E(this,Ad,0);E(this,bd);E(this,qn);E(this,us);E(this,cs);E(this,Su);E(this,_u);E(this,Eu)}build(t,i,r,a,u,h,d){b(this,us,i),b(this,cs,r),b(this,Su,a),b(this,_u,u),b(this,Eu,h),b(this,bd,d??0),b(this,qn,t),x(this,qt,g_).call(this)}setLastElement(t){return o(this,qn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,qn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of o(this,qn)){if(t.push(`M${ae.svgRound(i[4])} ${ae.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12){t.push(`L${ae.svgRound(i[10])} ${ae.svgRound(i[11])}`);continue}for(let r=6,a=i.length;r<a;r+=6){const[u,h,d,p,g,y]=i.subarray(r,r+6).map(ae.svgRound);t.push(`C${u} ${h} ${d} ${p} ${g} ${y}`)}}return t.join("")}serialize([t,i,r,a],u){const h=[],d=[],[p,g,y,w]=x(this,qt,p_).call(this);let A,S,C,T,k,R,M,D,$;switch(o(this,_u)){case 0:$=ae._rescale,A=t,S=i+a,C=r,T=-a,k=t+p*r,R=i+(1-g-w)*a,M=t+(p+y)*r,D=i+(1-g)*a;break;case 90:$=ae._rescaleAndSwap,A=t,S=i,C=r,T=a,k=t+g*r,R=i+p*a,M=t+(g+w)*r,D=i+(p+y)*a;break;case 180:$=ae._rescale,A=t+r,S=i,C=-r,T=a,k=t+(1-p-y)*r,R=i+g*a,M=t+(1-p)*r,D=i+(g+w)*a;break;case 270:$=ae._rescaleAndSwap,A=t+r,S=i+a,C=-r,T=-a,k=t+(1-g-w)*r,R=i+(1-p-y)*a,M=t+(1-g)*r,D=i+(1-p)*a;break}for(const{line:j,points:B}of o(this,qn))h.push($(j,A,S,C,T,u?new Array(j.length):null)),d.push($(B,A,S,C,T,u?new Array(B.length):null));return{lines:h,points:d,rect:[k,R,M,D]}}static deserialize(t,i,r,a,u,{paths:{lines:h,points:d},rotation:p,thickness:g}){const y=[];let w,A,S,C,T;switch(p){case 0:T=ae._rescale,w=-t/r,A=i/a+1,S=1/r,C=-1/a;break;case 90:T=ae._rescaleAndSwap,w=-i/a,A=-t/r,S=1/a,C=1/r;break;case 180:T=ae._rescale,w=t/r+1,A=-i/a,S=-1/r,C=1/a;break;case 270:T=ae._rescaleAndSwap,w=i/a+1,A=t/r+1,S=-1/a,C=-1/r;break}if(!h){h=[];for(const R of d){const M=R.length;if(M===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1]]));continue}if(M===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,R[0],R[1],NaN,NaN,NaN,NaN,R[2],R[3]]));continue}const D=new Float32Array(3*(M-2));h.push(D);let[$,j,B,K]=R.subarray(0,4);D.set([NaN,NaN,NaN,NaN,$,j],0);for(let Z=4;Z<M;Z+=2){const me=R[Z],de=R[Z+1];D.set(ae.createBezierPoints($,j,B,K,me,de),(Z-2)*3),[$,j,B,K]=[B,K,me,de]}}}for(let R=0,M=h.length;R<M;R++)y.push({line:T(h[R].map(D=>D??NaN),w,A,S,C),points:T(d[R].map(D=>D??NaN),w,A,S,C)});const k=new f0;return k.build(y,r,a,1,p,g,u),k}get box(){return o(this,mn)}updateProperty(t,i){return t==="stroke-width"?x(this,qt,m_).call(this,i):null}updateParentDimensions([t,i],r){const[a,u]=x(this,qt,ks).call(this);b(this,us,t),b(this,cs,i),b(this,Su,r);const[h,d]=x(this,qt,ks).call(this),p=h-a,g=d-u,y=o(this,mn);return y[0]-=p,y[1]-=g,y[2]+=2*p,y[3]+=2*g,y}updateRotation(t){return b(this,Ad,t),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,mn).map(ae.svgRound).join(" ")}get defaultProperties(){const[t,i]=o(this,mn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ae.svgRound(t)} ${ae.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=o(this,mn);let r=0,a=0,u=0,h=0,d=0,p=0;switch(o(this,Ad)){case 90:a=i/t,u=-t/i,d=t;break;case 180:r=-1,h=-1,d=t,p=i;break;case 270:a=-i/t,u=t/i,p=i;break;default:return""}return`matrix(${r} ${a} ${u} ${h} ${ae.svgRound(d)} ${ae.svgRound(p)})`}getPathResizingSVGProperties([t,i,r,a]){const[u,h]=x(this,qt,ks).call(this),[d,p,g,y]=o(this,mn);if(Math.abs(g-u)<=ae.PRECISION||Math.abs(y-h)<=ae.PRECISION){const T=t+r/2-(d+g/2),k=i+a/2-(p+y/2);return{path:{"transform-origin":`${ae.svgRound(t)} ${ae.svgRound(i)}`,transform:`${this.rotationTransform} translate(${T} ${k})`}}}const w=(r-2*u)/(g-2*u),A=(a-2*h)/(y-2*h),S=g/r,C=y/a;return{path:{"transform-origin":`${ae.svgRound(d)} ${ae.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${C}) translate(${ae.svgRound(u)} ${ae.svgRound(h)}) scale(${w} ${A}) translate(${ae.svgRound(-u)} ${ae.svgRound(-h)})`}}}getPathResizedSVGProperties([t,i,r,a]){const[u,h]=x(this,qt,ks).call(this),d=o(this,mn),[p,g,y,w]=d;if(d[0]=t,d[1]=i,d[2]=r,d[3]=a,Math.abs(y-u)<=ae.PRECISION||Math.abs(w-h)<=ae.PRECISION){const k=t+r/2-(p+y/2),R=i+a/2-(g+w/2);for(const{line:M,points:D}of o(this,qn))ae._translate(M,k,R,M),ae._translate(D,k,R,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ae.svgRound(t)} ${ae.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*u)/(y-2*u),S=(a-2*h)/(w-2*h),C=-A*(p+u)+t+u,T=-S*(g+h)+i+h;if(A!==1||S!==1||C!==0||T!==0)for(const{line:k,points:R}of o(this,qn))ae._rescale(k,C,T,A,S,k),ae._rescale(R,C,T,A,S,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ae.svgRound(t)} ${ae.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],r){const[a,u]=r,h=o(this,mn),d=t-h[0],p=i-h[1];if(o(this,us)===a&&o(this,cs)===u)for(const{line:g,points:y}of o(this,qn))ae._translate(g,d,p,g),ae._translate(y,d,p,y);else{const g=o(this,us)/a,y=o(this,cs)/u;b(this,us,a),b(this,cs,u);for(const{line:w,points:A}of o(this,qn))ae._rescale(w,d,p,g,y,w),ae._rescale(A,d,p,g,y,A);h[2]*=g,h[3]*=y}return h[0]=t,h[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ae.svgRound(t)} ${ae.svgRound(i)}`}}}get defaultSVGProperties(){const t=o(this,mn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ae.svgRound(t[0])} ${ae.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};mn=new WeakMap,Ad=new WeakMap,bd=new WeakMap,qn=new WeakMap,us=new WeakMap,cs=new WeakMap,Su=new WeakMap,_u=new WeakMap,Eu=new WeakMap,qt=new WeakSet,ks=function(t=o(this,Eu)){const i=o(this,bd)+t/2*o(this,Su);return o(this,_u)%180===0?[i/o(this,us),i/o(this,cs)]:[i/o(this,cs),i/o(this,us)]},p_=function(){const[t,i,r,a]=o(this,mn),[u,h]=x(this,qt,ks).call(this,0);return[t+u,i+h,r-2*u,a-2*h]},g_=function(){const t=b(this,mn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of o(this,qn)){if(a.length<=12){for(let d=4,p=a.length;d<p;d+=6){const[g,y]=a.subarray(d,d+2);t[0]=Math.min(t[0],g),t[1]=Math.min(t[1],y),t[2]=Math.max(t[2],g),t[3]=Math.max(t[3],y)}continue}let u=a[4],h=a[5];for(let d=6,p=a.length;d<p;d+=6){const[g,y,w,A,S,C]=a.subarray(d,d+6);ye.bezierBoundingBox(u,h,g,y,w,A,S,C,t),u=S,h=C}}const[i,r]=x(this,qt,ks).call(this);t[0]=Math.min(1,Math.max(0,t[0]-i)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+i)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},m_=function(t){const[i,r]=x(this,qt,ks).call(this);b(this,Eu,t);const[a,u]=x(this,qt,ks).call(this),[h,d]=[a-i,u-r],p=o(this,mn);return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p};let Ip=f0;var xu;const p0=class p0 extends wP{constructor(t){super();E(this,xu);b(this,xu,t),super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??(i=this["stroke-width"]),i*=o(this,xu).realScale),super.updateSVGProperty(t,i)}clone(){const t=new p0(o(this,xu));return t.updateAll(this),t}};xu=new WeakMap;let Tv=p0;var Qp,y_;const Sl=class Sl extends Ev{constructor(t){super({...t,name:"inkEditor"});E(this,Qp);this._willKeepAspectRatio=!0}static initialize(t,i){dt.initialize(t,i),this._defaultDrawingOptions=new Tv(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[ze.INK_THICKNESS,"stroke-width"],[ze.INK_COLOR,"stroke"],[ze.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,r,a,u){return new AP(t,i,r,a,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,r,a,u,h){return Ip.deserialize(t,i,r,a,u,h)}static async deserialize(t,i,r){let a=null;if(t instanceof l0){const{data:{inkLists:h,rect:d,rotation:p,id:g,color:y,opacity:w,borderStyle:{rawWidth:A},popupRef:S},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:Pe.INK,color:Array.from(y),thickness:A,opacity:w,paths:{points:h},boxes:null,pageIndex:C-1,rect:d.slice(0),rotation:p,id:g,deleted:!1,popupRef:S}}const u=await super.deserialize(t,i,r);return u.annotationElementId=t.id||null,u._initialData=a,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:r}){this._drawingOptions=Sl.getDefaultDrawingOptions({stroke:ye.makeHexColor(...t),"stroke-width":i,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:a}=this.serializeDraw(t),{_drawingOptions:{stroke:u,"stroke-opacity":h,"stroke-width":d}}=this,p={annotationType:Pe.INK,color:dt._colorManager.convert(u),opacity:h,thickness:d,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?p:this.annotationElementId&&!x(this,Qp,y_).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(t){const{points:i,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Qp=new WeakSet,y_=function(t){const{color:i,thickness:r,opacity:a,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((h,d)=>h!==i[d])||t.thickness!==r||t.opacity!==a||t.pageIndex!==u},Se(Sl,"_type","ink"),Se(Sl,"_editorType",Pe.INK),Se(Sl,"_defaultDrawingOptions",null);let Pv=Sl;var ht,Xt,Zr,Qs,ea,Cu,hs,ds,Yn,ku,Ue,Uc,Vc,bp,Lv,Sp,Mv,_p,v_;const Gc=class Gc extends dt{constructor(t){super({...t,name:"stampEditor"});E(this,Ue);E(this,ht,null);E(this,Xt,null);E(this,Zr,null);E(this,Qs,null);E(this,ea,null);E(this,Cu,"");E(this,hs,null);E(this,ds,null);E(this,Yn,!1);E(this,ku,!1);b(this,Qs,t.bitmapUrl),b(this,ea,t.bitmapFile)}static initialize(t,i){dt.initialize(t,i)}static get supportedTypes(){return Fe(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Fe(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Pe.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:u,height:h}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:a,width:u,height:h,channels:a.length/(u*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t;o(this,Xt)&&(b(this,ht,null),this._uiManager.imageManager.deleteId(o(this,Xt)),(t=o(this,hs))==null||t.remove(),b(this,hs,null),o(this,ds)&&(clearTimeout(o(this,ds)),b(this,ds,null))),super.remove()}rebuild(){if(!this.parent){o(this,Xt)&&x(this,Ue,bp).call(this);return}super.rebuild(),this.div!==null&&(o(this,Xt)&&o(this,hs)===null&&x(this,Ue,bp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(o(this,Zr)||o(this,ht)||o(this,Qs)||o(this,ea)||o(this,Xt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),o(this,ht)?x(this,Ue,Lv).call(this):x(this,Ue,bp).call(this),this.width&&!this.annotationElementId){const[r,a]=this.parentDimensions;this.setAt(t*r,i*a,this.width*r,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,ds)!==null&&clearTimeout(o(this,ds)),b(this,ds,setTimeout(()=>{b(this,ds,null),x(this,Ue,Mv).call(this)},200))}copyCanvas(t,i,r=!1){var A;t||(t=224);const{width:a,height:u}=o(this,ht),h=new Ty;let d=o(this,ht),p=a,g=u,y=null;if(i){if(a>i||u>i){const K=Math.min(i/a,i/u);p=Math.floor(a*K),g=Math.floor(u*K)}y=document.createElement("canvas");const S=y.width=Math.ceil(p*h.sx),C=y.height=Math.ceil(g*h.sy);o(this,Yn)||(d=x(this,Ue,Sp).call(this,S,C));const T=y.getContext("2d");T.filter=this._uiManager.hcmFilter;let k="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",R="#42414d");const M=15,D=M*h.sx,$=M*h.sy,j=new OffscreenCanvas(D*2,$*2),B=j.getContext("2d");B.fillStyle=k,B.fillRect(0,0,D*2,$*2),B.fillStyle=R,B.fillRect(0,0,D,$),B.fillRect(D,$,D,$),T.fillStyle=T.createPattern(j,"repeat"),T.fillRect(0,0,S,C),T.drawImage(d,0,0,d.width,d.height,0,0,S,C)}let w=null;if(r){let S,C;if(h.symmetric&&d.width<t&&d.height<t)S=d.width,C=d.height;else if(d=o(this,ht),a>t||u>t){const R=Math.min(t/a,t/u);S=Math.floor(a*R),C=Math.floor(u*R),o(this,Yn)||(d=x(this,Ue,Sp).call(this,S,C))}const k=new OffscreenCanvas(S,C).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,S,C),w={width:S,height:C,data:k.getImageData(0,0,S,C).data}}return{canvas:y,width:p,height:g,imageData:w}}getImageForAltText(){return o(this,hs)}static async deserialize(t,i,r){var C;let a=null;if(t instanceof z1){const{data:{rect:T,rotation:k,id:R,structParent:M,popupRef:D},container:$,parent:{page:{pageNumber:j}}}=t,B=$.querySelector("canvas"),K=r.imageManager.getFromCanvas($.id,B);B.remove();const Z=((C=await i._structTree.getAriaAttributes(`${e0}${R}`))==null?void 0:C.get("aria-label"))||"";a=t={annotationType:Pe.STAMP,bitmapId:K.id,bitmap:K.bitmap,pageIndex:j-1,rect:T.slice(0),rotation:k,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:M,popupRef:D}}const u=await super.deserialize(t,i,r),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:g,isSvg:y,accessibilityData:w}=t;g&&r.imageManager.isValidId(g)?(b(u,Xt,g),d&&b(u,ht,d)):b(u,Qs,p),b(u,Yn,y);const[A,S]=u.pageDimensions;return u.width=(h[2]-h[0])/A,u.height=(h[3]-h[1])/S,u.annotationElementId=t.id||null,w&&(u.altTextData=w),u._initialData=a,b(u,ku,!!a),u}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Pe.STAMP,bitmapId:o(this,Xt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,Yn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=x(this,Ue,_p).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:a,altText:u}=this.serializeAltText(!1);if(!a&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const d=x(this,Ue,v_).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const h=o(this,Yn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(o(this,Xt)))i.stamps.set(o(this,Xt),{area:h,serialized:r}),r.bitmap=x(this,Ue,_p).call(this,!1);else if(o(this,Yn)){const d=i.stamps.get(o(this,Xt));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=x(this,Ue,_p).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ht=new WeakMap,Xt=new WeakMap,Zr=new WeakMap,Qs=new WeakMap,ea=new WeakMap,Cu=new WeakMap,hs=new WeakMap,ds=new WeakMap,Yn=new WeakMap,ku=new WeakMap,Ue=new WeakSet,Uc=function(t,i=!1){if(!t){this.remove();return}b(this,ht,t.bitmap),i||(b(this,Xt,t.id),b(this,Yn,t.isSvg)),t.file&&b(this,Cu,t.file.name),x(this,Ue,Lv).call(this)},Vc=function(){if(b(this,Zr,null),this._uiManager.enableWaiting(!1),!!o(this,hs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ht)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ht)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},bp=function(){if(o(this,Xt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Xt)).then(r=>x(this,Ue,Uc).call(this,r,!0)).finally(()=>x(this,Ue,Vc).call(this));return}if(o(this,Qs)){const r=o(this,Qs);b(this,Qs,null),this._uiManager.enableWaiting(!0),b(this,Zr,this._uiManager.imageManager.getFromUrl(r).then(a=>x(this,Ue,Uc).call(this,a)).finally(()=>x(this,Ue,Vc).call(this)));return}if(o(this,ea)){const r=o(this,ea);b(this,ea,null),this._uiManager.enableWaiting(!0),b(this,Zr,this._uiManager.imageManager.getFromFile(r).then(a=>x(this,Ue,Uc).call(this,a)).finally(()=>x(this,Ue,Vc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Gc.supportedTypesStr;const i=this._uiManager._signal;b(this,Zr,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,Ue,Uc).call(this,a)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>x(this,Ue,Vc).call(this))),t.click()},Lv=function(){var y;const{div:t}=this;let{width:i,height:r}=o(this,ht);const[a,u]=this.pageDimensions,h=.75;if(this.width)i=this.width*a,r=this.height*u;else if(i>h*a||r>h*u){const w=Math.min(h*a/i,h*u/r);i*=w,r*=w}const[d,p]=this.parentDimensions;this.setDims(i*d/a,r*p/u),this._uiManager.enableWaiting(!1);const g=b(this,hs,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=i/a,this.height=r/u,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),x(this,Ue,Mv).call(this),o(this,ku)||(this.parent.addUndoableEditor(this),b(this,ku,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,Cu)&&g.setAttribute("aria-label",o(this,Cu))},Sp=function(t,i){const{width:r,height:a}=o(this,ht);let u=r,h=a,d=o(this,ht);for(;u>2*t||h>2*i;){const p=u,g=h;u>2*t&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),h>2*i&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const y=new OffscreenCanvas(u,h);y.getContext("2d").drawImage(d,0,0,p,g,0,0,u,h),d=y.transferToImageBitmap()}return d},Mv=function(){const[t,i]=this.parentDimensions,{width:r,height:a}=this,u=new Ty,h=Math.ceil(r*t*u.sx),d=Math.ceil(a*i*u.sy),p=o(this,hs);if(!p||p.width===h&&p.height===d)return;p.width=h,p.height=d;const g=o(this,Yn)?o(this,ht):x(this,Ue,Sp).call(this,h,d),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,h,d)},_p=function(t){if(t){if(o(this,Yn)){const a=this._uiManager.imageManager.getSvgUrl(o(this,Xt));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=o(this,ht),i.getContext("2d").drawImage(o(this,ht),0,0),i.toDataURL()}if(o(this,Yn)){const[i,r]=this.pageDimensions,a=Math.round(this.width*i*oa.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*oa.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(a,u);return h.getContext("2d").drawImage(o(this,ht),0,0,o(this,ht).width,o(this,ht).height,0,0,a,u),h.transferToImageBitmap()}return structuredClone(o(this,ht))},v_=function(t){var h;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,a=t.pageIndex===i,u=(((h=t.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&u,isSameAltText:u}},Se(Gc,"_type","stamp"),Se(Gc,"_editorType",Pe.STAMP);let Rv=Gc;var Lo,Tu,fs,ta,Js,fi,na,Pu,Mo,Fi,Zs,an,er,ge,ia,at,w_,Ki,Nv,Dv,Ep;const Ei=class Ei{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:u,drawLayer:h,textLayer:d,viewport:p,l10n:g}){E(this,at);E(this,Lo);E(this,Tu,!1);E(this,fs,null);E(this,ta,null);E(this,Js,null);E(this,fi,new Map);E(this,na,!1);E(this,Pu,!1);E(this,Mo,!1);E(this,Fi,null);E(this,Zs,null);E(this,an,null);E(this,er,null);E(this,ge);const y=[...o(Ei,ia).values()];if(!Ei._initialized){Ei._initialized=!0;for(const w of y)w.initialize(g,e)}e.registerEditorTypes(y),b(this,ge,e),this.pageIndex=t,this.div=i,b(this,Lo,a),b(this,fs,u),this.viewport=p,b(this,an,d),this.drawLayer=h,this._structTree=r,o(this,ge).addLayer(this)}get isEmpty(){return o(this,fi).size===0}get isInvisible(){return this.isEmpty&&o(this,ge).getMode()===Pe.NONE}updateToolbar(e){o(this,ge).updateToolbar(e)}updateMode(e=o(this,ge).getMode()){switch(x(this,at,Ep).call(this),e){case Pe.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of o(Ei,ia).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=o(this,an))==null?void 0:t.div)}setEditingState(e){o(this,ge).setEditingState(e)}addCommands(e){o(this,ge).addCommands(e)}cleanUndoStack(e){o(this,ge).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=o(this,fs))==null||t.div.classList.toggle("disabled",!e)}async enable(){b(this,Mo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of o(this,fi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(o(this,ge).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!o(this,fs)){b(this,Mo,!1);return}const t=o(this,fs).getEditableAnnotations();for(const i of t){if(i.hide(),o(this,ge).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}b(this,Mo,!1)}disable(){var r;b(this,Pu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const a of o(this,fi).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){e.set(a.annotationElementId,a);continue}else t.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}if(o(this,fs)){const a=o(this,fs).getEditableAnnotations();for(const u of a){const{id:h}=u.data;if(o(this,ge).isDeletedAnnotationElement(h))continue;let d=t.get(h);if(d){d.resetAnnotationElement(u),d.show(!1),u.show();continue}d=e.get(h),d&&(o(this,ge).addChangedExistingAnnotation(d),d.renderAnnotationElement(u)&&d.show(!1)),u.show()}}x(this,at,Ep).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of o(Ei,ia).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,Pu,!1)}getEditableAnnotation(e){var t;return((t=o(this,fs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){o(this,ge).getActive()!==e&&o(this,ge).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=o(this,an))!=null&&e.div&&!o(this,er)){b(this,er,new AbortController);const t=o(this,ge).combinedSignal(o(this,er));o(this,an).div.addEventListener("pointerdown",x(this,at,w_).bind(this),{signal:t}),o(this,an).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=o(this,an))!=null&&e.div&&o(this,er)&&(o(this,er).abort(),b(this,er,null),o(this,an).div.classList.remove("highlighting"))}enableClick(){if(o(this,ta))return;b(this,ta,new AbortController);const e=o(this,ge).combinedSignal(o(this,ta));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=o(this,ta))==null||e.abort(),b(this,ta,null)}attach(e){o(this,fi).set(e.id,e);const{annotationElementId:t}=e;t&&o(this,ge).isDeletedAnnotationElement(t)&&o(this,ge).removeDeletedAnnotationElement(e)}detach(e){var t;o(this,fi).delete(e.id),(t=o(this,Lo))==null||t.removePointerInTextLayer(e.contentDiv),!o(this,Pu)&&e.annotationElementId&&o(this,ge).addDeletedAnnotationElement(e)}remove(e){this.detach(e),o(this,ge).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(o(this,ge).addDeletedAnnotationElement(e.annotationElementId),dt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),o(this,ge).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!o(this,Mo)),o(this,ge).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!o(this,Js)&&(e._focusEventsAllowed=!1,b(this,Js,setTimeout(()=>{b(this,Js,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:o(this,ge)._signal}),t.focus())},0))),e._structTreeParentId=(i=o(this,Lo))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return o(this,ge).getId()}combinedSignal(e){return o(this,ge).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=o(this,at,Ki))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){o(this,ge).updateToolbar(e),o(this,ge).updateMode(e);const{offsetX:i,offsetY:r}=x(this,at,Dv).call(this),a=this.getNextId(),u=x(this,at,Nv).call(this,{parent:this,id:a,x:i,y:r,uiManager:o(this,ge),isCentered:!0,...t});u&&this.add(u)}async deserialize(e){var t;return await((t=o(Ei,ia).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,o(this,ge)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),a=x(this,at,Nv).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:o(this,ge),isCentered:t,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(x(this,at,Dv).call(this),!0)}setSelected(e){o(this,ge).setSelected(e)}toggleSelected(e){o(this,ge).toggleSelected(e)}unselect(e){o(this,ge).unselect(e)}pointerup(e){var i;const{isMac:t}=vn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&o(this,na)&&(b(this,na,!1),!((i=o(this,at,Ki))!=null&&i.isDrawer&&o(this,at,Ki).supportMultipleDrawings))){if(!o(this,Tu)){b(this,Tu,!0);return}if(o(this,ge).getMode()===Pe.STAMP){o(this,ge).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(o(this,ge).getMode()===Pe.HIGHLIGHT&&this.enableTextSelection(),o(this,na)){b(this,na,!1);return}const{isMac:t}=vn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(b(this,na,!0),(r=o(this,at,Ki))!=null&&r.isDrawer){this.startDrawingSession(e);return}const i=o(this,ge).getActive();b(this,Tu,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus(),o(this,Fi)){o(this,at,Ki).startDrawing(this,o(this,ge),!1,e);return}o(this,ge).setCurrentDrawingSession(this),b(this,Fi,new AbortController);const t=o(this,ge).combinedSignal(o(this,Fi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(b(this,Zs,null),this.commitOrRemove())},{signal:t}),o(this,at,Ki).startDrawing(this,o(this,ge),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&b(this,Zs,t);return}o(this,Zs)&&setTimeout(()=>{var t;(t=o(this,Zs))==null||t.focus(),b(this,Zs,null)},0)}endDrawingSession(e=!1){return o(this,Fi)?(o(this,ge).setCurrentDrawingSession(null),o(this,Fi).abort(),b(this,Fi,null),b(this,Zs,null),o(this,at,Ki).endDrawing(e)):null}findNewParent(e,t,i){const r=o(this,ge).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return o(this,Fi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,Fi)&&o(this,at,Ki).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=o(this,ge).getActive())==null?void 0:e.parent)===this&&(o(this,ge).commitOrRemove(),o(this,ge).setActiveEditor(null)),o(this,Js)&&(clearTimeout(o(this,Js)),b(this,Js,null));for(const i of o(this,fi).values())(t=o(this,Lo))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,o(this,fi).clear(),o(this,ge).removeLayer(this)}render({viewport:e}){this.viewport=e,Do(this.div,e);for(const t of o(this,ge).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){o(this,ge).commitOrRemove(),x(this,at,Ep).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Do(this.div,{rotation:i}),t!==i)for(const r of o(this,fi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return o(this,ge).viewParameters.realScale}};Lo=new WeakMap,Tu=new WeakMap,fs=new WeakMap,ta=new WeakMap,Js=new WeakMap,fi=new WeakMap,na=new WeakMap,Pu=new WeakMap,Mo=new WeakMap,Fi=new WeakMap,Zs=new WeakMap,an=new WeakMap,er=new WeakMap,ge=new WeakMap,ia=new WeakMap,at=new WeakSet,w_=function(e){o(this,ge).unselectAll();const{target:t}=e;if(t===o(this,an).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&o(this,an).div.contains(t)){const{isMac:i}=vn.platform;if(e.button!==0||e.ctrlKey&&i)return;o(this,ge).showAllEditors("highlight",!0,!0),o(this,an).div.classList.add("free"),this.toggleDrawing(),Mp.startHighlighting(this,o(this,ge).direction==="ltr",{target:o(this,an).div,x:e.x,y:e.y}),o(this,an).div.addEventListener("pointerup",()=>{o(this,an).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,ge)._signal}),e.preventDefault()}},Ki=function(){return o(Ei,ia).get(o(this,ge).getMode())},Nv=function(e){const t=o(this,at,Ki);return t?new t.prototype.constructor(e):null},Dv=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,e),u=Math.max(0,t),h=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+r),p=(a+h)/2-e,g=(u+d)/2-t,[y,w]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:w}},Ep=function(){for(const e of o(this,fi).values())e.isEmpty()&&e.remove()},Se(Ei,"_initialized",!1),E(Ei,ia,new Map([pv,Pv,Rv,Mp].map(e=>[e._editorType,e])));let Iv=Ei;var Oi,Sd,yn,Io,Jp,A_,ps,Ov,b_,$v;const tn=class tn{constructor({pageIndex:e}){E(this,ps);E(this,Oi,null);E(this,Sd,0);E(this,yn,new Map);E(this,Io,new Map);this.pageIndex=e}setParent(e){if(!o(this,Oi)){b(this,Oi,e);return}if(o(this,Oi)!==e){if(o(this,yn).size>0)for(const t of o(this,yn).values())t.remove(),e.append(t);b(this,Oi,e)}}static get _svgFactory(){return Fe(this,"_svgFactory",new o0)}draw(e,t=!1,i=!1){const r=dn(this,Sd)._++,a=x(this,ps,Ov).call(this),u=tn._svgFactory.createElement("defs");a.append(u);const h=tn._svgFactory.createElement("path");u.append(h);const d=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),t&&o(this,Io).set(r,h);const p=i?x(this,ps,b_).call(this,u,d):null,g=tn._svgFactory.createElement("use");return a.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(a,e),o(this,yn).set(r,a),{id:r,clipPathId:`url(#${p})`}}drawOutline(e,t){const i=dn(this,Sd)._++,r=x(this,ps,Ov).call(this),a=tn._svgFactory.createElement("defs");r.append(a);const u=tn._svgFactory.createElement("path");a.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const y=tn._svgFactory.createElement("mask");a.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const w=tn._svgFactory.createElement("rect");y.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const A=tn._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=tn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),d&&p.setAttribute("mask",`url(#${d})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,e),o(this,yn).set(i,r),i}finalizeDraw(e,t){o(this,Io).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var d;if(!t)return;const{root:i,bbox:r,rootClass:a,path:u}=t,h=typeof e=="number"?o(this,yn).get(e):e;if(h){if(i&&x(this,ps,$v).call(this,h,i),r&&x(d=tn,Jp,A_).call(d,h,r),a){const{classList:p}=h;for(const[g,y]of Object.entries(a))p.toggle(g,y)}if(u){const g=h.firstChild.firstChild;x(this,ps,$v).call(this,g,u)}}}updateParent(e,t){if(t===this)return;const i=o(this,yn).get(e);i&&(o(t,Oi).append(i),o(this,yn).delete(e),o(t,yn).set(e,i))}remove(e){o(this,Io).delete(e),o(this,Oi)!==null&&(o(this,yn).get(e).remove(),o(this,yn).delete(e))}destroy(){b(this,Oi,null);for(const e of o(this,yn).values())e.remove();o(this,yn).clear(),o(this,Io).clear()}};Oi=new WeakMap,Sd=new WeakMap,yn=new WeakMap,Io=new WeakMap,Jp=new WeakSet,A_=function(e,[t,i,r,a]){const{style:u}=e;u.top=`${100*i}%`,u.left=`${100*t}%`,u.width=`${100*r}%`,u.height=`${100*a}%`},ps=new WeakSet,Ov=function(){const e=tn._svgFactory.create(1,1,!0);return o(this,Oi).append(e),e.setAttribute("aria-hidden",!0),e},b_=function(e,t){const i=tn._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=tn._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),r},$v=function(e,t){for(const[i,r]of Object.entries(t))r===null?e.removeAttribute(i):e.setAttribute(i,r)},E(tn,Jp);let Fv=tn;globalThis.pdfjsTestingUtils={HighlightOutliner:mv};Ce.AbortException;Ce.AnnotationEditorLayer;Ce.AnnotationEditorParamsType;Ce.AnnotationEditorType;Ce.AnnotationEditorUIManager;Ce.AnnotationLayer;Ce.AnnotationMode;Ce.ColorPicker;Ce.DOMSVGFactory;Ce.DrawLayer;Ce.FeatureTest;var bP=Ce.GlobalWorkerOptions;Ce.ImageKind;Ce.InvalidPDFException;Ce.MissingPDFException;Ce.OPS;Ce.OutputScale;Ce.PDFDataRangeTransport;Ce.PDFDateString;Ce.PDFWorker;Ce.PasswordResponses;Ce.PermissionFlag;Ce.PixelsPerInch;Ce.RenderingCancelledException;Ce.TextLayer;Ce.TouchManager;Ce.UnexpectedResponseException;Ce.Util;Ce.VerbosityLevel;Ce.XfaLayer;Ce.build;Ce.createValidAbsoluteUrl;Ce.fetchData;Ce.getDocument;Ce.getFilenameFromUrl;Ce.getPdfFilenameFromUrl;Ce.getXfaPageViewport;Ce.isDataScheme;Ce.isPdfFile;Ce.noContextMenu;Ce.normalizeUnicode;Ce.setLayerDimensions;Ce.shadow;Ce.stopEvent;Ce.version;const SP="_showData_1qdgz_1",_P="_imageFile_1qdgz_6",EP="_invoiceInfo_1qdgz_11",xP="_invoiceInfoParagraph_1qdgz_17",CP="_newDataParagraph_1qdgz_23",kP="_mainDiv_1qdgz_29",St={showData:SP,imageFile:_P,invoiceInfo:EP,invoiceInfoParagraph:xP,newDataParagraph:CP,mainDiv:kP};bP.workerSrc="../pdf.worker.mjs";const kc=["nazwę kontrachenta","numer faktury","kwotę faktury","termin płatności","datę faktury"],TP=()=>{const[c,e]=H.useState(null),[t,i]=H.useState(null),[r,a]=H.useState(0),[u,h]=H.useState(null),[d,p]=H.useState([]),[g,y]=H.useState(null),[w,A]=H.useState(null),[S,C]=H.useState(kc[0]),[T,k]=H.useState(!1),[R,M]=H.useState(!0),[D,$]=H.useState(),[j,B]=H.useState(""),K=ue=>{if(ue.target.files){const ve=Array.from(ue.target.files);e({files:ve}),M(!1)}},Z=()=>{Oe(),M(!0)},me=ue=>{const ve=ue.target,X=ue.currentTarget.dataset.key?parseInt(ue.currentTarget.dataset.key):0;i(ve.textContent),a(X),k(!0)},de=async()=>{const ue=new FormData,ve=[];if(!c)return null;Array.from(c.files).forEach(V=>{ue.append("files",V,V.name),console.log(V),ve.push(URL.createObjectURL(V))});const X=ve.map((V,ne)=>{const Q=c.files[ne];return Q.type==="image/jpeg"?le.jsx("img",{width:"1200px",src:V,alt:"uploaded"},ne):Q.type==="application/pdf"?le.jsx("embed",{src:V,type:"application/pdf",className:St.imageFile,height:"700px"},ne):le.jsx("div",{children:"wrong file"})});$(le.jsx("div",{})),h(X);try{console.log("wysyłam");const V=await fetch("https://organizerfaktur.pl/ask",{method:"POST",body:ue});if(V.ok){const ne=await V.json();return console.log("Plik wysłany pomyślnie:",ne.files),ne.files}else console.error("Błąd podczas wysyłania:",V.statusText)}catch(V){console.error("Wystąpił błąd:",V)}},Oe=async()=>{const ue=await de(),ve=ue[0].data.name;if(ue&&ve){const X=ue.map((J,V)=>le.jsxs("div",{children:[le.jsxs("div",{className:St.invoiceInfo,children:[le.jsx("p",{className:St.invoiceInfoParagraph,children:"Nazwa Firmy:"}),le.jsx("p",{className:St.invoiceInfoParagraph,children:J.data.name})]}),le.jsxs("div",{className:St.invoiceInfo,children:[le.jsx("p",{className:St.invoiceInfoParagraph,children:"Numer faktury:"}),le.jsx("p",{className:St.invoiceInfoParagraph,children:J.data.invoiceNo})]}),le.jsxs("div",{className:St.invoiceInfo,children:[le.jsx("p",{className:St.invoiceInfoParagraph,children:"Data faktury:"}),le.jsx("p",{className:St.invoiceInfoParagraph,children:J.data.invoiceDate})]}),le.jsxs("div",{className:St.invoiceInfo,children:[le.jsx("p",{className:St.invoiceInfoParagraph,children:"Kwota:"}),le.jsx("p",{className:St.invoiceInfoParagraph,children:J.data.value})]}),le.jsxs("div",{className:St.invoiceInfo,children:[le.jsx("p",{className:St.invoiceInfoParagraph,children:"Termin płatności:"}),le.jsx("p",{className:St.invoiceInfoParagraph,children:J.data.paymentDate})]})]},V));y(X)}else{let X=ue&&ue[0].data.foundText;console.log(X),X=X.filter(Q=>Q!=""),console.log(X),A(X);const J=le.jsxs(le.Fragment,{children:[le.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),le.jsxs("p",{children:[" zaznacz ",S]})]}),V=X.map((Q,N)=>le.jsx("button",{"data-key":N-1,onClick:me,children:Q})),ne=le.jsx("div",{className:St.invoiceInfo,children:le.jsx("div",{className:St.newDataParagraph,children:V})});$(J),y(ne)}},Me=H.useCallback(async ue=>{try{console.log("wysyłam plik");const ve=await fetch("https://organizerfaktur.pl/newCompanyData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ue)});if(console.log(ue),ve.ok){const X=await ve.json();return console.log("Plik wysłany pomyślnie:",X),X.files}else console.error("Błąd podczas wysyłania:",ve.statusText)}catch(ve){console.error("Wystąpił błąd:",ve)}},[]);return H.useEffect(()=>{if(t&&w&&T&&d.length<5){let ue=!1;k(!1);const ve=d;ve.length===0&&B(w[r+1]),console.log(j);for(let X=0;X<w.length;X++){if(t===w[X]){const J=[w[r-1],w[r]];ve.push(J),p(ve);const V=ve.length;console.log(ve),console.log(kc[V]);const ne=le.jsxs(le.Fragment,{children:[le.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),le.jsxs("p",{children:[" zaznacz ",kc[V]]})]});if($(ne),ve.length===kc.length){const Q={[j]:{name:ve[3]??[],paymentText:ve[3]??[],valueText:ve[2]??[],invoiceNo:ve[1]??[],invoiceDate:ve[4]??[],fullName:j}};console.log(Q),C(kc[0]),console.log(ve),ue=!0;const N=le.jsxs(le.Fragment,{children:[le.jsx("p",{children:" Wszystkie dane zostały zapisane. Kliknij aby wysłać"}),le.jsx("button",{onClick:()=>{console.log("Przekazywane dane:",Q),Me(Q)},children:"Wyślij dane do weryfikacji"})]});$(N)}break}if(ue)break}}},[t,w,Me,r,d,T,j]),le.jsxs("div",{className:St.mainDiv,children:[le.jsx("h1",{children:"Wprowadzanie faktury do bazy danych"}),le.jsx("input",{type:"file",multiple:!0,accept:".pdf,image/*",onChange:K}),le.jsx("button",{onClick:Z,disabled:R,children:"Analizuj Dane"}),g&&le.jsxs("div",{className:St.showData,children:[le.jsxs("div",{children:[le.jsx("h2",{children:"Found Invoice Data:"}),D,g]}),le.jsx("div",{children:u})]})]})},PP=()=>le.jsx("div",{children:le.jsx(Jv,{to:"analizafakturprzelewowych",children:"Przeslij fakutrę przelewową"})}),RP=()=>le.jsxs(jC,{children:[le.jsx(Tc,{path:"/",element:le.jsx(Mb,{to:"/personal-accounting"})}),le.jsx(Tc,{path:"/personal-accounting",element:le.jsx(PP,{})}),le.jsx(Tc,{path:"/personal-accounting/analizafakturprzelewowych",element:le.jsx(TP,{})}),le.jsx(Tc,{path:"*",element:le.jsx(Mb,{to:"/personal-accounting"})})]});kx.createRoot(document.getElementById("root")).render(le.jsx(dk,{children:le.jsx(H.StrictMode,{children:le.jsx(uS,{children:le.jsx(RP,{})})})}));
