var lC=Object.defineProperty;var KA=d=>{throw TypeError(d)};var uC=(d,t,e)=>t in d?lC(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var Ct=(d,t,e)=>uC(d,typeof t!="symbol"?t+"":t,e),Fm=(d,t,e)=>t.has(d)||KA("Cannot "+e);var a=(d,t,e)=>(Fm(d,t,"read from private field"),e?e.call(d):t.get(d)),E=(d,t,e)=>t.has(d)?KA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),A=(d,t,e,i)=>(Fm(d,t,"write to private field"),i?i.call(d,e):t.set(d,e),e),C=(d,t,e)=>(Fm(d,t,"access private method"),e);var fn=(d,t,e,i)=>({set _(r){A(d,t,r,e)},get _(){return a(d,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function cC(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Om={exports:{}},fc={},$m={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function hC(){if(QA)return Dt;QA=1;var d=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,x={};function k(P,$,G){this.props=P,this.context=$,this.refs=x,this.updater=G||b}k.prototype.isReactComponent={},k.prototype.setState=function(P,$){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,$,"setState")},k.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=k.prototype;function M(P,$,G){this.props=P,this.context=$,this.refs=x,this.updater=G||b}var F=M.prototype=new T;F.constructor=M,_(F,k.prototype),F.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,V={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function Q(P,$,G){var it,wt={},ht=null,at=null;if($!=null)for(it in $.ref!==void 0&&(at=$.ref),$.key!==void 0&&(ht=""+$.key),$)j.call($,it)&&!U.hasOwnProperty(it)&&(wt[it]=$[it]);var bt=arguments.length-2;if(bt===1)wt.children=G;else if(1<bt){for(var ot=Array(bt),St=0;St<bt;St++)ot[St]=arguments[St+2];wt.children=ot}if(P&&P.defaultProps)for(it in bt=P.defaultProps,bt)wt[it]===void 0&&(wt[it]=bt[it]);return{$$typeof:d,type:P,key:ht,ref:at,props:wt,_owner:V.current}}function nt(P,$){return{$$typeof:d,type:P.type,key:$,ref:P.ref,props:P.props,_owner:P._owner}}function At(P){return typeof P=="object"&&P!==null&&P.$$typeof===d}function ft(P){var $={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(G){return $[G]})}var Nt=/\/+/g;function Tt(P,$){return typeof P=="object"&&P!==null&&P.key!=null?ft(""+P.key):$.toString(36)}function vt(P,$,G,it,wt){var ht=typeof P;(ht==="undefined"||ht==="boolean")&&(P=null);var at=!1;if(P===null)at=!0;else switch(ht){case"string":case"number":at=!0;break;case"object":switch(P.$$typeof){case d:case t:at=!0}}if(at)return at=P,wt=wt(at),P=it===""?"."+Tt(at,0):it,N(wt)?(G="",P!=null&&(G=P.replace(Nt,"$&/")+"/"),vt(wt,$,G,"",function(St){return St})):wt!=null&&(At(wt)&&(wt=nt(wt,G+(!wt.key||at&&at.key===wt.key?"":(""+wt.key).replace(Nt,"$&/")+"/")+P)),$.push(wt)),1;if(at=0,it=it===""?".":it+":",N(P))for(var bt=0;bt<P.length;bt++){ht=P[bt];var ot=it+Tt(ht,bt);at+=vt(ht,$,G,ot,wt)}else if(ot=w(P),typeof ot=="function")for(P=ot.call(P),bt=0;!(ht=P.next()).done;)ht=ht.value,ot=it+Tt(ht,bt++),at+=vt(ht,$,G,ot,wt);else if(ht==="object")throw $=String(P),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return at}function Bt(P,$,G){if(P==null)return P;var it=[],wt=0;return vt(P,it,"","",function(ht){return $.call(G,ht,wt++)}),it}function J(P){if(P._status===-1){var $=P._result;$=$(),$.then(function(G){(P._status===0||P._status===-1)&&(P._status=1,P._result=G)},function(G){(P._status===0||P._status===-1)&&(P._status=2,P._result=G)}),P._status===-1&&(P._status=0,P._result=$)}if(P._status===1)return P._result.default;throw P._result}var Z={current:null},Y={transition:null},H={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:Y,ReactCurrentOwner:V};function D(){throw Error("act(...) is not supported in production builds of React.")}return Dt.Children={map:Bt,forEach:function(P,$,G){Bt(P,function(){$.apply(this,arguments)},G)},count:function(P){var $=0;return Bt(P,function(){$++}),$},toArray:function(P){return Bt(P,function($){return $})||[]},only:function(P){if(!At(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Dt.Component=k,Dt.Fragment=e,Dt.Profiler=r,Dt.PureComponent=M,Dt.StrictMode=i,Dt.Suspense=f,Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Dt.act=D,Dt.cloneElement=function(P,$,G){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var it=_({},P.props),wt=P.key,ht=P.ref,at=P._owner;if($!=null){if($.ref!==void 0&&(ht=$.ref,at=V.current),$.key!==void 0&&(wt=""+$.key),P.type&&P.type.defaultProps)var bt=P.type.defaultProps;for(ot in $)j.call($,ot)&&!U.hasOwnProperty(ot)&&(it[ot]=$[ot]===void 0&&bt!==void 0?bt[ot]:$[ot])}var ot=arguments.length-2;if(ot===1)it.children=G;else if(1<ot){bt=Array(ot);for(var St=0;St<ot;St++)bt[St]=arguments[St+2];it.children=bt}return{$$typeof:d,type:P.type,key:wt,ref:ht,props:it,_owner:at}},Dt.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:o,_context:P},P.Consumer=P},Dt.createElement=Q,Dt.createFactory=function(P){var $=Q.bind(null,P);return $.type=P,$},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(P){return{$$typeof:c,render:P}},Dt.isValidElement=At,Dt.lazy=function(P){return{$$typeof:m,_payload:{_status:-1,_result:P},_init:J}},Dt.memo=function(P,$){return{$$typeof:p,type:P,compare:$===void 0?null:$}},Dt.startTransition=function(P){var $=Y.transition;Y.transition={};try{P()}finally{Y.transition=$}},Dt.unstable_act=D,Dt.useCallback=function(P,$){return Z.current.useCallback(P,$)},Dt.useContext=function(P){return Z.current.useContext(P)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(P){return Z.current.useDeferredValue(P)},Dt.useEffect=function(P,$){return Z.current.useEffect(P,$)},Dt.useId=function(){return Z.current.useId()},Dt.useImperativeHandle=function(P,$,G){return Z.current.useImperativeHandle(P,$,G)},Dt.useInsertionEffect=function(P,$){return Z.current.useInsertionEffect(P,$)},Dt.useLayoutEffect=function(P,$){return Z.current.useLayoutEffect(P,$)},Dt.useMemo=function(P,$){return Z.current.useMemo(P,$)},Dt.useReducer=function(P,$,G){return Z.current.useReducer(P,$,G)},Dt.useRef=function(P){return Z.current.useRef(P)},Dt.useState=function(P){return Z.current.useState(P)},Dt.useSyncExternalStore=function(P,$,G){return Z.current.useSyncExternalStore(P,$,G)},Dt.useTransition=function(){return Z.current.useTransition()},Dt.version="18.3.1",Dt}var JA;function Dv(){return JA||(JA=1,$m.exports=hC()),$m.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA;function dC(){if(ZA)return fc;ZA=1;var d=Dv(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,v={},w=null,b=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(b=f.ref);for(m in f)i.call(f,m)&&!o.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:w,ref:b,props:v,_owner:r.current}}return fc.Fragment=e,fc.jsx=u,fc.jsxs=u,fc}var tb;function fC(){return tb||(tb=1,Om.exports=dC()),Om.exports}var be=fC(),Se=Dv(),xf={},zm={exports:{}},Tn={},Hm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function pC(){return eb||(eb=1,function(d){function t(Y,H){var D=Y.length;Y.push(H);t:for(;0<D;){var P=D-1>>>1,$=Y[P];if(0<r($,H))Y[P]=H,Y[D]=$,D=P;else break t}}function e(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var H=Y[0],D=Y.pop();if(D!==H){Y[0]=D;t:for(var P=0,$=Y.length,G=$>>>1;P<G;){var it=2*(P+1)-1,wt=Y[it],ht=it+1,at=Y[ht];if(0>r(wt,D))ht<$&&0>r(at,wt)?(Y[P]=at,Y[ht]=D,P=ht):(Y[P]=wt,Y[it]=D,P=it);else if(ht<$&&0>r(at,D))Y[P]=at,Y[ht]=D,P=ht;else break t}}return H}function r(Y,H){var D=Y.sortIndex-H.sortIndex;return D!==0?D:Y.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,w=3,b=!1,_=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Y){for(var H=e(p);H!==null;){if(H.callback===null)i(p);else if(H.startTime<=Y)i(p),H.sortIndex=H.expirationTime,t(f,H);else break;H=e(p)}}function N(Y){if(x=!1,F(Y),!_)if(e(f)!==null)_=!0,J(j);else{var H=e(p);H!==null&&Z(N,H.startTime-Y)}}function j(Y,H){_=!1,x&&(x=!1,T(Q),Q=-1),b=!0;var D=w;try{for(F(H),v=e(f);v!==null&&(!(v.expirationTime>H)||Y&&!ft());){var P=v.callback;if(typeof P=="function"){v.callback=null,w=v.priorityLevel;var $=P(v.expirationTime<=H);H=d.unstable_now(),typeof $=="function"?v.callback=$:v===e(f)&&i(f),F(H)}else i(f);v=e(f)}if(v!==null)var G=!0;else{var it=e(p);it!==null&&Z(N,it.startTime-H),G=!1}return G}finally{v=null,w=D,b=!1}}var V=!1,U=null,Q=-1,nt=5,At=-1;function ft(){return!(d.unstable_now()-At<nt)}function Nt(){if(U!==null){var Y=d.unstable_now();At=Y;var H=!0;try{H=U(!0,Y)}finally{H?Tt():(V=!1,U=null)}}else V=!1}var Tt;if(typeof M=="function")Tt=function(){M(Nt)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,Bt=vt.port2;vt.port1.onmessage=Nt,Tt=function(){Bt.postMessage(null)}}else Tt=function(){k(Nt,0)};function J(Y){U=Y,V||(V=!0,Tt())}function Z(Y,H){Q=k(function(){Y(d.unstable_now())},H)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(Y){Y.callback=null},d.unstable_continueExecution=function(){_||b||(_=!0,J(j))},d.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<Y?Math.floor(1e3/Y):5},d.unstable_getCurrentPriorityLevel=function(){return w},d.unstable_getFirstCallbackNode=function(){return e(f)},d.unstable_next=function(Y){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var D=w;w=H;try{return Y()}finally{w=D}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(Y,H){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var D=w;w=Y;try{return H()}finally{w=D}},d.unstable_scheduleCallback=function(Y,H,D){var P=d.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?P+D:P):D=P,Y){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,Y={id:m++,callback:H,priorityLevel:Y,startTime:D,expirationTime:$,sortIndex:-1},D>P?(Y.sortIndex=D,t(p,Y),e(f)===null&&Y===e(p)&&(x?(T(Q),Q=-1):x=!0,Z(N,D-P))):(Y.sortIndex=$,t(f,Y),_||b||(_=!0,J(j))),Y},d.unstable_shouldYield=ft,d.unstable_wrapCallback=function(Y){var H=w;return function(){var D=w;w=H;try{return Y.apply(this,arguments)}finally{w=D}}}}(Bm)),Bm}var nb;function gC(){return nb||(nb=1,Hm.exports=pC()),Hm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ib;function mC(){if(ib)return Tn;ib=1;var d=Dv(),t=gC();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return f.call(v,n)?!0:f.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function b(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function _(n,s,l,h){if(s===null||typeof s>"u"||b(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function x(n,s,l,h,g,y,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=S}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new x(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];k[s]=new x(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new x(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new x(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new x(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new x(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new x(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new x(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new x(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function M(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,M);k[s]=new x(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,M);k[s]=new x(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,M);k[s]=new x(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new x(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new x(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,s,l,h){var g=k.hasOwnProperty(s)?k[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(_(s,l,g,h)&&(l=null),h||g===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,h=g.attributeNamespace,l===null?n.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var N=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),V=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),At=Symbol.for("react.provider"),ft=Symbol.for("react.context"),Nt=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),vt=Symbol.for("react.suspense_list"),Bt=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),Y=Symbol.iterator;function H(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var D=Object.assign,P;function $(n){if(P===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+n}var G=!1;function it(n,s){if(!n||G)return"";G=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(B){var h=B}Reflect.construct(n,[],s)}else{try{s.call()}catch(B){h=B}n.call(s.prototype)}else{try{throw Error()}catch(B){h=B}n()}}catch(B){if(B&&h&&typeof B.stack=="string"){for(var g=B.stack.split(`
`),y=h.stack.split(`
`),S=g.length-1,R=y.length-1;1<=S&&0<=R&&g[S]!==y[R];)R--;for(;1<=S&&0<=R;S--,R--)if(g[S]!==y[R]){if(S!==1||R!==1)do if(S--,R--,0>R||g[S]!==y[R]){var L=`
`+g[S].replace(" at new "," at ");return n.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",n.displayName)),L}while(1<=S&&0<=R);break}}}finally{G=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?$(n):""}function wt(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=it(n.type,!1),n;case 11:return n=it(n.type.render,!1),n;case 1:return n=it(n.type,!0),n;default:return""}}function ht(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case V:return"Portal";case nt:return"Profiler";case Q:return"StrictMode";case Tt:return"Suspense";case vt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ft:return(n.displayName||"Context")+".Consumer";case At:return(n._context.displayName||"Context")+".Provider";case Nt:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Bt:return s=n.displayName||null,s!==null?s:ht(n.type)||"Memo";case J:s=n._payload,n=n._init;try{return ht(n(s))}catch{}}return null}function at(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ht(s);case 8:return s===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function bt(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ot(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function St(n){var s=ot(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,y.call(this,S)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Xt(n){n._valueTracker||(n._valueTracker=St(n))}function cn(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=ot(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function Be(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Sn(n,s){var l=s.checked;return D({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Vp(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=bt(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Fa(n,s){s=s.checked,s!=null&&F(n,"checked",s,!1)}function ku(n,s){Fa(n,s);var l=bt(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Gp(n,s.type,l):s.hasOwnProperty("defaultValue")&&Gp(n,s.type,bt(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function r0(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Gp(n,s,l){(s!=="number"||Be(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var Tu=Array.isArray;function Oa(n,s,l,h){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+bt(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Wp(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return D({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function o0(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(Tu(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:bt(l)}}function a0(n,s){var l=bt(s.value),h=bt(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function l0(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function u0(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qp(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?u0(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yd,c0=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(yd=yd||document.createElement("div"),yd.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=yd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Pu(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f_=["Webkit","ms","Moz","O"];Object.keys(Ru).forEach(function(n){f_.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Ru[s]=Ru[n]})});function h0(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Ru.hasOwnProperty(n)&&Ru[n]?(""+s).trim():s+"px"}function d0(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,g=h0(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,g):n[l]=g}}var p_=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xp(n,s){if(s){if(p_[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Yp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kp=null;function Qp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jp=null,$a=null,za=null;function f0(n){if(n=Ju(n)){if(typeof Jp!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Hd(s),Jp(n.stateNode,n.type,s))}}function p0(n){$a?za?za.push(n):za=[n]:$a=n}function g0(){if($a){var n=$a,s=za;if(za=$a=null,f0(n),s)for(n=0;n<s.length;n++)f0(s[n])}}function m0(n,s){return n(s)}function y0(){}var Zp=!1;function v0(n,s,l){if(Zp)return n(s,l);Zp=!0;try{return m0(n,s,l)}finally{Zp=!1,($a!==null||za!==null)&&(y0(),g0())}}function Lu(n,s){var l=n.stateNode;if(l===null)return null;var h=Hd(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var tg=!1;if(c)try{var Mu={};Object.defineProperty(Mu,"passive",{get:function(){tg=!0}}),window.addEventListener("test",Mu,Mu),window.removeEventListener("test",Mu,Mu)}catch{tg=!1}function g_(n,s,l,h,g,y,S,R,L){var B=Array.prototype.slice.call(arguments,3);try{s.apply(l,B)}catch(q){this.onError(q)}}var Iu=!1,vd=null,wd=!1,eg=null,m_={onError:function(n){Iu=!0,vd=n}};function y_(n,s,l,h,g,y,S,R,L){Iu=!1,vd=null,g_.apply(m_,arguments)}function v_(n,s,l,h,g,y,S,R,L){if(y_.apply(this,arguments),Iu){if(Iu){var B=vd;Iu=!1,vd=null}else throw Error(e(198));wd||(wd=!0,eg=B)}}function ao(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function w0(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function A0(n){if(ao(n)!==n)throw Error(e(188))}function w_(n){var s=n.alternate;if(!s){if(s=ao(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return A0(g),n;if(y===h)return A0(g),s;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=g,h=y;else{for(var S=!1,R=g.child;R;){if(R===l){S=!0,l=g,h=y;break}if(R===h){S=!0,h=g,l=y;break}R=R.sibling}if(!S){for(R=y.child;R;){if(R===l){S=!0,l=y,h=g;break}if(R===h){S=!0,h=y,l=g;break}R=R.sibling}if(!S)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function b0(n){return n=w_(n),n!==null?S0(n):null}function S0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=S0(n);if(s!==null)return s;n=n.sibling}return null}var _0=t.unstable_scheduleCallback,E0=t.unstable_cancelCallback,A_=t.unstable_shouldYield,b_=t.unstable_requestPaint,pe=t.unstable_now,S_=t.unstable_getCurrentPriorityLevel,ng=t.unstable_ImmediatePriority,C0=t.unstable_UserBlockingPriority,Ad=t.unstable_NormalPriority,__=t.unstable_LowPriority,x0=t.unstable_IdlePriority,bd=null,Ui=null;function E_(n){if(Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(bd,n,void 0,(n.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:k_,C_=Math.log,x_=Math.LN2;function k_(n){return n>>>=0,n===0?32:31-(C_(n)/x_|0)|0}var Sd=64,_d=4194304;function Nu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ed(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,S=l&268435455;if(S!==0){var R=S&~g;R!==0?h=Nu(R):(y&=S,y!==0&&(h=Nu(y)))}else S=l&~g,S!==0?h=Nu(S):y!==0&&(h=Nu(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if(h&4&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-wi(s),g=1<<l,h|=n[l],s&=~g;return h}function T_(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P_(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var S=31-wi(y),R=1<<S,L=g[S];L===-1?(!(R&l)||R&h)&&(g[S]=T_(R,s)):L<=s&&(n.expiredLanes|=R),y&=~R}}function ig(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function k0(){var n=Sd;return Sd<<=1,!(Sd&4194240)&&(Sd=64),n}function sg(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Du(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-wi(s),n[s]=l}function R_(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-wi(l),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,l&=~y}}function rg(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-wi(l),g=1<<h;g&s|n[h]&s&&(n[h]|=s),l&=~g}}var Gt=0;function T0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var P0,og,R0,L0,M0,ag=!1,Cd=[],rr=null,or=null,ar=null,Fu=new Map,Ou=new Map,lr=[],L_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function I0(n,s){switch(n){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Fu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(s.pointerId)}}function $u(n,s,l,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Ju(s),s!==null&&og(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function M_(n,s,l,h,g){switch(s){case"focusin":return rr=$u(rr,n,s,l,h,g),!0;case"dragenter":return or=$u(or,n,s,l,h,g),!0;case"mouseover":return ar=$u(ar,n,s,l,h,g),!0;case"pointerover":var y=g.pointerId;return Fu.set(y,$u(Fu.get(y)||null,n,s,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Ou.set(y,$u(Ou.get(y)||null,n,s,l,h,g)),!0}return!1}function N0(n){var s=lo(n.target);if(s!==null){var l=ao(s);if(l!==null){if(s=l.tag,s===13){if(s=w0(l),s!==null){n.blockedOn=s,M0(n.priority,function(){R0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=ug(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Kp=h,l.target.dispatchEvent(h),Kp=null}else return s=Ju(l),s!==null&&og(s),n.blockedOn=l,!1;s.shift()}return!0}function D0(n,s,l){xd(n)&&l.delete(s)}function I_(){ag=!1,rr!==null&&xd(rr)&&(rr=null),or!==null&&xd(or)&&(or=null),ar!==null&&xd(ar)&&(ar=null),Fu.forEach(D0),Ou.forEach(D0)}function zu(n,s){n.blockedOn===s&&(n.blockedOn=null,ag||(ag=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,I_)))}function Hu(n){function s(g){return zu(g,n)}if(0<Cd.length){zu(Cd[0],n);for(var l=1;l<Cd.length;l++){var h=Cd[l];h.blockedOn===n&&(h.blockedOn=null)}}for(rr!==null&&zu(rr,n),or!==null&&zu(or,n),ar!==null&&zu(ar,n),Fu.forEach(s),Ou.forEach(s),l=0;l<lr.length;l++)h=lr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<lr.length&&(l=lr[0],l.blockedOn===null);)N0(l),l.blockedOn===null&&lr.shift()}var Ha=N.ReactCurrentBatchConfig,kd=!0;function N_(n,s,l,h){var g=Gt,y=Ha.transition;Ha.transition=null;try{Gt=1,lg(n,s,l,h)}finally{Gt=g,Ha.transition=y}}function D_(n,s,l,h){var g=Gt,y=Ha.transition;Ha.transition=null;try{Gt=4,lg(n,s,l,h)}finally{Gt=g,Ha.transition=y}}function lg(n,s,l,h){if(kd){var g=ug(n,s,l,h);if(g===null)xg(n,s,h,Td,l),I0(n,h);else if(M_(g,n,s,l,h))h.stopPropagation();else if(I0(n,h),s&4&&-1<L_.indexOf(n)){for(;g!==null;){var y=Ju(g);if(y!==null&&P0(y),y=ug(n,s,l,h),y===null&&xg(n,s,h,Td,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else xg(n,s,h,null,l)}}var Td=null;function ug(n,s,l,h){if(Td=null,n=Qp(h),n=lo(n),n!==null)if(s=ao(n),s===null)n=null;else if(l=s.tag,l===13){if(n=w0(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Td=n,null}function F0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S_()){case ng:return 1;case C0:return 4;case Ad:case __:return 16;case x0:return 536870912;default:return 16}default:return 16}}var ur=null,cg=null,Pd=null;function O0(){if(Pd)return Pd;var n,s=cg,l=s.length,h,g="value"in ur?ur.value:ur.textContent,y=g.length;for(n=0;n<l&&s[n]===g[n];n++);var S=l-n;for(h=1;h<=S&&s[l-h]===g[y-h];h++);return Pd=g.slice(n,1<h?1-h:void 0)}function Rd(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ld(){return!0}function $0(){return!1}function Fn(n){function s(l,h,g,y,S){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(l=n[R],this[R]=l?l(y):y[R]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ld:$0,this.isPropagationStopped=$0,this}return D(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),s}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hg=Fn(Ba),Bu=D({},Ba,{view:0,detail:0}),F_=Fn(Bu),dg,fg,ju,Md=D({},Bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ju&&(ju&&n.type==="mousemove"?(dg=n.screenX-ju.screenX,fg=n.screenY-ju.screenY):fg=dg=0,ju=n),dg)},movementY:function(n){return"movementY"in n?n.movementY:fg}}),z0=Fn(Md),O_=D({},Md,{dataTransfer:0}),$_=Fn(O_),z_=D({},Bu,{relatedTarget:0}),pg=Fn(z_),H_=D({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),B_=Fn(H_),j_=D({},Ba,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),U_=Fn(j_),V_=D({},Ba,{data:0}),H0=Fn(V_),G_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=q_[n])?!!s[n]:!1}function gg(){return X_}var Y_=D({},Bu,{key:function(n){if(n.key){var s=G_[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Rd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?W_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gg,charCode:function(n){return n.type==="keypress"?Rd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),K_=Fn(Y_),Q_=D({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B0=Fn(Q_),J_=D({},Bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gg}),Z_=Fn(J_),tE=D({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),eE=Fn(tE),nE=D({},Md,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),iE=Fn(nE),sE=[9,13,27,32],mg=c&&"CompositionEvent"in window,Uu=null;c&&"documentMode"in document&&(Uu=document.documentMode);var rE=c&&"TextEvent"in window&&!Uu,j0=c&&(!mg||Uu&&8<Uu&&11>=Uu),U0=" ",V0=!1;function G0(n,s){switch(n){case"keyup":return sE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ja=!1;function oE(n,s){switch(n){case"compositionend":return W0(s);case"keypress":return s.which!==32?null:(V0=!0,U0);case"textInput":return n=s.data,n===U0&&V0?null:n;default:return null}}function aE(n,s){if(ja)return n==="compositionend"||!mg&&G0(n,s)?(n=O0(),Pd=cg=ur=null,ja=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return j0&&s.locale!=="ko"?null:s.data;default:return null}}var lE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!lE[n.type]:s==="textarea"}function X0(n,s,l,h){p0(h),s=Od(s,"onChange"),0<s.length&&(l=new hg("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var Vu=null,Gu=null;function uE(n){dw(n,0)}function Id(n){var s=qa(n);if(cn(s))return n}function cE(n,s){if(n==="change")return s}var Y0=!1;if(c){var yg;if(c){var vg="oninput"in document;if(!vg){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),vg=typeof K0.oninput=="function"}yg=vg}else yg=!1;Y0=yg&&(!document.documentMode||9<document.documentMode)}function Q0(){Vu&&(Vu.detachEvent("onpropertychange",J0),Gu=Vu=null)}function J0(n){if(n.propertyName==="value"&&Id(Gu)){var s=[];X0(s,Gu,n,Qp(n)),v0(uE,s)}}function hE(n,s,l){n==="focusin"?(Q0(),Vu=s,Gu=l,Vu.attachEvent("onpropertychange",J0)):n==="focusout"&&Q0()}function dE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Id(Gu)}function fE(n,s){if(n==="click")return Id(s)}function pE(n,s){if(n==="input"||n==="change")return Id(s)}function gE(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Ai=typeof Object.is=="function"?Object.is:gE;function Wu(n,s){if(Ai(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!f.call(s,g)||!Ai(n[g],s[g]))return!1}return!0}function Z0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tw(n,s){var l=Z0(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Z0(l)}}function ew(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ew(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function nw(){for(var n=window,s=Be();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=Be(n.document)}return s}function wg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function mE(n){var s=nw(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&ew(l.ownerDocument.documentElement,l)){if(h!==null&&wg(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=tw(l,y);var S=tw(l,h);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var yE=c&&"documentMode"in document&&11>=document.documentMode,Ua=null,Ag=null,qu=null,bg=!1;function iw(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bg||Ua==null||Ua!==Be(h)||(h=Ua,"selectionStart"in h&&wg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qu&&Wu(qu,h)||(qu=h,h=Od(Ag,"onSelect"),0<h.length&&(s=new hg("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=Ua)))}function Nd(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Va={animationend:Nd("Animation","AnimationEnd"),animationiteration:Nd("Animation","AnimationIteration"),animationstart:Nd("Animation","AnimationStart"),transitionend:Nd("Transition","TransitionEnd")},Sg={},sw={};c&&(sw=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Dd(n){if(Sg[n])return Sg[n];if(!Va[n])return n;var s=Va[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in sw)return Sg[n]=s[l];return n}var rw=Dd("animationend"),ow=Dd("animationiteration"),aw=Dd("animationstart"),lw=Dd("transitionend"),uw=new Map,cw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(n,s){uw.set(n,s),o(s,[n])}for(var _g=0;_g<cw.length;_g++){var Eg=cw[_g],vE=Eg.toLowerCase(),wE=Eg[0].toUpperCase()+Eg.slice(1);cr(vE,"on"+wE)}cr(rw,"onAnimationEnd"),cr(ow,"onAnimationIteration"),cr(aw,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(lw,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xu));function hw(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,v_(h,s,void 0,n),n.currentTarget=null}function dw(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var S=h.length-1;0<=S;S--){var R=h[S],L=R.instance,B=R.currentTarget;if(R=R.listener,L!==y&&g.isPropagationStopped())break t;hw(g,R,B),y=L}else for(S=0;S<h.length;S++){if(R=h[S],L=R.instance,B=R.currentTarget,R=R.listener,L!==y&&g.isPropagationStopped())break t;hw(g,R,B),y=L}}}if(wd)throw n=eg,wd=!1,eg=null,n}function te(n,s){var l=s[Mg];l===void 0&&(l=s[Mg]=new Set);var h=n+"__bubble";l.has(h)||(fw(s,n,2,!1),l.add(h))}function Cg(n,s,l){var h=0;s&&(h|=4),fw(l,n,h,s)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function Yu(n){if(!n[Fd]){n[Fd]=!0,i.forEach(function(l){l!=="selectionchange"&&(AE.has(l)||Cg(l,!1,n),Cg(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Fd]||(s[Fd]=!0,Cg("selectionchange",!1,s))}}function fw(n,s,l,h){switch(F0(s)){case 1:var g=N_;break;case 4:g=D_;break;default:g=lg}l=g.bind(null,s,l,n),g=void 0,!tg||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function xg(n,s,l,h,g){var y=h;if(!(s&1)&&!(s&2)&&h!==null)t:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var R=h.stateNode.containerInfo;if(R===g||R.nodeType===8&&R.parentNode===g)break;if(S===4)for(S=h.return;S!==null;){var L=S.tag;if((L===3||L===4)&&(L=S.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;S=S.return}for(;R!==null;){if(S=lo(R),S===null)return;if(L=S.tag,L===5||L===6){h=y=S;continue t}R=R.parentNode}}h=h.return}v0(function(){var B=y,q=Qp(l),X=[];t:{var W=uw.get(n);if(W!==void 0){var st=hg,dt=n;switch(n){case"keypress":if(Rd(l)===0)break t;case"keydown":case"keyup":st=K_;break;case"focusin":dt="focus",st=pg;break;case"focusout":dt="blur",st=pg;break;case"beforeblur":case"afterblur":st=pg;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=$_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Z_;break;case rw:case ow:case aw:st=B_;break;case lw:st=eE;break;case"scroll":st=F_;break;case"wheel":st=iE;break;case"copy":case"cut":case"paste":st=U_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=B0}var pt=(s&4)!==0,ge=!pt&&n==="scroll",O=pt?W!==null?W+"Capture":null:W;pt=[];for(var I=B,z;I!==null;){z=I;var K=z.stateNode;if(z.tag===5&&K!==null&&(z=K,O!==null&&(K=Lu(I,O),K!=null&&pt.push(Ku(I,K,z)))),ge)break;I=I.return}0<pt.length&&(W=new st(W,dt,null,l,q),X.push({event:W,listeners:pt}))}}if(!(s&7)){t:{if(W=n==="mouseover"||n==="pointerover",st=n==="mouseout"||n==="pointerout",W&&l!==Kp&&(dt=l.relatedTarget||l.fromElement)&&(lo(dt)||dt[gs]))break t;if((st||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,st?(dt=l.relatedTarget||l.toElement,st=B,dt=dt?lo(dt):null,dt!==null&&(ge=ao(dt),dt!==ge||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(st=null,dt=B),st!==dt)){if(pt=z0,K="onMouseLeave",O="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(pt=B0,K="onPointerLeave",O="onPointerEnter",I="pointer"),ge=st==null?W:qa(st),z=dt==null?W:qa(dt),W=new pt(K,I+"leave",st,l,q),W.target=ge,W.relatedTarget=z,K=null,lo(q)===B&&(pt=new pt(O,I+"enter",dt,l,q),pt.target=z,pt.relatedTarget=ge,K=pt),ge=K,st&&dt)e:{for(pt=st,O=dt,I=0,z=pt;z;z=Ga(z))I++;for(z=0,K=O;K;K=Ga(K))z++;for(;0<I-z;)pt=Ga(pt),I--;for(;0<z-I;)O=Ga(O),z--;for(;I--;){if(pt===O||O!==null&&pt===O.alternate)break e;pt=Ga(pt),O=Ga(O)}pt=null}else pt=null;st!==null&&pw(X,W,st,pt,!1),dt!==null&&ge!==null&&pw(X,ge,dt,pt,!0)}}t:{if(W=B?qa(B):window,st=W.nodeName&&W.nodeName.toLowerCase(),st==="select"||st==="input"&&W.type==="file")var gt=cE;else if(q0(W))if(Y0)gt=pE;else{gt=dE;var _t=hE}else(st=W.nodeName)&&st.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(gt=fE);if(gt&&(gt=gt(n,B))){X0(X,gt,l,q);break t}_t&&_t(n,W,B),n==="focusout"&&(_t=W._wrapperState)&&_t.controlled&&W.type==="number"&&Gp(W,"number",W.value)}switch(_t=B?qa(B):window,n){case"focusin":(q0(_t)||_t.contentEditable==="true")&&(Ua=_t,Ag=B,qu=null);break;case"focusout":qu=Ag=Ua=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,iw(X,l,q);break;case"selectionchange":if(yE)break;case"keydown":case"keyup":iw(X,l,q)}var Et;if(mg)t:{switch(n){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ja?G0(n,l)&&(kt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(kt="onCompositionStart");kt&&(j0&&l.locale!=="ko"&&(ja||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ja&&(Et=O0()):(ur=q,cg="value"in ur?ur.value:ur.textContent,ja=!0)),_t=Od(B,kt),0<_t.length&&(kt=new H0(kt,n,null,l,q),X.push({event:kt,listeners:_t}),Et?kt.data=Et:(Et=W0(l),Et!==null&&(kt.data=Et)))),(Et=rE?oE(n,l):aE(n,l))&&(B=Od(B,"onBeforeInput"),0<B.length&&(q=new H0("onBeforeInput","beforeinput",null,l,q),X.push({event:q,listeners:B}),q.data=Et))}dw(X,s)})}function Ku(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Od(n,s){for(var l=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=Lu(n,l),y!=null&&h.unshift(Ku(n,y,g)),y=Lu(n,s),y!=null&&h.push(Ku(n,y,g))),n=n.return}return h}function Ga(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function pw(n,s,l,h,g){for(var y=s._reactName,S=[];l!==null&&l!==h;){var R=l,L=R.alternate,B=R.stateNode;if(L!==null&&L===h)break;R.tag===5&&B!==null&&(R=B,g?(L=Lu(l,y),L!=null&&S.unshift(Ku(l,L,R))):g||(L=Lu(l,y),L!=null&&S.push(Ku(l,L,R)))),l=l.return}S.length!==0&&n.push({event:s,listeners:S})}var bE=/\r\n?/g,SE=/\u0000|\uFFFD/g;function gw(n){return(typeof n=="string"?n:""+n).replace(bE,`
`).replace(SE,"")}function $d(n,s,l){if(s=gw(s),gw(n)!==s&&l)throw Error(e(425))}function zd(){}var kg=null,Tg=null;function Pg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rg=typeof setTimeout=="function"?setTimeout:void 0,_E=typeof clearTimeout=="function"?clearTimeout:void 0,mw=typeof Promise=="function"?Promise:void 0,EE=typeof queueMicrotask=="function"?queueMicrotask:typeof mw<"u"?function(n){return mw.resolve(null).then(n).catch(CE)}:Rg;function CE(n){setTimeout(function(){throw n})}function Lg(n,s){var l=s,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(h===0){n.removeChild(g),Hu(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=g}while(l);Hu(s)}function hr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function yw(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Wa,Qu="__reactProps$"+Wa,gs="__reactContainer$"+Wa,Mg="__reactEvents$"+Wa,xE="__reactListeners$"+Wa,kE="__reactHandles$"+Wa;function lo(n){var s=n[Vi];if(s)return s;for(var l=n.parentNode;l;){if(s=l[gs]||l[Vi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=yw(n);n!==null;){if(l=n[Vi])return l;n=yw(n)}return s}n=l,l=n.parentNode}return null}function Ju(n){return n=n[Vi]||n[gs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function qa(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Hd(n){return n[Qu]||null}var Ig=[],Xa=-1;function dr(n){return{current:n}}function ee(n){0>Xa||(n.current=Ig[Xa],Ig[Xa]=null,Xa--)}function Jt(n,s){Xa++,Ig[Xa]=n.current,n.current=s}var fr={},Ke=dr(fr),_n=dr(!1),uo=fr;function Ya(n,s){var l=n.type.contextTypes;if(!l)return fr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in l)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function En(n){return n=n.childContextTypes,n!=null}function Bd(){ee(_n),ee(Ke)}function vw(n,s,l){if(Ke.current!==fr)throw Error(e(168));Jt(Ke,s),Jt(_n,l)}function ww(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(e(108,at(n)||"Unknown",g));return D({},l,h)}function jd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||fr,uo=Ke.current,Jt(Ke,n),Jt(_n,_n.current),!0}function Aw(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=ww(n,s,uo),h.__reactInternalMemoizedMergedChildContext=n,ee(_n),ee(Ke),Jt(Ke,n)):ee(_n),Jt(_n,l)}var ms=null,Ud=!1,Ng=!1;function bw(n){ms===null?ms=[n]:ms.push(n)}function TE(n){Ud=!0,bw(n)}function pr(){if(!Ng&&ms!==null){Ng=!0;var n=0,s=Gt;try{var l=ms;for(Gt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}ms=null,Ud=!1}catch(g){throw ms!==null&&(ms=ms.slice(n+1)),_0(ng,pr),g}finally{Gt=s,Ng=!1}}return null}var Ka=[],Qa=0,Vd=null,Gd=0,ni=[],ii=0,co=null,ys=1,vs="";function ho(n,s){Ka[Qa++]=Gd,Ka[Qa++]=Vd,Vd=n,Gd=s}function Sw(n,s,l){ni[ii++]=ys,ni[ii++]=vs,ni[ii++]=co,co=n;var h=ys;n=vs;var g=32-wi(h)-1;h&=~(1<<g),l+=1;var y=32-wi(s)+g;if(30<y){var S=g-g%5;y=(h&(1<<S)-1).toString(32),h>>=S,g-=S,ys=1<<32-wi(s)+g|l<<g|h,vs=y+n}else ys=1<<y|l<<g|h,vs=n}function Dg(n){n.return!==null&&(ho(n,1),Sw(n,1,0))}function Fg(n){for(;n===Vd;)Vd=Ka[--Qa],Ka[Qa]=null,Gd=Ka[--Qa],Ka[Qa]=null;for(;n===co;)co=ni[--ii],ni[ii]=null,vs=ni[--ii],ni[ii]=null,ys=ni[--ii],ni[ii]=null}var On=null,$n=null,ie=!1,bi=null;function _w(n,s){var l=ai(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function Ew(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,On=n,$n=hr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,On=n,$n=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=co!==null?{id:ys,overflow:vs}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ai(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,On=n,$n=null,!0):!1;default:return!1}}function Og(n){return(n.mode&1)!==0&&(n.flags&128)===0}function $g(n){if(ie){var s=$n;if(s){var l=s;if(!Ew(n,s)){if(Og(n))throw Error(e(418));s=hr(l.nextSibling);var h=On;s&&Ew(n,s)?_w(h,l):(n.flags=n.flags&-4097|2,ie=!1,On=n)}}else{if(Og(n))throw Error(e(418));n.flags=n.flags&-4097|2,ie=!1,On=n}}}function Cw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;On=n}function Wd(n){if(n!==On)return!1;if(!ie)return Cw(n),ie=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Pg(n.type,n.memoizedProps)),s&&(s=$n)){if(Og(n))throw xw(),Error(e(418));for(;s;)_w(n,s),s=hr(s.nextSibling)}if(Cw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){$n=hr(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}$n=null}}else $n=On?hr(n.stateNode.nextSibling):null;return!0}function xw(){for(var n=$n;n;)n=hr(n.nextSibling)}function Ja(){$n=On=null,ie=!1}function zg(n){bi===null?bi=[n]:bi.push(n)}var PE=N.ReactCurrentBatchConfig;function Zu(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(S){var R=g.refs;S===null?delete R[y]:R[y]=S},s._stringRef=y,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function qd(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function kw(n){var s=n._init;return s(n._payload)}function Tw(n){function s(O,I){if(n){var z=O.deletions;z===null?(O.deletions=[I],O.flags|=16):z.push(I)}}function l(O,I){if(!n)return null;for(;I!==null;)s(O,I),I=I.sibling;return null}function h(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function g(O,I){return O=Sr(O,I),O.index=0,O.sibling=null,O}function y(O,I,z){return O.index=z,n?(z=O.alternate,z!==null?(z=z.index,z<I?(O.flags|=2,I):z):(O.flags|=2,I)):(O.flags|=1048576,I)}function S(O){return n&&O.alternate===null&&(O.flags|=2),O}function R(O,I,z,K){return I===null||I.tag!==6?(I=Rm(z,O.mode,K),I.return=O,I):(I=g(I,z),I.return=O,I)}function L(O,I,z,K){var gt=z.type;return gt===U?q(O,I,z.props.children,K,z.key):I!==null&&(I.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===J&&kw(gt)===I.type)?(K=g(I,z.props),K.ref=Zu(O,I,z),K.return=O,K):(K=vf(z.type,z.key,z.props,null,O.mode,K),K.ref=Zu(O,I,z),K.return=O,K)}function B(O,I,z,K){return I===null||I.tag!==4||I.stateNode.containerInfo!==z.containerInfo||I.stateNode.implementation!==z.implementation?(I=Lm(z,O.mode,K),I.return=O,I):(I=g(I,z.children||[]),I.return=O,I)}function q(O,I,z,K,gt){return I===null||I.tag!==7?(I=Ao(z,O.mode,K,gt),I.return=O,I):(I=g(I,z),I.return=O,I)}function X(O,I,z){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Rm(""+I,O.mode,z),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case j:return z=vf(I.type,I.key,I.props,null,O.mode,z),z.ref=Zu(O,null,I),z.return=O,z;case V:return I=Lm(I,O.mode,z),I.return=O,I;case J:var K=I._init;return X(O,K(I._payload),z)}if(Tu(I)||H(I))return I=Ao(I,O.mode,z,null),I.return=O,I;qd(O,I)}return null}function W(O,I,z,K){var gt=I!==null?I.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return gt!==null?null:R(O,I,""+z,K);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case j:return z.key===gt?L(O,I,z,K):null;case V:return z.key===gt?B(O,I,z,K):null;case J:return gt=z._init,W(O,I,gt(z._payload),K)}if(Tu(z)||H(z))return gt!==null?null:q(O,I,z,K,null);qd(O,z)}return null}function st(O,I,z,K,gt){if(typeof K=="string"&&K!==""||typeof K=="number")return O=O.get(z)||null,R(I,O,""+K,gt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case j:return O=O.get(K.key===null?z:K.key)||null,L(I,O,K,gt);case V:return O=O.get(K.key===null?z:K.key)||null,B(I,O,K,gt);case J:var _t=K._init;return st(O,I,z,_t(K._payload),gt)}if(Tu(K)||H(K))return O=O.get(z)||null,q(I,O,K,gt,null);qd(I,K)}return null}function dt(O,I,z,K){for(var gt=null,_t=null,Et=I,kt=I=0,Ne=null;Et!==null&&kt<z.length;kt++){Et.index>kt?(Ne=Et,Et=null):Ne=Et.sibling;var jt=W(O,Et,z[kt],K);if(jt===null){Et===null&&(Et=Ne);break}n&&Et&&jt.alternate===null&&s(O,Et),I=y(jt,I,kt),_t===null?gt=jt:_t.sibling=jt,_t=jt,Et=Ne}if(kt===z.length)return l(O,Et),ie&&ho(O,kt),gt;if(Et===null){for(;kt<z.length;kt++)Et=X(O,z[kt],K),Et!==null&&(I=y(Et,I,kt),_t===null?gt=Et:_t.sibling=Et,_t=Et);return ie&&ho(O,kt),gt}for(Et=h(O,Et);kt<z.length;kt++)Ne=st(Et,O,kt,z[kt],K),Ne!==null&&(n&&Ne.alternate!==null&&Et.delete(Ne.key===null?kt:Ne.key),I=y(Ne,I,kt),_t===null?gt=Ne:_t.sibling=Ne,_t=Ne);return n&&Et.forEach(function(_r){return s(O,_r)}),ie&&ho(O,kt),gt}function pt(O,I,z,K){var gt=H(z);if(typeof gt!="function")throw Error(e(150));if(z=gt.call(z),z==null)throw Error(e(151));for(var _t=gt=null,Et=I,kt=I=0,Ne=null,jt=z.next();Et!==null&&!jt.done;kt++,jt=z.next()){Et.index>kt?(Ne=Et,Et=null):Ne=Et.sibling;var _r=W(O,Et,jt.value,K);if(_r===null){Et===null&&(Et=Ne);break}n&&Et&&_r.alternate===null&&s(O,Et),I=y(_r,I,kt),_t===null?gt=_r:_t.sibling=_r,_t=_r,Et=Ne}if(jt.done)return l(O,Et),ie&&ho(O,kt),gt;if(Et===null){for(;!jt.done;kt++,jt=z.next())jt=X(O,jt.value,K),jt!==null&&(I=y(jt,I,kt),_t===null?gt=jt:_t.sibling=jt,_t=jt);return ie&&ho(O,kt),gt}for(Et=h(O,Et);!jt.done;kt++,jt=z.next())jt=st(Et,O,kt,jt.value,K),jt!==null&&(n&&jt.alternate!==null&&Et.delete(jt.key===null?kt:jt.key),I=y(jt,I,kt),_t===null?gt=jt:_t.sibling=jt,_t=jt);return n&&Et.forEach(function(aC){return s(O,aC)}),ie&&ho(O,kt),gt}function ge(O,I,z,K){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case j:t:{for(var gt=z.key,_t=I;_t!==null;){if(_t.key===gt){if(gt=z.type,gt===U){if(_t.tag===7){l(O,_t.sibling),I=g(_t,z.props.children),I.return=O,O=I;break t}}else if(_t.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===J&&kw(gt)===_t.type){l(O,_t.sibling),I=g(_t,z.props),I.ref=Zu(O,_t,z),I.return=O,O=I;break t}l(O,_t);break}else s(O,_t);_t=_t.sibling}z.type===U?(I=Ao(z.props.children,O.mode,K,z.key),I.return=O,O=I):(K=vf(z.type,z.key,z.props,null,O.mode,K),K.ref=Zu(O,I,z),K.return=O,O=K)}return S(O);case V:t:{for(_t=z.key;I!==null;){if(I.key===_t)if(I.tag===4&&I.stateNode.containerInfo===z.containerInfo&&I.stateNode.implementation===z.implementation){l(O,I.sibling),I=g(I,z.children||[]),I.return=O,O=I;break t}else{l(O,I);break}else s(O,I);I=I.sibling}I=Lm(z,O.mode,K),I.return=O,O=I}return S(O);case J:return _t=z._init,ge(O,I,_t(z._payload),K)}if(Tu(z))return dt(O,I,z,K);if(H(z))return pt(O,I,z,K);qd(O,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,I!==null&&I.tag===6?(l(O,I.sibling),I=g(I,z),I.return=O,O=I):(l(O,I),I=Rm(z,O.mode,K),I.return=O,O=I),S(O)):l(O,I)}return ge}var Za=Tw(!0),Pw=Tw(!1),Xd=dr(null),Yd=null,tl=null,Hg=null;function Bg(){Hg=tl=Yd=null}function jg(n){var s=Xd.current;ee(Xd),n._currentValue=s}function Ug(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function el(n,s){Yd=n,Hg=tl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Cn=!0),n.firstContext=null)}function si(n){var s=n._currentValue;if(Hg!==n)if(n={context:n,memoizedValue:s,next:null},tl===null){if(Yd===null)throw Error(e(308));tl=n,Yd.dependencies={lanes:0,firstContext:n}}else tl=tl.next=n;return s}var fo=null;function Vg(n){fo===null?fo=[n]:fo.push(n)}function Rw(n,s,l,h){var g=s.interleaved;return g===null?(l.next=l,Vg(s)):(l.next=g.next,g.next=l),s.interleaved=l,ws(n,h)}function ws(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var gr=!1;function Gg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lw(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function As(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function mr(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,zt&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,ws(n,l)}return g=h.interleaved,g===null?(s.next=s,Vg(h)):(s.next=g.next,g.next=s),h.interleaved=s,ws(n,l)}function Kd(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,rg(n,l)}}function Mw(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?g=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?g=y=s:y=y.next=s}else g=y=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Qd(n,s,l,h){var g=n.updateQueue;gr=!1;var y=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var L=R,B=L.next;L.next=null,S===null?y=B:S.next=B,S=L;var q=n.alternate;q!==null&&(q=q.updateQueue,R=q.lastBaseUpdate,R!==S&&(R===null?q.firstBaseUpdate=B:R.next=B,q.lastBaseUpdate=L))}if(y!==null){var X=g.baseState;S=0,q=B=L=null,R=y;do{var W=R.lane,st=R.eventTime;if((h&W)===W){q!==null&&(q=q.next={eventTime:st,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});t:{var dt=n,pt=R;switch(W=s,st=l,pt.tag){case 1:if(dt=pt.payload,typeof dt=="function"){X=dt.call(st,X,W);break t}X=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=pt.payload,W=typeof dt=="function"?dt.call(st,X,W):dt,W==null)break t;X=D({},X,W);break t;case 2:gr=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,W=g.effects,W===null?g.effects=[R]:W.push(R))}else st={eventTime:st,lane:W,tag:R.tag,payload:R.payload,callback:R.callback,next:null},q===null?(B=q=st,L=X):q=q.next=st,S|=W;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;W=R,R=W.next,W.next=null,g.lastBaseUpdate=W,g.shared.pending=null}}while(!0);if(q===null&&(L=X),g.baseState=L,g.firstBaseUpdate=B,g.lastBaseUpdate=q,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);mo|=S,n.lanes=S,n.memoizedState=X}}function Iw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=l,typeof g!="function")throw Error(e(191,g));g.call(h)}}}var tc={},Gi=dr(tc),ec=dr(tc),nc=dr(tc);function po(n){if(n===tc)throw Error(e(174));return n}function Wg(n,s){switch(Jt(nc,s),Jt(ec,n),Jt(Gi,tc),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:qp(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=qp(s,n)}ee(Gi),Jt(Gi,s)}function nl(){ee(Gi),ee(ec),ee(nc)}function Nw(n){po(nc.current);var s=po(Gi.current),l=qp(s,n.type);s!==l&&(Jt(ec,n),Jt(Gi,l))}function qg(n){ec.current===n&&(ee(Gi),ee(ec))}var ae=dr(0);function Jd(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xg=[];function Yg(){for(var n=0;n<Xg.length;n++)Xg[n]._workInProgressVersionPrimary=null;Xg.length=0}var Zd=N.ReactCurrentDispatcher,Kg=N.ReactCurrentBatchConfig,go=0,le=null,Ce=null,Me=null,tf=!1,ic=!1,sc=0,RE=0;function Qe(){throw Error(e(321))}function Qg(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Ai(n[l],s[l]))return!1;return!0}function Jg(n,s,l,h,g,y){if(go=y,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Zd.current=n===null||n.memoizedState===null?NE:DE,n=l(h,g),ic){y=0;do{if(ic=!1,sc=0,25<=y)throw Error(e(301));y+=1,Me=Ce=null,s.updateQueue=null,Zd.current=FE,n=l(h,g)}while(ic)}if(Zd.current=sf,s=Ce!==null&&Ce.next!==null,go=0,Me=Ce=le=null,tf=!1,s)throw Error(e(300));return n}function Zg(){var n=sc!==0;return sc=0,n}function Wi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?le.memoizedState=Me=n:Me=Me.next=n,Me}function ri(){if(Ce===null){var n=le.alternate;n=n!==null?n.memoizedState:null}else n=Ce.next;var s=Me===null?le.memoizedState:Me.next;if(s!==null)Me=s,Ce=n;else{if(n===null)throw Error(e(310));Ce=n,n={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Me===null?le.memoizedState=Me=n:Me=Me.next=n}return Me}function rc(n,s){return typeof s=="function"?s(n):s}function tm(n){var s=ri(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=Ce,g=h.baseQueue,y=l.pending;if(y!==null){if(g!==null){var S=g.next;g.next=y.next,y.next=S}h.baseQueue=g=y,l.pending=null}if(g!==null){y=g.next,h=h.baseState;var R=S=null,L=null,B=y;do{var q=B.lane;if((go&q)===q)L!==null&&(L=L.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),h=B.hasEagerState?B.eagerState:n(h,B.action);else{var X={lane:q,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};L===null?(R=L=X,S=h):L=L.next=X,le.lanes|=q,mo|=q}B=B.next}while(B!==null&&B!==y);L===null?S=h:L.next=R,Ai(h,s.memoizedState)||(Cn=!0),s.memoizedState=h,s.baseState=S,s.baseQueue=L,l.lastRenderedState=h}if(n=l.interleaved,n!==null){g=n;do y=g.lane,le.lanes|=y,mo|=y,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function em(n){var s=ri(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,y=s.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do y=n(y,S.action),S=S.next;while(S!==g);Ai(y,s.memoizedState)||(Cn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function Dw(){}function Fw(n,s){var l=le,h=ri(),g=s(),y=!Ai(h.memoizedState,g);if(y&&(h.memoizedState=g,Cn=!0),h=h.queue,nm(zw.bind(null,l,h,n),[n]),h.getSnapshot!==s||y||Me!==null&&Me.memoizedState.tag&1){if(l.flags|=2048,oc(9,$w.bind(null,l,h,g,s),void 0,null),Ie===null)throw Error(e(349));go&30||Ow(l,s,g)}return g}function Ow(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function $w(n,s,l,h){s.value=l,s.getSnapshot=h,Hw(s)&&Bw(n)}function zw(n,s,l){return l(function(){Hw(s)&&Bw(n)})}function Hw(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Ai(n,l)}catch{return!0}}function Bw(n){var s=ws(n,1);s!==null&&Ci(s,n,1,-1)}function jw(n){var s=Wi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rc,lastRenderedState:n},s.queue=n,n=n.dispatch=IE.bind(null,le,n),[s.memoizedState,n]}function oc(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Uw(){return ri().memoizedState}function ef(n,s,l,h){var g=Wi();le.flags|=n,g.memoizedState=oc(1|s,l,void 0,h===void 0?null:h)}function nf(n,s,l,h){var g=ri();h=h===void 0?null:h;var y=void 0;if(Ce!==null){var S=Ce.memoizedState;if(y=S.destroy,h!==null&&Qg(h,S.deps)){g.memoizedState=oc(s,l,y,h);return}}le.flags|=n,g.memoizedState=oc(1|s,l,y,h)}function Vw(n,s){return ef(8390656,8,n,s)}function nm(n,s){return nf(2048,8,n,s)}function Gw(n,s){return nf(4,2,n,s)}function Ww(n,s){return nf(4,4,n,s)}function qw(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Xw(n,s,l){return l=l!=null?l.concat([n]):null,nf(4,4,qw.bind(null,s,n),l)}function im(){}function Yw(n,s){var l=ri();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Qg(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Kw(n,s){var l=ri();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Qg(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Qw(n,s,l){return go&21?(Ai(l,s)||(l=k0(),le.lanes|=l,mo|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Cn=!0),n.memoizedState=l)}function LE(n,s){var l=Gt;Gt=l!==0&&4>l?l:4,n(!0);var h=Kg.transition;Kg.transition={};try{n(!1),s()}finally{Gt=l,Kg.transition=h}}function Jw(){return ri().memoizedState}function ME(n,s,l){var h=Ar(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Zw(n))tA(s,l);else if(l=Rw(n,s,l,h),l!==null){var g=dn();Ci(l,n,h,g),eA(l,s,h)}}function IE(n,s,l){var h=Ar(n),g={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zw(n))tA(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,R=y(S,l);if(g.hasEagerState=!0,g.eagerState=R,Ai(R,S)){var L=s.interleaved;L===null?(g.next=g,Vg(s)):(g.next=L.next,L.next=g),s.interleaved=g;return}}catch{}finally{}l=Rw(n,s,g,h),l!==null&&(g=dn(),Ci(l,n,h,g),eA(l,s,h))}}function Zw(n){var s=n.alternate;return n===le||s!==null&&s===le}function tA(n,s){ic=tf=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function eA(n,s,l){if(l&4194240){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,rg(n,l)}}var sf={readContext:si,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},NE={readContext:si,useCallback:function(n,s){return Wi().memoizedState=[n,s===void 0?null:s],n},useContext:si,useEffect:Vw,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,ef(4194308,4,qw.bind(null,s,n),l)},useLayoutEffect:function(n,s){return ef(4194308,4,n,s)},useInsertionEffect:function(n,s){return ef(4,2,n,s)},useMemo:function(n,s){var l=Wi();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=Wi();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=ME.bind(null,le,n),[h.memoizedState,n]},useRef:function(n){var s=Wi();return n={current:n},s.memoizedState=n},useState:jw,useDebugValue:im,useDeferredValue:function(n){return Wi().memoizedState=n},useTransition:function(){var n=jw(!1),s=n[0];return n=LE.bind(null,n[1]),Wi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=le,g=Wi();if(ie){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),Ie===null)throw Error(e(349));go&30||Ow(h,s,l)}g.memoizedState=l;var y={value:l,getSnapshot:s};return g.queue=y,Vw(zw.bind(null,h,y,n),[n]),h.flags|=2048,oc(9,$w.bind(null,h,y,l,s),void 0,null),l},useId:function(){var n=Wi(),s=Ie.identifierPrefix;if(ie){var l=vs,h=ys;l=(h&~(1<<32-wi(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=sc++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=RE++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},DE={readContext:si,useCallback:Yw,useContext:si,useEffect:nm,useImperativeHandle:Xw,useInsertionEffect:Gw,useLayoutEffect:Ww,useMemo:Kw,useReducer:tm,useRef:Uw,useState:function(){return tm(rc)},useDebugValue:im,useDeferredValue:function(n){var s=ri();return Qw(s,Ce.memoizedState,n)},useTransition:function(){var n=tm(rc)[0],s=ri().memoizedState;return[n,s]},useMutableSource:Dw,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1},FE={readContext:si,useCallback:Yw,useContext:si,useEffect:nm,useImperativeHandle:Xw,useInsertionEffect:Gw,useLayoutEffect:Ww,useMemo:Kw,useReducer:em,useRef:Uw,useState:function(){return em(rc)},useDebugValue:im,useDeferredValue:function(n){var s=ri();return Ce===null?s.memoizedState=n:Qw(s,Ce.memoizedState,n)},useTransition:function(){var n=em(rc)[0],s=ri().memoizedState;return[n,s]},useMutableSource:Dw,useSyncExternalStore:Fw,useId:Jw,unstable_isNewReconciler:!1};function Si(n,s){if(n&&n.defaultProps){s=D({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function sm(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:D({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var rf={isMounted:function(n){return(n=n._reactInternals)?ao(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=dn(),g=Ar(n),y=As(h,g);y.payload=s,l!=null&&(y.callback=l),s=mr(n,y,g),s!==null&&(Ci(s,n,g,h),Kd(s,n,g))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=dn(),g=Ar(n),y=As(h,g);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=mr(n,y,g),s!==null&&(Ci(s,n,g,h),Kd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=dn(),h=Ar(n),g=As(l,h);g.tag=2,s!=null&&(g.callback=s),s=mr(n,g,h),s!==null&&(Ci(s,n,h,l),Kd(s,n,h))}};function nA(n,s,l,h,g,y,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,S):s.prototype&&s.prototype.isPureReactComponent?!Wu(l,h)||!Wu(g,y):!0}function iA(n,s,l){var h=!1,g=fr,y=s.contextType;return typeof y=="object"&&y!==null?y=si(y):(g=En(s)?uo:Ke.current,h=s.contextTypes,y=(h=h!=null)?Ya(n,g):fr),s=new s(l,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=rf,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function sA(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&rf.enqueueReplaceState(s,s.state,null)}function rm(n,s,l,h){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs={},Gg(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=si(y):(y=En(s)?uo:Ke.current,g.context=Ya(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(sm(n,s,y,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&rf.enqueueReplaceState(g,g.state,null),Qd(n,l,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function il(n,s){try{var l="",h=s;do l+=wt(h),h=h.return;while(h);var g=l}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function om(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function am(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function rA(n,s,l){l=As(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){df||(df=!0,Sm=h),am(n,s)},l}function oA(n,s,l){l=As(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;l.payload=function(){return h(g)},l.callback=function(){am(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){am(n,s),typeof h!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),l}function aA(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new OE;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(g.add(l),n=QE.bind(null,n,s,l),s.then(n,n))}function lA(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function uA(n,s,l,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=As(-1,1),s.tag=2,mr(l,s,1))),l.lanes|=1),n)}var $E=N.ReactCurrentOwner,Cn=!1;function hn(n,s,l,h){s.child=n===null?Pw(s,null,l,h):Za(s,n.child,l,h)}function cA(n,s,l,h,g){l=l.render;var y=s.ref;return el(s,g),h=Jg(n,s,l,h,y,g),l=Zg(),n!==null&&!Cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,bs(n,s,g)):(ie&&l&&Dg(s),s.flags|=1,hn(n,s,h,g),s.child)}function hA(n,s,l,h,g){if(n===null){var y=l.type;return typeof y=="function"&&!Pm(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,dA(n,s,y,h,g)):(n=vf(l.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&g)){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Wu,l(S,h)&&n.ref===s.ref)return bs(n,s,g)}return s.flags|=1,n=Sr(y,h),n.ref=s.ref,n.return=s,s.child=n}function dA(n,s,l,h,g){if(n!==null){var y=n.memoizedProps;if(Wu(y,h)&&n.ref===s.ref)if(Cn=!1,s.pendingProps=h=y,(n.lanes&g)!==0)n.flags&131072&&(Cn=!0);else return s.lanes=n.lanes,bs(n,s,g)}return lm(n,s,l,h,g)}function fA(n,s,l){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(rl,zn),zn|=l;else{if(!(l&1073741824))return n=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Jt(rl,zn),zn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Jt(rl,zn),zn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Jt(rl,zn),zn|=h;return hn(n,s,g,l),s.child}function pA(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function lm(n,s,l,h,g){var y=En(l)?uo:Ke.current;return y=Ya(s,y),el(s,g),l=Jg(n,s,l,h,y,g),h=Zg(),n!==null&&!Cn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,bs(n,s,g)):(ie&&h&&Dg(s),s.flags|=1,hn(n,s,l,g),s.child)}function gA(n,s,l,h,g){if(En(l)){var y=!0;jd(s)}else y=!1;if(el(s,g),s.stateNode===null)af(n,s),iA(s,l,h),rm(s,l,h,g),h=!0;else if(n===null){var S=s.stateNode,R=s.memoizedProps;S.props=R;var L=S.context,B=l.contextType;typeof B=="object"&&B!==null?B=si(B):(B=En(l)?uo:Ke.current,B=Ya(s,B));var q=l.getDerivedStateFromProps,X=typeof q=="function"||typeof S.getSnapshotBeforeUpdate=="function";X||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==h||L!==B)&&sA(s,S,h,B),gr=!1;var W=s.memoizedState;S.state=W,Qd(s,h,S,g),L=s.memoizedState,R!==h||W!==L||_n.current||gr?(typeof q=="function"&&(sm(s,l,q,h),L=s.memoizedState),(R=gr||nA(s,l,R,h,W,L,B))?(X||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=L),S.props=h,S.state=L,S.context=B,h=R):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{S=s.stateNode,Lw(n,s),R=s.memoizedProps,B=s.type===s.elementType?R:Si(s.type,R),S.props=B,X=s.pendingProps,W=S.context,L=l.contextType,typeof L=="object"&&L!==null?L=si(L):(L=En(l)?uo:Ke.current,L=Ya(s,L));var st=l.getDerivedStateFromProps;(q=typeof st=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(R!==X||W!==L)&&sA(s,S,h,L),gr=!1,W=s.memoizedState,S.state=W,Qd(s,h,S,g);var dt=s.memoizedState;R!==X||W!==dt||_n.current||gr?(typeof st=="function"&&(sm(s,l,st,h),dt=s.memoizedState),(B=gr||nA(s,l,B,h,W,dt,L)||!1)?(q||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,dt,L),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,dt,L)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=dt),S.props=h,S.state=dt,S.context=L,h=B):(typeof S.componentDidUpdate!="function"||R===n.memoizedProps&&W===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&W===n.memoizedState||(s.flags|=1024),h=!1)}return um(n,s,l,h,y,g)}function um(n,s,l,h,g,y){pA(n,s);var S=(s.flags&128)!==0;if(!h&&!S)return g&&Aw(s,l,!1),bs(n,s,y);h=s.stateNode,$E.current=s;var R=S&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&S?(s.child=Za(s,n.child,null,y),s.child=Za(s,null,R,y)):hn(n,s,R,y),s.memoizedState=h.state,g&&Aw(s,l,!0),s.child}function mA(n){var s=n.stateNode;s.pendingContext?vw(n,s.pendingContext,s.pendingContext!==s.context):s.context&&vw(n,s.context,!1),Wg(n,s.containerInfo)}function yA(n,s,l,h,g){return Ja(),zg(g),s.flags|=256,hn(n,s,l,h),s.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function hm(n){return{baseLanes:n,cachePool:null,transitions:null}}function vA(n,s,l){var h=s.pendingProps,g=ae.current,y=!1,S=(s.flags&128)!==0,R;if((R=S)||(R=n!==null&&n.memoizedState===null?!1:(g&2)!==0),R?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Jt(ae,g&1),n===null)return $g(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(S=h.children,n=h.fallback,y?(h=s.mode,y=s.child,S={mode:"hidden",children:S},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=S):y=wf(S,h,0,null),n=Ao(n,h,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=hm(l),s.memoizedState=cm,n):dm(s,S));if(g=n.memoizedState,g!==null&&(R=g.dehydrated,R!==null))return zE(n,s,S,h,R,g,l);if(y){y=h.fallback,S=s.mode,g=n.child,R=g.sibling;var L={mode:"hidden",children:h.children};return!(S&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=L,s.deletions=null):(h=Sr(g,L),h.subtreeFlags=g.subtreeFlags&14680064),R!==null?y=Sr(R,y):(y=Ao(y,S,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,S=n.child.memoizedState,S=S===null?hm(l):{baseLanes:S.baseLanes|l,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=n.childLanes&~l,s.memoizedState=cm,h}return y=n.child,n=y.sibling,h=Sr(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function dm(n,s){return s=wf({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function of(n,s,l,h){return h!==null&&zg(h),Za(s,n.child,null,l),n=dm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function zE(n,s,l,h,g,y,S){if(l)return s.flags&256?(s.flags&=-257,h=om(Error(e(422))),of(n,s,S,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=wf({mode:"visible",children:h.children},g,0,null),y=Ao(y,g,S,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&Za(s,n.child,null,S),s.child.memoizedState=hm(S),s.memoizedState=cm,y);if(!(s.mode&1))return of(n,s,S,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var R=h.dgst;return h=R,y=Error(e(419)),h=om(y,h,void 0),of(n,s,S,h)}if(R=(S&n.childLanes)!==0,Cn||R){if(h=Ie,h!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|S)?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,ws(n,g),Ci(h,n,g,-1))}return Tm(),h=om(Error(e(421))),of(n,s,S,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=JE.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,$n=hr(g.nextSibling),On=s,ie=!0,bi=null,n!==null&&(ni[ii++]=ys,ni[ii++]=vs,ni[ii++]=co,ys=n.id,vs=n.overflow,co=s),s=dm(s,h.children),s.flags|=4096,s)}function wA(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Ug(n.return,s,l)}function fm(n,s,l,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function AA(n,s,l){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(hn(n,s,h.children,l),h=ae.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wA(n,l,s);else if(n.tag===19)wA(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Jt(ae,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&Jd(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),fm(s,!1,g,l,y);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Jd(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}fm(s,!0,l,null,y);break;case"together":fm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function af(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function bs(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),mo|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=Sr(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Sr(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function HE(n,s,l){switch(s.tag){case 3:mA(s),Ja();break;case 5:Nw(s);break;case 1:En(s.type)&&jd(s);break;case 4:Wg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Jt(Xd,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Jt(ae,ae.current&1),s.flags|=128,null):l&s.child.childLanes?vA(n,s,l):(Jt(ae,ae.current&1),n=bs(n,s,l),n!==null?n.sibling:null);Jt(ae,ae.current&1);break;case 19:if(h=(l&s.childLanes)!==0,n.flags&128){if(h)return AA(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Jt(ae,ae.current),h)break;return null;case 22:case 23:return s.lanes=0,fA(n,s,l)}return bs(n,s,l)}var bA,pm,SA,_A;bA=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},pm=function(){},SA=function(n,s,l,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,po(Gi.current);var y=null;switch(l){case"input":g=Sn(n,g),h=Sn(n,h),y=[];break;case"select":g=D({},g,{value:void 0}),h=D({},h,{value:void 0}),y=[];break;case"textarea":g=Wp(n,g),h=Wp(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=zd)}Xp(l,h);var S;l=null;for(B in g)if(!h.hasOwnProperty(B)&&g.hasOwnProperty(B)&&g[B]!=null)if(B==="style"){var R=g[B];for(S in R)R.hasOwnProperty(S)&&(l||(l={}),l[S]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(r.hasOwnProperty(B)?y||(y=[]):(y=y||[]).push(B,null));for(B in h){var L=h[B];if(R=g!=null?g[B]:void 0,h.hasOwnProperty(B)&&L!==R&&(L!=null||R!=null))if(B==="style")if(R){for(S in R)!R.hasOwnProperty(S)||L&&L.hasOwnProperty(S)||(l||(l={}),l[S]="");for(S in L)L.hasOwnProperty(S)&&R[S]!==L[S]&&(l||(l={}),l[S]=L[S])}else l||(y||(y=[]),y.push(B,l)),l=L;else B==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,R=R?R.__html:void 0,L!=null&&R!==L&&(y=y||[]).push(B,L)):B==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(B,""+L):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(r.hasOwnProperty(B)?(L!=null&&B==="onScroll"&&te("scroll",n),y||R===L||(y=[])):(y=y||[]).push(B,L))}l&&(y=y||[]).push("style",l);var B=y;(s.updateQueue=B)&&(s.flags|=4)}},_A=function(n,s,l,h){l!==h&&(s.flags|=4)};function ac(n,s){if(!ie)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Je(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function BE(n,s,l){var h=s.pendingProps;switch(Fg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(s),null;case 1:return En(s.type)&&Bd(),Je(s),null;case 3:return h=s.stateNode,nl(),ee(_n),ee(Ke),Yg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Wd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,bi!==null&&(Cm(bi),bi=null))),pm(n,s),Je(s),null;case 5:qg(s);var g=po(nc.current);if(l=s.type,n!==null&&s.stateNode!=null)SA(n,s,l,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return Je(s),null}if(n=po(Gi.current),Wd(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Vi]=s,h[Qu]=y,n=(s.mode&1)!==0,l){case"dialog":te("cancel",h),te("close",h);break;case"iframe":case"object":case"embed":te("load",h);break;case"video":case"audio":for(g=0;g<Xu.length;g++)te(Xu[g],h);break;case"source":te("error",h);break;case"img":case"image":case"link":te("error",h),te("load",h);break;case"details":te("toggle",h);break;case"input":Vp(h,y),te("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},te("invalid",h);break;case"textarea":o0(h,y),te("invalid",h)}Xp(l,y),g=null;for(var S in y)if(y.hasOwnProperty(S)){var R=y[S];S==="children"?typeof R=="string"?h.textContent!==R&&(y.suppressHydrationWarning!==!0&&$d(h.textContent,R,n),g=["children",R]):typeof R=="number"&&h.textContent!==""+R&&(y.suppressHydrationWarning!==!0&&$d(h.textContent,R,n),g=["children",""+R]):r.hasOwnProperty(S)&&R!=null&&S==="onScroll"&&te("scroll",h)}switch(l){case"input":Xt(h),r0(h,y,!0);break;case"textarea":Xt(h),l0(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=zd)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=u0(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=S.createElement(l,{is:h.is}):(n=S.createElement(l),l==="select"&&(S=n,h.multiple?S.multiple=!0:h.size&&(S.size=h.size))):n=S.createElementNS(n,l),n[Vi]=s,n[Qu]=h,bA(n,s,!1,!1),s.stateNode=n;t:{switch(S=Yp(l,h),l){case"dialog":te("cancel",n),te("close",n),g=h;break;case"iframe":case"object":case"embed":te("load",n),g=h;break;case"video":case"audio":for(g=0;g<Xu.length;g++)te(Xu[g],n);g=h;break;case"source":te("error",n),g=h;break;case"img":case"image":case"link":te("error",n),te("load",n),g=h;break;case"details":te("toggle",n),g=h;break;case"input":Vp(n,h),g=Sn(n,h),te("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=D({},h,{value:void 0}),te("invalid",n);break;case"textarea":o0(n,h),g=Wp(n,h),te("invalid",n);break;default:g=h}Xp(l,g),R=g;for(y in R)if(R.hasOwnProperty(y)){var L=R[y];y==="style"?d0(n,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&c0(n,L)):y==="children"?typeof L=="string"?(l!=="textarea"||L!=="")&&Pu(n,L):typeof L=="number"&&Pu(n,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?L!=null&&y==="onScroll"&&te("scroll",n):L!=null&&F(n,y,L,S))}switch(l){case"input":Xt(n),r0(n,h,!1);break;case"textarea":Xt(n),l0(n);break;case"option":h.value!=null&&n.setAttribute("value",""+bt(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?Oa(n,!!h.multiple,y,!1):h.defaultValue!=null&&Oa(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=zd)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Je(s),null;case 6:if(n&&s.stateNode!=null)_A(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=po(nc.current),po(Gi.current),Wd(s)){if(h=s.stateNode,l=s.memoizedProps,h[Vi]=s,(y=h.nodeValue!==l)&&(n=On,n!==null))switch(n.tag){case 3:$d(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$d(h.nodeValue,l,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Vi]=s,s.stateNode=h}return Je(s),null;case 13:if(ee(ae),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ie&&$n!==null&&s.mode&1&&!(s.flags&128))xw(),Ja(),s.flags|=98560,y=!1;else if(y=Wd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[Vi]=s}else Ja(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Je(s),y=!1}else bi!==null&&(Cm(bi),bi=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||ae.current&1?xe===0&&(xe=3):Tm())),s.updateQueue!==null&&(s.flags|=4),Je(s),null);case 4:return nl(),pm(n,s),n===null&&Yu(s.stateNode.containerInfo),Je(s),null;case 10:return jg(s.type._context),Je(s),null;case 17:return En(s.type)&&Bd(),Je(s),null;case 19:if(ee(ae),y=s.memoizedState,y===null)return Je(s),null;if(h=(s.flags&128)!==0,S=y.rendering,S===null)if(h)ac(y,!1);else{if(xe!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(S=Jd(n),S!==null){for(s.flags|=128,ac(y,!1),h=S.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,n=h,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,n=S.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Jt(ae,ae.current&1|2),s.child}n=n.sibling}y.tail!==null&&pe()>ol&&(s.flags|=128,h=!0,ac(y,!1),s.lanes=4194304)}else{if(!h)if(n=Jd(S),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ac(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!ie)return Je(s),null}else 2*pe()-y.renderingStartTime>ol&&l!==1073741824&&(s.flags|=128,h=!0,ac(y,!1),s.lanes=4194304);y.isBackwards?(S.sibling=s.child,s.child=S):(l=y.last,l!==null?l.sibling=S:s.child=S,y.last=S)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=pe(),s.sibling=null,l=ae.current,Jt(ae,h?l&1|2:l&1),s):(Je(s),null);case 22:case 23:return km(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?zn&1073741824&&(Je(s),s.subtreeFlags&6&&(s.flags|=8192)):Je(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function jE(n,s){switch(Fg(s),s.tag){case 1:return En(s.type)&&Bd(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return nl(),ee(_n),ee(Ke),Yg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return qg(s),null;case 13:if(ee(ae),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Ja()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(ae),null;case 4:return nl(),null;case 10:return jg(s.type._context),null;case 22:case 23:return km(),null;case 24:return null;default:return null}}var lf=!1,Ze=!1,UE=typeof WeakSet=="function"?WeakSet:Set,lt=null;function sl(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){de(n,s,h)}else l.current=null}function gm(n,s,l){try{l()}catch(h){de(n,s,h)}}var EA=!1;function VE(n,s){if(kg=kd,n=nw(),wg(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var S=0,R=-1,L=-1,B=0,q=0,X=n,W=null;e:for(;;){for(var st;X!==l||g!==0&&X.nodeType!==3||(R=S+g),X!==y||h!==0&&X.nodeType!==3||(L=S+h),X.nodeType===3&&(S+=X.nodeValue.length),(st=X.firstChild)!==null;)W=X,X=st;for(;;){if(X===n)break e;if(W===l&&++B===g&&(R=S),W===y&&++q===h&&(L=S),(st=X.nextSibling)!==null)break;X=W,W=X.parentNode}X=st}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Tg={focusedElem:n,selectionRange:l},kd=!1,lt=s;lt!==null;)if(s=lt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,lt=n;else for(;lt!==null;){s=lt;try{var dt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var pt=dt.memoizedProps,ge=dt.memoizedState,O=s.stateNode,I=O.getSnapshotBeforeUpdate(s.elementType===s.type?pt:Si(s.type,pt),ge);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(K){de(s,s.return,K)}if(n=s.sibling,n!==null){n.return=s.return,lt=n;break}lt=s.return}return dt=EA,EA=!1,dt}function lc(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&gm(s,l,y)}g=g.next}while(g!==h)}}function uf(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function mm(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function CA(n){var s=n.alternate;s!==null&&(n.alternate=null,CA(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Vi],delete s[Qu],delete s[Mg],delete s[xE],delete s[kE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xA(n){return n.tag===5||n.tag===3||n.tag===4}function kA(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||xA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ym(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=zd));else if(h!==4&&(n=n.child,n!==null))for(ym(n,s,l),n=n.sibling;n!==null;)ym(n,s,l),n=n.sibling}function vm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(vm(n,s,l),n=n.sibling;n!==null;)vm(n,s,l),n=n.sibling}var je=null,_i=!1;function yr(n,s,l){for(l=l.child;l!==null;)TA(n,s,l),l=l.sibling}function TA(n,s,l){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(bd,l)}catch{}switch(l.tag){case 5:Ze||sl(l,s);case 6:var h=je,g=_i;je=null,yr(n,s,l),je=h,_i=g,je!==null&&(_i?(n=je,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):je.removeChild(l.stateNode));break;case 18:je!==null&&(_i?(n=je,l=l.stateNode,n.nodeType===8?Lg(n.parentNode,l):n.nodeType===1&&Lg(n,l),Hu(n)):Lg(je,l.stateNode));break;case 4:h=je,g=_i,je=l.stateNode.containerInfo,_i=!0,yr(n,s,l),je=h,_i=g;break;case 0:case 11:case 14:case 15:if(!Ze&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,S=y.destroy;y=y.tag,S!==void 0&&(y&2||y&4)&&gm(l,s,S),g=g.next}while(g!==h)}yr(n,s,l);break;case 1:if(!Ze&&(sl(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(R){de(l,s,R)}yr(n,s,l);break;case 21:yr(n,s,l);break;case 22:l.mode&1?(Ze=(h=Ze)||l.memoizedState!==null,yr(n,s,l),Ze=h):yr(n,s,l);break;default:yr(n,s,l)}}function PA(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new UE),s.forEach(function(h){var g=ZE.bind(null,n,h);l.has(h)||(l.add(h),h.then(g,g))})}}function Ei(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];try{var y=n,S=s,R=S;t:for(;R!==null;){switch(R.tag){case 5:je=R.stateNode,_i=!1;break t;case 3:je=R.stateNode.containerInfo,_i=!0;break t;case 4:je=R.stateNode.containerInfo,_i=!0;break t}R=R.return}if(je===null)throw Error(e(160));TA(y,S,g),je=null,_i=!1;var L=g.alternate;L!==null&&(L.return=null),g.return=null}catch(B){de(g,s,B)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)RA(s,n),s=s.sibling}function RA(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ei(s,n),qi(n),h&4){try{lc(3,n,n.return),uf(3,n)}catch(pt){de(n,n.return,pt)}try{lc(5,n,n.return)}catch(pt){de(n,n.return,pt)}}break;case 1:Ei(s,n),qi(n),h&512&&l!==null&&sl(l,l.return);break;case 5:if(Ei(s,n),qi(n),h&512&&l!==null&&sl(l,l.return),n.flags&32){var g=n.stateNode;try{Pu(g,"")}catch(pt){de(n,n.return,pt)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,S=l!==null?l.memoizedProps:y,R=n.type,L=n.updateQueue;if(n.updateQueue=null,L!==null)try{R==="input"&&y.type==="radio"&&y.name!=null&&Fa(g,y),Yp(R,S);var B=Yp(R,y);for(S=0;S<L.length;S+=2){var q=L[S],X=L[S+1];q==="style"?d0(g,X):q==="dangerouslySetInnerHTML"?c0(g,X):q==="children"?Pu(g,X):F(g,q,X,B)}switch(R){case"input":ku(g,y);break;case"textarea":a0(g,y);break;case"select":var W=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var st=y.value;st!=null?Oa(g,!!y.multiple,st,!1):W!==!!y.multiple&&(y.defaultValue!=null?Oa(g,!!y.multiple,y.defaultValue,!0):Oa(g,!!y.multiple,y.multiple?[]:"",!1))}g[Qu]=y}catch(pt){de(n,n.return,pt)}}break;case 6:if(Ei(s,n),qi(n),h&4){if(n.stateNode===null)throw Error(e(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(pt){de(n,n.return,pt)}}break;case 3:if(Ei(s,n),qi(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Hu(s.containerInfo)}catch(pt){de(n,n.return,pt)}break;case 4:Ei(s,n),qi(n);break;case 13:Ei(s,n),qi(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(bm=pe())),h&4&&PA(n);break;case 22:if(q=l!==null&&l.memoizedState!==null,n.mode&1?(Ze=(B=Ze)||q,Ei(s,n),Ze=B):Ei(s,n),qi(n),h&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!q&&n.mode&1)for(lt=n,q=n.child;q!==null;){for(X=lt=q;lt!==null;){switch(W=lt,st=W.child,W.tag){case 0:case 11:case 14:case 15:lc(4,W,W.return);break;case 1:sl(W,W.return);var dt=W.stateNode;if(typeof dt.componentWillUnmount=="function"){h=W,l=W.return;try{s=h,dt.props=s.memoizedProps,dt.state=s.memoizedState,dt.componentWillUnmount()}catch(pt){de(h,l,pt)}}break;case 5:sl(W,W.return);break;case 22:if(W.memoizedState!==null){IA(X);continue}}st!==null?(st.return=W,lt=st):IA(X)}q=q.sibling}t:for(q=null,X=n;;){if(X.tag===5){if(q===null){q=X;try{g=X.stateNode,B?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(R=X.stateNode,L=X.memoizedProps.style,S=L!=null&&L.hasOwnProperty("display")?L.display:null,R.style.display=h0("display",S))}catch(pt){de(n,n.return,pt)}}}else if(X.tag===6){if(q===null)try{X.stateNode.nodeValue=B?"":X.memoizedProps}catch(pt){de(n,n.return,pt)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break t;for(;X.sibling===null;){if(X.return===null||X.return===n)break t;q===X&&(q=null),X=X.return}q===X&&(q=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Ei(s,n),qi(n),h&4&&PA(n);break;case 21:break;default:Ei(s,n),qi(n)}}function qi(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(xA(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(Pu(g,""),h.flags&=-33);var y=kA(n);vm(n,y,g);break;case 3:case 4:var S=h.stateNode.containerInfo,R=kA(n);ym(n,R,S);break;default:throw Error(e(161))}}catch(L){de(n,n.return,L)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function GE(n,s,l){lt=n,LA(n)}function LA(n,s,l){for(var h=(n.mode&1)!==0;lt!==null;){var g=lt,y=g.child;if(g.tag===22&&h){var S=g.memoizedState!==null||lf;if(!S){var R=g.alternate,L=R!==null&&R.memoizedState!==null||Ze;R=lf;var B=Ze;if(lf=S,(Ze=L)&&!B)for(lt=g;lt!==null;)S=lt,L=S.child,S.tag===22&&S.memoizedState!==null?NA(g):L!==null?(L.return=S,lt=L):NA(g);for(;y!==null;)lt=y,LA(y),y=y.sibling;lt=g,lf=R,Ze=B}MA(n)}else g.subtreeFlags&8772&&y!==null?(y.return=g,lt=y):MA(n)}}function MA(n){for(;lt!==null;){var s=lt;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ze||uf(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ze)if(l===null)h.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:Si(s.type,l.memoizedProps);h.componentDidUpdate(g,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Iw(s,y,h);break;case 3:var S=s.updateQueue;if(S!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Iw(s,S,l)}break;case 5:var R=s.stateNode;if(l===null&&s.flags&4){l=R;var L=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&l.focus();break;case"img":L.src&&(l.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var B=s.alternate;if(B!==null){var q=B.memoizedState;if(q!==null){var X=q.dehydrated;X!==null&&Hu(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Ze||s.flags&512&&mm(s)}catch(W){de(s,s.return,W)}}if(s===n){lt=null;break}if(l=s.sibling,l!==null){l.return=s.return,lt=l;break}lt=s.return}}function IA(n){for(;lt!==null;){var s=lt;if(s===n){lt=null;break}var l=s.sibling;if(l!==null){l.return=s.return,lt=l;break}lt=s.return}}function NA(n){for(;lt!==null;){var s=lt;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{uf(4,s)}catch(L){de(s,l,L)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(L){de(s,g,L)}}var y=s.return;try{mm(s)}catch(L){de(s,y,L)}break;case 5:var S=s.return;try{mm(s)}catch(L){de(s,S,L)}}}catch(L){de(s,s.return,L)}if(s===n){lt=null;break}var R=s.sibling;if(R!==null){R.return=s.return,lt=R;break}lt=s.return}}var WE=Math.ceil,cf=N.ReactCurrentDispatcher,wm=N.ReactCurrentOwner,oi=N.ReactCurrentBatchConfig,zt=0,Ie=null,we=null,Ue=0,zn=0,rl=dr(0),xe=0,uc=null,mo=0,hf=0,Am=0,cc=null,xn=null,bm=0,ol=1/0,Ss=null,df=!1,Sm=null,vr=null,ff=!1,wr=null,pf=0,hc=0,_m=null,gf=-1,mf=0;function dn(){return zt&6?pe():gf!==-1?gf:gf=pe()}function Ar(n){return n.mode&1?zt&2&&Ue!==0?Ue&-Ue:PE.transition!==null?(mf===0&&(mf=k0()),mf):(n=Gt,n!==0||(n=window.event,n=n===void 0?16:F0(n.type)),n):1}function Ci(n,s,l,h){if(50<hc)throw hc=0,_m=null,Error(e(185));Du(n,l,h),(!(zt&2)||n!==Ie)&&(n===Ie&&(!(zt&2)&&(hf|=l),xe===4&&br(n,Ue)),kn(n,h),l===1&&zt===0&&!(s.mode&1)&&(ol=pe()+500,Ud&&pr()))}function kn(n,s){var l=n.callbackNode;P_(n,s);var h=Ed(n,n===Ie?Ue:0);if(h===0)l!==null&&E0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&E0(l),s===1)n.tag===0?TE(FA.bind(null,n)):bw(FA.bind(null,n)),EE(function(){!(zt&6)&&pr()}),l=null;else{switch(T0(h)){case 1:l=ng;break;case 4:l=C0;break;case 16:l=Ad;break;case 536870912:l=x0;break;default:l=Ad}l=VA(l,DA.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function DA(n,s){if(gf=-1,mf=0,zt&6)throw Error(e(327));var l=n.callbackNode;if(al()&&n.callbackNode!==l)return null;var h=Ed(n,n===Ie?Ue:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=yf(n,h);else{s=h;var g=zt;zt|=2;var y=$A();(Ie!==n||Ue!==s)&&(Ss=null,ol=pe()+500,vo(n,s));do try{YE();break}catch(R){OA(n,R)}while(!0);Bg(),cf.current=y,zt=g,we!==null?s=0:(Ie=null,Ue=0,s=xe)}if(s!==0){if(s===2&&(g=ig(n),g!==0&&(h=g,s=Em(n,g))),s===1)throw l=uc,vo(n,0),br(n,h),kn(n,pe()),l;if(s===6)br(n,h);else{if(g=n.current.alternate,!(h&30)&&!qE(g)&&(s=yf(n,h),s===2&&(y=ig(n),y!==0&&(h=y,s=Em(n,y))),s===1))throw l=uc,vo(n,0),br(n,h),kn(n,pe()),l;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:wo(n,xn,Ss);break;case 3:if(br(n,h),(h&130023424)===h&&(s=bm+500-pe(),10<s)){if(Ed(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){dn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Rg(wo.bind(null,n,xn,Ss),s);break}wo(n,xn,Ss);break;case 4:if(br(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var S=31-wi(h);y=1<<S,S=s[S],S>g&&(g=S),h&=~y}if(h=g,h=pe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*WE(h/1960))-h,10<h){n.timeoutHandle=Rg(wo.bind(null,n,xn,Ss),h);break}wo(n,xn,Ss);break;case 5:wo(n,xn,Ss);break;default:throw Error(e(329))}}}return kn(n,pe()),n.callbackNode===l?DA.bind(null,n):null}function Em(n,s){var l=cc;return n.current.memoizedState.isDehydrated&&(vo(n,s).flags|=256),n=yf(n,s),n!==2&&(s=xn,xn=l,s!==null&&Cm(s)),n}function Cm(n){xn===null?xn=n:xn.push.apply(xn,n)}function qE(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!Ai(y(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function br(n,s){for(s&=~Am,s&=~hf,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-wi(s),h=1<<l;n[l]=-1,s&=~h}}function FA(n){if(zt&6)throw Error(e(327));al();var s=Ed(n,0);if(!(s&1))return kn(n,pe()),null;var l=yf(n,s);if(n.tag!==0&&l===2){var h=ig(n);h!==0&&(s=h,l=Em(n,h))}if(l===1)throw l=uc,vo(n,0),br(n,s),kn(n,pe()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,wo(n,xn,Ss),kn(n,pe()),null}function xm(n,s){var l=zt;zt|=1;try{return n(s)}finally{zt=l,zt===0&&(ol=pe()+500,Ud&&pr())}}function yo(n){wr!==null&&wr.tag===0&&!(zt&6)&&al();var s=zt;zt|=1;var l=oi.transition,h=Gt;try{if(oi.transition=null,Gt=1,n)return n()}finally{Gt=h,oi.transition=l,zt=s,!(zt&6)&&pr()}}function km(){zn=rl.current,ee(rl)}function vo(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,_E(l)),we!==null)for(l=we.return;l!==null;){var h=l;switch(Fg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Bd();break;case 3:nl(),ee(_n),ee(Ke),Yg();break;case 5:qg(h);break;case 4:nl();break;case 13:ee(ae);break;case 19:ee(ae);break;case 10:jg(h.type._context);break;case 22:case 23:km()}l=l.return}if(Ie=n,we=n=Sr(n.current,null),Ue=zn=s,xe=0,uc=null,Am=hf=mo=0,xn=cc=null,fo!==null){for(s=0;s<fo.length;s++)if(l=fo[s],h=l.interleaved,h!==null){l.interleaved=null;var g=h.next,y=l.pending;if(y!==null){var S=y.next;y.next=g,h.next=S}l.pending=h}fo=null}return n}function OA(n,s){do{var l=we;try{if(Bg(),Zd.current=sf,tf){for(var h=le.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}tf=!1}if(go=0,Me=Ce=le=null,ic=!1,sc=0,wm.current=null,l===null||l.return===null){xe=1,uc=s,we=null;break}t:{var y=n,S=l.return,R=l,L=s;if(s=Ue,R.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var B=L,q=R,X=q.tag;if(!(q.mode&1)&&(X===0||X===11||X===15)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var st=lA(S);if(st!==null){st.flags&=-257,uA(st,S,R,y,s),st.mode&1&&aA(y,B,s),s=st,L=B;var dt=s.updateQueue;if(dt===null){var pt=new Set;pt.add(L),s.updateQueue=pt}else dt.add(L);break t}else{if(!(s&1)){aA(y,B,s),Tm();break t}L=Error(e(426))}}else if(ie&&R.mode&1){var ge=lA(S);if(ge!==null){!(ge.flags&65536)&&(ge.flags|=256),uA(ge,S,R,y,s),zg(il(L,R));break t}}y=L=il(L,R),xe!==4&&(xe=2),cc===null?cc=[y]:cc.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var O=rA(y,L,s);Mw(y,O);break t;case 1:R=L;var I=y.type,z=y.stateNode;if(!(y.flags&128)&&(typeof I.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(vr===null||!vr.has(z)))){y.flags|=65536,s&=-s,y.lanes|=s;var K=oA(y,R,s);Mw(y,K);break t}}y=y.return}while(y!==null)}HA(l)}catch(gt){s=gt,we===l&&l!==null&&(we=l=l.return);continue}break}while(!0)}function $A(){var n=cf.current;return cf.current=sf,n===null?sf:n}function Tm(){(xe===0||xe===3||xe===2)&&(xe=4),Ie===null||!(mo&268435455)&&!(hf&268435455)||br(Ie,Ue)}function yf(n,s){var l=zt;zt|=2;var h=$A();(Ie!==n||Ue!==s)&&(Ss=null,vo(n,s));do try{XE();break}catch(g){OA(n,g)}while(!0);if(Bg(),zt=l,cf.current=h,we!==null)throw Error(e(261));return Ie=null,Ue=0,xe}function XE(){for(;we!==null;)zA(we)}function YE(){for(;we!==null&&!A_();)zA(we)}function zA(n){var s=UA(n.alternate,n,zn);n.memoizedProps=n.pendingProps,s===null?HA(n):we=s,wm.current=null}function HA(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=jE(l,s),l!==null){l.flags&=32767,we=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xe=6,we=null;return}}else if(l=BE(l,s,zn),l!==null){we=l;return}if(s=s.sibling,s!==null){we=s;return}we=s=n}while(s!==null);xe===0&&(xe=5)}function wo(n,s,l){var h=Gt,g=oi.transition;try{oi.transition=null,Gt=1,KE(n,s,l,h)}finally{oi.transition=g,Gt=h}return null}function KE(n,s,l,h){do al();while(wr!==null);if(zt&6)throw Error(e(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(R_(n,y),n===Ie&&(we=Ie=null,Ue=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||ff||(ff=!0,VA(Ad,function(){return al(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=oi.transition,oi.transition=null;var S=Gt;Gt=1;var R=zt;zt|=4,wm.current=null,VE(n,l),RA(l,n),mE(Tg),kd=!!kg,Tg=kg=null,n.current=l,GE(l),b_(),zt=R,Gt=S,oi.transition=y}else n.current=l;if(ff&&(ff=!1,wr=n,pf=g),y=n.pendingLanes,y===0&&(vr=null),E_(l.stateNode),kn(n,pe()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)g=s[l],h(g.value,{componentStack:g.stack,digest:g.digest});if(df)throw df=!1,n=Sm,Sm=null,n;return pf&1&&n.tag!==0&&al(),y=n.pendingLanes,y&1?n===_m?hc++:(hc=0,_m=n):hc=0,pr(),null}function al(){if(wr!==null){var n=T0(pf),s=oi.transition,l=Gt;try{if(oi.transition=null,Gt=16>n?16:n,wr===null)var h=!1;else{if(n=wr,wr=null,pf=0,zt&6)throw Error(e(331));var g=zt;for(zt|=4,lt=n.current;lt!==null;){var y=lt,S=y.child;if(lt.flags&16){var R=y.deletions;if(R!==null){for(var L=0;L<R.length;L++){var B=R[L];for(lt=B;lt!==null;){var q=lt;switch(q.tag){case 0:case 11:case 15:lc(8,q,y)}var X=q.child;if(X!==null)X.return=q,lt=X;else for(;lt!==null;){q=lt;var W=q.sibling,st=q.return;if(CA(q),q===B){lt=null;break}if(W!==null){W.return=st,lt=W;break}lt=st}}}var dt=y.alternate;if(dt!==null){var pt=dt.child;if(pt!==null){dt.child=null;do{var ge=pt.sibling;pt.sibling=null,pt=ge}while(pt!==null)}}lt=y}}if(y.subtreeFlags&2064&&S!==null)S.return=y,lt=S;else t:for(;lt!==null;){if(y=lt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:lc(9,y,y.return)}var O=y.sibling;if(O!==null){O.return=y.return,lt=O;break t}lt=y.return}}var I=n.current;for(lt=I;lt!==null;){S=lt;var z=S.child;if(S.subtreeFlags&2064&&z!==null)z.return=S,lt=z;else t:for(S=I;lt!==null;){if(R=lt,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:uf(9,R)}}catch(gt){de(R,R.return,gt)}if(R===S){lt=null;break t}var K=R.sibling;if(K!==null){K.return=R.return,lt=K;break t}lt=R.return}}if(zt=g,pr(),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(bd,n)}catch{}h=!0}return h}finally{Gt=l,oi.transition=s}}return!1}function BA(n,s,l){s=il(l,s),s=rA(n,s,1),n=mr(n,s,1),s=dn(),n!==null&&(Du(n,1,s),kn(n,s))}function de(n,s,l){if(n.tag===3)BA(n,n,l);else for(;s!==null;){if(s.tag===3){BA(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(vr===null||!vr.has(h))){n=il(l,n),n=oA(s,n,1),s=mr(s,n,1),n=dn(),s!==null&&(Du(s,1,n),kn(s,n));break}}s=s.return}}function QE(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=dn(),n.pingedLanes|=n.suspendedLanes&l,Ie===n&&(Ue&l)===l&&(xe===4||xe===3&&(Ue&130023424)===Ue&&500>pe()-bm?vo(n,0):Am|=l),kn(n,s)}function jA(n,s){s===0&&(n.mode&1?(s=_d,_d<<=1,!(_d&130023424)&&(_d=4194304)):s=1);var l=dn();n=ws(n,s),n!==null&&(Du(n,s,l),kn(n,l))}function JE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),jA(n,l)}function ZE(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),jA(n,l)}var UA;UA=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||_n.current)Cn=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return Cn=!1,HE(n,s,l);Cn=!!(n.flags&131072)}else Cn=!1,ie&&s.flags&1048576&&Sw(s,Gd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;af(n,s),n=s.pendingProps;var g=Ya(s,Ke.current);el(s,l),g=Jg(null,s,h,n,g,l);var y=Zg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,En(h)?(y=!0,jd(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Gg(s),g.updater=rf,s.stateNode=g,g._reactInternals=s,rm(s,h,n,l),s=um(null,s,h,!0,y,l)):(s.tag=0,ie&&y&&Dg(s),hn(null,s,g,l),s=s.child),s;case 16:h=s.elementType;t:{switch(af(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=eC(h),n=Si(h,n),g){case 0:s=lm(null,s,h,n,l);break t;case 1:s=gA(null,s,h,n,l);break t;case 11:s=cA(null,s,h,n,l);break t;case 14:s=hA(null,s,h,Si(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:Si(h,g),lm(n,s,h,g,l);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:Si(h,g),gA(n,s,h,g,l);case 3:t:{if(mA(s),n===null)throw Error(e(387));h=s.pendingProps,y=s.memoizedState,g=y.element,Lw(n,s),Qd(s,h,null,l);var S=s.memoizedState;if(h=S.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=il(Error(e(423)),s),s=yA(n,s,h,l,g);break t}else if(h!==g){g=il(Error(e(424)),s),s=yA(n,s,h,l,g);break t}else for($n=hr(s.stateNode.containerInfo.firstChild),On=s,ie=!0,bi=null,l=Pw(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ja(),h===g){s=bs(n,s,l);break t}hn(n,s,h,l)}s=s.child}return s;case 5:return Nw(s),n===null&&$g(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,S=g.children,Pg(h,g)?S=null:y!==null&&Pg(h,y)&&(s.flags|=32),pA(n,s),hn(n,s,S,l),s.child;case 6:return n===null&&$g(s),null;case 13:return vA(n,s,l);case 4:return Wg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Za(s,null,h,l):hn(n,s,h,l),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:Si(h,g),cA(n,s,h,g,l);case 7:return hn(n,s,s.pendingProps,l),s.child;case 8:return hn(n,s,s.pendingProps.children,l),s.child;case 12:return hn(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,S=g.value,Jt(Xd,h._currentValue),h._currentValue=S,y!==null)if(Ai(y.value,S)){if(y.children===g.children&&!_n.current){s=bs(n,s,l);break t}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var R=y.dependencies;if(R!==null){S=y.child;for(var L=R.firstContext;L!==null;){if(L.context===h){if(y.tag===1){L=As(-1,l&-l),L.tag=2;var B=y.updateQueue;if(B!==null){B=B.shared;var q=B.pending;q===null?L.next=L:(L.next=q.next,q.next=L),B.pending=L}}y.lanes|=l,L=y.alternate,L!==null&&(L.lanes|=l),Ug(y.return,l,s),R.lanes|=l;break}L=L.next}}else if(y.tag===10)S=y.type===s.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(e(341));S.lanes|=l,R=S.alternate,R!==null&&(R.lanes|=l),Ug(S,l,s),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}hn(n,s,g.children,l),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,el(s,l),g=si(g),h=h(g),s.flags|=1,hn(n,s,h,l),s.child;case 14:return h=s.type,g=Si(h,s.pendingProps),g=Si(h.type,g),hA(n,s,h,g,l);case 15:return dA(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:Si(h,g),af(n,s),s.tag=1,En(h)?(n=!0,jd(s)):n=!1,el(s,l),iA(s,h,g),rm(s,h,g,l),um(null,s,h,!0,n,l);case 19:return AA(n,s,l);case 22:return fA(n,s,l)}throw Error(e(156,s.tag))};function VA(n,s){return _0(n,s)}function tC(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(n,s,l,h){return new tC(n,s,l,h)}function Pm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function eC(n){if(typeof n=="function")return Pm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Nt)return 11;if(n===Bt)return 14}return 2}function Sr(n,s){var l=n.alternate;return l===null?(l=ai(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function vf(n,s,l,h,g,y){var S=2;if(h=n,typeof n=="function")Pm(n)&&(S=1);else if(typeof n=="string")S=5;else t:switch(n){case U:return Ao(l.children,g,y,s);case Q:S=8,g|=8;break;case nt:return n=ai(12,l,s,g|2),n.elementType=nt,n.lanes=y,n;case Tt:return n=ai(13,l,s,g),n.elementType=Tt,n.lanes=y,n;case vt:return n=ai(19,l,s,g),n.elementType=vt,n.lanes=y,n;case Z:return wf(l,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case At:S=10;break t;case ft:S=9;break t;case Nt:S=11;break t;case Bt:S=14;break t;case J:S=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=ai(S,l,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function Ao(n,s,l,h){return n=ai(7,n,h,s),n.lanes=l,n}function wf(n,s,l,h){return n=ai(22,n,h,s),n.elementType=Z,n.lanes=l,n.stateNode={isHidden:!1},n}function Rm(n,s,l){return n=ai(6,n,null,s),n.lanes=l,n}function Lm(n,s,l){return s=ai(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function nC(n,s,l,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sg(0),this.expirationTimes=sg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sg(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Mm(n,s,l,h,g,y,S,R,L){return n=new nC(n,s,l,R,L),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ai(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gg(y),n}function iC(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function GA(n){if(!n)return fr;n=n._reactInternals;t:{if(ao(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(En(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(En(l))return ww(n,l,s)}return s}function WA(n,s,l,h,g,y,S,R,L){return n=Mm(l,h,!0,n,g,y,S,R,L),n.context=GA(null),l=n.current,h=dn(),g=Ar(l),y=As(h,g),y.callback=s??null,mr(l,y,g),n.current.lanes=g,Du(n,g,h),kn(n,h),n}function Af(n,s,l,h){var g=s.current,y=dn(),S=Ar(g);return l=GA(l),s.context===null?s.context=l:s.pendingContext=l,s=As(y,S),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=mr(g,s,S),n!==null&&(Ci(n,g,S,y),Kd(n,g,S)),S}function bf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function qA(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Im(n,s){qA(n,s),(n=n.alternate)&&qA(n,s)}var XA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Nm(n){this._internalRoot=n}Sf.prototype.render=Nm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));Af(n,s,null,null)},Sf.prototype.unmount=Nm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;yo(function(){Af(null,n,null,null)}),s[gs]=null}};function Sf(n){this._internalRoot=n}Sf.prototype.unstable_scheduleHydration=function(n){if(n){var s=L0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<lr.length&&s!==0&&s<lr[l].priority;l++);lr.splice(l,0,n),l===0&&N0(n)}};function Dm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function _f(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function YA(){}function sC(n,s,l,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var B=bf(S);y.call(B)}}var S=WA(s,h,n,0,null,!1,!1,"",YA);return n._reactRootContainer=S,n[gs]=S.current,Yu(n.nodeType===8?n.parentNode:n),yo(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var R=h;h=function(){var B=bf(L);R.call(B)}}var L=Mm(n,0,!1,null,null,!1,!1,"",YA);return n._reactRootContainer=L,n[gs]=L.current,Yu(n.nodeType===8?n.parentNode:n),yo(function(){Af(s,L,l,h)}),L}function Ef(n,s,l,h,g){var y=l._reactRootContainer;if(y){var S=y;if(typeof g=="function"){var R=g;g=function(){var L=bf(S);R.call(L)}}Af(s,S,n,g)}else S=sC(l,s,n,g,h);return bf(S)}P0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Nu(s.pendingLanes);l!==0&&(rg(s,l|1),kn(s,pe()),!(zt&6)&&(ol=pe()+500,pr()))}break;case 13:yo(function(){var h=ws(n,1);if(h!==null){var g=dn();Ci(h,n,1,g)}}),Im(n,1)}},og=function(n){if(n.tag===13){var s=ws(n,134217728);if(s!==null){var l=dn();Ci(s,n,134217728,l)}Im(n,134217728)}},R0=function(n){if(n.tag===13){var s=Ar(n),l=ws(n,s);if(l!==null){var h=dn();Ci(l,n,s,h)}Im(n,s)}},L0=function(){return Gt},M0=function(n,s){var l=Gt;try{return Gt=n,s()}finally{Gt=l}},Jp=function(n,s,l){switch(s){case"input":if(ku(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var g=Hd(h);if(!g)throw Error(e(90));cn(h),ku(h,g)}}}break;case"textarea":a0(n,l);break;case"select":s=l.value,s!=null&&Oa(n,!!l.multiple,s,!1)}},m0=xm,y0=yo;var rC={usingClientEntryPoint:!1,Events:[Ju,qa,Hd,p0,g0,xm]},dc={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oC={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=b0(n),n===null?null:n.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cf.isDisabled&&Cf.supportsFiber)try{bd=Cf.inject(oC),Ui=Cf}catch{}}return Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rC,Tn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dm(s))throw Error(e(200));return iC(n,s,null,l)},Tn.createRoot=function(n,s){if(!Dm(n))throw Error(e(299));var l=!1,h="",g=XA;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Mm(n,1,!1,null,null,l,!1,h,g),n[gs]=s.current,Yu(n.nodeType===8?n.parentNode:n),new Nm(s)},Tn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=b0(s),n=n===null?null:n.stateNode,n},Tn.flushSync=function(n){return yo(n)},Tn.hydrate=function(n,s,l){if(!_f(s))throw Error(e(200));return Ef(null,n,s,!0,l)},Tn.hydrateRoot=function(n,s,l){if(!Dm(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,g=!1,y="",S=XA;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(S=l.onRecoverableError)),s=WA(s,null,n,1,l??null,g,!1,y,S),n[gs]=s.current,Yu(n),h)for(n=0;n<h.length;n++)l=h[n],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new Sf(s)},Tn.render=function(n,s,l){if(!_f(s))throw Error(e(200));return Ef(null,n,s,!1,l)},Tn.unmountComponentAtNode=function(n){if(!_f(n))throw Error(e(40));return n._reactRootContainer?(yo(function(){Ef(null,null,n,!1,function(){n._reactRootContainer=null,n[gs]=null})}),!0):!1},Tn.unstable_batchedUpdates=xm,Tn.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!_f(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Ef(n,s,l,!1,h)},Tn.version="18.3.1-next-f1338f8080-20240426",Tn}var sb;function yC(){if(sb)return zm.exports;sb=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),zm.exports=mC(),zm.exports}var rb;function vC(){if(rb)return xf;rb=1;var d=yC();return xf.createRoot=d.createRoot,xf.hydrateRoot=d.hydrateRoot,xf}var wC=vC();function Ra(d){return Object.keys(d)}function jm(d){return d&&typeof d=="object"&&!Array.isArray(d)}function Fv(d,t){const e={...d},i=t;return jm(d)&&jm(t)&&Object.keys(t).forEach(r=>{jm(i[r])&&r in d?e[r]=Fv(e[r],i[r]):e[r]=i[r]}),e}function AC(d){var t;return typeof d!="string"||!d.includes("var(--mantine-scale)")?d:(t=d.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function bC(d){const t=AC(d);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Um(d){return d==="0rem"?"0rem":`calc(${d} * var(--mantine-scale))`}function nS(d,{shouldScale:t=!1}={}){function e(i){if(i===0||i==="0")return`0${d}`;if(typeof i=="number"){const r=`${i/16}${d}`;return t?Um(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(o=>e(o)).join(",");if(i.includes(" "))return i.split(" ").map(o=>e(o)).join(" ");if(i.includes(d))return t?Um(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const o=`${Number(r)/16}${d}`;return t?Um(o):o}}return i}return e}const tt=nS("rem",{shouldScale:!0}),ob=nS("em"),iS=typeof document<"u"?Se.useLayoutEffect:Se.useEffect,sS=Se.createContext(null);function rS(){const d=Se.useContext(sS);if(!d)throw new Error("[@mantine/core] MantineProvider was not found in tree");return d}function SC(){return rS().cssVariablesResolver}function oS(){return rS().getStyleNonce}function _C(d){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(d)}function EC(d){let t=d.replace("#","");if(t.length===3){const u=t.split("");t=[u[0],u[0],u[1],u[1],u[2],u[2]].join("")}if(t.length===8){const u=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:u}}const e=parseInt(t,16),i=e>>16&255,r=e>>8&255,o=e&255;return{r:i,g:r,b:o,a:1}}function CC(d){const[t,e,i,r]=d.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:e,b:i,a:r||1}}function xC(d){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,e=d.match(t);if(!e)return{r:0,g:0,b:0,a:1};const i=parseInt(e[1],10),r=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100,u=e[5]?parseFloat(e[5]):void 0,c=(1-Math.abs(2*o-1))*r,f=i/60,p=c*(1-Math.abs(f%2-1)),m=o-c/2;let v,w,b;return f>=0&&f<1?(v=c,w=p,b=0):f>=1&&f<2?(v=p,w=c,b=0):f>=2&&f<3?(v=0,w=c,b=p):f>=3&&f<4?(v=0,w=p,b=c):f>=4&&f<5?(v=p,w=0,b=c):(v=c,w=0,b=p),{r:Math.round((v+m)*255),g:Math.round((w+m)*255),b:Math.round((b+m)*255),a:u||1}}function Ov(d){return _C(d)?EC(d):d.startsWith("rgb")?CC(d):d.startsWith("hsl")?xC(d):{r:0,g:0,b:0,a:1}}function kf(d,t){if(d.startsWith("var("))return`color-mix(in srgb, ${d}, black ${t*100}%)`;const{r:e,g:i,b:r,a:o}=Ov(d),u=1-t,c=f=>Math.round(f*u);return`rgba(${c(e)}, ${c(i)}, ${c(r)}, ${o})`}function zc(d,t){return typeof d.primaryShade=="number"?d.primaryShade:t==="dark"?d.primaryShade.dark:d.primaryShade.light}function Vm(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function kC(d){const t=d.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function TC(d){if(d.startsWith("oklch("))return(kC(d)||0)/100;const{r:t,g:e,b:i}=Ov(d),r=t/255,o=e/255,u=i/255,c=Vm(r),f=Vm(o),p=Vm(u);return .2126*c+.7152*f+.0722*p}function pc(d,t=.179){return d.startsWith("var(")?!1:TC(d)>t}function $v({color:d,theme:t,colorScheme:e}){if(typeof d!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof d}`);if(d==="bright")return{color:d,value:e==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pc(e==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(d==="dimmed")return{color:d,value:e==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:pc(e==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(d==="white"||d==="black")return{color:d,value:d==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pc(d==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${d}`};const[i,r]=d.split("."),o=r?Number(r):void 0,u=i in t.colors;if(u){const c=o!==void 0?t.colors[i][o]:t.colors[i][zc(t,e||"light")];return{color:i,value:c,shade:o,isThemeColor:u,isLight:pc(c,t.luminanceThreshold),variable:r?`--mantine-color-${i}-${o}`:`--mantine-color-${i}-filled`}}return{color:d,value:d,isThemeColor:u,isLight:pc(d,t.luminanceThreshold),shade:o,variable:void 0}}function ab(d,t){const e=$v({color:d||t.primaryColor,theme:t});return e.variable?`var(${e.variable})`:d}function lb(d,t){const e={from:(d==null?void 0:d.from)||t.defaultGradient.from,to:(d==null?void 0:d.to)||t.defaultGradient.to,deg:(d==null?void 0:d.deg)||t.defaultGradient.deg||0},i=ab(e.from,t),r=ab(e.to,t);return`linear-gradient(${e.deg}deg, ${i} 0%, ${r} 100%)`}function _s(d,t){if(typeof d!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(d.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${d}, transparent ${o}%)`}if(d.startsWith("oklch"))return d.includes("/")?d.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):d.replace(")",` / ${t})`);const{r:e,g:i,b:r}=Ov(d);return`rgba(${e}, ${i}, ${r}, ${t})`}const ll=_s,PC=({color:d,theme:t,variant:e,gradient:i,autoContrast:r})=>{const o=$v({color:d,theme:t}),u=typeof r=="boolean"?r:t.autoContrast;if(e==="filled"){const c=u&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${d}-filled)`,hover:`var(--mantine-color-${d}-filled-hover)`,color:c,border:`${tt(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:c,border:`${tt(1)} solid transparent`}:{background:d,hover:kf(d,.1),color:c,border:`${tt(1)} solid transparent`}}if(e==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${d}-light)`,hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${tt(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:_s(c,.1),hover:_s(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${tt(1)} solid transparent`}}return{background:_s(d,.1),hover:_s(d,.12),color:d,border:`${tt(1)} solid transparent`}}if(e==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${d}-outline-hover)`,color:`var(--mantine-color-${d}-outline)`,border:`${tt(1)} solid var(--mantine-color-${d}-outline)`}:{background:"transparent",hover:_s(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${tt(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:_s(d,.05),color:d,border:`${tt(1)} solid ${d}`};if(e==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${tt(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:"transparent",hover:_s(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${tt(1)} solid transparent`}}return{background:"transparent",hover:_s(d,.12),color:d,border:`${tt(1)} solid transparent`}}return e==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${d}-light-color)`,border:`${tt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${tt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:d,border:`${tt(1)} solid transparent`}:e==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:kf(t.white,.01),color:`var(--mantine-color-${d}-filled)`,border:`${tt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kf(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${tt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kf(t.white,.01),color:d,border:`${tt(1)} solid transparent`}:e==="gradient"?{background:lb(i,t),hover:lb(i,t),color:"var(--mantine-color-white)",border:"none"}:e==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${tt(1)} solid var(--mantine-color-default-border)`}:{}},RC={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ub="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",zv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:RC,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:PC,autoContrast:!1,luminanceThreshold:.3,fontFamily:ub,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ub,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:tt(34),lineHeight:"1.3"},h2:{fontSize:tt(26),lineHeight:"1.35"},h3:{fontSize:tt(22),lineHeight:"1.4"},h4:{fontSize:tt(18),lineHeight:"1.45"},h5:{fontSize:tt(16),lineHeight:"1.5"},h6:{fontSize:tt(14),lineHeight:"1.5"}}},fontSizes:{xs:tt(12),sm:tt(14),md:tt(16),lg:tt(18),xl:tt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:tt(2),sm:tt(4),md:tt(8),lg:tt(16),xl:tt(32)},spacing:{xs:tt(10),sm:tt(12),md:tt(16),lg:tt(20),xl:tt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), 0 ${tt(1)} ${tt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(10)} ${tt(15)} ${tt(-5)}, rgba(0, 0, 0, 0.04) 0 ${tt(7)} ${tt(7)} ${tt(-5)}`,md:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(20)} ${tt(25)} ${tt(-5)}, rgba(0, 0, 0, 0.04) 0 ${tt(10)} ${tt(10)} ${tt(-5)}`,lg:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(28)} ${tt(23)} ${tt(-7)}, rgba(0, 0, 0, 0.04) 0 ${tt(12)} ${tt(12)} ${tt(-7)}`,xl:`0 ${tt(1)} ${tt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${tt(36)} ${tt(28)} ${tt(-7)}, rgba(0, 0, 0, 0.04) 0 ${tt(17)} ${tt(17)} ${tt(-7)}`},other:{},components:{}};function cb(d){return d==="auto"||d==="dark"||d==="light"}function LC({key:d="mantine-color-scheme-value"}={}){let t;return{get:e=>{if(typeof window>"u")return e;try{const i=window.localStorage.getItem(d);return cb(i)?i:e}catch{return e}},set:e=>{try{window.localStorage.setItem(d,e)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:e=>{t=i=>{i.storageArea===window.localStorage&&i.key===d&&cb(i.newValue)&&e(i.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(d)}}}const MC="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",hb="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Gm(d){return d<0||d>9?!1:parseInt(d.toString(),10)===d}function db(d){if(!(d.primaryColor in d.colors))throw new Error(MC);if(typeof d.primaryShade=="object"&&(!Gm(d.primaryShade.dark)||!Gm(d.primaryShade.light)))throw new Error(hb);if(typeof d.primaryShade=="number"&&!Gm(d.primaryShade))throw new Error(hb)}function IC(d,t){var i;if(!t)return db(d),d;const e=Fv(d,t);return t.fontFamily&&!((i=t.headings)!=null&&i.fontFamily)&&(e.headings.fontFamily=t.fontFamily),db(e),e}const Hv=Se.createContext(null),NC=()=>Se.useContext(Hv)||zv;function aS(){const d=Se.useContext(Hv);if(!d)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return d}function lS({theme:d,children:t,inherit:e=!0}){const i=NC(),r=Se.useMemo(()=>IC(e?i:zv,d),[d,i,e]);return be.jsx(Hv.Provider,{value:r,children:t})}lS.displayName="@mantine/core/MantineThemeProvider";function DC(){const d=aS(),t=oS(),e=Ra(d.breakpoints).reduce((i,r)=>{const o=d.breakpoints[r].includes("px"),u=bC(d.breakpoints[r]),c=o?`${u-.1}px`:ob(u-.1),f=o?`${u}px`:ob(u);return`${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${f}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return be.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:e}})}function Wm(d){return Object.entries(d).map(([t,e])=>`${t}: ${e};`).join("")}function gc(d,t){return(Array.isArray(d)?d:[d]).reduce((i,r)=>`${r}{${i}}`,t)}function FC(d,t){const e=Wm(d.variables),i=e?gc(t,e):"",r=Wm(d.dark),o=Wm(d.light),u=r?gc(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,r):"",c=o?gc(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${i}${u}${c}`}function OC({color:d,theme:t,autoContrast:e}){return(typeof e=="boolean"?e:t.autoContrast)&&$v({color:d||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function fb(d,t){return OC({color:d.colors[d.primaryColor][zc(d,t)],theme:d,autoContrast:null})}function Tf({theme:d,color:t,colorScheme:e,name:i=t,withColorValues:r=!0}){if(!d.colors[t])return{};if(e==="light"){const c=zc(d,"light"),f={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${c===9?8:c+1})`,[`--mantine-color-${i}-light`]:ll(d.colors[t][c],.1),[`--mantine-color-${i}-light-hover`]:ll(d.colors[t][c],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline-hover`]:ll(d.colors[t][c],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...f}:f}const o=zc(d,"dark"),u={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${o===9?8:o+1})`,[`--mantine-color-${i}-light`]:ll(d.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${i}-light-hover`]:ll(d.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(o-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(o-4,0)})`,[`--mantine-color-${i}-outline-hover`]:ll(d.colors[t][Math.max(o-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...u}:u}function $C(d){return!!d&&typeof d=="object"&&"mantine-virtual-color"in d}function ul(d,t,e){Ra(t).forEach(i=>Object.assign(d,{[`--mantine-${e}-${i}`]:t[i]}))}const uS=d=>{const t=zc(d,"light"),e=d.defaultRadius in d.radius?d.radius[d.defaultRadius]:tt(d.defaultRadius),i={variables:{"--mantine-scale":d.scale.toString(),"--mantine-cursor-type":d.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":d.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":d.fontSmoothing?"grayscale":"unset","--mantine-color-white":d.white,"--mantine-color-black":d.black,"--mantine-line-height":d.lineHeights.md,"--mantine-font-family":d.fontFamily,"--mantine-font-family-monospace":d.fontFamilyMonospace,"--mantine-font-family-headings":d.headings.fontFamily,"--mantine-heading-font-weight":d.headings.fontWeight,"--mantine-heading-text-wrap":d.headings.textWrap,"--mantine-radius-default":e,"--mantine-primary-color-filled":`var(--mantine-color-${d.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${d.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${d.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${d.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${d.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":fb(d,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":d.black,"--mantine-color-body":d.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":fb(d,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};ul(i.variables,d.breakpoints,"breakpoint"),ul(i.variables,d.spacing,"spacing"),ul(i.variables,d.fontSizes,"font-size"),ul(i.variables,d.lineHeights,"line-height"),ul(i.variables,d.shadows,"shadow"),ul(i.variables,d.radius,"radius"),d.colors[d.primaryColor].forEach((o,u)=>{i.variables[`--mantine-primary-color-${u}`]=`var(--mantine-color-${d.primaryColor}-${u})`}),Ra(d.colors).forEach(o=>{const u=d.colors[o];if($C(u)){Object.assign(i.light,Tf({theme:d,name:u.name,color:u.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,Tf({theme:d,name:u.name,color:u.dark,colorScheme:"dark",withColorValues:!0}));return}u.forEach((c,f)=>{i.variables[`--mantine-color-${o}-${f}`]=c}),Object.assign(i.light,Tf({theme:d,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,Tf({theme:d,color:o,colorScheme:"dark",withColorValues:!1}))});const r=d.headings.sizes;return Ra(r).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=r[o].fontSize,i.variables[`--mantine-${o}-line-height`]=r[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=r[o].fontWeight||d.headings.fontWeight}),i};function zC({theme:d,generator:t}){const e=uS(d),i=t==null?void 0:t(d);return i?Fv(e,i):e}const qm=uS(zv);function HC(d){const t={variables:{},light:{},dark:{}};return Ra(d.variables).forEach(e=>{qm.variables[e]!==d.variables[e]&&(t.variables[e]=d.variables[e])}),Ra(d.light).forEach(e=>{qm.light[e]!==d.light[e]&&(t.light[e]=d.light[e])}),Ra(d.dark).forEach(e=>{qm.dark[e]!==d.dark[e]&&(t.dark[e]=d.dark[e])}),t}function BC(d){return`
  ${d}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${d}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function cS({cssVariablesSelector:d,deduplicateCssVariables:t}){const e=aS(),i=oS(),r=SC(),o=zC({theme:e,generator:r}),u=d===":root"&&t,c=u?HC(o):o,f=FC(c,d);return f?be.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${f}${u?"":BC(d)}`}}):null}cS.displayName="@mantine/CssVariables";function jC(){const d=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||d(...t)}}function cl(d,t){var r;const e=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=d!=="auto"?d:e?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",i)}function UC({manager:d,defaultColorScheme:t,getRootElement:e,forceColorScheme:i}){const r=Se.useRef(null),[o,u]=Se.useState(()=>d.get(t)),c=i||o,f=Se.useCallback(m=>{i||(cl(m,e),u(m),d.set(m))},[d.set,c,i]),p=Se.useCallback(()=>{u(t),cl(t,e),d.clear()},[d.clear,t]);return Se.useEffect(()=>(d.subscribe(f),d.unsubscribe),[d.subscribe,d.unsubscribe]),iS(()=>{cl(d.get(t),e)},[]),Se.useEffect(()=>{var v;if(i)return cl(i,e),()=>{};i===void 0&&cl(o,e),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const m=w=>{o==="auto"&&cl(w.matches?"dark":"light",e)};return(v=r.current)==null||v.addEventListener("change",m),()=>{var w;return(w=r.current)==null?void 0:w.removeEventListener("change",m)}},[o,i]),{colorScheme:c,setColorScheme:f,clearColorScheme:p}}function VC({respectReducedMotion:d,getRootElement:t}){iS(()=>{var e;d&&((e=t())==null||e.setAttribute("data-respect-reduced-motion","true"))},[d])}jC();function hS({theme:d,children:t,getStyleNonce:e,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:o=!0,withCssVariables:u=!0,cssVariablesSelector:c=":root",classNamesPrefix:f="mantine",colorSchemeManager:p=LC(),defaultColorScheme:m="light",getRootElement:v=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:b,stylesTransform:_}){const{colorScheme:x,setColorScheme:k,clearColorScheme:T}=UC({defaultColorScheme:m,forceColorScheme:b,manager:p,getRootElement:v});return VC({respectReducedMotion:(d==null?void 0:d.respectReducedMotion)||!1,getRootElement:v}),be.jsx(sS.Provider,{value:{colorScheme:x,setColorScheme:k,clearColorScheme:T,getRootElement:v,classNamesPrefix:f,getStyleNonce:e,cssVariablesResolver:w,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:_},children:be.jsxs(lS,{theme:d,children:[u&&be.jsx(cS,{cssVariablesSelector:c,deduplicateCssVariables:o}),r&&be.jsx(DC,{}),t]})})}hS.displayName="@mantine/core/MantineProvider";var Xm={exports:{}},pb;function GC(){return pb||(pb=1,function(d){var t=function(e){var i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(H,D,P){H[D]=P.value},u,c=typeof Symbol=="function"?Symbol:{},f=c.iterator||"@@iterator",p=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function v(H,D,P){return Object.defineProperty(H,D,{value:P,enumerable:!0,configurable:!0,writable:!0}),H[D]}try{v({},"")}catch{v=function(D,P,$){return D[P]=$}}function w(H,D,P,$){var G=D&&D.prototype instanceof F?D:F,it=Object.create(G.prototype),wt=new J($||[]);return o(it,"_invoke",{value:Nt(H,P,wt)}),it}e.wrap=w;function b(H,D,P){try{return{type:"normal",arg:H.call(D,P)}}catch($){return{type:"throw",arg:$}}}var _="suspendedStart",x="suspendedYield",k="executing",T="completed",M={};function F(){}function N(){}function j(){}var V={};v(V,f,function(){return this});var U=Object.getPrototypeOf,Q=U&&U(U(Z([])));Q&&Q!==i&&r.call(Q,f)&&(V=Q);var nt=j.prototype=F.prototype=Object.create(V);N.prototype=j,o(nt,"constructor",{value:j,configurable:!0}),o(j,"constructor",{value:N,configurable:!0}),N.displayName=v(j,m,"GeneratorFunction");function At(H){["next","throw","return"].forEach(function(D){v(H,D,function(P){return this._invoke(D,P)})})}e.isGeneratorFunction=function(H){var D=typeof H=="function"&&H.constructor;return D?D===N||(D.displayName||D.name)==="GeneratorFunction":!1},e.mark=function(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,j):(H.__proto__=j,v(H,m,"GeneratorFunction")),H.prototype=Object.create(nt),H},e.awrap=function(H){return{__await:H}};function ft(H,D){function P(it,wt,ht,at){var bt=b(H[it],H,wt);if(bt.type==="throw")at(bt.arg);else{var ot=bt.arg,St=ot.value;return St&&typeof St=="object"&&r.call(St,"__await")?D.resolve(St.__await).then(function(Xt){P("next",Xt,ht,at)},function(Xt){P("throw",Xt,ht,at)}):D.resolve(St).then(function(Xt){ot.value=Xt,ht(ot)},function(Xt){return P("throw",Xt,ht,at)})}}var $;function G(it,wt){function ht(){return new D(function(at,bt){P(it,wt,at,bt)})}return $=$?$.then(ht,ht):ht()}o(this,"_invoke",{value:G})}At(ft.prototype),v(ft.prototype,p,function(){return this}),e.AsyncIterator=ft,e.async=function(H,D,P,$,G){G===void 0&&(G=Promise);var it=new ft(w(H,D,P,$),G);return e.isGeneratorFunction(D)?it:it.next().then(function(wt){return wt.done?wt.value:it.next()})};function Nt(H,D,P){var $=_;return function(it,wt){if($===k)throw new Error("Generator is already running");if($===T){if(it==="throw")throw wt;return Y()}for(P.method=it,P.arg=wt;;){var ht=P.delegate;if(ht){var at=Tt(ht,P);if(at){if(at===M)continue;return at}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if($===_)throw $=T,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);$=k;var bt=b(H,D,P);if(bt.type==="normal"){if($=P.done?T:x,bt.arg===M)continue;return{value:bt.arg,done:P.done}}else bt.type==="throw"&&($=T,P.method="throw",P.arg=bt.arg)}}}function Tt(H,D){var P=D.method,$=H.iterator[P];if($===u)return D.delegate=null,P==="throw"&&H.iterator.return&&(D.method="return",D.arg=u,Tt(H,D),D.method==="throw")||P!=="return"&&(D.method="throw",D.arg=new TypeError("The iterator does not provide a '"+P+"' method")),M;var G=b($,H.iterator,D.arg);if(G.type==="throw")return D.method="throw",D.arg=G.arg,D.delegate=null,M;var it=G.arg;if(!it)return D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,M;if(it.done)D[H.resultName]=it.value,D.next=H.nextLoc,D.method!=="return"&&(D.method="next",D.arg=u);else return it;return D.delegate=null,M}At(nt),v(nt,m,"Generator"),v(nt,f,function(){return this}),v(nt,"toString",function(){return"[object Generator]"});function vt(H){var D={tryLoc:H[0]};1 in H&&(D.catchLoc=H[1]),2 in H&&(D.finallyLoc=H[2],D.afterLoc=H[3]),this.tryEntries.push(D)}function Bt(H){var D=H.completion||{};D.type="normal",delete D.arg,H.completion=D}function J(H){this.tryEntries=[{tryLoc:"root"}],H.forEach(vt,this),this.reset(!0)}e.keys=function(H){var D=Object(H),P=[];for(var $ in D)P.push($);return P.reverse(),function G(){for(;P.length;){var it=P.pop();if(it in D)return G.value=it,G.done=!1,G}return G.done=!0,G}};function Z(H){if(H){var D=H[f];if(D)return D.call(H);if(typeof H.next=="function")return H;if(!isNaN(H.length)){var P=-1,$=function G(){for(;++P<H.length;)if(r.call(H,P))return G.value=H[P],G.done=!1,G;return G.value=u,G.done=!0,G};return $.next=$}}return{next:Y}}e.values=Z;function Y(){return{value:u,done:!0}}return J.prototype={constructor:J,reset:function(H){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(Bt),!H)for(var D in this)D.charAt(0)==="t"&&r.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=u)},stop:function(){this.done=!0;var H=this.tryEntries[0],D=H.completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(H){if(this.done)throw H;var D=this;function P(at,bt){return it.type="throw",it.arg=H,D.next=at,bt&&(D.method="next",D.arg=u),!!bt}for(var $=this.tryEntries.length-1;$>=0;--$){var G=this.tryEntries[$],it=G.completion;if(G.tryLoc==="root")return P("end");if(G.tryLoc<=this.prev){var wt=r.call(G,"catchLoc"),ht=r.call(G,"finallyLoc");if(wt&&ht){if(this.prev<G.catchLoc)return P(G.catchLoc,!0);if(this.prev<G.finallyLoc)return P(G.finallyLoc)}else if(wt){if(this.prev<G.catchLoc)return P(G.catchLoc,!0)}else if(ht){if(this.prev<G.finallyLoc)return P(G.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(H,D){for(var P=this.tryEntries.length-1;P>=0;--P){var $=this.tryEntries[P];if($.tryLoc<=this.prev&&r.call($,"finallyLoc")&&this.prev<$.finallyLoc){var G=$;break}}G&&(H==="break"||H==="continue")&&G.tryLoc<=D&&D<=G.finallyLoc&&(G=null);var it=G?G.completion:{};return it.type=H,it.arg=D,G?(this.method="next",this.next=G.finallyLoc,M):this.complete(it)},complete:function(H,D){if(H.type==="throw")throw H.arg;return H.type==="break"||H.type==="continue"?this.next=H.arg:H.type==="return"?(this.rval=this.arg=H.arg,this.method="return",this.next="end"):H.type==="normal"&&D&&(this.next=D),M},finish:function(H){for(var D=this.tryEntries.length-1;D>=0;--D){var P=this.tryEntries[D];if(P.finallyLoc===H)return this.complete(P.completion,P.afterLoc),Bt(P),M}},catch:function(H){for(var D=this.tryEntries.length-1;D>=0;--D){var P=this.tryEntries[D];if(P.tryLoc===H){var $=P.completion;if($.type==="throw"){var G=$.arg;Bt(P)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(H,D,P){return this.delegate={iterator:Z(H),resultName:D,nextLoc:P},this.method==="next"&&(this.arg=u),M}},e}(d.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}(Xm)),Xm.exports}var Ym,gb;function Bv(){return gb||(gb=1,Ym=(d,t)=>`${d}-${t}-${Math.random().toString(16).slice(3,8)}`),Ym}var Km,mb;function dS(){if(mb)return Km;mb=1;const d=Bv();let t=0;return Km=({id:e,action:i,payload:r={}})=>{let o=e;return typeof o>"u"&&(o=d("Job",t),t+=1),{id:o,action:i,payload:r}},Km}var mc={},yb;function jv(){if(yb)return mc;yb=1;let d=!1;return mc.logging=d,mc.setLogging=t=>{d=t},mc.log=(...t)=>d?console.log.apply(this,t):null,mc}var Qm,vb;function WC(){if(vb)return Qm;vb=1;const d=dS(),{log:t}=jv(),e=Bv();let i=0;return Qm=()=>{const r=e("Scheduler",i),o={},u={};let c=[];i+=1;const f=()=>c.length,p=()=>Object.keys(o).length,m=()=>{if(c.length!==0){const x=Object.keys(o);for(let k=0;k<x.length;k+=1)if(typeof u[x[k]]>"u"){c[0](o[x[k]]);break}}},v=(x,k)=>new Promise((T,M)=>{const F=d({action:x,payload:k});c.push(async N=>{c.shift(),u[N.id]=F;try{T(await N[x].apply(this,[...k,F.id]))}catch(j){M(j)}finally{delete u[N.id],m()}}),t(`[${r}]: Add ${F.id} to JobQueue`),t(`[${r}]: JobQueue length=${c.length}`),m()});return{addWorker:x=>(o[x.id]=x,t(`[${r}]: Add ${x.id}`),t(`[${r}]: Number of workers=${p()}`),m(),x.id),addJob:async(x,...k)=>{if(p()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return v(x,k)},terminate:async()=>{Object.keys(o).forEach(async x=>{await o[x].terminate()}),c=[]},getQueueLen:f,getNumWorkers:p}},Qm}function qC(d){throw new Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jm,wb;function XC(){return wb||(wb=1,Jm=d=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof qC=="function"&&(t.type="node"),typeof d>"u"?t:t[d]}),Jm}var Zm,Ab;function YC(){if(Ab)return Zm;Ab=1;const t=XC()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return Zm=e=>{const i={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(i[r]=t(i[r]))}),i},Zm}var ty,bb;function fS(){return bb||(bb=1,ty={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ty}const KC="tesseract.js",QC="6.0.0",JC="Pure Javascript Multilingual OCR",ZC="src/index.js",tx="src/index.d.ts",ex="dist/tesseract.min.js",nx="dist/tesseract.min.js",ix={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},sx={"./src/worker/node/index.js":"./src/worker/browser/index.js"},rx="",ox=["jeromewu"],ax="Apache-2.0",lx={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},ux={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},cx={"@rollup/pluginutils":"^5.0.2"},hx={type:"git",url:"https://github.com/naptha/tesseract.js.git"},dx={url:"https://github.com/naptha/tesseract.js/issues"},fx="https://github.com/naptha/tesseract.js",px={type:"opencollective",url:"https://opencollective.com/tesseractjs"},gx={name:KC,version:QC,description:JC,main:ZC,types:tx,unpkg:ex,jsdelivr:nx,scripts:ix,browser:sx,author:rx,contributors:ox,license:ax,devDependencies:lx,dependencies:ux,overrides:cx,repository:hx,bugs:dx,homepage:fx,collective:px};var ey,Sb;function mx(){return Sb||(Sb=1,ey={workerBlobURL:!0,logger:()=>{}}),ey}var ny,_b;function yx(){if(_b)return ny;_b=1;const d=gx.version;return ny={...mx(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${d}/dist/worker.min.js`},ny}var iy,Eb;function vx(){return Eb||(Eb=1,iy=({workerPath:d,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const i=new Blob([`importScripts("${d}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(i))}else e=new Worker(d);return e}),iy}var sy,Cb;function wx(){return Cb||(Cb=1,sy=d=>{d.terminate()}),sy}var ry,xb;function Ax(){return xb||(xb=1,ry=(d,t)=>{d.onmessage=({data:e})=>{t(e)}}),ry}var oy,kb;function bx(){return kb||(kb=1,oy=async(d,t)=>{d.postMessage(t)}),oy}var ay,Tb;function Sx(){if(Tb)return ay;Tb=1;const d=e=>new Promise((i,r)=>{const o=new FileReader;o.onload=()=>{i(o.result)},o.onerror=({target:{error:{code:u}}})=>{r(Error(`File could not be read! Code=${u}`))},o.readAsArrayBuffer(e)}),t=async e=>{let i=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?i=atob(e.split(",")[1]).split("").map(r=>r.charCodeAt(0)):i=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(i=await t(e.src)),e.tagName==="VIDEO"&&(i=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(r=>{e.toBlob(async o=>{i=await d(o),r()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();i=await d(r)}else(e instanceof File||e instanceof Blob)&&(i=await d(e));return new Uint8Array(i)};return ay=t,ay}var ly,Pb;function _x(){if(Pb)return ly;Pb=1;const d=yx(),t=vx(),e=wx(),i=Ax(),r=bx(),o=Sx();return ly={defaultOptions:d,spawnWorker:t,terminateWorker:e,onMessage:i,send:r,loadImage:o},ly}var uy,Rb;function pS(){if(Rb)return uy;Rb=1;const d=YC(),t=dS(),{log:e}=jv(),i=Bv(),r=fS(),{defaultOptions:o,spawnWorker:u,terminateWorker:c,onMessage:f,loadImage:p,send:m}=_x();let v=0;return uy=async(w="eng",b=r.LSTM_ONLY,_={},x={})=>{const k=i("Worker",v),{logger:T,errorHandler:M,...F}=d({...o,..._}),N={},j=typeof w=="string"?w.split("+"):w;let V=b,U=x;const Q=[r.DEFAULT,r.LSTM_ONLY].includes(b)&&!F.legacyCore;let nt,At;const ft=new Promise((ot,St)=>{At=ot,nt=St}),Nt=ot=>{nt(ot.message)};let Tt=u(F);Tt.onerror=Nt,v+=1;const vt=({id:ot,action:St,payload:Xt})=>new Promise((cn,Be)=>{e(`[${k}]: Start ${ot}, action=${St}`);const Sn=`${St}-${ot}`;N[Sn]={resolve:cn,reject:Be},m(Tt,{workerId:k,jobId:ot,action:St,payload:Xt})}),Bt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=ot=>vt(t({id:ot,action:"load",payload:{options:{lstmOnly:Q,corePath:F.corePath,logging:F.logging}}})),Z=(ot,St,Xt)=>vt(t({id:Xt,action:"FS",payload:{method:"writeFile",args:[ot,St]}})),Y=(ot,St)=>vt(t({id:St,action:"FS",payload:{method:"readFile",args:[ot,{encoding:"utf8"}]}})),H=(ot,St)=>vt(t({id:St,action:"FS",payload:{method:"unlink",args:[ot]}})),D=(ot,St,Xt)=>vt(t({id:Xt,action:"FS",payload:{method:ot,args:St}})),P=(ot,St)=>vt(t({id:St,action:"loadLanguage",payload:{langs:ot,options:{langPath:F.langPath,dataPath:F.dataPath,cachePath:F.cachePath,cacheMethod:F.cacheMethod,gzip:F.gzip,lstmOnly:[r.DEFAULT,r.LSTM_ONLY].includes(V)&&!F.legacyLang}}})),$=(ot,St,Xt,cn)=>vt(t({id:cn,action:"initialize",payload:{langs:ot,oem:St,config:Xt}})),G=(ot="eng",St,Xt,cn)=>{if(Q&&[r.TESSERACT_ONLY,r.TESSERACT_LSTM_COMBINED].includes(St))throw Error("Legacy model requested but code missing.");const Be=St||V;V=Be;const Sn=Xt||U;U=Sn;const Fa=(typeof ot=="string"?ot.split("+"):ot).filter(ku=>!j.includes(ku));return j.push(...Fa),Fa.length>0?P(Fa,cn).then(()=>$(ot,Be,Sn,cn)):$(ot,Be,Sn,cn)},it=(ot={},St)=>vt(t({id:St,action:"setParameters",payload:{params:ot}})),wt=async(ot,St={},Xt={text:!0},cn)=>vt(t({id:cn,action:"recognize",payload:{image:await p(ot),options:St,output:Xt}})),ht=async(ot,St)=>{if(Q)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return vt(t({id:St,action:"detect",payload:{image:await p(ot)}}))},at=async()=>(Tt!==null&&(c(Tt),Tt=null),Promise.resolve());f(Tt,({workerId:ot,jobId:St,status:Xt,action:cn,data:Be})=>{const Sn=`${cn}-${St}`;if(Xt==="resolve")e(`[${ot}]: Complete ${St}`),N[Sn].resolve({jobId:St,data:Be}),delete N[Sn];else if(Xt==="reject")if(N[Sn].reject(Be),delete N[Sn],cn==="load"&&nt(Be),M)M(Be);else throw Error(Be);else Xt==="progress"&&T({...Be,userJobId:St})});const bt={id:k,worker:Tt,load:Bt,writeText:Z,readText:Y,removeFile:H,FS:D,reinitialize:G,setParameters:it,recognize:wt,detect:ht,terminate:at};return J().then(()=>P(w)).then(()=>$(w,b,x)).then(()=>At(bt)).catch(()=>{}),ft},uy}var cy,Lb;function Ex(){if(Lb)return cy;Lb=1;const d=pS();return cy={recognize:async(i,r,o)=>{const u=await d(r,1,o);return u.recognize(i).finally(async()=>{await u.terminate()})},detect:async(i,r)=>{const o=await d("osd",0,r);return o.detect(i).finally(async()=>{await o.terminate()})}},cy}var hy,Mb;function Cx(){return Mb||(Mb=1,hy={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),hy}var dy,Ib;function xx(){return Ib||(Ib=1,dy={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),dy}var fy,Nb;function kx(){if(Nb)return fy;Nb=1,GC();const d=WC(),t=pS(),e=Ex(),i=Cx(),r=fS(),o=xx(),{setLogging:u}=jv();return fy={languages:i,OEM:r,PSM:o,createScheduler:d,createWorker:t,setLogging:u,...e},fy}var Tx=kx();const Db=cC(Tx);var Oc={};Oc.d=(d,t)=>{for(var e in t)Oc.o(t,e)&&!Oc.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})};Oc.o=(d,t)=>Object.prototype.hasOwnProperty.call(d,t);var Pt=globalThis.pdfjsLib={};Oc.d(Pt,{AbortException:()=>io,AnnotationEditorLayer:()=>Pv,AnnotationEditorParamsType:()=>$t,AnnotationEditorType:()=>Lt,AnnotationEditorUIManager:()=>Ma,AnnotationLayer:()=>_T,AnnotationMode:()=>Cr,ColorPicker:()=>pp,DOMSVGFactory:()=>Qv,DrawLayer:()=>Mv,FeatureTest:()=>wn,GlobalWorkerOptions:()=>tr,ImageKind:()=>If,InvalidPDFException:()=>Sy,MissingPDFException:()=>Hc,OPS:()=>ki,OutputScale:()=>Ey,PDFDataRangeTransport:()=>m1,PDFDateString:()=>qv,PDFWorker:()=>bl,PasswordResponses:()=>Mx,PermissionFlag:()=>Lx,PixelsPerInch:()=>so,RenderingCancelledException:()=>Gv,TextLayer:()=>Bc,TouchManager:()=>dp,UnexpectedResponseException:()=>up,Util:()=>yt,VerbosityLevel:()=>Fp,XfaLayer:()=>v1,build:()=>iT,createValidAbsoluteUrl:()=>Fx,fetchData:()=>Hp,getDocument:()=>Xk,getFilenameFromUrl:()=>Gx,getPdfFilenameFromUrl:()=>Wx,getXfaPageViewport:()=>qx,isDataScheme:()=>Bp,isPdfFile:()=>Wv,noContextMenu:()=>Bi,normalizeUnicode:()=>jx,setLayerDimensions:()=>La,shadow:()=>Ot,stopEvent:()=>ti,version:()=>nT});const un=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),gS=[1,0,0,1,0,0],by=[.001,0,0,.001,0,0],Px=1e7,py=1.35,Jn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Rx="pdfjs_internal_editor_",Lt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},$t={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},Lx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},tn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},If={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ke={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},yc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Fp={ERRORS:0,WARNINGS:1,INFOS:5},ki={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Mx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Op=Fp.WARNINGS;function Ix(d){Number.isInteger(d)&&(Op=d)}function Nx(){return Op}function $p(d){Op>=Fp.INFOS&&console.log(`Info: ${d}`)}function Mt(d){Op>=Fp.WARNINGS&&console.log(`Warning: ${d}`)}function Qt(d){throw new Error(d)}function _e(d,t){d||Qt(t)}function Dx(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Fx(d,t=null,e=null){if(!d)return null;try{if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=Bx(d)}catch{}}const i=t?new URL(d,t):new URL(d);if(Dx(i))return i}catch{}return null}function Ot(d,t,e,i=!1){return Object.defineProperty(d,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const oo=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class Fb extends oo{constructor(t,e){super(t,"PasswordException"),this.code=e}}class gy extends oo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Sy extends oo{constructor(t){super(t,"InvalidPDFException")}}class Hc extends oo{constructor(t){super(t,"MissingPDFException")}}class up extends oo{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class Ox extends oo{constructor(t){super(t,"FormatError")}}class io extends oo{constructor(t){super(t,"AbortException")}}function mS(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&Qt("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const i=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),u=d.subarray(r,o);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function zp(d){typeof d!="string"&&Qt("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=d.charCodeAt(i)&255;return e}function $x(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function Uv(d){const t=Object.create(null);for(const[e,i]of d)t[e]=i;return t}function zx(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function Hx(){try{return new Function(""),!0}catch{return!1}}class wn{static get isLittleEndian(){return Ot(this,"isLittleEndian",zx())}static get isEvalSupported(){return Ot(this,"isEvalSupported",Hx())}static get isOffscreenCanvasSupported(){return Ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ot(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ot(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ot(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Ot(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const my=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var er,Nf,_y;class yt{static makeHexColor(t,e,i){return`#${my[t]}${my[e]}${my[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,o]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),u=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],o[0],u[0]),Math.min(i[1],r[1],o[1],u[1]),Math.max(i[0],r[0],o[0],u[0]),Math.max(i[1],r[1],o[1],u[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],u=t[2]*e[1]+t[3]*e[3],c=(i+u)/2,f=Math.sqrt((i+u)**2-4*(i*u-o*r))/2,p=c+f||1,m=c-f||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[i,o,r,u]}static bezierBoundingBox(t,e,i,r,o,u,c,f,p){return p?(p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,c),Math.min(e,f),Math.max(t,c),Math.max(e,f)],C(this,er,_y).call(this,t,i,o,c,e,r,u,f,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),p),C(this,er,_y).call(this,t,i,o,c,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p),p}}er=new WeakSet,Nf=function(t,e,i,r,o,u,c,f,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,b=w*p,_=v*(v*(v*t+3*p*e)+3*w*i)+b*r,x=v*(v*(v*o+3*p*u)+3*w*c)+b*f;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],x),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],x)},_y=function(t,e,i,r,o,u,c,f,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&C(this,er,Nf).call(this,t,e,i,r,o,u,c,f,-v/m,w);return}const b=m**2-4*v*p;if(b<0)return;const _=Math.sqrt(b),x=2*p;C(this,er,Nf).call(this,t,e,i,r,o,u,c,f,(-m+_)/x,w),C(this,er,Nf).call(this,t,e,i,r,o,u,c,f,(-m-_)/x,w)},E(yt,er);function Bx(d){return decodeURIComponent(escape(d))}let yy=null,Ob=null;function jx(d){return yy||(yy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ob=new Map([["ﬅ","ſt"]])),d.replaceAll(yy,(t,e,i)=>e?e.normalize("NFKC"):Ob.get(i))}function Ux(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),mS(d)}const Vv="pdfjs_internal_id_";function Vx(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(mS(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});const Es="http://www.w3.org/2000/svg",Eo=class Eo{};Ct(Eo,"CSS",96),Ct(Eo,"PDF",72),Ct(Eo,"PDF_TO_CSS_UNITS",Eo.CSS/Eo.PDF);let so=Eo;async function Hp(d,t="text"){if(bc(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class pd{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:o=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=o,this.offsetY=u,i*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,v,w,b;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,v=0,w=0,b=1;break;case 90:m=0,v=1,w=1,b=0;break;case 270:m=0,v=-1,w=-1,b=0;break;case 0:m=1,v=0,w=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(w=-w,b=-b);let _,x,k,T;m===0?(_=Math.abs(p-t[1])*i+o,x=Math.abs(f-t[0])*i+u,k=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(_=Math.abs(f-t[0])*i+o,x=Math.abs(p-t[1])*i+u,k=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[m*i,v*i,w*i,b*i,_-m*i*f-w*i*p,x-v*i*f-b*i*p],this.width=k,this.height=T}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(r=>r*t);return Ot(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new pd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){return yt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=yt.applyTransform([t[0],t[1]],this.transform),i=yt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return yt.applyInverseTransform([t,e],this.transform)}}class Gv extends oo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Bp(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function Wv(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function Gx(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function Wx(d,t="document.pdf"){if(typeof d!="string")return t;if(Bp(d))return Mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(d);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||t}class $b{constructor(){Ct(this,"started",Object.create(null));Ct(this,"times",[])}time(t){t in this.started&&Mt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Mt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-r}ms
`);return t.join("")}}function bc(d,t){try{const{protocol:e}=t?new URL(d,t):new URL(d);return e==="http:"||e==="https:"}catch{return!1}}function Bi(d){d.preventDefault()}function ti(d){d.preventDefault(),d.stopPropagation()}var Uc;class qv{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Uc)||A(this,Uc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Uc).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(u+=m,c+=v):p==="+"&&(u-=m,c-=v),new Date(Date.UTC(i,r,o,u,c,f))}}Uc=new WeakMap,E(qv,Uc);function qx(d,{scale:t=1,rotation:e=0}){const{width:i,height:r}=d.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new pd({viewBox:o,userUnit:1,scale:t,rotation:e})}function Xv(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Mt(`Not a valid color format: "${d}"`),[0,0,0])}function Xx(d){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of d.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;d.set(e,Xv(i))}t.remove()}function re(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform();return[t,e,i,r,o,u]}function Xi(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform().invertSelf();return[t,e,i,r,o,u]}function La(d,t,e=!1,i=!0){if(t instanceof pd){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:u}=d,c=wn.isCSSRoundSupported,f=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,m=c?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,v=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=v):(u.width=v,u.height=m)}i&&d.setAttribute("data-main-rotation",t.rotation)}class Ey{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var xr,xo,Ti,ko,Vc,Gc,yp,yS,An,vS,wS,Df,AS,xy;const ks=class ks{constructor(t){E(this,An);E(this,xr,null);E(this,xo,null);E(this,Ti);E(this,ko,null);E(this,Vc,null);A(this,Ti,t),a(ks,Gc)||A(ks,Gc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=A(this,xr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ti)._uiManager._signal;t.addEventListener("contextmenu",Bi,{signal:e}),t.addEventListener("pointerdown",C(ks,yp,yS),{signal:e});const i=A(this,ko,document.createElement("div"));i.className="buttons",t.append(i);const r=a(this,Ti).toolbarPosition;if(r){const{style:o}=t,u=a(this,Ti)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return C(this,An,AS).call(this),t}get div(){return a(this,xr)}hide(){var t;a(this,xr).classList.add("hidden"),(t=a(this,xo))==null||t.hideDropdown()}show(){var t;a(this,xr).classList.remove("hidden"),(t=a(this,Vc))==null||t.shown()}async addAltText(t){const e=await t.render();C(this,An,Df).call(this,e),a(this,ko).prepend(e,a(this,An,xy)),A(this,Vc,t)}addColorPicker(t){A(this,xo,t);const e=t.renderButton();C(this,An,Df).call(this,e),a(this,ko).prepend(e,a(this,An,xy))}remove(){var t;a(this,xr).remove(),(t=a(this,xo))==null||t.destroy(),A(this,xo,null)}};xr=new WeakMap,xo=new WeakMap,Ti=new WeakMap,ko=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,yp=new WeakSet,yS=function(t){t.stopPropagation()},An=new WeakSet,vS=function(t){a(this,Ti)._focusEventsAllowed=!1,ti(t)},wS=function(t){a(this,Ti)._focusEventsAllowed=!0,ti(t)},Df=function(t){const e=a(this,Ti)._uiManager._signal;t.addEventListener("focusin",C(this,An,vS).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,An,wS).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Bi,{signal:e})},AS=function(){const{editorType:t,_uiManager:e}=a(this,Ti),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(ks,Gc)[t]),C(this,An,Df).call(this,i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,ko).append(i)},xy=function(){const t=document.createElement("div");return t.className="divider",t},E(ks,yp),E(ks,Gc,null);let Cy=ks;var Wc,To,Po,ro,bS,SS,_S;class Yx{constructor(t){E(this,ro);E(this,Wc,null);E(this,To,null);E(this,Po);A(this,Po,t)}show(t,e,i){const[r,o]=C(this,ro,SS).call(this,e,i),{style:u}=a(this,To)||A(this,To,C(this,ro,bS).call(this));t.append(a(this,To)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,To).remove()}}Wc=new WeakMap,To=new WeakMap,Po=new WeakMap,ro=new WeakSet,bS=function(){const t=A(this,To,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Bi,{signal:a(this,Po)._signal});const e=A(this,Wc,document.createElement("div"));return e.className="buttons",t.append(e),C(this,ro,_S).call(this),t},SS=function(t,e){let i=0,r=0;for(const o of t){const u=o.y+o.height;if(u<i)continue;const c=o.x+(e?o.width:0);if(u>i){r=c,i=u;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,i]},_S=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,Po)._signal;t.addEventListener("contextmenu",Bi,{signal:i}),t.addEventListener("click",()=>{a(this,Po).highlightSelection("floating_button")},{signal:i}),a(this,Wc).append(t)};function cp(d,t,e){for(const i of e)t.addEventListener(i,d[i].bind(d))}var vp;class Kx{constructor(){E(this,vp,0)}get id(){return`${Rx}${fn(this,vp)._++}`}}vp=new WeakMap;var Sl,qc,sn,_l,Ff;const Zv=class Zv{constructor(){E(this,_l);E(this,Sl,Ux());E(this,qc,0);E(this,sn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ot(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:o}=t;return C(this,_l,Ff).call(this,`${e}_${i}_${r}_${o}`,t)}async getFromUrl(t){return C(this,_l,Ff).call(this,t,t)}async getFromBlob(t,e){const i=await e;return C(this,_l,Ff).call(this,t,i)}async getFromId(t){a(this,sn)||A(this,sn,new Map);const e=a(this,sn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,sn)||A(this,sn,new Map);let i=a(this,sn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${a(this,Sl)}_${fn(this,qc)._++}`,refCounter:1,isSvg:!1},a(this,sn).set(t,i),a(this,sn).set(i.id,i),i}getSvgUrl(t){const e=a(this,sn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,sn)||A(this,sn,new Map);const e=a(this,sn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=o.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,Sl)}_`)}};Sl=new WeakMap,qc=new WeakMap,sn=new WeakMap,_l=new WeakSet,Ff=async function(t,e){a(this,sn)||A(this,sn,new Map);let i=a(this,sn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,Sl)}_${fn(this,qc)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await Hp(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=Zv._isSVGFittingCanvas,u=new FileReader,c=new Image,f=new Promise((p,m)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},u.onload=async()=>{const v=i.svgUrl=u.result;c.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},c.onerror=u.onerror=m});u.readAsDataURL(r),await f}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Mt(r),i=null}return a(this,sn).set(t,i),i&&a(this,sn).set(i.id,i),i};let ky=Zv;var me,kr,Xc,ue;class Qx{constructor(t=128){E(this,me,[]);E(this,kr,!1);E(this,Xc);E(this,ue,-1);A(this,Xc,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),a(this,kr))return;const f={cmd:t,undo:e,post:i,type:o};if(a(this,ue)===-1){a(this,me).length>0&&(a(this,me).length=0),A(this,ue,0),a(this,me).push(f);return}if(u&&a(this,me)[a(this,ue)].type===o){c&&(f.undo=a(this,me)[a(this,ue)].undo),a(this,me)[a(this,ue)]=f;return}const p=a(this,ue)+1;p===a(this,Xc)?a(this,me).splice(0,1):(A(this,ue,p),p<a(this,me).length&&a(this,me).splice(p)),a(this,me).push(f)}undo(){if(a(this,ue)===-1)return;A(this,kr,!0);const{undo:t,post:e}=a(this,me)[a(this,ue)];t(),e==null||e(),A(this,kr,!1),A(this,ue,a(this,ue)-1)}redo(){if(a(this,ue)<a(this,me).length-1){A(this,ue,a(this,ue)+1),A(this,kr,!0);const{cmd:t,post:e}=a(this,me)[a(this,ue)];t(),e==null||e(),A(this,kr,!1)}}hasSomethingToUndo(){return a(this,ue)!==-1}hasSomethingToRedo(){return a(this,ue)<a(this,me).length-1}cleanType(t){if(a(this,ue)!==-1){for(let e=a(this,ue);e>=0;e--)if(a(this,me)[e].type!==t){a(this,me).splice(e+1,a(this,ue)-e),A(this,ue,e);return}a(this,me).length=0,A(this,ue,-1)}}destroy(){A(this,me,null)}}me=new WeakMap,kr=new WeakMap,Xc=new WeakMap,ue=new WeakMap;var wp,ES;class gd{constructor(t){E(this,wp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=wn.platform;for(const[i,r,o={}]of t)for(const u of i){const c=u.startsWith("mac+");e&&c?(this.callbacks.set(u.slice(4),{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!c&&(this.callbacks.set(u,{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(C(this,wp,ES).call(this,e));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:u=[],checker:c=null}}=i;c&&!c(t,e)||(r.bind(t,...u,e)(),o||ti(e))}}wp=new WeakSet,ES=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Ap=class Ap{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Xx(t),Ot(this,"_colors",t)}convert(t){const e=Xv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((o,u)=>o===e[u]))return Ap._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?yt.makeHexColor(...e):t}};Ct(Ap,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ty=Ap;var El,Hn,Pe,Ve,Cl,Ps,xl,ui,Tr,Ro,kl,Lo,Qi,Pi,Mo,Yc,Kc,Tl,Qc,Ji,Pr,Pl,Rr,Zi,bp,Lr,Jc,Mr,Io,Zc,th,De,Wt,Rs,No,eh,nh,Ir,ts,Ls,ih,ci,et,Of,Py,CS,xS,$f,kS,TS,PS,Ry,RS,Ly,My,LS,pn,Cs,MS,IS,Iy,NS,Sc,Ny;const vl=class vl{constructor(t,e,i,r,o,u,c,f,p,m,v,w,b){E(this,et);E(this,El,new AbortController);E(this,Hn,null);E(this,Pe,new Map);E(this,Ve,new Map);E(this,Cl,null);E(this,Ps,null);E(this,xl,null);E(this,ui,new Qx);E(this,Tr,null);E(this,Ro,null);E(this,kl,0);E(this,Lo,new Set);E(this,Qi,null);E(this,Pi,null);E(this,Mo,new Set);Ct(this,"_editorUndoBar",null);E(this,Yc,!1);E(this,Kc,!1);E(this,Tl,!1);E(this,Qc,null);E(this,Ji,null);E(this,Pr,null);E(this,Pl,null);E(this,Rr,!1);E(this,Zi,null);E(this,bp,new Kx);E(this,Lr,!1);E(this,Jc,!1);E(this,Mr,null);E(this,Io,null);E(this,Zc,null);E(this,th,null);E(this,De,Lt.NONE);E(this,Wt,new Set);E(this,Rs,null);E(this,No,null);E(this,eh,null);E(this,nh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Ir,[0,0]);E(this,ts,null);E(this,Ls,null);E(this,ih,null);E(this,ci,null);const _=this._signal=a(this,El).signal;A(this,Ls,t),A(this,ih,e),A(this,Cl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:_}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),r._on("setpreference",this.onSetPreference.bind(this),{signal:_}),r._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),C(this,et,kS).call(this),C(this,et,LS).call(this),C(this,et,Ry).call(this),A(this,Ps,o.annotationStorage),A(this,Qc,o.filterFactory),A(this,No,u),A(this,Pl,c||null),A(this,Yc,f),A(this,Kc,p),A(this,Tl,m),A(this,th,v||null),this.viewParameters={realScale:so.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const t=vl.prototype,e=u=>a(u,Ls).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:f}=c;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ot(this,"_keyboardManager",new gd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,Ls).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,Ls).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,i,r,o;(t=a(this,ci))==null||t.resolve(),A(this,ci,null),(e=a(this,El))==null||e.abort(),A(this,El,null),this._signal=null;for(const u of a(this,Ve).values())u.destroy();a(this,Ve).clear(),a(this,Pe).clear(),a(this,Mo).clear(),A(this,Hn,null),a(this,Wt).clear(),a(this,ui).destroy(),(i=a(this,Cl))==null||i.destroy(),(r=a(this,Zi))==null||r.hide(),A(this,Zi,null),a(this,Ji)&&(clearTimeout(a(this,Ji)),A(this,Ji,null)),a(this,ts)&&(clearTimeout(a(this,ts)),A(this,ts,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,th)}get useNewAltTextFlow(){return a(this,Kc)}get useNewAltTextWhenAddingImage(){return a(this,Tl)}get hcmFilter(){return Ot(this,"hcmFilter",a(this,No)?a(this,Qc).addHCMFilter(a(this,No).foreground,a(this,No).background):"none")}get direction(){return Ot(this,"direction",getComputedStyle(a(this,Ls)).direction)}get highlightColors(){return Ot(this,"highlightColors",a(this,Pl)?new Map(a(this,Pl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ot(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Ro,t)}setMainHighlightColorPicker(t){A(this,Zc,t)}editAltText(t,e=!1){var i;(i=a(this,Cl))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,Tl,e);break}}onPageChanging({pageNumber:t}){A(this,kl,t-1)}focusMainContainer(){a(this,Ls).focus()}findParent(t,e){for(const i of a(this,Ve).values()){const{x:r,y:o,width:u,height:c}=i.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=o&&e<=o+c)return i}return null}disableUserSelect(t=!1){a(this,ih).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,Mo).add(t)}removeShouldRescale(t){a(this,Mo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*so.PDF_TO_CSS_UNITS;for(const i of a(this,Mo))i.onScaleChanging();(e=a(this,Ro))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u}=e,c=e.toString(),p=C(this,et,Of).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const v=C(this,et,Py).call(this,p),w=a(this,De)===Lt.NONE,b=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Lt.HIGHLIGHT,b);return}b()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Ps)&&!a(this,Ps).has(t.id)&&a(this,Ps).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,Rr)&&(A(this,Rr,!1),C(this,et,$f).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Wt))if(e.div.contains(t)){A(this,Io,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Io))return;const[t,e]=a(this,Io);A(this,Io,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,et,Ry).call(this),C(this,et,Ly).call(this)}removeEditListeners(){C(this,et,RS).call(this),C(this,et,My).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,Pi))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,Pi))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,Hn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,Wt)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of a(this,Pi))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Mt(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of i){const p=await r.deserialize(f);if(!p)return;o.push(p)}const u=()=>{for(const f of o)C(this,et,Iy).call(this,f);C(this,et,Ny).call(this,o)},c=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(o){Mt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,De)!==Lt.NONE&&!this.isEditorHandlingKeyboard&&vl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Rr)&&(A(this,Rr,!1),C(this,et,$f).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(C(this,et,TS).call(this),C(this,et,Ly).call(this),C(this,et,pn).call(this,{isEditing:a(this,De)!==Lt.NONE,isEmpty:C(this,et,Sc).call(this),hasSomethingToUndo:a(this,ui).hasSomethingToUndo(),hasSomethingToRedo:a(this,ui).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,et,PS).call(this),C(this,et,My).call(this),C(this,et,pn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Pi)){A(this,Pi,t);for(const e of a(this,Pi))C(this,et,Cs).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,bp).id}get currentLayer(){return a(this,Ve).get(a(this,kl))}getLayer(t){return a(this,Ve).get(t)}get currentPageIndex(){return a(this,kl)}addLayer(t){a(this,Ve).set(t.pageIndex,t),a(this,Lr)?t.enable():t.disable()}removeLayer(t){a(this,Ve).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var r;if(a(this,De)!==t&&!(a(this,ci)&&(await a(this,ci).promise,!a(this,ci)))){if(A(this,ci,Promise.withResolvers()),A(this,De,t),t===Lt.NONE){this.setEditingState(!1),C(this,et,IS).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,ci).resolve();return}this.setEditingState(!0),await C(this,et,MS).call(this),this.unselectAll();for(const o of a(this,Ve).values())o.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,ci).resolve();return}for(const o of a(this,Pe).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();a(this,ci).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,De)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,Pi)){switch(t){case $t.CREATE:this.currentLayer.addNewEditor();return;case $t.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,Zc))==null||i.updateColor(e);break;case $t.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,eh)||A(this,eh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of a(this,Wt))r.updateParams(t,e);for(const r of a(this,Pi))r.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var o;for(const u of a(this,Pe).values())u.editorType===t&&u.show(e);(((o=a(this,eh))==null?void 0:o.get($t.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,et,Cs).call(this,[[$t.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Jc)!==t){A(this,Jc,t);for(const e of a(this,Ve).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,Pe).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,Pe).get(t)}addEditor(t){a(this,Pe).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,Ji)&&clearTimeout(a(this,Ji)),A(this,Ji,setTimeout(()=>{this.focusMainContainer(),A(this,Ji,null)},0))),a(this,Pe).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,Lo).has(t.annotationElementId))&&((e=a(this,Ps))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,Lo).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Lo).has(t)}removeDeletedAnnotationElement(t){a(this,Lo).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Hn)!==t&&(A(this,Hn,t),t&&C(this,et,Cs).call(this,t.propertiesToUpdate))}updateUI(t){a(this,et,NS)===t&&C(this,et,Cs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,et,Cs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Wt).has(t)){a(this,Wt).delete(t),t.unselect(),C(this,et,pn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Wt).add(t),t.select(),C(this,et,Cs).call(this,t.propertiesToUpdate),C(this,et,pn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,Ro))==null||e.commitOrRemove();for(const i of a(this,Wt))i!==t&&i.unselect();a(this,Wt).clear(),a(this,Wt).add(t),t.select(),C(this,et,Cs).call(this,t.propertiesToUpdate),C(this,et,pn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Wt).has(t)}get firstSelectedEditor(){return a(this,Wt).values().next().value}unselect(t){t.unselect(),a(this,Wt).delete(t),C(this,et,pn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Wt).size!==0}get isEnterHandled(){return a(this,Wt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,ui).undo(),C(this,et,pn).call(this,{hasSomethingToUndo:a(this,ui).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,et,Sc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,ui).redo(),C(this,et,pn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ui).hasSomethingToRedo(),isEmpty:C(this,et,Sc).call(this)})}addCommands(t){a(this,ui).add(t),C(this,et,pn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,et,Sc).call(this)})}cleanUndoStack(t){a(this,ui).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Wt)],i=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const u of e)C(this,et,Iy).call(this,u)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Hn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Hn)||this.hasSelection}selectAll(){for(const t of a(this,Wt))t.commit();C(this,et,Ny).call(this,a(this,Pe).values())}unselectAll(){var t;if(!(a(this,Hn)&&(a(this,Hn).commitOrRemove(),a(this,De)!==Lt.NONE))&&!((t=a(this,Ro))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Wt))e.unselect();a(this,Wt).clear(),C(this,et,pn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Ir)[0]+=t,a(this,Ir)[1]+=e;const[r,o]=a(this,Ir),u=[...a(this,Wt)],c=1e3;a(this,ts)&&clearTimeout(a(this,ts)),A(this,ts,setTimeout(()=>{A(this,ts,null),a(this,Ir)[0]=a(this,Ir)[1]=0,this.addCommands({cmd:()=>{for(const f of u)a(this,Pe).has(f.id)&&f.translateInPage(r,o)},undo:()=>{for(const f of u)a(this,Pe).has(f.id)&&f.translateInPage(-r,-o)},mustExec:!1})},c));for(const f of u)f.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Qi,new Map);for(const t of a(this,Wt))a(this,Qi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Qi))return!1;this.disableUserSelect(!1);const t=a(this,Qi);A(this,Qi,null);let e=!1;for(const[{x:r,y:o,pageIndex:u},c]of t)c.newX=r,c.newY=o,c.newPageIndex=u,e||(e=r!==c.savedX||o!==c.savedY||u!==c.savedPageIndex);if(!e)return!1;const i=(r,o,u,c)=>{if(a(this,Pe).has(r.id)){const f=a(this,Ve).get(c);f?r._setParentAndPosition(f,o,u):(r.pageIndex=c,r.x=o,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:u,newPageIndex:c}]of t)i(r,o,u,c)},undo:()=>{for(const[r,{savedX:o,savedY:u,savedPageIndex:c}]of t)i(r,o,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Qi))for(const i of a(this,Qi).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Wt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Hn)===t}getActive(){return a(this,Hn)}getMode(){return a(this,De)}get imageManager(){return Ot(this,"imageManager",new ky)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,m,v,w)=>({x:(m-r)/u,y:1-(p+v-i)/o,width:w/u,height:v/o});break;case"180":c=(p,m,v,w)=>({x:1-(p+v-i)/o,y:1-(m+w-r)/u,width:v/o,height:w/u});break;case"270":c=(p,m,v,w)=>({x:1-(m+w-r)/u,y:(p-i)/o,width:w/u,height:v/o});break;default:c=(p,m,v,w)=>({x:(p-i)/o,y:(m-r)/u,width:v/o,height:w/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const v=e.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:b,width:_,height:x}of v.getClientRects())_===0||x===0||f.push(c(w,b,_,x))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,xl)||A(this,xl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,xl))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,xl))==null?void 0:r.get(t.data.id);if(!e)return;const i=a(this,Ps).getRawValue(e);i&&(a(this,De)===Lt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};El=new WeakMap,Hn=new WeakMap,Pe=new WeakMap,Ve=new WeakMap,Cl=new WeakMap,Ps=new WeakMap,xl=new WeakMap,ui=new WeakMap,Tr=new WeakMap,Ro=new WeakMap,kl=new WeakMap,Lo=new WeakMap,Qi=new WeakMap,Pi=new WeakMap,Mo=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Tl=new WeakMap,Qc=new WeakMap,Ji=new WeakMap,Pr=new WeakMap,Pl=new WeakMap,Rr=new WeakMap,Zi=new WeakMap,bp=new WeakMap,Lr=new WeakMap,Jc=new WeakMap,Mr=new WeakMap,Io=new WeakMap,Zc=new WeakMap,th=new WeakMap,De=new WeakMap,Wt=new WeakMap,Rs=new WeakMap,No=new WeakMap,eh=new WeakMap,nh=new WeakMap,Ir=new WeakMap,ts=new WeakMap,Ls=new WeakMap,ih=new WeakMap,ci=new WeakMap,et=new WeakSet,Of=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Py=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,Ve).values())if(i.hasTextLayer(t))return i;return null},CS=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=C(this,et,Of).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(a(this,Zi)||A(this,Zi,new Yx(this)),a(this,Zi).show(i,r,this.direction==="ltr"))},xS=function(){var o,u,c;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Rs)&&((o=a(this,Zi))==null||o.hide(),A(this,Rs,null),C(this,et,pn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Rs))return;const r=C(this,et,Of).call(this,t).closest(".textLayer");if(!r){a(this,Rs)&&((u=a(this,Zi))==null||u.hide(),A(this,Rs,null),C(this,et,pn).call(this,{hasSelectedText:!1}));return}if((c=a(this,Zi))==null||c.hide(),A(this,Rs,e),C(this,et,pn).call(this,{hasSelectedText:!0}),!(a(this,De)!==Lt.HIGHLIGHT&&a(this,De)!==Lt.NONE)&&(a(this,De)===Lt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Rr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=a(this,De)===Lt.HIGHLIGHT?C(this,et,Py).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),w.type==="pointerup"&&C(this,et,$f).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},$f=function(t=""){a(this,De)===Lt.HIGHLIGHT?this.highlightSelection(t):a(this,Yc)&&C(this,et,CS).call(this)},kS=function(){document.addEventListener("selectionchange",C(this,et,xS).bind(this),{signal:this._signal})},TS=function(){if(a(this,Pr))return;A(this,Pr,new AbortController);const t=this.combinedSignal(a(this,Pr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},PS=function(){var t;(t=a(this,Pr))==null||t.abort(),A(this,Pr,null)},Ry=function(){if(a(this,Mr))return;A(this,Mr,new AbortController);const t=this.combinedSignal(a(this,Mr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},RS=function(){var t;(t=a(this,Mr))==null||t.abort(),A(this,Mr,null)},Ly=function(){if(a(this,Tr))return;A(this,Tr,new AbortController);const t=this.combinedSignal(a(this,Tr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},My=function(){var t;(t=a(this,Tr))==null||t.abort(),A(this,Tr,null)},LS=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},pn=function(t){Object.entries(t).some(([i,r])=>a(this,nh)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,nh),t)}),a(this,De)===Lt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,et,Cs).call(this,[[$t.HIGHLIGHT_FREE,!0]]))},Cs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},MS=async function(){if(!a(this,Lr)){A(this,Lr,!0);const t=[];for(const e of a(this,Ve).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,Pe).values())e.enable()}},IS=function(){if(this.unselectAll(),a(this,Lr)){A(this,Lr,!1);for(const t of a(this,Ve).values())t.disable();for(const t of a(this,Pe).values())t.disable()}},Iy=function(t){const e=a(this,Ve).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},NS=function(){let t=null;for(t of a(this,Wt));return t},Sc=function(){if(a(this,Pe).size===0)return!0;if(a(this,Pe).size===1)for(const t of a(this,Pe).values())return t.isEmpty();return!1},Ny=function(t){for(const e of a(this,Wt))e.unselect();a(this,Wt).clear();for(const e of t)e.isEmpty()||(a(this,Wt).add(e),e.select());C(this,et,pn).call(this,{hasSelectedEditor:this.hasSelection})},Ct(vl,"TRANSLATE_SMALL",1),Ct(vl,"TRANSLATE_BIG",10);let Ma=vl;var Fe,es,Ri,Rl,ns,Bn,Ll,is,Mn,Ms,Do,ss,Nr,Hi,_c,zf;const gn=class gn{constructor(t){E(this,Hi);E(this,Fe,null);E(this,es,!1);E(this,Ri,null);E(this,Rl,null);E(this,ns,null);E(this,Bn,null);E(this,Ll,!1);E(this,is,null);E(this,Mn,null);E(this,Ms,null);E(this,Do,null);E(this,ss,!1);A(this,Mn,t),A(this,ss,t._uiManager.useNewAltTextFlow),a(gn,Nr)||A(gn,Nr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){gn._l10n??(gn._l10n=t)}async render(){const t=A(this,Ri,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,Rl,document.createElement("span"));t.append(e),a(this,ss)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(gn,Nr).missing),e.setAttribute("data-l10n-id",a(gn,Nr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,Mn)._uiManager._signal;t.addEventListener("contextmenu",Bi,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),a(this,Mn)._uiManager.editAltText(a(this,Mn)),a(this,ss)&&a(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Hi,_c)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,Ll,!0),r(o))},{signal:i}),await C(this,Hi,zf).call(this),t}finish(){a(this,Ri)&&(a(this,Ri).focus({focusVisible:a(this,Ll)}),A(this,Ll,!1))}isEmpty(){return a(this,ss)?a(this,Fe)===null:!a(this,Fe)&&!a(this,es)}hasData(){return a(this,ss)?a(this,Fe)!==null||!!a(this,Ms):this.isEmpty()}get guessedText(){return a(this,Ms)}async setGuessedText(t){a(this,Fe)===null&&(A(this,Ms,t),A(this,Do,await gn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,Hi,zf).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,ss)||a(this,Fe)){(e=a(this,is))==null||e.remove(),A(this,is,null);return}if(!a(this,is)){const i=A(this,is,document.createElement("div"));i.className="noAltTextBadge",a(this,Mn).div.append(i)}a(this,is).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Fe);return!t&&a(this,Ms)===e&&(e=a(this,Do)),{altText:e,decorative:a(this,es),guessedText:a(this,Ms),textWithDisclaimer:a(this,Do)}}get data(){return{altText:a(this,Fe),decorative:a(this,es)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:o=!1}){i&&(A(this,Ms,i),A(this,Do,r)),!(a(this,Fe)===t&&a(this,es)===e)&&(o||(A(this,Fe,t),A(this,es,e)),C(this,Hi,zf).call(this))}toggle(t=!1){a(this,Ri)&&(!t&&a(this,Bn)&&(clearTimeout(a(this,Bn)),A(this,Bn,null)),a(this,Ri).disabled=!t)}shown(){a(this,Mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Hi,_c)}})}destroy(){var t,e;(t=a(this,Ri))==null||t.remove(),A(this,Ri,null),A(this,Rl,null),A(this,ns,null),(e=a(this,is))==null||e.remove(),A(this,is,null)}};Fe=new WeakMap,es=new WeakMap,Ri=new WeakMap,Rl=new WeakMap,ns=new WeakMap,Bn=new WeakMap,Ll=new WeakMap,is=new WeakMap,Mn=new WeakMap,Ms=new WeakMap,Do=new WeakMap,ss=new WeakMap,Nr=new WeakMap,Hi=new WeakSet,_c=function(){return a(this,Fe)&&"added"||a(this,Fe)===null&&this.guessedText&&"review"||"missing"},zf=async function(){var r,o,u;const t=a(this,Ri);if(!t)return;if(a(this,ss)){if(t.classList.toggle("done",!!a(this,Fe)),t.setAttribute("data-l10n-id",a(gn,Nr)[a(this,Hi,_c)]),(r=a(this,Rl))==null||r.setAttribute("data-l10n-id",a(gn,Nr)[`${a(this,Hi,_c)}-label`]),!a(this,Fe)){(o=a(this,ns))==null||o.remove();return}}else{if(!a(this,Fe)&&!a(this,es)){t.classList.remove("done"),(u=a(this,ns))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,ns);if(!e){A(this,ns,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Mn).id}`;const c=100,f=a(this,Mn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(a(this,Bn)),A(this,Bn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,Bn,setTimeout(()=>{A(this,Bn,null),a(this,ns).classList.add("show"),a(this,Mn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;a(this,Bn)&&(clearTimeout(a(this,Bn)),A(this,Bn,null)),(p=a(this,ns))==null||p.classList.remove("show")},{signal:f})}a(this,es)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Fe)),e.parentNode||t.append(e);const i=a(this,Mn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},E(gn,Nr,null),Ct(gn,"_l10n",null);let hp=gn;var sh,Fo,rh,oh,ah,lh,uh,Ml,Is,Oo,Dr,ir,DS,FS,Dy;const t0=class t0{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:u=null,signal:c}){E(this,ir);E(this,sh);E(this,Fo,!1);E(this,rh,null);E(this,oh);E(this,ah);E(this,lh);E(this,uh);E(this,Ml);E(this,Is,null);E(this,Oo);E(this,Dr,null);A(this,sh,t),A(this,rh,i),A(this,oh,e),A(this,ah,r),A(this,lh,o),A(this,uh,u),A(this,Oo,new AbortController),A(this,Ml,AbortSignal.any([c,a(this,Oo).signal])),t.addEventListener("touchstart",C(this,ir,DS).bind(this),{passive:!1,signal:a(this,Ml)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ot(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=a(this,Oo))==null||t.abort(),A(this,Oo,null)}};sh=new WeakMap,Fo=new WeakMap,rh=new WeakMap,oh=new WeakMap,ah=new WeakMap,lh=new WeakMap,uh=new WeakMap,Ml=new WeakMap,Is=new WeakMap,Oo=new WeakMap,Dr=new WeakMap,ir=new WeakSet,DS=function(t){var r,o,u;if((r=a(this,oh))!=null&&r.call(this)||t.touches.length<2)return;if(!a(this,Dr)){A(this,Dr,new AbortController);const c=AbortSignal.any([a(this,Ml),a(this,Dr).signal]),f=a(this,sh),p={signal:c,passive:!1};f.addEventListener("touchmove",C(this,ir,FS).bind(this),p),f.addEventListener("touchend",C(this,ir,Dy).bind(this),p),f.addEventListener("touchcancel",C(this,ir,Dy).bind(this),p),(o=a(this,ah))==null||o.call(this)}if(ti(t),t.touches.length!==2||(u=a(this,rh))!=null&&u.call(this)){A(this,Is,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),A(this,Is,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},FS=function(t){var N;if(!a(this,Is)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:o}=e,{screenX:u,screenY:c}=i,f=a(this,Is),{touch0X:p,touch0Y:m,touch1X:v,touch1Y:w}=f,b=v-p,_=w-m,x=u-r,k=c-o,T=Math.hypot(x,k)||1,M=Math.hypot(b,_)||1;if(!a(this,Fo)&&Math.abs(M-T)<=t0.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=u,f.touch1Y=c,t.preventDefault(),!a(this,Fo)){A(this,Fo,!0);return}const F=[(r+u)/2,(o+c)/2];(N=a(this,lh))==null||N.call(this,F,M,T)},Dy=function(t){var e;a(this,Dr).abort(),A(this,Dr,null),(e=a(this,uh))==null||e.call(this),a(this,Is)&&(t.preventDefault(),A(this,Is,null),A(this,Fo,!1))};let dp=t0;var $o,Li,ne,Il,Fr,ch,zo,Ge,Ho,Ns,Or,hh,Bo,jn,dh,jo,Ds,rs,Nl,Dl,hi,Uo,fh,Sp,xt,Fy,ph,Oy,Hf,OS,$S,$y,Bf,zy,zS,HS,BS,Hy,jS,By,US,VS,GS,jy,Ec;const It=class It{constructor(t){E(this,xt);E(this,$o,null);E(this,Li,null);E(this,ne,null);E(this,Il,!1);E(this,Fr,null);E(this,ch,"");E(this,zo,!1);E(this,Ge,null);E(this,Ho,null);E(this,Ns,null);E(this,Or,null);E(this,hh,"");E(this,Bo,!1);E(this,jn,null);E(this,dh,!1);E(this,jo,!1);E(this,Ds,!1);E(this,rs,null);E(this,Nl,0);E(this,Dl,0);E(this,hi,null);E(this,Uo,null);Ct(this,"_editToolbar",null);Ct(this,"_initialOptions",Object.create(null));Ct(this,"_initialData",null);Ct(this,"_isVisible",!0);Ct(this,"_uiManager",null);Ct(this,"_focusEventsAllowed",!0);E(this,fh,!1);E(this,Sp,It._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,u];const[c,f]=this.parentDimensions;this.x=t.x/c,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=It.prototype._resizeWithKeyboard,e=Ma.TRANSLATE_SMALL,i=Ma.TRANSLATE_BIG;return Ot(this,"_resizerKeyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],It.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ot(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Jx({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(It._l10n??(It._l10n=t),It._l10nResizer||(It._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),It._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,fh)}set _isDraggable(t){var e;A(this,fh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Sp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):C(this,xt,Ec).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Bo)?A(this,Bo,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[o,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/o,this.y=(e+r)/u,this.fixAndSetPosition()}translate(t,e){C(this,xt,Fy).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,jn)||A(this,jn,[this.x,this.y,this.width,this.height]),C(this,xt,Fy).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,jn)||A(this,jn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[f,p]=this.getBaseTranslation();u+=f,c+=p;const{style:m}=i;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,jn)&&(a(this,jn)[0]!==this.x||a(this,jn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,jn)&&(a(this,jn)[2]!==this.width||a(this,jn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=It,r=i/t,o=i/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:o,y:u,width:c,height:f}=this;if(c*=i,f*=r,o*=i,u*=r,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(i-c,o)),u=Math.max(0,Math.min(r-f,u));break;case 90:o=Math.max(0,Math.min(i-f,o)),u=Math.min(r,Math.max(c,u));break;case 180:o=Math.min(i,Math.max(c,o)),u=Math.min(r,Math.max(f,u));break;case 270:o=Math.min(i,Math.max(f,o)),u=Math.max(0,Math.min(r-c,u));break}this.x=o/=i,this.y=u/=r;const[p,m]=this.getBaseTranslation();o+=p,u+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return C(i=It,ph,Oy).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return C(i=It,ph,Oy).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,a(this,zo)||(o.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),o=!a(this,zo)&&e.endsWith("%");if(r&&o)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!a(this,zo)&&!o&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,jo)?this._editToolbar:(this._editToolbar=new Cy(this),this.div.append(this._editToolbar.render()),a(this,ne)&&await this._editToolbar.addAltText(a(this,ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,ne))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,ne)||(hp.initialize(It._l10n),A(this,ne,new hp(this)),a(this,$o)&&(a(this,ne).data=a(this,$o),A(this,$o,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,ne))==null?void 0:t.data}set altTextData(t){a(this,ne)&&(a(this,ne).data=t)}get guessedAltText(){var t;return(t=a(this,ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,ne))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,ne)&&!a(this,ne).isEmpty()}hasAltTextData(){var t;return((t=a(this,ne))==null?void 0:t.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,Il)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),C(this,xt,By).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),cp(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,Uo)||A(this,Uo,new dp({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,xt,zS).bind(this),onPinching:C(this,xt,HS).bind(this),onPinchEnd:C(this,xt,BS).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(t){const{isMac:e}=wn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Bo,!0),this._isDraggable){C(this,xt,jS).call(this,t);return}C(this,xt,Hy).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,rs)&&clearTimeout(a(this,rs)),A(this,rs,setTimeout(()=>{var t;A(this,rs,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[o,u]=this.pageDimensions,[c,f]=this.pageTranslation,p=t/r,m=e/r,v=this.x*o,w=this.y*u,b=this.width*o,_=this.height*u;switch(i){case 0:return[v+p+c,u-w-m-_+f,v+p+b+c,u-w-m+f];case 90:return[v+m+c,u-w+p+f,v+m+_+c,u-w+p+b+f];case 180:return[v-p-b+c,u-w+m+f,v-p+c,u-w+m+_+f];case 270:return[v-m-_+c,u-w-p-b+f,v-m+c,u-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,o,u]=t,c=o-i,f=u-r;switch(this.rotation){case 0:return[i,e-u,c,f];case 90:return[i,e-r,f,c];case 180:return[o,e-r,c,f];case 270:return[o,e-u,f,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){A(this,jo,!0)}disableEditMode(){A(this,jo,!1)}isInEditMode(){return a(this,jo)}shouldGetKeyboardEvents(){return a(this,Ds)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&r>0&&t<o&&i>0}rebuild(){C(this,xt,By).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Qt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,A(r,$o,t.accessibilityData);const[o,u]=r.pageDimensions,[c,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/o,r.y=f/u,r.width=p/o,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Or))==null||t.abort(),A(this,Or,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,rs)&&(clearTimeout(a(this,rs)),A(this,rs,null)),C(this,xt,Ec).call(this),this.removeEditToolbar(),a(this,hi)){for(const i of a(this,hi).values())clearTimeout(i);A(this,hi,null)}this.parent=null,(e=a(this,Uo))==null||e.destroy(),A(this,Uo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,xt,OS).call(this),a(this,Ge).classList.remove("hidden"),cp(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Ns,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Ge).children;if(!a(this,Li)){A(this,Li,Array.from(e));const u=C(this,xt,US).bind(this),c=C(this,xt,VS).bind(this),f=this._uiManager._signal;for(const p of a(this,Li)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",c,{signal:f}),p.addEventListener("focus",C(this,xt,GS).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",It._l10nResizer[m])}}const i=a(this,Li)[0];let r=0;for(const u of e){if(u===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(a(this,Li).length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)a(this,Ge).append(a(this,Ge).firstChild);else if(o>r)for(let c=0;c<o-r;c++)a(this,Ge).firstChild.before(a(this,Ge).lastChild);let u=0;for(const c of e){const p=a(this,Li)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",It._l10nResizer[p])}}C(this,xt,jy).call(this,0),A(this,Ds,!0),a(this,Ge).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Ds)&&C(this,xt,zy).call(this,a(this,hh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,xt,Ec).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,ne))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,r,o;(t=a(this,Ge))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=a(this,ne))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,dh)}set isEditing(t){A(this,dh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,zo,!0);const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,hi)||A(this,hi,new Map);const{action:i}=t;let r=a(this,hi).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,hi).delete(i),a(this,hi).size===0&&A(this,hi,null)},It._telemetryTimeout),a(this,hi).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Il,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Il,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};$o=new WeakMap,Li=new WeakMap,ne=new WeakMap,Il=new WeakMap,Fr=new WeakMap,ch=new WeakMap,zo=new WeakMap,Ge=new WeakMap,Ho=new WeakMap,Ns=new WeakMap,Or=new WeakMap,hh=new WeakMap,Bo=new WeakMap,jn=new WeakMap,dh=new WeakMap,jo=new WeakMap,Ds=new WeakMap,rs=new WeakMap,Nl=new WeakMap,Dl=new WeakMap,hi=new WeakMap,Uo=new WeakMap,fh=new WeakMap,Sp=new WeakMap,xt=new WeakSet,Fy=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ph=new WeakSet,Oy=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Hf=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},OS=function(){if(a(this,Ge))return;A(this,Ge,document.createElement("div")),a(this,Ge).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");a(this,Ge).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",C(this,xt,$S).bind(this,i),{signal:e}),r.addEventListener("contextmenu",Bi,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,Ge))},$S=function(t,e){var m;e.preventDefault();const{isMac:i}=wn.platform;if(e.button!==0||e.ctrlKey&&i)return;(m=a(this,ne))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,Ho,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,xt,zy).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",ti,{passive:!1,signal:u}),window.addEventListener("contextmenu",Bi,{signal:u}),A(this,Ns,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var v;o.abort(),this.parent.togglePointerEvents(!0),(v=a(this,ne))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=f,C(this,xt,Bf).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},$y=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[o,u]=this.parentDimensions;this.setDims(o*i,u*r),this.fixAndSetPosition(),this._onResized()},Bf=function(){if(!a(this,Ns))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=a(this,Ns);A(this,Ns,null);const o=this.x,u=this.y,c=this.width,f=this.height;o===t&&u===e&&c===i&&f===r||this.addCommands({cmd:C(this,xt,$y).bind(this,o,u,c,f),undo:C(this,xt,$y).bind(this,t,e,i,r),mustExec:!0})},zy=function(t,e){const[i,r]=this.parentDimensions,o=this.x,u=this.y,c=this.width,f=this.height,p=It.MIN_SIZE/i,m=It.MIN_SIZE/r,v=C(this,xt,Hf).call(this,this.rotation),w=(J,Z)=>[v[0]*J+v[2]*Z,v[1]*J+v[3]*Z],b=C(this,xt,Hf).call(this,360-this.rotation),_=(J,Z)=>[b[0]*J+b[2]*Z,b[1]*J+b[3]*Z];let x,k,T=!1,M=!1;switch(t){case"topLeft":T=!0,x=(J,Z)=>[0,0],k=(J,Z)=>[J,Z];break;case"topMiddle":x=(J,Z)=>[J/2,0],k=(J,Z)=>[J/2,Z];break;case"topRight":T=!0,x=(J,Z)=>[J,0],k=(J,Z)=>[0,Z];break;case"middleRight":M=!0,x=(J,Z)=>[J,Z/2],k=(J,Z)=>[0,Z/2];break;case"bottomRight":T=!0,x=(J,Z)=>[J,Z],k=(J,Z)=>[0,0];break;case"bottomMiddle":x=(J,Z)=>[J/2,Z],k=(J,Z)=>[J/2,0];break;case"bottomLeft":T=!0,x=(J,Z)=>[0,Z],k=(J,Z)=>[J,0];break;case"middleLeft":M=!0,x=(J,Z)=>[0,Z/2],k=(J,Z)=>[J,Z/2];break}const F=x(c,f),N=k(c,f);let j=w(...N);const V=It._round(o+j[0]),U=It._round(u+j[1]);let Q=1,nt=1,At,ft;if(e.fromKeyboard)({deltaX:At,deltaY:ft}=e);else{const{screenX:J,screenY:Z}=e,[Y,H]=a(this,Ho);[At,ft]=this.screenToPageTranslation(J-Y,Z-H),a(this,Ho)[0]=J,a(this,Ho)[1]=Z}if([At,ft]=_(At/i,ft/r),T){const J=Math.hypot(c,f);Q=nt=Math.max(Math.min(Math.hypot(N[0]-F[0]-At,N[1]-F[1]-ft)/J,1/c,1/f),p/c,m/f)}else M?Q=Math.max(p,Math.min(1,Math.abs(N[0]-F[0]-At)))/c:nt=Math.max(m,Math.min(1,Math.abs(N[1]-F[1]-ft)))/f;const Nt=It._round(c*Q),Tt=It._round(f*nt);j=w(...k(Nt,Tt));const vt=V-j[0],Bt=U-j[1];a(this,jn)||A(this,jn,[this.x,this.y,this.width,this.height]),this.width=Nt,this.height=Tt,this.x=vt,this.y=Bt,this.setDims(i*Nt,r*Tt),this.fixAndSetPosition(),this._onResizing()},zS=function(){var t;A(this,Ns,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},HS=function(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const u=C(this,xt,Hf).call(this,this.rotation),c=(V,U)=>[u[0]*V+u[2]*U,u[1]*V+u[3]*U],[f,p]=this.parentDimensions,m=this.x,v=this.y,w=this.width,b=this.height,_=It.MIN_SIZE/f,x=It.MIN_SIZE/p;o=Math.max(Math.min(o,1/w,1/b),_/w,x/b);const k=It._round(w*o),T=It._round(b*o);if(k===w&&T===b)return;a(this,jn)||A(this,jn,[m,v,w,b]);const M=c(w/2,b/2),F=It._round(m+M[0]),N=It._round(v+M[1]),j=c(k/2,T/2);this.x=F-j[0],this.y=N-j[1],this.width=k,this.height=T,this.setDims(f*k,p*T),this.fixAndSetPosition(),this._onResizing()},BS=function(){var t;(t=a(this,ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,xt,Bf).call(this)},Hy=function(t){const{isMac:e}=wn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},jS=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:o},c=p=>{r.abort(),A(this,Fr,null),A(this,Bo,!1),this._uiManager.endDragSession()||C(this,xt,Hy).call(this,p),i&&this._onStopDragging()};e&&(A(this,Nl,t.clientX),A(this,Dl,t.clientY),A(this,Fr,t.pointerId),A(this,ch,t.pointerType),window.addEventListener("pointermove",p=>{i||(i=!0,this._onStartDragging());const{clientX:m,clientY:v,pointerId:w}=p;if(w!==a(this,Fr)){ti(p);return}const[b,_]=this.screenToPageTranslation(m-a(this,Nl),v-a(this,Dl));A(this,Nl,m),A(this,Dl,v),this._uiManager.dragSelectedEditors(b,_)},u),window.addEventListener("touchmove",ti,u),window.addEventListener("pointerdown",p=>{p.pointerType===a(this,ch)&&(a(this,Uo)||p.isPrimary)&&c(p),ti(p)},u));const f=p=>{if(!a(this,Fr)||a(this,Fr)===p.pointerId){c(p);return}ti(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},By=function(){if(a(this,Or)||!this.div)return;A(this,Or,new AbortController);const t=this._uiManager.combinedSignal(a(this,Or));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},US=function(t){It._resizerKeyboardManager.exec(this,t)},VS=function(t){var e;a(this,Ds)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Ge)&&C(this,xt,Ec).call(this)},GS=function(t){A(this,hh,a(this,Ds)?t:"")},jy=function(t){if(a(this,Li))for(const e of a(this,Li))e.tabIndex=t},Ec=function(){A(this,Ds,!1),C(this,xt,jy).call(this,-1),C(this,xt,Bf).call(this)},E(It,ph),Ct(It,"_l10n",null),Ct(It,"_l10nResizer",null),Ct(It,"_borderLineWidth",-1),Ct(It,"_colorManager",new Ty),Ct(It,"_zIndex",1),Ct(It,"_telemetryTimeout",1e3);let he=It;class Jx extends he{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zb=3285377520,li=4294901760,Yi=65535;class WS{constructor(t){this.h1=t?t&4294967295:zb,this.h2=t?t&4294967295:zb}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,k=t.length;x<k;x++){const T=t.charCodeAt(x);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,u=new Uint32Array(e.buffer,0,r);let c=0,f=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,b=v&Yi,_=w&Yi;for(let x=0;x<r;x++)x&1?(c=u[x],c=c*v&li|c*b&Yi,c=c<<15|c>>>17,c=c*w&li|c*_&Yi,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[x],f=f*v&li|f*b&Yi,f=f<<15|f>>>17,f=f*w&li|f*_&Yi,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,o){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*v&li|c*b&Yi,c=c<<15|c>>>17,c=c*w&li|c*_&Yi,r&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&li|t*36045&Yi,e=e*4283543511&li|((e<<16|t>>>16)*2950163797&li)>>>16,t^=e>>>1,t=t*444984403&li|t*60499&Yi,e=e*3301882366&li|((e<<16|t>>>16)*3120437893&li)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Uy=Object.freeze({map:null,hash:"",transfer:void 0});var Vo,Go,Oe,_p,qS;class Yv{constructor(){E(this,_p);E(this,Vo,!1);E(this,Go,null);E(this,Oe,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,Oe).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,Oe).get(t)}remove(t){if(a(this,Oe).delete(t),a(this,Oe).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,Oe).values())if(e instanceof he)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,Oe).get(t);let r=!1;if(i!==void 0)for(const[o,u]of Object.entries(e))i[o]!==u&&(r=!0,i[o]=u);else r=!0,a(this,Oe).set(t,e);r&&C(this,_p,qS).call(this),e instanceof he&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,Oe).has(t)}getAll(){return a(this,Oe).size>0?Uv(a(this,Oe)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,Oe).size}resetModified(){a(this,Vo)&&(A(this,Vo,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new XS(this)}get serializable(){if(a(this,Oe).size===0)return Uy;const t=new Map,e=new WS,i=[],r=Object.create(null);let o=!1;for(const[u,c]of a(this,Oe)){const f=c instanceof he?c.serialize(!1,r):c;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of t.values())u.bitmap&&i.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Uy}get editorStats(){let t=null;const e=new Map;for(const i of a(this,Oe).values()){if(!(i instanceof he))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const u=t[o]||(t[o]=new Map);for(const[c,f]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){A(this,Go,null)}get modifiedIds(){if(a(this,Go))return a(this,Go);const t=[];for(const e of a(this,Oe).values())!(e instanceof he)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return A(this,Go,{ids:new Set(t),hash:t.join(",")})}}Vo=new WeakMap,Go=new WeakMap,Oe=new WeakMap,_p=new WeakSet,qS=function(){a(this,Vo)||(A(this,Vo,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var gh;class XS extends Yv{constructor(e){super();E(this,gh);const{map:i,hash:r,transfer:o}=e.serializable,u=structuredClone(i,o?{transfer:o}:null);A(this,gh,{map:u,hash:r,transfer:o})}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,gh)}get modifiedIds(){return Ot(this,"modifiedIds",{ids:new Set,hash:""})}}gh=new WeakMap;var Fl;class Zx{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){E(this,Fl,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Fl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,Fl).has(t.loadedName))){if(_e(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,u=new FontFace(i,r,o);this.addNativeFontFace(u);try{await u.load(),a(this,Fl).add(i),e==null||e(t)}catch{Mt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Mt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ot(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(un||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ot(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(_e(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ot(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(N,j){return N.charCodeAt(j)<<24|N.charCodeAt(j+1)<<16|N.charCodeAt(j+2)<<8|N.charCodeAt(j+3)&255}function r(N,j,V,U){const Q=N.substring(0,j),nt=N.substring(j+V);return Q+U+nt}let o,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const f=c.getContext("2d");let p=0;function m(N,j){if(++p>30){Mt("Load test font never loaded."),j();return}if(f.font="30px "+N,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(m.bind(null,N,j))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const _=16,x=1482184792;let k=i(w,_);for(o=0,u=v.length-3;o<u;o+=4)k=k-x+i(v,o)|0;o<v.length&&(k=k-x+i(v+"XXX",o)|0),w=r(w,_,4,$x(k));const T=`url(data:font/opentype;base64,${btoa(w)});`,M=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(M);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const N of[t.loadedName,v]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=N,F.append(j)}this._document.body.append(F),m(v,()=>{F.remove(),e.complete()})}}Fl=new WeakMap;class tk{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Vx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(u){Mt(`getPathGenerator - ignoring character: "${u}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}}const Pf={DATA:1,ERROR:2},Ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Hb(){}function Rn(d){if(d instanceof io||d instanceof Sy||d instanceof Hc||d instanceof Fb||d instanceof up||d instanceof gy)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new io(d.message);case"InvalidPDFException":return new Sy(d.message);case"MissingPDFException":return new Hc(d.message);case"PasswordException":return new Fb(d.message,d.code);case"UnexpectedResponseException":return new up(d.message,d.status);case"UnknownErrorException":return new gy(d.message,d.details)}return new gy(d.message,d.toString())}var Ol,vi,YS,KS,QS,jf;class Cc{constructor(t,e,i){E(this,vi);E(this,Ol,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",C(this,vi,YS).bind(this),{signal:a(this,Ol).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,i,r){const o=this.streamId++,u=this.sourceName,c=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:c,action:t,streamId:o,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:c,stream:Ae.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{_e(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:c,stream:Ae.CANCEL,streamId:o,reason:Rn(p)}),m.promise}},i)}destroy(){var t;(t=a(this,Ol))==null||t.abort(),A(this,Ol,null)}}Ol=new WeakMap,vi=new WeakSet,YS=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,vi,QS).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Pf.DATA)r.resolve(t.data);else if(t.callback===Pf.ERROR)r.reject(Rn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:i,targetName:r,callback:Pf.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:i,targetName:r,callback:Pf.ERROR,callbackId:t.callbackId,reason:Rn(u)})});return}if(t.streamId){C(this,vi,KS).call(this,t);return}e(t.data)},KS=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this,c=this.actionHandler[t.action],f={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:Ae.ENQUEUE,streamId:e,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:Ae.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){_e(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:Ae.ERROR,streamId:e,reason:Rn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(c,t.data,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,reason:Rn(p)})})},QS=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ae.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Rn(t.reason));break;case Ae.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Rn(t.reason));break;case Ae.PULL:if(!c){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||Hb).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,reason:Rn(p)})});break;case Ae.ENQUEUE:if(_e(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case Ae.CLOSE:if(_e(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),C(this,vi,jf).call(this,u,e);break;case Ae.ERROR:_e(u,"error should have stream controller"),u.controller.error(Rn(t.reason)),C(this,vi,jf).call(this,u,e);break;case Ae.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Rn(t.reason)),C(this,vi,jf).call(this,u,e);break;case Ae.CANCEL:if(!c)break;const f=Rn(t.reason);Promise.try(c.onCancel||Hb,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,reason:Rn(p)})}),c.sinkCapability.reject(f),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},jf=async function(t,e){var i,r,o;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var mh;class JS{constructor({enableHWA:t=!1}){E(this,mh,!1);A(this,mh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,mh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}mh=new WeakMap;class ek extends JS{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class ZS{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class t1 extends ZS{async _fetch(t){const e=await Hp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):zp(e)}}class e1{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,o){return"none"}destroy(t=!1){}}var Wo,$l,Fs,Os,rn,qo,Xo,rt,en,xc,hl,Uf,dl,n1,Vy,fl,kc,Tc,Gy,Pc;class nk extends e1{constructor({docId:e,ownerDocument:i=globalThis.document}){super();E(this,rt);E(this,Wo);E(this,$l);E(this,Fs);E(this,Os);E(this,rn);E(this,qo);E(this,Xo,0);A(this,Os,e),A(this,rn,i)}addFilter(e){if(!e)return"none";let i=a(this,rt,en).get(e);if(i)return i;const[r,o,u]=C(this,rt,Uf).call(this,e),c=e.length===1?r:`${r}${o}${u}`;if(i=a(this,rt,en).get(c),i)return a(this,rt,en).set(e,i),i;const f=`g_${a(this,Os)}_transfer_map_${fn(this,Xo)._++}`,p=C(this,rt,dl).call(this,f);a(this,rt,en).set(e,p),a(this,rt,en).set(c,p);const m=C(this,rt,fl).call(this,f);return C(this,rt,Tc).call(this,r,o,u,m),p}addHCMFilter(e,i){var _;const r=`${e}-${i}`,o="base";let u=a(this,rt,xc).get(o);if((u==null?void 0:u.key)===r||(u?((_=u.filter)==null||_.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},a(this,rt,xc).set(o,u)),!e||!i))return u.url;const c=C(this,rt,Pc).call(this,e);e=yt.makeHexColor(...c);const f=C(this,rt,Pc).call(this,i);if(i=yt.makeHexColor(...f),a(this,rt,hl).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return u.url;const p=new Array(256);for(let x=0;x<=255;x++){const k=x/255;p[x]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const m=p.join(","),v=`g_${a(this,Os)}_hcm_filter`,w=u.filter=C(this,rt,fl).call(this,v);C(this,rt,Tc).call(this,m,m,m,w),C(this,rt,Vy).call(this,w);const b=(x,k)=>{const T=c[x]/255,M=f[x]/255,F=new Array(k+1);for(let N=0;N<=k;N++)F[N]=T+N/k*(M-T);return F.join(",")};return C(this,rt,Tc).call(this,b(0,5),b(1,5),b(2,5),w),u.url=C(this,rt,dl).call(this,v),u.url}addAlphaFilter(e){let i=a(this,rt,en).get(e);if(i)return i;const[r]=C(this,rt,Uf).call(this,[e]),o=`alpha_${r}`;if(i=a(this,rt,en).get(o),i)return a(this,rt,en).set(e,i),i;const u=`g_${a(this,Os)}_alpha_map_${fn(this,Xo)._++}`,c=C(this,rt,dl).call(this,u);a(this,rt,en).set(e,c),a(this,rt,en).set(o,c);const f=C(this,rt,fl).call(this,u);return C(this,rt,Gy).call(this,r,f),c}addLuminosityFilter(e){let i=a(this,rt,en).get(e||"luminosity");if(i)return i;let r,o;if(e?([r]=C(this,rt,Uf).call(this,[e]),o=`luminosity_${r}`):o="luminosity",i=a(this,rt,en).get(o),i)return a(this,rt,en).set(e,i),i;const u=`g_${a(this,Os)}_luminosity_map_${fn(this,Xo)._++}`,c=C(this,rt,dl).call(this,u);a(this,rt,en).set(e,c),a(this,rt,en).set(o,c);const f=C(this,rt,fl).call(this,u);return C(this,rt,n1).call(this,f),e&&C(this,rt,Gy).call(this,r,f),c}addHighlightHCMFilter(e,i,r,o,u){var M;const c=`${i}-${r}-${o}-${u}`;let f=a(this,rt,xc).get(e);if((f==null?void 0:f.key)===c||(f?((M=f.filter)==null||M.remove(),f.key=c,f.url="none",f.filter=null):(f={key:c,url:"none",filter:null},a(this,rt,xc).set(e,f)),!i||!r))return f.url;const[p,m]=[i,r].map(C(this,rt,Pc).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[b,_]=[o,u].map(C(this,rt,Pc).bind(this));w<v&&([v,w,b,_]=[w,v,_,b]),a(this,rt,hl).style.color="";const x=(F,N,j)=>{const V=new Array(256),U=(w-v)/j,Q=F/255,nt=(N-F)/(255*j);let At=0;for(let ft=0;ft<=j;ft++){const Nt=Math.round(v+ft*U),Tt=Q+ft*nt;for(let vt=At;vt<=Nt;vt++)V[vt]=Tt;At=Nt+1}for(let ft=At;ft<256;ft++)V[ft]=V[At-1];return V.join(",")},k=`g_${a(this,Os)}_hcm_${e}_filter`,T=f.filter=C(this,rt,fl).call(this,k);return C(this,rt,Vy).call(this,T),C(this,rt,Tc).call(this,x(b[0],_[0],5),x(b[1],_[1],5),x(b[2],_[2],5),T),f.url=C(this,rt,dl).call(this,k),f.url}destroy(e=!1){var i,r,o,u;e&&((i=a(this,qo))!=null&&i.size)||((r=a(this,Fs))==null||r.parentNode.parentNode.remove(),A(this,Fs,null),(o=a(this,$l))==null||o.clear(),A(this,$l,null),(u=a(this,qo))==null||u.clear(),A(this,qo,null),A(this,Xo,0))}}Wo=new WeakMap,$l=new WeakMap,Fs=new WeakMap,Os=new WeakMap,rn=new WeakMap,qo=new WeakMap,Xo=new WeakMap,rt=new WeakSet,en=function(){return a(this,$l)||A(this,$l,new Map)},xc=function(){return a(this,qo)||A(this,qo,new Map)},hl=function(){if(!a(this,Fs)){const e=a(this,rn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=a(this,rn).createElementNS(Es,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Fs,a(this,rn).createElementNS(Es,"defs")),e.append(r),r.append(a(this,Fs)),a(this,rn).body.append(e)}return a(this,Fs)},Uf=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,o]=e,u=new Array(256),c=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,c[p]=r[p]/255,f[p]=o[p]/255;return[u.join(","),c.join(","),f.join(",")]},dl=function(e){if(a(this,Wo)===void 0){A(this,Wo,"");const i=a(this,rn).URL;i!==a(this,rn).baseURI&&(Bp(i)?Mt('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Wo,i.split("#",1)[0]))}return`url(${a(this,Wo)}#${e})`},n1=function(e){const i=a(this,rn).createElementNS(Es,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Vy=function(e){const i=a(this,rn).createElementNS(Es,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},fl=function(e){const i=a(this,rn).createElementNS(Es,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,rt,hl).append(i),i},kc=function(e,i,r){const o=a(this,rn).createElementNS(Es,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Tc=function(e,i,r,o){const u=a(this,rn).createElementNS(Es,"feComponentTransfer");o.append(u),C(this,rt,kc).call(this,u,"feFuncR",e),C(this,rt,kc).call(this,u,"feFuncG",i),C(this,rt,kc).call(this,u,"feFuncB",r)},Gy=function(e,i){const r=a(this,rn).createElementNS(Es,"feComponentTransfer");i.append(r),C(this,rt,kc).call(this,r,"feFuncA",e)},Pc=function(e){return a(this,rt,hl).style.color=e,Xv(getComputedStyle(a(this,rt,hl)).getPropertyValue("color"))};class i1{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class s1 extends i1{async _fetch(t){const e=await Hp(t,"arraybuffer");return new Uint8Array(e)}}un&&Mt("Please use the `legacy` build in Node.js environments.");async function r1(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class ik extends e1{}class sk extends JS{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class rk extends ZS{async _fetch(t){return r1(t)}}class ok extends i1{async _fetch(t){return r1(t)}}const ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Wy(d,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),d.clip(r)}class Kv{getPattern(){Qt("Abstract method `getPattern` called.")}}class ak extends Kv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let o;if(r===ln.STROKE||r===ln.FILL){const u=e.current.getClippedPathBoundingBox(r,re(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),i=yt.transform(i,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),Wy(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);o.setTransform(v)}else Wy(t,this._bbox),o=this._createGradient(t);return o}}function vy(d,t,e,i,r,o,u,c){const f=t.coords,p=t.colors,m=d.data,v=d.width*4;let w;f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w),f[i+1]>f[r+1]&&(w=i,i=r,r=w,w=u,u=c,c=w),f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w);const b=(f[e]+t.offsetX)*t.scaleX,_=(f[e+1]+t.offsetY)*t.scaleY,x=(f[i]+t.offsetX)*t.scaleX,k=(f[i+1]+t.offsetY)*t.scaleY,T=(f[r]+t.offsetX)*t.scaleX,M=(f[r+1]+t.offsetY)*t.scaleY;if(_>=M)return;const F=p[o],N=p[o+1],j=p[o+2],V=p[u],U=p[u+1],Q=p[u+2],nt=p[c],At=p[c+1],ft=p[c+2],Nt=Math.round(_),Tt=Math.round(M);let vt,Bt,J,Z,Y,H,D,P;for(let $=Nt;$<=Tt;$++){if($<k){const at=$<_?0:(_-$)/(_-k);vt=b-(b-x)*at,Bt=F-(F-V)*at,J=N-(N-U)*at,Z=j-(j-Q)*at}else{let at;$>M?at=1:k===M?at=0:at=(k-$)/(k-M),vt=x-(x-T)*at,Bt=V-(V-nt)*at,J=U-(U-At)*at,Z=Q-(Q-ft)*at}let G;$<_?G=0:$>M?G=1:G=(_-$)/(_-M),Y=b-(b-T)*G,H=F-(F-nt)*G,D=N-(N-At)*G,P=j-(j-ft)*G;const it=Math.round(Math.min(vt,Y)),wt=Math.round(Math.max(vt,Y));let ht=v*$+it*4;for(let at=it;at<=wt;at++)G=(vt-at)/(vt-Y),G<0?G=0:G>1&&(G=1),m[ht++]=Bt-(Bt-H)*G|0,m[ht++]=J-(J-D)*G|0,m[ht++]=Z-(Z-P)*G|0,m[ht++]=255}}function lk(d,t,e){const i=t.coords,r=t.colors;let o,u;switch(t.type){case"lattice":const c=t.verticesPerRow,f=Math.floor(i.length/c)-1,p=c-1;for(o=0;o<f;o++){let m=o*c;for(let v=0;v<p;v++,m++)vy(d,e,i[m],i[m+1],i[m+c],r[m],r[m+1],r[m+c]),vy(d,e,i[m+c+1],i[m+1],i[m+c],r[m+c+1],r[m+1],r[m+c])}break;case"triangles":for(o=0,u=i.length;o<u;o+=3)vy(d,e,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class uk extends Kv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const c=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),b=p/v,_=m/w,x={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-f,scaleX:1/b,scaleY:1/_},k=v+2*2,T=w+2*2,M=i.getCanvas("mesh",k,T),F=M.context,N=F.createImageData(v,w);if(e){const V=N.data;for(let U=0,Q=V.length;U<Q;U+=4)V[U]=e[0],V[U+1]=e[1],V[U+2]=e[2],V[U+3]=255}for(const V of this._figures)lk(N,V,x);return F.putImageData(N,2,2),{canvas:M.canvas,offsetX:c-2*b,offsetY:f-2*_,scaleX:b,scaleY:_}}getPattern(t,e,i,r){Wy(t,this._bbox);let o;if(r===ln.SHADING)o=yt.singularValueDecompose2dScale(re(t));else if(o=yt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=yt.singularValueDecompose2dScale(this.matrix);o=[o[0]*c[0],o[1]*c[1]]}const u=this._createMeshCanvas(o,r===ln.SHADING?null:this._background,e.cachedCanvases);return r!==ln.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class ck extends Kv{getPattern(){return"hotpink"}}function hk(d){switch(d[0]){case"RadialAxial":return new ak(d);case"Mesh":return new uk(d);case"Dummy":return new ck}throw new Error(`Unknown IR type: ${d[0]}`)}const Bb={COLORED:1,UNCOLORED:2},Ep=class Ep{constructor(t,e,i,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:o,color:u,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),$p("TilingType: "+o);const m=e[0],v=e[1],w=e[2],b=e[3],_=w-m,x=b-v,k=yt.singularValueDecompose2dScale(this.matrix),T=yt.singularValueDecompose2dScale(this.baseTransform),M=k[0]*T[0],F=k[1]*T[1];let N=_,j=x,V=!1,U=!1;const Q=Math.ceil(f*M),nt=Math.ceil(p*F),At=Math.ceil(_*M),ft=Math.ceil(x*F);Q>=At?N=f:V=!0,nt>=ft?j=p:U=!0;const Nt=this.getSizeAndScale(N,this.ctx.canvas.width,M),Tt=this.getSizeAndScale(j,this.ctx.canvas.height,F),vt=t.cachedCanvases.getCanvas("pattern",Nt.size,Tt.size),Bt=vt.context,J=c.createCanvasGraphics(Bt);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,r,u),Bt.translate(-Nt.scale*m,-Tt.scale*v),J.transform(Nt.scale,0,0,Tt.scale,0,0),Bt.save(),this.clipBbox(J,m,v,w,b),J.baseTransform=re(J.ctx),J.executeOperatorList(i),J.endDrawing(),Bt.restore(),V||U){const Z=vt.canvas;V&&(N=f),U&&(j=p);const Y=this.getSizeAndScale(N,this.ctx.canvas.width,M),H=this.getSizeAndScale(j,this.ctx.canvas.height,F),D=Y.size,P=H.size,$=t.cachedCanvases.getCanvas("pattern-workaround",D,P),G=$.context,it=V?Math.floor(_/f):0,wt=U?Math.floor(x/p):0;for(let ht=0;ht<=it;ht++)for(let at=0;at<=wt;at++)G.drawImage(Z,D*ht,P*at,D,P,0,0,D,P);return{canvas:$.canvas,scaleX:Y.scale,scaleY:H.scale,offsetX:m,offsetY:v}}return{canvas:vt.canvas,scaleX:Nt.scale,scaleY:Tt.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,i){const r=Math.max(Ep.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=r?o=r:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,r,o){const u=r-e,c=o-i;t.ctx.rect(e,i,u,c),t.current.updateRectMinMax(re(t.ctx),[e,i,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,o=t.current;switch(e){case Bb.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,o.fillColor=u.fillStyle,o.strokeColor=u.strokeStyle;break;case Bb.UNCOLORED:const c=yt.makeHexColor(i[0],i[1],i[2]);r.fillStyle=c,r.strokeStyle=c,o.fillColor=c,o.strokeColor=c;break;default:throw new Ox(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let o=i;r!==ln.SHADING&&(o=yt.transform(o,e.baseTransform),this.matrix&&(o=yt.transform(o,this.matrix)));const u=this.createPatternCanvas(e);let c=new DOMMatrix(o);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(c),f}};Ct(Ep,"MAX_PATTERN_SIZE",3e3);let qy=Ep;function dk({src:d,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const c=wn.isLittleEndian?4278190080:255,[f,p]=u?[o,c]:[c,o],m=i>>3,v=i&7,w=d.length;e=new Uint32Array(e.buffer);let b=0;for(let _=0;_<r;_++){for(const k=t+m;t<k;t++){const T=t<w?d[t]:255;e[b++]=T&128?p:f,e[b++]=T&64?p:f,e[b++]=T&32?p:f,e[b++]=T&16?p:f,e[b++]=T&8?p:f,e[b++]=T&4?p:f,e[b++]=T&2?p:f,e[b++]=T&1?p:f}if(v===0)continue;const x=t<w?d[t++]:255;for(let k=0;k<v;k++)e[b++]=x&1<<7-k?p:f}return{srcPos:t,destPos:b}}const jb=16,Ub=100,fk=15,Vb=10,Gb=1e3,Dn=16;function pk(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},d.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},d.transform=function(i,r,o,u,c,f){t.transform(i,r,o,u,c,f),this.__originalTransform(i,r,o,u,c,f)},d.setTransform=function(i,r,o,u,c,f){t.setTransform(i,r,o,u,c,f),this.__originalSetTransform(i,r,o,u,c,f)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},d.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},d.bezierCurveTo=function(e,i,r,o,u,c){t.bezierCurveTo(e,i,r,o,u,c),this.__originalBezierCurveTo(e,i,r,o,u,c)},d.rect=function(e,i,r,o){t.rect(e,i,r,o),this.__originalRect(e,i,r,o)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class gk{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Rf(d,t,e,i,r,o,u,c,f,p){const[m,v,w,b,_,x]=re(d);if(v===0&&w===0){const M=u*m+_,F=Math.round(M),N=c*b+x,j=Math.round(N),V=(u+f)*m+_,U=Math.abs(Math.round(V)-F)||1,Q=(c+p)*b+x,nt=Math.abs(Math.round(Q)-j)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(b),F,j),d.drawImage(t,e,i,r,o,0,0,U,nt),d.setTransform(m,v,w,b,_,x),[U,nt]}if(m===0&&b===0){const M=c*w+_,F=Math.round(M),N=u*v+x,j=Math.round(N),V=(c+p)*w+_,U=Math.abs(Math.round(V)-F)||1,Q=(u+f)*v+x,nt=Math.abs(Math.round(Q)-j)||1;return d.setTransform(0,Math.sign(v),Math.sign(w),0,F,j),d.drawImage(t,e,i,r,o,0,0,nt,U),d.setTransform(m,v,w,b,_,x),[nt,U]}d.drawImage(t,e,i,r,o,u,c,f,p);const k=Math.hypot(m,v),T=Math.hypot(w,b);return[k*f,T*p]}function mk(d){const{width:t,height:e}=d;if(t>Gb||e>Gb)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let u=new Uint8Array(o*(e+1)),c,f,p;const m=t+7&-8;let v=new Uint8Array(m*e),w=0;for(const T of d.data){let M=128;for(;M>0;)v[w++]=T&M?0:255,M>>=1}let b=0;for(w=0,v[w]!==0&&(u[0]=1,++b),f=1;f<t;f++)v[w]!==v[w+1]&&(u[f]=v[w]?2:1,++b),w++;for(v[w]!==0&&(u[f]=2,++b),c=1;c<e;c++){w=c*m,p=c*o,v[w-m]!==v[w]&&(u[p]=v[w]?1:8,++b);let T=(v[w]?4:0)+(v[w-m]?8:0);for(f=1;f<t;f++)T=(T>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[T]&&(u[p+f]=r[T],++b),w++;if(v[w-m]!==v[w]&&(u[p+f]=v[w]?2:4,++b),b>i)return null}for(w=m*(e-1),p=c*o,v[w]!==0&&(u[p]=8,++b),f=1;f<t;f++)v[w]!==v[w+1]&&(u[p+f]=v[w]?4:8,++b),w++;if(v[w]!==0&&(u[p+f]=4,++b),b>i)return null;const _=new Int32Array([0,o,-1,0,-o,0,0,0,1]),x=new Path2D;for(c=0;b&&c<=e;c++){let T=c*o;const M=T+t;for(;T<M&&!u[T];)T++;if(T===M)continue;x.moveTo(T%o,c);const F=T;let N=u[T];do{const j=_[N];do T+=j;while(!u[T]);const V=u[T];V!==5&&V!==10?(N=V,u[T]=0):(N=V&51*N>>4,u[T]&=N>>2|N<<2),x.lineTo(T%o,T/o|0),u[T]||--b}while(F!==T);--c}return v=null,u=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(x),T.beginPath(),T.restore()}}class Wb{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gS,this.textMatrixScale=1,this.fontMatrix=by,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=tn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=yt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=yt.applyTransform(e,t),r=yt.applyTransform(e.slice(2),t),o=yt.applyTransform([e[0],e[3]],t),u=yt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],o[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],u[1])}updateScalingPathMinMax(t,e){yt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,o,u,c,f,p,m){const v=yt.bezierBoundingBox(e,i,r,o,u,c,f,p,m);m||this.updateRectMinMax(t,v)}getPathBoundingBox(t=ln.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===ln.STROKE){e||Qt("Stroke bounding box must include transform.");const r=yt.singularValueDecompose2dScale(e),o=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=u,i[2]+=o,i[3]+=u}return i}updateClipFromPath(){const t=yt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=ln.FILL,e=null){return yt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function qb(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%Dn,o=(e-r)/Dn,u=r===0?o:o+1,c=d.createImageData(i,Dn);let f=0,p;const m=t.data,v=c.data;let w,b,_,x;if(t.kind===If.GRAYSCALE_1BPP){const k=m.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),M=T.length,F=i+7>>3,N=4294967295,j=wn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(_=w<o?Dn:r,p=0,b=0;b<_;b++){const V=k-f;let U=0;const Q=V>F?i:V*8-7,nt=Q&-8;let At=0,ft=0;for(;U<nt;U+=8)ft=m[f++],T[p++]=ft&128?N:j,T[p++]=ft&64?N:j,T[p++]=ft&32?N:j,T[p++]=ft&16?N:j,T[p++]=ft&8?N:j,T[p++]=ft&4?N:j,T[p++]=ft&2?N:j,T[p++]=ft&1?N:j;for(;U<Q;U++)At===0&&(ft=m[f++],At=128),T[p++]=ft&At?N:j,At>>=1}for(;p<M;)T[p++]=0;d.putImageData(c,0,w*Dn)}}else if(t.kind===If.RGBA_32BPP){for(b=0,x=i*Dn*4,w=0;w<o;w++)v.set(m.subarray(f,f+x)),f+=x,d.putImageData(c,0,b),b+=Dn;w<u&&(x=i*r*4,v.set(m.subarray(f,f+x)),d.putImageData(c,0,b))}else if(t.kind===If.RGB_24BPP)for(_=Dn,x=i*_,w=0;w<u;w++){for(w>=o&&(_=r,x=i*_),p=0,b=x;b--;)v[p++]=m[f++],v[p++]=m[f++],v[p++]=m[f++],v[p++]=255;d.putImageData(c,0,w*Dn)}else throw new Error(`bad image kind: ${t.kind}`)}function Xb(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%Dn,o=(e-r)/Dn,u=r===0?o:o+1,c=d.createImageData(i,Dn);let f=0;const p=t.data,m=c.data;for(let v=0;v<u;v++){const w=v<o?Dn:r;({srcPos:f}=dk({src:p,srcPos:f,dest:m,width:i,height:w,nonBlackColor:0})),d.putImageData(c,0,v*Dn)}}function vc(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)d[i]!==void 0&&(t[i]=d[i]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function Lf(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!un){const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}}function Yb(d,t){if(t)return!0;const e=yt.singularValueDecompose2dScale(d);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*so.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const yk=["butt","round","square"],vk=["miter","round","bevel"],wk={},Kb={};var ji,Xy,Yy,Ky;const e0=class e0{constructor(t,e,i,r,o,{optionalContentConfig:u,markedContentStack:c=null},f,p){E(this,ji);this.ctx=t,this.current=new Wb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new gk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=c,i){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...re(this.compositeCtx))}this.ctx.save(),Lf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=re(this.ctx)}executeOperatorList(t,e,i,r){const o=t.argsArray,u=t.fnArray;let c=e||0;const f=o.length;if(f===c)return c;const p=f-c>Vb&&typeof i=="function",m=p?Date.now()+fk:0;let v=0;const w=this.commonObjs,b=this.objs;let _;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(_=u[c],_!==ki.dependency)this[_].apply(this,o[c]);else for(const x of o[c]){const k=x.startsWith("g_")?w:b;if(!k.has(x))return k.get(x,i),c}if(c++,c===f)return c;if(p&&++v>Vb){if(Date.now()>m)return i(),c;v=0}}}endDrawing(){C(this,ji,Xy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,ji,Yy).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=i,f=r,p="prescale1",m,v;for(;o>2&&c>1||u>2&&f>1;){let w=c,b=f;o>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/w),u>2&&f>1&&(b=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/b),m=this.cachedCanvases.getCanvas(p,w,b),v=m.context,v.clearRect(0,0,w,b),v.drawImage(t,0,0,c,f,0,0,w,b),t=m.canvas,c=w,f=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,u=this.current.patternFill,c=re(e);let f,p,m,v;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),o]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const nt=f.get(p);if(nt&&!u){const At=Math.round(Math.min(c[0],c[2])+c[4]),ft=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:nt,offsetX:At,offsetY:ft}}m=nt}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),Xb(v.context,t));let w=yt.transform(c,[1/i,0,0,-1/r,0,0]);w=yt.transform(w,[1,0,0,1,0,-r]);const[b,_,x,k]=yt.getAxialAlignedBoundingBox([0,0,i,r],w),T=Math.round(x-b)||1,M=Math.round(k-_)||1,F=this.cachedCanvases.getCanvas("fillCanvas",T,M),N=F.context,j=b,V=_;N.translate(-j,-V),N.transform(...w),m||(m=this._scaleImage(v.canvas,Xi(N)),m=m.img,f&&u&&f.set(p,m)),N.imageSmoothingEnabled=Yb(re(N),t.interpolate),Rf(N,m,0,0,m.width,m.height,0,0,i,r),N.globalCompositeOperation="source-in";const U=yt.transform(Xi(N),[1,0,0,1,-j,-V]);return N.fillStyle=u?o.getPattern(e,this,U,ln.FILL):o,N.fillRect(0,0,i,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,F.canvas)),{canvas:F.canvas,offsetX:Math.round(j),offsetY:Math.round(V)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=yk[t]}setLineJoin(t){this.ctx.lineJoin=vk[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...re(this.suspendedCtx)),vc(this.suspendedCtx,o),pk(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const o=r[0],u=r[1],c=r[2]-o,f=r[3]-u;c===0||f===0||(this.genericComposeSMask(e.context,i,c,f,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,o,u,c,f,p,m,v){let w=t.canvas,b=f-m,_=p-v;if(u){const k=yt.makeHexColor(...u);if(b<0||_<0||b+i>w.width||_+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),M=T.context;M.drawImage(w,-b,-_),M.globalCompositeOperation="destination-atop",M.fillStyle=k,M.fillRect(0,0,i,r),M.globalCompositeOperation="source-over",w=T.canvas,b=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(b,_,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(b,_,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const x=new Path2D;x.rect(f,p,i,r),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(w,b,_,i,r,f,p,i,r),e.restore()}save(){this.inSMaskMode?(vc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),vc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,o,u){this.ctx.transform(t,e,i,r,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,o=this.current;let u=o.x,c=o.y,f,p;const m=re(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let b=0,_=0,x=t.length;b<x;b++)switch(t[b]|0){case ki.rectangle:u=e[_++],c=e[_++];const k=e[_++],T=e[_++],M=u+k,F=c+T;r.moveTo(u,c),k===0||T===0?r.lineTo(M,F):(r.lineTo(M,c),r.lineTo(M,F),r.lineTo(u,F)),v||o.updateRectMinMax(m,[u,c,M,F]),r.closePath();break;case ki.moveTo:u=e[_++],c=e[_++],r.moveTo(u,c),v||o.updatePathMinMax(m,u,c);break;case ki.lineTo:u=e[_++],c=e[_++],r.lineTo(u,c),v||o.updatePathMinMax(m,u,c);break;case ki.curveTo:f=u,p=c,u=e[_+4],c=e[_+5],r.bezierCurveTo(e[_],e[_+1],e[_+2],e[_+3],u,c),o.updateCurvePathMinMax(m,f,p,e[_],e[_+1],e[_+2],e[_+3],u,c,w),_+=6;break;case ki.curveTo2:f=u,p=c,r.bezierCurveTo(u,c,e[_],e[_+1],e[_+2],e[_+3]),o.updateCurvePathMinMax(m,f,p,u,c,e[_],e[_+1],e[_+2],e[_+3],w),u=e[_+2],c=e[_+3],_+=4;break;case ki.curveTo3:f=u,p=c,u=e[_+2],c=e[_+3],r.bezierCurveTo(e[_],e[_+1],u,c,u,c),o.updateCurvePathMinMax(m,f,p,e[_],e[_+1],u,c,u,c,w),_+=4;break;case ki.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(m,w),o.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Xi(e),ln.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,Xi(e),ln.FILL),o=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wk}eoClip(){this.pendingClip=Kb}beginText(){this.current.textMatrix=gS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,r=e.getTransform().invertSelf();for(const{transform:o,x:u,y:c,fontSize:f,path:p}of t)i.addPath(p,new DOMMatrix(o).preMultiplySelf(r).translate(u,c).scale(f,-f));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||by,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Mt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif",u=((m=i.systemFontInfo)==null?void 0:m.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const f=i.italic?"italic":"normal";let p=e;e<jb?p=jb:e>Ub&&(p=Ub),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,o,u){this.current.textMatrix=[t,e,i,r,o,u],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,o){const u=this.ctx,c=this.current,f=c.font,p=c.textRenderingMode,m=c.fontSize/c.fontSizeScale,v=p&tn.FILL_STROKE_MASK,w=!!(p&tn.ADD_TO_PATH_FLAG),b=c.patternFill&&!f.missingFile,_=c.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||w||b||_)&&(x=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||b||_){if(u.save(),u.translate(e,i),u.scale(m,-m),v===tn.FILL||v===tn.FILL_STROKE)if(r){const k=u.getTransform();u.setTransform(...r),u.fill(C(this,ji,Ky).call(this,x,k,r))}else u.fill(x);if(v===tn.STROKE||v===tn.FILL_STROKE)if(o){const k=u.getTransform();u.setTransform(...o),u.stroke(C(this,ji,Ky).call(this,x,k,o))}else u.lineWidth/=m,u.stroke(x);u.restore()}else(v===tn.FILL||v===tn.FILL_STROKE)&&u.fillText(t,e,i),(v===tn.STROKE||v===tn.FILL_STROKE)&&u.strokeText(t,e,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:re(u),x:e,y:i,fontSize:m,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return Ot(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const o=this.ctx,u=e.fontSizeScale,c=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,v=t.length,w=i.vertical,b=w?1:-1,_=i.defaultVMetrics,x=r*e.fontMatrix[0],k=e.textRenderingMode===tn.FILL&&!i.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(m,-1):o.scale(m,1);let T,M;if(e.patternFill){o.save();const U=e.fillColor.getPattern(o,this,Xi(o),ln.FILL);T=re(o),o.restore(),o.fillStyle=U}if(e.patternStroke){o.save();const U=e.strokeColor.getPattern(o,this,Xi(o),ln.STROKE);M=re(o),o.restore(),o.strokeStyle=U}let F=e.lineWidth;const N=e.textMatrixScale;if(N===0||F===0){const U=e.textRenderingMode&tn.FILL_STROKE_MASK;(U===tn.STROKE||U===tn.FILL_STROKE)&&(F=this.getSinglePixelWidth())}else F/=N;if(u!==1&&(o.scale(u,u),F/=u),o.lineWidth=F,i.isInvalidPDFjsFont){const U=[];let Q=0;for(const nt of t)U.push(nt.unicode),Q+=nt.width;o.fillText(U.join(""),0,0),e.x+=Q*x*m,o.restore(),this.compose();return}let j=0,V;for(V=0;V<v;++V){const U=t[V];if(typeof U=="number"){j+=b*U*r/1e3;continue}let Q=!1;const nt=(U.isSpace?f:0)+c,At=U.fontChar,ft=U.accent;let Nt,Tt,vt=U.width;if(w){const J=U.vmetric||_,Z=-(U.vmetric?J[1]:vt*.5)*x,Y=J[2]*x;vt=J?-J[0]:vt,Nt=Z/u,Tt=(j+Y)/u}else Nt=j/u,Tt=0;if(i.remeasure&&vt>0){const J=o.measureText(At).width*1e3/r*u;if(vt<J&&this.isFontSubpixelAAEnabled){const Z=vt/J;Q=!0,o.save(),o.scale(Z,1),Nt/=Z}else vt!==J&&(Nt+=(vt-J)/2e3*r/u)}if(this.contentVisible&&(U.isInFont||i.missingFile)){if(k&&!ft)o.fillText(At,Nt,Tt);else if(this.paintChar(At,Nt,Tt,T,M),ft){const J=Nt+r*ft.offset.x/u,Z=Tt-r*ft.offset.y/u;this.paintChar(ft.fontChar,J,Z,T,M)}}const Bt=w?vt*x-nt*p:vt*x+nt*p;j+=Bt,Q&&o.restore()}w?e.y-=j:e.x+=j*m,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,o=i.fontSize,u=i.fontDirection,c=r.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||by,w=t.length,b=i.textRenderingMode===tn.INVISIBLE;let _,x,k,T;if(!(b||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(m,u),_=0;_<w;++_){if(x=t[_],typeof x=="number"){T=c*x*o/1e3,this.ctx.translate(T,0),i.x+=T*m;continue}const M=(x.isSpace?p:0)+f,F=r.charProcOperatorList[x.operatorListId];if(!F){Mt(`Type3 character "${x.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=x,this.save(),e.scale(o,o),e.transform(...v),this.executeOperatorList(F),this.restore()),k=yt.applyTransform([x.width,0],v)[0]*o+M,e.translate(k,0),i.x+=k*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,o,u){this.ctx.rect(i,r,o-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||re(this.ctx),o={createCanvasGraphics:u=>new e0(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new qy(t,i,this.ctx,o,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=yt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=yt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=hk(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Xi(e),ln.SHADING);const r=Xi(e);{const{width:o,height:u}=e.canvas,[c,f,p,m]=yt.getAxialAlignedBoundingBox([0,0,o,u],r);this.ctx.fillRect(c,f,p-c,m-f)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=re(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(re(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||$p("TODO: Support non-isolated groups."),t.knockout&&Mt("Knockout groups not supported.");const i=re(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=yt.getAxialAlignedBoundingBox(t.bbox,re(e));const o=[0,0,e.canvas.width,e.canvas.height];r=yt.intersect(r,o)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),w=v.context;w.translate(-u,-c),w.transform(...i),t.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.save()),vc(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=yt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,o){if(C(this,ji,Xy).call(this),Lf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],c=e[3]-e[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=c;const[f,p]=yt.singularValueDecompose2dScale(re(this.ctx)),{viewportScale:m}=this,v=Math.ceil(u*this.outputScaleX*m),w=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:b,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(t,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,c*p),Lf(this.ctx)}else Lf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],u,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new Wb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),C(this,ji,Yy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=mk(t)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(t),u=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,o,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const f=re(c);c.transform(e,i,r,o,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,v=u.length;m<v;m+=2){const w=yt.transform(f,[e,i,r,o,u[m],u[m+1]]),[b,_]=yt.applyTransform([0,0],w);c.drawImage(p.canvas,b,_)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:u,width:c,height:f,transform:p}=o,m=this.cachedCanvases.getCanvas("maskCanvas",c,f),v=m.context;v.save();const w=this.getObject(u,o);Xb(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,Xi(e),ln.FILL):i,v.fillRect(0,0,c,f),v.restore(),e.save(),e.transform(...p),e.scale(1,-1),Rf(e,m.canvas,0,0,c,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Mt("Dependent image isn't ready yet");return}const u=o.width,c=o.height,f=[];for(let p=0,m=r.length;p<m;p+=2)f.push({transform:[e,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,r),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!un){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,i).context;qb(f,t),o=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(o,Xi(r));r.imageSmoothingEnabled=Yb(re(r),t.interpolate),Rf(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;qb(f,t),r=this.applyTransferMapsToCanvas(f)}for(const o of e)i.save(),i.transform(...o.transform),i.scale(1,-1),Rf(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===Kb?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=re(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:o}=this.ctx.getTransform();let u,c;if(i===0&&r===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)u=c=1/f;else{const m=f*t;u=c=m<1?1/m:1}else if(t===0)u=1/f,c=1/p;else{const m=f*t,v=p*t;u=m<1?1/m:1,c=v<1?1/v:1}}else{const f=Math.abs(e*o-i*r),p=Math.hypot(e,i),m=Math.hypot(r,o);if(t===0)u=m/f,c=p/f;else{const v=t*f;u=m>v?m/v:1,c=p>v?p/v:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&o===1){e.stroke();return}const u=e.getLineDash();if(t&&e.save(),e.scale(r,o),u.length>0){const c=Math.max(r,o);e.setLineDash(u.map(f=>f/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ji=new WeakSet,Xy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Yy=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Ky=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let Al=e0;for(const d in ki)Al.prototype[d]!==void 0&&(Al.prototype[ki[d]]=Al.prototype[d]);var yh,vh;class tr{static get workerPort(){return a(this,yh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,yh,t)}static get workerSrc(){return a(this,vh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,vh,t)}}yh=new WeakMap,vh=new WeakMap,E(tr,yh,null),E(tr,vh,"");var Yo,wh;class Ak{constructor({parsedData:t,rawData:e}){E(this,Yo);E(this,wh);A(this,Yo,t),A(this,wh,e)}getRaw(){return a(this,wh)}get(t){return a(this,Yo).get(t)??null}getAll(){return Uv(a(this,Yo))}has(t){return a(this,Yo).has(t)}}Yo=new WeakMap,wh=new WeakMap;const pl=Symbol("INTERNAL");var Ah,bh,Sh,zl;class bk{constructor(t,{name:e,intent:i,usage:r,rbGroups:o}){E(this,Ah,!1);E(this,bh,!1);E(this,Sh,!1);E(this,zl,!0);A(this,Ah,!!(t&Jn.DISPLAY)),A(this,bh,!!(t&Jn.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=o}get visible(){if(a(this,Sh))return a(this,zl);if(!a(this,zl))return!1;const{print:t,view:e}=this.usage;return a(this,Ah)?(e==null?void 0:e.viewState)!=="OFF":a(this,bh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==pl&&Qt("Internal method `_setVisible` called."),A(this,Sh,i),A(this,zl,e)}}Ah=new WeakMap,bh=new WeakMap,Sh=new WeakMap,zl=new WeakMap;var $r,qt,Hl,Bl,_h,Qy;class Sk{constructor(t,e=Jn.DISPLAY){E(this,_h);E(this,$r,null);E(this,qt,new Map);E(this,Hl,null);E(this,Bl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Bl,t.order);for(const i of t.groups)a(this,qt).set(i.id,new bk(e,i));if(t.baseState==="OFF")for(const i of a(this,qt).values())i._setVisible(pl,!1);for(const i of t.on)a(this,qt).get(i)._setVisible(pl,!0);for(const i of t.off)a(this,qt).get(i)._setVisible(pl,!1);A(this,Hl,this.getHash())}}isVisible(t){if(a(this,qt).size===0)return!0;if(!t)return $p("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,qt).has(t.id)?a(this,qt).get(t.id).visible:(Mt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,_h,Qy).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,qt).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(a(this,qt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,qt).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!a(this,qt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,qt).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!a(this,qt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,qt).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(a(this,qt).get(e).visible)return!1}return!0}return Mt(`Unknown optional content policy ${t.policy}.`),!0}return Mt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var o;const r=a(this,qt).get(t);if(!r){Mt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==t&&((o=a(this,qt).get(c))==null||o._setVisible(pl,!1,!0));r._setVisible(pl,!!e,!0),A(this,$r,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=a(this,qt).get(r);if(o)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}A(this,$r,null)}get hasInitialVisibility(){return a(this,Hl)===null||this.getHash()===a(this,Hl)}getOrder(){return a(this,qt).size?a(this,Bl)?a(this,Bl).slice():[...a(this,qt).keys()]:null}getGroups(){return a(this,qt).size>0?Uv(a(this,qt)):null}getGroup(t){return a(this,qt).get(t)||null}getHash(){if(a(this,$r)!==null)return a(this,$r);const t=new WS;for(const[e,i]of a(this,qt))t.update(`${e}:${i.visible}`);return A(this,$r,t.hexdigest())}}$r=new WeakMap,qt=new WeakMap,Hl=new WeakMap,Bl=new WeakMap,_h=new WeakSet,Qy=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const o=t[r];let u;if(Array.isArray(o))u=C(this,_h,Qy).call(this,o);else if(a(this,qt).has(o))u=a(this,qt).get(o).visible;else return Mt(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class _k{constructor(t,{disableRange:e=!1,disableStream:i=!1}){_e(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});_e(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,o;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){_e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ek(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Ck(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Ek{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Wv(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ck{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xk(d){let t=!0,e=i("filename\\*","i").exec(d);if(e){e=e[1];let m=c(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=u(d),e){const m=p(e);return o(m)}if(e=i("filename","i").exec(d),e){e=e[1];let m=c(e);return m=p(m),o(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),b=zp(v);v=w.decode(b),t=!1}catch{}}return v}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const v=[];let w;const b=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=b.exec(m))!==null;){let[,x,k,T]=w;if(x=parseInt(x,10),x in v){if(x===0)break;continue}v[x]=[k,T]}const _=[];for(let x=0;x<v.length&&x in v;++x){let[k,T]=v[x];T=c(T),k&&(T=unescape(T),x===0&&(T=f(T))),_.push(T)}return _.join("")}function c(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const b=v[w].indexOf('"');b!==-1&&(v[w]=v[w].slice(0,b),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function f(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),_=m.slice(v+1).replace(/^[^']*'/,"");return r(w,_)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,b,_){if(b==="q"||b==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,k){return String.fromCharCode(parseInt(k,16))}),r(w,_);try{_=atob(_)}catch{}return r(w,_)})}return""}function o1(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function jp(d){try{return new URL(d).origin}catch{}return null}function a1({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||i||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function l1(d){const t=d.get("Content-Disposition");if(t){let e=xk(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Wv(e))return e}return null}function Up(d,t){return d===404||d===0&&t.startsWith("file:")?new Hc('Missing PDF "'+t+'".'):new up(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d)}function u1(d){return d===200||d===206}function c1(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function h1(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(Mt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class Qb{constructor(t){Ct(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=o1(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new kk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Tk(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class kk{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,c1(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=jp(o.url),!u1(o.status))throw Up(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:c,suggestedLength:f}=a1({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=f||this._contentLength,this._filename=l1(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new io("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h1(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Tk{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const u=r.url;fetch(u,c1(o,this._withCredentials,this._abortController)).then(c=>{const f=jp(c.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!u1(c.status))throw Up(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:h1(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const wy=200,Ay=206;function Pk(d){const t=d.response;return typeof t!="string"?t:zp(t).buffer}class Rk{constructor({url:t,httpHeaders:e,withCredentials:i}){Ct(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=o1(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,u]of this.headers)e.setRequestHeader(o,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Ay):r.expectedStatus=wy,e.responseType="arraybuffer",_e(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const o=r.status||wy;if(!(o===wy&&i.expectedStatus===Ay)&&o!==i.expectedStatus){i.onError(r.status);return}const c=Pk(r);if(o===Ay){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?i.onDone({begin:parseInt(p[1],10),chunk:c}):(Mt('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone({begin:0,chunk:c}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Lk{constructor(t){this._source=t,this._manager=new Rk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return _e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Mk(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Ik(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Mk{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=jp(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[f,...p]=c.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:u}=a1({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=l1(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Up(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ik{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=jp((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Up(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Nk=/^[a-z][a-z0-9\-+.]+:/i;function Dk(d){if(Nk.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class Fk{constructor(t){this.source=t,this.url=Dk(t.url),_e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return _e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Ok(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new $k(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Ok{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Hc(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new io("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class $k{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const zk=1e5,Pn=30,Hk=.8;var eS,zr,In,Eh,Ch,Ko,$s,xh,kh,Qo,jl,Ul,Hr,Vl,Th,Gl,Jo,Ph,Rh,Zo,ta,Lh,Br,Wl,sr,d1,f1,Jy,ei,Vf,Zy,p1,g1;const Te=class Te{constructor({textContentSource:t,container:e,viewport:i}){E(this,sr);E(this,zr,Promise.withResolvers());E(this,In,null);E(this,Eh,!1);E(this,Ch,!!((eS=globalThis.FontInspector)!=null&&eS.enabled));E(this,Ko,null);E(this,$s,null);E(this,xh,0);E(this,kh,0);E(this,Qo,null);E(this,jl,null);E(this,Ul,0);E(this,Hr,0);E(this,Vl,Object.create(null));E(this,Th,[]);E(this,Gl,null);E(this,Jo,[]);E(this,Ph,new WeakMap);E(this,Rh,null);var f;if(t instanceof ReadableStream)A(this,Gl,t);else if(typeof t=="object")A(this,Gl,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,In,A(this,jl,e)),A(this,Hr,i.scale*(globalThis.devicePixelRatio||1)),A(this,Ul,i.rotation),A(this,$s,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:u,pageY:c}=i.rawDims;A(this,Rh,[1,0,0,-1,-u,c+o]),A(this,kh,r),A(this,xh,o),C(f=Te,ei,p1).call(f),La(e,i),a(this,zr).promise.finally(()=>{a(Te,Wl).delete(this),A(this,$s,null),A(this,Vl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=wn.platform;return Ot(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Qo).read().then(({value:e,done:i})=>{if(i){a(this,zr).resolve();return}a(this,Ko)??A(this,Ko,e.lang),Object.assign(a(this,Vl),e.styles),C(this,sr,d1).call(this,e.items),t()},a(this,zr).reject)};return A(this,Qo,a(this,Gl).getReader()),a(Te,Wl).add(this),t(),a(this,zr).promise}update({viewport:t,onBefore:e=null}){var o;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==a(this,Ul)&&(e==null||e(),A(this,Ul,r),La(a(this,jl),{rotation:r})),i!==a(this,Hr)){e==null||e(),A(this,Hr,i);const u={div:null,properties:null,ctx:C(o=Te,ei,Vf).call(o,a(this,Ko))};for(const c of a(this,Jo))u.properties=a(this,Ph).get(c),u.div=c,C(this,sr,Jy).call(this,u)}}cancel(){var e;const t=new io("TextLayer task cancelled.");(e=a(this,Qo))==null||e.cancel(t).catch(()=>{}),A(this,Qo,null),a(this,zr).reject(t)}get textDivs(){return a(this,Jo)}get textContentItemsStr(){return a(this,Th)}static cleanup(){if(!(a(this,Wl).size>0)){a(this,Zo).clear();for(const{canvas:t}of a(this,ta).values())t.remove();a(this,ta).clear()}}};zr=new WeakMap,In=new WeakMap,Eh=new WeakMap,Ch=new WeakMap,Ko=new WeakMap,$s=new WeakMap,xh=new WeakMap,kh=new WeakMap,Qo=new WeakMap,jl=new WeakMap,Ul=new WeakMap,Hr=new WeakMap,Vl=new WeakMap,Th=new WeakMap,Gl=new WeakMap,Jo=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,Zo=new WeakMap,ta=new WeakMap,Lh=new WeakMap,Br=new WeakMap,Wl=new WeakMap,sr=new WeakSet,d1=function(t){var r,o;if(a(this,Eh))return;(o=a(this,$s)).ctx??(o.ctx=C(r=Te,ei,Vf).call(r,a(this,Ko)));const e=a(this,Jo),i=a(this,Th);for(const u of t){if(e.length>zk){Mt("Ignoring additional textDivs for performance reasons."),A(this,Eh,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=a(this,In);A(this,In,document.createElement("span")),a(this,In).classList.add("markedContent"),u.id!==null&&a(this,In).setAttribute("id",`${u.id}`),c.append(a(this,In))}else u.type==="endMarkedContent"&&A(this,In,a(this,In).parentNode);continue}i.push(u.str),C(this,sr,f1).call(this,u)}},f1=function(t){var x;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Jo).push(e);const r=yt.transform(a(this,Rh),t.transform);let o=Math.atan2(r[1],r[0]);const u=a(this,Vl)[t.fontName];u.vertical&&(o+=Math.PI/2);let c=a(this,Ch)&&u.fontSubstitution||u.fontFamily;c=Te.fontFamilyMap.get(c)||c;const f=Math.hypot(r[2],r[3]),p=f*C(x=Te,ei,g1).call(x,c,a(this,Ko));let m,v;o===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(o),v=r[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",b=e.style;a(this,In)===a(this,jl)?(b.left=`${(100*m/a(this,kh)).toFixed(2)}%`,b.top=`${(100*v/a(this,xh)).toFixed(2)}%`):(b.left=`${w}${m.toFixed(2)}px)`,b.top=`${w}${v.toFixed(2)}px)`),b.fontSize=`${w}${(a(Te,Br)*f).toFixed(2)}px)`,b.fontFamily=c,i.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,Ch)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(_=!0)}if(_&&(i.canvasWidth=u.vertical?t.height:t.width),a(this,Ph).set(e,i),a(this,$s).div=e,a(this,$s).properties=i,C(this,sr,Jy).call(this,a(this,$s)),i.hasText&&a(this,In).append(e),i.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),a(this,In).append(k)}},Jy=function(t){var c;const{div:e,properties:i,ctx:r}=t,{style:o}=e;let u="";if(a(Te,Br)>1&&(u=`scale(${1/a(Te,Br)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:f}=o,{canvasWidth:p,fontSize:m}=i;C(c=Te,ei,Zy).call(c,r,m*a(this,Hr),f);const{width:v}=r.measureText(e.textContent);v>0&&(u=`scaleX(${p*a(this,Hr)/v}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(o.transform=u)},ei=new WeakSet,Vf=function(t=null){let e=a(this,ta).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,ta).set(t,e),a(this,Lh).set(e,{size:0,family:""})}return e},Zy=function(t,e,i){const r=a(this,Lh).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},p1=function(){if(a(this,Br)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Br,t.getBoundingClientRect().height),t.remove()},g1=function(t,e){const i=a(this,Zo).get(t);if(i)return i;const r=C(this,ei,Vf).call(this,e);r.canvas.width=r.canvas.height=Pn,C(this,ei,Zy).call(this,r,Pn,t);const o=r.measureText("");let u=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(u){const m=u/(u+c);return a(this,Zo).set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Pn,Pn),r.strokeText("g",0,0);let f=r.getImageData(0,0,Pn,Pn).data;c=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){c=Math.ceil(m/4/Pn);break}r.clearRect(0,0,Pn,Pn),r.strokeText("A",0,Pn),f=r.getImageData(0,0,Pn,Pn).data,u=0;for(let m=0,v=f.length;m<v;m+=4)if(f[m]>0){u=Pn-Math.floor(m/4/Pn);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+c):Hk;return a(this,Zo).set(t,p),p},E(Te,ei),E(Te,Zo,new Map),E(Te,ta,new Map),E(Te,Lh,new WeakMap),E(Te,Br,null),E(Te,Wl,new Set);let Bc=Te;class jc{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(o){var f;if(!o)return;let u=null;const c=o.name;if(c==="#text")u=o.value;else if(jc.shouldBuildText(c))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const p of o.children)r(p)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Bk=65536,jk=100,Uk=5e3,Vk=un?sk:ek,Gk=un?rk:t1,Wk=un?ik:nk,qk=un?ok:s1;function Xk(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new tv,{docId:e}=t,i=d.url?Yk(d.url):null,r=d.data?Kk(d.data):null,o=d.httpHeaders||null,u=d.withCredentials===!0,c=d.password??null,f=d.range instanceof m1?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:Bk;let m=d.worker instanceof bl?d.worker:null;const v=d.verbosity,w=typeof d.docBaseUrl=="string"&&!Bp(d.docBaseUrl)?d.docBaseUrl:null,b=typeof d.cMapUrl=="string"?d.cMapUrl:null,_=d.cMapPacked!==!1,x=d.CMapReaderFactory||Gk,k=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,T=d.StandardFontDataFactory||qk,M=d.stopAtErrors!==!0,F=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,N=d.isEvalSupported!==!1,j=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!un,V=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!un&&(wn.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Q=typeof d.disableFontFace=="boolean"?d.disableFontFace:un,nt=d.fontExtraProperties===!0,At=d.enableXfa===!0,ft=d.ownerDocument||globalThis.document,Nt=d.disableRange===!0,Tt=d.disableStream===!0,vt=d.disableAutoFetch===!0,Bt=d.pdfBug===!0,J=d.CanvasFactory||Vk,Z=d.FilterFactory||Wk,Y=d.enableHWA===!0,H=f?f.length:d.length??NaN,D=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!un&&!Q,P=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:x===t1&&T===s1&&b&&k&&bc(b,document.baseURI)&&bc(k,document.baseURI),$=null;Ix(v);const G={canvasFactory:new J({ownerDocument:ft,enableHWA:Y}),filterFactory:new Z({docId:e,ownerDocument:ft}),cMapReaderFactory:P?null:new x({baseUrl:b,isCompressed:_}),standardFontDataFactory:P?null:new T({baseUrl:k})};if(!m){const ht={verbosity:v,port:tr.workerPort};m=ht.port?bl.fromPort(ht):new bl(ht),t._worker=m}const it={docId:e,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:vt,rangeChunkSize:p,length:H,docBaseUrl:w,enableXfa:At,evaluatorOptions:{maxImageSize:F,disableFontFace:Q,ignoreErrors:M,isEvalSupported:N,isOffscreenCanvasSupported:j,isImageDecoderSupported:V,canvasMaxAreaInBytes:U,fontExtraProperties:nt,useSystemFonts:D,cMapUrl:P?b:null,standardFontDataUrl:P?k:null}},wt={disableFontFace:Q,fontExtraProperties:nt,ownerDocument:ft,pdfBug:Bt,styleElement:$,loadingParams:{disableAutoFetch:vt,enableXfa:At}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ht=m.messageHandler.sendWithPromise("GetDocRequest",it,r?[r.buffer]:null);let at;if(f)at=new _k(f,{disableRange:Nt,disableStream:Tt});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let bt;if(un)if(bc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bt=Qb}else bt=Fk;else bt=bc(i)?Qb:Lk;at=new bt({url:i,length:H,httpHeaders:o,withCredentials:u,rangeChunkSize:p,disableRange:Nt,disableStream:Tt})}return ht.then(bt=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ot=new Cc(e,bt,m.port),St=new tT(ot,t,at,wt,G);t._transport=St,ot.send("Ready",null)})}).catch(t._capability.reject),t}function Yk(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(un&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Kk(d){if(un&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return zp(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jb(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var Cp;const xp=class xp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${fn(xp,Cp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Cp=new WeakMap,E(xp,Cp,0);let tv=xp;class m1{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Qk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ot(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var jr,zs,mi,gl,Gf;class Jk{constructor(t,e,i,r=!1){E(this,mi);E(this,jr,null);E(this,zs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new $b:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new y1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new pd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ot(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=Cr.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var N,j;(N=this._stats)==null||N.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:b,cacheKey:_}=w;A(this,zs,!1),C(this,mi,Gf).call(this),c||(c=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(_);x||(x=Object.create(null),this._intentStates.set(_,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const k=!!(b&Jn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(j=this._stats)==null||j.time("Page Request"),this._pumpOperatorList(w));const T=V=>{var U;x.renderTasks.delete(M),(this._maybeCleanupAfterRender||k)&&A(this,zs,!0),C(this,mi,gl).call(this,!k),V?(M.capability.reject(V),this._abortOperatorList({intentState:x,reason:V instanceof Error?V:new Error(V)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new nv({callback:T,params:{canvasContext:t,viewport:e,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(x.renderTasks||(x.renderTasks=new Set)).add(M);const F=M.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([V,U])=>{var Q;if(this.destroyed){T();return}if((Q=this._stats)==null||Q.time("Rendering"),!(U.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:V,optionalContentConfig:U}),M.operatorListChanged()}).catch(T),F}getOperatorList({intent:t="display",annotationMode:e=Cr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,i,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>jc.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function o(){u.read().then(function({value:f,done:p}){if(p){i(c);return}c.lang??(c.lang=f.lang),Object.assign(c.styles,f.styles),c.items.push(...f.items),o()},r)}const u=e.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),A(this,zs,!1),C(this,mi,Gf).call(this),Promise.all(t)}cleanup(t=!1){A(this,zs,!0);const e=C(this,mi,gl).call(this,!1);return t&&e&&this._stats&&(this._stats=new $b),e}_startRenderPage(t,e){var r,o;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&C(this,mi,gl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:o,transfer:u}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();C(this,mi,gl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Gv){let r=jk;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new io(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}jr=new WeakMap,zs=new WeakMap,mi=new WeakSet,gl=function(t=!1){if(C(this,mi,Gf).call(this),!a(this,zs)||this.destroyed)return!1;if(t)return A(this,jr,setTimeout(()=>{A(this,jr,null),C(this,mi,gl).call(this,!1)},Uk)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,zs,!1),!0},Gf=function(){a(this,jr)&&(clearTimeout(a(this,jr)),A(this,jr,null))};var Hs,kp;class Zk{constructor(){E(this,Hs,new Map);E(this,kp,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,kp).then(()=>{for(const[r]of a(this,Hs))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){Mt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}a(this,Hs).set(e,r)}removeEventListener(t,e){const i=a(this,Hs).get(e);i==null||i(),a(this,Hs).delete(e)}terminate(){for(const[,t]of a(this,Hs))t==null||t();a(this,Hs).clear()}}Hs=new WeakMap,kp=new WeakMap;var Tp,ea,na,ql,Wf,Xl,qf;const se=class se{constructor({name:t=null,port:e=null,verbosity:i=Nx()}={}){E(this,ql);var r;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=a(se,na))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(se,na)||A(se,na,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Cc("main","worker",t),this._messageHandler.on("ready",function(){}),C(this,ql,Wf).call(this)}_initialize(){if(a(se,ea)||a(se,Xl,qf)){this._setupFakeWorker();return}let{workerSrc:t}=se;try{se._isSameOrigin(window.location.href,t)||(t=se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Cc("main","worker",e),r=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,C(this,ql,Wf).call(this)}),i.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};u();return}catch{$p("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(se,ea)||(Mt("Setting up fake worker."),A(se,ea,!0)),se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Zk;this._port=e;const i=`fake${fn(se,Tp)._++}`,r=new Cc(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new Cc(i,i+"_worker",e),C(this,ql,Wf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(se,na))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,na))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new se(t)}static get workerSrc(){if(tr.workerSrc)return tr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ot(this,"_setupFakeWorkerGlobal",(async()=>a(this,Xl,qf)?a(this,Xl,qf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Tp=new WeakMap,ea=new WeakMap,na=new WeakMap,ql=new WeakSet,Wf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Xl=new WeakSet,qf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},E(se,Xl),E(se,Tp,0),E(se,ea,!1),E(se,na),un&&(A(se,ea,!0),tr.workerSrc||(tr.workerSrc="./pdf.worker.mjs")),se._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let bl=se;var Bs,os,Yl,Kl,js,ia,Rc;class tT{constructor(t,e,i,r,o){E(this,ia);E(this,Bs,new Map);E(this,os,new Map);E(this,Yl,new Map);E(this,Kl,new Map);E(this,js,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new y1,this.fontLoader=new Zx({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ot(this,"annotationStorage",new Yv)}getRenderingIntent(t,e=Cr.ENABLE,i=null,r=!1,o=!1){let u=Jn.DISPLAY,c=Uy;switch(t){case"any":u=Jn.ANY;break;case"display":break;case"print":u=Jn.PRINT;break;default:Mt(`getRenderingIntent - invalid intent: ${t}`)}const f=u&Jn.PRINT&&i instanceof XS?i:this.annotationStorage;switch(e){case Cr.DISABLE:u+=Jn.ANNOTATIONS_DISABLE;break;case Cr.ENABLE:break;case Cr.ENABLE_FORMS:u+=Jn.ANNOTATIONS_FORMS;break;case Cr.ENABLE_STORAGE:u+=Jn.ANNOTATIONS_STORAGE,c=f.serializable;break;default:Mt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=Jn.IS_EDITING),o&&(u+=Jn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,v=[u,c.hash,m];return{renderingIntent:u,cacheKey:v.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,js))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,os).values())t.push(r._destroy());a(this,os).clear(),a(this,Yl).clear(),a(this,Kl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Bs).clear(),this.filterFactory.destroy(),Bc.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new io("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{_e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){r.close();return}_e(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:u}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(i,r)=>{_e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:u,done:c}){if(c){r.close();return}_e(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{o.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Qk(i,this))}),t.on("DocException",i=>{e._capability.reject(Rn(i))}),t.on("PasswordRequest",i=>{A(this,js,Promise.withResolvers());try{if(!e.onPassword)throw Rn(i);const r=o=>{o instanceof Error?a(this,js).reject(o):a(this,js).resolve({password:o})};e.onPassword(r,i.code)}catch(r){a(this,js).reject(r)}return a(this,js).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,os).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,o])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const b=o.error;Mt(`Error during font loading: ${b}`),this.commonObjs.resolve(i,b);break}const m=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(b,_)=>globalThis.FontInspector.fontAdded(b,_):null,v=new tk(o,{disableFontFace:c,fontExtraProperties:f,inspectFont:m});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=o;_e(w,"The imageRef must be defined.");for(const b of a(this,os).values())for(const[,_]of b.objs)if((_==null?void 0:_.ref)===w)return _.dataLen?(this.commonObjs.resolve(i,structuredClone(_)),_.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,o,u])=>{var f;if(this.destroyed)return;const c=a(this,os).get(r);if(!c.objs.has(i)){if(c._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":c.objs.resolve(i,u),(u==null?void 0:u.dataLen)>Px&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Yl).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,Kl).set(o.refStr,t);const u=new Jk(e,o,this,this._params.pdfBug);return a(this,os).set(e,u),u});return a(this,Yl).set(e,r),r}getPageIndex(t){return Jb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,ia,Rc).call(this,"GetFieldObjects")}hasJSActions(){return C(this,ia,Rc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return C(this,ia,Rc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,ia,Rc).call(this,"GetOptionalContentConfig").then(e=>new Sk(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Bs).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,u;return{info:r[0],metadata:r[1]?new Ak(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return a(this,Bs).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,os).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Bs).clear(),this.filterFactory.destroy(!0),Bc.cleanup()}}cachedPageNumber(t){if(!Jb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Kl).get(e)??null}}Bs=new WeakMap,os=new WeakMap,Yl=new WeakMap,Kl=new WeakMap,js=new WeakMap,ia=new WeakSet,Rc=function(t,e=null){const i=a(this,Bs).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return a(this,Bs).set(t,r),r};const wc=Symbol("INITIAL_DATA");var Un,Mh,ev;class y1{constructor(){E(this,Mh);E(this,Un,Object.create(null))}get(t,e=null){if(e){const r=C(this,Mh,ev).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=a(this,Un)[t];if(!i||i.data===wc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,Un)[t];return!!e&&e.data!==wc}delete(t){const e=a(this,Un)[t];return!e||e.data===wc?!1:(delete a(this,Un)[t],!0)}resolve(t,e=null){const i=C(this,Mh,ev).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,Un)){const{data:i}=a(this,Un)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}A(this,Un,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Un)){const{data:e}=a(this,Un)[t];e!==wc&&(yield[t,e])}}}Un=new WeakMap,Mh=new WeakSet,ev=function(t){var e;return(e=a(this,Un))[t]||(e[t]={...Promise.withResolvers(),data:wc})};var Ur;class eT{constructor(t){E(this,Ur,null);A(this,Ur,t),this.onContinue=null}get promise(){return a(this,Ur).capability.promise}cancel(t=0){a(this,Ur).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,Ur).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,Ur);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ur=new WeakMap;var Vr,sa;const Co=class Co{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:u,pageIndex:c,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){E(this,Vr,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new eT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,f;if(this.cancelled)return;if(this._canvas){if(a(Co,sa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Co,sa).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:u}=this.params;this.gfx=new Al(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,Vr)&&(window.cancelAnimationFrame(a(this,Vr)),A(this,Vr,null)),a(Co,sa).delete(this._canvas),this.callback(t||new Gv(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Vr,window.requestAnimationFrame(()=>{A(this,Vr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Co,sa).delete(this._canvas),this.callback())))}};Vr=new WeakMap,sa=new WeakMap,E(Co,sa,new WeakSet);let nv=Co;const nT="4.10.38",iT="f9bea397f";function Zb(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function Ac(d){return Math.max(0,Math.min(255,255*d))}class tS{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ac(t),[t,t,t]}static G_HTML([t]){const e=Zb(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Ac)}static RGB_HTML(t){return`#${t.map(Zb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[Ac(1-Math.min(1,t+r)),Ac(1-Math.min(1,i+r)),Ac(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,o=1-e,u=1-i,c=Math.min(r,o,u);return["CMYK",r,o,u,c]}}class sT{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class Qv extends sT{_createSVG(t){return document.createElementNS(Es,t)}}class v1{static setupStorage(t,e,i,r,o){const u=r.getValue(e,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?t.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of i.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const f=c.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:o}){const{attributes:u}=e,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}c&&o.addLinkAttributes(t,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(t,u.dataId,e,i)}static render(t){var v,w;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,o=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:o,linkService:i});const c=o!=="richText",f=t.div;if(f.append(u),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=b}c&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const b=document.createTextNode(r.value);u.append(b),c&&jc.shouldBuildText(r.name)&&p.push(b)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[b,_,x]=m.at(-1);if(_+1===b.children.length){m.pop();continue}const k=b.children[++m.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const F=document.createTextNode(k.value);p.push(F),x.append(F);continue}const M=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(x.append(M),k.attributes&&this.setAttributes({html:M,element:k,storage:e,intent:o,linkService:i}),((w=k.children)==null?void 0:w.length)>0)m.push([k,-1,M]);else if(k.value){const F=document.createTextNode(k.value);c&&jc.shouldBuildText(T)&&p.push(F),M.append(F)}}for(const b of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const md=1e3,rT=9,Ia=new WeakSet;function no(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class oT{static create(t){switch(t.data.annotationType){case ke.LINK:return new w1(t);case ke.TEXT:return new aT(t);case ke.WIDGET:switch(t.data.fieldType){case"Tx":return new lT(t);case"Btn":return t.data.radioButton?new S1(t):t.data.checkBox?new cT(t):new hT(t);case"Ch":return new dT(t);case"Sig":return new uT(t)}return new Da(t);case ke.POPUP:return new sv(t);case ke.FREETEXT:return new k1(t);case ke.LINE:return new pT(t);case ke.SQUARE:return new gT(t);case ke.CIRCLE:return new mT(t);case ke.POLYLINE:return new T1(t);case ke.CARET:return new vT(t);case ke.INK:return new Jv(t);case ke.POLYGON:return new yT(t);case ke.HIGHLIGHT:return new P1(t);case ke.UNDERLINE:return new wT(t);case ke.SQUIGGLY:return new AT(t);case ke.STRIKEOUT:return new bT(t);case ke.STAMP:return new R1(t);case ke.FILEATTACHMENT:return new ST(t);default:return new ve(t)}}}var ra,Ql,Jl,Ih,iv;const n0=class n0{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){E(this,Ih);E(this,ra,null);E(this,Ql,!1);E(this,Jl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n0._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,ra)||A(this,ra,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&C(this,Ih,iv).call(this,e),(i=a(this,Jl))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,ra)&&(C(this,Ih,iv).call(this,a(this,ra).rect),(t=a(this,Jl))==null||t.popup.resetEdited(),A(this,ra,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Da||(o.tabIndex=md);const{style:u}=o;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof sv){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,o),o}const{width:c,height:f}=no(e.rect);if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(x>0||k>0){const M=`calc(${x}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;u.borderRadius=M}else if(this instanceof S1){const M=`calc(${c}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;u.borderRadius=M}switch(e.borderStyle.style){case yc.SOLID:u.borderStyle="solid";break;case yc.DASHED:u.borderStyle="dashed";break;case yc.BEVELED:Mt("Unimplemented border style: beveled");break;case yc.INSET:Mt("Unimplemented border style: inset");break;case yc.UNDERLINE:u.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(A(this,Ql,!0),u.borderColor=yt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):u.borderWidth=0}const p=yt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:b}=r.rawDims;u.left=`${100*(p[0]-w)/m}%`,u.top=`${100*(p[1]-b)/v}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(u.width=`${100*c/m}%`,u.height=`${100*f/v}%`):this.setRotation(_,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:u}=no(this.data.rect);let c,f;t%180===0?(c=100*o/i,f=100*u/r):(c=100*u/i,f=100*o/r),e.style.width=`${c}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const o=r.detail[e],u=o[0],c=o.slice(1);r.target.style[i]=tS[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:tS[`${u}_rgb`](c)})};return Ot(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||i[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,o]of Object.entries(e)){const u=i[r];if(u){const c={detail:{[r]:o},target:t};u(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,o]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,k,T,M]=t.subarray(2,6);if(r===x&&o===k&&e===T&&i===M)return}const{style:u}=this.container;let c;if(a(this,Ql)){const{borderColor:x,borderWidth:k}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const f=r-e,p=o-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const b=m.createElement("clipPath"),_=`clippath_${this.data.id}`;b.setAttribute("id",_),b.setAttribute("clipPathUnits","objectBoundingBox"),w.append(b);for(let x=2,k=t.length;x<k;x+=8){const T=t[x],M=t[x+1],F=t[x+2],N=t[x+3],j=m.createElement("rect"),V=(F-e)/f,U=(o-M)/p,Q=(T-F)/f,nt=(M-N)/p;j.setAttribute("x",V),j.setAttribute("y",U),j.setAttribute("width",Q),j.setAttribute("height",nt),b.append(j),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${V}" y="${U}" width="${Q}" height="${nt}"/>`)}a(this,Ql)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(v),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=A(this,Jl,new sv({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:u,exportValues:c}of r){if(o===-1||u===e)continue;const f=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Ia.has(p)){Mt(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:f,domElement:p})}return i}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,u=r.getAttribute("data-element-id");u!==e&&Ia.has(r)&&i.push({id:u,exportValue:o,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ra=new WeakMap,Ql=new WeakMap,Jl=new WeakMap,Ih=new WeakSet,iv=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}}}=this;i==null||i.splice(0,4,...t);const{width:p,height:m}=no(t);e.left=`${100*(t[0]-c)/o}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*p/o}%`,e.height=`${100*m/u}%`):this.setRotation(r)};let ve=n0;var Zn,bo,A1,b1;class w1 extends ve{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});E(this,Zn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action),o=!0):e.attachment?(C(this,Zn,A1).call(this,r,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(C(this,Zn,b1).call(this,r,e.setOCGState),o=!0):e.dest?(this._bindLink(r,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&C(this,Zn,bo).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),C(this,Zn,bo).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const u=r.get(o);u&&(e[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),C(this,Zn,bo).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),C(this,Zn,bo).call(this),!this._fieldObjects){Mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var v;r==null||r();const{fields:o,refs:u,include:c}=i,f=[];if(o.length!==0||u.length!==0){const w=new Set(u);for(const b of o){const _=this._fieldObjects[b]||[];for(const{id:x}of _)w.add(x)}for(const b of Object.values(this._fieldObjects))for(const _ of b)w.has(_.id)===c&&f.push(_)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,m=[];for(const w of f){const{id:b}=w;switch(m.push(b),w.type){case"text":{const x=w.defaultValue||"";p.setValue(b,{value:x});break}case"checkbox":case"radiobutton":{const x=w.defaultValue===w.exportValues;p.setValue(b,{value:x});break}case"combobox":case"listbox":{const x=w.defaultValue||"";p.setValue(b,{value:x});break}default:continue}const _=document.querySelector(`[data-element-id="${b}"]`);if(_){if(!Ia.has(_)){Mt(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Zn=new WeakSet,bo=function(){this.container.setAttribute("data-internal-link","")},A1=function(e,i,r=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},C(this,Zn,bo).call(this)},b1=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),C(this,Zn,bo).call(this)};class aT extends ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Da extends ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return wn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,o){i.includes("mouse")?t.addEventListener(i,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(i,u=>{var c;if(i==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u)}}))})}_setEventListeners(t,e,i,r){var o,u,c;for(const[f,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":yt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||rT,o=t.style;let u;const c=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(p/(py*r))||1,v=p/m;u=Math.min(r,f(v/py))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,f(p/py))}o.fontSize=`calc(${u}px * var(--scale-factor))`,o.color=yt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class lT extends Da{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=i),o.setValue(u.id,{[r]:i})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let c=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&c.length>f&&(c=c.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ia.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=md,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const b=this.data.defaultFieldValue??"";i.value=m.userValue=b,m.formattedValue=null});let v=w=>{const{formattedValue:b}=m;b!=null&&(w.target.value=b),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",b=>{var x;if(m.focused)return;const{target:_}=b;m.userValue&&(_.value=m.userValue),m.lastCommittedValue=_.value,m.commitKey=1,(x=this.data.actions)!=null&&x.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",b=>{this.showElementAndHideCanvas(b.target);const _={value(x){m.userValue=x.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),x.target.value=m.userValue},formattedValue(x){const{formattedValue:k}=x.detail;m.formattedValue=k,k!=null&&x.target!==document.activeElement&&(x.target.value=k),t.setValue(e,{formattedValue:k})},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{var F;const{charLimit:k}=x.detail,{target:T}=x;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let M=m.userValue;!M||M.length<=k||(M=M.slice(0,k),T.value=m.userValue=M,t.setValue(e,{value:M}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(_,b)}),i.addEventListener("keydown",b=>{var k;m.commitKey=1;let _=-1;if(b.key==="Escape"?_=0:b.key==="Enter"&&!this.data.multiLine?_=2:b.key==="Tab"&&(m.commitKey=3),_===-1)return;const{value:x}=b.target;m.lastCommittedValue!==x&&(m.lastCommittedValue=x,m.userValue=x,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:_,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",b=>{var x,k;if(!m.focused||!b.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(m.focused=!1);const{value:_}=b.target;m.userValue=_,m.lastCommittedValue!==_&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:m.commitKey,selStart:b.target.selectionStart,selEnd:b.target.selectionEnd}})),w(b)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",b=>{var j;m.lastCommittedValue=null;const{data:_,target:x}=b,{value:k,selectionStart:T,selectionEnd:M}=x;let F=T,N=M;switch(b.inputType){case"deleteWordBackward":{const V=k.substring(0,T).match(/\w*[^\w]*$/);V&&(F-=V[0].length);break}case"deleteWordForward":{const V=k.substring(T).match(/^[^\w]*\w*/);V&&(N+=V[0].length);break}case"deleteContentBackward":T===M&&(F-=1);break;case"deleteContentForward":T===M&&(N+=1);break}b.preventDefault(),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:_||"",willCommit:!1,selStart:F,selEnd:N}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],b=>b.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const b=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${b}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class uT extends Da{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class cT extends Da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ia.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=md,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue||"Off";u.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const c={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class S1 extends Da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,i))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Ia.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=md,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue;u.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",c=>{const f={value:p=>{const m=u===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),t.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(f,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class hT extends w1{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class dT extends Da{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Ia.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=md;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=m=>{const v=m?"value":"textContent",{options:w,multiple:b}=r;return b?Array.prototype.filter.call(w,_=>_.selected).map(_=>_[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let f=c(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){u==null||u();const b=w.detail.value,_=new Set(Array.isArray(b)?b:[b]);for(const x of r.options)x.selected=_.has(x.value);t.setValue(e,{value:c(!0)}),f=c(!1)},multipleSelection(w){r.multiple=!0},remove(w){const b=r.options,_=w.detail.remove;b[_].selected=!1,r.remove(_),b.length>0&&Array.prototype.findIndex.call(b,k=>k.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},clear(w){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=c(!1)},insert(w){const{index:b,displayValue:_,exportValue:x}=w.detail.insert,k=r.children[b],T=document.createElement("option");T.textContent=_,T.value=x,k?k.before(T):r.append(T),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},items(w){const{items:b}=w.detail;for(;r.length!==0;)r.remove(0);for(const _ of b){const{displayValue:x,exportValue:k}=_,T=document.createElement("option");T.textContent=x,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},indices(w){const b=new Set(w.detail.indices);for(const _ of w.target.options)_.selected=b.has(_.index);t.setValue(e,{value:c(!0)}),f=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var b;const v=c(!0),w=c(!1);t.setValue(e,{value:v}),m.preventDefault(),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class sv extends ve{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ve._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new fT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Vv}${i}`).join(",")),this.container}}var Zl,Pp,Rp,tu,oa,fe,Us,eu,Nh,Dh,nu,Vs,Mi,Gs,Fh,Ws,Oh,aa,la,Kt,Xf,rv,_1,E1,C1,x1,Yf,Kf,ov;class fT{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:o,contentsObj:u,richText:c,parent:f,rect:p,parentRect:m,open:v}){E(this,Kt);E(this,Zl,C(this,Kt,C1).bind(this));E(this,Pp,C(this,Kt,ov).bind(this));E(this,Rp,C(this,Kt,Kf).bind(this));E(this,tu,C(this,Kt,Yf).bind(this));E(this,oa,null);E(this,fe,null);E(this,Us,null);E(this,eu,null);E(this,Nh,null);E(this,Dh,null);E(this,nu,null);E(this,Vs,!1);E(this,Mi,null);E(this,Gs,null);E(this,Fh,null);E(this,Ws,null);E(this,Oh,null);E(this,aa,null);E(this,la,!1);var w;A(this,fe,t),A(this,Oh,r),A(this,Us,u),A(this,Ws,c),A(this,Dh,f),A(this,oa,e),A(this,Fh,p),A(this,nu,m),A(this,Nh,i),A(this,eu,qv.toDateObject(o)),this.trigger=i.flatMap(b=>b.getElementsToTriggerPopup());for(const b of this.trigger)b.addEventListener("click",a(this,tu)),b.addEventListener("mouseenter",a(this,Rp)),b.addEventListener("mouseleave",a(this,Pp)),b.classList.add("popupTriggerArea");for(const b of i)(w=b.container)==null||w.addEventListener("keydown",a(this,Zl));a(this,fe).hidden=!0,v&&C(this,Kt,Yf).call(this)}render(){if(a(this,Mi))return;const t=A(this,Mi,document.createElement("div"));if(t.className="popup",a(this,oa)){const o=t.style.outlineColor=yt.makeHexColor(...a(this,oa));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=yt.makeHexColor(...a(this,oa).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,Oh),t.append(e),a(this,eu)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,eu).valueOf()})),e.append(o)}const r=a(this,Kt,Xf);if(r)v1.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(a(this,Us));t.append(o)}a(this,fe).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,u=r.length;o<u;++o){const c=r[o];i.append(document.createTextNode(c)),o<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,aa)||A(this,aa,{contentsObj:a(this,Us),richText:a(this,Ws)}),t&&A(this,Gs,null),e&&(A(this,Ws,C(this,Kt,E1).call(this,e)),A(this,Us,null)),(i=a(this,Mi))==null||i.remove(),A(this,Mi,null)}resetEdited(){var t;a(this,aa)&&({contentsObj:fn(this,Us)._,richText:fn(this,Ws)._}=a(this,aa),A(this,aa,null),(t=a(this,Mi))==null||t.remove(),A(this,Mi,null),A(this,Gs,null))}forceHide(){A(this,la,this.isVisible),a(this,la)&&(a(this,fe).hidden=!0)}maybeShow(){a(this,la)&&(a(this,Mi)||C(this,Kt,Kf).call(this),A(this,la,!1),a(this,fe).hidden=!1)}get isVisible(){return a(this,fe).hidden===!1}}Zl=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,tu=new WeakMap,oa=new WeakMap,fe=new WeakMap,Us=new WeakMap,eu=new WeakMap,Nh=new WeakMap,Dh=new WeakMap,nu=new WeakMap,Vs=new WeakMap,Mi=new WeakMap,Gs=new WeakMap,Fh=new WeakMap,Ws=new WeakMap,Oh=new WeakMap,aa=new WeakMap,la=new WeakMap,Kt=new WeakSet,Xf=function(){const t=a(this,Ws),e=a(this,Us);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Ws).html||null},rv=function(){var t,e,i;return((i=(e=(t=a(this,Kt,Xf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},_1=function(){var t,e,i;return((i=(e=(t=a(this,Kt,Xf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},E1=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,Kt,_1),fontSize:a(this,Kt,rv)?`calc(${a(this,Kt,rv)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return i},C1=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Vs))&&C(this,Kt,Yf).call(this)},x1=function(){if(a(this,Gs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:o}}}=a(this,Dh);let u=!!a(this,nu),c=u?a(this,nu):a(this,Fh);for(const _ of a(this,Nh))if(!c||yt.intersect(_.data.rect,c)!==null){c=_.data.rect,u=!0;break}const f=yt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),m=u?c[2]-c[0]+5:0,v=f[0]+m,w=f[1];A(this,Gs,[100*(v-r)/e,100*(w-o)/i]);const{style:b}=a(this,fe);b.left=`${a(this,Gs)[0]}%`,b.top=`${a(this,Gs)[1]}%`},Yf=function(){A(this,Vs,!a(this,Vs)),a(this,Vs)?(C(this,Kt,Kf).call(this),a(this,fe).addEventListener("click",a(this,tu)),a(this,fe).addEventListener("keydown",a(this,Zl))):(C(this,Kt,ov).call(this),a(this,fe).removeEventListener("click",a(this,tu)),a(this,fe).removeEventListener("keydown",a(this,Zl)))},Kf=function(){a(this,Mi)||this.render(),this.isVisible?a(this,Vs)&&a(this,fe).classList.add("focused"):(C(this,Kt,x1).call(this),a(this,fe).hidden=!1,a(this,fe).style.zIndex=parseInt(a(this,fe).style.zIndex)+1e3)},ov=function(){a(this,fe).classList.remove("focused"),!(a(this,Vs)||!this.isVisible)&&(a(this,fe).hidden=!0,a(this,fe).style.zIndex=parseInt(a(this,fe).style.zIndex)-1e3)};class k1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Lt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $h;class pT extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,$h,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:r}=no(e.rect),o=this.svgFactory.create(i,r,!0),u=A(this,$h,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,$h)}addHighlightArea(){this.container.classList.add("highlightArea")}}$h=new WeakMap;var zh;class gT extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,zh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:r}=no(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,zh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",i-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}zh=new WeakMap;var Hh;class mT extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Hh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:r}=no(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Hh,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",r/2),c.setAttribute("rx",i/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hh=new WeakMap;var Bh;class T1 extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Bh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:u,height:c}=no(e),f=this.svgFactory.create(u,c,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const b=i[v]-e[0],_=e[3]-i[v+1];p.push(`${b},${_}`)}p=p.join(" ");const m=A(this,Bh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Bh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bh=new WeakMap;class yT extends T1{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class vT extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var jh,ua,Uh,av;class Jv extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,Uh);E(this,jh,null);E(this,ua,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Lt.HIGHLIGHT:Lt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:o,popupRef:u}}=this,{transform:c,width:f,height:p}=C(this,Uh,av).call(this,i,e),m=this.svgFactory.create(f,p,!0),v=A(this,jh,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",o.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",c);for(let w=0,b=r.length;w<b;w++){const _=this.svgFactory.createElement(this.svgElementName);a(this,ua).push(_),_.setAttribute("points",r[w].join(",")),v.append(_)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:o}=e,u=a(this,jh);if(i>=0&&u.setAttribute("stroke-width",i||1),r)for(let c=0,f=a(this,ua).length;c<f;c++)a(this,ua)[c].setAttribute("points",r[c].join(","));if(o){const{transform:c,width:f,height:p}=C(this,Uh,av).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",c)}}getElementsToTriggerPopup(){return a(this,ua)}addHighlightArea(){this.container.classList.add("highlightArea")}}jh=new WeakMap,ua=new WeakMap,Uh=new WeakSet,av=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class P1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Lt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class wT extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class AT extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class bT extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class R1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Lt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Vh,Gh,lv;class ST extends ve{constructor(e){var r;super(e,{isRenderable:!0});E(this,Gh);E(this,Vh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,Gh,lv).bind(this)),A(this,Vh,r);const{isMac:o}=wn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&C(this,Gh,lv).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,Vh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vh=new WeakMap,Gh=new WeakSet,lv=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Wh,ca,ha,qh,Na,L1,uv;class _T{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:u,structTreeLayer:c}){E(this,Na);E(this,Wh,null);E(this,ca,null);E(this,ha,new Map);E(this,qh,null);this.div=t,A(this,Wh,e),A(this,ca,i),A(this,qh,c||null),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return a(this,ha).size>0}async render(t){var u;const{annotations:e}=t,i=this.div;La(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Qv,annotationStorage:t.annotationStorage||new Yv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const f=c.annotationType===ke.POPUP;if(f){const v=r.get(c.id);if(!v)continue;o.elements=v}else{const{width:v,height:w}=no(c.rect);if(v<=0||w<=0)continue}o.data=c;const p=oT.create(o);if(!p.isRenderable)continue;if(!f&&c.popupRef){const v=r.get(c.popupRef);v?v.push(p):r.set(c.popupRef,[p])}const m=p.render();c.hidden&&(m.style.visibility="hidden"),await C(this,Na,L1).call(this,m,c.id),p._isEditable&&(a(this,ha).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}C(this,Na,uv).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,La(e,{rotation:t.rotation}),C(this,Na,uv).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,ha).values())}getEditableAnnotation(t){return a(this,ha).get(t)}}Wh=new WeakMap,ca=new WeakMap,ha=new WeakMap,qh=new WeakMap,Na=new WeakSet,L1=async function(t,e){var u,c;const i=t.firstChild||t,r=i.id=`${Vv}${e}`,o=await((u=a(this,qh))==null?void 0:u.getAriaAttributes(r));if(o)for(const[f,p]of o)i.setAttribute(f,p);this.div.append(t),(c=a(this,Wh))==null||c.moveElementInDOM(this.div,t,i,!1)},uv=function(){if(!a(this,ca))return;const t=this.div;for(const[e,i]of a(this,ca)){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}a(this,ca).clear()};const Mf=/\r\n?|\n/g;var Ii,Vn,Xh,da,Gn,Ee,M1,I1,N1,Qf,nr,Jf,Zf,D1,hv,F1;const Zt=class Zt extends he{constructor(e){super({...e,name:"freeTextEditor"});E(this,Ee);E(this,Ii);E(this,Vn,"");E(this,Xh,`${this.id}-editor`);E(this,da,null);E(this,Gn);A(this,Ii,e.color||Zt._defaultColor||he._defaultLineColor),A(this,Gn,e.fontSize||Zt._defaultFontSize)}static get _keyboardManager(){const e=Zt.prototype,i=u=>u.isEmpty(),r=Ma.TRANSLATE_SMALL,o=Ma.TRANSLATE_BIG;return Ot(this,"_keyboardManager",new gd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(e,i){he.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case $t.FREETEXT_SIZE:Zt._defaultFontSize=i;break;case $t.FREETEXT_COLOR:Zt._defaultColor=i;break}}updateParams(e,i){switch(e){case $t.FREETEXT_SIZE:C(this,Ee,M1).call(this,i);break;case $t.FREETEXT_COLOR:C(this,Ee,I1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[$t.FREETEXT_SIZE,Zt._defaultFontSize],[$t.FREETEXT_COLOR,Zt._defaultColor||he._defaultLineColor]]}get propertiesToUpdate(){return[[$t.FREETEXT_SIZE,a(this,Gn)],[$t.FREETEXT_COLOR,a(this,Ii)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Zt._internalPadding*e,-(Zt._internalPadding+a(this,Gn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Lt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,da,new AbortController);const e=this._uiManager.combinedSignal(a(this,da));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Xh)),this._isDraggable=!0,(e=a(this,da))==null||e.abort(),A(this,da,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Vn),i=A(this,Vn,C(this,Ee,N1).call(this).trimEnd());if(e===i)return;const r=o=>{if(A(this,Vn,o),!o){this.remove();return}C(this,Ee,Zf).call(this),this._uiManager.rebuild(this),C(this,Ee,Qf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),C(this,Ee,Qf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Zt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Xh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,Gn)}px * var(--scale-factor))`,r.color=a(this,Ii),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),cp(this,this.div,["dblclick","keydown"]),this.width){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,v]=this.pageDimensions,[w,b]=this.pageTranslation;let _,x;switch(this.rotation){case 0:_=e+(c[0]-w)/m,x=i+this.height-(c[1]-b)/v;break;case 90:_=e+(c[0]-w)/m,x=i-(c[1]-b)/v,[f,p]=[p,-f];break;case 180:_=e-this.width+(c[0]-w)/m,x=i-(c[1]-b)/v,[f,p]=[-f,-p];break;case 270:_=e+(c[0]-w-this.height*v)/m,x=i+(c[1]-b-this.width*m)/v,[f,p]=[-p,f];break}this.setAt(_*o,x*u,f,p)}else this.setAt(e*o,i*u,this.width*o,this.height*u);C(this,Ee,Zf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,x,k;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=C(_=Zt,nr,hv).call(_,i.getData("text")||"").replaceAll(Mf,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!o.includes(`
`)){c.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=c,m=[],v=[];if(f.nodeType===Node.TEXT_NODE){const T=f.parentElement;if(v.push(f.nodeValue.slice(p).replaceAll(Mf,"")),T!==this.editorDiv){let M=m;for(const F of this.editorDiv.childNodes){if(F===T){M=v;continue}M.push(C(x=Zt,nr,Jf).call(x,F))}}m.push(f.nodeValue.slice(0,p).replaceAll(Mf,""))}else if(f===this.editorDiv){let T=m,M=0;for(const F of this.editorDiv.childNodes)M++===p&&(T=v),T.push(C(k=Zt,nr,Jf).call(k,F))}A(this,Vn,`${m.join(`
`)}${o}${v.join(`
`)}`),C(this,Ee,Zf).call(this);const w=new Range;let b=m.reduce((T,M)=>T+M.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const M=T.nodeValue.length;if(b<=M){w.setStart(T,b),w.setEnd(T,b);break}b-=M}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,r){var c;let o=null;if(e instanceof k1){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:v,id:w,popupRef:b},textContent:_,textPosition:x,parent:{page:{pageNumber:k}}}=e;if(!_||_.length===0)return null;o=e={annotationType:Lt.FREETEXT,color:Array.from(p),fontSize:f,value:_.join(`
`),position:x,pageIndex:k-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:b}}const u=await super.deserialize(e,i,r);return A(u,Gn,e.fontSize),A(u,Ii,yt.makeHexColor(...e.color)),A(u,Vn,C(c=Zt,nr,hv).call(c,e.value)),u.annotationElementId=e.id||null,u._initialData=o,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Zt._internalPadding*this.parentScale,r=this.getRect(i,i),o=he._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,Ii)),u={annotationType:Lt.FREETEXT,color:o,fontSize:a(this,Gn),value:C(this,Ee,D1).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!C(this,Ee,F1).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${a(this,Gn)}px * var(--scale-factor))`,r.color=a(this,Ii),i.replaceChildren();for(const u of a(this,Vn).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),i.append(c)}const o=Zt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:a(this,Vn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ii=new WeakMap,Vn=new WeakMap,Xh=new WeakMap,da=new WeakMap,Gn=new WeakMap,Ee=new WeakSet,M1=function(e){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-a(this,Gn))*this.parentScale),A(this,Gn,o),C(this,Ee,Qf).call(this)},r=a(this,Gn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},I1=function(e){const i=o=>{A(this,Ii,this.editorDiv.style.color=o)},r=a(this,Ii);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},N1=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(C(r=Zt,nr,Jf).call(r,o)),i=o);return e.join(`
`)},Qf=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,c=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},nr=new WeakSet,Jf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Mf,"")},Zf=function(){if(this.editorDiv.replaceChildren(),!!a(this,Vn))for(const e of a(this,Vn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},D1=function(){return a(this,Vn).replaceAll(" "," ")},hv=function(e){return e.replaceAll(" "," ")},F1=function(e){const{value:i,fontSize:r,color:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((c,f)=>c!==o[f])||e.pageIndex!==u},E(Zt,nr),Ct(Zt,"_freeTextDefaultContent",""),Ct(Zt,"_internalPadding",0),Ct(Zt,"_defaultColor",null),Ct(Zt,"_defaultFontSize",10),Ct(Zt,"_type","freetext"),Ct(Zt,"_editorType",Lt.FREETEXT);let cv=Zt;class ut{toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c]*r,u[c+1]=i+t[c+1]*o;return u}static _rescaleAndSwap(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c+1]*r,u[c+1]=i+t[c]*o;return u}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)r[o]=e+t[o],r[o+1]=i+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,o){switch(o){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,o,u){return[(t+5*i)/6,(e+5*r)/6,(5*i+o)/6,(5*r+u)/6,(i+o)/2,(r+u)/2]}}Ct(ut,"PRECISION",1e-4);var Wn,Ni,iu,su,as,Ft,fa,pa,Yh,Kh,ru,ou,Gr,Qh,Lp,Mp,Le,Lc,O1,$1,z1,H1,B1,j1;const Ts=class Ts{constructor({x:t,y:e},i,r,o,u,c=0){E(this,Le);E(this,Wn);E(this,Ni,[]);E(this,iu);E(this,su);E(this,as,[]);E(this,Ft,new Float32Array(18));E(this,fa);E(this,pa);E(this,Yh);E(this,Kh);E(this,ru);E(this,ou);E(this,Gr,[]);A(this,Wn,i),A(this,ou,o*r),A(this,su,u),a(this,Ft).set([NaN,NaN,NaN,NaN,t,e],6),A(this,iu,c),A(this,Kh,a(Ts,Qh)*r),A(this,Yh,a(Ts,Mp)*r),A(this,ru,r),a(this,Gr).push(t,e)}isEmpty(){return isNaN(a(this,Ft)[8])}add({x:t,y:e}){var nt;A(this,fa,t),A(this,pa,e);const[i,r,o,u]=a(this,Wn);let[c,f,p,m]=a(this,Ft).subarray(8,12);const v=t-p,w=e-m,b=Math.hypot(v,w);if(b<a(this,Yh))return!1;const _=b-a(this,Kh),x=_/b,k=x*v,T=x*w;let M=c,F=f;c=p,f=m,p+=k,m+=T,(nt=a(this,Gr))==null||nt.push(t,e);const N=-T/_,j=k/_,V=N*a(this,ou),U=j*a(this,ou);return a(this,Ft).set(a(this,Ft).subarray(2,8),0),a(this,Ft).set([p+V,m+U],4),a(this,Ft).set(a(this,Ft).subarray(14,18),12),a(this,Ft).set([p-V,m-U],16),isNaN(a(this,Ft)[6])?(a(this,as).length===0&&(a(this,Ft).set([c+V,f+U],2),a(this,as).push(NaN,NaN,NaN,NaN,(c+V-i)/o,(f+U-r)/u),a(this,Ft).set([c-V,f-U],14),a(this,Ni).push(NaN,NaN,NaN,NaN,(c-V-i)/o,(f-U-r)/u)),a(this,Ft).set([M,F,c,f,p,m],6),!this.isEmpty()):(a(this,Ft).set([M,F,c,f,p,m],6),Math.abs(Math.atan2(F-f,M-c)-Math.atan2(T,k))<Math.PI/2?([c,f,p,m]=a(this,Ft).subarray(2,6),a(this,as).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/o,((f+m)/2-r)/u),[c,f,M,F]=a(this,Ft).subarray(14,18),a(this,Ni).push(NaN,NaN,NaN,NaN,((M+c)/2-i)/o,((F+f)/2-r)/u),!0):([M,F,c,f,p,m]=a(this,Ft).subarray(0,6),a(this,as).push(((M+5*c)/6-i)/o,((F+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),[p,m,c,f,M,F]=a(this,Ft).subarray(12,18),a(this,Ni).push(((M+5*c)/6-i)/o,((F+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,as),e=a(this,Ni);if(isNaN(a(this,Ft)[6])&&!this.isEmpty())return C(this,Le,O1).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);C(this,Le,z1).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return C(this,Le,$1).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,o,u){return new U1(t,e,i,r,o,u)}getOutlines(){var v;const t=a(this,as),e=a(this,Ni),i=a(this,Ft),[r,o,u,c]=a(this,Wn),f=new Float32Array((((v=a(this,Gr))==null?void 0:v.length)??0)+2);for(let w=0,b=f.length-2;w<b;w+=2)f[w]=(a(this,Gr)[w]-r)/u,f[w+1]=(a(this,Gr)[w+1]-o)/c;if(f[f.length-2]=(a(this,fa)-r)/u,f[f.length-1]=(a(this,pa)-o)/c,isNaN(i[6])&&!this.isEmpty())return C(this,Le,H1).call(this,f);const p=new Float32Array(a(this,as).length+24+a(this,Ni).length);let m=t.length;for(let w=0;w<m;w+=2){if(isNaN(t[w])){p[w]=p[w+1]=NaN;continue}p[w]=t[w],p[w+1]=t[w+1]}m=C(this,Le,j1).call(this,p,m);for(let w=e.length-6;w>=6;w-=6)for(let b=0;b<6;b+=2){if(isNaN(e[w+b])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[w+b],p[m+1]=e[w+b+1],m+=2}return C(this,Le,B1).call(this,p,m),this.newFreeDrawOutline(p,f,a(this,Wn),a(this,ru),a(this,iu),a(this,su))}};Wn=new WeakMap,Ni=new WeakMap,iu=new WeakMap,su=new WeakMap,as=new WeakMap,Ft=new WeakMap,fa=new WeakMap,pa=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,ru=new WeakMap,ou=new WeakMap,Gr=new WeakMap,Qh=new WeakMap,Lp=new WeakMap,Mp=new WeakMap,Le=new WeakSet,Lc=function(){const t=a(this,Ft).subarray(4,6),e=a(this,Ft).subarray(16,18),[i,r,o,u]=a(this,Wn);return[(a(this,fa)+(t[0]-e[0])/2-i)/o,(a(this,pa)+(t[1]-e[1])/2-r)/u,(a(this,fa)+(e[0]-t[0])/2-i)/o,(a(this,pa)+(e[1]-t[1])/2-r)/u]},O1=function(){const[t,e,i,r]=a(this,Wn),[o,u,c,f]=C(this,Le,Lc).call(this);return`M${(a(this,Ft)[2]-t)/i} ${(a(this,Ft)[3]-e)/r} L${(a(this,Ft)[4]-t)/i} ${(a(this,Ft)[5]-e)/r} L${o} ${u} L${c} ${f} L${(a(this,Ft)[16]-t)/i} ${(a(this,Ft)[17]-e)/r} L${(a(this,Ft)[14]-t)/i} ${(a(this,Ft)[15]-e)/r} Z`},$1=function(t){const e=a(this,Ni);t.push(`L${e[4]} ${e[5]} Z`)},z1=function(t){const[e,i,r,o]=a(this,Wn),u=a(this,Ft).subarray(4,6),c=a(this,Ft).subarray(16,18),[f,p,m,v]=C(this,Le,Lc).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-i)/o} L${f} ${p} L${m} ${v} L${(c[0]-e)/r} ${(c[1]-i)/o}`)},H1=function(t){const e=a(this,Ft),[i,r,o,u]=a(this,Wn),[c,f,p,m]=C(this,Le,Lc).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-r)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-r)/u],0),this.newFreeDrawOutline(v,t,a(this,Wn),a(this,ru),a(this,iu),a(this,su))},B1=function(t,e){const i=a(this,Ni);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},j1=function(t,e){const i=a(this,Ft).subarray(4,6),r=a(this,Ft).subarray(16,18),[o,u,c,f]=a(this,Wn),[p,m,v,w]=C(this,Le,Lc).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/c,(i[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-u)/f],e),e+=24},E(Ts,Qh,8),E(Ts,Lp,2),E(Ts,Mp,a(Ts,Qh)+a(Ts,Lp));let fp=Ts;var au,ga,qs,Jh,qn,Zh,ye,Ip,V1;class U1 extends ut{constructor(e,i,r,o,u,c){super();E(this,Ip);E(this,au);E(this,ga,new Float32Array(4));E(this,qs);E(this,Jh);E(this,qn);E(this,Zh);E(this,ye);A(this,ye,e),A(this,qn,i),A(this,au,r),A(this,Zh,o),A(this,qs,u),A(this,Jh,c),this.lastPoint=[NaN,NaN],C(this,Ip,V1).call(this,c);const[f,p,m,v]=a(this,ga);for(let w=0,b=e.length;w<b;w+=2)e[w]=(e[w]-f)/m,e[w+1]=(e[w+1]-p)/v;for(let w=0,b=i.length;w<b;w+=2)i[w]=(i[w]-f)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const e=[`M${a(this,ye)[4]} ${a(this,ye)[5]}`];for(let i=6,r=a(this,ye).length;i<r;i+=6){if(isNaN(a(this,ye)[i])){e.push(`L${a(this,ye)[i+4]} ${a(this,ye)[i+5]}`);continue}e.push(`C${a(this,ye)[i]} ${a(this,ye)[i+1]} ${a(this,ye)[i+2]} ${a(this,ye)[i+3]} ${a(this,ye)[i+4]} ${a(this,ye)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,o],u){const c=r-e,f=o-i;let p,m;switch(u){case 0:p=ut._rescale(a(this,ye),e,o,c,-f),m=ut._rescale(a(this,qn),e,o,c,-f);break;case 90:p=ut._rescaleAndSwap(a(this,ye),e,i,c,f),m=ut._rescaleAndSwap(a(this,qn),e,i,c,f);break;case 180:p=ut._rescale(a(this,ye),r,i,-c,f),m=ut._rescale(a(this,qn),r,i,-c,f);break;case 270:p=ut._rescaleAndSwap(a(this,ye),r,o,-c,-f),m=ut._rescaleAndSwap(a(this,qn),r,o,-c,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return a(this,ga)}newOutliner(e,i,r,o,u,c=0){return new fp(e,i,r,o,u,c)}getNewOutline(e,i){const[r,o,u,c]=a(this,ga),[f,p,m,v]=a(this,au),w=u*m,b=c*v,_=r*m+f,x=o*v+p,k=this.newOutliner({x:a(this,qn)[0]*w+_,y:a(this,qn)[1]*b+x},a(this,au),a(this,Zh),e,a(this,Jh),i??a(this,qs));for(let T=2;T<a(this,qn).length;T+=2)k.add({x:a(this,qn)[T]*w+_,y:a(this,qn)[T+1]*b+x});return k.getOutlines()}}au=new WeakMap,ga=new WeakMap,qs=new WeakMap,Jh=new WeakMap,qn=new WeakMap,Zh=new WeakMap,ye=new WeakMap,Ip=new WeakSet,V1=function(e){const i=a(this,ye);let r=i[4],o=i[5],u=r,c=o,f=r,p=o,m=r,v=o;const w=e?Math.max:Math.min;for(let _=6,x=i.length;_<x;_+=6){if(isNaN(i[_]))u=Math.min(u,i[_+4]),c=Math.min(c,i[_+5]),f=Math.max(f,i[_+4]),p=Math.max(p,i[_+5]),v<i[_+5]?(m=i[_+4],v=i[_+5]):v===i[_+5]&&(m=w(m,i[_+4]));else{const k=yt.bezierBoundingBox(r,o,...i.slice(_,_+6));u=Math.min(u,k[0]),c=Math.min(c,k[1]),f=Math.max(f,k[2]),p=Math.max(p,k[3]),v<k[3]?(m=k[2],v=k[3]):v===k[3]&&(m=w(m,k[2]))}r=i[_+4],o=i[_+5]}const b=a(this,ga);b[0]=u-a(this,qs),b[1]=c-a(this,qs),b[2]=f-u+2*a(this,qs),b[3]=p-c+2*a(this,qs),this.lastPoint=[m,v]};var td,ed,Wr,Di,bn,G1,tp,W1,q1,fv;class dv{constructor(t,e=0,i=0,r=!0){E(this,bn);E(this,td);E(this,ed);E(this,Wr,[]);E(this,Di,[]);let o=1/0,u=-1/0,c=1/0,f=-1/0;const p=10**-4;for(const{x:k,y:T,width:M,height:F}of t){const N=Math.floor((k-e)/p)*p,j=Math.ceil((k+M+e)/p)*p,V=Math.floor((T-e)/p)*p,U=Math.ceil((T+F+e)/p)*p,Q=[N,V,U,!0],nt=[j,V,U,!1];a(this,Wr).push(Q,nt),o=Math.min(o,N),u=Math.max(u,j),c=Math.min(c,V),f=Math.max(f,U)}const m=u-o+2*i,v=f-c+2*i,w=o-i,b=c-i,_=a(this,Wr).at(r?-1:-2),x=[_[0],_[2]];for(const k of a(this,Wr)){const[T,M,F]=k;k[0]=(T-w)/m,k[1]=(M-b)/v,k[2]=(F-b)/v}A(this,td,new Float32Array([w,b,m,v])),A(this,ed,x)}getOutlines(){a(this,Wr).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,Wr))e[3]?(t.push(...C(this,bn,fv).call(this,e)),C(this,bn,W1).call(this,e)):(C(this,bn,q1).call(this,e),t.push(...C(this,bn,fv).call(this,e)));return C(this,bn,G1).call(this,t)}}td=new WeakMap,ed=new WeakMap,Wr=new WeakMap,Di=new WeakMap,bn=new WeakSet,G1=function(t){const e=[],i=new Set;for(const u of t){const[c,f,p]=u;e.push([c,f,u],[c,p,u])}e.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=e.length;u<c;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const r=[];let o;for(;i.size>0;){const u=i.values().next().value;let[c,f,p,m,v]=u;i.delete(u);let w=c,b=f;for(o=[c,p],r.push(o);;){let _;if(i.has(m))_=m;else if(i.has(v))_=v;else break;i.delete(_),[c,f,p,m,v]=_,w!==c&&(o.push(w,b,c,b===f?f:p),w=c),b=b===f?p:f}o.push(w,b)}return new ET(r,a(this,td),a(this,ed))},tp=function(t){const e=a(this,Di);let i=0,r=e.length-1;for(;i<=r;){const o=i+r>>1,u=e[o][0];if(u===t)return o;u<t?i=o+1:r=o-1}return r+1},W1=function([,t,e]){const i=C(this,bn,tp).call(this,t);a(this,Di).splice(i,0,[t,e])},q1=function([,t,e]){const i=C(this,bn,tp).call(this,t);for(let r=i;r<a(this,Di).length;r++){const[o,u]=a(this,Di)[r];if(o!==t)break;if(o===t&&u===e){a(this,Di).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,u]=a(this,Di)[r];if(o!==t)break;if(o===t&&u===e){a(this,Di).splice(r,1);return}}},fv=function(t){const[e,i,r]=t,o=[[e,i,r]],u=C(this,bn,tp).call(this,r);for(let c=0;c<u;c++){const[f,p]=a(this,Di)[c];for(let m=0,v=o.length;m<v;m++){const[,w,b]=o[m];if(!(p<=w||b<=f)){if(w>=f){if(b>p)o[m][1]=p;else{if(v===1)return[];o.splice(m,1),m--,v--}continue}o[m][2]=f,b>p&&o.push([e,p,b])}}}return o};var nd,lu;class ET extends ut{constructor(e,i,r){super();E(this,nd);E(this,lu);A(this,lu,e),A(this,nd,i),this.lastPoint=r}toSVGPath(){const e=[];for(const i of a(this,lu)){let[r,o]=i;e.push(`M${r} ${o}`);for(let u=2;u<i.length;u+=2){const c=i[u],f=i[u+1];c===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,i,r,o],u){const c=[],f=r-e,p=o-i;for(const m of a(this,lu)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=e+m[w]*f,v[w+1]=o-m[w+1]*p;c.push(v)}return c}get box(){return a(this,nd)}get classNamesForOutlining(){return["highlightOutline"]}}nd=new WeakMap,lu=new WeakMap;class pv extends fp{newFreeDrawOutline(t,e,i,r,o,u){return new CT(t,e,i,r,o,u)}}class CT extends U1{newOutliner(t,e,i,r,o,u=0){return new pv(t,e,i,r,o,u)}}var Fi,ma,uu,Re,id,cu,sd,rd,qr,Oi,hu,od,Yt,gv,mv,yv,So,X1,Er;const Ln=class Ln{constructor({editor:t=null,uiManager:e=null}){E(this,Yt);E(this,Fi,null);E(this,ma,null);E(this,uu);E(this,Re,null);E(this,id,!1);E(this,cu,!1);E(this,sd,null);E(this,rd);E(this,qr,null);E(this,Oi,null);E(this,hu);var i;t?(A(this,cu,!1),A(this,hu,$t.HIGHLIGHT_COLOR),A(this,sd,t)):(A(this,cu,!0),A(this,hu,$t.HIGHLIGHT_DEFAULT_COLOR)),A(this,Oi,(t==null?void 0:t._uiManager)||e),A(this,rd,a(this,Oi)._eventBus),A(this,uu,(t==null?void 0:t.color)||((i=a(this,Oi))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(Ln,od)||A(Ln,od,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ot(this,"_keyboardManager",new gd([[["Escape","mac+Escape"],Ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ln.prototype._moveToPrevious],[["Home","mac+Home"],Ln.prototype._moveToBeginning],[["End","mac+End"],Ln.prototype._moveToEnd]]))}renderButton(){const t=A(this,Fi,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Oi)._signal;t.addEventListener("click",C(this,Yt,So).bind(this),{signal:e}),t.addEventListener("keydown",C(this,Yt,yv).bind(this),{signal:e});const i=A(this,ma,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,uu),t.append(i),t}renderMainDropdown(){const t=A(this,Re,C(this,Yt,gv).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,Fi)){C(this,Yt,So).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,Yt,mv).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Yt,Er)){C(this,Yt,So).call(this,t);return}if(t.target===a(this,Fi)){(e=a(this,Re).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Re))==null?void 0:e.firstChild)||t.target===a(this,Fi)){a(this,Yt,Er)&&this._hideDropdownFromKeyboard();return}a(this,Yt,Er)||C(this,Yt,So).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Yt,Er)){C(this,Yt,So).call(this,t);return}(e=a(this,Re).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Yt,Er)){C(this,Yt,So).call(this,t);return}(e=a(this,Re).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Re))==null||t.classList.add("hidden"),(e=a(this,qr))==null||e.abort(),A(this,qr,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,cu)){if(!a(this,Yt,Er)){(t=a(this,sd))==null||t.unselect();return}this.hideDropdown(),a(this,Fi).focus({preventScroll:!0,focusVisible:a(this,id)})}}updateColor(t){if(a(this,ma)&&(a(this,ma).style.backgroundColor=t),!a(this,Re))return;const e=a(this,Oi).highlightColors.values();for(const i of a(this,Re).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,Fi))==null||t.remove(),A(this,Fi,null),A(this,ma,null),(e=a(this,Re))==null||e.remove(),A(this,Re,null)}};Fi=new WeakMap,ma=new WeakMap,uu=new WeakMap,Re=new WeakMap,id=new WeakMap,cu=new WeakMap,sd=new WeakMap,rd=new WeakMap,qr=new WeakMap,Oi=new WeakMap,hu=new WeakMap,od=new WeakMap,Yt=new WeakSet,gv=function(){const t=document.createElement("div"),e=a(this,Oi)._signal;t.addEventListener("contextmenu",Bi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of a(this,Oi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",a(Ln,od)[i]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=r,o.setAttribute("aria-selected",r===a(this,uu)),o.addEventListener("click",C(this,Yt,mv).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",C(this,Yt,yv).bind(this),{signal:e}),t},mv=function(t,e){e.stopPropagation(),a(this,rd).dispatch("switchannotationeditorparams",{source:this,type:a(this,hu),value:t})},yv=function(t){Ln._keyboardManager.exec(this,t)},So=function(t){if(a(this,Yt,Er)){this.hideDropdown();return}if(A(this,id,t.detail===0),a(this,qr)||(A(this,qr,new AbortController),window.addEventListener("pointerdown",C(this,Yt,X1).bind(this),{signal:a(this,Oi).combinedSignal(a(this,qr))})),a(this,Re)){a(this,Re).classList.remove("hidden");return}const e=A(this,Re,C(this,Yt,gv).call(this));a(this,Fi).append(e)},X1=function(t){var e;(e=a(this,Re))!=null&&e.contains(t.target)||this.hideDropdown()},Er=function(){return a(this,Re)&&!a(this,Re).classList.contains("hidden")},E(Ln,od,null);let pp=Ln;var du,ad,Xs,ya,fu,Nn,ld,ud,va,di,Xn,We,pu,Ys,on,gu,fi,cd,Rt,vv,ep,Y1,K1,Q1,wv,_o,yi,ml,J1,np,Mc,Z1,t_,e_,n_,i_;const Vt=class Vt extends he{constructor(e){super({...e,name:"highlightEditor"});E(this,Rt);E(this,du,null);E(this,ad,0);E(this,Xs);E(this,ya,null);E(this,fu,null);E(this,Nn,null);E(this,ld,null);E(this,ud,0);E(this,va,null);E(this,di,null);E(this,Xn,null);E(this,We,!1);E(this,pu,null);E(this,Ys);E(this,on,null);E(this,gu,"");E(this,fi);E(this,cd,"");this.color=e.color||Vt._defaultColor,A(this,fi,e.thickness||Vt._defaultThickness),A(this,Ys,e.opacity||Vt._defaultOpacity),A(this,Xs,e.boxes||null),A(this,cd,e.methodOfCreation||""),A(this,gu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(A(this,We,!0),C(this,Rt,ep).call(this,e),C(this,Rt,_o).call(this)):a(this,Xs)&&(A(this,du,e.anchorNode),A(this,ad,e.anchorOffset),A(this,ld,e.focusNode),A(this,ud,e.focusOffset),C(this,Rt,vv).call(this),C(this,Rt,_o).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Vt.prototype;return Ot(this,"_keyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,We)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,fi),methodOfCreation:a(this,cd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;he.initialize(e,i),Vt._defaultColor||(Vt._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case $t.HIGHLIGHT_DEFAULT_COLOR:Vt._defaultColor=i;break;case $t.HIGHLIGHT_THICKNESS:Vt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,pu)}updateParams(e,i){switch(e){case $t.HIGHLIGHT_COLOR:C(this,Rt,Y1).call(this,i);break;case $t.HIGHLIGHT_THICKNESS:C(this,Rt,K1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[$t.HIGHLIGHT_DEFAULT_COLOR,Vt._defaultColor],[$t.HIGHLIGHT_THICKNESS,Vt._defaultThickness]]}get propertiesToUpdate(){return[[$t.HIGHLIGHT_COLOR,this.color||Vt._defaultColor],[$t.HIGHLIGHT_THICKNESS,a(this,fi)||Vt._defaultThickness],[$t.HIGHLIGHT_FREE,a(this,We)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(A(this,fu,new pp({editor:this})),e.addColorPicker(a(this,fu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Rt,Mc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,C(this,Rt,Mc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,Rt,wv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Rt,_o).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?C(this,Rt,wv).call(this):e&&(C(this,Rt,_o).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var o,u,c;const{drawLayer:i}=this.parent;let r;a(this,We)?(e=(e-this.rotation+360)%360,r=C(o=Vt,yi,ml).call(o,a(this,di).box,e)):r=C(u=Vt,yi,ml).call(u,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,Xn),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(a(this,on),{bbox:C(c=Vt,yi,ml).call(c,a(this,Nn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,gu)&&(e.setAttribute("aria-label",a(this,gu)),e.setAttribute("role","mark")),a(this,We)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,Rt,J1).bind(this),{signal:this._uiManager._signal});const i=A(this,va,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,ya);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),cp(this,a(this,va),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,on),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,on),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,Rt,np).call(this,!0);break;case 1:case 3:C(this,Rt,np).call(this,!1);break}}select(){var e;super.select(),a(this,on)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,on),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,on)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,on),{rootClass:{selected:!1}}),a(this,We)||C(this,Rt,np).call(this,!1))}get _mustFixPosition(){return!a(this,We)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Xn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,on),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:o,y:u}){const{x:c,y:f,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=e.combinedSignal(v),b=_=>{v.abort(),C(this,yi,n_).call(this,e,_)};window.addEventListener("blur",b,{signal:w}),window.addEventListener("pointerup",b,{signal:w}),window.addEventListener("pointerdown",ti,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Bi,{signal:w}),r.addEventListener("pointermove",C(this,yi,e_).bind(this,e),{signal:w}),this._freeHighlight=new pv({x:o,y:u},[c,f,p,m],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var x,k,T,M;let o=null;if(e instanceof P1){const{data:{quadPoints:F,rect:N,rotation:j,id:V,color:U,opacity:Q,popupRef:nt},parent:{page:{pageNumber:At}}}=e;o=e={annotationType:Lt.HIGHLIGHT,color:Array.from(U),opacity:Q,quadPoints:F,boxes:null,pageIndex:At-1,rect:N.slice(0),rotation:j,id:V,deleted:!1,popupRef:nt}}else if(e instanceof Jv){const{data:{inkLists:F,rect:N,rotation:j,id:V,color:U,borderStyle:{rawWidth:Q},popupRef:nt},parent:{page:{pageNumber:At}}}=e;o=e={annotationType:Lt.HIGHLIGHT,color:Array.from(U),thickness:Q,inkLists:F,boxes:null,pageIndex:At-1,rect:N.slice(0),rotation:j,id:V,deleted:!1,popupRef:nt}}const{color:u,quadPoints:c,inkLists:f,opacity:p}=e,m=await super.deserialize(e,i,r);m.color=yt.makeHexColor(...u),A(m,Ys,p||1),f&&A(m,fi,e.thickness),m.annotationElementId=e.id||null,m._initialData=o;const[v,w]=m.pageDimensions,[b,_]=m.pageTranslation;if(c){const F=A(m,Xs,[]);for(let N=0;N<c.length;N+=8)F.push({x:(c[N]-b)/v,y:1-(c[N+1]-_)/w,width:(c[N+2]-c[N])/v,height:(c[N+1]-c[N+5])/w});C(x=m,Rt,vv).call(x),C(k=m,Rt,_o).call(k),m.rotate(m.rotation)}else if(f){A(m,We,!0);const F=f[0],N={x:F[0]-b,y:w-(F[1]-_)},j=new pv(N,[0,0,v,w],1,a(m,fi)/2,!0,.001);for(let Q=0,nt=F.length;Q<nt;Q+=2)N.x=F[Q]-b,N.y=w-(F[Q+1]-_),j.add(N);const{id:V,clipPathId:U}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);C(T=m,Rt,ep).call(T,{highlightOutlines:j.getOutlines(),highlightId:V,clipPathId:U}),C(M=m,Rt,_o).call(M)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=he._colorManager.convert(this.color),o={annotationType:Lt.HIGHLIGHT,color:r,opacity:a(this,Ys),thickness:a(this,fi),quadPoints:C(this,Rt,Z1).call(this),outlines:C(this,Rt,t_).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:C(this,Rt,Mc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!C(this,Rt,i_).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};du=new WeakMap,ad=new WeakMap,Xs=new WeakMap,ya=new WeakMap,fu=new WeakMap,Nn=new WeakMap,ld=new WeakMap,ud=new WeakMap,va=new WeakMap,di=new WeakMap,Xn=new WeakMap,We=new WeakMap,pu=new WeakMap,Ys=new WeakMap,on=new WeakMap,gu=new WeakMap,fi=new WeakMap,cd=new WeakMap,Rt=new WeakSet,vv=function(){const e=new dv(a(this,Xs),.001);A(this,di,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,di).box;const i=new dv(a(this,Xs),.0025,.001,this._uiManager.direction==="ltr");A(this,Nn,i.getOutlines());const{lastPoint:r}=a(this,Nn);A(this,pu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},ep=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var v,w;if(A(this,di,e),A(this,Nn,e.getNewOutline(a(this,fi)/2+1.5,.0025)),i>=0)A(this,Xn,i),A(this,ya,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,on,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Nn).box,path:{d:a(this,Nn).toSVGPath()}},!0));else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Xn),{bbox:C(v=Vt,yi,ml).call(v,a(this,di).box,(b-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,on),{bbox:C(w=Vt,yi,ml).call(w,a(this,Nn).box,b),path:{d:a(this,Nn).toSVGPath()}})}const[u,c,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=f,this.height=p;break;case 90:{const[b,_]=this.parentDimensions;this.x=c,this.y=1-u,this.width=f*_/b,this.height=p*b/_;break}case 180:this.x=1-u,this.y=1-c,this.width=f,this.height=p;break;case 270:{const[b,_]=this.parentDimensions;this.x=1-c,this.y=u,this.width=f*_/b,this.height=p*b/_;break}}const{lastPoint:m}=a(this,Nn);A(this,pu,[(m[0]-u)/f,(m[1]-c)/p])},Y1=function(e){const i=(u,c)=>{var f,p;this.color=u,A(this,Ys,c),(f=this.parent)==null||f.drawLayer.updateProperties(a(this,Xn),{root:{fill:u,"fill-opacity":c}}),(p=a(this,fu))==null||p.updateColor(u)},r=this.color,o=a(this,Ys);this.addCommands({cmd:i.bind(this,e,Vt._defaultOpacity),undo:i.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},K1=function(e){const i=a(this,fi),r=o=>{A(this,fi,o),C(this,Rt,Q1).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Q1=function(e){if(!a(this,We))return;C(this,Rt,ep).call(this,{highlightOutlines:a(this,di).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},wv=function(){a(this,Xn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Xn)),A(this,Xn,null),this.parent.drawLayer.remove(a(this,on)),A(this,on,null))},_o=function(e=this.parent){a(this,Xn)===null&&({id:fn(this,Xn)._,clipPathId:fn(this,ya)._}=e.drawLayer.draw({bbox:a(this,di).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Ys)},rootClass:{highlight:!0,free:a(this,We)},path:{d:a(this,di).toSVGPath()}},!1,!0),A(this,on,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,We)},bbox:a(this,Nn).box,path:{d:a(this,Nn).toSVGPath()}},a(this,We))),a(this,va)&&(a(this,va).style.clipPath=a(this,ya)))},yi=new WeakSet,ml=function([e,i,r,o],u){switch(u){case 90:return[1-i-o,e,o,r];case 180:return[1-e-r,1-i-o,r,o];case 270:return[i,1-e-r,o,r]}return[e,i,r,o]},J1=function(e){Vt._keyboardManager.exec(this,e)},np=function(e){if(!a(this,du))return;const i=window.getSelection();e?i.setPosition(a(this,du),a(this,ad)):i.setPosition(a(this,ld),a(this,ud))},Mc=function(){return a(this,We)?this.rotation:0},Z1=function(){if(a(this,We))return null;const[e,i]=this.pageDimensions,[r,o]=this.pageTranslation,u=a(this,Xs),c=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:v,height:w}of u){const b=p*e+r,_=(1-m)*i+o;c[f]=c[f+4]=b,c[f+1]=c[f+3]=_,c[f+2]=c[f+6]=b+v*e,c[f+5]=c[f+7]=_-w*i,f+=8}return c},t_=function(e){return a(this,di).serialize(e,C(this,Rt,Mc).call(this))},e_=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},n_=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},i_=function(e){const{color:i}=this._initialData;return e.color.some((r,o)=>r!==i[o])},E(Vt,yi),Ct(Vt,"_defaultColor",null),Ct(Vt,"_defaultOpacity",1),Ct(Vt,"_defaultThickness",12),Ct(Vt,"_type","highlight"),Ct(Vt,"_editorType",Lt.HIGHLIGHT),Ct(Vt,"_freeHighlightId",-1),Ct(Vt,"_freeHighlight",null),Ct(Vt,"_freeHighlightClipId","");let gp=Vt;var wa;class xT{constructor(){E(this,wa,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,wa)[t]=e}toSVGProperties(){const t=a(this,wa);return A(this,wa,Object.create(null)),{root:t}}reset(){A(this,wa,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}wa=new WeakMap;var Yn,mu,$e,Aa,ba,Xr,Yr,Kr,Sa,Ht,bv,Sv,_v,Ic,s_,ip,Nc,yl;const ct=class ct extends he{constructor(e){super(e);E(this,Ht);E(this,Yn,null);E(this,mu);Ct(this,"_drawId",null);A(this,mu,e.mustBeCommitted||!1),e.drawOutlines&&(C(this,Ht,bv).call(this,e),C(this,Ht,Ic).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[o,u]of Object.entries(i))r.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(a(ct,$e).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,i[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,i[o]]);return e}_updateProperty(e,i,r){const o=this._drawingOptions,u=o[i],c=f=>{var m;o.updateProperty(i,f);const p=a(this,Yn).updateProperty(i,f);p&&C(this,Ht,Nc).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(a(this,Yn).getPathResizingSVGProperties(C(this,Ht,ip).call(this)),{bbox:C(this,Ht,yl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(a(this,Yn).getPathResizedSVGProperties(C(this,Ht,ip).call(this)),{bbox:C(this,Ht,yl).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,Ht,yl).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties(a(this,Yn).getPathTranslatedSVGProperties(C(this,Ht,ip).call(this),this.parentDimensions),{bbox:C(this,Ht,yl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,mu)&&(A(this,mu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,Ht,_v).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Ht,Ic).call(this),C(this,Ht,Nc).call(this,a(this,Yn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,Ht,_v).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,Ht,Ic).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ct._mergeSVGProperties({bbox:C(this,Ht,yl).call(this)},a(this,Yn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Ht,Nc).call(this,a(this,Yn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,r,o,u){Qt("Not implemented")}static startDrawing(e,i,r,o){var k;const{target:u,offsetX:c,offsetY:f,pointerId:p,pointerType:m}=o;if(a(ct,Yr)&&a(ct,Yr)!==m)return;const{viewport:{rotation:v}}=e,{width:w,height:b}=u.getBoundingClientRect(),_=A(ct,Aa,new AbortController),x=e.combinedSignal(_);if(a(ct,Xr)||A(ct,Xr,p),a(ct,Yr)??A(ct,Yr,m),window.addEventListener("pointerup",T=>{var M;a(ct,Xr)===T.pointerId?this._endDraw(T):(M=a(ct,Kr))==null||M.delete(T.pointerId)},{signal:x}),window.addEventListener("pointercancel",T=>{var M;a(ct,Xr)===T.pointerId?this._currentParent.endDrawingSession():(M=a(ct,Kr))==null||M.delete(T.pointerId)},{signal:x}),window.addEventListener("pointerdown",T=>{a(ct,Yr)===T.pointerType&&((a(ct,Kr)||A(ct,Kr,new Set)).add(T.pointerId),a(ct,$e).isCancellable()&&(a(ct,$e).removeLastElement(),a(ct,$e).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Bi,{signal:x}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),u.addEventListener("touchmove",T=>{T.timeStamp===a(ct,Sa)&&ti(T)},{signal:x}),e.toggleDrawing(),(k=i._editorUndoBar)==null||k.hide(),a(ct,$e)){e.drawLayer.updateProperties(this._currentDrawId,a(ct,$e).startNew(c,f,w,b,v));return}i.updateUIForDefaultProperties(this),A(ct,$e,this.createDrawerInstance(c,f,w,b,v)),A(ct,ba,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(ct,ba).toSVGProperties(),a(ct,$e).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(ct,Sa,-1),!a(ct,$e))return;const{offsetX:i,offsetY:r,pointerId:o}=e;if(a(ct,Xr)===o){if(((u=a(ct,Kr))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(ct,$e).add(i,r)),A(ct,Sa,e.timeStamp),ti(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(ct,$e,null),A(ct,ba,null),A(ct,Yr,null),A(ct,Sa,NaN)),a(ct,Aa)&&(a(ct,Aa).abort(),A(ct,Aa,null),A(ct,Xr,NaN),A(ct,Kr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,a(ct,$e).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(ct,$e),o=this._currentDrawId,u=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(o,r.setLastElement(u))},undo:()=>{i.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:$t.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack($t.DRAW_STEP),!a(ct,$e).isEmpty()){const{pageDimensions:[r,o],scale:u}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(ct,$e).getOutlines(r*u,o*u,u,this._INNER_MARGIN),drawingOptions:a(ct,ba),mustBeCommitted:!e});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,o,u,c){Qt("Not implemented")}static async deserialize(e,i,r){var v,w;const{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}=i.viewport,p=this.deserializeDraw(c,f,o,u,this._INNER_MARGIN,e),m=await super.deserialize(e,i,r);return m.createDrawingOptions(e),C(v=m,Ht,bv).call(v,{drawOutlines:p}),C(w=m,Ht,Ic).call(w),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[i,r]=this.pageTranslation,[o,u]=this.pageDimensions;return a(this,Yn).serialize([i,r,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Yn=new WeakMap,mu=new WeakMap,$e=new WeakMap,Aa=new WeakMap,ba=new WeakMap,Xr=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Sa=new WeakMap,Ht=new WeakSet,bv=function({drawOutlines:e,drawId:i,drawingOptions:r}){A(this,Yn,e),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=C(this,Ht,Sv).call(this,e,this.parent),C(this,Ht,Nc).call(this,e.box)},Sv=function(e,i){const{id:r}=i.drawLayer.draw(ct._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},_v=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ic=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Ht,Sv).call(this,a(this,Yn),e)}},s_=function([e,i,r,o]){const{parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[i,1-e,r*(c/u),o*(u/c)];case 180:return[1-e,1-i,r,o];case 270:return[1-i,e,r*(c/u),o*(u/c)];default:return[e,i,r,o]}},ip=function(){const{x:e,y:i,width:r,height:o,parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[1-i,e,r*(u/c),o*(c/u)];case 180:return[1-e,1-i,r,o];case 270:return[i,1-e,r*(u/c),o*(c/u)];default:return[e,i,r,o]}},Nc=function(e){if([this.x,this.y,this.width,this.height]=C(this,Ht,s_).call(this,e),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},yl=function(){const{x:e,y:i,width:r,height:o,rotation:u,parentRotation:c,parentDimensions:[f,p]}=this;switch((u*4+c)/90){case 1:return[1-i-o,e,o,r];case 2:return[1-e-r,1-i-o,r,o];case 3:return[i,1-e-r,o,r];case 4:return[e,i-r*(f/p),o*(p/f),r*(f/p)];case 5:return[1-i,e,r*(f/p),o*(p/f)];case 6:return[1-e-o*(p/f),1-i,o*(p/f),r*(f/p)];case 7:return[i-r*(f/p),1-e-o*(p/f),r*(f/p),o*(p/f)];case 8:return[e-r,i-o,r,o];case 9:return[1-i,e-r,o,r];case 10:return[1-e,1-i,r,o];case 11:return[i-o,1-e,o,r];case 12:return[e-o*(p/f),i,o*(p/f),r*(f/p)];case 13:return[1-i-r*(f/p),e-o*(p/f),r*(f/p),o*(p/f)];case 14:return[1-e,1-i-r*(f/p),o*(p/f),r*(f/p)];case 15:return[i,1-e,r*(f/p),o*(p/f)];default:return[e,i,r,o]}},Ct(ct,"_currentDrawId",-1),Ct(ct,"_currentParent",null),E(ct,$e,null),E(ct,Aa,null),E(ct,ba,null),E(ct,Xr,NaN),E(ct,Yr,null),E(ct,Kr,null),E(ct,Sa,NaN),Ct(ct,"_INNER_MARGIN",3);let Av=ct;var ls,ze,He,_a,yu,mn,qe,pi,Ea,Ca,xa,vu,sp;class kT{constructor(t,e,i,r,o,u){E(this,vu);E(this,ls,new Float64Array(6));E(this,ze);E(this,He);E(this,_a);E(this,yu);E(this,mn);E(this,qe,"");E(this,pi,0);E(this,Ea,new mp);E(this,Ca);E(this,xa);A(this,Ca,i),A(this,xa,r),A(this,_a,o),A(this,yu,u),[t,e]=C(this,vu,sp).call(this,t,e);const c=A(this,ze,[NaN,NaN,NaN,NaN,t,e]);A(this,mn,[t,e]),A(this,He,[{line:c,points:a(this,mn)}]),a(this,ls).set(c,0)}updateProperty(t,e){t==="stroke-width"&&A(this,yu,e)}isEmpty(){return!a(this,He)||a(this,He).length===0}isCancellable(){return a(this,mn).length<=10}add(t,e){[t,e]=C(this,vu,sp).call(this,t,e);const[i,r,o,u]=a(this,ls).subarray(2,6),c=t-o,f=e-u;return Math.hypot(a(this,Ca)*c,a(this,xa)*f)<=2?null:(a(this,mn).push(t,e),isNaN(i)?(a(this,ls).set([o,u,t,e],2),a(this,ze).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,ls)[0])&&a(this,ze).splice(6,6),a(this,ls).set([i,r,o,u,t,e],0),a(this,ze).push(...ut.createBezierPoints(i,r,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,mn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,o){A(this,Ca,i),A(this,xa,r),A(this,_a,o),[t,e]=C(this,vu,sp).call(this,t,e);const u=A(this,ze,[NaN,NaN,NaN,NaN,t,e]);A(this,mn,[t,e]);const c=a(this,He).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),a(this,He).push({line:u,points:a(this,mn)}),a(this,ls).set(u,0),A(this,pi,0),this.toSVGPath(),null}getLastElement(){return a(this,He).at(-1)}setLastElement(t){return a(this,He)?(a(this,He).push(t),A(this,ze,t.line),A(this,mn,t.points),A(this,pi,0),{path:{d:this.toSVGPath()}}):a(this,Ea).setLastElement(t)}removeLastElement(){if(!a(this,He))return a(this,Ea).removeLastElement();a(this,He).pop(),A(this,qe,"");for(let t=0,e=a(this,He).length;t<e;t++){const{line:i,points:r}=a(this,He)[t];A(this,ze,i),A(this,mn,r),A(this,pi,0),this.toSVGPath()}return{path:{d:a(this,qe)}}}toSVGPath(){const t=ut.svgRound(a(this,ze)[4]),e=ut.svgRound(a(this,ze)[5]);if(a(this,mn).length===2)return A(this,qe,`${a(this,qe)} M ${t} ${e} Z`),a(this,qe);if(a(this,mn).length<=6){const r=a(this,qe).lastIndexOf("M");A(this,qe,`${a(this,qe).slice(0,r)} M ${t} ${e}`),A(this,pi,6)}if(a(this,mn).length===4){const r=ut.svgRound(a(this,ze)[10]),o=ut.svgRound(a(this,ze)[11]);return A(this,qe,`${a(this,qe)} L ${r} ${o}`),A(this,pi,12),a(this,qe)}const i=[];a(this,pi)===0&&(i.push(`M ${t} ${e}`),A(this,pi,6));for(let r=a(this,pi),o=a(this,ze).length;r<o;r+=6){const[u,c,f,p,m,v]=a(this,ze).slice(r,r+6).map(ut.svgRound);i.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}return A(this,qe,a(this,qe)+i.join(" ")),A(this,pi,a(this,ze).length),a(this,qe)}getOutlines(t,e,i,r){const o=a(this,He).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),a(this,Ea).build(a(this,He),t,e,i,a(this,_a),a(this,yu),r),A(this,ls,null),A(this,ze,null),A(this,He,null),A(this,qe,null),a(this,Ea)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ls=new WeakMap,ze=new WeakMap,He=new WeakMap,_a=new WeakMap,yu=new WeakMap,mn=new WeakMap,qe=new WeakMap,pi=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,xa=new WeakMap,vu=new WeakSet,sp=function(t,e){return ut._normalizePoint(t,e,a(this,Ca),a(this,xa),a(this,_a))};var yn,hd,dd,Kn,us,cs,wu,Au,bu,Ye,xs,r_,o_,a_;const i0=class i0 extends ut{constructor(){super(...arguments);E(this,Ye);E(this,yn);E(this,hd,0);E(this,dd);E(this,Kn);E(this,us);E(this,cs);E(this,wu);E(this,Au);E(this,bu)}build(e,i,r,o,u,c,f){A(this,us,i),A(this,cs,r),A(this,wu,o),A(this,Au,u),A(this,bu,c),A(this,dd,f??0),A(this,Kn,e),C(this,Ye,o_).call(this)}setLastElement(e){return a(this,Kn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Kn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,Kn)){if(e.push(`M${ut.svgRound(i[4])} ${ut.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${ut.svgRound(i[10])} ${ut.svgRound(i[11])}`);continue}for(let r=6,o=i.length;r<o;r+=6){const[u,c,f,p,m,v]=i.subarray(r,r+6).map(ut.svgRound);e.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}}return e.join("")}serialize([e,i,r,o],u){const c=[],f=[],[p,m,v,w]=C(this,Ye,r_).call(this);let b,_,x,k,T,M,F,N,j;switch(a(this,Au)){case 0:j=ut._rescale,b=e,_=i+o,x=r,k=-o,T=e+p*r,M=i+(1-m-w)*o,F=e+(p+v)*r,N=i+(1-m)*o;break;case 90:j=ut._rescaleAndSwap,b=e,_=i,x=r,k=o,T=e+m*r,M=i+p*o,F=e+(m+w)*r,N=i+(p+v)*o;break;case 180:j=ut._rescale,b=e+r,_=i,x=-r,k=o,T=e+(1-p-v)*r,M=i+m*o,F=e+(1-p)*r,N=i+(m+w)*o;break;case 270:j=ut._rescaleAndSwap,b=e+r,_=i+o,x=-r,k=-o,T=e+(1-m-w)*r,M=i+(1-p-v)*o,F=e+(1-m)*r,N=i+(1-p)*o;break}for(const{line:V,points:U}of a(this,Kn))c.push(j(V,b,_,x,k,u?new Array(V.length):null)),f.push(j(U,b,_,x,k,u?new Array(U.length):null));return{lines:c,points:f,rect:[T,M,F,N]}}static deserialize(e,i,r,o,u,{paths:{lines:c,points:f},rotation:p,thickness:m}){const v=[];let w,b,_,x,k;switch(p){case 0:k=ut._rescale,w=-e/r,b=i/o+1,_=1/r,x=-1/o;break;case 90:k=ut._rescaleAndSwap,w=-i/o,b=-e/r,_=1/o,x=1/r;break;case 180:k=ut._rescale,w=e/r+1,b=-i/o,_=-1/r,x=1/o;break;case 270:k=ut._rescaleAndSwap,w=i/o+1,b=e/r+1,_=-1/o,x=-1/r;break}if(!c){c=[];for(const M of f){const F=M.length;if(F===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(F===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const N=new Float32Array(3*(F-2));c.push(N);let[j,V,U,Q]=M.subarray(0,4);N.set([NaN,NaN,NaN,NaN,j,V],0);for(let nt=4;nt<F;nt+=2){const At=M[nt],ft=M[nt+1];N.set(ut.createBezierPoints(j,V,U,Q,At,ft),(nt-2)*3),[j,V,U,Q]=[U,Q,At,ft]}}}for(let M=0,F=c.length;M<F;M++)v.push({line:k(c[M].map(N=>N??NaN),w,b,_,x),points:k(f[M].map(N=>N??NaN),w,b,_,x)});const T=new i0;return T.build(v,r,o,1,p,m,u),T}get box(){return a(this,yn)}updateProperty(e,i){return e==="stroke-width"?C(this,Ye,a_).call(this,i):null}updateParentDimensions([e,i],r){const[o,u]=C(this,Ye,xs).call(this);A(this,us,e),A(this,cs,i),A(this,wu,r);const[c,f]=C(this,Ye,xs).call(this),p=c-o,m=f-u,v=a(this,yn);return v[0]-=p,v[1]-=m,v[2]+=2*p,v[3]+=2*m,v}updateRotation(e){return A(this,hd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,yn).map(ut.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,yn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,yn);let r=0,o=0,u=0,c=0,f=0,p=0;switch(a(this,hd)){case 90:o=i/e,u=-e/i,f=e;break;case 180:r=-1,c=-1,f=e,p=i;break;case 270:o=-i/e,u=e/i,p=i;break;default:return""}return`matrix(${r} ${o} ${u} ${c} ${ut.svgRound(f)} ${ut.svgRound(p)})`}getPathResizingSVGProperties([e,i,r,o]){const[u,c]=C(this,Ye,xs).call(this),[f,p,m,v]=a(this,yn);if(Math.abs(m-u)<=ut.PRECISION||Math.abs(v-c)<=ut.PRECISION){const k=e+r/2-(f+m/2),T=i+o/2-(p+v/2);return{path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(i)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const w=(r-2*u)/(m-2*u),b=(o-2*c)/(v-2*c),_=m/r,x=v/o;return{path:{"transform-origin":`${ut.svgRound(f)} ${ut.svgRound(p)}`,transform:`${this.rotationTransform} scale(${_} ${x}) translate(${ut.svgRound(u)} ${ut.svgRound(c)}) scale(${w} ${b}) translate(${ut.svgRound(-u)} ${ut.svgRound(-c)})`}}}getPathResizedSVGProperties([e,i,r,o]){const[u,c]=C(this,Ye,xs).call(this),f=a(this,yn),[p,m,v,w]=f;if(f[0]=e,f[1]=i,f[2]=r,f[3]=o,Math.abs(v-u)<=ut.PRECISION||Math.abs(w-c)<=ut.PRECISION){const T=e+r/2-(p+v/2),M=i+o/2-(m+w/2);for(const{line:F,points:N}of a(this,Kn))ut._translate(F,T,M,F),ut._translate(N,T,M,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(r-2*u)/(v-2*u),_=(o-2*c)/(w-2*c),x=-b*(p+u)+e+u,k=-_*(m+c)+i+c;if(b!==1||_!==1||x!==0||k!==0)for(const{line:T,points:M}of a(this,Kn))ut._rescale(T,x,k,b,_,T),ut._rescale(M,x,k,b,_,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[o,u]=r,c=a(this,yn),f=e-c[0],p=i-c[1];if(a(this,us)===o&&a(this,cs)===u)for(const{line:m,points:v}of a(this,Kn))ut._translate(m,f,p,m),ut._translate(v,f,p,v);else{const m=a(this,us)/o,v=a(this,cs)/u;A(this,us,o),A(this,cs,u);for(const{line:w,points:b}of a(this,Kn))ut._rescale(w,f,p,m,v,w),ut._rescale(b,f,p,m,v,b);c[2]*=m,c[3]*=v}return c[0]=e,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,yn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e[0])} ${ut.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};yn=new WeakMap,hd=new WeakMap,dd=new WeakMap,Kn=new WeakMap,us=new WeakMap,cs=new WeakMap,wu=new WeakMap,Au=new WeakMap,bu=new WeakMap,Ye=new WeakSet,xs=function(e=a(this,bu)){const i=a(this,dd)+e/2*a(this,wu);return a(this,Au)%180===0?[i/a(this,us),i/a(this,cs)]:[i/a(this,cs),i/a(this,us)]},r_=function(){const[e,i,r,o]=a(this,yn),[u,c]=C(this,Ye,xs).call(this,0);return[e+u,i+c,r-2*u,o-2*c]},o_=function(){const e=A(this,yn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of a(this,Kn)){if(o.length<=12){for(let f=4,p=o.length;f<p;f+=6){const[m,v]=o.subarray(f,f+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],v),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],v)}continue}let u=o[4],c=o[5];for(let f=6,p=o.length;f<p;f+=6){const[m,v,w,b,_,x]=o.subarray(f,f+6);yt.bezierBoundingBox(u,c,m,v,w,b,_,x,e),u=_,c=x}}const[i,r]=C(this,Ye,xs).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]},a_=function(e){const[i,r]=C(this,Ye,xs).call(this);A(this,bu,e);const[o,u]=C(this,Ye,xs).call(this),[c,f]=[o-i,u-r],p=a(this,yn);return p[0]-=c,p[1]-=f,p[2]+=2*c,p[3]+=2*f,p};let mp=i0;var Su;const s0=class s0 extends xT{constructor(e){super();E(this,Su);A(this,Su,e),super.updateProperties({fill:"none",stroke:he._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=a(this,Su).realScale),super.updateSVGProperty(e,i)}clone(){const e=new s0(a(this,Su));return e.updateAll(this),e}};Su=new WeakMap;let Ev=s0;var Np,l_;const wl=class wl extends Av{constructor(e){super({...e,name:"inkEditor"});E(this,Np);this._willKeepAspectRatio=!0}static initialize(e,i){he.initialize(e,i),this._defaultDrawingOptions=new Ev(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ot(this,"typesMap",new Map([[$t.INK_THICKNESS,"stroke-width"],[$t.INK_COLOR,"stroke"],[$t.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,o,u){return new kT(e,i,r,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,o,u,c){return mp.deserialize(e,i,r,o,u,c)}static async deserialize(e,i,r){let o=null;if(e instanceof Jv){const{data:{inkLists:c,rect:f,rotation:p,id:m,color:v,opacity:w,borderStyle:{rawWidth:b},popupRef:_},parent:{page:{pageNumber:x}}}=e;o=e={annotationType:Lt.INK,color:Array.from(v),thickness:b,opacity:w,paths:{points:c},boxes:null,pageIndex:x-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:_}}const u=await super.deserialize(e,i,r);return u.annotationElementId=e.id||null,u._initialData=o,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=wl.getDefaultDrawingOptions({stroke:yt.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":c,"stroke-width":f}}=this,p={annotationType:Lt.INK,color:he._colorManager.convert(u),opacity:c,thickness:f,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?p:this.annotationElementId&&!C(this,Np,l_).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Np=new WeakSet,l_=function(e){const{color:i,thickness:r,opacity:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,f)=>c!==i[f])||e.thickness!==r||e.opacity!==o||e.pageIndex!==u},Ct(wl,"_type","ink"),Ct(wl,"_editorType",Lt.INK),Ct(wl,"_defaultDrawingOptions",null);let Cv=wl;var ce,Xe,Qr,Ks,Jr,_u,hs,ds,Qn,Eu,Ut,Dc,Fc,rp,kv,op,Tv,ap,u_;const $c=class $c extends he{constructor(e){super({...e,name:"stampEditor"});E(this,Ut);E(this,ce,null);E(this,Xe,null);E(this,Qr,null);E(this,Ks,null);E(this,Jr,null);E(this,_u,"");E(this,hs,null);E(this,ds,null);E(this,Qn,!1);E(this,Eu,!1);A(this,Ks,e.bitmapUrl),A(this,Jr,e.bitmapFile)}static initialize(e,i){he.initialize(e,i)}static get supportedTypes(){return Ot(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ot(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Lt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:c}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:u,height:c,channels:o.length/(u*c)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;a(this,Xe)&&(A(this,ce,null),this._uiManager.imageManager.deleteId(a(this,Xe)),(e=a(this,hs))==null||e.remove(),A(this,hs,null),a(this,ds)&&(clearTimeout(a(this,ds)),A(this,ds,null))),super.remove()}rebuild(){if(!this.parent){a(this,Xe)&&C(this,Ut,rp).call(this);return}super.rebuild(),this.div!==null&&(a(this,Xe)&&a(this,hs)===null&&C(this,Ut,rp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Qr)||a(this,ce)||a(this,Ks)||a(this,Jr)||a(this,Xe))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,ce)?C(this,Ut,kv).call(this):C(this,Ut,rp).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(e*r,i*o,this.width*r,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,ds)!==null&&clearTimeout(a(this,ds)),A(this,ds,setTimeout(()=>{A(this,ds,null),C(this,Ut,Tv).call(this)},200))}copyCanvas(e,i,r=!1){var b;e||(e=224);const{width:o,height:u}=a(this,ce),c=new Ey;let f=a(this,ce),p=o,m=u,v=null;if(i){if(o>i||u>i){const Q=Math.min(i/o,i/u);p=Math.floor(o*Q),m=Math.floor(u*Q)}v=document.createElement("canvas");const _=v.width=Math.ceil(p*c.sx),x=v.height=Math.ceil(m*c.sy);a(this,Qn)||(f=C(this,Ut,op).call(this,_,x));const k=v.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",M="#cfcfd8";this._uiManager.hcmFilter!=="none"?M="black":(b=window.matchMedia)!=null&&b.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",M="#42414d");const F=15,N=F*c.sx,j=F*c.sy,V=new OffscreenCanvas(N*2,j*2),U=V.getContext("2d");U.fillStyle=T,U.fillRect(0,0,N*2,j*2),U.fillStyle=M,U.fillRect(0,0,N,j),U.fillRect(N,j,N,j),k.fillStyle=k.createPattern(V,"repeat"),k.fillRect(0,0,_,x),k.drawImage(f,0,0,f.width,f.height,0,0,_,x)}let w=null;if(r){let _,x;if(c.symmetric&&f.width<e&&f.height<e)_=f.width,x=f.height;else if(f=a(this,ce),o>e||u>e){const M=Math.min(e/o,e/u);_=Math.floor(o*M),x=Math.floor(u*M),a(this,Qn)||(f=C(this,Ut,op).call(this,_,x))}const T=new OffscreenCanvas(_,x).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,_,x),w={width:_,height:x,data:T.getImageData(0,0,_,x).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return a(this,hs)}static async deserialize(e,i,r){var x;let o=null;if(e instanceof R1){const{data:{rect:k,rotation:T,id:M,structParent:F,popupRef:N},container:j,parent:{page:{pageNumber:V}}}=e,U=j.querySelector("canvas"),Q=r.imageManager.getFromCanvas(j.id,U);U.remove();const nt=((x=await i._structTree.getAriaAttributes(`${Vv}${M}`))==null?void 0:x.get("aria-label"))||"";o=e={annotationType:Lt.STAMP,bitmapId:Q.id,bitmap:Q.bitmap,pageIndex:V-1,rect:k.slice(0),rotation:T,id:M,deleted:!1,accessibilityData:{decorative:!1,altText:nt},isSvg:!1,structParent:F,popupRef:N}}const u=await super.deserialize(e,i,r),{rect:c,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=e;m&&r.imageManager.isValidId(m)?(A(u,Xe,m),f&&A(u,ce,f)):A(u,Ks,p),A(u,Qn,v);const[b,_]=u.pageDimensions;return u.width=(c[2]-c[0])/b,u.height=(c[3]-c[1])/_,u.annotationElementId=e.id||null,w&&(u.altTextData=w),u._initialData=o,A(u,Eu,!!o),u}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Lt.STAMP,bitmapId:a(this,Xe),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Qn),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=C(this,Ut,ap).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=C(this,Ut,u_).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const c=a(this,Qn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(a(this,Xe)))i.stamps.set(a(this,Xe),{area:c,serialized:r}),r.bitmap=C(this,Ut,ap).call(this,!1);else if(a(this,Qn)){const f=i.stamps.get(a(this,Xe));c>f.area&&(f.area=c,f.serialized.bitmap.close(),f.serialized.bitmap=C(this,Ut,ap).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ce=new WeakMap,Xe=new WeakMap,Qr=new WeakMap,Ks=new WeakMap,Jr=new WeakMap,_u=new WeakMap,hs=new WeakMap,ds=new WeakMap,Qn=new WeakMap,Eu=new WeakMap,Ut=new WeakSet,Dc=function(e,i=!1){if(!e){this.remove();return}A(this,ce,e.bitmap),i||(A(this,Xe,e.id),A(this,Qn,e.isSvg)),e.file&&A(this,_u,e.file.name),C(this,Ut,kv).call(this)},Fc=function(){if(A(this,Qr,null),this._uiManager.enableWaiting(!1),!!a(this,hs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ce)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ce)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rp=function(){if(a(this,Xe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,Xe)).then(r=>C(this,Ut,Dc).call(this,r,!0)).finally(()=>C(this,Ut,Fc).call(this));return}if(a(this,Ks)){const r=a(this,Ks);A(this,Ks,null),this._uiManager.enableWaiting(!0),A(this,Qr,this._uiManager.imageManager.getFromUrl(r).then(o=>C(this,Ut,Dc).call(this,o)).finally(()=>C(this,Ut,Fc).call(this)));return}if(a(this,Jr)){const r=a(this,Jr);A(this,Jr,null),this._uiManager.enableWaiting(!0),A(this,Qr,this._uiManager.imageManager.getFromFile(r).then(o=>C(this,Ut,Dc).call(this,o)).finally(()=>C(this,Ut,Fc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=$c.supportedTypesStr;const i=this._uiManager._signal;A(this,Qr,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Ut,Dc).call(this,o)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>C(this,Ut,Fc).call(this))),e.click()},kv=function(){var v;const{div:e}=this;let{width:i,height:r}=a(this,ce);const[o,u]=this.pageDimensions,c=.75;if(this.width)i=this.width*o,r=this.height*u;else if(i>c*o||r>c*u){const w=Math.min(c*o/i,c*u/r);i*=w,r*=w}const[f,p]=this.parentDimensions;this.setDims(i*f/o,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,hs,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=i/o,this.height=r/u,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,Ut,Tv).call(this),a(this,Eu)||(this.parent.addUndoableEditor(this),A(this,Eu,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,_u)&&m.setAttribute("aria-label",a(this,_u))},op=function(e,i){const{width:r,height:o}=a(this,ce);let u=r,c=o,f=a(this,ce);for(;u>2*e||c>2*i;){const p=u,m=c;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const v=new OffscreenCanvas(u,c);v.getContext("2d").drawImage(f,0,0,p,m,0,0,u,c),f=v.transferToImageBitmap()}return f},Tv=function(){const[e,i]=this.parentDimensions,{width:r,height:o}=this,u=new Ey,c=Math.ceil(r*e*u.sx),f=Math.ceil(o*i*u.sy),p=a(this,hs);if(!p||p.width===c&&p.height===f)return;p.width=c,p.height=f;const m=a(this,Qn)?a(this,ce):C(this,Ut,op).call(this,c,f),v=p.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,c,f)},ap=function(e){if(e){if(a(this,Qn)){const o=this._uiManager.imageManager.getSvgUrl(a(this,Xe));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,ce),i.getContext("2d").drawImage(a(this,ce),0,0),i.toDataURL()}if(a(this,Qn)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*so.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*so.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(o,u);return c.getContext("2d").drawImage(a(this,ce),0,0,a(this,ce).width,a(this,ce).height,0,0,o,u),c.transferToImageBitmap()}return structuredClone(a(this,ce))},u_=function(e){var c;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===i,u=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},Ct($c,"_type","stamp"),Ct($c,"_editorType",Lt.STAMP);let xv=$c;var ka,Cu,fs,Zr,Qs,gi,to,xu,Ta,$i,Js,an,Zs,mt,eo,oe,c_,Ki,Rv,Lv,lp;const xi=class xi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:o,annotationLayer:u,drawLayer:c,textLayer:f,viewport:p,l10n:m}){E(this,oe);E(this,ka);E(this,Cu,!1);E(this,fs,null);E(this,Zr,null);E(this,Qs,null);E(this,gi,new Map);E(this,to,!1);E(this,xu,!1);E(this,Ta,!1);E(this,$i,null);E(this,Js,null);E(this,an,null);E(this,Zs,null);E(this,mt);const v=[...a(xi,eo).values()];if(!xi._initialized){xi._initialized=!0;for(const w of v)w.initialize(m,t)}t.registerEditorTypes(v),A(this,mt,t),this.pageIndex=e,this.div=i,A(this,ka,o),A(this,fs,u),this.viewport=p,A(this,an,f),this.drawLayer=c,this._structTree=r,a(this,mt).addLayer(this)}get isEmpty(){return a(this,gi).size===0}get isInvisible(){return this.isEmpty&&a(this,mt).getMode()===Lt.NONE}updateToolbar(t){a(this,mt).updateToolbar(t)}updateMode(t=a(this,mt).getMode()){switch(C(this,oe,lp).call(this),t){case Lt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Lt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Lt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(xi,eo).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,an))==null?void 0:e.div)}setEditingState(t){a(this,mt).setEditingState(t)}addCommands(t){a(this,mt).addCommands(t)}cleanUndoStack(t){a(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,fs))==null||e.div.classList.toggle("disabled",!t)}async enable(){A(this,Ta,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,gi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,mt).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,fs)){A(this,Ta,!1);return}const e=a(this,fs).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,mt).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,Ta,!1)}disable(){var r;A(this,xu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of a(this,gi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(a(this,fs)){const o=a(this,fs).getEditableAnnotations();for(const u of o){const{id:c}=u.data;if(a(this,mt).isDeletedAnnotationElement(c))continue;let f=e.get(c);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(c),f&&(a(this,mt).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}C(this,oe,lp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of a(xi,eo).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,xu,!1)}getEditableAnnotation(t){var e;return((e=a(this,fs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,mt).getActive()!==t&&a(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,an))!=null&&t.div&&!a(this,Zs)){A(this,Zs,new AbortController);const e=a(this,mt).combinedSignal(a(this,Zs));a(this,an).div.addEventListener("pointerdown",C(this,oe,c_).bind(this),{signal:e}),a(this,an).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,an))!=null&&t.div&&a(this,Zs)&&(a(this,Zs).abort(),A(this,Zs,null),a(this,an).div.classList.remove("highlighting"))}enableClick(){if(a(this,Zr))return;A(this,Zr,new AbortController);const t=a(this,mt).combinedSignal(a(this,Zr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Zr))==null||t.abort(),A(this,Zr,null)}attach(t){a(this,gi).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,mt).isDeletedAnnotationElement(e)&&a(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,gi).delete(t.id),(e=a(this,ka))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,xu)&&t.annotationElementId&&a(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,mt).addDeletedAnnotationElement(t.annotationElementId),he.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Ta)),a(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Qs)&&(t._focusEventsAllowed=!1,A(this,Qs,setTimeout(()=>{A(this,Qs,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,ka))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,mt).getId()}combinedSignal(t){return a(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,oe,Ki))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,mt).updateToolbar(t),a(this,mt).updateMode(t);const{offsetX:i,offsetY:r}=C(this,oe,Lv).call(this),o=this.getNextId(),u=C(this,oe,Rv).call(this,{parent:this,id:o,x:i,y:r,uiManager:a(this,mt),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=a(xi,eo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,mt)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),o=C(this,oe,Rv).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,mt),isCentered:e,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(C(this,oe,Lv).call(this),!0)}setSelected(t){a(this,mt).setSelected(t)}toggleSelected(t){a(this,mt).toggleSelected(t)}unselect(t){a(this,mt).unselect(t)}pointerup(t){var i;const{isMac:e}=wn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,to)&&(A(this,to,!1),!((i=a(this,oe,Ki))!=null&&i.isDrawer&&a(this,oe,Ki).supportMultipleDrawings))){if(!a(this,Cu)){A(this,Cu,!0);return}if(a(this,mt).getMode()===Lt.STAMP){a(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var r;if(a(this,mt).getMode()===Lt.HIGHLIGHT&&this.enableTextSelection(),a(this,to)){A(this,to,!1);return}const{isMac:e}=wn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,to,!0),(r=a(this,oe,Ki))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=a(this,mt).getActive();A(this,Cu,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),a(this,$i)){a(this,oe,Ki).startDrawing(this,a(this,mt),!1,t);return}a(this,mt).setCurrentDrawingSession(this),A(this,$i,new AbortController);const e=a(this,mt).combinedSignal(a(this,$i));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(A(this,Js,null),this.commitOrRemove())},{signal:e}),a(this,oe,Ki).startDrawing(this,a(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,Js,e);return}a(this,Js)&&setTimeout(()=>{var e;(e=a(this,Js))==null||e.focus(),A(this,Js,null)},0)}endDrawingSession(t=!1){return a(this,$i)?(a(this,mt).setCurrentDrawingSession(null),a(this,$i).abort(),A(this,$i,null),A(this,Js,null),a(this,oe,Ki).endDrawing(t)):null}findNewParent(t,e,i){const r=a(this,mt).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,$i)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,$i)&&a(this,oe,Ki).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,mt).getActive())==null?void 0:t.parent)===this&&(a(this,mt).commitOrRemove(),a(this,mt).setActiveEditor(null)),a(this,Qs)&&(clearTimeout(a(this,Qs)),A(this,Qs,null));for(const i of a(this,gi).values())(e=a(this,ka))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,gi).clear(),a(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,La(this.div,t);for(const e of a(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,mt).commitOrRemove(),C(this,oe,lp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,La(this.div,{rotation:i}),e!==i)for(const r of a(this,gi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,mt).viewParameters.realScale}};ka=new WeakMap,Cu=new WeakMap,fs=new WeakMap,Zr=new WeakMap,Qs=new WeakMap,gi=new WeakMap,to=new WeakMap,xu=new WeakMap,Ta=new WeakMap,$i=new WeakMap,Js=new WeakMap,an=new WeakMap,Zs=new WeakMap,mt=new WeakMap,eo=new WeakMap,oe=new WeakSet,c_=function(t){a(this,mt).unselectAll();const{target:e}=t;if(e===a(this,an).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,an).div.contains(e)){const{isMac:i}=wn.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,mt).showAllEditors("highlight",!0,!0),a(this,an).div.classList.add("free"),this.toggleDrawing(),gp.startHighlighting(this,a(this,mt).direction==="ltr",{target:a(this,an).div,x:t.x,y:t.y}),a(this,an).div.addEventListener("pointerup",()=>{a(this,an).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,mt)._signal}),t.preventDefault()}},Ki=function(){return a(xi,eo).get(a(this,mt).getMode())},Rv=function(t){const e=a(this,oe,Ki);return e?new e.prototype.constructor(t):null},Lv=function(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),u=Math.max(0,e),c=Math.min(window.innerWidth,t+i),f=Math.min(window.innerHeight,e+r),p=(o+c)/2-t,m=(u+f)/2-e,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},lp=function(){for(const t of a(this,gi).values())t.isEmpty()&&t.remove()},Ct(xi,"_initialized",!1),E(xi,eo,new Map([cv,Cv,xv,gp].map(t=>[t._editorType,t])));let Pv=xi;var zi,fd,vn,Pa,Dp,h_,ps,Iv,d_,Nv;const nn=class nn{constructor({pageIndex:t}){E(this,ps);E(this,zi,null);E(this,fd,0);E(this,vn,new Map);E(this,Pa,new Map);this.pageIndex=t}setParent(t){if(!a(this,zi)){A(this,zi,t);return}if(a(this,zi)!==t){if(a(this,vn).size>0)for(const e of a(this,vn).values())e.remove(),t.append(e);A(this,zi,t)}}static get _svgFactory(){return Ot(this,"_svgFactory",new Qv)}draw(t,e=!1,i=!1){const r=fn(this,fd)._++,o=C(this,ps,Iv).call(this),u=nn._svgFactory.createElement("defs");o.append(u);const c=nn._svgFactory.createElement("path");u.append(c);const f=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",f),c.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Pa).set(r,c);const p=i?C(this,ps,d_).call(this,u,f):null,m=nn._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),a(this,vn).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=fn(this,fd)._++,r=C(this,ps,Iv).call(this),o=nn._svgFactory.createElement("defs");r.append(o);const u=nn._svgFactory.createElement("path");o.append(u);const c=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const v=nn._svgFactory.createElement("mask");o.append(v),f=`mask_p${this.pageIndex}_${i}`,v.setAttribute("id",f),v.setAttribute("maskUnits","objectBoundingBox");const w=nn._svgFactory.createElement("rect");v.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const b=nn._svgFactory.createElement("use");v.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const p=nn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,vn).set(i,r),i}finalizeDraw(t,e){a(this,Pa).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:i,bbox:r,rootClass:o,path:u}=e,c=typeof t=="number"?a(this,vn).get(t):t;if(c){if(i&&C(this,ps,Nv).call(this,c,i),r&&C(f=nn,Dp,h_).call(f,c,r),o){const{classList:p}=c;for(const[m,v]of Object.entries(o))p.toggle(m,v)}if(u){const m=c.firstChild.firstChild;C(this,ps,Nv).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const i=a(this,vn).get(t);i&&(a(e,zi).append(i),a(this,vn).delete(t),a(e,vn).set(t,i))}remove(t){a(this,Pa).delete(t),a(this,zi)!==null&&(a(this,vn).get(t).remove(),a(this,vn).delete(t))}destroy(){A(this,zi,null);for(const t of a(this,vn).values())t.remove();a(this,vn).clear(),a(this,Pa).clear()}};zi=new WeakMap,fd=new WeakMap,vn=new WeakMap,Pa=new WeakMap,Dp=new WeakSet,h_=function(t,[e,i,r,o]){const{style:u}=t;u.top=`${100*i}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*o}%`},ps=new WeakSet,Iv=function(){const t=nn._svgFactory.create(1,1,!0);return a(this,zi).append(t),t.setAttribute("aria-hidden",!0),t},d_=function(t,e){const i=nn._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=nn._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},Nv=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},E(nn,Dp);let Mv=nn;globalThis.pdfjsTestingUtils={HighlightOutliner:dv};Pt.AbortException;Pt.AnnotationEditorLayer;Pt.AnnotationEditorParamsType;Pt.AnnotationEditorType;Pt.AnnotationEditorUIManager;Pt.AnnotationLayer;Pt.AnnotationMode;Pt.ColorPicker;Pt.DOMSVGFactory;Pt.DrawLayer;Pt.FeatureTest;var TT=Pt.GlobalWorkerOptions;Pt.ImageKind;Pt.InvalidPDFException;Pt.MissingPDFException;Pt.OPS;Pt.OutputScale;Pt.PDFDataRangeTransport;Pt.PDFDateString;Pt.PDFWorker;Pt.PasswordResponses;Pt.PermissionFlag;Pt.PixelsPerInch;Pt.RenderingCancelledException;Pt.TextLayer;Pt.TouchManager;Pt.UnexpectedResponseException;Pt.Util;Pt.VerbosityLevel;Pt.XfaLayer;Pt.build;Pt.createValidAbsoluteUrl;Pt.fetchData;var PT=Pt.getDocument;Pt.getFilenameFromUrl;Pt.getPdfFilenameFromUrl;Pt.getXfaPageViewport;Pt.isDataScheme;Pt.isPdfFile;Pt.noContextMenu;Pt.normalizeUnicode;Pt.setLayerDimensions;Pt.shadow;Pt.stopEvent;Pt.version;TT.workerSrc="../pdf.worker.mjs";const RT=()=>{const[d,t]=Se.useState(null),[e,i]=Se.useState([]),[r,o]=Se.useState(!1),[u,c]=Se.useState(""),[f,p]=Se.useState(""),m=w=>{var b;if(w.target.files&&w.target.files[0]){const _=w.target.files[0];if(_){const x=(b=_.name.split(".").pop())==null?void 0:b.toLowerCase();x==="pdf"?p("PDF"):["jpg","jpeg","png","gif"].includes(x||"")?p("Image"):p("Unknown"),t(_)}}else p("Unknown")},v=async()=>{if(!d){alert("Please upload a PDF or image file first.");return}if(f==="Unknown"){alert("Please upload a supported file type (PDF or Image).");return}o(!0),i([]);let w="";if(f==="PDF")try{const b=await d.arrayBuffer(),_=await PT(b).promise,x=_.numPages;for(let T=1;T<=x;T++){const M=await _.getPage(T),F=M.getViewport({scale:1}),N=document.createElement("canvas"),j=N.getContext("2d");if(!j)continue;N.height=F.height,N.width=F.width;const V={canvasContext:j,viewport:F};await M.render(V).promise;const U=N.toDataURL("image/png");c(U);const{data:Q}=await Db.recognize(U,"pol",{});w+=Q.text}console.log(w);const k=w.split(`
`).filter(T=>T.trim()!=="");i(k)}catch(b){console.error("Error processing PDF:",b)}finally{o(!1)}else if(f==="Image"){const b=URL.createObjectURL(d);c(b);try{const{data:_}=await Db.recognize(b,"pol",{logger:T=>console.log(T)}),k=_.text.split(`
`).filter(T=>T.trim()!=="");i(k)}catch(_){console.error("Error recognizing text from image:",_)}finally{o(!1)}}};return be.jsxs("div",{className:"App",children:[be.jsx("h1",{children:"Extract Text from PDF or Image"}),be.jsx("input",{type:"file",accept:".pdf,image/*",onChange:m}),be.jsx("button",{onClick:v,disabled:r,children:r?"Processing...":"Extract Text"}),be.jsxs("div",{children:[be.jsx("h2",{children:"Extracted Text:"}),be.jsx("pre",{children:e})]}),be.jsx("div",{children:!!e&&e.map((w,b)=>be.jsx("button",{onClick:_=>console.log(_.target),children:w},b))}),!!e&&be.jsx("img",{src:u,alt:"Canvas to Image"})]})};wC.createRoot(document.getElementById("root")).render(be.jsx(Se.StrictMode,{children:be.jsx(hS,{children:be.jsx(RT,{})})}));
