var gE=Object.defineProperty;var TA=d=>{throw TypeError(d)};var mE=(d,t,e)=>t in d?gE(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var vt=(d,t,e)=>mE(d,typeof t!="symbol"?t+"":t,e),Im=(d,t,e)=>t.has(d)||TA("Cannot "+e);var a=(d,t,e)=>(Im(d,t,"read from private field"),e?e.call(d):t.get(d)),_=(d,t,e)=>t.has(d)?TA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),A=(d,t,e,i)=>(Im(d,t,"write to private field"),i?i.call(d,e):t.set(d,e),e),E=(d,t,e)=>(Im(d,t,"access private method"),e);var cn=(d,t,e,i)=>({set _(r){A(d,t,r,e)},get _(){return a(d,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();var Nm={exports:{}},ac={},Dm={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function yE(){if(PA)return It;PA=1;var d=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(I){return I===null||typeof I!="object"?null:(I=v&&I[v]||I["@@iterator"],typeof I=="function"?I:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(I,j,dt){this.props=I,this.context=j,this.refs=C,this.updater=dt||S}k.prototype.isReactComponent={},k.prototype.setState=function(I,j){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,j,"setState")},k.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function T(){}T.prototype=k.prototype;function L(I,j,dt){this.props=I,this.context=j,this.refs=C,this.updater=dt||S}var O=L.prototype=new T;O.constructor=L,x(O,k.prototype),O.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,H={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Y(I,j,dt){var Ct,Lt={},St=null,yt=null;if(j!=null)for(Ct in j.ref!==void 0&&(yt=j.ref),j.key!==void 0&&(St=""+j.key),j)z.call(j,Ct)&&!B.hasOwnProperty(Ct)&&(Lt[Ct]=j[Ct]);var Ft=arguments.length-2;if(Ft===1)Lt.children=dt;else if(1<Ft){for(var Yt=Array(Ft),an=0;an<Ft;an++)Yt[an]=arguments[an+2];Lt.children=Yt}if(I&&I.defaultProps)for(Ct in Ft=I.defaultProps,Ft)Lt[Ct]===void 0&&(Lt[Ct]=Ft[Ct]);return{$$typeof:d,type:I,key:St,ref:yt,props:Lt,_owner:H.current}}function Z(I,j){return{$$typeof:d,type:I.type,key:j,ref:I.ref,props:I.props,_owner:I._owner}}function st(I){return typeof I=="object"&&I!==null&&I.$$typeof===d}function tt(I){var j={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(dt){return j[dt]})}var _t=/\/+/g;function Mt(I,j){return typeof I=="object"&&I!==null&&I.key!=null?tt(""+I.key):j.toString(36)}function xt(I,j,dt,Ct,Lt){var St=typeof I;(St==="undefined"||St==="boolean")&&(I=null);var yt=!1;if(I===null)yt=!0;else switch(St){case"string":case"number":yt=!0;break;case"object":switch(I.$$typeof){case d:case t:yt=!0}}if(yt)return yt=I,Lt=Lt(yt),I=Ct===""?"."+Mt(yt,0):Ct,D(Lt)?(dt="",I!=null&&(dt=I.replace(_t,"$&/")+"/"),xt(Lt,j,dt,"",function(an){return an})):Lt!=null&&(st(Lt)&&(Lt=Z(Lt,dt+(!Lt.key||yt&&yt.key===Lt.key?"":(""+Lt.key).replace(_t,"$&/")+"/")+I)),j.push(Lt)),1;if(yt=0,Ct=Ct===""?".":Ct+":",D(I))for(var Ft=0;Ft<I.length;Ft++){St=I[Ft];var Yt=Ct+Mt(St,Ft);yt+=xt(St,j,dt,Yt,Lt)}else if(Yt=w(I),typeof Yt=="function")for(I=Yt.call(I),Ft=0;!(St=I.next()).done;)St=St.value,Yt=Ct+Mt(St,Ft++),yt+=xt(St,j,dt,Yt,Lt);else if(St==="object")throw j=String(I),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return yt}function Ut(I,j,dt){if(I==null)return I;var Ct=[],Lt=0;return xt(I,Ct,"","",function(St){return j.call(dt,St,Lt++)}),Ct}function q(I){if(I._status===-1){var j=I._result;j=j(),j.then(function(dt){(I._status===0||I._status===-1)&&(I._status=1,I._result=dt)},function(dt){(I._status===0||I._status===-1)&&(I._status=2,I._result=dt)}),I._status===-1&&(I._status=0,I._result=j)}if(I._status===1)return I._result.default;throw I._result}var et={current:null},X={transition:null},ct={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:X,ReactCurrentOwner:H};function J(){throw Error("act(...) is not supported in production builds of React.")}return It.Children={map:Ut,forEach:function(I,j,dt){Ut(I,function(){j.apply(this,arguments)},dt)},count:function(I){var j=0;return Ut(I,function(){j++}),j},toArray:function(I){return Ut(I,function(j){return j})||[]},only:function(I){if(!st(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},It.Component=k,It.Fragment=e,It.Profiler=r,It.PureComponent=L,It.StrictMode=i,It.Suspense=f,It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ct,It.act=J,It.cloneElement=function(I,j,dt){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Ct=x({},I.props),Lt=I.key,St=I.ref,yt=I._owner;if(j!=null){if(j.ref!==void 0&&(St=j.ref,yt=H.current),j.key!==void 0&&(Lt=""+j.key),I.type&&I.type.defaultProps)var Ft=I.type.defaultProps;for(Yt in j)z.call(j,Yt)&&!B.hasOwnProperty(Yt)&&(Ct[Yt]=j[Yt]===void 0&&Ft!==void 0?Ft[Yt]:j[Yt])}var Yt=arguments.length-2;if(Yt===1)Ct.children=dt;else if(1<Yt){Ft=Array(Yt);for(var an=0;an<Yt;an++)Ft[an]=arguments[an+2];Ct.children=Ft}return{$$typeof:d,type:I.type,key:Lt,ref:St,props:Ct,_owner:yt}},It.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:o,_context:I},I.Consumer=I},It.createElement=Y,It.createFactory=function(I){var j=Y.bind(null,I);return j.type=I,j},It.createRef=function(){return{current:null}},It.forwardRef=function(I){return{$$typeof:c,render:I}},It.isValidElement=st,It.lazy=function(I){return{$$typeof:m,_payload:{_status:-1,_result:I},_init:q}},It.memo=function(I,j){return{$$typeof:p,type:I,compare:j===void 0?null:j}},It.startTransition=function(I){var j=X.transition;X.transition={};try{I()}finally{X.transition=j}},It.unstable_act=J,It.useCallback=function(I,j){return et.current.useCallback(I,j)},It.useContext=function(I){return et.current.useContext(I)},It.useDebugValue=function(){},It.useDeferredValue=function(I){return et.current.useDeferredValue(I)},It.useEffect=function(I,j){return et.current.useEffect(I,j)},It.useId=function(){return et.current.useId()},It.useImperativeHandle=function(I,j,dt){return et.current.useImperativeHandle(I,j,dt)},It.useInsertionEffect=function(I,j){return et.current.useInsertionEffect(I,j)},It.useLayoutEffect=function(I,j){return et.current.useLayoutEffect(I,j)},It.useMemo=function(I,j){return et.current.useMemo(I,j)},It.useReducer=function(I,j,dt){return et.current.useReducer(I,j,dt)},It.useRef=function(I){return et.current.useRef(I)},It.useState=function(I){return et.current.useState(I)},It.useSyncExternalStore=function(I,j,dt){return et.current.useSyncExternalStore(I,j,dt)},It.useTransition=function(){return et.current.useTransition()},It.version="18.3.1",It}var RA;function dv(){return RA||(RA=1,Dm.exports=yE()),Dm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function vE(){if(MA)return ac;MA=1;var d=dv(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,v={},w=null,S=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(S=f.ref);for(m in f)i.call(f,m)&&!o.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:w,ref:S,props:v,_owner:r.current}}return ac.Fragment=e,ac.jsx=u,ac.jsxs=u,ac}var LA;function wE(){return LA||(LA=1,Nm.exports=vE()),Nm.exports}var wt=wE(),Kt=dv(),Sf={},Fm={exports:{}},En={},Om={exports:{}},$m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IA;function AE(){return IA||(IA=1,function(d){function t(X,ct){var J=X.length;X.push(ct);t:for(;0<J;){var I=J-1>>>1,j=X[I];if(0<r(j,ct))X[I]=ct,X[J]=j,J=I;else break t}}function e(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var ct=X[0],J=X.pop();if(J!==ct){X[0]=J;t:for(var I=0,j=X.length,dt=j>>>1;I<dt;){var Ct=2*(I+1)-1,Lt=X[Ct],St=Ct+1,yt=X[St];if(0>r(Lt,J))St<j&&0>r(yt,Lt)?(X[I]=yt,X[St]=J,I=St):(X[I]=Lt,X[Ct]=J,I=Ct);else if(St<j&&0>r(yt,J))X[I]=yt,X[St]=J,I=St;else break t}}return ct}function r(X,ct){var J=X.sortIndex-ct.sortIndex;return J!==0?J:X.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;d.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,w=3,S=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(X){for(var ct=e(p);ct!==null;){if(ct.callback===null)i(p);else if(ct.startTime<=X)i(p),ct.sortIndex=ct.expirationTime,t(f,ct);else break;ct=e(p)}}function D(X){if(C=!1,O(X),!x)if(e(f)!==null)x=!0,q(z);else{var ct=e(p);ct!==null&&et(D,ct.startTime-X)}}function z(X,ct){x=!1,C&&(C=!1,T(Y),Y=-1),S=!0;var J=w;try{for(O(ct),v=e(f);v!==null&&(!(v.expirationTime>ct)||X&&!tt());){var I=v.callback;if(typeof I=="function"){v.callback=null,w=v.priorityLevel;var j=I(v.expirationTime<=ct);ct=d.unstable_now(),typeof j=="function"?v.callback=j:v===e(f)&&i(f),O(ct)}else i(f);v=e(f)}if(v!==null)var dt=!0;else{var Ct=e(p);Ct!==null&&et(D,Ct.startTime-ct),dt=!1}return dt}finally{v=null,w=J,S=!1}}var H=!1,B=null,Y=-1,Z=5,st=-1;function tt(){return!(d.unstable_now()-st<Z)}function _t(){if(B!==null){var X=d.unstable_now();st=X;var ct=!0;try{ct=B(!0,X)}finally{ct?Mt():(H=!1,B=null)}}else H=!1}var Mt;if(typeof L=="function")Mt=function(){L(_t)};else if(typeof MessageChannel<"u"){var xt=new MessageChannel,Ut=xt.port2;xt.port1.onmessage=_t,Mt=function(){Ut.postMessage(null)}}else Mt=function(){k(_t,0)};function q(X){B=X,H||(H=!0,Mt())}function et(X,ct){Y=k(function(){X(d.unstable_now())},ct)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(X){X.callback=null},d.unstable_continueExecution=function(){x||S||(x=!0,q(z))},d.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<X?Math.floor(1e3/X):5},d.unstable_getCurrentPriorityLevel=function(){return w},d.unstable_getFirstCallbackNode=function(){return e(f)},d.unstable_next=function(X){switch(w){case 1:case 2:case 3:var ct=3;break;default:ct=w}var J=w;w=ct;try{return X()}finally{w=J}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(X,ct){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=w;w=X;try{return ct()}finally{w=J}},d.unstable_scheduleCallback=function(X,ct,J){var I=d.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?I+J:I):J=I,X){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=J+j,X={id:m++,callback:ct,priorityLevel:X,startTime:J,expirationTime:j,sortIndex:-1},J>I?(X.sortIndex=J,t(p,X),e(f)===null&&X===e(p)&&(C?(T(Y),Y=-1):C=!0,et(D,J-I))):(X.sortIndex=j,t(f,X),x||S||(x=!0,q(z))),X},d.unstable_shouldYield=tt,d.unstable_wrapCallback=function(X){var ct=w;return function(){var J=w;w=ct;try{return X.apply(this,arguments)}finally{w=J}}}}($m)),$m}var NA;function SE(){return NA||(NA=1,Om.exports=AE()),Om.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function bE(){if(DA)return En;DA=1;var d=dv(),t=SE();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return f.call(v,n)?!0:f.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function S(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,s,l,h){if(s===null||typeof s>"u"||S(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,l,h,g,y,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=b}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];k[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function L(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,L);k[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,L);k[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,L);k[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,l,h){var g=k.hasOwnProperty(s)?k[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,g,h)&&(l=null),h||g===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,h=g.attributeNamespace,l===null?n.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var D=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),H=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),tt=Symbol.for("react.context"),_t=Symbol.for("react.forward_ref"),Mt=Symbol.for("react.suspense"),xt=Symbol.for("react.suspense_list"),Ut=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),X=Symbol.iterator;function ct(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var J=Object.assign,I;function j(n){if(I===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+n}var dt=!1;function Ct(n,s){if(!n||dt)return"";dt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){h=$}n.call(s.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var g=$.stack.split(`
`),y=h.stack.split(`
`),b=g.length-1,P=y.length-1;1<=b&&0<=P&&g[b]!==y[P];)P--;for(;1<=b&&0<=P;b--,P--)if(g[b]!==y[P]){if(b!==1||P!==1)do if(b--,P--,0>P||g[b]!==y[P]){var R=`
`+g[b].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=b&&0<=P);break}}}finally{dt=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?j(n):""}function Lt(n){switch(n.tag){case 5:return j(n.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return n=Ct(n.type,!1),n;case 11:return n=Ct(n.type.render,!1),n;case 1:return n=Ct(n.type,!0),n;default:return""}}function St(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case H:return"Portal";case Z:return"Profiler";case Y:return"StrictMode";case Mt:return"Suspense";case xt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tt:return(n.displayName||"Context")+".Consumer";case st:return(n._context.displayName||"Context")+".Provider";case _t:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ut:return s=n.displayName||null,s!==null?s:St(n.type)||"Memo";case q:s=n._payload,n=n._init;try{return St(n(s))}catch{}}return null}function yt(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return St(s);case 8:return s===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ft(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Yt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function an(n){var s=Yt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(b){h=""+b,y.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function cd(n){n._valueTracker||(n._valueTracker=an(n))}function Nv(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=Yt(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function hd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Hp(n,s){var l=s.checked;return J({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Dv(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ft(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Fv(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function Bp(n,s){Fv(n,s);var l=Ft(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?jp(n,s.type,l):s.hasOwnProperty("defaultValue")&&jp(n,s.type,Ft(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Ov(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function jp(n,s,l){(s!=="number"||hd(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var bu=Array.isArray;function La(n,s,l,h){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Ft(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Up(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return J({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $v(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(bu(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Ft(l)}}function zv(n,s){var l=Ft(s.value),h=Ft(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function Hv(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Bv(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vp(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Bv(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dd,jv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=dd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function _u(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Eu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A1=["Webkit","ms","Moz","O"];Object.keys(Eu).forEach(function(n){A1.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Eu[s]=Eu[n]})});function Uv(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||Eu.hasOwnProperty(n)&&Eu[n]?(""+s).trim():s+"px"}function Vv(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,g=Uv(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,g):n[l]=g}}var S1=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(n,s){if(s){if(S1[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Gp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function qp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Yp=null,Ia=null,Na=null;function Wv(n){if(n=Gu(n)){if(typeof Yp!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Dd(s),Yp(n.stateNode,n.type,s))}}function Gv(n){Ia?Na?Na.push(n):Na=[n]:Ia=n}function Xv(){if(Ia){var n=Ia,s=Na;if(Na=Ia=null,Wv(n),s)for(n=0;n<s.length;n++)Wv(s[n])}}function qv(n,s){return n(s)}function Yv(){}var Kp=!1;function Kv(n,s,l){if(Kp)return n(s,l);Kp=!0;try{return qv(n,s,l)}finally{Kp=!1,(Ia!==null||Na!==null)&&(Yv(),Xv())}}function xu(n,s){var l=n.stateNode;if(l===null)return null;var h=Dd(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Qp=!1;if(c)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{Qp=!1}function b1(n,s,l,h,g,y,b,P,R){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(V){this.onError(V)}}var ku=!1,fd=null,pd=!1,Zp=null,_1={onError:function(n){ku=!0,fd=n}};function E1(n,s,l,h,g,y,b,P,R){ku=!1,fd=null,b1.apply(_1,arguments)}function x1(n,s,l,h,g,y,b,P,R){if(E1.apply(this,arguments),ku){if(ku){var $=fd;ku=!1,fd=null}else throw Error(e(198));pd||(pd=!0,Zp=$)}}function io(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function Qv(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Zv(n){if(io(n)!==n)throw Error(e(188))}function C1(n){var s=n.alternate;if(!s){if(s=io(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return Zv(g),n;if(y===h)return Zv(g),s;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=g,h=y;else{for(var b=!1,P=g.child;P;){if(P===l){b=!0,l=g,h=y;break}if(P===h){b=!0,h=g,l=y;break}P=P.sibling}if(!b){for(P=y.child;P;){if(P===l){b=!0,l=y,h=g;break}if(P===h){b=!0,h=y,l=g;break}P=P.sibling}if(!b)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function Jv(n){return n=C1(n),n!==null?t0(n):null}function t0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=t0(n);if(s!==null)return s;n=n.sibling}return null}var e0=t.unstable_scheduleCallback,n0=t.unstable_cancelCallback,k1=t.unstable_shouldYield,T1=t.unstable_requestPaint,pe=t.unstable_now,P1=t.unstable_getCurrentPriorityLevel,Jp=t.unstable_ImmediatePriority,i0=t.unstable_UserBlockingPriority,gd=t.unstable_NormalPriority,R1=t.unstable_LowPriority,s0=t.unstable_IdlePriority,md=null,zi=null;function M1(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(md,n,void 0,(n.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:N1,L1=Math.log,I1=Math.LN2;function N1(n){return n>>>=0,n===0?32:31-(L1(n)/I1|0)|0}var yd=64,vd=4194304;function Tu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function wd(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,b=l&268435455;if(b!==0){var P=b&~g;P!==0?h=Tu(P):(y&=b,y!==0&&(h=Tu(y)))}else b=l&~g,b!==0?h=Tu(b):y!==0&&(h=Tu(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if(h&4&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-gi(s),g=1<<l,h|=n[l],s&=~g;return h}function D1(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F1(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var b=31-gi(y),P=1<<b,R=g[b];R===-1?(!(P&l)||P&h)&&(g[b]=D1(P,s)):R<=s&&(n.expiredLanes|=P),y&=~P}}function tg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function r0(){var n=yd;return yd<<=1,!(yd&4194240)&&(yd=64),n}function eg(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Pu(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-gi(s),n[s]=l}function O1(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-gi(l),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,l&=~y}}function ng(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-gi(l),g=1<<h;g&s|n[h]&s&&(n[h]|=s),l&=~g}}var Vt=0;function o0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var a0,ig,l0,u0,c0,sg=!1,Ad=[],er=null,nr=null,ir=null,Ru=new Map,Mu=new Map,sr=[],$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(n,s){switch(n){case"focusin":case"focusout":er=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Ru.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(s.pointerId)}}function Lu(n,s,l,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Gu(s),s!==null&&ig(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function z1(n,s,l,h,g){switch(s){case"focusin":return er=Lu(er,n,s,l,h,g),!0;case"dragenter":return nr=Lu(nr,n,s,l,h,g),!0;case"mouseover":return ir=Lu(ir,n,s,l,h,g),!0;case"pointerover":var y=g.pointerId;return Ru.set(y,Lu(Ru.get(y)||null,n,s,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Mu.set(y,Lu(Mu.get(y)||null,n,s,l,h,g)),!0}return!1}function d0(n){var s=so(n.target);if(s!==null){var l=io(s);if(l!==null){if(s=l.tag,s===13){if(s=Qv(l),s!==null){n.blockedOn=s,c0(n.priority,function(){l0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=og(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);Xp=h,l.target.dispatchEvent(h),Xp=null}else return s=Gu(l),s!==null&&ig(s),n.blockedOn=l,!1;s.shift()}return!0}function f0(n,s,l){Sd(n)&&l.delete(s)}function H1(){sg=!1,er!==null&&Sd(er)&&(er=null),nr!==null&&Sd(nr)&&(nr=null),ir!==null&&Sd(ir)&&(ir=null),Ru.forEach(f0),Mu.forEach(f0)}function Iu(n,s){n.blockedOn===s&&(n.blockedOn=null,sg||(sg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,H1)))}function Nu(n){function s(g){return Iu(g,n)}if(0<Ad.length){Iu(Ad[0],n);for(var l=1;l<Ad.length;l++){var h=Ad[l];h.blockedOn===n&&(h.blockedOn=null)}}for(er!==null&&Iu(er,n),nr!==null&&Iu(nr,n),ir!==null&&Iu(ir,n),Ru.forEach(s),Mu.forEach(s),l=0;l<sr.length;l++)h=sr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<sr.length&&(l=sr[0],l.blockedOn===null);)d0(l),l.blockedOn===null&&sr.shift()}var Da=D.ReactCurrentBatchConfig,bd=!0;function B1(n,s,l,h){var g=Vt,y=Da.transition;Da.transition=null;try{Vt=1,rg(n,s,l,h)}finally{Vt=g,Da.transition=y}}function j1(n,s,l,h){var g=Vt,y=Da.transition;Da.transition=null;try{Vt=4,rg(n,s,l,h)}finally{Vt=g,Da.transition=y}}function rg(n,s,l,h){if(bd){var g=og(n,s,l,h);if(g===null)_g(n,s,h,_d,l),h0(n,h);else if(z1(g,n,s,l,h))h.stopPropagation();else if(h0(n,h),s&4&&-1<$1.indexOf(n)){for(;g!==null;){var y=Gu(g);if(y!==null&&a0(y),y=og(n,s,l,h),y===null&&_g(n,s,h,_d,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else _g(n,s,h,null,l)}}var _d=null;function og(n,s,l,h){if(_d=null,n=qp(h),n=so(n),n!==null)if(s=io(n),s===null)n=null;else if(l=s.tag,l===13){if(n=Qv(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return _d=n,null}function p0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P1()){case Jp:return 1;case i0:return 4;case gd:case R1:return 16;case s0:return 536870912;default:return 16}default:return 16}}var rr=null,ag=null,Ed=null;function g0(){if(Ed)return Ed;var n,s=ag,l=s.length,h,g="value"in rr?rr.value:rr.textContent,y=g.length;for(n=0;n<l&&s[n]===g[n];n++);var b=l-n;for(h=1;h<=b&&s[l-h]===g[y-h];h++);return Ed=g.slice(n,1<h?1-h:void 0)}function xd(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Cd(){return!0}function m0(){return!1}function Ln(n){function s(l,h,g,y,b){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=b,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(l=n[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Cd:m0,this.isPropagationStopped=m0,this}return J(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Cd)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Cd)},persist:function(){},isPersistent:Cd}),s}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=Ln(Fa),Du=J({},Fa,{view:0,detail:0}),U1=Ln(Du),ug,cg,Fu,kd=J({},Du,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fu&&(Fu&&n.type==="mousemove"?(ug=n.screenX-Fu.screenX,cg=n.screenY-Fu.screenY):cg=ug=0,Fu=n),ug)},movementY:function(n){return"movementY"in n?n.movementY:cg}}),y0=Ln(kd),V1=J({},kd,{dataTransfer:0}),W1=Ln(V1),G1=J({},Du,{relatedTarget:0}),hg=Ln(G1),X1=J({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),q1=Ln(X1),Y1=J({},Fa,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),K1=Ln(Y1),Q1=J({},Fa,{data:0}),v0=Ln(Q1),Z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=t_[n])?!!s[n]:!1}function dg(){return e_}var n_=J({},Du,{key:function(n){if(n.key){var s=Z1[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?J1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dg,charCode:function(n){return n.type==="keypress"?xd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),i_=Ln(n_),s_=J({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w0=Ln(s_),r_=J({},Du,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dg}),o_=Ln(r_),a_=J({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),l_=Ln(a_),u_=J({},kd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),c_=Ln(u_),h_=[9,13,27,32],fg=c&&"CompositionEvent"in window,Ou=null;c&&"documentMode"in document&&(Ou=document.documentMode);var d_=c&&"TextEvent"in window&&!Ou,A0=c&&(!fg||Ou&&8<Ou&&11>=Ou),S0=" ",b0=!1;function _0(n,s){switch(n){case"keyup":return h_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Oa=!1;function f_(n,s){switch(n){case"compositionend":return E0(s);case"keypress":return s.which!==32?null:(b0=!0,S0);case"textInput":return n=s.data,n===S0&&b0?null:n;default:return null}}function p_(n,s){if(Oa)return n==="compositionend"||!fg&&_0(n,s)?(n=g0(),Ed=ag=rr=null,Oa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return A0&&s.locale!=="ko"?null:s.data;default:return null}}var g_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!g_[n.type]:s==="textarea"}function C0(n,s,l,h){Gv(h),s=Ld(s,"onChange"),0<s.length&&(l=new lg("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var $u=null,zu=null;function m_(n){V0(n,0)}function Td(n){var s=ja(n);if(Nv(s))return n}function y_(n,s){if(n==="change")return s}var k0=!1;if(c){var pg;if(c){var gg="oninput"in document;if(!gg){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),gg=typeof T0.oninput=="function"}pg=gg}else pg=!1;k0=pg&&(!document.documentMode||9<document.documentMode)}function P0(){$u&&($u.detachEvent("onpropertychange",R0),zu=$u=null)}function R0(n){if(n.propertyName==="value"&&Td(zu)){var s=[];C0(s,zu,n,qp(n)),Kv(m_,s)}}function v_(n,s,l){n==="focusin"?(P0(),$u=s,zu=l,$u.attachEvent("onpropertychange",R0)):n==="focusout"&&P0()}function w_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Td(zu)}function A_(n,s){if(n==="click")return Td(s)}function S_(n,s){if(n==="input"||n==="change")return Td(s)}function b_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var mi=typeof Object.is=="function"?Object.is:b_;function Hu(n,s){if(mi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!f.call(s,g)||!mi(n[g],s[g]))return!1}return!0}function M0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function L0(n,s){var l=M0(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=M0(l)}}function I0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?I0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function N0(){for(var n=window,s=hd();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=hd(n.document)}return s}function mg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function __(n){var s=N0(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&I0(l.ownerDocument.documentElement,l)){if(h!==null&&mg(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=L0(l,y);var b=L0(l,h);g&&b&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==b.node||n.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var E_=c&&"documentMode"in document&&11>=document.documentMode,$a=null,yg=null,Bu=null,vg=!1;function D0(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vg||$a==null||$a!==hd(h)||(h=$a,"selectionStart"in h&&mg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Bu&&Hu(Bu,h)||(Bu=h,h=Ld(yg,"onSelect"),0<h.length&&(s=new lg("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=$a)))}function Pd(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var za={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionend:Pd("Transition","TransitionEnd")},wg={},F0={};c&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Rd(n){if(wg[n])return wg[n];if(!za[n])return n;var s=za[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in F0)return wg[n]=s[l];return n}var O0=Rd("animationend"),$0=Rd("animationiteration"),z0=Rd("animationstart"),H0=Rd("transitionend"),B0=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(n,s){B0.set(n,s),o(s,[n])}for(var Ag=0;Ag<j0.length;Ag++){var Sg=j0[Ag],x_=Sg.toLowerCase(),C_=Sg[0].toUpperCase()+Sg.slice(1);or(x_,"on"+C_)}or(O0,"onAnimationEnd"),or($0,"onAnimationIteration"),or(z0,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(H0,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function U0(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,x1(h,s,void 0,n),n.currentTarget=null}function V0(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var b=h.length-1;0<=b;b--){var P=h[b],R=P.instance,$=P.currentTarget;if(P=P.listener,R!==y&&g.isPropagationStopped())break t;U0(g,P,$),y=R}else for(b=0;b<h.length;b++){if(P=h[b],R=P.instance,$=P.currentTarget,P=P.listener,R!==y&&g.isPropagationStopped())break t;U0(g,P,$),y=R}}}if(pd)throw n=Zp,pd=!1,Zp=null,n}function te(n,s){var l=s[Pg];l===void 0&&(l=s[Pg]=new Set);var h=n+"__bubble";l.has(h)||(W0(s,n,2,!1),l.add(h))}function bg(n,s,l){var h=0;s&&(h|=4),W0(l,n,h,s)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Uu(n){if(!n[Md]){n[Md]=!0,i.forEach(function(l){l!=="selectionchange"&&(k_.has(l)||bg(l,!1,n),bg(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Md]||(s[Md]=!0,bg("selectionchange",!1,s))}}function W0(n,s,l,h){switch(p0(s)){case 1:var g=B1;break;case 4:g=j1;break;default:g=rg}l=g.bind(null,s,l,n),g=void 0,!Qp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function _g(n,s,l,h,g){var y=h;if(!(s&1)&&!(s&2)&&h!==null)t:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var P=h.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(b===4)for(b=h.return;b!==null;){var R=b.tag;if((R===3||R===4)&&(R=b.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;b=b.return}for(;P!==null;){if(b=so(P),b===null)return;if(R=b.tag,R===5||R===6){h=y=b;continue t}P=P.parentNode}}h=h.return}Kv(function(){var $=y,V=qp(l),W=[];t:{var U=B0.get(n);if(U!==void 0){var nt=lg,lt=n;switch(n){case"keypress":if(xd(l)===0)break t;case"keydown":case"keyup":nt=i_;break;case"focusin":lt="focus",nt=hg;break;case"focusout":lt="blur",nt=hg;break;case"beforeblur":case"afterblur":nt=hg;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=y0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=W1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=o_;break;case O0:case $0:case z0:nt=q1;break;case H0:nt=l_;break;case"scroll":nt=U1;break;case"wheel":nt=c_;break;case"copy":case"cut":case"paste":nt=K1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=w0}var ut=(s&4)!==0,ge=!ut&&n==="scroll",N=ut?U!==null?U+"Capture":null:U;ut=[];for(var M=$,F;M!==null;){F=M;var G=F.stateNode;if(F.tag===5&&G!==null&&(F=G,N!==null&&(G=xu(M,N),G!=null&&ut.push(Vu(M,G,F)))),ge)break;M=M.return}0<ut.length&&(U=new nt(U,lt,null,l,V),W.push({event:U,listeners:ut}))}}if(!(s&7)){t:{if(U=n==="mouseover"||n==="pointerover",nt=n==="mouseout"||n==="pointerout",U&&l!==Xp&&(lt=l.relatedTarget||l.fromElement)&&(so(lt)||lt[hs]))break t;if((nt||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,nt?(lt=l.relatedTarget||l.toElement,nt=$,lt=lt?so(lt):null,lt!==null&&(ge=io(lt),lt!==ge||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(nt=null,lt=$),nt!==lt)){if(ut=y0,G="onMouseLeave",N="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ut=w0,G="onPointerLeave",N="onPointerEnter",M="pointer"),ge=nt==null?U:ja(nt),F=lt==null?U:ja(lt),U=new ut(G,M+"leave",nt,l,V),U.target=ge,U.relatedTarget=F,G=null,so(V)===$&&(ut=new ut(N,M+"enter",lt,l,V),ut.target=F,ut.relatedTarget=ge,G=ut),ge=G,nt&&lt)e:{for(ut=nt,N=lt,M=0,F=ut;F;F=Ha(F))M++;for(F=0,G=N;G;G=Ha(G))F++;for(;0<M-F;)ut=Ha(ut),M--;for(;0<F-M;)N=Ha(N),F--;for(;M--;){if(ut===N||N!==null&&ut===N.alternate)break e;ut=Ha(ut),N=Ha(N)}ut=null}else ut=null;nt!==null&&G0(W,U,nt,ut,!1),lt!==null&&ge!==null&&G0(W,ge,lt,ut,!0)}}t:{if(U=$?ja($):window,nt=U.nodeName&&U.nodeName.toLowerCase(),nt==="select"||nt==="input"&&U.type==="file")var ht=y_;else if(x0(U))if(k0)ht=S_;else{ht=w_;var gt=v_}else(nt=U.nodeName)&&nt.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(ht=A_);if(ht&&(ht=ht(n,$))){C0(W,ht,l,V);break t}gt&&gt(n,U,$),n==="focusout"&&(gt=U._wrapperState)&&gt.controlled&&U.type==="number"&&jp(U,"number",U.value)}switch(gt=$?ja($):window,n){case"focusin":(x0(gt)||gt.contentEditable==="true")&&($a=gt,yg=$,Bu=null);break;case"focusout":Bu=yg=$a=null;break;case"mousedown":vg=!0;break;case"contextmenu":case"mouseup":case"dragend":vg=!1,D0(W,l,V);break;case"selectionchange":if(E_)break;case"keydown":case"keyup":D0(W,l,V)}var mt;if(fg)t:{switch(n){case"compositionstart":var bt="onCompositionStart";break t;case"compositionend":bt="onCompositionEnd";break t;case"compositionupdate":bt="onCompositionUpdate";break t}bt=void 0}else Oa?_0(n,l)&&(bt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(bt="onCompositionStart");bt&&(A0&&l.locale!=="ko"&&(Oa||bt!=="onCompositionStart"?bt==="onCompositionEnd"&&Oa&&(mt=g0()):(rr=V,ag="value"in rr?rr.value:rr.textContent,Oa=!0)),gt=Ld($,bt),0<gt.length&&(bt=new v0(bt,n,null,l,V),W.push({event:bt,listeners:gt}),mt?bt.data=mt:(mt=E0(l),mt!==null&&(bt.data=mt)))),(mt=d_?f_(n,l):p_(n,l))&&($=Ld($,"onBeforeInput"),0<$.length&&(V=new v0("onBeforeInput","beforeinput",null,l,V),W.push({event:V,listeners:$}),V.data=mt))}V0(W,s)})}function Vu(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Ld(n,s){for(var l=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=xu(n,l),y!=null&&h.unshift(Vu(n,y,g)),y=xu(n,s),y!=null&&h.push(Vu(n,y,g))),n=n.return}return h}function Ha(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function G0(n,s,l,h,g){for(var y=s._reactName,b=[];l!==null&&l!==h;){var P=l,R=P.alternate,$=P.stateNode;if(R!==null&&R===h)break;P.tag===5&&$!==null&&(P=$,g?(R=xu(l,y),R!=null&&b.unshift(Vu(l,R,P))):g||(R=xu(l,y),R!=null&&b.push(Vu(l,R,P)))),l=l.return}b.length!==0&&n.push({event:s,listeners:b})}var T_=/\r\n?/g,P_=/\u0000|\uFFFD/g;function X0(n){return(typeof n=="string"?n:""+n).replace(T_,`
`).replace(P_,"")}function Id(n,s,l){if(s=X0(s),X0(n)!==s&&l)throw Error(e(425))}function Nd(){}var Eg=null,xg=null;function Cg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,R_=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,M_=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(n){return q0.resolve(null).then(n).catch(L_)}:kg;function L_(n){setTimeout(function(){throw n})}function Tg(n,s){var l=s,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(h===0){n.removeChild(g),Nu(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=g}while(l);Nu(s)}function ar(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Y0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Ba,Wu="__reactProps$"+Ba,hs="__reactContainer$"+Ba,Pg="__reactEvents$"+Ba,I_="__reactListeners$"+Ba,N_="__reactHandles$"+Ba;function so(n){var s=n[Hi];if(s)return s;for(var l=n.parentNode;l;){if(s=l[hs]||l[Hi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Y0(n);n!==null;){if(l=n[Hi])return l;n=Y0(n)}return s}n=l,l=n.parentNode}return null}function Gu(n){return n=n[Hi]||n[hs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ja(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Dd(n){return n[Wu]||null}var Rg=[],Ua=-1;function lr(n){return{current:n}}function ee(n){0>Ua||(n.current=Rg[Ua],Rg[Ua]=null,Ua--)}function Zt(n,s){Ua++,Rg[Ua]=n.current,n.current=s}var ur={},Xe=lr(ur),wn=lr(!1),ro=ur;function Va(n,s){var l=n.type.contextTypes;if(!l)return ur;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in l)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function An(n){return n=n.childContextTypes,n!=null}function Fd(){ee(wn),ee(Xe)}function K0(n,s,l){if(Xe.current!==ur)throw Error(e(168));Zt(Xe,s),Zt(wn,l)}function Q0(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(e(108,yt(n)||"Unknown",g));return J({},l,h)}function Od(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ur,ro=Xe.current,Zt(Xe,n),Zt(wn,wn.current),!0}function Z0(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=Q0(n,s,ro),h.__reactInternalMemoizedMergedChildContext=n,ee(wn),ee(Xe),Zt(Xe,n)):ee(wn),Zt(wn,l)}var ds=null,$d=!1,Mg=!1;function J0(n){ds===null?ds=[n]:ds.push(n)}function D_(n){$d=!0,J0(n)}function cr(){if(!Mg&&ds!==null){Mg=!0;var n=0,s=Vt;try{var l=ds;for(Vt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}ds=null,$d=!1}catch(g){throw ds!==null&&(ds=ds.slice(n+1)),e0(Jp,cr),g}finally{Vt=s,Mg=!1}}return null}var Wa=[],Ga=0,zd=null,Hd=0,Zn=[],Jn=0,oo=null,fs=1,ps="";function ao(n,s){Wa[Ga++]=Hd,Wa[Ga++]=zd,zd=n,Hd=s}function tw(n,s,l){Zn[Jn++]=fs,Zn[Jn++]=ps,Zn[Jn++]=oo,oo=n;var h=fs;n=ps;var g=32-gi(h)-1;h&=~(1<<g),l+=1;var y=32-gi(s)+g;if(30<y){var b=g-g%5;y=(h&(1<<b)-1).toString(32),h>>=b,g-=b,fs=1<<32-gi(s)+g|l<<g|h,ps=y+n}else fs=1<<y|l<<g|h,ps=n}function Lg(n){n.return!==null&&(ao(n,1),tw(n,1,0))}function Ig(n){for(;n===zd;)zd=Wa[--Ga],Wa[Ga]=null,Hd=Wa[--Ga],Wa[Ga]=null;for(;n===oo;)oo=Zn[--Jn],Zn[Jn]=null,ps=Zn[--Jn],Zn[Jn]=null,fs=Zn[--Jn],Zn[Jn]=null}var In=null,Nn=null,ie=!1,yi=null;function ew(n,s){var l=ii(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function nw(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,In=n,Nn=ar(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,In=n,Nn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=oo!==null?{id:fs,overflow:ps}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=ii(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,In=n,Nn=null,!0):!1;default:return!1}}function Ng(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dg(n){if(ie){var s=Nn;if(s){var l=s;if(!nw(n,s)){if(Ng(n))throw Error(e(418));s=ar(l.nextSibling);var h=In;s&&nw(n,s)?ew(h,l):(n.flags=n.flags&-4097|2,ie=!1,In=n)}}else{if(Ng(n))throw Error(e(418));n.flags=n.flags&-4097|2,ie=!1,In=n}}}function iw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;In=n}function Bd(n){if(n!==In)return!1;if(!ie)return iw(n),ie=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Cg(n.type,n.memoizedProps)),s&&(s=Nn)){if(Ng(n))throw sw(),Error(e(418));for(;s;)ew(n,s),s=ar(s.nextSibling)}if(iw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Nn=ar(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Nn=null}}else Nn=In?ar(n.stateNode.nextSibling):null;return!0}function sw(){for(var n=Nn;n;)n=ar(n.nextSibling)}function Xa(){Nn=In=null,ie=!1}function Fg(n){yi===null?yi=[n]:yi.push(n)}var F_=D.ReactCurrentBatchConfig;function Xu(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(b){var P=g.refs;b===null?delete P[y]:P[y]=b},s._stringRef=y,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function jd(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function rw(n){var s=n._init;return s(n._payload)}function ow(n){function s(N,M){if(n){var F=N.deletions;F===null?(N.deletions=[M],N.flags|=16):F.push(M)}}function l(N,M){if(!n)return null;for(;M!==null;)s(N,M),M=M.sibling;return null}function h(N,M){for(N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function g(N,M){return N=vr(N,M),N.index=0,N.sibling=null,N}function y(N,M,F){return N.index=F,n?(F=N.alternate,F!==null?(F=F.index,F<M?(N.flags|=2,M):F):(N.flags|=2,M)):(N.flags|=1048576,M)}function b(N){return n&&N.alternate===null&&(N.flags|=2),N}function P(N,M,F,G){return M===null||M.tag!==6?(M=km(F,N.mode,G),M.return=N,M):(M=g(M,F),M.return=N,M)}function R(N,M,F,G){var ht=F.type;return ht===B?V(N,M,F.props.children,G,F.key):M!==null&&(M.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===q&&rw(ht)===M.type)?(G=g(M,F.props),G.ref=Xu(N,M,F),G.return=N,G):(G=ff(F.type,F.key,F.props,null,N.mode,G),G.ref=Xu(N,M,F),G.return=N,G)}function $(N,M,F,G){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=Tm(F,N.mode,G),M.return=N,M):(M=g(M,F.children||[]),M.return=N,M)}function V(N,M,F,G,ht){return M===null||M.tag!==7?(M=mo(F,N.mode,G,ht),M.return=N,M):(M=g(M,F),M.return=N,M)}function W(N,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return M=km(""+M,N.mode,F),M.return=N,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return F=ff(M.type,M.key,M.props,null,N.mode,F),F.ref=Xu(N,null,M),F.return=N,F;case H:return M=Tm(M,N.mode,F),M.return=N,M;case q:var G=M._init;return W(N,G(M._payload),F)}if(bu(M)||ct(M))return M=mo(M,N.mode,F,null),M.return=N,M;jd(N,M)}return null}function U(N,M,F,G){var ht=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ht!==null?null:P(N,M,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case z:return F.key===ht?R(N,M,F,G):null;case H:return F.key===ht?$(N,M,F,G):null;case q:return ht=F._init,U(N,M,ht(F._payload),G)}if(bu(F)||ct(F))return ht!==null?null:V(N,M,F,G,null);jd(N,F)}return null}function nt(N,M,F,G,ht){if(typeof G=="string"&&G!==""||typeof G=="number")return N=N.get(F)||null,P(M,N,""+G,ht);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case z:return N=N.get(G.key===null?F:G.key)||null,R(M,N,G,ht);case H:return N=N.get(G.key===null?F:G.key)||null,$(M,N,G,ht);case q:var gt=G._init;return nt(N,M,F,gt(G._payload),ht)}if(bu(G)||ct(G))return N=N.get(F)||null,V(M,N,G,ht,null);jd(M,G)}return null}function lt(N,M,F,G){for(var ht=null,gt=null,mt=M,bt=M=0,Le=null;mt!==null&&bt<F.length;bt++){mt.index>bt?(Le=mt,mt=null):Le=mt.sibling;var Ht=U(N,mt,F[bt],G);if(Ht===null){mt===null&&(mt=Le);break}n&&mt&&Ht.alternate===null&&s(N,mt),M=y(Ht,M,bt),gt===null?ht=Ht:gt.sibling=Ht,gt=Ht,mt=Le}if(bt===F.length)return l(N,mt),ie&&ao(N,bt),ht;if(mt===null){for(;bt<F.length;bt++)mt=W(N,F[bt],G),mt!==null&&(M=y(mt,M,bt),gt===null?ht=mt:gt.sibling=mt,gt=mt);return ie&&ao(N,bt),ht}for(mt=h(N,mt);bt<F.length;bt++)Le=nt(mt,N,bt,F[bt],G),Le!==null&&(n&&Le.alternate!==null&&mt.delete(Le.key===null?bt:Le.key),M=y(Le,M,bt),gt===null?ht=Le:gt.sibling=Le,gt=Le);return n&&mt.forEach(function(wr){return s(N,wr)}),ie&&ao(N,bt),ht}function ut(N,M,F,G){var ht=ct(F);if(typeof ht!="function")throw Error(e(150));if(F=ht.call(F),F==null)throw Error(e(151));for(var gt=ht=null,mt=M,bt=M=0,Le=null,Ht=F.next();mt!==null&&!Ht.done;bt++,Ht=F.next()){mt.index>bt?(Le=mt,mt=null):Le=mt.sibling;var wr=U(N,mt,Ht.value,G);if(wr===null){mt===null&&(mt=Le);break}n&&mt&&wr.alternate===null&&s(N,mt),M=y(wr,M,bt),gt===null?ht=wr:gt.sibling=wr,gt=wr,mt=Le}if(Ht.done)return l(N,mt),ie&&ao(N,bt),ht;if(mt===null){for(;!Ht.done;bt++,Ht=F.next())Ht=W(N,Ht.value,G),Ht!==null&&(M=y(Ht,M,bt),gt===null?ht=Ht:gt.sibling=Ht,gt=Ht);return ie&&ao(N,bt),ht}for(mt=h(N,mt);!Ht.done;bt++,Ht=F.next())Ht=nt(mt,N,bt,Ht.value,G),Ht!==null&&(n&&Ht.alternate!==null&&mt.delete(Ht.key===null?bt:Ht.key),M=y(Ht,M,bt),gt===null?ht=Ht:gt.sibling=Ht,gt=Ht);return n&&mt.forEach(function(pE){return s(N,pE)}),ie&&ao(N,bt),ht}function ge(N,M,F,G){if(typeof F=="object"&&F!==null&&F.type===B&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case z:t:{for(var ht=F.key,gt=M;gt!==null;){if(gt.key===ht){if(ht=F.type,ht===B){if(gt.tag===7){l(N,gt.sibling),M=g(gt,F.props.children),M.return=N,N=M;break t}}else if(gt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===q&&rw(ht)===gt.type){l(N,gt.sibling),M=g(gt,F.props),M.ref=Xu(N,gt,F),M.return=N,N=M;break t}l(N,gt);break}else s(N,gt);gt=gt.sibling}F.type===B?(M=mo(F.props.children,N.mode,G,F.key),M.return=N,N=M):(G=ff(F.type,F.key,F.props,null,N.mode,G),G.ref=Xu(N,M,F),G.return=N,N=G)}return b(N);case H:t:{for(gt=F.key;M!==null;){if(M.key===gt)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){l(N,M.sibling),M=g(M,F.children||[]),M.return=N,N=M;break t}else{l(N,M);break}else s(N,M);M=M.sibling}M=Tm(F,N.mode,G),M.return=N,N=M}return b(N);case q:return gt=F._init,ge(N,M,gt(F._payload),G)}if(bu(F))return lt(N,M,F,G);if(ct(F))return ut(N,M,F,G);jd(N,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,M!==null&&M.tag===6?(l(N,M.sibling),M=g(M,F),M.return=N,N=M):(l(N,M),M=km(F,N.mode,G),M.return=N,N=M),b(N)):l(N,M)}return ge}var qa=ow(!0),aw=ow(!1),Ud=lr(null),Vd=null,Ya=null,Og=null;function $g(){Og=Ya=Vd=null}function zg(n){var s=Ud.current;ee(Ud),n._currentValue=s}function Hg(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function Ka(n,s){Vd=n,Og=Ya=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(Sn=!0),n.firstContext=null)}function ti(n){var s=n._currentValue;if(Og!==n)if(n={context:n,memoizedValue:s,next:null},Ya===null){if(Vd===null)throw Error(e(308));Ya=n,Vd.dependencies={lanes:0,firstContext:n}}else Ya=Ya.next=n;return s}var lo=null;function Bg(n){lo===null?lo=[n]:lo.push(n)}function lw(n,s,l,h){var g=s.interleaved;return g===null?(l.next=l,Bg(s)):(l.next=g.next,g.next=l),s.interleaved=l,gs(n,h)}function gs(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var hr=!1;function jg(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ms(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function dr(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,$t&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,gs(n,l)}return g=h.interleaved,g===null?(s.next=s,Bg(h)):(s.next=g.next,g.next=s),h.interleaved=s,gs(n,l)}function Wd(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ng(n,l)}}function cw(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?g=y=b:y=y.next=b,l=l.next}while(l!==null);y===null?g=y=s:y=y.next=s}else g=y=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function Gd(n,s,l,h){var g=n.updateQueue;hr=!1;var y=g.firstBaseUpdate,b=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var R=P,$=R.next;R.next=null,b===null?y=$:b.next=$,b=R;var V=n.alternate;V!==null&&(V=V.updateQueue,P=V.lastBaseUpdate,P!==b&&(P===null?V.firstBaseUpdate=$:P.next=$,V.lastBaseUpdate=R))}if(y!==null){var W=g.baseState;b=0,V=$=R=null,P=y;do{var U=P.lane,nt=P.eventTime;if((h&U)===U){V!==null&&(V=V.next={eventTime:nt,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var lt=n,ut=P;switch(U=s,nt=l,ut.tag){case 1:if(lt=ut.payload,typeof lt=="function"){W=lt.call(nt,W,U);break t}W=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=ut.payload,U=typeof lt=="function"?lt.call(nt,W,U):lt,U==null)break t;W=J({},W,U);break t;case 2:hr=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,U=g.effects,U===null?g.effects=[P]:U.push(P))}else nt={eventTime:nt,lane:U,tag:P.tag,payload:P.payload,callback:P.callback,next:null},V===null?($=V=nt,R=W):V=V.next=nt,b|=U;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;U=P,P=U.next,U.next=null,g.lastBaseUpdate=U,g.shared.pending=null}}while(!0);if(V===null&&(R=W),g.baseState=R,g.firstBaseUpdate=$,g.lastBaseUpdate=V,s=g.shared.interleaved,s!==null){g=s;do b|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);ho|=b,n.lanes=b,n.memoizedState=W}}function hw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=l,typeof g!="function")throw Error(e(191,g));g.call(h)}}}var qu={},Bi=lr(qu),Yu=lr(qu),Ku=lr(qu);function uo(n){if(n===qu)throw Error(e(174));return n}function Ug(n,s){switch(Zt(Ku,s),Zt(Yu,n),Zt(Bi,qu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Vp(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Vp(s,n)}ee(Bi),Zt(Bi,s)}function Qa(){ee(Bi),ee(Yu),ee(Ku)}function dw(n){uo(Ku.current);var s=uo(Bi.current),l=Vp(s,n.type);s!==l&&(Zt(Yu,n),Zt(Bi,l))}function Vg(n){Yu.current===n&&(ee(Bi),ee(Yu))}var ae=lr(0);function Xd(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wg=[];function Gg(){for(var n=0;n<Wg.length;n++)Wg[n]._workInProgressVersionPrimary=null;Wg.length=0}var qd=D.ReactCurrentDispatcher,Xg=D.ReactCurrentBatchConfig,co=0,le=null,_e=null,Re=null,Yd=!1,Qu=!1,Zu=0,O_=0;function qe(){throw Error(e(321))}function qg(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!mi(n[l],s[l]))return!1;return!0}function Yg(n,s,l,h,g,y){if(co=y,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,qd.current=n===null||n.memoizedState===null?B_:j_,n=l(h,g),Qu){y=0;do{if(Qu=!1,Zu=0,25<=y)throw Error(e(301));y+=1,Re=_e=null,s.updateQueue=null,qd.current=U_,n=l(h,g)}while(Qu)}if(qd.current=Zd,s=_e!==null&&_e.next!==null,co=0,Re=_e=le=null,Yd=!1,s)throw Error(e(300));return n}function Kg(){var n=Zu!==0;return Zu=0,n}function ji(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?le.memoizedState=Re=n:Re=Re.next=n,Re}function ei(){if(_e===null){var n=le.alternate;n=n!==null?n.memoizedState:null}else n=_e.next;var s=Re===null?le.memoizedState:Re.next;if(s!==null)Re=s,_e=n;else{if(n===null)throw Error(e(310));_e=n,n={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Re===null?le.memoizedState=Re=n:Re=Re.next=n}return Re}function Ju(n,s){return typeof s=="function"?s(n):s}function Qg(n){var s=ei(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=_e,g=h.baseQueue,y=l.pending;if(y!==null){if(g!==null){var b=g.next;g.next=y.next,y.next=b}h.baseQueue=g=y,l.pending=null}if(g!==null){y=g.next,h=h.baseState;var P=b=null,R=null,$=y;do{var V=$.lane;if((co&V)===V)R!==null&&(R=R.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var W={lane:V,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};R===null?(P=R=W,b=h):R=R.next=W,le.lanes|=V,ho|=V}$=$.next}while($!==null&&$!==y);R===null?b=h:R.next=P,mi(h,s.memoizedState)||(Sn=!0),s.memoizedState=h,s.baseState=b,s.baseQueue=R,l.lastRenderedState=h}if(n=l.interleaved,n!==null){g=n;do y=g.lane,le.lanes|=y,ho|=y,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Zg(n){var s=ei(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,y=s.memoizedState;if(g!==null){l.pending=null;var b=g=g.next;do y=n(y,b.action),b=b.next;while(b!==g);mi(y,s.memoizedState)||(Sn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function fw(){}function pw(n,s){var l=le,h=ei(),g=s(),y=!mi(h.memoizedState,g);if(y&&(h.memoizedState=g,Sn=!0),h=h.queue,Jg(yw.bind(null,l,h,n),[n]),h.getSnapshot!==s||y||Re!==null&&Re.memoizedState.tag&1){if(l.flags|=2048,tc(9,mw.bind(null,l,h,g,s),void 0,null),Me===null)throw Error(e(349));co&30||gw(l,s,g)}return g}function gw(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function mw(n,s,l,h){s.value=l,s.getSnapshot=h,vw(s)&&ww(n)}function yw(n,s,l){return l(function(){vw(s)&&ww(n)})}function vw(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!mi(n,l)}catch{return!0}}function ww(n){var s=gs(n,1);s!==null&&Si(s,n,1,-1)}function Aw(n){var s=ji();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ju,lastRenderedState:n},s.queue=n,n=n.dispatch=H_.bind(null,le,n),[s.memoizedState,n]}function tc(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function Sw(){return ei().memoizedState}function Kd(n,s,l,h){var g=ji();le.flags|=n,g.memoizedState=tc(1|s,l,void 0,h===void 0?null:h)}function Qd(n,s,l,h){var g=ei();h=h===void 0?null:h;var y=void 0;if(_e!==null){var b=_e.memoizedState;if(y=b.destroy,h!==null&&qg(h,b.deps)){g.memoizedState=tc(s,l,y,h);return}}le.flags|=n,g.memoizedState=tc(1|s,l,y,h)}function bw(n,s){return Kd(8390656,8,n,s)}function Jg(n,s){return Qd(2048,8,n,s)}function _w(n,s){return Qd(4,2,n,s)}function Ew(n,s){return Qd(4,4,n,s)}function xw(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Cw(n,s,l){return l=l!=null?l.concat([n]):null,Qd(4,4,xw.bind(null,s,n),l)}function tm(){}function kw(n,s){var l=ei();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&qg(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Tw(n,s){var l=ei();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&qg(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Pw(n,s,l){return co&21?(mi(l,s)||(l=r0(),le.lanes|=l,ho|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,Sn=!0),n.memoizedState=l)}function $_(n,s){var l=Vt;Vt=l!==0&&4>l?l:4,n(!0);var h=Xg.transition;Xg.transition={};try{n(!1),s()}finally{Vt=l,Xg.transition=h}}function Rw(){return ei().memoizedState}function z_(n,s,l){var h=mr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Mw(n))Lw(s,l);else if(l=lw(n,s,l,h),l!==null){var g=un();Si(l,n,h,g),Iw(l,s,h)}}function H_(n,s,l){var h=mr(n),g={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Mw(n))Lw(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var b=s.lastRenderedState,P=y(b,l);if(g.hasEagerState=!0,g.eagerState=P,mi(P,b)){var R=s.interleaved;R===null?(g.next=g,Bg(s)):(g.next=R.next,R.next=g),s.interleaved=g;return}}catch{}finally{}l=lw(n,s,g,h),l!==null&&(g=un(),Si(l,n,h,g),Iw(l,s,h))}}function Mw(n){var s=n.alternate;return n===le||s!==null&&s===le}function Lw(n,s){Qu=Yd=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Iw(n,s,l){if(l&4194240){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ng(n,l)}}var Zd={readContext:ti,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},B_={readContext:ti,useCallback:function(n,s){return ji().memoizedState=[n,s===void 0?null:s],n},useContext:ti,useEffect:bw,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Kd(4194308,4,xw.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Kd(4194308,4,n,s)},useInsertionEffect:function(n,s){return Kd(4,2,n,s)},useMemo:function(n,s){var l=ji();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=ji();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=z_.bind(null,le,n),[h.memoizedState,n]},useRef:function(n){var s=ji();return n={current:n},s.memoizedState=n},useState:Aw,useDebugValue:tm,useDeferredValue:function(n){return ji().memoizedState=n},useTransition:function(){var n=Aw(!1),s=n[0];return n=$_.bind(null,n[1]),ji().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=le,g=ji();if(ie){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),Me===null)throw Error(e(349));co&30||gw(h,s,l)}g.memoizedState=l;var y={value:l,getSnapshot:s};return g.queue=y,bw(yw.bind(null,h,y,n),[n]),h.flags|=2048,tc(9,mw.bind(null,h,y,l,s),void 0,null),l},useId:function(){var n=ji(),s=Me.identifierPrefix;if(ie){var l=ps,h=fs;l=(h&~(1<<32-gi(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Zu++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=O_++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},j_={readContext:ti,useCallback:kw,useContext:ti,useEffect:Jg,useImperativeHandle:Cw,useInsertionEffect:_w,useLayoutEffect:Ew,useMemo:Tw,useReducer:Qg,useRef:Sw,useState:function(){return Qg(Ju)},useDebugValue:tm,useDeferredValue:function(n){var s=ei();return Pw(s,_e.memoizedState,n)},useTransition:function(){var n=Qg(Ju)[0],s=ei().memoizedState;return[n,s]},useMutableSource:fw,useSyncExternalStore:pw,useId:Rw,unstable_isNewReconciler:!1},U_={readContext:ti,useCallback:kw,useContext:ti,useEffect:Jg,useImperativeHandle:Cw,useInsertionEffect:_w,useLayoutEffect:Ew,useMemo:Tw,useReducer:Zg,useRef:Sw,useState:function(){return Zg(Ju)},useDebugValue:tm,useDeferredValue:function(n){var s=ei();return _e===null?s.memoizedState=n:Pw(s,_e.memoizedState,n)},useTransition:function(){var n=Zg(Ju)[0],s=ei().memoizedState;return[n,s]},useMutableSource:fw,useSyncExternalStore:pw,useId:Rw,unstable_isNewReconciler:!1};function vi(n,s){if(n&&n.defaultProps){s=J({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function em(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:J({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Jd={isMounted:function(n){return(n=n._reactInternals)?io(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=un(),g=mr(n),y=ms(h,g);y.payload=s,l!=null&&(y.callback=l),s=dr(n,y,g),s!==null&&(Si(s,n,g,h),Wd(s,n,g))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=un(),g=mr(n),y=ms(h,g);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=dr(n,y,g),s!==null&&(Si(s,n,g,h),Wd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=un(),h=mr(n),g=ms(l,h);g.tag=2,s!=null&&(g.callback=s),s=dr(n,g,h),s!==null&&(Si(s,n,h,l),Wd(s,n,h))}};function Nw(n,s,l,h,g,y,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,b):s.prototype&&s.prototype.isPureReactComponent?!Hu(l,h)||!Hu(g,y):!0}function Dw(n,s,l){var h=!1,g=ur,y=s.contextType;return typeof y=="object"&&y!==null?y=ti(y):(g=An(s)?ro:Xe.current,h=s.contextTypes,y=(h=h!=null)?Va(n,g):ur),s=new s(l,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Jd,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function Fw(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&Jd.enqueueReplaceState(s,s.state,null)}function nm(n,s,l,h){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs={},jg(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=ti(y):(y=An(s)?ro:Xe.current,g.context=Va(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(em(n,s,y,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Jd.enqueueReplaceState(g,g.state,null),Gd(n,l,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Za(n,s){try{var l="",h=s;do l+=Lt(h),h=h.return;while(h);var g=l}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function im(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function sm(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var V_=typeof WeakMap=="function"?WeakMap:Map;function Ow(n,s,l){l=ms(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){af||(af=!0,wm=h),sm(n,s)},l}function $w(n,s,l){l=ms(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;l.payload=function(){return h(g)},l.callback=function(){sm(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){sm(n,s),typeof h!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),l}function zw(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new V_;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(g.add(l),n=sE.bind(null,n,s,l),s.then(n,n))}function Hw(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Bw(n,s,l,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=ms(-1,1),s.tag=2,dr(l,s,1))),l.lanes|=1),n)}var W_=D.ReactCurrentOwner,Sn=!1;function ln(n,s,l,h){s.child=n===null?aw(s,null,l,h):qa(s,n.child,l,h)}function jw(n,s,l,h,g){l=l.render;var y=s.ref;return Ka(s,g),h=Yg(n,s,l,h,y,g),l=Kg(),n!==null&&!Sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ys(n,s,g)):(ie&&l&&Lg(s),s.flags|=1,ln(n,s,h,g),s.child)}function Uw(n,s,l,h,g){if(n===null){var y=l.type;return typeof y=="function"&&!Cm(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Vw(n,s,y,h,g)):(n=ff(l.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&g)){var b=y.memoizedProps;if(l=l.compare,l=l!==null?l:Hu,l(b,h)&&n.ref===s.ref)return ys(n,s,g)}return s.flags|=1,n=vr(y,h),n.ref=s.ref,n.return=s,s.child=n}function Vw(n,s,l,h,g){if(n!==null){var y=n.memoizedProps;if(Hu(y,h)&&n.ref===s.ref)if(Sn=!1,s.pendingProps=h=y,(n.lanes&g)!==0)n.flags&131072&&(Sn=!0);else return s.lanes=n.lanes,ys(n,s,g)}return rm(n,s,l,h,g)}function Ww(n,s,l){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(tl,Dn),Dn|=l;else{if(!(l&1073741824))return n=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Zt(tl,Dn),Dn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Zt(tl,Dn),Dn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Zt(tl,Dn),Dn|=h;return ln(n,s,g,l),s.child}function Gw(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function rm(n,s,l,h,g){var y=An(l)?ro:Xe.current;return y=Va(s,y),Ka(s,g),l=Yg(n,s,l,h,y,g),h=Kg(),n!==null&&!Sn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ys(n,s,g)):(ie&&h&&Lg(s),s.flags|=1,ln(n,s,l,g),s.child)}function Xw(n,s,l,h,g){if(An(l)){var y=!0;Od(s)}else y=!1;if(Ka(s,g),s.stateNode===null)ef(n,s),Dw(s,l,h),nm(s,l,h,g),h=!0;else if(n===null){var b=s.stateNode,P=s.memoizedProps;b.props=P;var R=b.context,$=l.contextType;typeof $=="object"&&$!==null?$=ti($):($=An(l)?ro:Xe.current,$=Va(s,$));var V=l.getDerivedStateFromProps,W=typeof V=="function"||typeof b.getSnapshotBeforeUpdate=="function";W||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==h||R!==$)&&Fw(s,b,h,$),hr=!1;var U=s.memoizedState;b.state=U,Gd(s,h,b,g),R=s.memoizedState,P!==h||U!==R||wn.current||hr?(typeof V=="function"&&(em(s,l,V,h),R=s.memoizedState),(P=hr||Nw(s,l,P,h,U,R,$))?(W||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),b.props=h,b.state=R,b.context=$,h=P):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,uw(n,s),P=s.memoizedProps,$=s.type===s.elementType?P:vi(s.type,P),b.props=$,W=s.pendingProps,U=b.context,R=l.contextType,typeof R=="object"&&R!==null?R=ti(R):(R=An(l)?ro:Xe.current,R=Va(s,R));var nt=l.getDerivedStateFromProps;(V=typeof nt=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==W||U!==R)&&Fw(s,b,h,R),hr=!1,U=s.memoizedState,b.state=U,Gd(s,h,b,g);var lt=s.memoizedState;P!==W||U!==lt||wn.current||hr?(typeof nt=="function"&&(em(s,l,nt,h),lt=s.memoizedState),($=hr||Nw(s,l,$,h,U,lt,R)||!1)?(V||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,lt,R),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,lt,R)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=lt),b.props=h,b.state=lt,b.context=R,h=$):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&U===n.memoizedState||(s.flags|=1024),h=!1)}return om(n,s,l,h,y,g)}function om(n,s,l,h,g,y){Gw(n,s);var b=(s.flags&128)!==0;if(!h&&!b)return g&&Z0(s,l,!1),ys(n,s,y);h=s.stateNode,W_.current=s;var P=b&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&b?(s.child=qa(s,n.child,null,y),s.child=qa(s,null,P,y)):ln(n,s,P,y),s.memoizedState=h.state,g&&Z0(s,l,!0),s.child}function qw(n){var s=n.stateNode;s.pendingContext?K0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&K0(n,s.context,!1),Ug(n,s.containerInfo)}function Yw(n,s,l,h,g){return Xa(),Fg(g),s.flags|=256,ln(n,s,l,h),s.child}var am={dehydrated:null,treeContext:null,retryLane:0};function lm(n){return{baseLanes:n,cachePool:null,transitions:null}}function Kw(n,s,l){var h=s.pendingProps,g=ae.current,y=!1,b=(s.flags&128)!==0,P;if((P=b)||(P=n!==null&&n.memoizedState===null?!1:(g&2)!==0),P?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Zt(ae,g&1),n===null)return Dg(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(b=h.children,n=h.fallback,y?(h=s.mode,y=s.child,b={mode:"hidden",children:b},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=b):y=pf(b,h,0,null),n=mo(n,h,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=lm(l),s.memoizedState=am,n):um(s,b));if(g=n.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return G_(n,s,b,h,P,g,l);if(y){y=h.fallback,b=s.mode,g=n.child,P=g.sibling;var R={mode:"hidden",children:h.children};return!(b&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=vr(g,R),h.subtreeFlags=g.subtreeFlags&14680064),P!==null?y=vr(P,y):(y=mo(y,b,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,b=n.child.memoizedState,b=b===null?lm(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},y.memoizedState=b,y.childLanes=n.childLanes&~l,s.memoizedState=am,h}return y=n.child,n=y.sibling,h=vr(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function um(n,s){return s=pf({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function tf(n,s,l,h){return h!==null&&Fg(h),qa(s,n.child,null,l),n=um(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function G_(n,s,l,h,g,y,b){if(l)return s.flags&256?(s.flags&=-257,h=im(Error(e(422))),tf(n,s,b,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=pf({mode:"visible",children:h.children},g,0,null),y=mo(y,g,b,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&qa(s,n.child,null,b),s.child.memoizedState=lm(b),s.memoizedState=am,y);if(!(s.mode&1))return tf(n,s,b,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var P=h.dgst;return h=P,y=Error(e(419)),h=im(y,h,void 0),tf(n,s,b,h)}if(P=(b&n.childLanes)!==0,Sn||P){if(h=Me,h!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|b)?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,gs(n,g),Si(h,n,g,-1))}return xm(),h=im(Error(e(421))),tf(n,s,b,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=rE.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,Nn=ar(g.nextSibling),In=s,ie=!0,yi=null,n!==null&&(Zn[Jn++]=fs,Zn[Jn++]=ps,Zn[Jn++]=oo,fs=n.id,ps=n.overflow,oo=s),s=um(s,h.children),s.flags|=4096,s)}function Qw(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Hg(n.return,s,l)}function cm(n,s,l,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function Zw(n,s,l){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(ln(n,s,h.children,l),h=ae.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Qw(n,l,s);else if(n.tag===19)Qw(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Zt(ae,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&Xd(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),cm(s,!1,g,l,y);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Xd(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}cm(s,!0,l,null,y);break;case"together":cm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ef(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ys(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),ho|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=vr(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=vr(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function X_(n,s,l){switch(s.tag){case 3:qw(s),Xa();break;case 5:dw(s);break;case 1:An(s.type)&&Od(s);break;case 4:Ug(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Zt(Ud,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Zt(ae,ae.current&1),s.flags|=128,null):l&s.child.childLanes?Kw(n,s,l):(Zt(ae,ae.current&1),n=ys(n,s,l),n!==null?n.sibling:null);Zt(ae,ae.current&1);break;case 19:if(h=(l&s.childLanes)!==0,n.flags&128){if(h)return Zw(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Zt(ae,ae.current),h)break;return null;case 22:case 23:return s.lanes=0,Ww(n,s,l)}return ys(n,s,l)}var Jw,hm,tA,eA;Jw=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},hm=function(){},tA=function(n,s,l,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,uo(Bi.current);var y=null;switch(l){case"input":g=Hp(n,g),h=Hp(n,h),y=[];break;case"select":g=J({},g,{value:void 0}),h=J({},h,{value:void 0}),y=[];break;case"textarea":g=Up(n,g),h=Up(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Nd)}Wp(l,h);var b;l=null;for($ in g)if(!h.hasOwnProperty($)&&g.hasOwnProperty($)&&g[$]!=null)if($==="style"){var P=g[$];for(b in P)P.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(r.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var R=h[$];if(P=g!=null?g[$]:void 0,h.hasOwnProperty($)&&R!==P&&(R!=null||P!=null))if($==="style")if(P){for(b in P)!P.hasOwnProperty(b)||R&&R.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in R)R.hasOwnProperty(b)&&P[b]!==R[b]&&(l||(l={}),l[b]=R[b])}else l||(y||(y=[]),y.push($,l)),l=R;else $==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,P=P?P.__html:void 0,R!=null&&P!==R&&(y=y||[]).push($,R)):$==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push($,""+R):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(r.hasOwnProperty($)?(R!=null&&$==="onScroll"&&te("scroll",n),y||P===R||(y=[])):(y=y||[]).push($,R))}l&&(y=y||[]).push("style",l);var $=y;(s.updateQueue=$)&&(s.flags|=4)}},eA=function(n,s,l,h){l!==h&&(s.flags|=4)};function ec(n,s){if(!ie)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ye(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function q_(n,s,l){var h=s.pendingProps;switch(Ig(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(s),null;case 1:return An(s.type)&&Fd(),Ye(s),null;case 3:return h=s.stateNode,Qa(),ee(wn),ee(Xe),Gg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Bd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,yi!==null&&(bm(yi),yi=null))),hm(n,s),Ye(s),null;case 5:Vg(s);var g=uo(Ku.current);if(l=s.type,n!==null&&s.stateNode!=null)tA(n,s,l,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return Ye(s),null}if(n=uo(Bi.current),Bd(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Hi]=s,h[Wu]=y,n=(s.mode&1)!==0,l){case"dialog":te("cancel",h),te("close",h);break;case"iframe":case"object":case"embed":te("load",h);break;case"video":case"audio":for(g=0;g<ju.length;g++)te(ju[g],h);break;case"source":te("error",h);break;case"img":case"image":case"link":te("error",h),te("load",h);break;case"details":te("toggle",h);break;case"input":Dv(h,y),te("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},te("invalid",h);break;case"textarea":$v(h,y),te("invalid",h)}Wp(l,y),g=null;for(var b in y)if(y.hasOwnProperty(b)){var P=y[b];b==="children"?typeof P=="string"?h.textContent!==P&&(y.suppressHydrationWarning!==!0&&Id(h.textContent,P,n),g=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Id(h.textContent,P,n),g=["children",""+P]):r.hasOwnProperty(b)&&P!=null&&b==="onScroll"&&te("scroll",h)}switch(l){case"input":cd(h),Ov(h,y,!0);break;case"textarea":cd(h),Hv(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Nd)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bv(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=b.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=b.createElement(l,{is:h.is}):(n=b.createElement(l),l==="select"&&(b=n,h.multiple?b.multiple=!0:h.size&&(b.size=h.size))):n=b.createElementNS(n,l),n[Hi]=s,n[Wu]=h,Jw(n,s,!1,!1),s.stateNode=n;t:{switch(b=Gp(l,h),l){case"dialog":te("cancel",n),te("close",n),g=h;break;case"iframe":case"object":case"embed":te("load",n),g=h;break;case"video":case"audio":for(g=0;g<ju.length;g++)te(ju[g],n);g=h;break;case"source":te("error",n),g=h;break;case"img":case"image":case"link":te("error",n),te("load",n),g=h;break;case"details":te("toggle",n),g=h;break;case"input":Dv(n,h),g=Hp(n,h),te("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=J({},h,{value:void 0}),te("invalid",n);break;case"textarea":$v(n,h),g=Up(n,h),te("invalid",n);break;default:g=h}Wp(l,g),P=g;for(y in P)if(P.hasOwnProperty(y)){var R=P[y];y==="style"?Vv(n,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&jv(n,R)):y==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&_u(n,R):typeof R=="number"&&_u(n,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?R!=null&&y==="onScroll"&&te("scroll",n):R!=null&&O(n,y,R,b))}switch(l){case"input":cd(n),Ov(n,h,!1);break;case"textarea":cd(n),Hv(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ft(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?La(n,!!h.multiple,y,!1):h.defaultValue!=null&&La(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Nd)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ye(s),null;case 6:if(n&&s.stateNode!=null)eA(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=uo(Ku.current),uo(Bi.current),Bd(s)){if(h=s.stateNode,l=s.memoizedProps,h[Hi]=s,(y=h.nodeValue!==l)&&(n=In,n!==null))switch(n.tag){case 3:Id(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Id(h.nodeValue,l,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Hi]=s,s.stateNode=h}return Ye(s),null;case 13:if(ee(ae),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ie&&Nn!==null&&s.mode&1&&!(s.flags&128))sw(),Xa(),s.flags|=98560,y=!1;else if(y=Bd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[Hi]=s}else Xa(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ye(s),y=!1}else yi!==null&&(bm(yi),yi=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||ae.current&1?Ee===0&&(Ee=3):xm())),s.updateQueue!==null&&(s.flags|=4),Ye(s),null);case 4:return Qa(),hm(n,s),n===null&&Uu(s.stateNode.containerInfo),Ye(s),null;case 10:return zg(s.type._context),Ye(s),null;case 17:return An(s.type)&&Fd(),Ye(s),null;case 19:if(ee(ae),y=s.memoizedState,y===null)return Ye(s),null;if(h=(s.flags&128)!==0,b=y.rendering,b===null)if(h)ec(y,!1);else{if(Ee!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(b=Xd(n),b!==null){for(s.flags|=128,ec(y,!1),h=b.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,n=h,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,n=b.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Zt(ae,ae.current&1|2),s.child}n=n.sibling}y.tail!==null&&pe()>el&&(s.flags|=128,h=!0,ec(y,!1),s.lanes=4194304)}else{if(!h)if(n=Xd(b),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),ec(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!ie)return Ye(s),null}else 2*pe()-y.renderingStartTime>el&&l!==1073741824&&(s.flags|=128,h=!0,ec(y,!1),s.lanes=4194304);y.isBackwards?(b.sibling=s.child,s.child=b):(l=y.last,l!==null?l.sibling=b:s.child=b,y.last=b)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=pe(),s.sibling=null,l=ae.current,Zt(ae,h?l&1|2:l&1),s):(Ye(s),null);case 22:case 23:return Em(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Dn&1073741824&&(Ye(s),s.subtreeFlags&6&&(s.flags|=8192)):Ye(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function Y_(n,s){switch(Ig(s),s.tag){case 1:return An(s.type)&&Fd(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Qa(),ee(wn),ee(Xe),Gg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Vg(s),null;case 13:if(ee(ae),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));Xa()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(ae),null;case 4:return Qa(),null;case 10:return zg(s.type._context),null;case 22:case 23:return Em(),null;case 24:return null;default:return null}}var nf=!1,Ke=!1,K_=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Ja(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){de(n,s,h)}else l.current=null}function dm(n,s,l){try{l()}catch(h){de(n,s,h)}}var nA=!1;function Q_(n,s){if(Eg=bd,n=N0(),mg(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var b=0,P=-1,R=-1,$=0,V=0,W=n,U=null;e:for(;;){for(var nt;W!==l||g!==0&&W.nodeType!==3||(P=b+g),W!==y||h!==0&&W.nodeType!==3||(R=b+h),W.nodeType===3&&(b+=W.nodeValue.length),(nt=W.firstChild)!==null;)U=W,W=nt;for(;;){if(W===n)break e;if(U===l&&++$===g&&(P=b),U===y&&++V===h&&(R=b),(nt=W.nextSibling)!==null)break;W=U,U=W.parentNode}W=nt}l=P===-1||R===-1?null:{start:P,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(xg={focusedElem:n,selectionRange:l},bd=!1,rt=s;rt!==null;)if(s=rt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,rt=n;else for(;rt!==null;){s=rt;try{var lt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var ut=lt.memoizedProps,ge=lt.memoizedState,N=s.stateNode,M=N.getSnapshotBeforeUpdate(s.elementType===s.type?ut:vi(s.type,ut),ge);N.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(G){de(s,s.return,G)}if(n=s.sibling,n!==null){n.return=s.return,rt=n;break}rt=s.return}return lt=nA,nA=!1,lt}function nc(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&dm(s,l,y)}g=g.next}while(g!==h)}}function sf(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function fm(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function iA(n){var s=n.alternate;s!==null&&(n.alternate=null,iA(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Hi],delete s[Wu],delete s[Pg],delete s[I_],delete s[N_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sA(n){return n.tag===5||n.tag===3||n.tag===4}function rA(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||sA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Nd));else if(h!==4&&(n=n.child,n!==null))for(pm(n,s,l),n=n.sibling;n!==null;)pm(n,s,l),n=n.sibling}function gm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(gm(n,s,l),n=n.sibling;n!==null;)gm(n,s,l),n=n.sibling}var ze=null,wi=!1;function fr(n,s,l){for(l=l.child;l!==null;)oA(n,s,l),l=l.sibling}function oA(n,s,l){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(md,l)}catch{}switch(l.tag){case 5:Ke||Ja(l,s);case 6:var h=ze,g=wi;ze=null,fr(n,s,l),ze=h,wi=g,ze!==null&&(wi?(n=ze,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):ze.removeChild(l.stateNode));break;case 18:ze!==null&&(wi?(n=ze,l=l.stateNode,n.nodeType===8?Tg(n.parentNode,l):n.nodeType===1&&Tg(n,l),Nu(n)):Tg(ze,l.stateNode));break;case 4:h=ze,g=wi,ze=l.stateNode.containerInfo,wi=!0,fr(n,s,l),ze=h,wi=g;break;case 0:case 11:case 14:case 15:if(!Ke&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,b=y.destroy;y=y.tag,b!==void 0&&(y&2||y&4)&&dm(l,s,b),g=g.next}while(g!==h)}fr(n,s,l);break;case 1:if(!Ke&&(Ja(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){de(l,s,P)}fr(n,s,l);break;case 21:fr(n,s,l);break;case 22:l.mode&1?(Ke=(h=Ke)||l.memoizedState!==null,fr(n,s,l),Ke=h):fr(n,s,l);break;default:fr(n,s,l)}}function aA(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new K_),s.forEach(function(h){var g=oE.bind(null,n,h);l.has(h)||(l.add(h),h.then(g,g))})}}function Ai(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];try{var y=n,b=s,P=b;t:for(;P!==null;){switch(P.tag){case 5:ze=P.stateNode,wi=!1;break t;case 3:ze=P.stateNode.containerInfo,wi=!0;break t;case 4:ze=P.stateNode.containerInfo,wi=!0;break t}P=P.return}if(ze===null)throw Error(e(160));oA(y,b,g),ze=null,wi=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch($){de(g,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)lA(s,n),s=s.sibling}function lA(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ai(s,n),Ui(n),h&4){try{nc(3,n,n.return),sf(3,n)}catch(ut){de(n,n.return,ut)}try{nc(5,n,n.return)}catch(ut){de(n,n.return,ut)}}break;case 1:Ai(s,n),Ui(n),h&512&&l!==null&&Ja(l,l.return);break;case 5:if(Ai(s,n),Ui(n),h&512&&l!==null&&Ja(l,l.return),n.flags&32){var g=n.stateNode;try{_u(g,"")}catch(ut){de(n,n.return,ut)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,b=l!==null?l.memoizedProps:y,P=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Fv(g,y),Gp(P,b);var $=Gp(P,y);for(b=0;b<R.length;b+=2){var V=R[b],W=R[b+1];V==="style"?Vv(g,W):V==="dangerouslySetInnerHTML"?jv(g,W):V==="children"?_u(g,W):O(g,V,W,$)}switch(P){case"input":Bp(g,y);break;case"textarea":zv(g,y);break;case"select":var U=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var nt=y.value;nt!=null?La(g,!!y.multiple,nt,!1):U!==!!y.multiple&&(y.defaultValue!=null?La(g,!!y.multiple,y.defaultValue,!0):La(g,!!y.multiple,y.multiple?[]:"",!1))}g[Wu]=y}catch(ut){de(n,n.return,ut)}}break;case 6:if(Ai(s,n),Ui(n),h&4){if(n.stateNode===null)throw Error(e(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(ut){de(n,n.return,ut)}}break;case 3:if(Ai(s,n),Ui(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Nu(s.containerInfo)}catch(ut){de(n,n.return,ut)}break;case 4:Ai(s,n),Ui(n);break;case 13:Ai(s,n),Ui(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(vm=pe())),h&4&&aA(n);break;case 22:if(V=l!==null&&l.memoizedState!==null,n.mode&1?(Ke=($=Ke)||V,Ai(s,n),Ke=$):Ai(s,n),Ui(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!V&&n.mode&1)for(rt=n,V=n.child;V!==null;){for(W=rt=V;rt!==null;){switch(U=rt,nt=U.child,U.tag){case 0:case 11:case 14:case 15:nc(4,U,U.return);break;case 1:Ja(U,U.return);var lt=U.stateNode;if(typeof lt.componentWillUnmount=="function"){h=U,l=U.return;try{s=h,lt.props=s.memoizedProps,lt.state=s.memoizedState,lt.componentWillUnmount()}catch(ut){de(h,l,ut)}}break;case 5:Ja(U,U.return);break;case 22:if(U.memoizedState!==null){hA(W);continue}}nt!==null?(nt.return=U,rt=nt):hA(W)}V=V.sibling}t:for(V=null,W=n;;){if(W.tag===5){if(V===null){V=W;try{g=W.stateNode,$?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=W.stateNode,R=W.memoizedProps.style,b=R!=null&&R.hasOwnProperty("display")?R.display:null,P.style.display=Uv("display",b))}catch(ut){de(n,n.return,ut)}}}else if(W.tag===6){if(V===null)try{W.stateNode.nodeValue=$?"":W.memoizedProps}catch(ut){de(n,n.return,ut)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===n)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===n)break t;for(;W.sibling===null;){if(W.return===null||W.return===n)break t;V===W&&(V=null),W=W.return}V===W&&(V=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:Ai(s,n),Ui(n),h&4&&aA(n);break;case 21:break;default:Ai(s,n),Ui(n)}}function Ui(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(sA(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(_u(g,""),h.flags&=-33);var y=rA(n);gm(n,y,g);break;case 3:case 4:var b=h.stateNode.containerInfo,P=rA(n);pm(n,P,b);break;default:throw Error(e(161))}}catch(R){de(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Z_(n,s,l){rt=n,uA(n)}function uA(n,s,l){for(var h=(n.mode&1)!==0;rt!==null;){var g=rt,y=g.child;if(g.tag===22&&h){var b=g.memoizedState!==null||nf;if(!b){var P=g.alternate,R=P!==null&&P.memoizedState!==null||Ke;P=nf;var $=Ke;if(nf=b,(Ke=R)&&!$)for(rt=g;rt!==null;)b=rt,R=b.child,b.tag===22&&b.memoizedState!==null?dA(g):R!==null?(R.return=b,rt=R):dA(g);for(;y!==null;)rt=y,uA(y),y=y.sibling;rt=g,nf=P,Ke=$}cA(n)}else g.subtreeFlags&8772&&y!==null?(y.return=g,rt=y):cA(n)}}function cA(n){for(;rt!==null;){var s=rt;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Ke||sf(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ke)if(l===null)h.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:vi(s.type,l.memoizedProps);h.componentDidUpdate(g,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&hw(s,y,h);break;case 3:var b=s.updateQueue;if(b!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}hw(s,b,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var V=$.memoizedState;if(V!==null){var W=V.dehydrated;W!==null&&Nu(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Ke||s.flags&512&&fm(s)}catch(U){de(s,s.return,U)}}if(s===n){rt=null;break}if(l=s.sibling,l!==null){l.return=s.return,rt=l;break}rt=s.return}}function hA(n){for(;rt!==null;){var s=rt;if(s===n){rt=null;break}var l=s.sibling;if(l!==null){l.return=s.return,rt=l;break}rt=s.return}}function dA(n){for(;rt!==null;){var s=rt;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{sf(4,s)}catch(R){de(s,l,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(R){de(s,g,R)}}var y=s.return;try{fm(s)}catch(R){de(s,y,R)}break;case 5:var b=s.return;try{fm(s)}catch(R){de(s,b,R)}}}catch(R){de(s,s.return,R)}if(s===n){rt=null;break}var P=s.sibling;if(P!==null){P.return=s.return,rt=P;break}rt=s.return}}var J_=Math.ceil,rf=D.ReactCurrentDispatcher,mm=D.ReactCurrentOwner,ni=D.ReactCurrentBatchConfig,$t=0,Me=null,we=null,He=0,Dn=0,tl=lr(0),Ee=0,ic=null,ho=0,of=0,ym=0,sc=null,bn=null,vm=0,el=1/0,vs=null,af=!1,wm=null,pr=null,lf=!1,gr=null,uf=0,rc=0,Am=null,cf=-1,hf=0;function un(){return $t&6?pe():cf!==-1?cf:cf=pe()}function mr(n){return n.mode&1?$t&2&&He!==0?He&-He:F_.transition!==null?(hf===0&&(hf=r0()),hf):(n=Vt,n!==0||(n=window.event,n=n===void 0?16:p0(n.type)),n):1}function Si(n,s,l,h){if(50<rc)throw rc=0,Am=null,Error(e(185));Pu(n,l,h),(!($t&2)||n!==Me)&&(n===Me&&(!($t&2)&&(of|=l),Ee===4&&yr(n,He)),_n(n,h),l===1&&$t===0&&!(s.mode&1)&&(el=pe()+500,$d&&cr()))}function _n(n,s){var l=n.callbackNode;F1(n,s);var h=wd(n,n===Me?He:0);if(h===0)l!==null&&n0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&n0(l),s===1)n.tag===0?D_(pA.bind(null,n)):J0(pA.bind(null,n)),M_(function(){!($t&6)&&cr()}),l=null;else{switch(o0(h)){case 1:l=Jp;break;case 4:l=i0;break;case 16:l=gd;break;case 536870912:l=s0;break;default:l=gd}l=bA(l,fA.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function fA(n,s){if(cf=-1,hf=0,$t&6)throw Error(e(327));var l=n.callbackNode;if(nl()&&n.callbackNode!==l)return null;var h=wd(n,n===Me?He:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=df(n,h);else{s=h;var g=$t;$t|=2;var y=mA();(Me!==n||He!==s)&&(vs=null,el=pe()+500,po(n,s));do try{nE();break}catch(P){gA(n,P)}while(!0);$g(),rf.current=y,$t=g,we!==null?s=0:(Me=null,He=0,s=Ee)}if(s!==0){if(s===2&&(g=tg(n),g!==0&&(h=g,s=Sm(n,g))),s===1)throw l=ic,po(n,0),yr(n,h),_n(n,pe()),l;if(s===6)yr(n,h);else{if(g=n.current.alternate,!(h&30)&&!tE(g)&&(s=df(n,h),s===2&&(y=tg(n),y!==0&&(h=y,s=Sm(n,y))),s===1))throw l=ic,po(n,0),yr(n,h),_n(n,pe()),l;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:go(n,bn,vs);break;case 3:if(yr(n,h),(h&130023424)===h&&(s=vm+500-pe(),10<s)){if(wd(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){un(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=kg(go.bind(null,n,bn,vs),s);break}go(n,bn,vs);break;case 4:if(yr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var b=31-gi(h);y=1<<b,b=s[b],b>g&&(g=b),h&=~y}if(h=g,h=pe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*J_(h/1960))-h,10<h){n.timeoutHandle=kg(go.bind(null,n,bn,vs),h);break}go(n,bn,vs);break;case 5:go(n,bn,vs);break;default:throw Error(e(329))}}}return _n(n,pe()),n.callbackNode===l?fA.bind(null,n):null}function Sm(n,s){var l=sc;return n.current.memoizedState.isDehydrated&&(po(n,s).flags|=256),n=df(n,s),n!==2&&(s=bn,bn=l,s!==null&&bm(s)),n}function bm(n){bn===null?bn=n:bn.push.apply(bn,n)}function tE(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!mi(y(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yr(n,s){for(s&=~ym,s&=~of,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-gi(s),h=1<<l;n[l]=-1,s&=~h}}function pA(n){if($t&6)throw Error(e(327));nl();var s=wd(n,0);if(!(s&1))return _n(n,pe()),null;var l=df(n,s);if(n.tag!==0&&l===2){var h=tg(n);h!==0&&(s=h,l=Sm(n,h))}if(l===1)throw l=ic,po(n,0),yr(n,s),_n(n,pe()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,go(n,bn,vs),_n(n,pe()),null}function _m(n,s){var l=$t;$t|=1;try{return n(s)}finally{$t=l,$t===0&&(el=pe()+500,$d&&cr())}}function fo(n){gr!==null&&gr.tag===0&&!($t&6)&&nl();var s=$t;$t|=1;var l=ni.transition,h=Vt;try{if(ni.transition=null,Vt=1,n)return n()}finally{Vt=h,ni.transition=l,$t=s,!($t&6)&&cr()}}function Em(){Dn=tl.current,ee(tl)}function po(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,R_(l)),we!==null)for(l=we.return;l!==null;){var h=l;switch(Ig(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Fd();break;case 3:Qa(),ee(wn),ee(Xe),Gg();break;case 5:Vg(h);break;case 4:Qa();break;case 13:ee(ae);break;case 19:ee(ae);break;case 10:zg(h.type._context);break;case 22:case 23:Em()}l=l.return}if(Me=n,we=n=vr(n.current,null),He=Dn=s,Ee=0,ic=null,ym=of=ho=0,bn=sc=null,lo!==null){for(s=0;s<lo.length;s++)if(l=lo[s],h=l.interleaved,h!==null){l.interleaved=null;var g=h.next,y=l.pending;if(y!==null){var b=y.next;y.next=g,h.next=b}l.pending=h}lo=null}return n}function gA(n,s){do{var l=we;try{if($g(),qd.current=Zd,Yd){for(var h=le.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Yd=!1}if(co=0,Re=_e=le=null,Qu=!1,Zu=0,mm.current=null,l===null||l.return===null){Ee=1,ic=s,we=null;break}t:{var y=n,b=l.return,P=l,R=s;if(s=He,P.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var $=R,V=P,W=V.tag;if(!(V.mode&1)&&(W===0||W===11||W===15)){var U=V.alternate;U?(V.updateQueue=U.updateQueue,V.memoizedState=U.memoizedState,V.lanes=U.lanes):(V.updateQueue=null,V.memoizedState=null)}var nt=Hw(b);if(nt!==null){nt.flags&=-257,Bw(nt,b,P,y,s),nt.mode&1&&zw(y,$,s),s=nt,R=$;var lt=s.updateQueue;if(lt===null){var ut=new Set;ut.add(R),s.updateQueue=ut}else lt.add(R);break t}else{if(!(s&1)){zw(y,$,s),xm();break t}R=Error(e(426))}}else if(ie&&P.mode&1){var ge=Hw(b);if(ge!==null){!(ge.flags&65536)&&(ge.flags|=256),Bw(ge,b,P,y,s),Fg(Za(R,P));break t}}y=R=Za(R,P),Ee!==4&&(Ee=2),sc===null?sc=[y]:sc.push(y),y=b;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var N=Ow(y,R,s);cw(y,N);break t;case 1:P=R;var M=y.type,F=y.stateNode;if(!(y.flags&128)&&(typeof M.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(pr===null||!pr.has(F)))){y.flags|=65536,s&=-s,y.lanes|=s;var G=$w(y,P,s);cw(y,G);break t}}y=y.return}while(y!==null)}vA(l)}catch(ht){s=ht,we===l&&l!==null&&(we=l=l.return);continue}break}while(!0)}function mA(){var n=rf.current;return rf.current=Zd,n===null?Zd:n}function xm(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Me===null||!(ho&268435455)&&!(of&268435455)||yr(Me,He)}function df(n,s){var l=$t;$t|=2;var h=mA();(Me!==n||He!==s)&&(vs=null,po(n,s));do try{eE();break}catch(g){gA(n,g)}while(!0);if($g(),$t=l,rf.current=h,we!==null)throw Error(e(261));return Me=null,He=0,Ee}function eE(){for(;we!==null;)yA(we)}function nE(){for(;we!==null&&!k1();)yA(we)}function yA(n){var s=SA(n.alternate,n,Dn);n.memoizedProps=n.pendingProps,s===null?vA(n):we=s,mm.current=null}function vA(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=Y_(l,s),l!==null){l.flags&=32767,we=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ee=6,we=null;return}}else if(l=q_(l,s,Dn),l!==null){we=l;return}if(s=s.sibling,s!==null){we=s;return}we=s=n}while(s!==null);Ee===0&&(Ee=5)}function go(n,s,l){var h=Vt,g=ni.transition;try{ni.transition=null,Vt=1,iE(n,s,l,h)}finally{ni.transition=g,Vt=h}return null}function iE(n,s,l,h){do nl();while(gr!==null);if($t&6)throw Error(e(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if(O1(n,y),n===Me&&(we=Me=null,He=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||lf||(lf=!0,bA(gd,function(){return nl(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=ni.transition,ni.transition=null;var b=Vt;Vt=1;var P=$t;$t|=4,mm.current=null,Q_(n,l),lA(l,n),__(xg),bd=!!Eg,xg=Eg=null,n.current=l,Z_(l),T1(),$t=P,Vt=b,ni.transition=y}else n.current=l;if(lf&&(lf=!1,gr=n,uf=g),y=n.pendingLanes,y===0&&(pr=null),M1(l.stateNode),_n(n,pe()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)g=s[l],h(g.value,{componentStack:g.stack,digest:g.digest});if(af)throw af=!1,n=wm,wm=null,n;return uf&1&&n.tag!==0&&nl(),y=n.pendingLanes,y&1?n===Am?rc++:(rc=0,Am=n):rc=0,cr(),null}function nl(){if(gr!==null){var n=o0(uf),s=ni.transition,l=Vt;try{if(ni.transition=null,Vt=16>n?16:n,gr===null)var h=!1;else{if(n=gr,gr=null,uf=0,$t&6)throw Error(e(331));var g=$t;for($t|=4,rt=n.current;rt!==null;){var y=rt,b=y.child;if(rt.flags&16){var P=y.deletions;if(P!==null){for(var R=0;R<P.length;R++){var $=P[R];for(rt=$;rt!==null;){var V=rt;switch(V.tag){case 0:case 11:case 15:nc(8,V,y)}var W=V.child;if(W!==null)W.return=V,rt=W;else for(;rt!==null;){V=rt;var U=V.sibling,nt=V.return;if(iA(V),V===$){rt=null;break}if(U!==null){U.return=nt,rt=U;break}rt=nt}}}var lt=y.alternate;if(lt!==null){var ut=lt.child;if(ut!==null){lt.child=null;do{var ge=ut.sibling;ut.sibling=null,ut=ge}while(ut!==null)}}rt=y}}if(y.subtreeFlags&2064&&b!==null)b.return=y,rt=b;else t:for(;rt!==null;){if(y=rt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:nc(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,rt=N;break t}rt=y.return}}var M=n.current;for(rt=M;rt!==null;){b=rt;var F=b.child;if(b.subtreeFlags&2064&&F!==null)F.return=b,rt=F;else t:for(b=M;rt!==null;){if(P=rt,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:sf(9,P)}}catch(ht){de(P,P.return,ht)}if(P===b){rt=null;break t}var G=P.sibling;if(G!==null){G.return=P.return,rt=G;break t}rt=P.return}}if($t=g,cr(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(md,n)}catch{}h=!0}return h}finally{Vt=l,ni.transition=s}}return!1}function wA(n,s,l){s=Za(l,s),s=Ow(n,s,1),n=dr(n,s,1),s=un(),n!==null&&(Pu(n,1,s),_n(n,s))}function de(n,s,l){if(n.tag===3)wA(n,n,l);else for(;s!==null;){if(s.tag===3){wA(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(pr===null||!pr.has(h))){n=Za(l,n),n=$w(s,n,1),s=dr(s,n,1),n=un(),s!==null&&(Pu(s,1,n),_n(s,n));break}}s=s.return}}function sE(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=un(),n.pingedLanes|=n.suspendedLanes&l,Me===n&&(He&l)===l&&(Ee===4||Ee===3&&(He&130023424)===He&&500>pe()-vm?po(n,0):ym|=l),_n(n,s)}function AA(n,s){s===0&&(n.mode&1?(s=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):s=1);var l=un();n=gs(n,s),n!==null&&(Pu(n,s,l),_n(n,l))}function rE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),AA(n,l)}function oE(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),AA(n,l)}var SA;SA=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||wn.current)Sn=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return Sn=!1,X_(n,s,l);Sn=!!(n.flags&131072)}else Sn=!1,ie&&s.flags&1048576&&tw(s,Hd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;ef(n,s),n=s.pendingProps;var g=Va(s,Xe.current);Ka(s,l),g=Yg(null,s,h,n,g,l);var y=Kg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,An(h)?(y=!0,Od(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,jg(s),g.updater=Jd,s.stateNode=g,g._reactInternals=s,nm(s,h,n,l),s=om(null,s,h,!0,y,l)):(s.tag=0,ie&&y&&Lg(s),ln(null,s,g,l),s=s.child),s;case 16:h=s.elementType;t:{switch(ef(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=lE(h),n=vi(h,n),g){case 0:s=rm(null,s,h,n,l);break t;case 1:s=Xw(null,s,h,n,l);break t;case 11:s=jw(null,s,h,n,l);break t;case 14:s=Uw(null,s,h,vi(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),rm(n,s,h,g,l);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),Xw(n,s,h,g,l);case 3:t:{if(qw(s),n===null)throw Error(e(387));h=s.pendingProps,y=s.memoizedState,g=y.element,uw(n,s),Gd(s,h,null,l);var b=s.memoizedState;if(h=b.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=Za(Error(e(423)),s),s=Yw(n,s,h,l,g);break t}else if(h!==g){g=Za(Error(e(424)),s),s=Yw(n,s,h,l,g);break t}else for(Nn=ar(s.stateNode.containerInfo.firstChild),In=s,ie=!0,yi=null,l=aw(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Xa(),h===g){s=ys(n,s,l);break t}ln(n,s,h,l)}s=s.child}return s;case 5:return dw(s),n===null&&Dg(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,b=g.children,Cg(h,g)?b=null:y!==null&&Cg(h,y)&&(s.flags|=32),Gw(n,s),ln(n,s,b,l),s.child;case 6:return n===null&&Dg(s),null;case 13:return Kw(n,s,l);case 4:return Ug(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=qa(s,null,h,l):ln(n,s,h,l),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),jw(n,s,h,g,l);case 7:return ln(n,s,s.pendingProps,l),s.child;case 8:return ln(n,s,s.pendingProps.children,l),s.child;case 12:return ln(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,b=g.value,Zt(Ud,h._currentValue),h._currentValue=b,y!==null)if(mi(y.value,b)){if(y.children===g.children&&!wn.current){s=ys(n,s,l);break t}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){b=y.child;for(var R=P.firstContext;R!==null;){if(R.context===h){if(y.tag===1){R=ms(-1,l&-l),R.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var V=$.pending;V===null?R.next=R:(R.next=V.next,V.next=R),$.pending=R}}y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),Hg(y.return,l,s),P.lanes|=l;break}R=R.next}}else if(y.tag===10)b=y.type===s.type?null:y.child;else if(y.tag===18){if(b=y.return,b===null)throw Error(e(341));b.lanes|=l,P=b.alternate,P!==null&&(P.lanes|=l),Hg(b,l,s),b=y.sibling}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===s){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}ln(n,s,g.children,l),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Ka(s,l),g=ti(g),h=h(g),s.flags|=1,ln(n,s,h,l),s.child;case 14:return h=s.type,g=vi(h,s.pendingProps),g=vi(h.type,g),Uw(n,s,h,g,l);case 15:return Vw(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:vi(h,g),ef(n,s),s.tag=1,An(h)?(n=!0,Od(s)):n=!1,Ka(s,l),Dw(s,h,g),nm(s,h,g,l),om(null,s,h,!0,n,l);case 19:return Zw(n,s,l);case 22:return Ww(n,s,l)}throw Error(e(156,s.tag))};function bA(n,s){return e0(n,s)}function aE(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(n,s,l,h){return new aE(n,s,l,h)}function Cm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function lE(n){if(typeof n=="function")return Cm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===_t)return 11;if(n===Ut)return 14}return 2}function vr(n,s){var l=n.alternate;return l===null?(l=ii(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function ff(n,s,l,h,g,y){var b=2;if(h=n,typeof n=="function")Cm(n)&&(b=1);else if(typeof n=="string")b=5;else t:switch(n){case B:return mo(l.children,g,y,s);case Y:b=8,g|=8;break;case Z:return n=ii(12,l,s,g|2),n.elementType=Z,n.lanes=y,n;case Mt:return n=ii(13,l,s,g),n.elementType=Mt,n.lanes=y,n;case xt:return n=ii(19,l,s,g),n.elementType=xt,n.lanes=y,n;case et:return pf(l,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case st:b=10;break t;case tt:b=9;break t;case _t:b=11;break t;case Ut:b=14;break t;case q:b=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=ii(b,l,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function mo(n,s,l,h){return n=ii(7,n,h,s),n.lanes=l,n}function pf(n,s,l,h){return n=ii(22,n,h,s),n.elementType=et,n.lanes=l,n.stateNode={isHidden:!1},n}function km(n,s,l){return n=ii(6,n,null,s),n.lanes=l,n}function Tm(n,s,l){return s=ii(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function uE(n,s,l,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eg(0),this.expirationTimes=eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eg(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Pm(n,s,l,h,g,y,b,P,R){return n=new uE(n,s,l,P,R),s===1?(s=1,y===!0&&(s|=8)):s=0,y=ii(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},jg(y),n}function cE(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function _A(n){if(!n)return ur;n=n._reactInternals;t:{if(io(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(An(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(An(l))return Q0(n,l,s)}return s}function EA(n,s,l,h,g,y,b,P,R){return n=Pm(l,h,!0,n,g,y,b,P,R),n.context=_A(null),l=n.current,h=un(),g=mr(l),y=ms(h,g),y.callback=s??null,dr(l,y,g),n.current.lanes=g,Pu(n,g,h),_n(n,h),n}function gf(n,s,l,h){var g=s.current,y=un(),b=mr(g);return l=_A(l),s.context===null?s.context=l:s.pendingContext=l,s=ms(y,b),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=dr(g,s,b),n!==null&&(Si(n,g,b,y),Wd(n,g,b)),b}function mf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function xA(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Rm(n,s){xA(n,s),(n=n.alternate)&&xA(n,s)}var CA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Mm(n){this._internalRoot=n}yf.prototype.render=Mm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));gf(n,s,null,null)},yf.prototype.unmount=Mm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;fo(function(){gf(null,n,null,null)}),s[hs]=null}};function yf(n){this._internalRoot=n}yf.prototype.unstable_scheduleHydration=function(n){if(n){var s=u0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<sr.length&&s!==0&&s<sr[l].priority;l++);sr.splice(l,0,n),l===0&&d0(n)}};function Lm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kA(){}function hE(n,s,l,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var $=mf(b);y.call($)}}var b=EA(s,h,n,0,null,!1,!1,"",kA);return n._reactRootContainer=b,n[hs]=b.current,Uu(n.nodeType===8?n.parentNode:n),fo(),b}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var P=h;h=function(){var $=mf(R);P.call($)}}var R=Pm(n,0,!1,null,null,!1,!1,"",kA);return n._reactRootContainer=R,n[hs]=R.current,Uu(n.nodeType===8?n.parentNode:n),fo(function(){gf(s,R,l,h)}),R}function wf(n,s,l,h,g){var y=l._reactRootContainer;if(y){var b=y;if(typeof g=="function"){var P=g;g=function(){var R=mf(b);P.call(R)}}gf(s,b,n,g)}else b=hE(l,s,n,g,h);return mf(b)}a0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Tu(s.pendingLanes);l!==0&&(ng(s,l|1),_n(s,pe()),!($t&6)&&(el=pe()+500,cr()))}break;case 13:fo(function(){var h=gs(n,1);if(h!==null){var g=un();Si(h,n,1,g)}}),Rm(n,1)}},ig=function(n){if(n.tag===13){var s=gs(n,134217728);if(s!==null){var l=un();Si(s,n,134217728,l)}Rm(n,134217728)}},l0=function(n){if(n.tag===13){var s=mr(n),l=gs(n,s);if(l!==null){var h=un();Si(l,n,s,h)}Rm(n,s)}},u0=function(){return Vt},c0=function(n,s){var l=Vt;try{return Vt=n,s()}finally{Vt=l}},Yp=function(n,s,l){switch(s){case"input":if(Bp(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var g=Dd(h);if(!g)throw Error(e(90));Nv(h),Bp(h,g)}}}break;case"textarea":zv(n,l);break;case"select":s=l.value,s!=null&&La(n,!!l.multiple,s,!1)}},qv=_m,Yv=fo;var dE={usingClientEntryPoint:!1,Events:[Gu,ja,Dd,Gv,Xv,_m]},oc={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fE={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Jv(n),n===null?null:n.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Af.isDisabled&&Af.supportsFiber)try{md=Af.inject(fE),zi=Af}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dE,En.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(s))throw Error(e(200));return cE(n,s,null,l)},En.createRoot=function(n,s){if(!Lm(n))throw Error(e(299));var l=!1,h="",g=CA;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Pm(n,1,!1,null,null,l,!1,h,g),n[hs]=s.current,Uu(n.nodeType===8?n.parentNode:n),new Mm(s)},En.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=Jv(s),n=n===null?null:n.stateNode,n},En.flushSync=function(n){return fo(n)},En.hydrate=function(n,s,l){if(!vf(s))throw Error(e(200));return wf(null,n,s,!0,l)},En.hydrateRoot=function(n,s,l){if(!Lm(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,g=!1,y="",b=CA;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),s=EA(s,null,n,1,l??null,g,!1,y,b),n[hs]=s.current,Uu(n),h)for(n=0;n<h.length;n++)l=h[n],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new yf(s)},En.render=function(n,s,l){if(!vf(s))throw Error(e(200));return wf(null,n,s,!1,l)},En.unmountComponentAtNode=function(n){if(!vf(n))throw Error(e(40));return n._reactRootContainer?(fo(function(){wf(null,null,n,!1,function(){n._reactRootContainer=null,n[hs]=null})}),!0):!1},En.unstable_batchedUpdates=_m,En.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!vf(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return wf(n,s,l,!1,h)},En.version="18.3.1-next-f1338f8080-20240426",En}var FA;function _E(){if(FA)return Fm.exports;FA=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Fm.exports=bE(),Fm.exports}var OA;function EE(){if(OA)return Sf;OA=1;var d=_E();return Sf.createRoot=d.createRoot,Sf.hydrateRoot=d.hydrateRoot,Sf}var xE=EE();function Ca(d){return Object.keys(d)}function zm(d){return d&&typeof d=="object"&&!Array.isArray(d)}function fv(d,t){const e={...d},i=t;return zm(d)&&zm(t)&&Object.keys(t).forEach(r=>{zm(i[r])&&r in d?e[r]=fv(e[r],i[r]):e[r]=i[r]}),e}function CE(d){var t;return typeof d!="string"||!d.includes("var(--mantine-scale)")?d:(t=d.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function kE(d){const t=CE(d);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Hm(d){return d==="0rem"?"0rem":`calc(${d} * var(--mantine-scale))`}function dS(d,{shouldScale:t=!1}={}){function e(i){if(i===0||i==="0")return`0${d}`;if(typeof i=="number"){const r=`${i/16}${d}`;return t?Hm(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(o=>e(o)).join(",");if(i.includes(" "))return i.split(" ").map(o=>e(o)).join(" ");if(i.includes(d))return t?Hm(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const o=`${Number(r)/16}${d}`;return t?Hm(o):o}}return i}return e}const K=dS("rem",{shouldScale:!0}),$A=dS("em"),fS=typeof document<"u"?Kt.useLayoutEffect:Kt.useEffect,pS=Kt.createContext(null);function gS(){const d=Kt.useContext(pS);if(!d)throw new Error("[@mantine/core] MantineProvider was not found in tree");return d}function TE(){return gS().cssVariablesResolver}function mS(){return gS().getStyleNonce}function PE(d){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(d)}function RE(d){let t=d.replace("#","");if(t.length===3){const u=t.split("");t=[u[0],u[0],u[1],u[1],u[2],u[2]].join("")}if(t.length===8){const u=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:u}}const e=parseInt(t,16),i=e>>16&255,r=e>>8&255,o=e&255;return{r:i,g:r,b:o,a:1}}function ME(d){const[t,e,i,r]=d.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:e,b:i,a:r||1}}function LE(d){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,e=d.match(t);if(!e)return{r:0,g:0,b:0,a:1};const i=parseInt(e[1],10),r=parseInt(e[2],10)/100,o=parseInt(e[3],10)/100,u=e[5]?parseFloat(e[5]):void 0,c=(1-Math.abs(2*o-1))*r,f=i/60,p=c*(1-Math.abs(f%2-1)),m=o-c/2;let v,w,S;return f>=0&&f<1?(v=c,w=p,S=0):f>=1&&f<2?(v=p,w=c,S=0):f>=2&&f<3?(v=0,w=c,S=p):f>=3&&f<4?(v=0,w=p,S=c):f>=4&&f<5?(v=p,w=0,S=c):(v=c,w=0,S=p),{r:Math.round((v+m)*255),g:Math.round((w+m)*255),b:Math.round((S+m)*255),a:u||1}}function pv(d){return PE(d)?RE(d):d.startsWith("rgb")?ME(d):d.startsWith("hsl")?LE(d):{r:0,g:0,b:0,a:1}}function bf(d,t){if(d.startsWith("var("))return`color-mix(in srgb, ${d}, black ${t*100}%)`;const{r:e,g:i,b:r,a:o}=pv(d),u=1-t,c=f=>Math.round(f*u);return`rgba(${c(e)}, ${c(i)}, ${c(r)}, ${o})`}function Lc(d,t){return typeof d.primaryShade=="number"?d.primaryShade:t==="dark"?d.primaryShade.dark:d.primaryShade.light}function Bm(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function IE(d){const t=d.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function NE(d){if(d.startsWith("oklch("))return(IE(d)||0)/100;const{r:t,g:e,b:i}=pv(d),r=t/255,o=e/255,u=i/255,c=Bm(r),f=Bm(o),p=Bm(u);return .2126*c+.7152*f+.0722*p}function lc(d,t=.179){return d.startsWith("var(")?!1:NE(d)>t}function gv({color:d,theme:t,colorScheme:e}){if(typeof d!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof d}`);if(d==="bright")return{color:d,value:e==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lc(e==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(d==="dimmed")return{color:d,value:e==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:lc(e==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(d==="white"||d==="black")return{color:d,value:d==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:lc(d==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${d}`};const[i,r]=d.split("."),o=r?Number(r):void 0,u=i in t.colors;if(u){const c=o!==void 0?t.colors[i][o]:t.colors[i][Lc(t,e||"light")];return{color:i,value:c,shade:o,isThemeColor:u,isLight:lc(c,t.luminanceThreshold),variable:r?`--mantine-color-${i}-${o}`:`--mantine-color-${i}-filled`}}return{color:d,value:d,isThemeColor:u,isLight:lc(d,t.luminanceThreshold),shade:o,variable:void 0}}function zA(d,t){const e=gv({color:d||t.primaryColor,theme:t});return e.variable?`var(${e.variable})`:d}function HA(d,t){const e={from:(d==null?void 0:d.from)||t.defaultGradient.from,to:(d==null?void 0:d.to)||t.defaultGradient.to,deg:(d==null?void 0:d.deg)||t.defaultGradient.deg||0},i=zA(e.from,t),r=zA(e.to,t);return`linear-gradient(${e.deg}deg, ${i} 0%, ${r} 100%)`}function ws(d,t){if(typeof d!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(d.startsWith("var(")){const o=(1-t)*100;return`color-mix(in srgb, ${d}, transparent ${o}%)`}if(d.startsWith("oklch"))return d.includes("/")?d.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):d.replace(")",` / ${t})`);const{r:e,g:i,b:r}=pv(d);return`rgba(${e}, ${i}, ${r}, ${t})`}const il=ws,DE=({color:d,theme:t,variant:e,gradient:i,autoContrast:r})=>{const o=gv({color:d,theme:t}),u=typeof r=="boolean"?r:t.autoContrast;if(e==="filled"){const c=u&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${d}-filled)`,hover:`var(--mantine-color-${d}-filled-hover)`,color:c,border:`${K(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:c,border:`${K(1)} solid transparent`}:{background:d,hover:bf(d,.1),color:c,border:`${K(1)} solid transparent`}}if(e==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${d}-light)`,hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${K(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:ws(c,.1),hover:ws(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${K(1)} solid transparent`}}return{background:ws(d,.1),hover:ws(d,.12),color:d,border:`${K(1)} solid transparent`}}if(e==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${d}-outline-hover)`,color:`var(--mantine-color-${d}-outline)`,border:`${K(1)} solid var(--mantine-color-${d}-outline)`}:{background:"transparent",hover:ws(t.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${K(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:ws(d,.05),color:d,border:`${K(1)} solid ${d}`};if(e==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${K(1)} solid transparent`};const c=t.colors[o.color][o.shade];return{background:"transparent",hover:ws(c,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${K(1)} solid transparent`}}return{background:"transparent",hover:ws(d,.12),color:d,border:`${K(1)} solid transparent`}}return e==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${d}-light-color)`,border:`${K(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${K(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:d,border:`${K(1)} solid transparent`}:e==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:`var(--mantine-color-${d}-filled)`,border:`${K(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${K(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:bf(t.white,.01),color:d,border:`${K(1)} solid transparent`}:e==="gradient"?{background:HA(i,t),hover:HA(i,t),color:"var(--mantine-color-white)",border:"none"}:e==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${K(1)} solid var(--mantine-color-default-border)`}:{}},FE={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},BA="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",mv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:FE,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:DE,autoContrast:!1,luminanceThreshold:.3,fontFamily:BA,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:BA,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:K(34),lineHeight:"1.3"},h2:{fontSize:K(26),lineHeight:"1.35"},h3:{fontSize:K(22),lineHeight:"1.4"},h4:{fontSize:K(18),lineHeight:"1.45"},h5:{fontSize:K(16),lineHeight:"1.5"},h6:{fontSize:K(14),lineHeight:"1.5"}}},fontSizes:{xs:K(12),sm:K(14),md:K(16),lg:K(18),xl:K(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:K(2),sm:K(4),md:K(8),lg:K(16),xl:K(32)},spacing:{xs:K(10),sm:K(12),md:K(16),lg:K(20),xl:K(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${K(1)} ${K(3)} rgba(0, 0, 0, 0.05), 0 ${K(1)} ${K(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${K(1)} ${K(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${K(10)} ${K(15)} ${K(-5)}, rgba(0, 0, 0, 0.04) 0 ${K(7)} ${K(7)} ${K(-5)}`,md:`0 ${K(1)} ${K(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${K(20)} ${K(25)} ${K(-5)}, rgba(0, 0, 0, 0.04) 0 ${K(10)} ${K(10)} ${K(-5)}`,lg:`0 ${K(1)} ${K(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${K(28)} ${K(23)} ${K(-7)}, rgba(0, 0, 0, 0.04) 0 ${K(12)} ${K(12)} ${K(-7)}`,xl:`0 ${K(1)} ${K(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${K(36)} ${K(28)} ${K(-7)}, rgba(0, 0, 0, 0.04) 0 ${K(17)} ${K(17)} ${K(-7)}`},other:{},components:{}};function jA(d){return d==="auto"||d==="dark"||d==="light"}function OE({key:d="mantine-color-scheme-value"}={}){let t;return{get:e=>{if(typeof window>"u")return e;try{const i=window.localStorage.getItem(d);return jA(i)?i:e}catch{return e}},set:e=>{try{window.localStorage.setItem(d,e)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:e=>{t=i=>{i.storageArea===window.localStorage&&i.key===d&&jA(i.newValue)&&e(i.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(d)}}}const $E="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",UA="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function jm(d){return d<0||d>9?!1:parseInt(d.toString(),10)===d}function VA(d){if(!(d.primaryColor in d.colors))throw new Error($E);if(typeof d.primaryShade=="object"&&(!jm(d.primaryShade.dark)||!jm(d.primaryShade.light)))throw new Error(UA);if(typeof d.primaryShade=="number"&&!jm(d.primaryShade))throw new Error(UA)}function zE(d,t){var i;if(!t)return VA(d),d;const e=fv(d,t);return t.fontFamily&&!((i=t.headings)!=null&&i.fontFamily)&&(e.headings.fontFamily=t.fontFamily),VA(e),e}const yv=Kt.createContext(null),HE=()=>Kt.useContext(yv)||mv;function yS(){const d=Kt.useContext(yv);if(!d)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return d}function vS({theme:d,children:t,inherit:e=!0}){const i=HE(),r=Kt.useMemo(()=>zE(e?i:mv,d),[d,i,e]);return wt.jsx(yv.Provider,{value:r,children:t})}vS.displayName="@mantine/core/MantineThemeProvider";function BE(){const d=yS(),t=mS(),e=Ca(d.breakpoints).reduce((i,r)=>{const o=d.breakpoints[r].includes("px"),u=kE(d.breakpoints[r]),c=o?`${u-.1}px`:$A(u-.1),f=o?`${u}px`:$A(u);return`${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${f}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return wt.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:e}})}function Um(d){return Object.entries(d).map(([t,e])=>`${t}: ${e};`).join("")}function uc(d,t){return(Array.isArray(d)?d:[d]).reduce((i,r)=>`${r}{${i}}`,t)}function jE(d,t){const e=Um(d.variables),i=e?uc(t,e):"",r=Um(d.dark),o=Um(d.light),u=r?uc(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,r):"",c=o?uc(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,o):"";return`${i}${u}${c}`}function UE({color:d,theme:t,autoContrast:e}){return(typeof e=="boolean"?e:t.autoContrast)&&gv({color:d||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function WA(d,t){return UE({color:d.colors[d.primaryColor][Lc(d,t)],theme:d,autoContrast:null})}function _f({theme:d,color:t,colorScheme:e,name:i=t,withColorValues:r=!0}){if(!d.colors[t])return{};if(e==="light"){const c=Lc(d,"light"),f={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${c===9?8:c+1})`,[`--mantine-color-${i}-light`]:il(d.colors[t][c],.1),[`--mantine-color-${i}-light-hover`]:il(d.colors[t][c],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline-hover`]:il(d.colors[t][c],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...f}:f}const o=Lc(d,"dark"),u={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${o})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${o===9?8:o+1})`,[`--mantine-color-${i}-light`]:il(d.colors[t][Math.max(0,o-2)],.15),[`--mantine-color-${i}-light-hover`]:il(d.colors[t][Math.max(0,o-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(o-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(o-4,0)})`,[`--mantine-color-${i}-outline-hover`]:il(d.colors[t][Math.max(o-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...u}:u}function VE(d){return!!d&&typeof d=="object"&&"mantine-virtual-color"in d}function sl(d,t,e){Ca(t).forEach(i=>Object.assign(d,{[`--mantine-${e}-${i}`]:t[i]}))}const wS=d=>{const t=Lc(d,"light"),e=d.defaultRadius in d.radius?d.radius[d.defaultRadius]:K(d.defaultRadius),i={variables:{"--mantine-scale":d.scale.toString(),"--mantine-cursor-type":d.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":d.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":d.fontSmoothing?"grayscale":"unset","--mantine-color-white":d.white,"--mantine-color-black":d.black,"--mantine-line-height":d.lineHeights.md,"--mantine-font-family":d.fontFamily,"--mantine-font-family-monospace":d.fontFamilyMonospace,"--mantine-font-family-headings":d.headings.fontFamily,"--mantine-heading-font-weight":d.headings.fontWeight,"--mantine-heading-text-wrap":d.headings.textWrap,"--mantine-radius-default":e,"--mantine-primary-color-filled":`var(--mantine-color-${d.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${d.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${d.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${d.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${d.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":WA(d,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":d.black,"--mantine-color-body":d.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":WA(d,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};sl(i.variables,d.breakpoints,"breakpoint"),sl(i.variables,d.spacing,"spacing"),sl(i.variables,d.fontSizes,"font-size"),sl(i.variables,d.lineHeights,"line-height"),sl(i.variables,d.shadows,"shadow"),sl(i.variables,d.radius,"radius"),d.colors[d.primaryColor].forEach((o,u)=>{i.variables[`--mantine-primary-color-${u}`]=`var(--mantine-color-${d.primaryColor}-${u})`}),Ca(d.colors).forEach(o=>{const u=d.colors[o];if(VE(u)){Object.assign(i.light,_f({theme:d,name:u.name,color:u.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,_f({theme:d,name:u.name,color:u.dark,colorScheme:"dark",withColorValues:!0}));return}u.forEach((c,f)=>{i.variables[`--mantine-color-${o}-${f}`]=c}),Object.assign(i.light,_f({theme:d,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,_f({theme:d,color:o,colorScheme:"dark",withColorValues:!1}))});const r=d.headings.sizes;return Ca(r).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=r[o].fontSize,i.variables[`--mantine-${o}-line-height`]=r[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=r[o].fontWeight||d.headings.fontWeight}),i};function WE({theme:d,generator:t}){const e=wS(d),i=t==null?void 0:t(d);return i?fv(e,i):e}const Vm=wS(mv);function GE(d){const t={variables:{},light:{},dark:{}};return Ca(d.variables).forEach(e=>{Vm.variables[e]!==d.variables[e]&&(t.variables[e]=d.variables[e])}),Ca(d.light).forEach(e=>{Vm.light[e]!==d.light[e]&&(t.light[e]=d.light[e])}),Ca(d.dark).forEach(e=>{Vm.dark[e]!==d.dark[e]&&(t.dark[e]=d.dark[e])}),t}function XE(d){return`
  ${d}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${d}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function AS({cssVariablesSelector:d,deduplicateCssVariables:t}){const e=yS(),i=mS(),r=TE(),o=WE({theme:e,generator:r}),u=d===":root"&&t,c=u?GE(o):o,f=jE(c,d);return f?wt.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${f}${u?"":XE(d)}`}}):null}AS.displayName="@mantine/CssVariables";function qE(){const d=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||d(...t)}}function rl(d,t){var r;const e=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=d!=="auto"?d:e?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",i)}function YE({manager:d,defaultColorScheme:t,getRootElement:e,forceColorScheme:i}){const r=Kt.useRef(null),[o,u]=Kt.useState(()=>d.get(t)),c=i||o,f=Kt.useCallback(m=>{i||(rl(m,e),u(m),d.set(m))},[d.set,c,i]),p=Kt.useCallback(()=>{u(t),rl(t,e),d.clear()},[d.clear,t]);return Kt.useEffect(()=>(d.subscribe(f),d.unsubscribe),[d.subscribe,d.unsubscribe]),fS(()=>{rl(d.get(t),e)},[]),Kt.useEffect(()=>{var v;if(i)return rl(i,e),()=>{};i===void 0&&rl(o,e),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const m=w=>{o==="auto"&&rl(w.matches?"dark":"light",e)};return(v=r.current)==null||v.addEventListener("change",m),()=>{var w;return(w=r.current)==null?void 0:w.removeEventListener("change",m)}},[o,i]),{colorScheme:c,setColorScheme:f,clearColorScheme:p}}function KE({respectReducedMotion:d,getRootElement:t}){fS(()=>{var e;d&&((e=t())==null||e.setAttribute("data-respect-reduced-motion","true"))},[d])}qE();function SS({theme:d,children:t,getStyleNonce:e,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:o=!0,withCssVariables:u=!0,cssVariablesSelector:c=":root",classNamesPrefix:f="mantine",colorSchemeManager:p=OE(),defaultColorScheme:m="light",getRootElement:v=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:S,stylesTransform:x}){const{colorScheme:C,setColorScheme:k,clearColorScheme:T}=YE({defaultColorScheme:m,forceColorScheme:S,manager:p,getRootElement:v});return KE({respectReducedMotion:(d==null?void 0:d.respectReducedMotion)||!1,getRootElement:v}),wt.jsx(pS.Provider,{value:{colorScheme:C,setColorScheme:k,clearColorScheme:T,getRootElement:v,classNamesPrefix:f,getStyleNonce:e,cssVariablesResolver:w,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:x},children:wt.jsxs(vS,{theme:d,children:[u&&wt.jsx(AS,{cssVariablesSelector:c,deduplicateCssVariables:o}),r&&wt.jsx(BE,{}),t]})})}SS.displayName="@mantine/core/MantineProvider";var Rc={};Rc.d=(d,t)=>{for(var e in t)Rc.o(t,e)&&!Rc.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})};Rc.o=(d,t)=>Object.prototype.hasOwnProperty.call(d,t);var Et=globalThis.pdfjsLib={};Rc.d(Et,{AbortException:()=>Jr,AnnotationEditorLayer:()=>ov,AnnotationEditorParamsType:()=>Ot,AnnotationEditorType:()=>Tt,AnnotationEditorUIManager:()=>Ta,AnnotationLayer:()=>WC,AnnotationMode:()=>Sr,ColorPicker:()=>cp,DOMSVGFactory:()=>Cv,DrawLayer:()=>uv,FeatureTest:()=>mn,GlobalWorkerOptions:()=>Ks,ImageKind:()=>Pf,InvalidPDFException:()=>Jm,MissingPDFException:()=>Ic,OPS:()=>_i,OutputScale:()=>ey,PDFDataRangeTransport:()=>_b,PDFDateString:()=>bv,PDFWorker:()=>ml,PasswordResponses:()=>tx,PermissionFlag:()=>JE,PixelsPerInch:()=>to,RenderingCancelledException:()=>Av,TextLayer:()=>Nc,TouchManager:()=>lp,UnexpectedResponseException:()=>rp,Util:()=>pt,VerbosityLevel:()=>Lp,XfaLayer:()=>xb,build:()=>xC,createValidAbsoluteUrl:()=>sx,fetchData:()=>Fp,getDocument:()=>mC,getFilenameFromUrl:()=>fx,getPdfFilenameFromUrl:()=>px,getXfaPageViewport:()=>gx,isDataScheme:()=>Op,isPdfFile:()=>Sv,noContextMenu:()=>Oi,normalizeUnicode:()=>cx,setLayerDimensions:()=>ka,shadow:()=>Dt,stopEvent:()=>Kn,version:()=>EC});const on=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),bS=[1,0,0,1,0,0],Zm=[.001,0,0,.001,0,0],QE=1e7,Wm=1.35,qn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Sr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ZE="pdfjs_internal_editor_",Tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},JE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Pf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},cc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Lp={ERRORS:0,WARNINGS:1,INFOS:5},_i={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},tx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ip=Lp.WARNINGS;function ex(d){Number.isInteger(d)&&(Ip=d)}function nx(){return Ip}function Np(d){Ip>=Lp.INFOS&&console.log(`Info: ${d}`)}function Pt(d){Ip>=Lp.WARNINGS&&console.log(`Warning: ${d}`)}function Qt(d){throw new Error(d)}function Se(d,t){d||Qt(t)}function ix(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sx(d,t=null,e=null){if(!d)return null;try{if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=ux(d)}catch{}}const i=t?new URL(d,t):new URL(d);if(ix(i))return i}catch{}return null}function Dt(d,t,e,i=!1){return Object.defineProperty(d,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const no=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class GA extends no{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gm extends no{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Jm extends no{constructor(t){super(t,"InvalidPDFException")}}class Ic extends no{constructor(t){super(t,"MissingPDFException")}}class rp extends no{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class rx extends no{constructor(t){super(t,"FormatError")}}class Jr extends no{constructor(t){super(t,"AbortException")}}function _S(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&Qt("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const i=[];for(let r=0;r<t;r+=e){const o=Math.min(r+e,t),u=d.subarray(r,o);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function Dp(d){typeof d!="string"&&Qt("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=d.charCodeAt(i)&255;return e}function ox(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function vv(d){const t=Object.create(null);for(const[e,i]of d)t[e]=i;return t}function ax(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function lx(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return Dt(this,"isLittleEndian",ax())}static get isEvalSupported(){return Dt(this,"isEvalSupported",lx())}static get isOffscreenCanvasSupported(){return Dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Dt(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Dt(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Dt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Xm=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var Qs,Rf,ty;class pt{static makeHexColor(t,e,i){return`#${Xm[t]}${Xm[e]}${Xm[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,o=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,o]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),o=this.applyTransform([t[0],t[3]],e),u=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],o[0],u[0]),Math.min(i[1],r[1],o[1],u[1]),Math.max(i[0],r[0],o[0],u[0]),Math.max(i[1],r[1],o[1],u[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],o=t[2]*e[0]+t[3]*e[2],u=t[2]*e[1]+t[3]*e[3],c=(i+u)/2,f=Math.sqrt((i+u)**2-4*(i*u-o*r))/2,p=c+f||1,m=c-f||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>u?null:[i,o,r,u]}static bezierBoundingBox(t,e,i,r,o,u,c,f,p){return p?(p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,c),Math.min(e,f),Math.max(t,c),Math.max(e,f)],E(this,Qs,ty).call(this,t,i,o,c,e,r,u,f,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),p),E(this,Qs,ty).call(this,t,i,o,c,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p),p}}Qs=new WeakSet,Rf=function(t,e,i,r,o,u,c,f,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,S=w*p,x=v*(v*(v*t+3*p*e)+3*w*i)+S*r,C=v*(v*(v*o+3*p*u)+3*w*c)+S*f;m[0]=Math.min(m[0],x),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],x),m[3]=Math.max(m[3],C)},ty=function(t,e,i,r,o,u,c,f,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&E(this,Qs,Rf).call(this,t,e,i,r,o,u,c,f,-v/m,w);return}const S=m**2-4*v*p;if(S<0)return;const x=Math.sqrt(S),C=2*p;E(this,Qs,Rf).call(this,t,e,i,r,o,u,c,f,(-m+x)/C,w),E(this,Qs,Rf).call(this,t,e,i,r,o,u,c,f,(-m-x)/C,w)},_(pt,Qs);function ux(d){return decodeURIComponent(escape(d))}let qm=null,XA=null;function cx(d){return qm||(qm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,XA=new Map([["ﬅ","ſt"]])),d.replaceAll(qm,(t,e,i)=>e?e.normalize("NFKC"):XA.get(i))}function hx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),_S(d)}const wv="pdfjs_internal_id_";function dx(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(_S(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});const As="http://www.w3.org/2000/svg",Ao=class Ao{};vt(Ao,"CSS",96),vt(Ao,"PDF",72),vt(Ao,"PDF_TO_CSS_UNITS",Ao.CSS/Ao.PDF);let to=Ao;async function Fp(d,t="text"){if(pc(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class ad{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:o=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=o,this.offsetY=u,i*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,v,w,S;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,v=0,w=0,S=1;break;case 90:m=0,v=1,w=1,S=0;break;case 270:m=0,v=-1,w=-1,S=0;break;case 0:m=1,v=0,w=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(w=-w,S=-S);let x,C,k,T;m===0?(x=Math.abs(p-t[1])*i+o,C=Math.abs(f-t[0])*i+u,k=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(x=Math.abs(f-t[0])*i+o,C=Math.abs(p-t[1])*i+u,k=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[m*i,v*i,w*i,S*i,x-m*i*f-w*i*p,C-v*i*f-S*i*p],this.width=k,this.height=T}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(r=>r*t);return Dt(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new ad({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(t,e){return pt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=pt.applyTransform([t[0],t[1]],this.transform),i=pt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return pt.applyInverseTransform([t,e],this.transform)}}class Av extends no{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Op(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function Sv(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function fx(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function px(d,t="document.pdf"){if(typeof d!="string")return t;if(Op(d))return Pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(d);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||t}class qA{constructor(){vt(this,"started",Object.create(null));vt(this,"times",[])}time(t){t in this.started&&Pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-r}ms
`);return t.join("")}}function pc(d,t){try{const{protocol:e}=t?new URL(d,t):new URL(d);return e==="http:"||e==="https:"}catch{return!1}}function Oi(d){d.preventDefault()}function Kn(d){d.preventDefault(),d.stopPropagation()}var Fc;class bv{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Fc)||A(this,Fc,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Fc).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(u+=m,c+=v):p==="+"&&(u-=m,c-=v),new Date(Date.UTC(i,r,o,u,c,f))}}Fc=new WeakMap,_(bv,Fc);function gx(d,{scale:t=1,rotation:e=0}){const{width:i,height:r}=d.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new ad({viewBox:o,userUnit:1,scale:t,rotation:e})}function _v(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Pt(`Not a valid color format: "${d}"`),[0,0,0])}function mx(d){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of d.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;d.set(e,_v(i))}t.remove()}function re(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform();return[t,e,i,r,o,u]}function Vi(d){const{a:t,b:e,c:i,d:r,e:o,f:u}=d.getTransform().invertSelf();return[t,e,i,r,o,u]}function ka(d,t,e=!1,i=!0){if(t instanceof ad){const{pageWidth:r,pageHeight:o}=t.rawDims,{style:u}=d,c=mn.isCSSRoundSupported,f=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,m=c?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,v=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=v):(u.width=v,u.height=m)}i&&d.setAttribute("data-main-rotation",t.rotation)}class ey{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var br,bo,Ei,_o,Oc,$c,fp,ES,yn,xS,CS,Mf,kS,iy;const _s=class _s{constructor(t){_(this,yn);_(this,br,null);_(this,bo,null);_(this,Ei);_(this,_o,null);_(this,Oc,null);A(this,Ei,t),a(_s,$c)||A(_s,$c,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=A(this,br,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Ei)._uiManager._signal;t.addEventListener("contextmenu",Oi,{signal:e}),t.addEventListener("pointerdown",E(_s,fp,ES),{signal:e});const i=A(this,_o,document.createElement("div"));i.className="buttons",t.append(i);const r=a(this,Ei).toolbarPosition;if(r){const{style:o}=t,u=a(this,Ei)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*u}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,yn,kS).call(this),t}get div(){return a(this,br)}hide(){var t;a(this,br).classList.add("hidden"),(t=a(this,bo))==null||t.hideDropdown()}show(){var t;a(this,br).classList.remove("hidden"),(t=a(this,Oc))==null||t.shown()}async addAltText(t){const e=await t.render();E(this,yn,Mf).call(this,e),a(this,_o).prepend(e,a(this,yn,iy)),A(this,Oc,t)}addColorPicker(t){A(this,bo,t);const e=t.renderButton();E(this,yn,Mf).call(this,e),a(this,_o).prepend(e,a(this,yn,iy))}remove(){var t;a(this,br).remove(),(t=a(this,bo))==null||t.destroy(),A(this,bo,null)}};br=new WeakMap,bo=new WeakMap,Ei=new WeakMap,_o=new WeakMap,Oc=new WeakMap,$c=new WeakMap,fp=new WeakSet,ES=function(t){t.stopPropagation()},yn=new WeakSet,xS=function(t){a(this,Ei)._focusEventsAllowed=!1,Kn(t)},CS=function(t){a(this,Ei)._focusEventsAllowed=!0,Kn(t)},Mf=function(t){const e=a(this,Ei)._uiManager._signal;t.addEventListener("focusin",E(this,yn,xS).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,yn,CS).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Oi,{signal:e})},kS=function(){const{editorType:t,_uiManager:e}=a(this,Ei),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",a(_s,$c)[t]),E(this,yn,Mf).call(this,i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),a(this,_o).append(i)},iy=function(){const t=document.createElement("div");return t.className="divider",t},_(_s,fp),_(_s,$c,null);let ny=_s;var zc,Eo,xo,eo,TS,PS,RS;class yx{constructor(t){_(this,eo);_(this,zc,null);_(this,Eo,null);_(this,xo);A(this,xo,t)}show(t,e,i){const[r,o]=E(this,eo,PS).call(this,e,i),{style:u}=a(this,Eo)||A(this,Eo,E(this,eo,TS).call(this));t.append(a(this,Eo)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Eo).remove()}}zc=new WeakMap,Eo=new WeakMap,xo=new WeakMap,eo=new WeakSet,TS=function(){const t=A(this,Eo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Oi,{signal:a(this,xo)._signal});const e=A(this,zc,document.createElement("div"));return e.className="buttons",t.append(e),E(this,eo,RS).call(this),t},PS=function(t,e){let i=0,r=0;for(const o of t){const u=o.y+o.height;if(u<i)continue;const c=o.x+(e?o.width:0);if(u>i){r=c,i=u;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,i]},RS=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=a(this,xo)._signal;t.addEventListener("contextmenu",Oi,{signal:i}),t.addEventListener("click",()=>{a(this,xo).highlightSelection("floating_button")},{signal:i}),a(this,zc).append(t)};function op(d,t,e){for(const i of e)t.addEventListener(i,d[i].bind(d))}var pp;class vx{constructor(){_(this,pp,0)}get id(){return`${ZE}${cn(this,pp)._++}`}}pp=new WeakMap;var yl,Hc,tn,vl,Lf;const Tv=class Tv{constructor(){_(this,vl);_(this,yl,hx());_(this,Hc,0);_(this,tn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Dt(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:o}=t;return E(this,vl,Lf).call(this,`${e}_${i}_${r}_${o}`,t)}async getFromUrl(t){return E(this,vl,Lf).call(this,t,t)}async getFromBlob(t,e){const i=await e;return E(this,vl,Lf).call(this,t,i)}async getFromId(t){a(this,tn)||A(this,tn,new Map);const e=a(this,tn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,tn)||A(this,tn,new Map);let i=a(this,tn).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${a(this,yl)}_${cn(this,Hc)._++}`,refCounter:1,isSvg:!1},a(this,tn).set(t,i),a(this,tn).set(i.id,i),i}getSvgUrl(t){const e=a(this,tn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;a(this,tn)||A(this,tn,new Map);const e=a(this,tn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=o.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,yl)}_`)}};yl=new WeakMap,Hc=new WeakMap,tn=new WeakMap,vl=new WeakSet,Lf=async function(t,e){a(this,tn)||A(this,tn,new Map);let i=a(this,tn).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,yl)}_${cn(this,Hc)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await Fp(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const o=Tv._isSVGFittingCanvas,u=new FileReader,c=new Image,f=new Promise((p,m)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},u.onload=async()=>{const v=i.svgUrl=u.result;c.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},c.onerror=u.onerror=m});u.readAsDataURL(r),await f}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Pt(r),i=null}return a(this,tn).set(t,i),i&&a(this,tn).set(i.id,i),i};let sy=Tv;var me,_r,Bc,ue;class wx{constructor(t=128){_(this,me,[]);_(this,_r,!1);_(this,Bc);_(this,ue,-1);A(this,Bc,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),a(this,_r))return;const f={cmd:t,undo:e,post:i,type:o};if(a(this,ue)===-1){a(this,me).length>0&&(a(this,me).length=0),A(this,ue,0),a(this,me).push(f);return}if(u&&a(this,me)[a(this,ue)].type===o){c&&(f.undo=a(this,me)[a(this,ue)].undo),a(this,me)[a(this,ue)]=f;return}const p=a(this,ue)+1;p===a(this,Bc)?a(this,me).splice(0,1):(A(this,ue,p),p<a(this,me).length&&a(this,me).splice(p)),a(this,me).push(f)}undo(){if(a(this,ue)===-1)return;A(this,_r,!0);const{undo:t,post:e}=a(this,me)[a(this,ue)];t(),e==null||e(),A(this,_r,!1),A(this,ue,a(this,ue)-1)}redo(){if(a(this,ue)<a(this,me).length-1){A(this,ue,a(this,ue)+1),A(this,_r,!0);const{cmd:t,post:e}=a(this,me)[a(this,ue)];t(),e==null||e(),A(this,_r,!1)}}hasSomethingToUndo(){return a(this,ue)!==-1}hasSomethingToRedo(){return a(this,ue)<a(this,me).length-1}cleanType(t){if(a(this,ue)!==-1){for(let e=a(this,ue);e>=0;e--)if(a(this,me)[e].type!==t){a(this,me).splice(e+1,a(this,ue)-e),A(this,ue,e);return}a(this,me).length=0,A(this,ue,-1)}}destroy(){A(this,me,null)}}me=new WeakMap,_r=new WeakMap,Bc=new WeakMap,ue=new WeakMap;var gp,MS;class ld{constructor(t){_(this,gp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=mn.platform;for(const[i,r,o={}]of t)for(const u of i){const c=u.startsWith("mac+");e&&c?(this.callbacks.set(u.slice(4),{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1))):!e&&!c&&(this.callbacks.set(u,{callback:r,options:o}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(E(this,gp,MS).call(this,e));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:u=[],checker:c=null}}=i;c&&!c(t,e)||(r.bind(t,...u,e)(),o||Kn(e))}}gp=new WeakSet,MS=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const mp=class mp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return mx(t),Dt(this,"_colors",t)}convert(t){const e=_v(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((o,u)=>o===e[u]))return mp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}};vt(mp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ry=mp;var wl,Fn,ke,Be,Al,xs,Sl,ri,Er,Co,bl,ko,Xi,xi,To,jc,Uc,_l,Vc,qi,xr,El,Cr,Yi,yp,kr,Wc,Tr,Po,Gc,Xc,Ie,Wt,Cs,Ro,qc,Yc,Pr,Ki,ks,Kc,oi,Q,If,oy,LS,IS,Nf,NS,DS,FS,ay,OS,ly,uy,$S,hn,Ss,zS,HS,cy,BS,gc,hy;const fl=class fl{constructor(t,e,i,r,o,u,c,f,p,m,v,w,S){_(this,Q);_(this,wl,new AbortController);_(this,Fn,null);_(this,ke,new Map);_(this,Be,new Map);_(this,Al,null);_(this,xs,null);_(this,Sl,null);_(this,ri,new wx);_(this,Er,null);_(this,Co,null);_(this,bl,0);_(this,ko,new Set);_(this,Xi,null);_(this,xi,null);_(this,To,new Set);vt(this,"_editorUndoBar",null);_(this,jc,!1);_(this,Uc,!1);_(this,_l,!1);_(this,Vc,null);_(this,qi,null);_(this,xr,null);_(this,El,null);_(this,Cr,!1);_(this,Yi,null);_(this,yp,new vx);_(this,kr,!1);_(this,Wc,!1);_(this,Tr,null);_(this,Po,null);_(this,Gc,null);_(this,Xc,null);_(this,Ie,Tt.NONE);_(this,Wt,new Set);_(this,Cs,null);_(this,Ro,null);_(this,qc,null);_(this,Yc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Pr,[0,0]);_(this,Ki,null);_(this,ks,null);_(this,Kc,null);_(this,oi,null);const x=this._signal=a(this,wl).signal;A(this,ks,t),A(this,Kc,e),A(this,Al,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:x}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),r._on("setpreference",this.onSetPreference.bind(this),{signal:x}),r._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),E(this,Q,NS).call(this),E(this,Q,$S).call(this),E(this,Q,ay).call(this),A(this,xs,o.annotationStorage),A(this,Vc,o.filterFactory),A(this,Ro,u),A(this,El,c||null),A(this,jc,f),A(this,Uc,p),A(this,_l,m),A(this,Xc,v||null),this.viewParameters={realScale:to.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=fl.prototype,e=u=>a(u,ks).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:f}=c;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new ld([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,ks).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&a(u,ks).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,i,r,o;(t=a(this,oi))==null||t.resolve(),A(this,oi,null),(e=a(this,wl))==null||e.abort(),A(this,wl,null),this._signal=null;for(const u of a(this,Be).values())u.destroy();a(this,Be).clear(),a(this,ke).clear(),a(this,To).clear(),A(this,Fn,null),a(this,Wt).clear(),a(this,ri).destroy(),(i=a(this,Al))==null||i.destroy(),(r=a(this,Yi))==null||r.hide(),A(this,Yi,null),a(this,qi)&&(clearTimeout(a(this,qi)),A(this,qi,null)),a(this,Ki)&&(clearTimeout(a(this,Ki)),A(this,Ki,null)),(o=this._editorUndoBar)==null||o.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Xc)}get useNewAltTextFlow(){return a(this,Uc)}get useNewAltTextWhenAddingImage(){return a(this,_l)}get hcmFilter(){return Dt(this,"hcmFilter",a(this,Ro)?a(this,Vc).addHCMFilter(a(this,Ro).foreground,a(this,Ro).background):"none")}get direction(){return Dt(this,"direction",getComputedStyle(a(this,ks)).direction)}get highlightColors(){return Dt(this,"highlightColors",a(this,El)?new Map(a(this,El).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Co,t)}setMainHighlightColorPicker(t){A(this,Gc,t)}editAltText(t,e=!1){var i;(i=a(this,Al))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,_l,e);break}}onPageChanging({pageNumber:t}){A(this,bl,t-1)}focusMainContainer(){a(this,ks).focus()}findParent(t,e){for(const i of a(this,Be).values()){const{x:r,y:o,width:u,height:c}=i.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=o&&e<=o+c)return i}return null}disableUserSelect(t=!1){a(this,Kc).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,To).add(t)}removeShouldRescale(t){a(this,To).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*to.PDF_TO_CSS_UNITS;for(const i of a(this,To))i.onScaleChanging();(e=a(this,Co))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u}=e,c=e.toString(),p=E(this,Q,If).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const v=E(this,Q,oy).call(this,p),w=a(this,Ie)===Tt.NONE,S=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:u,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Tt.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,xs)&&!a(this,xs).has(t.id)&&a(this,xs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,Cr)&&(A(this,Cr,!1),E(this,Q,Nf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,Wt))if(e.div.contains(t)){A(this,Po,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Po))return;const[t,e]=a(this,Po);A(this,Po,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,Q,ay).call(this),E(this,Q,ly).call(this)}removeEditListeners(){E(this,Q,OS).call(this),E(this,Q,uy).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of a(this,xi))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of a(this,xi))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=a(this,Fn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of a(this,Wt)){const o=r.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const u of a(this,xi))if(u.isHandlingMimeForPasting(o.type)){u.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Pt(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const f of i){const p=await r.deserialize(f);if(!p)return;o.push(p)}const u=()=>{for(const f of o)E(this,Q,cy).call(this,f);E(this,Q,hy).call(this,o)},c=()=>{for(const f of o)f.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(o){Pt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,Ie)!==Tt.NONE&&!this.isEditorHandlingKeyboard&&fl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Cr)&&(A(this,Cr,!1),E(this,Q,Nf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,Q,DS).call(this),E(this,Q,ly).call(this),E(this,Q,hn).call(this,{isEditing:a(this,Ie)!==Tt.NONE,isEmpty:E(this,Q,gc).call(this),hasSomethingToUndo:a(this,ri).hasSomethingToUndo(),hasSomethingToRedo:a(this,ri).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,Q,FS).call(this),E(this,Q,uy).call(this),E(this,Q,hn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,xi)){A(this,xi,t);for(const e of a(this,xi))E(this,Q,Ss).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,yp).id}get currentLayer(){return a(this,Be).get(a(this,bl))}getLayer(t){return a(this,Be).get(t)}get currentPageIndex(){return a(this,bl)}addLayer(t){a(this,Be).set(t.pageIndex,t),a(this,kr)?t.enable():t.disable()}removeLayer(t){a(this,Be).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var r;if(a(this,Ie)!==t&&!(a(this,oi)&&(await a(this,oi).promise,!a(this,oi)))){if(A(this,oi,Promise.withResolvers()),A(this,Ie,t),t===Tt.NONE){this.setEditingState(!1),E(this,Q,HS).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,oi).resolve();return}this.setEditingState(!0),await E(this,Q,zS).call(this),this.unselectAll();for(const o of a(this,Be).values())o.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),a(this,oi).resolve();return}for(const o of a(this,ke).values())o.annotationElementId===e?(this.setSelected(o),o.enterInEditMode()):o.unselect();a(this,oi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==a(this,Ie)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(a(this,xi)){switch(t){case Ot.CREATE:this.currentLayer.addNewEditor();return;case Ot.HIGHLIGHT_DEFAULT_COLOR:(i=a(this,Gc))==null||i.updateColor(e);break;case Ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,qc)||A(this,qc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of a(this,Wt))r.updateParams(t,e);for(const r of a(this,xi))r.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var o;for(const u of a(this,ke).values())u.editorType===t&&u.show(e);(((o=a(this,qc))==null?void 0:o.get(Ot.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,Q,Ss).call(this,[[Ot.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Wc)!==t){A(this,Wc,t);for(const e of a(this,Be).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of a(this,ke).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return a(this,ke).get(t)}addEditor(t){a(this,ke).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(a(this,qi)&&clearTimeout(a(this,qi)),A(this,qi,setTimeout(()=>{this.focusMainContainer(),A(this,qi,null)},0))),a(this,ke).delete(t.id),this.unselect(t),(!t.annotationElementId||!a(this,ko).has(t.annotationElementId))&&((e=a(this,xs))==null||e.remove(t.id))}addDeletedAnnotationElement(t){a(this,ko).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,ko).has(t)}removeDeletedAnnotationElement(t){a(this,ko).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,Fn)!==t&&(A(this,Fn,t),t&&E(this,Q,Ss).call(this,t.propertiesToUpdate))}updateUI(t){a(this,Q,BS)===t&&E(this,Q,Ss).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,Q,Ss).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,Wt).has(t)){a(this,Wt).delete(t),t.unselect(),E(this,Q,hn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,Wt).add(t),t.select(),E(this,Q,Ss).call(this,t.propertiesToUpdate),E(this,Q,hn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,Co))==null||e.commitOrRemove();for(const i of a(this,Wt))i!==t&&i.unselect();a(this,Wt).clear(),a(this,Wt).add(t),t.select(),E(this,Q,Ss).call(this,t.propertiesToUpdate),E(this,Q,hn).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,Wt).has(t)}get firstSelectedEditor(){return a(this,Wt).values().next().value}unselect(t){t.unselect(),a(this,Wt).delete(t),E(this,Q,hn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,Wt).size!==0}get isEnterHandled(){return a(this,Wt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,ri).undo(),E(this,Q,hn).call(this,{hasSomethingToUndo:a(this,ri).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,Q,gc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,ri).redo(),E(this,Q,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ri).hasSomethingToRedo(),isEmpty:E(this,Q,gc).call(this)})}addCommands(t){a(this,ri).add(t),E(this,Q,hn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,Q,gc).call(this)})}cleanUndoStack(t){a(this,ri).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,Wt)],i=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const u of e)E(this,Q,cy).call(this,u)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=a(this,Fn))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,Fn)||this.hasSelection}selectAll(){for(const t of a(this,Wt))t.commit();E(this,Q,hy).call(this,a(this,ke).values())}unselectAll(){var t;if(!(a(this,Fn)&&(a(this,Fn).commitOrRemove(),a(this,Ie)!==Tt.NONE))&&!((t=a(this,Co))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,Wt))e.unselect();a(this,Wt).clear(),E(this,Q,hn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,Pr)[0]+=t,a(this,Pr)[1]+=e;const[r,o]=a(this,Pr),u=[...a(this,Wt)],c=1e3;a(this,Ki)&&clearTimeout(a(this,Ki)),A(this,Ki,setTimeout(()=>{A(this,Ki,null),a(this,Pr)[0]=a(this,Pr)[1]=0,this.addCommands({cmd:()=>{for(const f of u)a(this,ke).has(f.id)&&f.translateInPage(r,o)},undo:()=>{for(const f of u)a(this,ke).has(f.id)&&f.translateInPage(-r,-o)},mustExec:!1})},c));for(const f of u)f.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Xi,new Map);for(const t of a(this,Wt))a(this,Xi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Xi))return!1;this.disableUserSelect(!1);const t=a(this,Xi);A(this,Xi,null);let e=!1;for(const[{x:r,y:o,pageIndex:u},c]of t)c.newX=r,c.newY=o,c.newPageIndex=u,e||(e=r!==c.savedX||o!==c.savedY||u!==c.savedPageIndex);if(!e)return!1;const i=(r,o,u,c)=>{if(a(this,ke).has(r.id)){const f=a(this,Be).get(c);f?r._setParentAndPosition(f,o,u):(r.pageIndex=c,r.x=o,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:u,newPageIndex:c}]of t)i(r,o,u,c)},undo:()=>{for(const[r,{savedX:o,savedY:u,savedPageIndex:c}]of t)i(r,o,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Xi))for(const i of a(this,Xi).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,Wt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,Fn)===t}getActive(){return a(this,Fn)}getMode(){return a(this,Ie)}get imageManager(){return Dt(this,"imageManager",new sy)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,m,v,w)=>({x:(m-r)/u,y:1-(p+v-i)/o,width:w/u,height:v/o});break;case"180":c=(p,m,v,w)=>({x:1-(p+v-i)/o,y:1-(m+w-r)/u,width:v/o,height:w/u});break;case"270":c=(p,m,v,w)=>({x:1-(m+w-r)/u,y:(p-i)/o,width:w/u,height:v/o});break;default:c=(p,m,v,w)=>({x:(p-i)/o,y:(m-r)/u,width:v/o,height:w/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const v=e.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:S,width:x,height:C}of v.getClientRects())x===0||C===0||f.push(c(w,S,x,C))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,Sl)||A(this,Sl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,Sl))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=a(this,Sl))==null?void 0:r.get(t.data.id);if(!e)return;const i=a(this,xs).getRawValue(e);i&&(a(this,Ie)===Tt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};wl=new WeakMap,Fn=new WeakMap,ke=new WeakMap,Be=new WeakMap,Al=new WeakMap,xs=new WeakMap,Sl=new WeakMap,ri=new WeakMap,Er=new WeakMap,Co=new WeakMap,bl=new WeakMap,ko=new WeakMap,Xi=new WeakMap,xi=new WeakMap,To=new WeakMap,jc=new WeakMap,Uc=new WeakMap,_l=new WeakMap,Vc=new WeakMap,qi=new WeakMap,xr=new WeakMap,El=new WeakMap,Cr=new WeakMap,Yi=new WeakMap,yp=new WeakMap,kr=new WeakMap,Wc=new WeakMap,Tr=new WeakMap,Po=new WeakMap,Gc=new WeakMap,Xc=new WeakMap,Ie=new WeakMap,Wt=new WeakMap,Cs=new WeakMap,Ro=new WeakMap,qc=new WeakMap,Yc=new WeakMap,Pr=new WeakMap,Ki=new WeakMap,ks=new WeakMap,Kc=new WeakMap,oi=new WeakMap,Q=new WeakSet,If=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},oy=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of a(this,Be).values())if(i.hasTextLayer(t))return i;return null},LS=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,Q,If).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(a(this,Yi)||A(this,Yi,new yx(this)),a(this,Yi).show(i,r,this.direction==="ltr"))},IS=function(){var o,u,c;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Cs)&&((o=a(this,Yi))==null||o.hide(),A(this,Cs,null),E(this,Q,hn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Cs))return;const r=E(this,Q,If).call(this,t).closest(".textLayer");if(!r){a(this,Cs)&&((u=a(this,Yi))==null||u.hide(),A(this,Cs,null),E(this,Q,hn).call(this,{hasSelectedText:!1}));return}if((c=a(this,Yi))==null||c.hide(),A(this,Cs,e),E(this,Q,hn).call(this,{hasSelectedText:!0}),!(a(this,Ie)!==Tt.HIGHLIGHT&&a(this,Ie)!==Tt.NONE)&&(a(this,Ie)===Tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Cr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=a(this,Ie)===Tt.HIGHLIGHT?E(this,Q,oy).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),w.type==="pointerup"&&E(this,Q,Nf).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},Nf=function(t=""){a(this,Ie)===Tt.HIGHLIGHT?this.highlightSelection(t):a(this,jc)&&E(this,Q,LS).call(this)},NS=function(){document.addEventListener("selectionchange",E(this,Q,IS).bind(this),{signal:this._signal})},DS=function(){if(a(this,xr))return;A(this,xr,new AbortController);const t=this.combinedSignal(a(this,xr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},FS=function(){var t;(t=a(this,xr))==null||t.abort(),A(this,xr,null)},ay=function(){if(a(this,Tr))return;A(this,Tr,new AbortController);const t=this.combinedSignal(a(this,Tr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},OS=function(){var t;(t=a(this,Tr))==null||t.abort(),A(this,Tr,null)},ly=function(){if(a(this,Er))return;A(this,Er,new AbortController);const t=this.combinedSignal(a(this,Er));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},uy=function(){var t;(t=a(this,Er))==null||t.abort(),A(this,Er,null)},$S=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},hn=function(t){Object.entries(t).some(([i,r])=>a(this,Yc)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Yc),t)}),a(this,Ie)===Tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,Q,Ss).call(this,[[Ot.HIGHLIGHT_FREE,!0]]))},Ss=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},zS=async function(){if(!a(this,kr)){A(this,kr,!0);const t=[];for(const e of a(this,Be).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,ke).values())e.enable()}},HS=function(){if(this.unselectAll(),a(this,kr)){A(this,kr,!1);for(const t of a(this,Be).values())t.disable();for(const t of a(this,ke).values())t.disable()}},cy=function(t){const e=a(this,Be).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},BS=function(){let t=null;for(t of a(this,Wt));return t},gc=function(){if(a(this,ke).size===0)return!0;if(a(this,ke).size===1)for(const t of a(this,ke).values())return t.isEmpty();return!1},hy=function(t){for(const e of a(this,Wt))e.unselect();a(this,Wt).clear();for(const e of t)e.isEmpty()||(a(this,Wt).add(e),e.select());E(this,Q,hn).call(this,{hasSelectedEditor:this.hasSelection})},vt(fl,"TRANSLATE_SMALL",1),vt(fl,"TRANSLATE_BIG",10);let Ta=fl;var Ne,Qi,Ci,xl,Zi,On,Cl,Ji,Tn,Ts,Mo,ts,Rr,Fi,mc,Df;const dn=class dn{constructor(t){_(this,Fi);_(this,Ne,null);_(this,Qi,!1);_(this,Ci,null);_(this,xl,null);_(this,Zi,null);_(this,On,null);_(this,Cl,!1);_(this,Ji,null);_(this,Tn,null);_(this,Ts,null);_(this,Mo,null);_(this,ts,!1);A(this,Tn,t),A(this,ts,t._uiManager.useNewAltTextFlow),a(dn,Rr)||A(dn,Rr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){dn._l10n??(dn._l10n=t)}async render(){const t=A(this,Ci,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,xl,document.createElement("span"));t.append(e),a(this,ts)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(dn,Rr).missing),e.setAttribute("data-l10n-id",a(dn,Rr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,Tn)._uiManager._signal;t.addEventListener("contextmenu",Oi,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),a(this,Tn)._uiManager.editAltText(a(this,Tn)),a(this,ts)&&a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Fi,mc)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,Cl,!0),r(o))},{signal:i}),await E(this,Fi,Df).call(this),t}finish(){a(this,Ci)&&(a(this,Ci).focus({focusVisible:a(this,Cl)}),A(this,Cl,!1))}isEmpty(){return a(this,ts)?a(this,Ne)===null:!a(this,Ne)&&!a(this,Qi)}hasData(){return a(this,ts)?a(this,Ne)!==null||!!a(this,Ts):this.isEmpty()}get guessedText(){return a(this,Ts)}async setGuessedText(t){a(this,Ne)===null&&(A(this,Ts,t),A(this,Mo,await dn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Fi,Df).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,ts)||a(this,Ne)){(e=a(this,Ji))==null||e.remove(),A(this,Ji,null);return}if(!a(this,Ji)){const i=A(this,Ji,document.createElement("div"));i.className="noAltTextBadge",a(this,Tn).div.append(i)}a(this,Ji).classList.toggle("hidden",!t)}serialize(t){let e=a(this,Ne);return!t&&a(this,Ts)===e&&(e=a(this,Mo)),{altText:e,decorative:a(this,Qi),guessedText:a(this,Ts),textWithDisclaimer:a(this,Mo)}}get data(){return{altText:a(this,Ne),decorative:a(this,Qi)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:o=!1}){i&&(A(this,Ts,i),A(this,Mo,r)),!(a(this,Ne)===t&&a(this,Qi)===e)&&(o||(A(this,Ne,t),A(this,Qi,e)),E(this,Fi,Df).call(this))}toggle(t=!1){a(this,Ci)&&(!t&&a(this,On)&&(clearTimeout(a(this,On)),A(this,On,null)),a(this,Ci).disabled=!t)}shown(){a(this,Tn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Fi,mc)}})}destroy(){var t,e;(t=a(this,Ci))==null||t.remove(),A(this,Ci,null),A(this,xl,null),A(this,Zi,null),(e=a(this,Ji))==null||e.remove(),A(this,Ji,null)}};Ne=new WeakMap,Qi=new WeakMap,Ci=new WeakMap,xl=new WeakMap,Zi=new WeakMap,On=new WeakMap,Cl=new WeakMap,Ji=new WeakMap,Tn=new WeakMap,Ts=new WeakMap,Mo=new WeakMap,ts=new WeakMap,Rr=new WeakMap,Fi=new WeakSet,mc=function(){return a(this,Ne)&&"added"||a(this,Ne)===null&&this.guessedText&&"review"||"missing"},Df=async function(){var r,o,u;const t=a(this,Ci);if(!t)return;if(a(this,ts)){if(t.classList.toggle("done",!!a(this,Ne)),t.setAttribute("data-l10n-id",a(dn,Rr)[a(this,Fi,mc)]),(r=a(this,xl))==null||r.setAttribute("data-l10n-id",a(dn,Rr)[`${a(this,Fi,mc)}-label`]),!a(this,Ne)){(o=a(this,Zi))==null||o.remove();return}}else{if(!a(this,Ne)&&!a(this,Qi)){t.classList.remove("done"),(u=a(this,Zi))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Zi);if(!e){A(this,Zi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Tn).id}`;const c=100,f=a(this,Tn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(a(this,On)),A(this,On,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,On,setTimeout(()=>{A(this,On,null),a(this,Zi).classList.add("show"),a(this,Tn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;a(this,On)&&(clearTimeout(a(this,On)),A(this,On,null)),(p=a(this,Zi))==null||p.classList.remove("show")},{signal:f})}a(this,Qi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,Ne)),e.parentNode||t.append(e);const i=a(this,Tn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},_(dn,Rr,null),vt(dn,"_l10n",null);let ap=dn;var Qc,Lo,Zc,Jc,th,eh,nh,kl,Ps,Io,Mr,Js,jS,US,dy;const Pv=class Pv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:o=null,onPinchEnd:u=null,signal:c}){_(this,Js);_(this,Qc);_(this,Lo,!1);_(this,Zc,null);_(this,Jc);_(this,th);_(this,eh);_(this,nh);_(this,kl);_(this,Ps,null);_(this,Io);_(this,Mr,null);A(this,Qc,t),A(this,Zc,i),A(this,Jc,e),A(this,th,r),A(this,eh,o),A(this,nh,u),A(this,Io,new AbortController),A(this,kl,AbortSignal.any([c,a(this,Io).signal])),t.addEventListener("touchstart",E(this,Js,jS).bind(this),{passive:!1,signal:a(this,kl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Dt(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=a(this,Io))==null||t.abort(),A(this,Io,null)}};Qc=new WeakMap,Lo=new WeakMap,Zc=new WeakMap,Jc=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,kl=new WeakMap,Ps=new WeakMap,Io=new WeakMap,Mr=new WeakMap,Js=new WeakSet,jS=function(t){var r,o,u;if((r=a(this,Jc))!=null&&r.call(this)||t.touches.length<2)return;if(!a(this,Mr)){A(this,Mr,new AbortController);const c=AbortSignal.any([a(this,kl),a(this,Mr).signal]),f=a(this,Qc),p={signal:c,passive:!1};f.addEventListener("touchmove",E(this,Js,US).bind(this),p),f.addEventListener("touchend",E(this,Js,dy).bind(this),p),f.addEventListener("touchcancel",E(this,Js,dy).bind(this),p),(o=a(this,th))==null||o.call(this)}if(Kn(t),t.touches.length!==2||(u=a(this,Zc))!=null&&u.call(this)){A(this,Ps,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),A(this,Ps,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},US=function(t){var D;if(!a(this,Ps)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:o}=e,{screenX:u,screenY:c}=i,f=a(this,Ps),{touch0X:p,touch0Y:m,touch1X:v,touch1Y:w}=f,S=v-p,x=w-m,C=u-r,k=c-o,T=Math.hypot(C,k)||1,L=Math.hypot(S,x)||1;if(!a(this,Lo)&&Math.abs(L-T)<=Pv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=o,f.touch1X=u,f.touch1Y=c,t.preventDefault(),!a(this,Lo)){A(this,Lo,!0);return}const O=[(r+u)/2,(o+c)/2];(D=a(this,eh))==null||D.call(this,O,L,T)},dy=function(t){var e;a(this,Mr).abort(),A(this,Mr,null),(e=a(this,nh))==null||e.call(this),a(this,Ps)&&(t.preventDefault(),A(this,Ps,null),A(this,Lo,!1))};let lp=Pv;var No,ki,ne,Tl,Lr,ih,Do,je,Fo,Rs,Ir,sh,Oo,$n,rh,$o,Ms,es,Pl,Rl,ai,zo,oh,vp,At,fy,ah,py,Ff,VS,WS,gy,Of,my,GS,XS,qS,yy,YS,vy,KS,QS,ZS,wy,yc;const Rt=class Rt{constructor(t){_(this,At);_(this,No,null);_(this,ki,null);_(this,ne,null);_(this,Tl,!1);_(this,Lr,null);_(this,ih,"");_(this,Do,!1);_(this,je,null);_(this,Fo,null);_(this,Rs,null);_(this,Ir,null);_(this,sh,"");_(this,Oo,!1);_(this,$n,null);_(this,rh,!1);_(this,$o,!1);_(this,Ms,!1);_(this,es,null);_(this,Pl,0);_(this,Rl,0);_(this,ai,null);_(this,zo,null);vt(this,"_editToolbar",null);vt(this,"_initialOptions",Object.create(null));vt(this,"_initialData",null);vt(this,"_isVisible",!0);vt(this,"_uiManager",null);vt(this,"_focusEventsAllowed",!0);_(this,oh,!1);_(this,vp,Rt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,u];const[c,f]=this.parentDimensions;this.x=t.x/c,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Rt.prototype._resizeWithKeyboard,e=Ta.TRANSLATE_SMALL,i=Ta.TRANSLATE_BIG;return Dt(this,"_resizerKeyboardManager",new ld([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Ax({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Rt._l10n??(Rt._l10n=t),Rt._l10nResizer||(Rt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Rt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,oh)}set _isDraggable(t){var e;A(this,oh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,vp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,At,yc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Oo)?A(this,Oo,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[o,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/o,this.y=(e+r)/u,this.fixAndSetPosition()}translate(t,e){E(this,At,fy).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]),E(this,At,fy).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,o]}=this;if(this.x+=t/r,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[f,p]=this.getBaseTranslation();u+=f,c+=p;const{style:m}=i;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,$n)&&(a(this,$n)[0]!==this.x||a(this,$n)[1]!==this.y)}get _hasBeenResized(){return!!a(this,$n)&&(a(this,$n)[2]!==this.width||a(this,$n)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Rt,r=i/t,o=i/e;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:o,y:u,width:c,height:f}=this;if(c*=i,f*=r,o*=i,u*=r,this._mustFixPosition)switch(t){case 0:o=Math.max(0,Math.min(i-c,o)),u=Math.max(0,Math.min(r-f,u));break;case 90:o=Math.max(0,Math.min(i-f,o)),u=Math.min(r,Math.max(c,u));break;case 180:o=Math.min(i,Math.max(c,o)),u=Math.min(r,Math.max(f,u));break;case 270:o=Math.min(i,Math.max(f,o)),u=Math.max(0,Math.min(r-c,u));break}this.x=o/=i,this.y=u/=r;const[p,m]=this.getBaseTranslation();o+=p,u+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return E(i=Rt,ah,py).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return E(i=Rt,ah,py).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,a(this,Do)||(o.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),o=!a(this,Do)&&e.endsWith("%");if(r&&o)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!a(this,Do)&&!o&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,$o)?this._editToolbar:(this._editToolbar=new ny(this),this.div.append(this._editToolbar.render()),a(this,ne)&&await this._editToolbar.addAltText(a(this,ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,ne))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,ne)||(ap.initialize(Rt._l10n),A(this,ne,new ap(this)),a(this,No)&&(a(this,ne).data=a(this,No),A(this,No,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,ne))==null?void 0:t.data}set altTextData(t){a(this,ne)&&(a(this,ne).data=t)}get guessedAltText(){var t;return(t=a(this,ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,ne))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,ne)&&!a(this,ne).isEmpty()}hasAltTextData(){var t;return((t=a(this,ne))==null?void 0:t.hasData())??!1}render(){var o;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,Tl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,At,vy).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),op(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,zo)||A(this,zo,new lp({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,At,GS).bind(this),onPinching:E(this,At,XS).bind(this),onPinchEnd:E(this,At,qS).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),this.div}pointerdown(t){const{isMac:e}=mn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Oo,!0),this._isDraggable){E(this,At,YS).call(this,t);return}E(this,At,yy).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,es)&&clearTimeout(a(this,es)),A(this,es,setTimeout(()=>{var t;A(this,es,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[o,u]=this.pageDimensions,[c,f]=this.pageTranslation,p=t/r,m=e/r,v=this.x*o,w=this.y*u,S=this.width*o,x=this.height*u;switch(i){case 0:return[v+p+c,u-w-m-x+f,v+p+S+c,u-w-m+f];case 90:return[v+m+c,u-w+p+f,v+m+x+c,u-w+p+S+f];case 180:return[v-p-S+c,u-w+m+f,v-p+c,u-w+m+x+f];case 270:return[v-m-x+c,u-w-p-S+f,v-m+c,u-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,o,u]=t,c=o-i,f=u-r;switch(this.rotation){case 0:return[i,e-u,c,f];case 90:return[i,e-r,f,c];case 180:return[o,e-r,c,f];case 270:return[o,e-u,f,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){A(this,$o,!0)}disableEditMode(){A(this,$o,!1)}isInEditMode(){return a(this,$o)}shouldGetKeyboardEvents(){return a(this,Ms)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:o,innerWidth:u}=window;return e<u&&r>0&&t<o&&i>0}rebuild(){E(this,At,vy).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Qt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,A(r,No,t.accessibilityData);const[o,u]=r.pageDimensions,[c,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/o,r.y=f/u,r.width=p/o,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Ir))==null||t.abort(),A(this,Ir,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,es)&&(clearTimeout(a(this,es)),A(this,es,null)),E(this,At,yc).call(this),this.removeEditToolbar(),a(this,ai)){for(const i of a(this,ai).values())clearTimeout(i);A(this,ai,null)}this.parent=null,(e=a(this,zo))==null||e.destroy(),A(this,zo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,At,VS).call(this),a(this,je).classList.remove("hidden"),op(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,je).children;if(!a(this,ki)){A(this,ki,Array.from(e));const u=E(this,At,KS).bind(this),c=E(this,At,QS).bind(this),f=this._uiManager._signal;for(const p of a(this,ki)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",c,{signal:f}),p.addEventListener("focus",E(this,At,ZS).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Rt._l10nResizer[m])}}const i=a(this,ki)[0];let r=0;for(const u of e){if(u===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(a(this,ki).length/4);if(o!==r){if(o<r)for(let c=0;c<r-o;c++)a(this,je).append(a(this,je).firstChild);else if(o>r)for(let c=0;c<o-r;c++)a(this,je).firstChild.before(a(this,je).lastChild);let u=0;for(const c of e){const p=a(this,ki)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Rt._l10nResizer[p])}}E(this,At,wy).call(this,0),A(this,Ms,!0),a(this,je).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Ms)&&E(this,At,my).call(this,a(this,sh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,At,yc).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(i=a(this,ne))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,r,o;(t=a(this,je))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=a(this,ne))==null||o.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,rh)}set isEditing(t){A(this,rh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,Do,!0);const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,ai)||A(this,ai,new Map);const{action:i}=t;let r=a(this,ai).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),a(this,ai).delete(i),a(this,ai).size===0&&A(this,ai,null)},Rt._telemetryTimeout),a(this,ai).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Tl,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Tl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};No=new WeakMap,ki=new WeakMap,ne=new WeakMap,Tl=new WeakMap,Lr=new WeakMap,ih=new WeakMap,Do=new WeakMap,je=new WeakMap,Fo=new WeakMap,Rs=new WeakMap,Ir=new WeakMap,sh=new WeakMap,Oo=new WeakMap,$n=new WeakMap,rh=new WeakMap,$o=new WeakMap,Ms=new WeakMap,es=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,ai=new WeakMap,zo=new WeakMap,oh=new WeakMap,vp=new WeakMap,At=new WeakSet,fy=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ah=new WeakSet,py=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ff=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},VS=function(){if(a(this,je))return;A(this,je,document.createElement("div")),a(this,je).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");a(this,je).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",E(this,At,WS).bind(this,i),{signal:e}),r.addEventListener("contextmenu",Oi,{signal:e}),r.tabIndex=-1}this.div.prepend(a(this,je))},WS=function(t,e){var m;e.preventDefault();const{isMac:i}=mn.platform;if(e.button!==0||e.ctrlKey&&i)return;(m=a(this,ne))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,Fo,[e.screenX,e.screenY]);const o=new AbortController,u=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,At,my).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Kn,{passive:!1,signal:u}),window.addEventListener("contextmenu",Oi,{signal:u}),A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var v;o.abort(),this.parent.togglePointerEvents(!0),(v=a(this,ne))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=f,E(this,At,Of).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},gy=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[o,u]=this.parentDimensions;this.setDims(o*i,u*r),this.fixAndSetPosition(),this._onResized()},Of=function(){if(!a(this,Rs))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=a(this,Rs);A(this,Rs,null);const o=this.x,u=this.y,c=this.width,f=this.height;o===t&&u===e&&c===i&&f===r||this.addCommands({cmd:E(this,At,gy).bind(this,o,u,c,f),undo:E(this,At,gy).bind(this,t,e,i,r),mustExec:!0})},my=function(t,e){const[i,r]=this.parentDimensions,o=this.x,u=this.y,c=this.width,f=this.height,p=Rt.MIN_SIZE/i,m=Rt.MIN_SIZE/r,v=E(this,At,Ff).call(this,this.rotation),w=(q,et)=>[v[0]*q+v[2]*et,v[1]*q+v[3]*et],S=E(this,At,Ff).call(this,360-this.rotation),x=(q,et)=>[S[0]*q+S[2]*et,S[1]*q+S[3]*et];let C,k,T=!1,L=!1;switch(t){case"topLeft":T=!0,C=(q,et)=>[0,0],k=(q,et)=>[q,et];break;case"topMiddle":C=(q,et)=>[q/2,0],k=(q,et)=>[q/2,et];break;case"topRight":T=!0,C=(q,et)=>[q,0],k=(q,et)=>[0,et];break;case"middleRight":L=!0,C=(q,et)=>[q,et/2],k=(q,et)=>[0,et/2];break;case"bottomRight":T=!0,C=(q,et)=>[q,et],k=(q,et)=>[0,0];break;case"bottomMiddle":C=(q,et)=>[q/2,et],k=(q,et)=>[q/2,0];break;case"bottomLeft":T=!0,C=(q,et)=>[0,et],k=(q,et)=>[q,0];break;case"middleLeft":L=!0,C=(q,et)=>[0,et/2],k=(q,et)=>[q,et/2];break}const O=C(c,f),D=k(c,f);let z=w(...D);const H=Rt._round(o+z[0]),B=Rt._round(u+z[1]);let Y=1,Z=1,st,tt;if(e.fromKeyboard)({deltaX:st,deltaY:tt}=e);else{const{screenX:q,screenY:et}=e,[X,ct]=a(this,Fo);[st,tt]=this.screenToPageTranslation(q-X,et-ct),a(this,Fo)[0]=q,a(this,Fo)[1]=et}if([st,tt]=x(st/i,tt/r),T){const q=Math.hypot(c,f);Y=Z=Math.max(Math.min(Math.hypot(D[0]-O[0]-st,D[1]-O[1]-tt)/q,1/c,1/f),p/c,m/f)}else L?Y=Math.max(p,Math.min(1,Math.abs(D[0]-O[0]-st)))/c:Z=Math.max(m,Math.min(1,Math.abs(D[1]-O[1]-tt)))/f;const _t=Rt._round(c*Y),Mt=Rt._round(f*Z);z=w(...k(_t,Mt));const xt=H-z[0],Ut=B-z[1];a(this,$n)||A(this,$n,[this.x,this.y,this.width,this.height]),this.width=_t,this.height=Mt,this.x=xt,this.y=Ut,this.setDims(i*_t,r*Mt),this.fixAndSetPosition(),this._onResizing()},GS=function(){var t;A(this,Rs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},XS=function(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const u=E(this,At,Ff).call(this,this.rotation),c=(H,B)=>[u[0]*H+u[2]*B,u[1]*H+u[3]*B],[f,p]=this.parentDimensions,m=this.x,v=this.y,w=this.width,S=this.height,x=Rt.MIN_SIZE/f,C=Rt.MIN_SIZE/p;o=Math.max(Math.min(o,1/w,1/S),x/w,C/S);const k=Rt._round(w*o),T=Rt._round(S*o);if(k===w&&T===S)return;a(this,$n)||A(this,$n,[m,v,w,S]);const L=c(w/2,S/2),O=Rt._round(m+L[0]),D=Rt._round(v+L[1]),z=c(k/2,T/2);this.x=O-z[0],this.y=D-z[1],this.width=k,this.height=T,this.setDims(f*k,p*T),this.fixAndSetPosition(),this._onResizing()},qS=function(){var t;(t=a(this,ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,At,Of).call(this)},yy=function(t){const{isMac:e}=mn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},YS=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,o=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:o},c=p=>{r.abort(),A(this,Lr,null),A(this,Oo,!1),this._uiManager.endDragSession()||E(this,At,yy).call(this,p),i&&this._onStopDragging()};e&&(A(this,Pl,t.clientX),A(this,Rl,t.clientY),A(this,Lr,t.pointerId),A(this,ih,t.pointerType),window.addEventListener("pointermove",p=>{i||(i=!0,this._onStartDragging());const{clientX:m,clientY:v,pointerId:w}=p;if(w!==a(this,Lr)){Kn(p);return}const[S,x]=this.screenToPageTranslation(m-a(this,Pl),v-a(this,Rl));A(this,Pl,m),A(this,Rl,v),this._uiManager.dragSelectedEditors(S,x)},u),window.addEventListener("touchmove",Kn,u),window.addEventListener("pointerdown",p=>{p.pointerType===a(this,ih)&&(a(this,zo)||p.isPrimary)&&c(p),Kn(p)},u));const f=p=>{if(!a(this,Lr)||a(this,Lr)===p.pointerId){c(p);return}Kn(p)};window.addEventListener("pointerup",f,{signal:o}),window.addEventListener("blur",f,{signal:o})},vy=function(){if(a(this,Ir)||!this.div)return;A(this,Ir,new AbortController);const t=this._uiManager.combinedSignal(a(this,Ir));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},KS=function(t){Rt._resizerKeyboardManager.exec(this,t)},QS=function(t){var e;a(this,Ms)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,je)&&E(this,At,yc).call(this)},ZS=function(t){A(this,sh,a(this,Ms)?t:"")},wy=function(t){if(a(this,ki))for(const e of a(this,ki))e.tabIndex=t},yc=function(){A(this,Ms,!1),E(this,At,wy).call(this,-1),E(this,At,Of).call(this)},_(Rt,ah),vt(Rt,"_l10n",null),vt(Rt,"_l10nResizer",null),vt(Rt,"_borderLineWidth",-1),vt(Rt,"_colorManager",new ry),vt(Rt,"_zIndex",1),vt(Rt,"_telemetryTimeout",1e3);let he=Rt;class Ax extends he{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const YA=3285377520,si=4294901760,Wi=65535;class JS{constructor(t){this.h1=t?t&4294967295:YA,this.h2=t?t&4294967295:YA}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let C=0,k=t.length;C<k;C++){const T=t.charCodeAt(C);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,u=new Uint32Array(e.buffer,0,r);let c=0,f=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,S=v&Wi,x=w&Wi;for(let C=0;C<r;C++)C&1?(c=u[C],c=c*v&si|c*S&Wi,c=c<<15|c>>>17,c=c*w&si|c*x&Wi,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[C],f=f*v&si|f*S&Wi,f=f<<15|f>>>17,f=f*w&si|f*x&Wi,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,o){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*v&si|c*S&Wi,c=c<<15|c>>>17,c=c*w&si|c*x&Wi,r&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&si|t*36045&Wi,e=e*4283543511&si|((e<<16|t>>>16)*2950163797&si)>>>16,t^=e>>>1,t=t*444984403&si|t*60499&Wi,e=e*3301882366&si|((e<<16|t>>>16)*3120437893&si)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Ay=Object.freeze({map:null,hash:"",transfer:void 0});var Ho,Bo,De,wp,tb;class Ev{constructor(){_(this,wp);_(this,Ho,!1);_(this,Bo,null);_(this,De,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=a(this,De).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return a(this,De).get(t)}remove(t){if(a(this,De).delete(t),a(this,De).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,De).values())if(e instanceof he)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=a(this,De).get(t);let r=!1;if(i!==void 0)for(const[o,u]of Object.entries(e))i[o]!==u&&(r=!0,i[o]=u);else r=!0,a(this,De).set(t,e);r&&E(this,wp,tb).call(this),e instanceof he&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,De).has(t)}getAll(){return a(this,De).size>0?vv(a(this,De)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return a(this,De).size}resetModified(){a(this,Ho)&&(A(this,Ho,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new eb(this)}get serializable(){if(a(this,De).size===0)return Ay;const t=new Map,e=new JS,i=[],r=Object.create(null);let o=!1;for(const[u,c]of a(this,De)){const f=c instanceof he?c.serialize(!1,r):c;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),o||(o=!!f.bitmap))}if(o)for(const u of t.values())u.bitmap&&i.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ay}get editorStats(){let t=null;const e=new Map;for(const i of a(this,De).values()){if(!(i instanceof he))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const u=t[o]||(t[o]=new Map);for(const[c,f]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){A(this,Bo,null)}get modifiedIds(){if(a(this,Bo))return a(this,Bo);const t=[];for(const e of a(this,De).values())!(e instanceof he)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return A(this,Bo,{ids:new Set(t),hash:t.join(",")})}}Ho=new WeakMap,Bo=new WeakMap,De=new WeakMap,wp=new WeakSet,tb=function(){a(this,Ho)||(A(this,Ho,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var lh;class eb extends Ev{constructor(e){super();_(this,lh);const{map:i,hash:r,transfer:o}=e.serializable,u=structuredClone(i,o?{transfer:o}:null);A(this,lh,{map:u,hash:r,transfer:o})}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,lh)}get modifiedIds(){return Dt(this,"modifiedIds",{ids:new Set,hash:""})}}lh=new WeakMap;var Ml;class Sx{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,Ml,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ml).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||a(this,Ml).has(t.loadedName))){if(Se(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,u=new FontFace(i,r,o);this.addNativeFontFace(u);try{await u.load(),a(this,Ml).add(i),e==null||e(t)}catch{Pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Pt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Dt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(on||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Dt(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(Se(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Dt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,z){return D.charCodeAt(z)<<24|D.charCodeAt(z+1)<<16|D.charCodeAt(z+2)<<8|D.charCodeAt(z+3)&255}function r(D,z,H,B){const Y=D.substring(0,z),Z=D.substring(z+H);return Y+B+Z}let o,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const f=c.getContext("2d");let p=0;function m(D,z){if(++p>30){Pt("Load test font never loaded."),z();return}if(f.font="30px "+D,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(m.bind(null,D,z))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const x=16,C=1482184792;let k=i(w,x);for(o=0,u=v.length-3;o<u;o+=4)k=k-C+i(v,o)|0;o<v.length&&(k=k-C+i(v+"XXX",o)|0),w=r(w,x,4,ox(k));const T=`url(data:font/opentype;base64,${btoa(w)});`,L=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(L);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const D of[t.loadedName,v]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=D,O.append(z)}this._document.body.append(O),m(v,()=>{O.remove(),e.complete()})}}Ml=new WeakMap;class bx{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const o in t)this[o]=t[o];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${dx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(u){Pt(`getPathGenerator - ignoring character: "${u}".`)}const o=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}}const Ef={DATA:1,ERROR:2},Ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function KA(){}function Cn(d){if(d instanceof Jr||d instanceof Jm||d instanceof Ic||d instanceof GA||d instanceof rp||d instanceof Gm)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new Jr(d.message);case"InvalidPDFException":return new Jm(d.message);case"MissingPDFException":return new Ic(d.message);case"PasswordException":return new GA(d.message,d.code);case"UnexpectedResponseException":return new rp(d.message,d.status);case"UnknownErrorException":return new Gm(d.message,d.details)}return new Gm(d.message,d.toString())}var Ll,pi,nb,ib,sb,$f;class vc{constructor(t,e,i){_(this,pi);_(this,Ll,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,pi,nb).bind(this),{signal:a(this,Ll).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(u){o.reject(u)}return o.promise}sendWithStream(t,e,i,r){const o=this.streamId++,u=this.sourceName,c=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:c,action:t,streamId:o,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,f.postMessage({sourceName:u,targetName:c,stream:Ae.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Se(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,f.postMessage({sourceName:u,targetName:c,stream:Ae.CANCEL,streamId:o,reason:Cn(p)}),m.promise}},i)}destroy(){var t;(t=a(this,Ll))==null||t.abort(),A(this,Ll,null)}}Ll=new WeakMap,pi=new WeakSet,nb=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,pi,sb).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Ef.DATA)r.resolve(t.data);else if(t.callback===Ef.ERROR)r.reject(Cn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(u){o.postMessage({sourceName:i,targetName:r,callback:Ef.DATA,callbackId:t.callbackId,data:u})},function(u){o.postMessage({sourceName:i,targetName:r,callback:Ef.ERROR,callbackId:t.callbackId,reason:Cn(u)})});return}if(t.streamId){E(this,pi,ib).call(this,t);return}e(t.data)},ib=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this,c=this.actionHandler[t.action],f={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:Ae.ENQUEUE,streamId:e,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:Ae.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){Se(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:Ae.ERROR,streamId:e,reason:Cn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(c,t.data,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,reason:Cn(p)})})},sb=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,o=this.comObj,u=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ae.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(Cn(t.reason));break;case Ae.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(Cn(t.reason));break;case Ae.PULL:if(!c){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||KA).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,reason:Cn(p)})});break;case Ae.ENQUEUE:if(Se(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case Ae.CLOSE:if(Se(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,pi,$f).call(this,u,e);break;case Ae.ERROR:Se(u,"error should have stream controller"),u.controller.error(Cn(t.reason)),E(this,pi,$f).call(this,u,e);break;case Ae.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(Cn(t.reason)),E(this,pi,$f).call(this,u,e);break;case Ae.CANCEL:if(!c)break;const f=Cn(t.reason);Promise.try(c.onCancel||KA,f).then(function(){o.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,reason:Cn(p)})}),c.sinkCapability.reject(f),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},$f=async function(t,e){var i,r,o;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var uh;class rb{constructor({enableHWA:t=!1}){_(this,uh,!1);A(this,uh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,uh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}uh=new WeakMap;class _x extends rb{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class ob{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class ab extends ob{async _fetch(t){const e=await Fp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Dp(e)}}class lb{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,o){return"none"}destroy(t=!1){}}var jo,Il,Ls,Is,en,Uo,Vo,it,Ze,wc,ol,zf,al,ub,Sy,ll,Ac,Sc,by,bc;class Ex extends lb{constructor({docId:e,ownerDocument:i=globalThis.document}){super();_(this,it);_(this,jo);_(this,Il);_(this,Ls);_(this,Is);_(this,en);_(this,Uo);_(this,Vo,0);A(this,Is,e),A(this,en,i)}addFilter(e){if(!e)return"none";let i=a(this,it,Ze).get(e);if(i)return i;const[r,o,u]=E(this,it,zf).call(this,e),c=e.length===1?r:`${r}${o}${u}`;if(i=a(this,it,Ze).get(c),i)return a(this,it,Ze).set(e,i),i;const f=`g_${a(this,Is)}_transfer_map_${cn(this,Vo)._++}`,p=E(this,it,al).call(this,f);a(this,it,Ze).set(e,p),a(this,it,Ze).set(c,p);const m=E(this,it,ll).call(this,f);return E(this,it,Sc).call(this,r,o,u,m),p}addHCMFilter(e,i){var x;const r=`${e}-${i}`,o="base";let u=a(this,it,wc).get(o);if((u==null?void 0:u.key)===r||(u?((x=u.filter)==null||x.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},a(this,it,wc).set(o,u)),!e||!i))return u.url;const c=E(this,it,bc).call(this,e);e=pt.makeHexColor(...c);const f=E(this,it,bc).call(this,i);if(i=pt.makeHexColor(...f),a(this,it,ol).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return u.url;const p=new Array(256);for(let C=0;C<=255;C++){const k=C/255;p[C]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const m=p.join(","),v=`g_${a(this,Is)}_hcm_filter`,w=u.filter=E(this,it,ll).call(this,v);E(this,it,Sc).call(this,m,m,m,w),E(this,it,Sy).call(this,w);const S=(C,k)=>{const T=c[C]/255,L=f[C]/255,O=new Array(k+1);for(let D=0;D<=k;D++)O[D]=T+D/k*(L-T);return O.join(",")};return E(this,it,Sc).call(this,S(0,5),S(1,5),S(2,5),w),u.url=E(this,it,al).call(this,v),u.url}addAlphaFilter(e){let i=a(this,it,Ze).get(e);if(i)return i;const[r]=E(this,it,zf).call(this,[e]),o=`alpha_${r}`;if(i=a(this,it,Ze).get(o),i)return a(this,it,Ze).set(e,i),i;const u=`g_${a(this,Is)}_alpha_map_${cn(this,Vo)._++}`,c=E(this,it,al).call(this,u);a(this,it,Ze).set(e,c),a(this,it,Ze).set(o,c);const f=E(this,it,ll).call(this,u);return E(this,it,by).call(this,r,f),c}addLuminosityFilter(e){let i=a(this,it,Ze).get(e||"luminosity");if(i)return i;let r,o;if(e?([r]=E(this,it,zf).call(this,[e]),o=`luminosity_${r}`):o="luminosity",i=a(this,it,Ze).get(o),i)return a(this,it,Ze).set(e,i),i;const u=`g_${a(this,Is)}_luminosity_map_${cn(this,Vo)._++}`,c=E(this,it,al).call(this,u);a(this,it,Ze).set(e,c),a(this,it,Ze).set(o,c);const f=E(this,it,ll).call(this,u);return E(this,it,ub).call(this,f),e&&E(this,it,by).call(this,r,f),c}addHighlightHCMFilter(e,i,r,o,u){var L;const c=`${i}-${r}-${o}-${u}`;let f=a(this,it,wc).get(e);if((f==null?void 0:f.key)===c||(f?((L=f.filter)==null||L.remove(),f.key=c,f.url="none",f.filter=null):(f={key:c,url:"none",filter:null},a(this,it,wc).set(e,f)),!i||!r))return f.url;const[p,m]=[i,r].map(E(this,it,bc).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,x]=[o,u].map(E(this,it,bc).bind(this));w<v&&([v,w,S,x]=[w,v,x,S]),a(this,it,ol).style.color="";const C=(O,D,z)=>{const H=new Array(256),B=(w-v)/z,Y=O/255,Z=(D-O)/(255*z);let st=0;for(let tt=0;tt<=z;tt++){const _t=Math.round(v+tt*B),Mt=Y+tt*Z;for(let xt=st;xt<=_t;xt++)H[xt]=Mt;st=_t+1}for(let tt=st;tt<256;tt++)H[tt]=H[st-1];return H.join(",")},k=`g_${a(this,Is)}_hcm_${e}_filter`,T=f.filter=E(this,it,ll).call(this,k);return E(this,it,Sy).call(this,T),E(this,it,Sc).call(this,C(S[0],x[0],5),C(S[1],x[1],5),C(S[2],x[2],5),T),f.url=E(this,it,al).call(this,k),f.url}destroy(e=!1){var i,r,o,u;e&&((i=a(this,Uo))!=null&&i.size)||((r=a(this,Ls))==null||r.parentNode.parentNode.remove(),A(this,Ls,null),(o=a(this,Il))==null||o.clear(),A(this,Il,null),(u=a(this,Uo))==null||u.clear(),A(this,Uo,null),A(this,Vo,0))}}jo=new WeakMap,Il=new WeakMap,Ls=new WeakMap,Is=new WeakMap,en=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,it=new WeakSet,Ze=function(){return a(this,Il)||A(this,Il,new Map)},wc=function(){return a(this,Uo)||A(this,Uo,new Map)},ol=function(){if(!a(this,Ls)){const e=a(this,en).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=a(this,en).createElementNS(As,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Ls,a(this,en).createElementNS(As,"defs")),e.append(r),r.append(a(this,Ls)),a(this,en).body.append(e)}return a(this,Ls)},zf=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,o]=e,u=new Array(256),c=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,c[p]=r[p]/255,f[p]=o[p]/255;return[u.join(","),c.join(","),f.join(",")]},al=function(e){if(a(this,jo)===void 0){A(this,jo,"");const i=a(this,en).URL;i!==a(this,en).baseURI&&(Op(i)?Pt('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,jo,i.split("#",1)[0]))}return`url(${a(this,jo)}#${e})`},ub=function(e){const i=a(this,en).createElementNS(As,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Sy=function(e){const i=a(this,en).createElementNS(As,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},ll=function(e){const i=a(this,en).createElementNS(As,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),a(this,it,ol).append(i),i},Ac=function(e,i,r){const o=a(this,en).createElementNS(As,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),e.append(o)},Sc=function(e,i,r,o){const u=a(this,en).createElementNS(As,"feComponentTransfer");o.append(u),E(this,it,Ac).call(this,u,"feFuncR",e),E(this,it,Ac).call(this,u,"feFuncG",i),E(this,it,Ac).call(this,u,"feFuncB",r)},by=function(e,i){const r=a(this,en).createElementNS(As,"feComponentTransfer");i.append(r),E(this,it,Ac).call(this,r,"feFuncA",e)},bc=function(e){return a(this,it,ol).style.color=e,_v(getComputedStyle(a(this,it,ol)).getPropertyValue("color"))};class cb{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class hb extends cb{async _fetch(t){const e=await Fp(t,"arraybuffer");return new Uint8Array(e)}}on&&Pt("Please use the `legacy` build in Node.js environments.");async function db(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class xx extends lb{}class Cx extends rb{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class kx extends ob{async _fetch(t){return db(t)}}class Tx extends cb{async _fetch(t){return db(t)}}const rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function _y(d,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),d.clip(r)}class xv{getPattern(){Qt("Abstract method `getPattern` called.")}}class Px extends xv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let o;if(r===rn.STROKE||r===rn.FILL){const u=e.current.getClippedPathBoundingBox(r,re(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),i=pt.transform(i,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),_y(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);o.setTransform(v)}else _y(t,this._bbox),o=this._createGradient(t);return o}}function Ym(d,t,e,i,r,o,u,c){const f=t.coords,p=t.colors,m=d.data,v=d.width*4;let w;f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w),f[i+1]>f[r+1]&&(w=i,i=r,r=w,w=u,u=c,c=w),f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=o,o=u,u=w);const S=(f[e]+t.offsetX)*t.scaleX,x=(f[e+1]+t.offsetY)*t.scaleY,C=(f[i]+t.offsetX)*t.scaleX,k=(f[i+1]+t.offsetY)*t.scaleY,T=(f[r]+t.offsetX)*t.scaleX,L=(f[r+1]+t.offsetY)*t.scaleY;if(x>=L)return;const O=p[o],D=p[o+1],z=p[o+2],H=p[u],B=p[u+1],Y=p[u+2],Z=p[c],st=p[c+1],tt=p[c+2],_t=Math.round(x),Mt=Math.round(L);let xt,Ut,q,et,X,ct,J,I;for(let j=_t;j<=Mt;j++){if(j<k){const yt=j<x?0:(x-j)/(x-k);xt=S-(S-C)*yt,Ut=O-(O-H)*yt,q=D-(D-B)*yt,et=z-(z-Y)*yt}else{let yt;j>L?yt=1:k===L?yt=0:yt=(k-j)/(k-L),xt=C-(C-T)*yt,Ut=H-(H-Z)*yt,q=B-(B-st)*yt,et=Y-(Y-tt)*yt}let dt;j<x?dt=0:j>L?dt=1:dt=(x-j)/(x-L),X=S-(S-T)*dt,ct=O-(O-Z)*dt,J=D-(D-st)*dt,I=z-(z-tt)*dt;const Ct=Math.round(Math.min(xt,X)),Lt=Math.round(Math.max(xt,X));let St=v*j+Ct*4;for(let yt=Ct;yt<=Lt;yt++)dt=(xt-yt)/(xt-X),dt<0?dt=0:dt>1&&(dt=1),m[St++]=Ut-(Ut-ct)*dt|0,m[St++]=q-(q-J)*dt|0,m[St++]=et-(et-I)*dt|0,m[St++]=255}}function Rx(d,t,e){const i=t.coords,r=t.colors;let o,u;switch(t.type){case"lattice":const c=t.verticesPerRow,f=Math.floor(i.length/c)-1,p=c-1;for(o=0;o<f;o++){let m=o*c;for(let v=0;v<p;v++,m++)Ym(d,e,i[m],i[m+1],i[m+c],r[m],r[m+1],r[m+c]),Ym(d,e,i[m+c+1],i[m+1],i[m+c],r[m+c+1],r[m+1],r[m+c])}break;case"triangles":for(o=0,u=i.length;o<u;o+=3)Ym(d,e,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class Mx extends xv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const c=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),S=p/v,x=m/w,C={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-f,scaleX:1/S,scaleY:1/x},k=v+2*2,T=w+2*2,L=i.getCanvas("mesh",k,T),O=L.context,D=O.createImageData(v,w);if(e){const H=D.data;for(let B=0,Y=H.length;B<Y;B+=4)H[B]=e[0],H[B+1]=e[1],H[B+2]=e[2],H[B+3]=255}for(const H of this._figures)Rx(D,H,C);return O.putImageData(D,2,2),{canvas:L.canvas,offsetX:c-2*S,offsetY:f-2*x,scaleX:S,scaleY:x}}getPattern(t,e,i,r){_y(t,this._bbox);let o;if(r===rn.SHADING)o=pt.singularValueDecompose2dScale(re(t));else if(o=pt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=pt.singularValueDecompose2dScale(this.matrix);o=[o[0]*c[0],o[1]*c[1]]}const u=this._createMeshCanvas(o,r===rn.SHADING?null:this._background,e.cachedCanvases);return r!==rn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class Lx extends xv{getPattern(){return"hotpink"}}function Ix(d){switch(d[0]){case"RadialAxial":return new Px(d);case"Mesh":return new Mx(d);case"Dummy":return new Lx}throw new Error(`Unknown IR type: ${d[0]}`)}const QA={COLORED:1,UNCOLORED:2},Ap=class Ap{constructor(t,e,i,r,o){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:o,color:u,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Np("TilingType: "+o);const m=e[0],v=e[1],w=e[2],S=e[3],x=w-m,C=S-v,k=pt.singularValueDecompose2dScale(this.matrix),T=pt.singularValueDecompose2dScale(this.baseTransform),L=k[0]*T[0],O=k[1]*T[1];let D=x,z=C,H=!1,B=!1;const Y=Math.ceil(f*L),Z=Math.ceil(p*O),st=Math.ceil(x*L),tt=Math.ceil(C*O);Y>=st?D=f:H=!0,Z>=tt?z=p:B=!0;const _t=this.getSizeAndScale(D,this.ctx.canvas.width,L),Mt=this.getSizeAndScale(z,this.ctx.canvas.height,O),xt=t.cachedCanvases.getCanvas("pattern",_t.size,Mt.size),Ut=xt.context,q=c.createCanvasGraphics(Ut);if(q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(q,r,u),Ut.translate(-_t.scale*m,-Mt.scale*v),q.transform(_t.scale,0,0,Mt.scale,0,0),Ut.save(),this.clipBbox(q,m,v,w,S),q.baseTransform=re(q.ctx),q.executeOperatorList(i),q.endDrawing(),Ut.restore(),H||B){const et=xt.canvas;H&&(D=f),B&&(z=p);const X=this.getSizeAndScale(D,this.ctx.canvas.width,L),ct=this.getSizeAndScale(z,this.ctx.canvas.height,O),J=X.size,I=ct.size,j=t.cachedCanvases.getCanvas("pattern-workaround",J,I),dt=j.context,Ct=H?Math.floor(x/f):0,Lt=B?Math.floor(C/p):0;for(let St=0;St<=Ct;St++)for(let yt=0;yt<=Lt;yt++)dt.drawImage(et,J*St,I*yt,J,I,0,0,J,I);return{canvas:j.canvas,scaleX:X.scale,scaleY:ct.scale,offsetX:m,offsetY:v}}return{canvas:xt.canvas,scaleX:_t.scale,scaleY:Mt.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,i){const r=Math.max(Ap.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=r?o=r:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,r,o){const u=r-e,c=o-i;t.ctx.rect(e,i,u,c),t.current.updateRectMinMax(re(t.ctx),[e,i,r,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,o=t.current;switch(e){case QA.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,o.fillColor=u.fillStyle,o.strokeColor=u.strokeStyle;break;case QA.UNCOLORED:const c=pt.makeHexColor(i[0],i[1],i[2]);r.fillStyle=c,r.strokeStyle=c,o.fillColor=c,o.strokeColor=c;break;default:throw new rx(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let o=i;r!==rn.SHADING&&(o=pt.transform(o,e.baseTransform),this.matrix&&(o=pt.transform(o,this.matrix)));const u=this.createPatternCanvas(e);let c=new DOMMatrix(o);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(c),f}};vt(Ap,"MAX_PATTERN_SIZE",3e3);let Ey=Ap;function Nx({src:d,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:u=!1}){const c=mn.isLittleEndian?4278190080:255,[f,p]=u?[o,c]:[c,o],m=i>>3,v=i&7,w=d.length;e=new Uint32Array(e.buffer);let S=0;for(let x=0;x<r;x++){for(const k=t+m;t<k;t++){const T=t<w?d[t]:255;e[S++]=T&128?p:f,e[S++]=T&64?p:f,e[S++]=T&32?p:f,e[S++]=T&16?p:f,e[S++]=T&8?p:f,e[S++]=T&4?p:f,e[S++]=T&2?p:f,e[S++]=T&1?p:f}if(v===0)continue;const C=t<w?d[t++]:255;for(let k=0;k<v;k++)e[S++]=C&1<<7-k?p:f}return{srcPos:t,destPos:S}}const ZA=16,JA=100,Dx=15,tS=10,eS=1e3,Mn=16;function Fx(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},d.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},d.transform=function(i,r,o,u,c,f){t.transform(i,r,o,u,c,f),this.__originalTransform(i,r,o,u,c,f)},d.setTransform=function(i,r,o,u,c,f){t.setTransform(i,r,o,u,c,f),this.__originalSetTransform(i,r,o,u,c,f)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},d.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},d.bezierCurveTo=function(e,i,r,o,u,c){t.bezierCurveTo(e,i,r,o,u,c),this.__originalBezierCurveTo(e,i,r,o,u,c)},d.rect=function(e,i,r,o){t.rect(e,i,r,o),this.__originalRect(e,i,r,o)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Ox{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function xf(d,t,e,i,r,o,u,c,f,p){const[m,v,w,S,x,C]=re(d);if(v===0&&w===0){const L=u*m+x,O=Math.round(L),D=c*S+C,z=Math.round(D),H=(u+f)*m+x,B=Math.abs(Math.round(H)-O)||1,Y=(c+p)*S+C,Z=Math.abs(Math.round(Y)-z)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(S),O,z),d.drawImage(t,e,i,r,o,0,0,B,Z),d.setTransform(m,v,w,S,x,C),[B,Z]}if(m===0&&S===0){const L=c*w+x,O=Math.round(L),D=u*v+C,z=Math.round(D),H=(c+p)*w+x,B=Math.abs(Math.round(H)-O)||1,Y=(u+f)*v+C,Z=Math.abs(Math.round(Y)-z)||1;return d.setTransform(0,Math.sign(v),Math.sign(w),0,O,z),d.drawImage(t,e,i,r,o,0,0,Z,B),d.setTransform(m,v,w,S,x,C),[Z,B]}d.drawImage(t,e,i,r,o,u,c,f,p);const k=Math.hypot(m,v),T=Math.hypot(w,S);return[k*f,T*p]}function $x(d){const{width:t,height:e}=d;if(t>eS||e>eS)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let u=new Uint8Array(o*(e+1)),c,f,p;const m=t+7&-8;let v=new Uint8Array(m*e),w=0;for(const T of d.data){let L=128;for(;L>0;)v[w++]=T&L?0:255,L>>=1}let S=0;for(w=0,v[w]!==0&&(u[0]=1,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[f]=v[w]?2:1,++S),w++;for(v[w]!==0&&(u[f]=2,++S),c=1;c<e;c++){w=c*m,p=c*o,v[w-m]!==v[w]&&(u[p]=v[w]?1:8,++S);let T=(v[w]?4:0)+(v[w-m]?8:0);for(f=1;f<t;f++)T=(T>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[T]&&(u[p+f]=r[T],++S),w++;if(v[w-m]!==v[w]&&(u[p+f]=v[w]?2:4,++S),S>i)return null}for(w=m*(e-1),p=c*o,v[w]!==0&&(u[p]=8,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[p+f]=v[w]?4:8,++S),w++;if(v[w]!==0&&(u[p+f]=4,++S),S>i)return null;const x=new Int32Array([0,o,-1,0,-o,0,0,0,1]),C=new Path2D;for(c=0;S&&c<=e;c++){let T=c*o;const L=T+t;for(;T<L&&!u[T];)T++;if(T===L)continue;C.moveTo(T%o,c);const O=T;let D=u[T];do{const z=x[D];do T+=z;while(!u[T]);const H=u[T];H!==5&&H!==10?(D=H,u[T]=0):(D=H&51*D>>4,u[T]&=D>>2|D<<2),C.lineTo(T%o,T/o|0),u[T]||--S}while(O!==T);--c}return v=null,u=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(C),T.beginPath(),T.restore()}}class nS{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=bS,this.textMatrixScale=1,this.fontMatrix=Zm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Qe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=pt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=pt.applyTransform(e,t),r=pt.applyTransform(e.slice(2),t),o=pt.applyTransform([e[0],e[3]],t),u=pt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],o[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],u[1])}updateScalingPathMinMax(t,e){pt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,o,u,c,f,p,m){const v=pt.bezierBoundingBox(e,i,r,o,u,c,f,p,m);m||this.updateRectMinMax(t,v)}getPathBoundingBox(t=rn.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===rn.STROKE){e||Qt("Stroke bounding box must include transform.");const r=pt.singularValueDecompose2dScale(e),o=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=u,i[2]+=o,i[3]+=u}return i}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=rn.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function iS(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%Mn,o=(e-r)/Mn,u=r===0?o:o+1,c=d.createImageData(i,Mn);let f=0,p;const m=t.data,v=c.data;let w,S,x,C;if(t.kind===Pf.GRAYSCALE_1BPP){const k=m.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),L=T.length,O=i+7>>3,D=4294967295,z=mn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(x=w<o?Mn:r,p=0,S=0;S<x;S++){const H=k-f;let B=0;const Y=H>O?i:H*8-7,Z=Y&-8;let st=0,tt=0;for(;B<Z;B+=8)tt=m[f++],T[p++]=tt&128?D:z,T[p++]=tt&64?D:z,T[p++]=tt&32?D:z,T[p++]=tt&16?D:z,T[p++]=tt&8?D:z,T[p++]=tt&4?D:z,T[p++]=tt&2?D:z,T[p++]=tt&1?D:z;for(;B<Y;B++)st===0&&(tt=m[f++],st=128),T[p++]=tt&st?D:z,st>>=1}for(;p<L;)T[p++]=0;d.putImageData(c,0,w*Mn)}}else if(t.kind===Pf.RGBA_32BPP){for(S=0,C=i*Mn*4,w=0;w<o;w++)v.set(m.subarray(f,f+C)),f+=C,d.putImageData(c,0,S),S+=Mn;w<u&&(C=i*r*4,v.set(m.subarray(f,f+C)),d.putImageData(c,0,S))}else if(t.kind===Pf.RGB_24BPP)for(x=Mn,C=i*x,w=0;w<u;w++){for(w>=o&&(x=r,C=i*x),p=0,S=C;S--;)v[p++]=m[f++],v[p++]=m[f++],v[p++]=m[f++],v[p++]=255;d.putImageData(c,0,w*Mn)}else throw new Error(`bad image kind: ${t.kind}`)}function sS(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%Mn,o=(e-r)/Mn,u=r===0?o:o+1,c=d.createImageData(i,Mn);let f=0;const p=t.data,m=c.data;for(let v=0;v<u;v++){const w=v<o?Mn:r;({srcPos:f}=Nx({src:p,srcPos:f,dest:m,width:i,height:w,nonBlackColor:0})),d.putImageData(c,0,v*Mn)}}function hc(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)d[i]!==void 0&&(t[i]=d[i]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function Cf(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!on){const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}}function rS(d,t){if(t)return!0;const e=pt.singularValueDecompose2dScale(d);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*to.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const zx=["butt","round","square"],Hx=["miter","round","bevel"],Bx={},oS={};var $i,xy,Cy,ky;const Rv=class Rv{constructor(t,e,i,r,o,{optionalContentConfig:u,markedContentStack:c=null},f,p){_(this,$i);this.ctx=t,this.current=new nS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new Ox(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,u),this.ctx.fillStyle=c,i){const f=this.cachedCanvases.getCanvas("transparent",o,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...re(this.compositeCtx))}this.ctx.save(),Cf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=re(this.ctx)}executeOperatorList(t,e,i,r){const o=t.argsArray,u=t.fnArray;let c=e||0;const f=o.length;if(f===c)return c;const p=f-c>tS&&typeof i=="function",m=p?Date.now()+Dx:0;let v=0;const w=this.commonObjs,S=this.objs;let x;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(x=u[c],x!==_i.dependency)this[x].apply(this,o[c]);else for(const C of o[c]){const k=C.startsWith("g_")?w:S;if(!k.has(C))return k.get(C,i),c}if(c++,c===f)return c;if(p&&++v>tS){if(Date.now()>m)return i(),c;v=0}}}endDrawing(){E(this,$i,xy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,$i,Cy).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=i,f=r,p="prescale1",m,v;for(;o>2&&c>1||u>2&&f>1;){let w=c,S=f;o>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/w),u>2&&f>1&&(S=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/S),m=this.cachedCanvases.getCanvas(p,w,S),v=m.context,v.clearRect(0,0,w,S),v.drawImage(t,0,0,c,f,0,0,w,S),t=m.canvas,c=w,f=S,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,o=this.current.fillColor,u=this.current.patternFill,c=re(e);let f,p,m,v;if((t.bitmap||t.data)&&t.count>1){const Y=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),o]),f=this._cachedBitmapsMap.get(Y),f||(f=new Map,this._cachedBitmapsMap.set(Y,f));const Z=f.get(p);if(Z&&!u){const st=Math.round(Math.min(c[0],c[2])+c[4]),tt=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:Z,offsetX:st,offsetY:tt}}m=Z}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),sS(v.context,t));let w=pt.transform(c,[1/i,0,0,-1/r,0,0]);w=pt.transform(w,[1,0,0,1,0,-r]);const[S,x,C,k]=pt.getAxialAlignedBoundingBox([0,0,i,r],w),T=Math.round(C-S)||1,L=Math.round(k-x)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,L),D=O.context,z=S,H=x;D.translate(-z,-H),D.transform(...w),m||(m=this._scaleImage(v.canvas,Vi(D)),m=m.img,f&&u&&f.set(p,m)),D.imageSmoothingEnabled=rS(re(D),t.interpolate),xf(D,m,0,0,m.width,m.height,0,0,i,r),D.globalCompositeOperation="source-in";const B=pt.transform(Vi(D),[1,0,0,1,-z,-H]);return D.fillStyle=u?o.getPattern(e,this,B,rn.FILL):o,D.fillRect(0,0,i,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),{canvas:O.canvas,offsetX:Math.round(z),offsetY:Math.round(H)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=zx[t]}setLineJoin(t){this.ctx.lineJoin=Hx[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...re(this.suspendedCtx)),hc(this.suspendedCtx,o),Fx(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),hc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const o=r[0],u=r[1],c=r[2]-o,f=r[3]-u;c===0||f===0||(this.genericComposeSMask(e.context,i,c,f,e.subtype,e.backdrop,e.transferMap,o,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,o,u,c,f,p,m,v){let w=t.canvas,S=f-m,x=p-v;if(u){const k=pt.makeHexColor(...u);if(S<0||x<0||S+i>w.width||x+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),L=T.context;L.drawImage(w,-S,-x),L.globalCompositeOperation="destination-atop",L.fillStyle=k,L.fillRect(0,0,i,r),L.globalCompositeOperation="source-over",w=T.canvas,S=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,x,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(S,x,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const C=new Path2D;C.rect(f,p,i,r),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(w,S,x,i,r,f,p,i,r),e.restore()}save(){this.inSMaskMode?(hc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),hc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,o,u){this.ctx.transform(t,e,i,r,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,o=this.current;let u=o.x,c=o.y,f,p;const m=re(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let S=0,x=0,C=t.length;S<C;S++)switch(t[S]|0){case _i.rectangle:u=e[x++],c=e[x++];const k=e[x++],T=e[x++],L=u+k,O=c+T;r.moveTo(u,c),k===0||T===0?r.lineTo(L,O):(r.lineTo(L,c),r.lineTo(L,O),r.lineTo(u,O)),v||o.updateRectMinMax(m,[u,c,L,O]),r.closePath();break;case _i.moveTo:u=e[x++],c=e[x++],r.moveTo(u,c),v||o.updatePathMinMax(m,u,c);break;case _i.lineTo:u=e[x++],c=e[x++],r.lineTo(u,c),v||o.updatePathMinMax(m,u,c);break;case _i.curveTo:f=u,p=c,u=e[x+4],c=e[x+5],r.bezierCurveTo(e[x],e[x+1],e[x+2],e[x+3],u,c),o.updateCurvePathMinMax(m,f,p,e[x],e[x+1],e[x+2],e[x+3],u,c,w),x+=6;break;case _i.curveTo2:f=u,p=c,r.bezierCurveTo(u,c,e[x],e[x+1],e[x+2],e[x+3]),o.updateCurvePathMinMax(m,f,p,u,c,e[x],e[x+1],e[x+2],e[x+3],w),u=e[x+2],c=e[x+3],x+=4;break;case _i.curveTo3:f=u,p=c,u=e[x+2],c=e[x+3],r.bezierCurveTo(e[x],e[x+1],u,c,u,c),o.updateCurvePathMinMax(m,f,p,e[x],e[x+1],u,c,u,c,w),x+=4;break;case _i.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(m,w),o.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Vi(e),rn.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,Vi(e),rn.FILL),o=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),o&&e.restore(),t&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Bx}eoClip(){this.pendingClip=oS}beginText(){this.current.textMatrix=bS,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,r=e.getTransform().invertSelf();for(const{transform:o,x:u,y:c,fontSize:f,path:p}of t)i.addPath(p,new DOMMatrix(o).preMultiplySelf(r).translate(u,c).scale(f,-f));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Zm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Pt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif",u=((m=i.systemFontInfo)==null?void 0:m.css)||`"${o}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const f=i.italic?"italic":"normal";let p=e;e<ZA?p=ZA:e>JA&&(p=JA),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,o,u){this.current.textMatrix=[t,e,i,r,o,u],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,o){const u=this.ctx,c=this.current,f=c.font,p=c.textRenderingMode,m=c.fontSize/c.fontSizeScale,v=p&Qe.FILL_STROKE_MASK,w=!!(p&Qe.ADD_TO_PATH_FLAG),S=c.patternFill&&!f.missingFile,x=c.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||w||S||x)&&(C=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||S||x){if(u.save(),u.translate(e,i),u.scale(m,-m),v===Qe.FILL||v===Qe.FILL_STROKE)if(r){const k=u.getTransform();u.setTransform(...r),u.fill(E(this,$i,ky).call(this,C,k,r))}else u.fill(C);if(v===Qe.STROKE||v===Qe.FILL_STROKE)if(o){const k=u.getTransform();u.setTransform(...o),u.stroke(E(this,$i,ky).call(this,C,k,o))}else u.lineWidth/=m,u.stroke(C);u.restore()}else(v===Qe.FILL||v===Qe.FILL_STROKE)&&u.fillText(t,e,i),(v===Qe.STROKE||v===Qe.FILL_STROKE)&&u.strokeText(t,e,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:re(u),x:e,y:i,fontSize:m,path:C})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return Dt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const o=this.ctx,u=e.fontSizeScale,c=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,v=t.length,w=i.vertical,S=w?1:-1,x=i.defaultVMetrics,C=r*e.fontMatrix[0],k=e.textRenderingMode===Qe.FILL&&!i.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),p>0?o.scale(m,-1):o.scale(m,1);let T,L;if(e.patternFill){o.save();const B=e.fillColor.getPattern(o,this,Vi(o),rn.FILL);T=re(o),o.restore(),o.fillStyle=B}if(e.patternStroke){o.save();const B=e.strokeColor.getPattern(o,this,Vi(o),rn.STROKE);L=re(o),o.restore(),o.strokeStyle=B}let O=e.lineWidth;const D=e.textMatrixScale;if(D===0||O===0){const B=e.textRenderingMode&Qe.FILL_STROKE_MASK;(B===Qe.STROKE||B===Qe.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=D;if(u!==1&&(o.scale(u,u),O/=u),o.lineWidth=O,i.isInvalidPDFjsFont){const B=[];let Y=0;for(const Z of t)B.push(Z.unicode),Y+=Z.width;o.fillText(B.join(""),0,0),e.x+=Y*C*m,o.restore(),this.compose();return}let z=0,H;for(H=0;H<v;++H){const B=t[H];if(typeof B=="number"){z+=S*B*r/1e3;continue}let Y=!1;const Z=(B.isSpace?f:0)+c,st=B.fontChar,tt=B.accent;let _t,Mt,xt=B.width;if(w){const q=B.vmetric||x,et=-(B.vmetric?q[1]:xt*.5)*C,X=q[2]*C;xt=q?-q[0]:xt,_t=et/u,Mt=(z+X)/u}else _t=z/u,Mt=0;if(i.remeasure&&xt>0){const q=o.measureText(st).width*1e3/r*u;if(xt<q&&this.isFontSubpixelAAEnabled){const et=xt/q;Y=!0,o.save(),o.scale(et,1),_t/=et}else xt!==q&&(_t+=(xt-q)/2e3*r/u)}if(this.contentVisible&&(B.isInFont||i.missingFile)){if(k&&!tt)o.fillText(st,_t,Mt);else if(this.paintChar(st,_t,Mt,T,L),tt){const q=_t+r*tt.offset.x/u,et=Mt-r*tt.offset.y/u;this.paintChar(tt.fontChar,q,et,T,L)}}const Ut=w?xt*C-Z*p:xt*C+Z*p;z+=Ut,Y&&o.restore()}w?e.y-=z:e.x+=z*m,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,o=i.fontSize,u=i.fontDirection,c=r.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||Zm,w=t.length,S=i.textRenderingMode===Qe.INVISIBLE;let x,C,k,T;if(!(S||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(m,u),x=0;x<w;++x){if(C=t[x],typeof C=="number"){T=c*C*o/1e3,this.ctx.translate(T,0),i.x+=T*m;continue}const L=(C.isSpace?p:0)+f,O=r.charProcOperatorList[C.operatorListId];if(!O){Pt(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(o,o),e.transform(...v),this.executeOperatorList(O),this.restore()),k=pt.applyTransform([C.width,0],v)[0]*o+L,e.translate(k,0),i.x+=k*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,o,u){this.ctx.rect(i,r,o-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||re(this.ctx),o={createCanvasGraphics:u=>new Rv(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new Ey(t,i,this.ctx,o,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=pt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=pt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Ix(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Vi(e),rn.SHADING);const r=Vi(e);{const{width:o,height:u}=e.canvas,[c,f,p,m]=pt.getAxialAlignedBoundingBox([0,0,o,u],r);this.ctx.fillRect(c,f,p-c,m-f)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=re(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(re(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Np("TODO: Support non-isolated groups."),t.knockout&&Pt("Knockout groups not supported.");const i=re(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=pt.getAxialAlignedBoundingBox(t.bbox,re(e));const o=[0,0,e.canvas.width,e.canvas.height];r=pt.intersect(r,o)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),w=v.context;w.translate(-u,-c),w.transform(...i),t.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.save()),hc(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=pt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,r,o){if(E(this,$i,xy).call(this),Cf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],c=e[3]-e[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=c;const[f,p]=pt.singularValueDecompose2dScale(re(this.ctx)),{viewportScale:m}=this,v=Math.ceil(u*this.outputScaleX*m),w=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:S,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,c*p),Cf(this.ctx)}else Cf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],u,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new nS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,$i,Cy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=$x(t)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(t),u=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,o,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const f=re(c);c.transform(e,i,r,o,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,v=u.length;m<v;m+=2){const w=pt.transform(f,[e,i,r,o,u[m],u[m+1]]),[S,x]=pt.applyTransform([0,0],w);c.drawImage(p.canvas,S,x)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of t){const{data:u,width:c,height:f,transform:p}=o,m=this.cachedCanvases.getCanvas("maskCanvas",c,f),v=m.context;v.save();const w=this.getObject(u,o);sS(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,Vi(e),rn.FILL):i,v.fillRect(0,0,c,f),v.restore(),e.save(),e.transform(...p),e.scale(1,-1),xf(e,m.canvas,0,0,c,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){Pt("Dependent image isn't ready yet");return}const u=o.width,c=o.height,f=[];for(let p=0,m=r.length;p<m;p+=2)f.push({transform:[e,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(o,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,r),u=o.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!on){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,i).context;iS(f,t),o=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(o,Vi(r));r.imageSmoothingEnabled=rS(re(r),t.interpolate),xf(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const o=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",o,u).context;iS(f,t),r=this.applyTransferMapsToCanvas(f)}for(const o of e)i.save(),i.transform(...o.transform),i.scale(1,-1),xf(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===oS?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=re(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:o}=this.ctx.getTransform();let u,c;if(i===0&&r===0){const f=Math.abs(e),p=Math.abs(o);if(f===p)if(t===0)u=c=1/f;else{const m=f*t;u=c=m<1?1/m:1}else if(t===0)u=1/f,c=1/p;else{const m=f*t,v=p*t;u=m<1?1/m:1,c=v<1?1/v:1}}else{const f=Math.abs(e*o-i*r),p=Math.hypot(e,i),m=Math.hypot(r,o);if(t===0)u=m/f,c=p/f;else{const v=t*f;u=m>v?m/v:1,c=p>v?p/v:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&o===1){e.stroke();return}const u=e.getLineDash();if(t&&e.save(),e.scale(r,o),u.length>0){const c=Math.max(r,o);e.setLineDash(u.map(f=>f/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};$i=new WeakSet,xy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cy=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ky=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let gl=Rv;for(const d in _i)gl.prototype[d]!==void 0&&(gl.prototype[_i[d]]=gl.prototype[d]);var ch,hh;class Ks{static get workerPort(){return a(this,ch)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,ch,t)}static get workerSrc(){return a(this,hh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,hh,t)}}ch=new WeakMap,hh=new WeakMap,_(Ks,ch,null),_(Ks,hh,"");var Wo,dh;class jx{constructor({parsedData:t,rawData:e}){_(this,Wo);_(this,dh);A(this,Wo,t),A(this,dh,e)}getRaw(){return a(this,dh)}get(t){return a(this,Wo).get(t)??null}getAll(){return vv(a(this,Wo))}has(t){return a(this,Wo).has(t)}}Wo=new WeakMap,dh=new WeakMap;const ul=Symbol("INTERNAL");var fh,ph,gh,Nl;class Ux{constructor(t,{name:e,intent:i,usage:r,rbGroups:o}){_(this,fh,!1);_(this,ph,!1);_(this,gh,!1);_(this,Nl,!0);A(this,fh,!!(t&qn.DISPLAY)),A(this,ph,!!(t&qn.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=o}get visible(){if(a(this,gh))return a(this,Nl);if(!a(this,Nl))return!1;const{print:t,view:e}=this.usage;return a(this,fh)?(e==null?void 0:e.viewState)!=="OFF":a(this,ph)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==ul&&Qt("Internal method `_setVisible` called."),A(this,gh,i),A(this,Nl,e)}}fh=new WeakMap,ph=new WeakMap,gh=new WeakMap,Nl=new WeakMap;var Nr,Gt,Dl,Fl,mh,Ty;class Vx{constructor(t,e=qn.DISPLAY){_(this,mh);_(this,Nr,null);_(this,Gt,new Map);_(this,Dl,null);_(this,Fl,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Fl,t.order);for(const i of t.groups)a(this,Gt).set(i.id,new Ux(e,i));if(t.baseState==="OFF")for(const i of a(this,Gt).values())i._setVisible(ul,!1);for(const i of t.on)a(this,Gt).get(i)._setVisible(ul,!0);for(const i of t.off)a(this,Gt).get(i)._setVisible(ul,!1);A(this,Dl,this.getHash())}}isVisible(t){if(a(this,Gt).size===0)return!0;if(!t)return Np("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,Gt).has(t.id)?a(this,Gt).get(t.id).visible:(Pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,mh,Ty).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,Gt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(a(this,Gt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,Gt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!a(this,Gt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,Gt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(!a(this,Gt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,Gt).has(e))return Pt(`Optional content group not found: ${e}`),!0;if(a(this,Gt).get(e).visible)return!1}return!0}return Pt(`Unknown optional content policy ${t.policy}.`),!0}return Pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var o;const r=a(this,Gt).get(t);if(!r){Pt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==t&&((o=a(this,Gt).get(c))==null||o._setVisible(ul,!1,!0));r._setVisible(ul,!!e,!0),A(this,Nr,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=a(this,Gt).get(r);if(o)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!o.visible,e);break}}A(this,Nr,null)}get hasInitialVisibility(){return a(this,Dl)===null||this.getHash()===a(this,Dl)}getOrder(){return a(this,Gt).size?a(this,Fl)?a(this,Fl).slice():[...a(this,Gt).keys()]:null}getGroups(){return a(this,Gt).size>0?vv(a(this,Gt)):null}getGroup(t){return a(this,Gt).get(t)||null}getHash(){if(a(this,Nr)!==null)return a(this,Nr);const t=new JS;for(const[e,i]of a(this,Gt))t.update(`${e}:${i.visible}`);return A(this,Nr,t.hexdigest())}}Nr=new WeakMap,Gt=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,mh=new WeakSet,Ty=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const o=t[r];let u;if(Array.isArray(o))u=E(this,mh,Ty).call(this,o);else if(a(this,Gt).has(o))u=a(this,Gt).get(o).visible;else return Pt(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class Wx{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Se(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(o==null?void 0:o.length)>0){const f=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});Se(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,o;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Gx(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Xx(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Gx{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Sv(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xx{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function qx(d){let t=!0,e=i("filename\\*","i").exec(d);if(e){e=e[1];let m=c(e);return m=unescape(m),m=f(m),m=p(m),o(m)}if(e=u(d),e){const m=p(e);return o(m)}if(e=i("filename","i").exec(d),e){e=e[1];let m=c(e);return m=p(m),o(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),S=Dp(v);v=w.decode(S),t=!1}catch{}}return v}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const v=[];let w;const S=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=S.exec(m))!==null;){let[,C,k,T]=w;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[k,T]}const x=[];for(let C=0;C<v.length&&C in v;++C){let[k,T]=v[C];T=c(T),k&&(T=unescape(T),C===0&&(T=f(T))),x.push(T)}return x.join("")}function c(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const S=v[w].indexOf('"');S!==-1&&(v[w]=v[w].slice(0,S),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function f(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),x=m.slice(v+1).replace(/^[^']*'/,"");return r(w,x)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,S,x){if(S==="q"||S==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,k){return String.fromCharCode(parseInt(k,16))}),r(w,x);try{x=atob(x)}catch{}return r(w,x)})}return""}function fb(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function $p(d){try{return new URL(d).origin}catch{}return null}function pb({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(d.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*e)||i||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function gb(d){const t=d.get("Content-Disposition");if(t){let e=qx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Sv(e))return e}return null}function zp(d,t){return d===404||d===0&&t.startsWith("file:")?new Ic('Missing PDF "'+t+'".'):new rp(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d)}function mb(d){return d===200||d===206}function yb(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function vb(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(Pt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class aS{constructor(t){vt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=fb(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Yx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Kx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Yx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,yb(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=$p(o.url),!mb(o.status))throw zp(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const u=o.headers,{allowRangeRequests:c,suggestedLength:f}=pb({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=f||this._contentLength,this._filename=gb(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Jr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Kx{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const u=r.url;fetch(u,yb(o,this._withCredentials,this._abortController)).then(c=>{const f=$p(c.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!mb(c.status))throw zp(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:vb(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Km=200,Qm=206;function Qx(d){const t=d.response;return typeof t!="string"?t:Dp(t).buffer}class Zx{constructor({url:t,httpHeaders:e,withCredentials:i}){vt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=fb(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,u]of this.headers)e.setRequestHeader(o,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Qm):r.expectedStatus=Km,e.responseType="arraybuffer",Se(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const o=r.status||Km;if(!(o===Km&&i.expectedStatus===Qm)&&o!==i.expectedStatus){i.onError(r.status);return}const c=Qx(r);if(o===Qm){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?i.onDone({begin:parseInt(p[1],10),chunk:c}):(Pt('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone({begin:0,chunk:c}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Jx{constructor(t){this._source=t,this._manager=new Zx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new tC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new eC(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class tC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=$p(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[f,...p]=c.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:u}=pb({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=gb(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=zp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class eC{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=$p((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=zp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const nC=/^[a-z][a-z0-9\-+.]+:/i;function iC(d){if(nC.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class sC{constructor(t){this.source=t,this.url=iC(t.url),Se(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new rC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new oC(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class rC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Ic(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Jr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oC{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const aC=1e5,xn=30,lC=.8;var hS,Dr,Pn,yh,vh,Go,Ns,wh,Ah,Xo,Ol,$l,Fr,zl,Sh,Hl,qo,bh,_h,Yo,Ko,Eh,Or,Bl,tr,wb,Ab,Py,Qn,Hf,Ry,Sb,bb;const Ce=class Ce{constructor({textContentSource:t,container:e,viewport:i}){_(this,tr);_(this,Dr,Promise.withResolvers());_(this,Pn,null);_(this,yh,!1);_(this,vh,!!((hS=globalThis.FontInspector)!=null&&hS.enabled));_(this,Go,null);_(this,Ns,null);_(this,wh,0);_(this,Ah,0);_(this,Xo,null);_(this,Ol,null);_(this,$l,0);_(this,Fr,0);_(this,zl,Object.create(null));_(this,Sh,[]);_(this,Hl,null);_(this,qo,[]);_(this,bh,new WeakMap);_(this,_h,null);var f;if(t instanceof ReadableStream)A(this,Hl,t);else if(typeof t=="object")A(this,Hl,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Pn,A(this,Ol,e)),A(this,Fr,i.scale*(globalThis.devicePixelRatio||1)),A(this,$l,i.rotation),A(this,Ns,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:u,pageY:c}=i.rawDims;A(this,_h,[1,0,0,-1,-u,c+o]),A(this,Ah,r),A(this,wh,o),E(f=Ce,Qn,Sb).call(f),ka(e,i),a(this,Dr).promise.finally(()=>{a(Ce,Bl).delete(this),A(this,Ns,null),A(this,zl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=mn.platform;return Dt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,Xo).read().then(({value:e,done:i})=>{if(i){a(this,Dr).resolve();return}a(this,Go)??A(this,Go,e.lang),Object.assign(a(this,zl),e.styles),E(this,tr,wb).call(this,e.items),t()},a(this,Dr).reject)};return A(this,Xo,a(this,Hl).getReader()),a(Ce,Bl).add(this),t(),a(this,Dr).promise}update({viewport:t,onBefore:e=null}){var o;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==a(this,$l)&&(e==null||e(),A(this,$l,r),ka(a(this,Ol),{rotation:r})),i!==a(this,Fr)){e==null||e(),A(this,Fr,i);const u={div:null,properties:null,ctx:E(o=Ce,Qn,Hf).call(o,a(this,Go))};for(const c of a(this,qo))u.properties=a(this,bh).get(c),u.div=c,E(this,tr,Py).call(this,u)}}cancel(){var e;const t=new Jr("TextLayer task cancelled.");(e=a(this,Xo))==null||e.cancel(t).catch(()=>{}),A(this,Xo,null),a(this,Dr).reject(t)}get textDivs(){return a(this,qo)}get textContentItemsStr(){return a(this,Sh)}static cleanup(){if(!(a(this,Bl).size>0)){a(this,Yo).clear();for(const{canvas:t}of a(this,Ko).values())t.remove();a(this,Ko).clear()}}};Dr=new WeakMap,Pn=new WeakMap,yh=new WeakMap,vh=new WeakMap,Go=new WeakMap,Ns=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Xo=new WeakMap,Ol=new WeakMap,$l=new WeakMap,Fr=new WeakMap,zl=new WeakMap,Sh=new WeakMap,Hl=new WeakMap,qo=new WeakMap,bh=new WeakMap,_h=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,Eh=new WeakMap,Or=new WeakMap,Bl=new WeakMap,tr=new WeakSet,wb=function(t){var r,o;if(a(this,yh))return;(o=a(this,Ns)).ctx??(o.ctx=E(r=Ce,Qn,Hf).call(r,a(this,Go)));const e=a(this,qo),i=a(this,Sh);for(const u of t){if(e.length>aC){Pt("Ignoring additional textDivs for performance reasons."),A(this,yh,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=a(this,Pn);A(this,Pn,document.createElement("span")),a(this,Pn).classList.add("markedContent"),u.id!==null&&a(this,Pn).setAttribute("id",`${u.id}`),c.append(a(this,Pn))}else u.type==="endMarkedContent"&&A(this,Pn,a(this,Pn).parentNode);continue}i.push(u.str),E(this,tr,Ab).call(this,u)}},Ab=function(t){var C;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,qo).push(e);const r=pt.transform(a(this,_h),t.transform);let o=Math.atan2(r[1],r[0]);const u=a(this,zl)[t.fontName];u.vertical&&(o+=Math.PI/2);let c=a(this,vh)&&u.fontSubstitution||u.fontFamily;c=Ce.fontFamilyMap.get(c)||c;const f=Math.hypot(r[2],r[3]),p=f*E(C=Ce,Qn,bb).call(C,c,a(this,Go));let m,v;o===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(o),v=r[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",S=e.style;a(this,Pn)===a(this,Ol)?(S.left=`${(100*m/a(this,Ah)).toFixed(2)}%`,S.top=`${(100*v/a(this,wh)).toFixed(2)}%`):(S.left=`${w}${m.toFixed(2)}px)`,S.top=`${w}${v.toFixed(2)}px)`),S.fontSize=`${w}${(a(Ce,Or)*f).toFixed(2)}px)`,S.fontFamily=c,i.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,vh)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let x=!1;if(t.str.length>1)x=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(x=!0)}if(x&&(i.canvasWidth=u.vertical?t.height:t.width),a(this,bh).set(e,i),a(this,Ns).div=e,a(this,Ns).properties=i,E(this,tr,Py).call(this,a(this,Ns)),i.hasText&&a(this,Pn).append(e),i.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),a(this,Pn).append(k)}},Py=function(t){var c;const{div:e,properties:i,ctx:r}=t,{style:o}=e;let u="";if(a(Ce,Or)>1&&(u=`scale(${1/a(Ce,Or)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:f}=o,{canvasWidth:p,fontSize:m}=i;E(c=Ce,Qn,Ry).call(c,r,m*a(this,Fr),f);const{width:v}=r.measureText(e.textContent);v>0&&(u=`scaleX(${p*a(this,Fr)/v}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(o.transform=u)},Qn=new WeakSet,Hf=function(t=null){let e=a(this,Ko).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Ko).set(t,e),a(this,Eh).set(e,{size:0,family:""})}return e},Ry=function(t,e,i){const r=a(this,Eh).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},Sb=function(){if(a(this,Or)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Or,t.getBoundingClientRect().height),t.remove()},bb=function(t,e){const i=a(this,Yo).get(t);if(i)return i;const r=E(this,Qn,Hf).call(this,e);r.canvas.width=r.canvas.height=xn,E(this,Qn,Ry).call(this,r,xn,t);const o=r.measureText("");let u=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(u){const m=u/(u+c);return a(this,Yo).set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,xn,xn),r.strokeText("g",0,0);let f=r.getImageData(0,0,xn,xn).data;c=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){c=Math.ceil(m/4/xn);break}r.clearRect(0,0,xn,xn),r.strokeText("A",0,xn),f=r.getImageData(0,0,xn,xn).data,u=0;for(let m=0,v=f.length;m<v;m+=4)if(f[m]>0){u=xn-Math.floor(m/4/xn);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+c):lC;return a(this,Yo).set(t,p),p},_(Ce,Qn),_(Ce,Yo,new Map),_(Ce,Ko,new Map),_(Ce,Eh,new WeakMap),_(Ce,Or,null),_(Ce,Bl,new Set);let Nc=Ce;class Dc{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(o){var f;if(!o)return;let u=null;const c=o.name;if(c==="#text")u=o.value;else if(Dc.shouldBuildText(c))(f=o==null?void 0:o.attributes)!=null&&f.textContent?u=o.attributes.textContent:o.value&&(u=o.value);else return;if(u!==null&&e.push({str:u}),!!o.children)for(const p of o.children)r(p)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const uC=65536,cC=100,hC=5e3,dC=on?Cx:_x,fC=on?kx:ab,pC=on?xx:Ex,gC=on?Tx:hb;function mC(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new My,{docId:e}=t,i=d.url?yC(d.url):null,r=d.data?vC(d.data):null,o=d.httpHeaders||null,u=d.withCredentials===!0,c=d.password??null,f=d.range instanceof _b?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:uC;let m=d.worker instanceof ml?d.worker:null;const v=d.verbosity,w=typeof d.docBaseUrl=="string"&&!Op(d.docBaseUrl)?d.docBaseUrl:null,S=typeof d.cMapUrl=="string"?d.cMapUrl:null,x=d.cMapPacked!==!1,C=d.CMapReaderFactory||fC,k=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,T=d.StandardFontDataFactory||gC,L=d.stopAtErrors!==!0,O=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,D=d.isEvalSupported!==!1,z=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!on,H=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!on&&(mn.platform.isFirefox||!globalThis.chrome),B=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,Y=typeof d.disableFontFace=="boolean"?d.disableFontFace:on,Z=d.fontExtraProperties===!0,st=d.enableXfa===!0,tt=d.ownerDocument||globalThis.document,_t=d.disableRange===!0,Mt=d.disableStream===!0,xt=d.disableAutoFetch===!0,Ut=d.pdfBug===!0,q=d.CanvasFactory||dC,et=d.FilterFactory||pC,X=d.enableHWA===!0,ct=f?f.length:d.length??NaN,J=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!on&&!Y,I=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:C===ab&&T===hb&&S&&k&&pc(S,document.baseURI)&&pc(k,document.baseURI),j=null;ex(v);const dt={canvasFactory:new q({ownerDocument:tt,enableHWA:X}),filterFactory:new et({docId:e,ownerDocument:tt}),cMapReaderFactory:I?null:new C({baseUrl:S,isCompressed:x}),standardFontDataFactory:I?null:new T({baseUrl:k})};if(!m){const St={verbosity:v,port:Ks.workerPort};m=St.port?ml.fromPort(St):new ml(St),t._worker=m}const Ct={docId:e,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:xt,rangeChunkSize:p,length:ct,docBaseUrl:w,enableXfa:st,evaluatorOptions:{maxImageSize:O,disableFontFace:Y,ignoreErrors:L,isEvalSupported:D,isOffscreenCanvasSupported:z,isImageDecoderSupported:H,canvasMaxAreaInBytes:B,fontExtraProperties:Z,useSystemFonts:J,cMapUrl:I?S:null,standardFontDataUrl:I?k:null}},Lt={disableFontFace:Y,fontExtraProperties:Z,ownerDocument:tt,pdfBug:Ut,styleElement:j,loadingParams:{disableAutoFetch:xt,enableXfa:st}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const St=m.messageHandler.sendWithPromise("GetDocRequest",Ct,r?[r.buffer]:null);let yt;if(f)yt=new Wx(f,{disableRange:_t,disableStream:Mt});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Ft;if(on)if(pc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ft=aS}else Ft=sC;else Ft=pc(i)?aS:Jx;yt=new Ft({url:i,length:ct,httpHeaders:o,withCredentials:u,rangeChunkSize:p,disableRange:_t,disableStream:Mt})}return St.then(Ft=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Yt=new vc(e,Ft,m.port),an=new bC(Yt,t,yt,Lt,dt);t._transport=an,Yt.send("Ready",null)})}).catch(t._capability.reject),t}function yC(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(on&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function vC(d){if(on&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Dp(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function lS(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var Sp;const bp=class bp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${cn(bp,Sp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,o}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Sp=new WeakMap,_(bp,Sp,0);let My=bp;class _b{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class wC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $r,Ds,di,cl,Bf;class AC{constructor(t,e,i,r=!1){_(this,di);_(this,$r,null);_(this,Ds,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new qA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Eb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new ad({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=Sr.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var D,z;(D=this._stats)==null||D.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:S,cacheKey:x}=w;A(this,Ds,!1),E(this,di,Bf).call(this),c||(c=this._transport.getOptionalContentConfig(S));let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const k=!!(S&qn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(w));const T=H=>{var B;C.renderTasks.delete(L),(this._maybeCleanupAfterRender||k)&&A(this,Ds,!0),E(this,di,cl).call(this,!k),H?(L.capability.reject(H),this._abortOperatorList({intentState:C,reason:H instanceof Error?H:new Error(H)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new Iy({callback:T,params:{canvasContext:t,viewport:e,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(L);const O=L.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([H,B])=>{var Y;if(this.destroyed){T();return}if((Y=this._stats)==null||Y.time("Rendering"),!(B.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:H,optionalContentConfig:B}),L.operatorListChanged()}).catch(T),O}getOperatorList({intent:t="display",annotationMode:e=Sr.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,i,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Dc.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function o(){u.read().then(function({value:f,done:p}){if(p){i(c);return}c.lang??(c.lang=f.lang),Object.assign(c.styles,f.styles),c.items.push(...f.items),o()},r)}const u=e.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),A(this,Ds,!1),E(this,di,Bf).call(this),Promise.all(t)}cleanup(t=!1){A(this,Ds,!0);const e=E(this,di,cl).call(this,!1);return t&&e&&this._stats&&(this._stats=new qA),e}_startRenderPage(t,e){var r,o;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,di,cl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:o,transfer:u}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();E(this,di,cl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Av){let r=cC;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Jr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}$r=new WeakMap,Ds=new WeakMap,di=new WeakSet,cl=function(t=!1){if(E(this,di,Bf).call(this),!a(this,Ds)||this.destroyed)return!1;if(t)return A(this,$r,setTimeout(()=>{A(this,$r,null),E(this,di,cl).call(this,!1)},hC)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Ds,!1),!0},Bf=function(){a(this,$r)&&(clearTimeout(a(this,$r)),A(this,$r,null))};var Fs,_p;class SC{constructor(){_(this,Fs,new Map);_(this,_p,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};a(this,_p).then(()=>{for(const[r]of a(this,Fs))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){Pt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>o.removeEventListener("abort",u),o.addEventListener("abort",u)}a(this,Fs).set(e,r)}removeEventListener(t,e){const i=a(this,Fs).get(e);i==null||i(),a(this,Fs).delete(e)}terminate(){for(const[,t]of a(this,Fs))t==null||t();a(this,Fs).clear()}}Fs=new WeakMap,_p=new WeakMap;var Ep,Qo,Zo,jl,jf,Ul,Uf;const se=class se{constructor({name:t=null,port:e=null,verbosity:i=nx()}={}){_(this,jl);var r;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=a(se,Zo))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(a(se,Zo)||A(se,Zo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new vc("main","worker",t),this._messageHandler.on("ready",function(){}),E(this,jl,jf).call(this)}_initialize(){if(a(se,Qo)||a(se,Ul,Uf)){this._setupFakeWorker();return}let{workerSrc:t}=se;try{se._isSameOrigin(window.location.href,t)||(t=se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new vc("main","worker",e),r=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",c=>{if(o.abort(),this.destroyed||!c){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,E(this,jl,jf).call(this)}),i.on("ready",c=>{if(o.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};u();return}catch{Np("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(se,Qo)||(Pt("Setting up fake worker."),A(se,Qo,!0)),se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new SC;this._port=e;const i=`fake${cn(se,Ep)._++}`,r=new vc(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new vc(i,i+"_worker",e),E(this,jl,jf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=a(se,Zo))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=a(this,Zo))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new se(t)}static get workerSrc(){if(Ks.workerSrc)return Ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Dt(this,"_setupFakeWorkerGlobal",(async()=>a(this,Ul,Uf)?a(this,Ul,Uf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ep=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,jl=new WeakSet,jf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ul=new WeakSet,Uf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(se,Ul),_(se,Ep,0),_(se,Qo,!1),_(se,Zo),on&&(A(se,Qo,!0),Ks.workerSrc||(Ks.workerSrc="./pdf.worker.mjs")),se._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let ml=se;var Os,ns,Vl,Wl,$s,Jo,_c;class bC{constructor(t,e,i,r,o){_(this,Jo);_(this,Os,new Map);_(this,ns,new Map);_(this,Vl,new Map);_(this,Wl,new Map);_(this,$s,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Eb,this.fontLoader=new Sx({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Dt(this,"annotationStorage",new Ev)}getRenderingIntent(t,e=Sr.ENABLE,i=null,r=!1,o=!1){let u=qn.DISPLAY,c=Ay;switch(t){case"any":u=qn.ANY;break;case"display":break;case"print":u=qn.PRINT;break;default:Pt(`getRenderingIntent - invalid intent: ${t}`)}const f=u&qn.PRINT&&i instanceof eb?i:this.annotationStorage;switch(e){case Sr.DISABLE:u+=qn.ANNOTATIONS_DISABLE;break;case Sr.ENABLE:break;case Sr.ENABLE_FORMS:u+=qn.ANNOTATIONS_FORMS;break;case Sr.ENABLE_STORAGE:u+=qn.ANNOTATIONS_STORAGE,c=f.serializable;break;default:Pt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=qn.IS_EDITING),o&&(u+=qn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,v=[u,c.hash,m];return{renderingIntent:u,cacheKey:v.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,$s))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of a(this,ns).values())t.push(r._destroy());a(this,ns).clear(),a(this,Vl).clear(),a(this,Wl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,o;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Os).clear(),this.filterFactory.destroy(),Nc.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Jr("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{Se(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:u}){if(u){r.close();return}Se(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:u}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:u}}),t.on("GetRangeReader",(i,r)=>{Se(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:u,done:c}){if(c){r.close();return}Se(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{o.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new wC(i,this))}),t.on("DocException",i=>{e._capability.reject(Cn(i))}),t.on("PasswordRequest",i=>{A(this,$s,Promise.withResolvers());try{if(!e.onPassword)throw Cn(i);const r=o=>{o instanceof Error?a(this,$s).reject(o):a(this,$s).resolve({password:o})};e.onPassword(r,i.code)}catch(r){a(this,$s).reject(r)}return a(this,$s).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,ns).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,o])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in o){const S=o.error;Pt(`Error during font loading: ${S}`),this.commonObjs.resolve(i,S);break}const m=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(S,x)=>globalThis.FontInspector.fontAdded(S,x):null,v=new bx(o,{disableFontFace:c,fontExtraProperties:f,inspectFont:m});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=o;Se(w,"The imageRef must be defined.");for(const S of a(this,ns).values())for(const[,x]of S.objs)if((x==null?void 0:x.ref)===w)return x.dataLen?(this.commonObjs.resolve(i,structuredClone(x)),x.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,o,u])=>{var f;if(this.destroyed)return;const c=a(this,ns).get(r);if(!c.objs.has(i)){if(c._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(o){case"Image":c.objs.resolve(i,u),(u==null?void 0:u.dataLen)>QE&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=a(this,Vl).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&a(this,Wl).set(o.refStr,t);const u=new AC(e,o,this,this._params.pdfBug);return a(this,ns).set(e,u),u});return a(this,Vl).set(e,r),r}getPageIndex(t){return lS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,Jo,_c).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Jo,_c).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Jo,_c).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,Jo,_c).call(this,"GetOptionalContentConfig").then(e=>new Vx(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Os).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var o,u;return{info:r[0],metadata:r[1]?new jx(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return a(this,Os).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,ns).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Os).clear(),this.filterFactory.destroy(!0),Nc.cleanup()}}cachedPageNumber(t){if(!lS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Wl).get(e)??null}}Os=new WeakMap,ns=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,$s=new WeakMap,Jo=new WeakSet,_c=function(t,e=null){const i=a(this,Os).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return a(this,Os).set(t,r),r};const dc=Symbol("INITIAL_DATA");var zn,xh,Ly;class Eb{constructor(){_(this,xh);_(this,zn,Object.create(null))}get(t,e=null){if(e){const r=E(this,xh,Ly).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=a(this,zn)[t];if(!i||i.data===dc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=a(this,zn)[t];return!!e&&e.data!==dc}delete(t){const e=a(this,zn)[t];return!e||e.data===dc?!1:(delete a(this,zn)[t],!0)}resolve(t,e=null){const i=E(this,xh,Ly).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in a(this,zn)){const{data:i}=a(this,zn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}A(this,zn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,zn)){const{data:e}=a(this,zn)[t];e!==dc&&(yield[t,e])}}}zn=new WeakMap,xh=new WeakSet,Ly=function(t){var e;return(e=a(this,zn))[t]||(e[t]={...Promise.withResolvers(),data:dc})};var zr;class _C{constructor(t){_(this,zr,null);A(this,zr,t),this.onContinue=null}get promise(){return a(this,zr).capability.promise}cancel(t=0){a(this,zr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,zr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,zr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}zr=new WeakMap;var Hr,ta;const So=class So{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:u,pageIndex:c,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){_(this,Hr,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new _C(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,f;if(this.cancelled)return;if(this._canvas){if(a(So,ta).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(So,ta).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:u}=this.params;this.gfx=new gl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,Hr)&&(window.cancelAnimationFrame(a(this,Hr)),A(this,Hr,null)),a(So,ta).delete(this._canvas),this.callback(t||new Av(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Hr,window.requestAnimationFrame(()=>{A(this,Hr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(So,ta).delete(this._canvas),this.callback())))}};Hr=new WeakMap,ta=new WeakMap,_(So,ta,new WeakSet);let Iy=So;const EC="4.10.38",xC="f9bea397f";function uS(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function fc(d){return Math.max(0,Math.min(255,255*d))}class cS{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=fc(t),[t,t,t]}static G_HTML([t]){const e=uS(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(fc)}static RGB_HTML(t){return`#${t.map(uS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[fc(1-Math.min(1,t+r)),fc(1-Math.min(1,i+r)),fc(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,o=1-e,u=1-i,c=Math.min(r,o,u);return["CMYK",r,o,u,c]}}class CC{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class Cv extends CC{_createSVG(t){return document.createElementNS(As,t)}}class xb{static setupStorage(t,e,i,r,o){const u=r.getValue(e,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?t.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),o==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of i.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const f=c.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:o}){const{attributes:u}=e,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}c&&o.addLinkAttributes(t,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(t,u.dataId,e,i)}static render(t){var v,w;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,o=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:o,linkService:i});const c=o!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}c&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);u.append(S),c&&Dc.shouldBuildText(r.name)&&p.push(S)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[S,x,C]=m.at(-1);if(x+1===S.children.length){m.pop();continue}const k=S.children[++m.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const O=document.createTextNode(k.value);p.push(O),C.append(O);continue}const L=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(C.append(L),k.attributes&&this.setAttributes({html:L,element:k,storage:e,intent:o,linkService:i}),((w=k.children)==null?void 0:w.length)>0)m.push([k,-1,L]);else if(k.value){const O=document.createTextNode(k.value);c&&Dc.shouldBuildText(T)&&p.push(O),L.append(O)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ud=1e3,kC=9,Pa=new WeakSet;function Zr(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class TC{static create(t){switch(t.data.annotationType){case xe.LINK:return new Cb(t);case xe.TEXT:return new PC(t);case xe.WIDGET:switch(t.data.fieldType){case"Tx":return new RC(t);case"Btn":return t.data.radioButton?new Pb(t):t.data.checkBox?new LC(t):new IC(t);case"Ch":return new NC(t);case"Sig":return new MC(t)}return new Ma(t);case xe.POPUP:return new Dy(t);case xe.FREETEXT:return new Nb(t);case xe.LINE:return new FC(t);case xe.SQUARE:return new OC(t);case xe.CIRCLE:return new $C(t);case xe.POLYLINE:return new Db(t);case xe.CARET:return new HC(t);case xe.INK:return new kv(t);case xe.POLYGON:return new zC(t);case xe.HIGHLIGHT:return new Fb(t);case xe.UNDERLINE:return new BC(t);case xe.SQUIGGLY:return new jC(t);case xe.STRIKEOUT:return new UC(t);case xe.STAMP:return new Ob(t);case xe.FILEATTACHMENT:return new VC(t);default:return new ve(t)}}}var ea,Gl,Xl,Ch,Ny;const Mv=class Mv{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){_(this,Ch);_(this,ea,null);_(this,Gl,!1);_(this,Xl,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Mv._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;a(this,ea)||A(this,ea,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&E(this,Ch,Ny).call(this,e),(i=a(this,Xl))==null||i.popup.updateEdited(t)}resetEdited(){var t;a(this,ea)&&(E(this,Ch,Ny).call(this,a(this,ea).rect),(t=a(this,Xl))==null||t.popup.resetEdited(),A(this,ea,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof Ma||(o.tabIndex=ud);const{style:u}=o;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Dy){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,o),o}const{width:c,height:f}=Zr(e.rect);if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(C>0||k>0){const L=`calc(${C}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;u.borderRadius=L}else if(this instanceof Pb){const L=`calc(${c}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;u.borderRadius=L}switch(e.borderStyle.style){case cc.SOLID:u.borderStyle="solid";break;case cc.DASHED:u.borderStyle="dashed";break;case cc.BEVELED:Pt("Unimplemented border style: beveled");break;case cc.INSET:Pt("Unimplemented border style: inset");break;case cc.UNDERLINE:u.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(A(this,Gl,!0),u.borderColor=pt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):u.borderWidth=0}const p=pt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:S}=r.rawDims;u.left=`${100*(p[0]-w)/m}%`,u.top=`${100*(p[1]-S)/v}%`;const{rotation:x}=e;return e.hasOwnCanvas||x===0?(u.width=`${100*c/m}%`,u.height=`${100*f/v}%`):this.setRotation(x,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:u}=Zr(this.data.rect);let c,f;t%180===0?(c=100*o/i,f=100*u/r):(c=100*u/i,f=100*o/r),e.style.width=`${c}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const o=r.detail[e],u=o[0],c=o.slice(1);r.target.style[i]=cS[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:cS[`${u}_rgb`](c)})};return Dt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const o=t[r]||i[r];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,o]of Object.entries(e)){const u=i[r];if(u){const c={detail:{[r]:o},target:t};u(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,o]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,k,T,L]=t.subarray(2,6);if(r===C&&o===k&&e===T&&i===L)return}const{style:u}=this.container;let c;if(a(this,Gl)){const{borderColor:C,borderWidth:k}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const f=r-e,p=o-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const S=m.createElement("clipPath"),x=`clippath_${this.data.id}`;S.setAttribute("id",x),S.setAttribute("clipPathUnits","objectBoundingBox"),w.append(S);for(let C=2,k=t.length;C<k;C+=8){const T=t[C],L=t[C+1],O=t[C+2],D=t[C+3],z=m.createElement("rect"),H=(O-e)/f,B=(o-L)/p,Y=(T-O)/f,Z=(L-D)/p;z.setAttribute("x",H),z.setAttribute("y",B),z.setAttribute("width",Y),z.setAttribute("height",Z),S.append(z),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${B}" width="${Y}" height="${Z}"/>`)}a(this,Gl)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(v),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:t}=this,e=A(this,Xl,new Dy({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:o,id:u,exportValues:c}of r){if(o===-1||u===e)continue;const f=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Pa.has(p)){Pt(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:f,domElement:p})}return i}for(const r of document.getElementsByName(t)){const{exportValue:o}=r,u=r.getAttribute("data-element-id");u!==e&&Pa.has(r)&&i.push({id:u,exportValue:o,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};ea=new WeakMap,Gl=new WeakMap,Xl=new WeakMap,Ch=new WeakSet,Ny=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}}}=this;i==null||i.splice(0,4,...t);const{width:p,height:m}=Zr(t);e.left=`${100*(t[0]-c)/o}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*p/o}%`,e.height=`${100*m/u}%`):this.setRotation(r)};let ve=Mv;var Yn,yo,kb,Tb;class Cb extends ve{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});_(this,Yn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let o=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(r,e.action),o=!0):e.attachment?(E(this,Yn,kb).call(this,r,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(E(this,Yn,Tb).call(this,r,e.setOCGState),o=!0):e.dest?(this._bindLink(r,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),o=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Yn,yo).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Yn,yo).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const u=r.get(o);u&&(e[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),E(this,Yn,yo).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,Yn,yo).call(this),!this._fieldObjects){Pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var v;r==null||r();const{fields:o,refs:u,include:c}=i,f=[];if(o.length!==0||u.length!==0){const w=new Set(u);for(const S of o){const x=this._fieldObjects[S]||[];for(const{id:C}of x)w.add(C)}for(const S of Object.values(this._fieldObjects))for(const x of S)w.has(x.id)===c&&f.push(x)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,m=[];for(const w of f){const{id:S}=w;switch(m.push(S),w.type){case"text":{const C=w.defaultValue||"";p.setValue(S,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(S,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(S,{value:C});break}default:continue}const x=document.querySelector(`[data-element-id="${S}"]`);if(x){if(!Pa.has(x)){Pt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Yn=new WeakSet,yo=function(){this.container.setAttribute("data-internal-link","")},kb=function(e,i,r=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},E(this,Yn,yo).call(this)},Tb=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Yn,yo).call(this)};class PC extends ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ma extends ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return mn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,o){i.includes("mouse")?t.addEventListener(i,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(i,u=>{var c;if(i==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(u)}}))})}_setEventListeners(t,e,i,r){var o,u,c;for(const[f,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||kC,o=t.style;let u;const c=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(p/(Wm*r))||1,v=p/m;u=Math.min(r,f(v/Wm))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,f(p/Wm))}o.fontSize=`calc(${u}px * var(--scale-factor))`,o.color=pt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class RC extends Ma{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const o=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=i),o.setValue(u.id,{[r]:i})}render(){var r,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let c=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&c.length>f&&(c=c.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Pa.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=ud,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";i.value=m.userValue=S,m.formattedValue=null});let v=w=>{const{formattedValue:S}=m;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{var C;if(m.focused)return;const{target:x}=S;m.userValue&&(x.value=m.userValue),m.lastCommittedValue=x.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(C){m.userValue=C.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:k}=C.detail;m.formattedValue=k,k!=null&&C.target!==document.activeElement&&(C.target.value=k),t.setValue(e,{formattedValue:k})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var O;const{charLimit:k}=C.detail,{target:T}=C;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let L=m.userValue;!L||L.length<=k||(L=L.slice(0,k),T.value=m.userValue=L,t.setValue(e,{value:L}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),i.addEventListener("keydown",S=>{var k;m.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(m.commitKey=3),x===-1)return;const{value:C}=S.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",S=>{var C,k;if(!m.focused||!S.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:x}=S.target;m.userValue=x,m.lastCommittedValue!==x&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:m.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),w(S)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",S=>{var z;m.lastCommittedValue=null;const{data:x,target:C}=S,{value:k,selectionStart:T,selectionEnd:L}=C;let O=T,D=L;switch(S.inputType){case"deleteWordBackward":{const H=k.substring(0,T).match(/\w*[^\w]*$/);H&&(O-=H[0].length);break}case"deleteWordForward":{const H=k.substring(T).match(/^[^\w]*\w*/);H&&(D+=H[0].length);break}case"deleteContentBackward":T===L&&(O-=1);break;case"deleteContentForward":T===L&&(D+=1);break}S.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:x||"",willCommit:!1,selStart:O,selEnd:D}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class MC extends Ma{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class LC extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Pa.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=ud,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue||"Off";u.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",u=>{const c={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Pb extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,i))t.setValue(u.id,{value:!1});const o=document.createElement("input");if(Pa.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=ud,o.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:f})}),o.addEventListener("resetform",u=>{const c=e.defaultFieldValue;u.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;o.addEventListener("updatefromsandbox",c=>{const f={value:p=>{const m=u===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),t.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(f,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class IC extends Cb{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class NC extends Ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Pa.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=ud;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let u=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=m=>{const v=m?"value":"textContent",{options:w,multiple:S}=r;return S?Array.prototype.filter.call(w,x=>x.selected).map(x=>x[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let f=c(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){u==null||u();const S=w.detail.value,x=new Set(Array.isArray(S)?S:[S]);for(const C of r.options)C.selected=x.has(C.value);t.setValue(e,{value:c(!0)}),f=c(!1)},multipleSelection(w){r.multiple=!0},remove(w){const S=r.options,x=w.detail.remove;S[x].selected=!1,r.remove(x),S.length>0&&Array.prototype.findIndex.call(S,k=>k.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},clear(w){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=c(!1)},insert(w){const{index:S,displayValue:x,exportValue:C}=w.detail.insert,k=r.children[S],T=document.createElement("option");T.textContent=x,T.value=C,k?k.before(T):r.append(T),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},items(w){const{items:S}=w.detail;for(;r.length!==0;)r.remove(0);for(const x of S){const{displayValue:C,exportValue:k}=x,T=document.createElement("option");T.textContent=C,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},indices(w){const S=new Set(w.detail.indices);for(const x of w.target.options)x.selected=S.has(x.index);t.setValue(e,{value:c(!0)}),f=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var S;const v=c(!0),w=c(!1);t.setValue(e,{value:v}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Dy extends ve{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ve._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new DC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${wv}${i}`).join(",")),this.container}}var ql,xp,Cp,Yl,na,fe,zs,Kl,kh,Th,Ql,Hs,Ti,Bs,Ph,js,Rh,ia,sa,qt,Vf,Fy,Rb,Mb,Lb,Ib,Wf,Gf,Oy;class DC{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:o,contentsObj:u,richText:c,parent:f,rect:p,parentRect:m,open:v}){_(this,qt);_(this,ql,E(this,qt,Lb).bind(this));_(this,xp,E(this,qt,Oy).bind(this));_(this,Cp,E(this,qt,Gf).bind(this));_(this,Yl,E(this,qt,Wf).bind(this));_(this,na,null);_(this,fe,null);_(this,zs,null);_(this,Kl,null);_(this,kh,null);_(this,Th,null);_(this,Ql,null);_(this,Hs,!1);_(this,Ti,null);_(this,Bs,null);_(this,Ph,null);_(this,js,null);_(this,Rh,null);_(this,ia,null);_(this,sa,!1);var w;A(this,fe,t),A(this,Rh,r),A(this,zs,u),A(this,js,c),A(this,Th,f),A(this,na,e),A(this,Ph,p),A(this,Ql,m),A(this,kh,i),A(this,Kl,bv.toDateObject(o)),this.trigger=i.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",a(this,Yl)),S.addEventListener("mouseenter",a(this,Cp)),S.addEventListener("mouseleave",a(this,xp)),S.classList.add("popupTriggerArea");for(const S of i)(w=S.container)==null||w.addEventListener("keydown",a(this,ql));a(this,fe).hidden=!0,v&&E(this,qt,Wf).call(this)}render(){if(a(this,Ti))return;const t=A(this,Ti,document.createElement("div"));if(t.className="popup",a(this,na)){const o=t.style.outlineColor=pt.makeHexColor(...a(this,na));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:t.style.backgroundColor=pt.makeHexColor(...a(this,na).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=a(this,Rh),t.append(e),a(this,Kl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Kl).valueOf()})),e.append(o)}const r=a(this,qt,Vf);if(r)xb.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(a(this,zs));t.append(o)}a(this,fe).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let o=0,u=r.length;o<u;++o){const c=r[o];i.append(document.createTextNode(c)),o<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;a(this,ia)||A(this,ia,{contentsObj:a(this,zs),richText:a(this,js)}),t&&A(this,Bs,null),e&&(A(this,js,E(this,qt,Mb).call(this,e)),A(this,zs,null)),(i=a(this,Ti))==null||i.remove(),A(this,Ti,null)}resetEdited(){var t;a(this,ia)&&({contentsObj:cn(this,zs)._,richText:cn(this,js)._}=a(this,ia),A(this,ia,null),(t=a(this,Ti))==null||t.remove(),A(this,Ti,null),A(this,Bs,null))}forceHide(){A(this,sa,this.isVisible),a(this,sa)&&(a(this,fe).hidden=!0)}maybeShow(){a(this,sa)&&(a(this,Ti)||E(this,qt,Gf).call(this),A(this,sa,!1),a(this,fe).hidden=!1)}get isVisible(){return a(this,fe).hidden===!1}}ql=new WeakMap,xp=new WeakMap,Cp=new WeakMap,Yl=new WeakMap,na=new WeakMap,fe=new WeakMap,zs=new WeakMap,Kl=new WeakMap,kh=new WeakMap,Th=new WeakMap,Ql=new WeakMap,Hs=new WeakMap,Ti=new WeakMap,Bs=new WeakMap,Ph=new WeakMap,js=new WeakMap,Rh=new WeakMap,ia=new WeakMap,sa=new WeakMap,qt=new WeakSet,Vf=function(){const t=a(this,js),e=a(this,zs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,js).html||null},Fy=function(){var t,e,i;return((i=(e=(t=a(this,qt,Vf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Rb=function(){var t,e,i;return((i=(e=(t=a(this,qt,Vf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Mb=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:a(this,qt,Rb),fontSize:a(this,qt,Fy)?`calc(${a(this,qt,Fy)}px * var(--scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:r});return i},Lb=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Hs))&&E(this,qt,Wf).call(this)},Ib=function(){if(a(this,Bs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:o}}}=a(this,Th);let u=!!a(this,Ql),c=u?a(this,Ql):a(this,Ph);for(const x of a(this,kh))if(!c||pt.intersect(x.data.rect,c)!==null){c=x.data.rect,u=!0;break}const f=pt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),m=u?c[2]-c[0]+5:0,v=f[0]+m,w=f[1];A(this,Bs,[100*(v-r)/e,100*(w-o)/i]);const{style:S}=a(this,fe);S.left=`${a(this,Bs)[0]}%`,S.top=`${a(this,Bs)[1]}%`},Wf=function(){A(this,Hs,!a(this,Hs)),a(this,Hs)?(E(this,qt,Gf).call(this),a(this,fe).addEventListener("click",a(this,Yl)),a(this,fe).addEventListener("keydown",a(this,ql))):(E(this,qt,Oy).call(this),a(this,fe).removeEventListener("click",a(this,Yl)),a(this,fe).removeEventListener("keydown",a(this,ql)))},Gf=function(){a(this,Ti)||this.render(),this.isVisible?a(this,Hs)&&a(this,fe).classList.add("focused"):(E(this,qt,Ib).call(this),a(this,fe).hidden=!1,a(this,fe).style.zIndex=parseInt(a(this,fe).style.zIndex)+1e3)},Oy=function(){a(this,fe).classList.remove("focused"),!(a(this,Hs)||!this.isVisible)&&(a(this,fe).hidden=!0,a(this,fe).style.zIndex=parseInt(a(this,fe).style.zIndex)-1e3)};class Nb extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Mh;class FC extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Mh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=A(this,Mh,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Mh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mh=new WeakMap;var Lh;class OC extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Lh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Lh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",i-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lh=new WeakMap;var Ih;class $C extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ih,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:r}=Zr(e.rect),o=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Ih,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",r/2),c.setAttribute("rx",i/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Nh;class Db extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Nh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:u,height:c}=Zr(e),f=this.svgFactory.create(u,c,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const S=i[v]-e[0],x=e[3]-i[v+1];p.push(`${S},${x}`)}p=p.join(" ");const m=A(this,Nh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;class zC extends Db{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class HC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dh,ra,Fh,$y;class kv extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Fh);_(this,Dh,null);_(this,ra,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tt.HIGHLIGHT:Tt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:o,popupRef:u}}=this,{transform:c,width:f,height:p}=E(this,Fh,$y).call(this,i,e),m=this.svgFactory.create(f,p,!0),v=A(this,Dh,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",o.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",c);for(let w=0,S=r.length;w<S;w++){const x=this.svgFactory.createElement(this.svgElementName);a(this,ra).push(x),x.setAttribute("points",r[w].join(",")),v.append(x)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:o}=e,u=a(this,Dh);if(i>=0&&u.setAttribute("stroke-width",i||1),r)for(let c=0,f=a(this,ra).length;c<f;c++)a(this,ra)[c].setAttribute("points",r[c].join(","));if(o){const{transform:c,width:f,height:p}=E(this,Fh,$y).call(this,this.data.rotation,o);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",c)}}getElementsToTriggerPopup(){return a(this,ra)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dh=new WeakMap,ra=new WeakMap,Fh=new WeakSet,$y=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class Fb extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class BC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class jC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class UC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Ob extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Oh,$h,zy;class VC extends ve{constructor(e){var r;super(e,{isRenderable:!0});_(this,$h);_(this,Oh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,$h,zy).bind(this)),A(this,Oh,r);const{isMac:o}=mn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(o?u.metaKey:u.ctrlKey)&&E(this,$h,zy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return a(this,Oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oh=new WeakMap,$h=new WeakSet,zy=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var zh,oa,aa,Hh,Ra,$b,Hy;class WC{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:u,structTreeLayer:c}){_(this,Ra);_(this,zh,null);_(this,oa,null);_(this,aa,new Map);_(this,Hh,null);this.div=t,A(this,zh,e),A(this,oa,i),A(this,Hh,c||null),this.page=o,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return a(this,aa).size>0}async render(t){var u;const{annotations:e}=t,i=this.div;ka(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Cv,annotationStorage:t.annotationStorage||new Ev,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const f=c.annotationType===xe.POPUP;if(f){const v=r.get(c.id);if(!v)continue;o.elements=v}else{const{width:v,height:w}=Zr(c.rect);if(v<=0||w<=0)continue}o.data=c;const p=TC.create(o);if(!p.isRenderable)continue;if(!f&&c.popupRef){const v=r.get(c.popupRef);v?v.push(p):r.set(c.popupRef,[p])}const m=p.render();c.hidden&&(m.style.visibility="hidden"),await E(this,Ra,$b).call(this,m,c.id),p._isEditable&&(a(this,aa).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}E(this,Ra,Hy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,ka(e,{rotation:t.rotation}),E(this,Ra,Hy).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,aa).values())}getEditableAnnotation(t){return a(this,aa).get(t)}}zh=new WeakMap,oa=new WeakMap,aa=new WeakMap,Hh=new WeakMap,Ra=new WeakSet,$b=async function(t,e){var u,c;const i=t.firstChild||t,r=i.id=`${wv}${e}`,o=await((u=a(this,Hh))==null?void 0:u.getAriaAttributes(r));if(o)for(const[f,p]of o)i.setAttribute(f,p);this.div.append(t),(c=a(this,zh))==null||c.moveElementInDOM(this.div,t,i,!1)},Hy=function(){if(!a(this,oa))return;const t=this.div;for(const[e,i]of a(this,oa)){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}a(this,oa).clear()};const kf=/\r\n?|\n/g;var Pi,Hn,Bh,la,Bn,be,zb,Hb,Bb,Xf,Zs,qf,Yf,jb,jy,Ub;const Jt=class Jt extends he{constructor(e){super({...e,name:"freeTextEditor"});_(this,be);_(this,Pi);_(this,Hn,"");_(this,Bh,`${this.id}-editor`);_(this,la,null);_(this,Bn);A(this,Pi,e.color||Jt._defaultColor||he._defaultLineColor),A(this,Bn,e.fontSize||Jt._defaultFontSize)}static get _keyboardManager(){const e=Jt.prototype,i=u=>u.isEmpty(),r=Ta.TRANSLATE_SMALL,o=Ta.TRANSLATE_BIG;return Dt(this,"_keyboardManager",new ld([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(e,i){he.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case Ot.FREETEXT_SIZE:Jt._defaultFontSize=i;break;case Ot.FREETEXT_COLOR:Jt._defaultColor=i;break}}updateParams(e,i){switch(e){case Ot.FREETEXT_SIZE:E(this,be,zb).call(this,i);break;case Ot.FREETEXT_COLOR:E(this,be,Hb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ot.FREETEXT_SIZE,Jt._defaultFontSize],[Ot.FREETEXT_COLOR,Jt._defaultColor||he._defaultLineColor]]}get propertiesToUpdate(){return[[Ot.FREETEXT_SIZE,a(this,Bn)],[Ot.FREETEXT_COLOR,a(this,Pi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Jt._internalPadding*e,-(Jt._internalPadding+a(this,Bn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Tt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,la,new AbortController);const e=this._uiManager.combinedSignal(a(this,la));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Bh)),this._isDraggable=!0,(e=a(this,la))==null||e.abort(),A(this,la,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Hn),i=A(this,Hn,E(this,be,Bb).call(this).trimEnd());if(e===i)return;const r=o=>{if(A(this,Hn,o),!o){this.remove();return}E(this,be,Yf).call(this),this._uiManager.rebuild(this),E(this,be,Xf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),E(this,be,Xf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Bh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${a(this,Bn)}px * var(--scale-factor))`,r.color=a(this,Pi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),op(this,this.div,["dblclick","keydown"]),this.width){const[o,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,v]=this.pageDimensions,[w,S]=this.pageTranslation;let x,C;switch(this.rotation){case 0:x=e+(c[0]-w)/m,C=i+this.height-(c[1]-S)/v;break;case 90:x=e+(c[0]-w)/m,C=i-(c[1]-S)/v,[f,p]=[p,-f];break;case 180:x=e-this.width+(c[0]-w)/m,C=i-(c[1]-S)/v,[f,p]=[-f,-p];break;case 270:x=e+(c[0]-w-this.height*v)/m,C=i+(c[1]-S-this.width*m)/v,[f,p]=[-p,f];break}this.setAt(x*o,C*u,f,p)}else this.setAt(e*o,i*u,this.width*o,this.height*u);E(this,be,Yf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var x,C,k;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const o=E(x=Jt,Zs,jy).call(x,i.getData("text")||"").replaceAll(kf,`
`);if(!o)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!o.includes(`
`)){c.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=c,m=[],v=[];if(f.nodeType===Node.TEXT_NODE){const T=f.parentElement;if(v.push(f.nodeValue.slice(p).replaceAll(kf,"")),T!==this.editorDiv){let L=m;for(const O of this.editorDiv.childNodes){if(O===T){L=v;continue}L.push(E(C=Jt,Zs,qf).call(C,O))}}m.push(f.nodeValue.slice(0,p).replaceAll(kf,""))}else if(f===this.editorDiv){let T=m,L=0;for(const O of this.editorDiv.childNodes)L++===p&&(T=v),T.push(E(k=Jt,Zs,qf).call(k,O))}A(this,Hn,`${m.join(`
`)}${o}${v.join(`
`)}`),E(this,be,Yf).call(this);const w=new Range;let S=m.reduce((T,L)=>T+L.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const L=T.nodeValue.length;if(S<=L){w.setStart(T,S),w.setEnd(T,S);break}S-=L}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,r){var c;let o=null;if(e instanceof Nb){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:v,id:w,popupRef:S},textContent:x,textPosition:C,parent:{page:{pageNumber:k}}}=e;if(!x||x.length===0)return null;o=e={annotationType:Tt.FREETEXT,color:Array.from(p),fontSize:f,value:x.join(`
`),position:C,pageIndex:k-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:S}}const u=await super.deserialize(e,i,r);return A(u,Bn,e.fontSize),A(u,Pi,pt.makeHexColor(...e.color)),A(u,Hn,E(c=Jt,Zs,jy).call(c,e.value)),u.annotationElementId=e.id||null,u._initialData=o,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Jt._internalPadding*this.parentScale,r=this.getRect(i,i),o=he._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,Pi)),u={annotationType:Tt.FREETEXT,color:o,fontSize:a(this,Bn),value:E(this,be,jb).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!E(this,be,Ub).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${a(this,Bn)}px * var(--scale-factor))`,r.color=a(this,Pi),i.replaceChildren();for(const u of a(this,Hn).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),i.append(c)}const o=Jt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:a(this,Hn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Pi=new WeakMap,Hn=new WeakMap,Bh=new WeakMap,la=new WeakMap,Bn=new WeakMap,be=new WeakSet,zb=function(e){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-a(this,Bn))*this.parentScale),A(this,Bn,o),E(this,be,Xf).call(this)},r=a(this,Bn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Hb=function(e){const i=o=>{A(this,Pi,this.editorDiv.style.color=o)},r=a(this,Pi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Bb=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(E(r=Jt,Zs,qf).call(r,o)),i=o);return e.join(`
`)},Xf=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:u}=this,c=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",o.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},Zs=new WeakSet,qf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(kf,"")},Yf=function(){if(this.editorDiv.replaceChildren(),!!a(this,Hn))for(const e of a(this,Hn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},jb=function(){return a(this,Hn).replaceAll(" "," ")},jy=function(e){return e.replaceAll(" "," ")},Ub=function(e){const{value:i,fontSize:r,color:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((c,f)=>c!==o[f])||e.pageIndex!==u},_(Jt,Zs),vt(Jt,"_freeTextDefaultContent",""),vt(Jt,"_internalPadding",0),vt(Jt,"_defaultColor",null),vt(Jt,"_defaultFontSize",10),vt(Jt,"_type","freetext"),vt(Jt,"_editorType",Tt.FREETEXT);let By=Jt;class ot{toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c]*r,u[c+1]=i+t[c+1]*o;return u}static _rescaleAndSwap(t,e,i,r,o,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c+1]*r,u[c+1]=i+t[c]*o;return u}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let o=0,u=t.length;o<u;o+=2)r[o]=e+t[o],r[o+1]=i+t[o+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,o){switch(o){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,o,u){return[(t+5*i)/6,(e+5*r)/6,(5*i+o)/6,(5*r+u)/6,(i+o)/2,(r+u)/2]}}vt(ot,"PRECISION",1e-4);var jn,Ri,Zl,Jl,is,Nt,ua,ca,jh,Uh,tu,eu,Br,Vh,kp,Tp,Pe,Ec,Vb,Wb,Gb,Xb,qb,Yb;const Es=class Es{constructor({x:t,y:e},i,r,o,u,c=0){_(this,Pe);_(this,jn);_(this,Ri,[]);_(this,Zl);_(this,Jl);_(this,is,[]);_(this,Nt,new Float32Array(18));_(this,ua);_(this,ca);_(this,jh);_(this,Uh);_(this,tu);_(this,eu);_(this,Br,[]);A(this,jn,i),A(this,eu,o*r),A(this,Jl,u),a(this,Nt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,Zl,c),A(this,Uh,a(Es,Vh)*r),A(this,jh,a(Es,Tp)*r),A(this,tu,r),a(this,Br).push(t,e)}isEmpty(){return isNaN(a(this,Nt)[8])}add({x:t,y:e}){var Z;A(this,ua,t),A(this,ca,e);const[i,r,o,u]=a(this,jn);let[c,f,p,m]=a(this,Nt).subarray(8,12);const v=t-p,w=e-m,S=Math.hypot(v,w);if(S<a(this,jh))return!1;const x=S-a(this,Uh),C=x/S,k=C*v,T=C*w;let L=c,O=f;c=p,f=m,p+=k,m+=T,(Z=a(this,Br))==null||Z.push(t,e);const D=-T/x,z=k/x,H=D*a(this,eu),B=z*a(this,eu);return a(this,Nt).set(a(this,Nt).subarray(2,8),0),a(this,Nt).set([p+H,m+B],4),a(this,Nt).set(a(this,Nt).subarray(14,18),12),a(this,Nt).set([p-H,m-B],16),isNaN(a(this,Nt)[6])?(a(this,is).length===0&&(a(this,Nt).set([c+H,f+B],2),a(this,is).push(NaN,NaN,NaN,NaN,(c+H-i)/o,(f+B-r)/u),a(this,Nt).set([c-H,f-B],14),a(this,Ri).push(NaN,NaN,NaN,NaN,(c-H-i)/o,(f-B-r)/u)),a(this,Nt).set([L,O,c,f,p,m],6),!this.isEmpty()):(a(this,Nt).set([L,O,c,f,p,m],6),Math.abs(Math.atan2(O-f,L-c)-Math.atan2(T,k))<Math.PI/2?([c,f,p,m]=a(this,Nt).subarray(2,6),a(this,is).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/o,((f+m)/2-r)/u),[c,f,L,O]=a(this,Nt).subarray(14,18),a(this,Ri).push(NaN,NaN,NaN,NaN,((L+c)/2-i)/o,((O+f)/2-r)/u),!0):([L,O,c,f,p,m]=a(this,Nt).subarray(0,6),a(this,is).push(((L+5*c)/6-i)/o,((O+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),[p,m,c,f,L,O]=a(this,Nt).subarray(12,18),a(this,Ri).push(((L+5*c)/6-i)/o,((O+5*f)/6-r)/u,((5*c+p)/6-i)/o,((5*f+m)/6-r)/u,((c+p)/2-i)/o,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,is),e=a(this,Ri);if(isNaN(a(this,Nt)[6])&&!this.isEmpty())return E(this,Pe,Vb).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,Pe,Gb).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,Pe,Wb).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,o,u){return new Kb(t,e,i,r,o,u)}getOutlines(){var v;const t=a(this,is),e=a(this,Ri),i=a(this,Nt),[r,o,u,c]=a(this,jn),f=new Float32Array((((v=a(this,Br))==null?void 0:v.length)??0)+2);for(let w=0,S=f.length-2;w<S;w+=2)f[w]=(a(this,Br)[w]-r)/u,f[w+1]=(a(this,Br)[w+1]-o)/c;if(f[f.length-2]=(a(this,ua)-r)/u,f[f.length-1]=(a(this,ca)-o)/c,isNaN(i[6])&&!this.isEmpty())return E(this,Pe,Xb).call(this,f);const p=new Float32Array(a(this,is).length+24+a(this,Ri).length);let m=t.length;for(let w=0;w<m;w+=2){if(isNaN(t[w])){p[w]=p[w+1]=NaN;continue}p[w]=t[w],p[w+1]=t[w+1]}m=E(this,Pe,Yb).call(this,p,m);for(let w=e.length-6;w>=6;w-=6)for(let S=0;S<6;S+=2){if(isNaN(e[w+S])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[w+S],p[m+1]=e[w+S+1],m+=2}return E(this,Pe,qb).call(this,p,m),this.newFreeDrawOutline(p,f,a(this,jn),a(this,tu),a(this,Zl),a(this,Jl))}};jn=new WeakMap,Ri=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,is=new WeakMap,Nt=new WeakMap,ua=new WeakMap,ca=new WeakMap,jh=new WeakMap,Uh=new WeakMap,tu=new WeakMap,eu=new WeakMap,Br=new WeakMap,Vh=new WeakMap,kp=new WeakMap,Tp=new WeakMap,Pe=new WeakSet,Ec=function(){const t=a(this,Nt).subarray(4,6),e=a(this,Nt).subarray(16,18),[i,r,o,u]=a(this,jn);return[(a(this,ua)+(t[0]-e[0])/2-i)/o,(a(this,ca)+(t[1]-e[1])/2-r)/u,(a(this,ua)+(e[0]-t[0])/2-i)/o,(a(this,ca)+(e[1]-t[1])/2-r)/u]},Vb=function(){const[t,e,i,r]=a(this,jn),[o,u,c,f]=E(this,Pe,Ec).call(this);return`M${(a(this,Nt)[2]-t)/i} ${(a(this,Nt)[3]-e)/r} L${(a(this,Nt)[4]-t)/i} ${(a(this,Nt)[5]-e)/r} L${o} ${u} L${c} ${f} L${(a(this,Nt)[16]-t)/i} ${(a(this,Nt)[17]-e)/r} L${(a(this,Nt)[14]-t)/i} ${(a(this,Nt)[15]-e)/r} Z`},Wb=function(t){const e=a(this,Ri);t.push(`L${e[4]} ${e[5]} Z`)},Gb=function(t){const[e,i,r,o]=a(this,jn),u=a(this,Nt).subarray(4,6),c=a(this,Nt).subarray(16,18),[f,p,m,v]=E(this,Pe,Ec).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-i)/o} L${f} ${p} L${m} ${v} L${(c[0]-e)/r} ${(c[1]-i)/o}`)},Xb=function(t){const e=a(this,Nt),[i,r,o,u]=a(this,jn),[c,f,p,m]=E(this,Pe,Ec).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-r)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-r)/u],0),this.newFreeDrawOutline(v,t,a(this,jn),a(this,tu),a(this,Zl),a(this,Jl))},qb=function(t,e){const i=a(this,Ri);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},Yb=function(t,e){const i=a(this,Nt).subarray(4,6),r=a(this,Nt).subarray(16,18),[o,u,c,f]=a(this,jn),[p,m,v,w]=E(this,Pe,Ec).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/c,(i[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-u)/f],e),e+=24},_(Es,Vh,8),_(Es,kp,2),_(Es,Tp,a(Es,Vh)+a(Es,kp));let up=Es;var nu,ha,Us,Wh,Un,Gh,ye,Pp,Qb;class Kb extends ot{constructor(e,i,r,o,u,c){super();_(this,Pp);_(this,nu);_(this,ha,new Float32Array(4));_(this,Us);_(this,Wh);_(this,Un);_(this,Gh);_(this,ye);A(this,ye,e),A(this,Un,i),A(this,nu,r),A(this,Gh,o),A(this,Us,u),A(this,Wh,c),this.lastPoint=[NaN,NaN],E(this,Pp,Qb).call(this,c);const[f,p,m,v]=a(this,ha);for(let w=0,S=e.length;w<S;w+=2)e[w]=(e[w]-f)/m,e[w+1]=(e[w+1]-p)/v;for(let w=0,S=i.length;w<S;w+=2)i[w]=(i[w]-f)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const e=[`M${a(this,ye)[4]} ${a(this,ye)[5]}`];for(let i=6,r=a(this,ye).length;i<r;i+=6){if(isNaN(a(this,ye)[i])){e.push(`L${a(this,ye)[i+4]} ${a(this,ye)[i+5]}`);continue}e.push(`C${a(this,ye)[i]} ${a(this,ye)[i+1]} ${a(this,ye)[i+2]} ${a(this,ye)[i+3]} ${a(this,ye)[i+4]} ${a(this,ye)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,o],u){const c=r-e,f=o-i;let p,m;switch(u){case 0:p=ot._rescale(a(this,ye),e,o,c,-f),m=ot._rescale(a(this,Un),e,o,c,-f);break;case 90:p=ot._rescaleAndSwap(a(this,ye),e,i,c,f),m=ot._rescaleAndSwap(a(this,Un),e,i,c,f);break;case 180:p=ot._rescale(a(this,ye),r,i,-c,f),m=ot._rescale(a(this,Un),r,i,-c,f);break;case 270:p=ot._rescaleAndSwap(a(this,ye),r,o,-c,-f),m=ot._rescaleAndSwap(a(this,Un),r,o,-c,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return a(this,ha)}newOutliner(e,i,r,o,u,c=0){return new up(e,i,r,o,u,c)}getNewOutline(e,i){const[r,o,u,c]=a(this,ha),[f,p,m,v]=a(this,nu),w=u*m,S=c*v,x=r*m+f,C=o*v+p,k=this.newOutliner({x:a(this,Un)[0]*w+x,y:a(this,Un)[1]*S+C},a(this,nu),a(this,Gh),e,a(this,Wh),i??a(this,Us));for(let T=2;T<a(this,Un).length;T+=2)k.add({x:a(this,Un)[T]*w+x,y:a(this,Un)[T+1]*S+C});return k.getOutlines()}}nu=new WeakMap,ha=new WeakMap,Us=new WeakMap,Wh=new WeakMap,Un=new WeakMap,Gh=new WeakMap,ye=new WeakMap,Pp=new WeakSet,Qb=function(e){const i=a(this,ye);let r=i[4],o=i[5],u=r,c=o,f=r,p=o,m=r,v=o;const w=e?Math.max:Math.min;for(let x=6,C=i.length;x<C;x+=6){if(isNaN(i[x]))u=Math.min(u,i[x+4]),c=Math.min(c,i[x+5]),f=Math.max(f,i[x+4]),p=Math.max(p,i[x+5]),v<i[x+5]?(m=i[x+4],v=i[x+5]):v===i[x+5]&&(m=w(m,i[x+4]));else{const k=pt.bezierBoundingBox(r,o,...i.slice(x,x+6));u=Math.min(u,k[0]),c=Math.min(c,k[1]),f=Math.max(f,k[2]),p=Math.max(p,k[3]),v<k[3]?(m=k[2],v=k[3]):v===k[3]&&(m=w(m,k[2]))}r=i[x+4],o=i[x+5]}const S=a(this,ha);S[0]=u-a(this,Us),S[1]=c-a(this,Us),S[2]=f-u+2*a(this,Us),S[3]=p-c+2*a(this,Us),this.lastPoint=[m,v]};var Xh,qh,jr,Mi,vn,Zb,Kf,Jb,t1,Vy;class Uy{constructor(t,e=0,i=0,r=!0){_(this,vn);_(this,Xh);_(this,qh);_(this,jr,[]);_(this,Mi,[]);let o=1/0,u=-1/0,c=1/0,f=-1/0;const p=10**-4;for(const{x:k,y:T,width:L,height:O}of t){const D=Math.floor((k-e)/p)*p,z=Math.ceil((k+L+e)/p)*p,H=Math.floor((T-e)/p)*p,B=Math.ceil((T+O+e)/p)*p,Y=[D,H,B,!0],Z=[z,H,B,!1];a(this,jr).push(Y,Z),o=Math.min(o,D),u=Math.max(u,z),c=Math.min(c,H),f=Math.max(f,B)}const m=u-o+2*i,v=f-c+2*i,w=o-i,S=c-i,x=a(this,jr).at(r?-1:-2),C=[x[0],x[2]];for(const k of a(this,jr)){const[T,L,O]=k;k[0]=(T-w)/m,k[1]=(L-S)/v,k[2]=(O-S)/v}A(this,Xh,new Float32Array([w,S,m,v])),A(this,qh,C)}getOutlines(){a(this,jr).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of a(this,jr))e[3]?(t.push(...E(this,vn,Vy).call(this,e)),E(this,vn,Jb).call(this,e)):(E(this,vn,t1).call(this,e),t.push(...E(this,vn,Vy).call(this,e)));return E(this,vn,Zb).call(this,t)}}Xh=new WeakMap,qh=new WeakMap,jr=new WeakMap,Mi=new WeakMap,vn=new WeakSet,Zb=function(t){const e=[],i=new Set;for(const u of t){const[c,f,p]=u;e.push([c,f,u],[c,p,u])}e.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=e.length;u<c;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const r=[];let o;for(;i.size>0;){const u=i.values().next().value;let[c,f,p,m,v]=u;i.delete(u);let w=c,S=f;for(o=[c,p],r.push(o);;){let x;if(i.has(m))x=m;else if(i.has(v))x=v;else break;i.delete(x),[c,f,p,m,v]=x,w!==c&&(o.push(w,S,c,S===f?f:p),w=c),S=S===f?p:f}o.push(w,S)}return new GC(r,a(this,Xh),a(this,qh))},Kf=function(t){const e=a(this,Mi);let i=0,r=e.length-1;for(;i<=r;){const o=i+r>>1,u=e[o][0];if(u===t)return o;u<t?i=o+1:r=o-1}return r+1},Jb=function([,t,e]){const i=E(this,vn,Kf).call(this,t);a(this,Mi).splice(i,0,[t,e])},t1=function([,t,e]){const i=E(this,vn,Kf).call(this,t);for(let r=i;r<a(this,Mi).length;r++){const[o,u]=a(this,Mi)[r];if(o!==t)break;if(o===t&&u===e){a(this,Mi).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,u]=a(this,Mi)[r];if(o!==t)break;if(o===t&&u===e){a(this,Mi).splice(r,1);return}}},Vy=function(t){const[e,i,r]=t,o=[[e,i,r]],u=E(this,vn,Kf).call(this,r);for(let c=0;c<u;c++){const[f,p]=a(this,Mi)[c];for(let m=0,v=o.length;m<v;m++){const[,w,S]=o[m];if(!(p<=w||S<=f)){if(w>=f){if(S>p)o[m][1]=p;else{if(v===1)return[];o.splice(m,1),m--,v--}continue}o[m][2]=f,S>p&&o.push([e,p,S])}}}return o};var Yh,iu;class GC extends ot{constructor(e,i,r){super();_(this,Yh);_(this,iu);A(this,iu,e),A(this,Yh,i),this.lastPoint=r}toSVGPath(){const e=[];for(const i of a(this,iu)){let[r,o]=i;e.push(`M${r} ${o}`);for(let u=2;u<i.length;u+=2){const c=i[u],f=i[u+1];c===r?(e.push(`V${f}`),o=f):f===o&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,i,r,o],u){const c=[],f=r-e,p=o-i;for(const m of a(this,iu)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=e+m[w]*f,v[w+1]=o-m[w+1]*p;c.push(v)}return c}get box(){return a(this,Yh)}get classNamesForOutlining(){return["highlightOutline"]}}Yh=new WeakMap,iu=new WeakMap;class Wy extends up{newFreeDrawOutline(t,e,i,r,o,u){return new XC(t,e,i,r,o,u)}}class XC extends Kb{newOutliner(t,e,i,r,o,u=0){return new Wy(t,e,i,r,o,u)}}var Li,da,su,Te,Kh,ru,Qh,Zh,Ur,Ii,ou,Jh,Xt,Gy,Xy,qy,vo,e1,Ar;const kn=class kn{constructor({editor:t=null,uiManager:e=null}){_(this,Xt);_(this,Li,null);_(this,da,null);_(this,su);_(this,Te,null);_(this,Kh,!1);_(this,ru,!1);_(this,Qh,null);_(this,Zh);_(this,Ur,null);_(this,Ii,null);_(this,ou);var i;t?(A(this,ru,!1),A(this,ou,Ot.HIGHLIGHT_COLOR),A(this,Qh,t)):(A(this,ru,!0),A(this,ou,Ot.HIGHLIGHT_DEFAULT_COLOR)),A(this,Ii,(t==null?void 0:t._uiManager)||e),A(this,Zh,a(this,Ii)._eventBus),A(this,su,(t==null?void 0:t.color)||((i=a(this,Ii))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),a(kn,Jh)||A(kn,Jh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Dt(this,"_keyboardManager",new ld([[["Escape","mac+Escape"],kn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],kn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],kn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],kn.prototype._moveToPrevious],[["Home","mac+Home"],kn.prototype._moveToBeginning],[["End","mac+End"],kn.prototype._moveToEnd]]))}renderButton(){const t=A(this,Li,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,Ii)._signal;t.addEventListener("click",E(this,Xt,vo).bind(this),{signal:e}),t.addEventListener("keydown",E(this,Xt,qy).bind(this),{signal:e});const i=A(this,da,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=a(this,su),t.append(i),t}renderMainDropdown(){const t=A(this,Te,E(this,Xt,Gy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,Li)){E(this,Xt,vo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,Xt,Xy).call(this,e,t)}_moveToNext(t){var e,i;if(!a(this,Xt,Ar)){E(this,Xt,vo).call(this,t);return}if(t.target===a(this,Li)){(e=a(this,Te).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=a(this,Te))==null?void 0:e.firstChild)||t.target===a(this,Li)){a(this,Xt,Ar)&&this._hideDropdownFromKeyboard();return}a(this,Xt,Ar)||E(this,Xt,vo).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!a(this,Xt,Ar)){E(this,Xt,vo).call(this,t);return}(e=a(this,Te).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,Xt,Ar)){E(this,Xt,vo).call(this,t);return}(e=a(this,Te).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,Te))==null||t.classList.add("hidden"),(e=a(this,Ur))==null||e.abort(),A(this,Ur,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,ru)){if(!a(this,Xt,Ar)){(t=a(this,Qh))==null||t.unselect();return}this.hideDropdown(),a(this,Li).focus({preventScroll:!0,focusVisible:a(this,Kh)})}}updateColor(t){if(a(this,da)&&(a(this,da).style.backgroundColor=t),!a(this,Te))return;const e=a(this,Ii).highlightColors.values();for(const i of a(this,Te).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,Li))==null||t.remove(),A(this,Li,null),A(this,da,null),(e=a(this,Te))==null||e.remove(),A(this,Te,null)}};Li=new WeakMap,da=new WeakMap,su=new WeakMap,Te=new WeakMap,Kh=new WeakMap,ru=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,Ur=new WeakMap,Ii=new WeakMap,ou=new WeakMap,Jh=new WeakMap,Xt=new WeakSet,Gy=function(){const t=document.createElement("div"),e=a(this,Ii)._signal;t.addEventListener("contextmenu",Oi,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of a(this,Ii).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",a(kn,Jh)[i]);const u=document.createElement("span");o.append(u),u.className="swatch",u.style.backgroundColor=r,o.setAttribute("aria-selected",r===a(this,su)),o.addEventListener("click",E(this,Xt,Xy).bind(this,r),{signal:e}),t.append(o)}return t.addEventListener("keydown",E(this,Xt,qy).bind(this),{signal:e}),t},Xy=function(t,e){e.stopPropagation(),a(this,Zh).dispatch("switchannotationeditorparams",{source:this,type:a(this,ou),value:t})},qy=function(t){kn._keyboardManager.exec(this,t)},vo=function(t){if(a(this,Xt,Ar)){this.hideDropdown();return}if(A(this,Kh,t.detail===0),a(this,Ur)||(A(this,Ur,new AbortController),window.addEventListener("pointerdown",E(this,Xt,e1).bind(this),{signal:a(this,Ii).combinedSignal(a(this,Ur))})),a(this,Te)){a(this,Te).classList.remove("hidden");return}const e=A(this,Te,E(this,Xt,Gy).call(this));a(this,Li).append(e)},e1=function(t){var e;(e=a(this,Te))!=null&&e.contains(t.target)||this.hideDropdown()},Ar=function(){return a(this,Te)&&!a(this,Te).classList.contains("hidden")},_(kn,Jh,null);let cp=kn;var au,td,Vs,fa,lu,Rn,ed,nd,pa,li,Vn,Ue,uu,Ws,nn,cu,ui,id,kt,Yy,Qf,n1,i1,s1,Ky,wo,fi,hl,r1,Zf,xc,o1,a1,l1,u1,c1;const jt=class jt extends he{constructor(e){super({...e,name:"highlightEditor"});_(this,kt);_(this,au,null);_(this,td,0);_(this,Vs);_(this,fa,null);_(this,lu,null);_(this,Rn,null);_(this,ed,null);_(this,nd,0);_(this,pa,null);_(this,li,null);_(this,Vn,null);_(this,Ue,!1);_(this,uu,null);_(this,Ws);_(this,nn,null);_(this,cu,"");_(this,ui);_(this,id,"");this.color=e.color||jt._defaultColor,A(this,ui,e.thickness||jt._defaultThickness),A(this,Ws,e.opacity||jt._defaultOpacity),A(this,Vs,e.boxes||null),A(this,id,e.methodOfCreation||""),A(this,cu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(A(this,Ue,!0),E(this,kt,Qf).call(this,e),E(this,kt,wo).call(this)):a(this,Vs)&&(A(this,au,e.anchorNode),A(this,td,e.anchorOffset),A(this,ed,e.focusNode),A(this,nd,e.focusOffset),E(this,kt,Yy).call(this),E(this,kt,wo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=jt.prototype;return Dt(this,"_keyboardManager",new ld([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Ue)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,ui),methodOfCreation:a(this,id)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;he.initialize(e,i),jt._defaultColor||(jt._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case Ot.HIGHLIGHT_DEFAULT_COLOR:jt._defaultColor=i;break;case Ot.HIGHLIGHT_THICKNESS:jt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return a(this,uu)}updateParams(e,i){switch(e){case Ot.HIGHLIGHT_COLOR:E(this,kt,n1).call(this,i);break;case Ot.HIGHLIGHT_THICKNESS:E(this,kt,i1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ot.HIGHLIGHT_DEFAULT_COLOR,jt._defaultColor],[Ot.HIGHLIGHT_THICKNESS,jt._defaultThickness]]}get propertiesToUpdate(){return[[Ot.HIGHLIGHT_COLOR,this.color||jt._defaultColor],[Ot.HIGHLIGHT_THICKNESS,a(this,ui)||jt._defaultThickness],[Ot.HIGHLIGHT_FREE,a(this,Ue)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(A(this,lu,new cp({editor:this})),e.addColorPicker(a(this,lu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,kt,xc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,E(this,kt,xc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,kt,Ky).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,kt,wo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?E(this,kt,Ky).call(this):e&&(E(this,kt,wo).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var o,u,c;const{drawLayer:i}=this.parent;let r;a(this,Ue)?(e=(e-this.rotation+360)%360,r=E(o=jt,fi,hl).call(o,a(this,li).box,e)):r=E(u=jt,fi,hl).call(u,[this.x,this.y,this.width,this.height],e),i.updateProperties(a(this,Vn),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(a(this,nn),{bbox:E(c=jt,fi,hl).call(c,a(this,Rn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,cu)&&(e.setAttribute("aria-label",a(this,cu)),e.setAttribute("role","mark")),a(this,Ue)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,kt,r1).bind(this),{signal:this._uiManager._signal});const i=A(this,pa,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,fa);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),op(this,a(this,pa),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,kt,Zf).call(this,!0);break;case 1:case 3:E(this,kt,Zf).call(this,!1);break}}select(){var e;super.select(),a(this,nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,nn)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,nn),{rootClass:{selected:!1}}),a(this,Ue)||E(this,kt,Zf).call(this,!1))}get _mustFixPosition(){return!a(this,Ue)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Vn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,nn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:o,y:u}){const{x:c,y:f,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=e.combinedSignal(v),S=x=>{v.abort(),E(this,fi,u1).call(this,e,x)};window.addEventListener("blur",S,{signal:w}),window.addEventListener("pointerup",S,{signal:w}),window.addEventListener("pointerdown",Kn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Oi,{signal:w}),r.addEventListener("pointermove",E(this,fi,l1).bind(this,e),{signal:w}),this._freeHighlight=new Wy({x:o,y:u},[c,f,p,m],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var C,k,T,L;let o=null;if(e instanceof Fb){const{data:{quadPoints:O,rect:D,rotation:z,id:H,color:B,opacity:Y,popupRef:Z},parent:{page:{pageNumber:st}}}=e;o=e={annotationType:Tt.HIGHLIGHT,color:Array.from(B),opacity:Y,quadPoints:O,boxes:null,pageIndex:st-1,rect:D.slice(0),rotation:z,id:H,deleted:!1,popupRef:Z}}else if(e instanceof kv){const{data:{inkLists:O,rect:D,rotation:z,id:H,color:B,borderStyle:{rawWidth:Y},popupRef:Z},parent:{page:{pageNumber:st}}}=e;o=e={annotationType:Tt.HIGHLIGHT,color:Array.from(B),thickness:Y,inkLists:O,boxes:null,pageIndex:st-1,rect:D.slice(0),rotation:z,id:H,deleted:!1,popupRef:Z}}const{color:u,quadPoints:c,inkLists:f,opacity:p}=e,m=await super.deserialize(e,i,r);m.color=pt.makeHexColor(...u),A(m,Ws,p||1),f&&A(m,ui,e.thickness),m.annotationElementId=e.id||null,m._initialData=o;const[v,w]=m.pageDimensions,[S,x]=m.pageTranslation;if(c){const O=A(m,Vs,[]);for(let D=0;D<c.length;D+=8)O.push({x:(c[D]-S)/v,y:1-(c[D+1]-x)/w,width:(c[D+2]-c[D])/v,height:(c[D+1]-c[D+5])/w});E(C=m,kt,Yy).call(C),E(k=m,kt,wo).call(k),m.rotate(m.rotation)}else if(f){A(m,Ue,!0);const O=f[0],D={x:O[0]-S,y:w-(O[1]-x)},z=new Wy(D,[0,0,v,w],1,a(m,ui)/2,!0,.001);for(let Y=0,Z=O.length;Y<Z;Y+=2)D.x=O[Y]-S,D.y=w-(O[Y+1]-x),z.add(D);const{id:H,clipPathId:B}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);E(T=m,kt,Qf).call(T,{highlightOutlines:z.getOutlines(),highlightId:H,clipPathId:B}),E(L=m,kt,wo).call(L)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=he._colorManager.convert(this.color),o={annotationType:Tt.HIGHLIGHT,color:r,opacity:a(this,Ws),thickness:a(this,ui),quadPoints:E(this,kt,o1).call(this),outlines:E(this,kt,a1).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,kt,xc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,kt,c1).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};au=new WeakMap,td=new WeakMap,Vs=new WeakMap,fa=new WeakMap,lu=new WeakMap,Rn=new WeakMap,ed=new WeakMap,nd=new WeakMap,pa=new WeakMap,li=new WeakMap,Vn=new WeakMap,Ue=new WeakMap,uu=new WeakMap,Ws=new WeakMap,nn=new WeakMap,cu=new WeakMap,ui=new WeakMap,id=new WeakMap,kt=new WeakSet,Yy=function(){const e=new Uy(a(this,Vs),.001);A(this,li,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,li).box;const i=new Uy(a(this,Vs),.0025,.001,this._uiManager.direction==="ltr");A(this,Rn,i.getOutlines());const{lastPoint:r}=a(this,Rn);A(this,uu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Qf=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var v,w;if(A(this,li,e),A(this,Rn,e.getNewOutline(a(this,ui)/2+1.5,.0025)),i>=0)A(this,Vn,i),A(this,fa,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,nn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Rn).box,path:{d:a(this,Rn).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Vn),{bbox:E(v=jt,fi,hl).call(v,a(this,li).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,nn),{bbox:E(w=jt,fi,hl).call(w,a(this,Rn).box,S),path:{d:a(this,Rn).toSVGPath()}})}const[u,c,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=f,this.height=p;break;case 90:{const[S,x]=this.parentDimensions;this.x=c,this.y=1-u,this.width=f*x/S,this.height=p*S/x;break}case 180:this.x=1-u,this.y=1-c,this.width=f,this.height=p;break;case 270:{const[S,x]=this.parentDimensions;this.x=1-c,this.y=u,this.width=f*x/S,this.height=p*S/x;break}}const{lastPoint:m}=a(this,Rn);A(this,uu,[(m[0]-u)/f,(m[1]-c)/p])},n1=function(e){const i=(u,c)=>{var f,p;this.color=u,A(this,Ws,c),(f=this.parent)==null||f.drawLayer.updateProperties(a(this,Vn),{root:{fill:u,"fill-opacity":c}}),(p=a(this,lu))==null||p.updateColor(u)},r=this.color,o=a(this,Ws);this.addCommands({cmd:i.bind(this,e,jt._defaultOpacity),undo:i.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},i1=function(e){const i=a(this,ui),r=o=>{A(this,ui,o),E(this,kt,s1).call(this,o)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},s1=function(e){if(!a(this,Ue))return;E(this,kt,Qf).call(this,{highlightOutlines:a(this,li).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},Ky=function(){a(this,Vn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Vn)),A(this,Vn,null),this.parent.drawLayer.remove(a(this,nn)),A(this,nn,null))},wo=function(e=this.parent){a(this,Vn)===null&&({id:cn(this,Vn)._,clipPathId:cn(this,fa)._}=e.drawLayer.draw({bbox:a(this,li).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Ws)},rootClass:{highlight:!0,free:a(this,Ue)},path:{d:a(this,li).toSVGPath()}},!1,!0),A(this,nn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Ue)},bbox:a(this,Rn).box,path:{d:a(this,Rn).toSVGPath()}},a(this,Ue))),a(this,pa)&&(a(this,pa).style.clipPath=a(this,fa)))},fi=new WeakSet,hl=function([e,i,r,o],u){switch(u){case 90:return[1-i-o,e,o,r];case 180:return[1-e-r,1-i-o,r,o];case 270:return[i,1-e-r,o,r]}return[e,i,r,o]},r1=function(e){jt._keyboardManager.exec(this,e)},Zf=function(e){if(!a(this,au))return;const i=window.getSelection();e?i.setPosition(a(this,au),a(this,td)):i.setPosition(a(this,ed),a(this,nd))},xc=function(){return a(this,Ue)?this.rotation:0},o1=function(){if(a(this,Ue))return null;const[e,i]=this.pageDimensions,[r,o]=this.pageTranslation,u=a(this,Vs),c=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:v,height:w}of u){const S=p*e+r,x=(1-m)*i+o;c[f]=c[f+4]=S,c[f+1]=c[f+3]=x,c[f+2]=c[f+6]=S+v*e,c[f+5]=c[f+7]=x-w*i,f+=8}return c},a1=function(e){return a(this,li).serialize(e,E(this,kt,xc).call(this))},l1=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},u1=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},c1=function(e){const{color:i}=this._initialData;return e.color.some((r,o)=>r!==i[o])},_(jt,fi),vt(jt,"_defaultColor",null),vt(jt,"_defaultOpacity",1),vt(jt,"_defaultThickness",12),vt(jt,"_type","highlight"),vt(jt,"_editorType",Tt.HIGHLIGHT),vt(jt,"_freeHighlightId",-1),vt(jt,"_freeHighlight",null),vt(jt,"_freeHighlightClipId","");let hp=jt;var ga;class qC{constructor(){_(this,ga,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){a(this,ga)[t]=e}toSVGProperties(){const t=a(this,ga);return A(this,ga,Object.create(null)),{root:t}}reset(){A(this,ga,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}ga=new WeakMap;var Wn,hu,Fe,ma,ya,Vr,Wr,Gr,va,zt,Zy,Jy,tv,Cc,h1,Jf,kc,dl;const at=class at extends he{constructor(e){super(e);_(this,zt);_(this,Wn,null);_(this,hu);vt(this,"_drawId",null);A(this,hu,e.mustBeCommitted||!1),e.drawOutlines&&(E(this,zt,Zy).call(this,e),E(this,zt,Cc).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[o,u]of Object.entries(i))r.has(o)?Object.assign(e[o],u):e[o]=u;return e}static getDefaultDrawingOptions(e){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(a(at,Fe).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,o]of this.typesMap)e.push([r,i[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,o]of this.constructor.typesMap)e.push([r,i[o]]);return e}_updateProperty(e,i,r){const o=this._drawingOptions,u=o[i],c=f=>{var m;o.updateProperty(i,f);const p=a(this,Wn).updateProperty(i,f);p&&E(this,zt,kc).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(a(this,Wn).getPathResizingSVGProperties(E(this,zt,Jf).call(this)),{bbox:E(this,zt,dl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(a(this,Wn).getPathResizedSVGProperties(E(this,zt,Jf).call(this)),{bbox:E(this,zt,dl).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,zt,dl).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties(a(this,Wn).getPathTranslatedSVGProperties(E(this,zt,Jf).call(this),this.parentDimensions),{bbox:E(this,zt,dl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,hu)&&(A(this,hu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,zt,tv).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,zt,Cc).call(this),E(this,zt,kc).call(this,a(this,Wn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,zt,tv).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,zt,Cc).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,at._mergeSVGProperties({bbox:E(this,zt,dl).call(this)},a(this,Wn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,zt,kc).call(this,a(this,Wn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,r,o,u){Qt("Not implemented")}static startDrawing(e,i,r,o){var k;const{target:u,offsetX:c,offsetY:f,pointerId:p,pointerType:m}=o;if(a(at,Wr)&&a(at,Wr)!==m)return;const{viewport:{rotation:v}}=e,{width:w,height:S}=u.getBoundingClientRect(),x=A(at,ma,new AbortController),C=e.combinedSignal(x);if(a(at,Vr)||A(at,Vr,p),a(at,Wr)??A(at,Wr,m),window.addEventListener("pointerup",T=>{var L;a(at,Vr)===T.pointerId?this._endDraw(T):(L=a(at,Gr))==null||L.delete(T.pointerId)},{signal:C}),window.addEventListener("pointercancel",T=>{var L;a(at,Vr)===T.pointerId?this._currentParent.endDrawingSession():(L=a(at,Gr))==null||L.delete(T.pointerId)},{signal:C}),window.addEventListener("pointerdown",T=>{a(at,Wr)===T.pointerType&&((a(at,Gr)||A(at,Gr,new Set)).add(T.pointerId),a(at,Fe).isCancellable()&&(a(at,Fe).removeLastElement(),a(at,Fe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",Oi,{signal:C}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),u.addEventListener("touchmove",T=>{T.timeStamp===a(at,va)&&Kn(T)},{signal:C}),e.toggleDrawing(),(k=i._editorUndoBar)==null||k.hide(),a(at,Fe)){e.drawLayer.updateProperties(this._currentDrawId,a(at,Fe).startNew(c,f,w,S,v));return}i.updateUIForDefaultProperties(this),A(at,Fe,this.createDrawerInstance(c,f,w,S,v)),A(at,ya,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(at,ya).toSVGProperties(),a(at,Fe).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(at,va,-1),!a(at,Fe))return;const{offsetX:i,offsetY:r,pointerId:o}=e;if(a(at,Vr)===o){if(((u=a(at,Gr))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(at,Fe).add(i,r)),A(at,va,e.timeStamp),Kn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(at,Fe,null),A(at,ya,null),A(at,Wr,null),A(at,va,NaN)),a(at,ma)&&(a(at,ma).abort(),A(at,ma,null),A(at,Vr,NaN),A(at,Gr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,a(at,Fe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=a(at,Fe),o=this._currentDrawId,u=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(o,r.setLastElement(u))},undo:()=>{i.drawLayer.updateProperties(o,r.removeLastElement())},mustExec:!1,type:Ot.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ot.DRAW_STEP),!a(at,Fe).isEmpty()){const{pageDimensions:[r,o],scale:u}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(at,Fe).getOutlines(r*u,o*u,u,this._INNER_MARGIN),drawingOptions:a(at,ya),mustBeCommitted:!e});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,o,u,c){Qt("Not implemented")}static async deserialize(e,i,r){var v,w;const{rawDims:{pageWidth:o,pageHeight:u,pageX:c,pageY:f}}=i.viewport,p=this.deserializeDraw(c,f,o,u,this._INNER_MARGIN,e),m=await super.deserialize(e,i,r);return m.createDrawingOptions(e),E(v=m,zt,Zy).call(v,{drawOutlines:p}),E(w=m,zt,Cc).call(w),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[i,r]=this.pageTranslation,[o,u]=this.pageDimensions;return a(this,Wn).serialize([i,r,o,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Wn=new WeakMap,hu=new WeakMap,Fe=new WeakMap,ma=new WeakMap,ya=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Gr=new WeakMap,va=new WeakMap,zt=new WeakSet,Zy=function({drawOutlines:e,drawId:i,drawingOptions:r}){A(this,Wn,e),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=E(this,zt,Jy).call(this,e,this.parent),E(this,zt,kc).call(this,e.box)},Jy=function(e,i){const{id:r}=i.drawLayer.draw(at._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},tv=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Cc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,zt,Jy).call(this,a(this,Wn),e)}},h1=function([e,i,r,o]){const{parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[i,1-e,r*(c/u),o*(u/c)];case 180:return[1-e,1-i,r,o];case 270:return[1-i,e,r*(c/u),o*(u/c)];default:return[e,i,r,o]}},Jf=function(){const{x:e,y:i,width:r,height:o,parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[1-i,e,r*(u/c),o*(c/u)];case 180:return[1-e,1-i,r,o];case 270:return[i,1-e,r*(u/c),o*(c/u)];default:return[e,i,r,o]}},kc=function(e){if([this.x,this.y,this.width,this.height]=E(this,zt,h1).call(this,e),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},dl=function(){const{x:e,y:i,width:r,height:o,rotation:u,parentRotation:c,parentDimensions:[f,p]}=this;switch((u*4+c)/90){case 1:return[1-i-o,e,o,r];case 2:return[1-e-r,1-i-o,r,o];case 3:return[i,1-e-r,o,r];case 4:return[e,i-r*(f/p),o*(p/f),r*(f/p)];case 5:return[1-i,e,r*(f/p),o*(p/f)];case 6:return[1-e-o*(p/f),1-i,o*(p/f),r*(f/p)];case 7:return[i-r*(f/p),1-e-o*(p/f),r*(f/p),o*(p/f)];case 8:return[e-r,i-o,r,o];case 9:return[1-i,e-r,o,r];case 10:return[1-e,1-i,r,o];case 11:return[i-o,1-e,o,r];case 12:return[e-o*(p/f),i,o*(p/f),r*(f/p)];case 13:return[1-i-r*(f/p),e-o*(p/f),r*(f/p),o*(p/f)];case 14:return[1-e,1-i-r*(f/p),o*(p/f),r*(f/p)];case 15:return[i,1-e,r*(f/p),o*(p/f)];default:return[e,i,r,o]}},vt(at,"_currentDrawId",-1),vt(at,"_currentParent",null),_(at,Fe,null),_(at,ma,null),_(at,ya,null),_(at,Vr,NaN),_(at,Wr,null),_(at,Gr,null),_(at,va,NaN),vt(at,"_INNER_MARGIN",3);let Qy=at;var ss,Oe,$e,wa,du,fn,Ve,ci,Aa,Sa,ba,fu,tp;class YC{constructor(t,e,i,r,o,u){_(this,fu);_(this,ss,new Float64Array(6));_(this,Oe);_(this,$e);_(this,wa);_(this,du);_(this,fn);_(this,Ve,"");_(this,ci,0);_(this,Aa,new dp);_(this,Sa);_(this,ba);A(this,Sa,i),A(this,ba,r),A(this,wa,o),A(this,du,u),[t,e]=E(this,fu,tp).call(this,t,e);const c=A(this,Oe,[NaN,NaN,NaN,NaN,t,e]);A(this,fn,[t,e]),A(this,$e,[{line:c,points:a(this,fn)}]),a(this,ss).set(c,0)}updateProperty(t,e){t==="stroke-width"&&A(this,du,e)}isEmpty(){return!a(this,$e)||a(this,$e).length===0}isCancellable(){return a(this,fn).length<=10}add(t,e){[t,e]=E(this,fu,tp).call(this,t,e);const[i,r,o,u]=a(this,ss).subarray(2,6),c=t-o,f=e-u;return Math.hypot(a(this,Sa)*c,a(this,ba)*f)<=2?null:(a(this,fn).push(t,e),isNaN(i)?(a(this,ss).set([o,u,t,e],2),a(this,Oe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,ss)[0])&&a(this,Oe).splice(6,6),a(this,ss).set([i,r,o,u,t,e],0),a(this,Oe).push(...ot.createBezierPoints(i,r,o,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(a(this,fn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,o){A(this,Sa,i),A(this,ba,r),A(this,wa,o),[t,e]=E(this,fu,tp).call(this,t,e);const u=A(this,Oe,[NaN,NaN,NaN,NaN,t,e]);A(this,fn,[t,e]);const c=a(this,$e).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),a(this,$e).push({line:u,points:a(this,fn)}),a(this,ss).set(u,0),A(this,ci,0),this.toSVGPath(),null}getLastElement(){return a(this,$e).at(-1)}setLastElement(t){return a(this,$e)?(a(this,$e).push(t),A(this,Oe,t.line),A(this,fn,t.points),A(this,ci,0),{path:{d:this.toSVGPath()}}):a(this,Aa).setLastElement(t)}removeLastElement(){if(!a(this,$e))return a(this,Aa).removeLastElement();a(this,$e).pop(),A(this,Ve,"");for(let t=0,e=a(this,$e).length;t<e;t++){const{line:i,points:r}=a(this,$e)[t];A(this,Oe,i),A(this,fn,r),A(this,ci,0),this.toSVGPath()}return{path:{d:a(this,Ve)}}}toSVGPath(){const t=ot.svgRound(a(this,Oe)[4]),e=ot.svgRound(a(this,Oe)[5]);if(a(this,fn).length===2)return A(this,Ve,`${a(this,Ve)} M ${t} ${e} Z`),a(this,Ve);if(a(this,fn).length<=6){const r=a(this,Ve).lastIndexOf("M");A(this,Ve,`${a(this,Ve).slice(0,r)} M ${t} ${e}`),A(this,ci,6)}if(a(this,fn).length===4){const r=ot.svgRound(a(this,Oe)[10]),o=ot.svgRound(a(this,Oe)[11]);return A(this,Ve,`${a(this,Ve)} L ${r} ${o}`),A(this,ci,12),a(this,Ve)}const i=[];a(this,ci)===0&&(i.push(`M ${t} ${e}`),A(this,ci,6));for(let r=a(this,ci),o=a(this,Oe).length;r<o;r+=6){const[u,c,f,p,m,v]=a(this,Oe).slice(r,r+6).map(ot.svgRound);i.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}return A(this,Ve,a(this,Ve)+i.join(" ")),A(this,ci,a(this,Oe).length),a(this,Ve)}getOutlines(t,e,i,r){const o=a(this,$e).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),a(this,Aa).build(a(this,$e),t,e,i,a(this,wa),a(this,du),r),A(this,ss,null),A(this,Oe,null),A(this,$e,null),A(this,Ve,null),a(this,Aa)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ss=new WeakMap,Oe=new WeakMap,$e=new WeakMap,wa=new WeakMap,du=new WeakMap,fn=new WeakMap,Ve=new WeakMap,ci=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,ba=new WeakMap,fu=new WeakSet,tp=function(t,e){return ot._normalizePoint(t,e,a(this,Sa),a(this,ba),a(this,wa))};var pn,sd,rd,Gn,rs,os,pu,gu,mu,Ge,bs,d1,f1,p1;const Lv=class Lv extends ot{constructor(){super(...arguments);_(this,Ge);_(this,pn);_(this,sd,0);_(this,rd);_(this,Gn);_(this,rs);_(this,os);_(this,pu);_(this,gu);_(this,mu)}build(e,i,r,o,u,c,f){A(this,rs,i),A(this,os,r),A(this,pu,o),A(this,gu,u),A(this,mu,c),A(this,rd,f??0),A(this,Gn,e),E(this,Ge,f1).call(this)}setLastElement(e){return a(this,Gn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Gn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of a(this,Gn)){if(e.push(`M${ot.svgRound(i[4])} ${ot.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${ot.svgRound(i[10])} ${ot.svgRound(i[11])}`);continue}for(let r=6,o=i.length;r<o;r+=6){const[u,c,f,p,m,v]=i.subarray(r,r+6).map(ot.svgRound);e.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}}return e.join("")}serialize([e,i,r,o],u){const c=[],f=[],[p,m,v,w]=E(this,Ge,d1).call(this);let S,x,C,k,T,L,O,D,z;switch(a(this,gu)){case 0:z=ot._rescale,S=e,x=i+o,C=r,k=-o,T=e+p*r,L=i+(1-m-w)*o,O=e+(p+v)*r,D=i+(1-m)*o;break;case 90:z=ot._rescaleAndSwap,S=e,x=i,C=r,k=o,T=e+m*r,L=i+p*o,O=e+(m+w)*r,D=i+(p+v)*o;break;case 180:z=ot._rescale,S=e+r,x=i,C=-r,k=o,T=e+(1-p-v)*r,L=i+m*o,O=e+(1-p)*r,D=i+(m+w)*o;break;case 270:z=ot._rescaleAndSwap,S=e+r,x=i+o,C=-r,k=-o,T=e+(1-m-w)*r,L=i+(1-p-v)*o,O=e+(1-m)*r,D=i+(1-p)*o;break}for(const{line:H,points:B}of a(this,Gn))c.push(z(H,S,x,C,k,u?new Array(H.length):null)),f.push(z(B,S,x,C,k,u?new Array(B.length):null));return{lines:c,points:f,rect:[T,L,O,D]}}static deserialize(e,i,r,o,u,{paths:{lines:c,points:f},rotation:p,thickness:m}){const v=[];let w,S,x,C,k;switch(p){case 0:k=ot._rescale,w=-e/r,S=i/o+1,x=1/r,C=-1/o;break;case 90:k=ot._rescaleAndSwap,w=-i/o,S=-e/r,x=1/o,C=1/r;break;case 180:k=ot._rescale,w=e/r+1,S=-i/o,x=-1/r,C=1/o;break;case 270:k=ot._rescaleAndSwap,w=i/o+1,S=e/r+1,x=-1/o,C=-1/r;break}if(!c){c=[];for(const L of f){const O=L.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const D=new Float32Array(3*(O-2));c.push(D);let[z,H,B,Y]=L.subarray(0,4);D.set([NaN,NaN,NaN,NaN,z,H],0);for(let Z=4;Z<O;Z+=2){const st=L[Z],tt=L[Z+1];D.set(ot.createBezierPoints(z,H,B,Y,st,tt),(Z-2)*3),[z,H,B,Y]=[B,Y,st,tt]}}}for(let L=0,O=c.length;L<O;L++)v.push({line:k(c[L].map(D=>D??NaN),w,S,x,C),points:k(f[L].map(D=>D??NaN),w,S,x,C)});const T=new Lv;return T.build(v,r,o,1,p,m,u),T}get box(){return a(this,pn)}updateProperty(e,i){return e==="stroke-width"?E(this,Ge,p1).call(this,i):null}updateParentDimensions([e,i],r){const[o,u]=E(this,Ge,bs).call(this);A(this,rs,e),A(this,os,i),A(this,pu,r);const[c,f]=E(this,Ge,bs).call(this),p=c-o,m=f-u,v=a(this,pn);return v[0]-=p,v[1]-=m,v[2]+=2*p,v[3]+=2*m,v}updateRotation(e){return A(this,sd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,pn).map(ot.svgRound).join(" ")}get defaultProperties(){const[e,i]=a(this,pn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=a(this,pn);let r=0,o=0,u=0,c=0,f=0,p=0;switch(a(this,sd)){case 90:o=i/e,u=-e/i,f=e;break;case 180:r=-1,c=-1,f=e,p=i;break;case 270:o=-i/e,u=e/i,p=i;break;default:return""}return`matrix(${r} ${o} ${u} ${c} ${ot.svgRound(f)} ${ot.svgRound(p)})`}getPathResizingSVGProperties([e,i,r,o]){const[u,c]=E(this,Ge,bs).call(this),[f,p,m,v]=a(this,pn);if(Math.abs(m-u)<=ot.PRECISION||Math.abs(v-c)<=ot.PRECISION){const k=e+r/2-(f+m/2),T=i+o/2-(p+v/2);return{path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(i)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const w=(r-2*u)/(m-2*u),S=(o-2*c)/(v-2*c),x=m/r,C=v/o;return{path:{"transform-origin":`${ot.svgRound(f)} ${ot.svgRound(p)}`,transform:`${this.rotationTransform} scale(${x} ${C}) translate(${ot.svgRound(u)} ${ot.svgRound(c)}) scale(${w} ${S}) translate(${ot.svgRound(-u)} ${ot.svgRound(-c)})`}}}getPathResizedSVGProperties([e,i,r,o]){const[u,c]=E(this,Ge,bs).call(this),f=a(this,pn),[p,m,v,w]=f;if(f[0]=e,f[1]=i,f[2]=r,f[3]=o,Math.abs(v-u)<=ot.PRECISION||Math.abs(w-c)<=ot.PRECISION){const T=e+r/2-(p+v/2),L=i+o/2-(m+w/2);for(const{line:O,points:D}of a(this,Gn))ot._translate(O,T,L,O),ot._translate(D,T,L,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*u)/(v-2*u),x=(o-2*c)/(w-2*c),C=-S*(p+u)+e+u,k=-x*(m+c)+i+c;if(S!==1||x!==1||C!==0||k!==0)for(const{line:T,points:L}of a(this,Gn))ot._rescale(T,C,k,S,x,T),ot._rescale(L,C,k,S,x,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[o,u]=r,c=a(this,pn),f=e-c[0],p=i-c[1];if(a(this,rs)===o&&a(this,os)===u)for(const{line:m,points:v}of a(this,Gn))ot._translate(m,f,p,m),ot._translate(v,f,p,v);else{const m=a(this,rs)/o,v=a(this,os)/u;A(this,rs,o),A(this,os,u);for(const{line:w,points:S}of a(this,Gn))ot._rescale(w,f,p,m,v,w),ot._rescale(S,f,p,m,v,S);c[2]*=m,c[3]*=v}return c[0]=e,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(e)} ${ot.svgRound(i)}`}}}get defaultSVGProperties(){const e=a(this,pn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(e[0])} ${ot.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};pn=new WeakMap,sd=new WeakMap,rd=new WeakMap,Gn=new WeakMap,rs=new WeakMap,os=new WeakMap,pu=new WeakMap,gu=new WeakMap,mu=new WeakMap,Ge=new WeakSet,bs=function(e=a(this,mu)){const i=a(this,rd)+e/2*a(this,pu);return a(this,gu)%180===0?[i/a(this,rs),i/a(this,os)]:[i/a(this,os),i/a(this,rs)]},d1=function(){const[e,i,r,o]=a(this,pn),[u,c]=E(this,Ge,bs).call(this,0);return[e+u,i+c,r-2*u,o-2*c]},f1=function(){const e=A(this,pn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of a(this,Gn)){if(o.length<=12){for(let f=4,p=o.length;f<p;f+=6){const[m,v]=o.subarray(f,f+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],v),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],v)}continue}let u=o[4],c=o[5];for(let f=6,p=o.length;f<p;f+=6){const[m,v,w,S,x,C]=o.subarray(f,f+6);pt.bezierBoundingBox(u,c,m,v,w,S,x,C,e),u=x,c=C}}const[i,r]=E(this,Ge,bs).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]},p1=function(e){const[i,r]=E(this,Ge,bs).call(this);A(this,mu,e);const[o,u]=E(this,Ge,bs).call(this),[c,f]=[o-i,u-r],p=a(this,pn);return p[0]-=c,p[1]-=f,p[2]+=2*c,p[3]+=2*f,p};let dp=Lv;var yu;const Iv=class Iv extends qC{constructor(e){super();_(this,yu);A(this,yu,e),super.updateProperties({fill:"none",stroke:he._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=a(this,yu).realScale),super.updateSVGProperty(e,i)}clone(){const e=new Iv(a(this,yu));return e.updateAll(this),e}};yu=new WeakMap;let ev=Iv;var Rp,g1;const pl=class pl extends Qy{constructor(e){super({...e,name:"inkEditor"});_(this,Rp);this._willKeepAspectRatio=!0}static initialize(e,i){he.initialize(e,i),this._defaultDrawingOptions=new ev(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Dt(this,"typesMap",new Map([[Ot.INK_THICKNESS,"stroke-width"],[Ot.INK_COLOR,"stroke"],[Ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,o,u){return new YC(e,i,r,o,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,o,u,c){return dp.deserialize(e,i,r,o,u,c)}static async deserialize(e,i,r){let o=null;if(e instanceof kv){const{data:{inkLists:c,rect:f,rotation:p,id:m,color:v,opacity:w,borderStyle:{rawWidth:S},popupRef:x},parent:{page:{pageNumber:C}}}=e;o=e={annotationType:Tt.INK,color:Array.from(v),thickness:S,opacity:w,paths:{points:c},boxes:null,pageIndex:C-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:x}}const u=await super.deserialize(e,i,r);return u.annotationElementId=e.id||null,u._initialData=o,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=pl.getDefaultDrawingOptions({stroke:pt.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":c,"stroke-width":f}}=this,p={annotationType:Tt.INK,color:he._colorManager.convert(u),opacity:c,thickness:f,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?p:this.annotationElementId&&!E(this,Rp,g1).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Rp=new WeakSet,g1=function(e){const{color:i,thickness:r,opacity:o,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,f)=>c!==i[f])||e.thickness!==r||e.opacity!==o||e.pageIndex!==u},vt(pl,"_type","ink"),vt(pl,"_editorType",Tt.INK),vt(pl,"_defaultDrawingOptions",null);let nv=pl;var ce,We,Xr,Gs,qr,vu,as,ls,Xn,wu,Bt,Tc,Pc,ep,sv,np,rv,ip,m1;const Mc=class Mc extends he{constructor(e){super({...e,name:"stampEditor"});_(this,Bt);_(this,ce,null);_(this,We,null);_(this,Xr,null);_(this,Gs,null);_(this,qr,null);_(this,vu,"");_(this,as,null);_(this,ls,null);_(this,Xn,!1);_(this,wu,!1);A(this,Gs,e.bitmapUrl),A(this,qr,e.bitmapFile)}static initialize(e,i){he.initialize(e,i)}static get supportedTypes(){return Dt(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Dt(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Tt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:u,height:c}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:o,width:u,height:c,channels:o.length/(u*c)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;a(this,We)&&(A(this,ce,null),this._uiManager.imageManager.deleteId(a(this,We)),(e=a(this,as))==null||e.remove(),A(this,as,null),a(this,ls)&&(clearTimeout(a(this,ls)),A(this,ls,null))),super.remove()}rebuild(){if(!this.parent){a(this,We)&&E(this,Bt,ep).call(this);return}super.rebuild(),this.div!==null&&(a(this,We)&&a(this,as)===null&&E(this,Bt,ep).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,Xr)||a(this,ce)||a(this,Gs)||a(this,qr)||a(this,We))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,ce)?E(this,Bt,sv).call(this):E(this,Bt,ep).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(e*r,i*o,this.width*r,this.height*o)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,ls)!==null&&clearTimeout(a(this,ls)),A(this,ls,setTimeout(()=>{A(this,ls,null),E(this,Bt,rv).call(this)},200))}copyCanvas(e,i,r=!1){var S;e||(e=224);const{width:o,height:u}=a(this,ce),c=new ey;let f=a(this,ce),p=o,m=u,v=null;if(i){if(o>i||u>i){const Y=Math.min(i/o,i/u);p=Math.floor(o*Y),m=Math.floor(u*Y)}v=document.createElement("canvas");const x=v.width=Math.ceil(p*c.sx),C=v.height=Math.ceil(m*c.sy);a(this,Xn)||(f=E(this,Bt,np).call(this,x,C));const k=v.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",L="#cfcfd8";this._uiManager.hcmFilter!=="none"?L="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",L="#42414d");const O=15,D=O*c.sx,z=O*c.sy,H=new OffscreenCanvas(D*2,z*2),B=H.getContext("2d");B.fillStyle=T,B.fillRect(0,0,D*2,z*2),B.fillStyle=L,B.fillRect(0,0,D,z),B.fillRect(D,z,D,z),k.fillStyle=k.createPattern(H,"repeat"),k.fillRect(0,0,x,C),k.drawImage(f,0,0,f.width,f.height,0,0,x,C)}let w=null;if(r){let x,C;if(c.symmetric&&f.width<e&&f.height<e)x=f.width,C=f.height;else if(f=a(this,ce),o>e||u>e){const L=Math.min(e/o,e/u);x=Math.floor(o*L),C=Math.floor(u*L),a(this,Xn)||(f=E(this,Bt,np).call(this,x,C))}const T=new OffscreenCanvas(x,C).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,x,C),w={width:x,height:C,data:T.getImageData(0,0,x,C).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return a(this,as)}static async deserialize(e,i,r){var C;let o=null;if(e instanceof Ob){const{data:{rect:k,rotation:T,id:L,structParent:O,popupRef:D},container:z,parent:{page:{pageNumber:H}}}=e,B=z.querySelector("canvas"),Y=r.imageManager.getFromCanvas(z.id,B);B.remove();const Z=((C=await i._structTree.getAriaAttributes(`${wv}${L}`))==null?void 0:C.get("aria-label"))||"";o=e={annotationType:Tt.STAMP,bitmapId:Y.id,bitmap:Y.bitmap,pageIndex:H-1,rect:k.slice(0),rotation:T,id:L,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:O,popupRef:D}}const u=await super.deserialize(e,i,r),{rect:c,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=e;m&&r.imageManager.isValidId(m)?(A(u,We,m),f&&A(u,ce,f)):A(u,Gs,p),A(u,Xn,v);const[S,x]=u.pageDimensions;return u.width=(c[2]-c[0])/S,u.height=(c[3]-c[1])/x,u.annotationElementId=e.id||null,w&&(u.altTextData=w),u._initialData=o,A(u,wu,!!o),u}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Tt.STAMP,bitmapId:a(this,We),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Xn),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=E(this,Bt,ip).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:u}=this.serializeAltText(!1);if(!o&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=E(this,Bt,m1).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const c=a(this,Xn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(a(this,We)))i.stamps.set(a(this,We),{area:c,serialized:r}),r.bitmap=E(this,Bt,ip).call(this,!1);else if(a(this,Xn)){const f=i.stamps.get(a(this,We));c>f.area&&(f.area=c,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,Bt,ip).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ce=new WeakMap,We=new WeakMap,Xr=new WeakMap,Gs=new WeakMap,qr=new WeakMap,vu=new WeakMap,as=new WeakMap,ls=new WeakMap,Xn=new WeakMap,wu=new WeakMap,Bt=new WeakSet,Tc=function(e,i=!1){if(!e){this.remove();return}A(this,ce,e.bitmap),i||(A(this,We,e.id),A(this,Xn,e.isSvg)),e.file&&A(this,vu,e.file.name),E(this,Bt,sv).call(this)},Pc=function(){if(A(this,Xr,null),this._uiManager.enableWaiting(!1),!!a(this,as)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ce)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,ce)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ep=function(){if(a(this,We)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,We)).then(r=>E(this,Bt,Tc).call(this,r,!0)).finally(()=>E(this,Bt,Pc).call(this));return}if(a(this,Gs)){const r=a(this,Gs);A(this,Gs,null),this._uiManager.enableWaiting(!0),A(this,Xr,this._uiManager.imageManager.getFromUrl(r).then(o=>E(this,Bt,Tc).call(this,o)).finally(()=>E(this,Bt,Pc).call(this)));return}if(a(this,qr)){const r=a(this,qr);A(this,qr,null),this._uiManager.enableWaiting(!0),A(this,Xr,this._uiManager.imageManager.getFromFile(r).then(o=>E(this,Bt,Tc).call(this,o)).finally(()=>E(this,Bt,Pc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Mc.supportedTypesStr;const i=this._uiManager._signal;A(this,Xr,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Bt,Tc).call(this,o)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>E(this,Bt,Pc).call(this))),e.click()},sv=function(){var v;const{div:e}=this;let{width:i,height:r}=a(this,ce);const[o,u]=this.pageDimensions,c=.75;if(this.width)i=this.width*o,r=this.height*u;else if(i>c*o||r>c*u){const w=Math.min(c*o/i,c*u/r);i*=w,r*=w}const[f,p]=this.parentDimensions;this.setDims(i*f/o,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,as,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=i/o,this.height=r/u,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,Bt,rv).call(this),a(this,wu)||(this.parent.addUndoableEditor(this),A(this,wu,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,vu)&&m.setAttribute("aria-label",a(this,vu))},np=function(e,i){const{width:r,height:o}=a(this,ce);let u=r,c=o,f=a(this,ce);for(;u>2*e||c>2*i;){const p=u,m=c;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const v=new OffscreenCanvas(u,c);v.getContext("2d").drawImage(f,0,0,p,m,0,0,u,c),f=v.transferToImageBitmap()}return f},rv=function(){const[e,i]=this.parentDimensions,{width:r,height:o}=this,u=new ey,c=Math.ceil(r*e*u.sx),f=Math.ceil(o*i*u.sy),p=a(this,as);if(!p||p.width===c&&p.height===f)return;p.width=c,p.height=f;const m=a(this,Xn)?a(this,ce):E(this,Bt,np).call(this,c,f),v=p.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,c,f)},ip=function(e){if(e){if(a(this,Xn)){const o=this._uiManager.imageManager.getSvgUrl(a(this,We));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,ce),i.getContext("2d").drawImage(a(this,ce),0,0),i.toDataURL()}if(a(this,Xn)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*to.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*to.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(o,u);return c.getContext("2d").drawImage(a(this,ce),0,0,a(this,ce).width,a(this,ce).height,0,0,o,u),c.transferToImageBitmap()}return structuredClone(a(this,ce))},m1=function(e){var c;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,o=e.pageIndex===i,u=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&u,isSameAltText:u}},vt(Mc,"_type","stamp"),vt(Mc,"_editorType",Tt.STAMP);let iv=Mc;var _a,Au,us,Yr,Xs,hi,Kr,Su,Ea,Ni,qs,sn,Ys,ft,Qr,oe,y1,Gi,av,lv,sp;const bi=class bi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:o,annotationLayer:u,drawLayer:c,textLayer:f,viewport:p,l10n:m}){_(this,oe);_(this,_a);_(this,Au,!1);_(this,us,null);_(this,Yr,null);_(this,Xs,null);_(this,hi,new Map);_(this,Kr,!1);_(this,Su,!1);_(this,Ea,!1);_(this,Ni,null);_(this,qs,null);_(this,sn,null);_(this,Ys,null);_(this,ft);const v=[...a(bi,Qr).values()];if(!bi._initialized){bi._initialized=!0;for(const w of v)w.initialize(m,t)}t.registerEditorTypes(v),A(this,ft,t),this.pageIndex=e,this.div=i,A(this,_a,o),A(this,us,u),this.viewport=p,A(this,sn,f),this.drawLayer=c,this._structTree=r,a(this,ft).addLayer(this)}get isEmpty(){return a(this,hi).size===0}get isInvisible(){return this.isEmpty&&a(this,ft).getMode()===Tt.NONE}updateToolbar(t){a(this,ft).updateToolbar(t)}updateMode(t=a(this,ft).getMode()){switch(E(this,oe,sp).call(this),t){case Tt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of a(bi,Qr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,sn))==null?void 0:e.div)}setEditingState(t){a(this,ft).setEditingState(t)}addCommands(t){a(this,ft).addCommands(t)}cleanUndoStack(t){a(this,ft).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,us))==null||e.div.classList.toggle("disabled",!t)}async enable(){A(this,Ea,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of a(this,hi).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(a(this,ft).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!a(this,us)){A(this,Ea,!1);return}const e=a(this,us).getEditableAnnotations();for(const i of e){if(i.hide(),a(this,ft).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,Ea,!1)}disable(){var r;A(this,Su,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const o of a(this,hi).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(a(this,us)){const o=a(this,us).getEditableAnnotations();for(const u of o){const{id:c}=u.data;if(a(this,ft).isDeletedAnnotationElement(c))continue;let f=e.get(c);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(c),f&&(a(this,ft).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}E(this,oe,sp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of a(bi,Qr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,Su,!1)}getEditableAnnotation(t){var e;return((e=a(this,us))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,ft).getActive()!==t&&a(this,ft).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,sn))!=null&&t.div&&!a(this,Ys)){A(this,Ys,new AbortController);const e=a(this,ft).combinedSignal(a(this,Ys));a(this,sn).div.addEventListener("pointerdown",E(this,oe,y1).bind(this),{signal:e}),a(this,sn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,sn))!=null&&t.div&&a(this,Ys)&&(a(this,Ys).abort(),A(this,Ys,null),a(this,sn).div.classList.remove("highlighting"))}enableClick(){if(a(this,Yr))return;A(this,Yr,new AbortController);const t=a(this,ft).combinedSignal(a(this,Yr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,Yr))==null||t.abort(),A(this,Yr,null)}attach(t){a(this,hi).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,ft).isDeletedAnnotationElement(e)&&a(this,ft).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,hi).delete(t.id),(e=a(this,_a))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,Su)&&t.annotationElementId&&a(this,ft).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,ft).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,ft).addDeletedAnnotationElement(t.annotationElementId),he.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,ft).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,Ea)),a(this,ft).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Xs)&&(t._focusEventsAllowed=!1,A(this,Xs,setTimeout(()=>{A(this,Xs,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,ft)._signal}),e.focus())},0))),t._structTreeParentId=(i=a(this,_a))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return a(this,ft).getId()}combinedSignal(t){return a(this,ft).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,oe,Gi))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){a(this,ft).updateToolbar(t),a(this,ft).updateMode(t);const{offsetX:i,offsetY:r}=E(this,oe,lv).call(this),o=this.getNextId(),u=E(this,oe,av).call(this,{parent:this,id:o,x:i,y:r,uiManager:a(this,ft),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=a(bi,Qr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,ft)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),o=E(this,oe,av).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:a(this,ft),isCentered:e,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(E(this,oe,lv).call(this),!0)}setSelected(t){a(this,ft).setSelected(t)}toggleSelected(t){a(this,ft).toggleSelected(t)}unselect(t){a(this,ft).unselect(t)}pointerup(t){var i;const{isMac:e}=mn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&a(this,Kr)&&(A(this,Kr,!1),!((i=a(this,oe,Gi))!=null&&i.isDrawer&&a(this,oe,Gi).supportMultipleDrawings))){if(!a(this,Au)){A(this,Au,!0);return}if(a(this,ft).getMode()===Tt.STAMP){a(this,ft).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var r;if(a(this,ft).getMode()===Tt.HIGHLIGHT&&this.enableTextSelection(),a(this,Kr)){A(this,Kr,!1);return}const{isMac:e}=mn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Kr,!0),(r=a(this,oe,Gi))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=a(this,ft).getActive();A(this,Au,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),a(this,Ni)){a(this,oe,Gi).startDrawing(this,a(this,ft),!1,t);return}a(this,ft).setCurrentDrawingSession(this),A(this,Ni,new AbortController);const e=a(this,ft).combinedSignal(a(this,Ni));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(A(this,qs,null),this.commitOrRemove())},{signal:e}),a(this,oe,Gi).startDrawing(this,a(this,ft),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,qs,e);return}a(this,qs)&&setTimeout(()=>{var e;(e=a(this,qs))==null||e.focus(),A(this,qs,null)},0)}endDrawingSession(t=!1){return a(this,Ni)?(a(this,ft).setCurrentDrawingSession(null),a(this,Ni).abort(),A(this,Ni,null),A(this,qs,null),a(this,oe,Gi).endDrawing(t)):null}findNewParent(t,e,i){const r=a(this,ft).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return a(this,Ni)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Ni)&&a(this,oe,Gi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,ft).getActive())==null?void 0:t.parent)===this&&(a(this,ft).commitOrRemove(),a(this,ft).setActiveEditor(null)),a(this,Xs)&&(clearTimeout(a(this,Xs)),A(this,Xs,null));for(const i of a(this,hi).values())(e=a(this,_a))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,hi).clear(),a(this,ft).removeLayer(this)}render({viewport:t}){this.viewport=t,ka(this.div,t);for(const e of a(this,ft).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,ft).commitOrRemove(),E(this,oe,sp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ka(this.div,{rotation:i}),e!==i)for(const r of a(this,hi).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,ft).viewParameters.realScale}};_a=new WeakMap,Au=new WeakMap,us=new WeakMap,Yr=new WeakMap,Xs=new WeakMap,hi=new WeakMap,Kr=new WeakMap,Su=new WeakMap,Ea=new WeakMap,Ni=new WeakMap,qs=new WeakMap,sn=new WeakMap,Ys=new WeakMap,ft=new WeakMap,Qr=new WeakMap,oe=new WeakSet,y1=function(t){a(this,ft).unselectAll();const{target:e}=t;if(e===a(this,sn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,sn).div.contains(e)){const{isMac:i}=mn.platform;if(t.button!==0||t.ctrlKey&&i)return;a(this,ft).showAllEditors("highlight",!0,!0),a(this,sn).div.classList.add("free"),this.toggleDrawing(),hp.startHighlighting(this,a(this,ft).direction==="ltr",{target:a(this,sn).div,x:t.x,y:t.y}),a(this,sn).div.addEventListener("pointerup",()=>{a(this,sn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,ft)._signal}),t.preventDefault()}},Gi=function(){return a(bi,Qr).get(a(this,ft).getMode())},av=function(t){const e=a(this,oe,Gi);return e?new e.prototype.constructor(t):null},lv=function(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,t),u=Math.max(0,e),c=Math.min(window.innerWidth,t+i),f=Math.min(window.innerHeight,e+r),p=(o+c)/2-t,m=(u+f)/2-e,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},sp=function(){for(const t of a(this,hi).values())t.isEmpty()&&t.remove()},vt(bi,"_initialized",!1),_(bi,Qr,new Map([By,nv,iv,hp].map(t=>[t._editorType,t])));let ov=bi;var Di,od,gn,xa,Mp,v1,cs,cv,w1,hv;const Je=class Je{constructor({pageIndex:t}){_(this,cs);_(this,Di,null);_(this,od,0);_(this,gn,new Map);_(this,xa,new Map);this.pageIndex=t}setParent(t){if(!a(this,Di)){A(this,Di,t);return}if(a(this,Di)!==t){if(a(this,gn).size>0)for(const e of a(this,gn).values())e.remove(),t.append(e);A(this,Di,t)}}static get _svgFactory(){return Dt(this,"_svgFactory",new Cv)}draw(t,e=!1,i=!1){const r=cn(this,od)._++,o=E(this,cs,cv).call(this),u=Je._svgFactory.createElement("defs");o.append(u);const c=Je._svgFactory.createElement("path");u.append(c);const f=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",f),c.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,xa).set(r,c);const p=i?E(this,cs,w1).call(this,u,f):null,m=Je._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(o,t),a(this,gn).set(r,o),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=cn(this,od)._++,r=E(this,cs,cv).call(this),o=Je._svgFactory.createElement("defs");r.append(o);const u=Je._svgFactory.createElement("path");o.append(u);const c=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const v=Je._svgFactory.createElement("mask");o.append(v),f=`mask_p${this.pageIndex}_${i}`,v.setAttribute("id",f),v.setAttribute("maskUnits","objectBoundingBox");const w=Je._svgFactory.createElement("rect");v.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const S=Je._svgFactory.createElement("use");v.append(S),S.setAttribute("href",`#${c}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const p=Je._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),a(this,gn).set(i,r),i}finalizeDraw(t,e){a(this,xa).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:i,bbox:r,rootClass:o,path:u}=e,c=typeof t=="number"?a(this,gn).get(t):t;if(c){if(i&&E(this,cs,hv).call(this,c,i),r&&E(f=Je,Mp,v1).call(f,c,r),o){const{classList:p}=c;for(const[m,v]of Object.entries(o))p.toggle(m,v)}if(u){const m=c.firstChild.firstChild;E(this,cs,hv).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const i=a(this,gn).get(t);i&&(a(e,Di).append(i),a(this,gn).delete(t),a(e,gn).set(t,i))}remove(t){a(this,xa).delete(t),a(this,Di)!==null&&(a(this,gn).get(t).remove(),a(this,gn).delete(t))}destroy(){A(this,Di,null);for(const t of a(this,gn).values())t.remove();a(this,gn).clear(),a(this,xa).clear()}};Di=new WeakMap,od=new WeakMap,gn=new WeakMap,xa=new WeakMap,Mp=new WeakSet,v1=function(t,[e,i,r,o]){const{style:u}=t;u.top=`${100*i}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*o}%`},cs=new WeakSet,cv=function(){const t=Je._svgFactory.create(1,1,!0);return a(this,Di).append(t),t.setAttribute("aria-hidden",!0),t},w1=function(t,e){const i=Je._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Je._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),r},hv=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},_(Je,Mp);let uv=Je;globalThis.pdfjsTestingUtils={HighlightOutliner:Uy};Et.AbortException;Et.AnnotationEditorLayer;Et.AnnotationEditorParamsType;Et.AnnotationEditorType;Et.AnnotationEditorUIManager;Et.AnnotationLayer;Et.AnnotationMode;Et.ColorPicker;Et.DOMSVGFactory;Et.DrawLayer;Et.FeatureTest;var KC=Et.GlobalWorkerOptions;Et.ImageKind;Et.InvalidPDFException;Et.MissingPDFException;Et.OPS;Et.OutputScale;Et.PDFDataRangeTransport;Et.PDFDateString;Et.PDFWorker;Et.PasswordResponses;Et.PermissionFlag;Et.PixelsPerInch;Et.RenderingCancelledException;Et.TextLayer;Et.TouchManager;Et.UnexpectedResponseException;Et.Util;Et.VerbosityLevel;Et.XfaLayer;Et.build;Et.createValidAbsoluteUrl;Et.fetchData;Et.getDocument;Et.getFilenameFromUrl;Et.getPdfFilenameFromUrl;Et.getXfaPageViewport;Et.isDataScheme;Et.isPdfFile;Et.noContextMenu;Et.normalizeUnicode;Et.setLayerDimensions;Et.shadow;Et.stopEvent;Et.version;const QC="_showData_1lhgj_1",ZC={showData:QC};KC.workerSrc="../pdf.worker.mjs";const Tf=["numer faktury","kwotę faktury","termin płatności","nazwę kontrachenta","datę faktury"],JC=()=>{const[d,t]=Kt.useState(null),[e,i]=Kt.useState(null),[r,o]=Kt.useState(null),[u,c]=Kt.useState([]),[f,p]=Kt.useState(null),[m,v]=Kt.useState(null),[w,S]=Kt.useState("numer faktury"),[x,C]=Kt.useState(!1),[k,T]=Kt.useState(null),L=z=>{if(z.target.files){const H=Array.from(z.target.files);console.log(H),t({files:H}),C(!0),c([])}},O=z=>{const H=z.target;i(H.textContent)},D=Kt.useCallback(async z=>{try{console.log("wysyłam plik");const H=await fetch("http://localhost:3000/newCompanyData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)});if(console.log(z),H.ok){const B=await H.json();return console.log("Plik wysłany pomyślnie:",B),B.files}else console.error("Błąd podczas wysyłania:",H.statusText)}catch(H){console.error("Wystąpił błąd:",H)}},[]);return Kt.useEffect(()=>{if(e&&m&&u.length<5){let z=!1;for(let H=0;H<m.length;H++){if(e===m[H]){console.log(2);const B=u;B.push(m[H-1]);const Y=B.length;c(B),console.log(B),console.log(Tf[Y]);const Z=wt.jsxs(wt.Fragment,{children:[wt.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),wt.jsxs("p",{children:[" zaznacz ",Tf[Y]]})]});if(T(Z),B.length===Tf.length){const st={[B[3]]:{name:[B[3]],paymentText:[B[2]],valueText:[B[1]],invoiceNo:[B[0]],invoiceDate:[B[4]],fullName:B[3]}};console.log(st),S(Tf[0]),console.log(u),z=!0;const tt=wt.jsxs(wt.Fragment,{children:[wt.jsx("p",{children:" Wszystkie dane zostały zapisane. Kliknij aby wysłać"}),wt.jsx("button",{onClick:()=>{console.log("Przekazywane dane:",st),D(st)},children:"Wyślij dane do weryfikacji"})]});T(tt)}break}if(z)break}}},[e,m,u,D]),Kt.useEffect(()=>{if(d&&x===!0){C(!1);const z=[];let H=[];const B=async()=>{const Z=new FormData;Array.from(d.files).forEach(st=>{Z.append("files",st,st.name),console.log(st),z.push(URL.createObjectURL(st))}),H=z.map((st,tt)=>{const _t=d.files[tt];return _t.type==="image/jpeg"?wt.jsx("img",{src:st,alt:"uploaded"},tt):_t.type==="application/pdf"?wt.jsx("embed",{src:st,width:"100%",height:"500px",type:"application/pdf"},tt):wt.jsx("div",{children:"wrong file"})}),console.log(H),o(H);try{console.log("wysyłam");const st=await fetch("http://localhost:3000/ask",{method:"POST",body:Z});if(st.ok){const tt=await st.json();return console.log("Plik wysłany pomyślnie:",tt.files),tt.files}else console.error("Błąd podczas wysyłania:",st.statusText)}catch(st){console.error("Wystąpił błąd:",st)}};(async()=>{const Z=await B(),st=Z[0].data.name;if(Z&&st){const tt=Z.map((_t,Mt)=>wt.jsxs("div",{children:[wt.jsxs("div",{children:[wt.jsx("p",{children:"Nazwa Firmy:"}),wt.jsx("p",{children:_t.data.name})]}),wt.jsxs("div",{children:[wt.jsx("p",{children:"Numer faktury:"}),wt.jsx("p",{children:_t.data.invoiceNo})]}),wt.jsxs("div",{children:[wt.jsx("p",{children:"Data faktury:"}),wt.jsx("p",{children:_t.data.invoiceDate})]}),wt.jsxs("div",{children:[wt.jsx("p",{children:"Kwota:"}),wt.jsx("p",{children:_t.data.value})]}),wt.jsxs("div",{children:[wt.jsx("p",{children:"Termin płatności:"}),wt.jsx("p",{children:_t.data.paymentDate})]})]},Mt));p(tt)}else{let tt=Z&&Z[0].data.foundText;console.log(tt),tt=tt.filter(Ut=>Ut!=""),console.log(tt),v(tt);const _t=wt.jsxs(wt.Fragment,{children:[wt.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),wt.jsxs("p",{children:[" zaznacz ",w]})]}),Mt=tt.map((Ut,q)=>wt.jsx("button",{onClick:O,children:Ut},q)),xt=wt.jsx("div",{children:wt.jsx("div",{children:Mt})});T(_t),p(xt)}})()}},[d,p,w,x]),wt.jsxs("div",{className:"App",children:[wt.jsx("h1",{children:"Extract Text from PDF or Image"}),wt.jsx("input",{type:"file",multiple:!0,accept:".pdf,image/*",onChange:L}),f&&wt.jsxs("div",{className:ZC.showData,children:[wt.jsxs("div",{children:[wt.jsx("h2",{children:"Found Invoice Data:"}),k,f]}),wt.jsx("div",{children:r})]})]})};xE.createRoot(document.getElementById("root")).render(wt.jsx(Kt.StrictMode,{children:wt.jsx(SS,{children:wt.jsx(JC,{})})}));
