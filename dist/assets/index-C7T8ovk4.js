var mE=Object.defineProperty;var PA=d=>{throw TypeError(d)};var yE=(d,t,e)=>t in d?mE(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var wt=(d,t,e)=>yE(d,typeof t!="symbol"?t+"":t,e),Nm=(d,t,e)=>t.has(d)||PA("Cannot "+e);var o=(d,t,e)=>(Nm(d,t,"read from private field"),e?e.call(d):t.get(d)),_=(d,t,e)=>t.has(d)?PA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(d):t.set(d,e),A=(d,t,e,i)=>(Nm(d,t,"write to private field"),i?i.call(d,e):t.set(d,e),e),E=(d,t,e)=>(Nm(d,t,"access private method"),e);var hn=(d,t,e,i)=>({set _(r){A(d,t,r,e)},get _(){return o(d,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();var Dm={exports:{}},lc={},Fm={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function vE(){if(RA)return Nt;RA=1;var d=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function k(L,H,dt){this.props=L,this.context=H,this.refs=C,this.updater=dt||S}k.prototype.isReactComponent={},k.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},k.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function T(){}T.prototype=k.prototype;function I(L,H,dt){this.props=L,this.context=H,this.refs=C,this.updater=dt||S}var O=I.prototype=new T;O.constructor=I,x(O,k.prototype),O.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,B={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function K(L,H,dt){var kt,It={},bt=null,vt=null;if(H!=null)for(kt in H.ref!==void 0&&(vt=H.ref),H.key!==void 0&&(bt=""+H.key),H)z.call(H,kt)&&!j.hasOwnProperty(kt)&&(It[kt]=H[kt]);var Ot=arguments.length-2;if(Ot===1)It.children=dt;else if(1<Ot){for(var Kt=Array(Ot),ln=0;ln<Ot;ln++)Kt[ln]=arguments[ln+2];It.children=Kt}if(L&&L.defaultProps)for(kt in Ot=L.defaultProps,Ot)It[kt]===void 0&&(It[kt]=Ot[kt]);return{$$typeof:d,type:L,key:bt,ref:vt,props:It,_owner:B.current}}function st(L,H){return{$$typeof:d,type:L.type,key:H,ref:L.ref,props:L.props,_owner:L._owner}}function St(L){return typeof L=="object"&&L!==null&&L.$$typeof===d}function tt(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(dt){return H[dt]})}var ct=/\/+/g;function Et(L,H){return typeof L=="object"&&L!==null&&L.key!=null?tt(""+L.key):H.toString(36)}function Ct(L,H,dt,kt,It){var bt=typeof L;(bt==="undefined"||bt==="boolean")&&(L=null);var vt=!1;if(L===null)vt=!0;else switch(bt){case"string":case"number":vt=!0;break;case"object":switch(L.$$typeof){case d:case t:vt=!0}}if(vt)return vt=L,It=It(vt),L=kt===""?"."+Et(vt,0):kt,D(It)?(dt="",L!=null&&(dt=L.replace(ct,"$&/")+"/"),Ct(It,H,dt,"",function(ln){return ln})):It!=null&&(St(It)&&(It=st(It,dt+(!It.key||vt&&vt.key===It.key?"":(""+It.key).replace(ct,"$&/")+"/")+L)),H.push(It)),1;if(vt=0,kt=kt===""?".":kt+":",D(L))for(var Ot=0;Ot<L.length;Ot++){bt=L[Ot];var Kt=kt+Et(bt,Ot);vt+=Ct(bt,H,dt,Kt,It)}else if(Kt=w(L),typeof Kt=="function")for(L=Kt.call(L),Ot=0;!(bt=L.next()).done;)bt=bt.value,Kt=kt+Et(bt,Ot++),vt+=Ct(bt,H,dt,Kt,It);else if(bt==="object")throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return vt}function Lt(L,H,dt){if(L==null)return L;var kt=[],It=0;return Ct(L,kt,"","",function(bt){return H.call(dt,bt,It++)}),kt}function Y(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(dt){(L._status===0||L._status===-1)&&(L._status=1,L._result=dt)},function(dt){(L._status===0||L._status===-1)&&(L._status=2,L._result=dt)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var G={current:null},U={transition:null},it={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:U,ReactCurrentOwner:B};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Nt.Children={map:Lt,forEach:function(L,H,dt){Lt(L,function(){H.apply(this,arguments)},dt)},count:function(L){var H=0;return Lt(L,function(){H++}),H},toArray:function(L){return Lt(L,function(H){return H})||[]},only:function(L){if(!St(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Nt.Component=k,Nt.Fragment=e,Nt.Profiler=r,Nt.PureComponent=I,Nt.StrictMode=i,Nt.Suspense=f,Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=it,Nt.act=Q,Nt.cloneElement=function(L,H,dt){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var kt=x({},L.props),It=L.key,bt=L.ref,vt=L._owner;if(H!=null){if(H.ref!==void 0&&(bt=H.ref,vt=B.current),H.key!==void 0&&(It=""+H.key),L.type&&L.type.defaultProps)var Ot=L.type.defaultProps;for(Kt in H)z.call(H,Kt)&&!j.hasOwnProperty(Kt)&&(kt[Kt]=H[Kt]===void 0&&Ot!==void 0?Ot[Kt]:H[Kt])}var Kt=arguments.length-2;if(Kt===1)kt.children=dt;else if(1<Kt){Ot=Array(Kt);for(var ln=0;ln<Kt;ln++)Ot[ln]=arguments[ln+2];kt.children=Ot}return{$$typeof:d,type:L.type,key:It,ref:bt,props:kt,_owner:vt}},Nt.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:a,_context:L},L.Consumer=L},Nt.createElement=K,Nt.createFactory=function(L){var H=K.bind(null,L);return H.type=L,H},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(L){return{$$typeof:c,render:L}},Nt.isValidElement=St,Nt.lazy=function(L){return{$$typeof:m,_payload:{_status:-1,_result:L},_init:Y}},Nt.memo=function(L,H){return{$$typeof:p,type:L,compare:H===void 0?null:H}},Nt.startTransition=function(L){var H=U.transition;U.transition={};try{L()}finally{U.transition=H}},Nt.unstable_act=Q,Nt.useCallback=function(L,H){return G.current.useCallback(L,H)},Nt.useContext=function(L){return G.current.useContext(L)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(L){return G.current.useDeferredValue(L)},Nt.useEffect=function(L,H){return G.current.useEffect(L,H)},Nt.useId=function(){return G.current.useId()},Nt.useImperativeHandle=function(L,H,dt){return G.current.useImperativeHandle(L,H,dt)},Nt.useInsertionEffect=function(L,H){return G.current.useInsertionEffect(L,H)},Nt.useLayoutEffect=function(L,H){return G.current.useLayoutEffect(L,H)},Nt.useMemo=function(L,H){return G.current.useMemo(L,H)},Nt.useReducer=function(L,H,dt){return G.current.useReducer(L,H,dt)},Nt.useRef=function(L){return G.current.useRef(L)},Nt.useState=function(L){return G.current.useState(L)},Nt.useSyncExternalStore=function(L,H,dt){return G.current.useSyncExternalStore(L,H,dt)},Nt.useTransition=function(){return G.current.useTransition()},Nt.version="18.3.1",Nt}var MA;function fv(){return MA||(MA=1,Fm.exports=vE()),Fm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA;function wE(){if(LA)return lc;LA=1;var d=fv(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(c,f,p){var m,v={},w=null,S=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(S=f.ref);for(m in f)i.call(f,m)&&!a.hasOwnProperty(m)&&(v[m]=f[m]);if(c&&c.defaultProps)for(m in f=c.defaultProps,f)v[m]===void 0&&(v[m]=f[m]);return{$$typeof:t,type:c,key:w,ref:S,props:v,_owner:r.current}}return lc.Fragment=e,lc.jsx=u,lc.jsxs=u,lc}var IA;function AE(){return IA||(IA=1,Dm.exports=wE()),Dm.exports}var yt=AE(),Vt=fv(),_f={},Om={exports:{}},xn={},$m={exports:{}},zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function SE(){return NA||(NA=1,function(d){function t(U,it){var Q=U.length;U.push(it);t:for(;0<Q;){var L=Q-1>>>1,H=U[L];if(0<r(H,it))U[L]=it,U[Q]=H,Q=L;else break t}}function e(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var it=U[0],Q=U.pop();if(Q!==it){U[0]=Q;t:for(var L=0,H=U.length,dt=H>>>1;L<dt;){var kt=2*(L+1)-1,It=U[kt],bt=kt+1,vt=U[bt];if(0>r(It,Q))bt<H&&0>r(vt,It)?(U[L]=vt,U[bt]=Q,L=bt):(U[L]=It,U[kt]=Q,L=kt);else if(bt<H&&0>r(vt,Q))U[L]=vt,U[bt]=Q,L=bt;else break t}}return it}function r(U,it){var Q=U.sortIndex-it.sortIndex;return Q!==0?Q:U.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;d.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();d.unstable_now=function(){return u.now()-c}}var f=[],p=[],m=1,v=null,w=3,S=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(U){for(var it=e(p);it!==null;){if(it.callback===null)i(p);else if(it.startTime<=U)i(p),it.sortIndex=it.expirationTime,t(f,it);else break;it=e(p)}}function D(U){if(C=!1,O(U),!x)if(e(f)!==null)x=!0,Y(z);else{var it=e(p);it!==null&&G(D,it.startTime-U)}}function z(U,it){x=!1,C&&(C=!1,T(K),K=-1),S=!0;var Q=w;try{for(O(it),v=e(f);v!==null&&(!(v.expirationTime>it)||U&&!tt());){var L=v.callback;if(typeof L=="function"){v.callback=null,w=v.priorityLevel;var H=L(v.expirationTime<=it);it=d.unstable_now(),typeof H=="function"?v.callback=H:v===e(f)&&i(f),O(it)}else i(f);v=e(f)}if(v!==null)var dt=!0;else{var kt=e(p);kt!==null&&G(D,kt.startTime-it),dt=!1}return dt}finally{v=null,w=Q,S=!1}}var B=!1,j=null,K=-1,st=5,St=-1;function tt(){return!(d.unstable_now()-St<st)}function ct(){if(j!==null){var U=d.unstable_now();St=U;var it=!0;try{it=j(!0,U)}finally{it?Et():(B=!1,j=null)}}else B=!1}var Et;if(typeof I=="function")Et=function(){I(ct)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,Lt=Ct.port2;Ct.port1.onmessage=ct,Et=function(){Lt.postMessage(null)}}else Et=function(){k(ct,0)};function Y(U){j=U,B||(B=!0,Et())}function G(U,it){K=k(function(){U(d.unstable_now())},it)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(U){U.callback=null},d.unstable_continueExecution=function(){x||S||(x=!0,Y(z))},d.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):st=0<U?Math.floor(1e3/U):5},d.unstable_getCurrentPriorityLevel=function(){return w},d.unstable_getFirstCallbackNode=function(){return e(f)},d.unstable_next=function(U){switch(w){case 1:case 2:case 3:var it=3;break;default:it=w}var Q=w;w=it;try{return U()}finally{w=Q}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(U,it){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=w;w=U;try{return it()}finally{w=Q}},d.unstable_scheduleCallback=function(U,it,Q){var L=d.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?L+Q:L):Q=L,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,U={id:m++,callback:it,priorityLevel:U,startTime:Q,expirationTime:H,sortIndex:-1},Q>L?(U.sortIndex=Q,t(p,U),e(f)===null&&U===e(p)&&(C?(T(K),K=-1):C=!0,G(D,Q-L))):(U.sortIndex=H,t(f,U),x||S||(x=!0,Y(z))),U},d.unstable_shouldYield=tt,d.unstable_wrapCallback=function(U){var it=w;return function(){var Q=w;w=it;try{return U.apply(this,arguments)}finally{w=Q}}}}(zm)),zm}var DA;function bE(){return DA||(DA=1,$m.exports=SE()),$m.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FA;function _E(){if(FA)return xn;FA=1;var d=fv(),t=bE();function e(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function a(n,s){u(n,s),u(n+"Capture",s)}function u(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return f.call(v,n)?!0:f.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function S(n,s,l,h){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:l!==null?!l.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x(n,s,l,h){if(s===null||typeof s>"u"||S(n,s,l,h))return!0;if(h)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function C(n,s,l,h,g,y,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=l,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=b}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){k[n]=new C(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];k[s]=new C(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){k[n]=new C(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){k[n]=new C(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){k[n]=new C(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){k[n]=new C(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){k[n]=new C(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){k[n]=new C(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){k[n]=new C(n,5,!1,n.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function I(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(T,I);k[s]=new C(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(T,I);k[s]=new C(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(T,I);k[s]=new C(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!1,!1)}),k.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){k[n]=new C(n,1,!1,n.toLowerCase(),null,!0,!0)});function O(n,s,l,h){var g=k.hasOwnProperty(s)?k[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(x(s,l,g,h)&&(l=null),h||g===null?w(s)&&(l===null?n.removeAttribute(s):n.setAttribute(s,""+l)):g.mustUseProperty?n[g.propertyName]=l===null?g.type===3?!1:"":l:(s=g.attributeName,h=g.attributeNamespace,l===null?n.removeAttribute(s):(g=g.type,l=g===3||g===4&&l===!0?"":""+l,h?n.setAttributeNS(h,s,l):n.setAttribute(s,l))))}var D=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),B=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),st=Symbol.for("react.profiler"),St=Symbol.for("react.provider"),tt=Symbol.for("react.context"),ct=Symbol.for("react.forward_ref"),Et=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),Lt=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),U=Symbol.iterator;function it(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Object.assign,L;function H(n){if(L===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var dt=!1;function kt(n,s){if(!n||dt)return"";dt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(n,[],s)}else{try{s.call()}catch($){h=$}n.call(s.prototype)}else{try{throw Error()}catch($){h=$}n()}}catch($){if($&&h&&typeof $.stack=="string"){for(var g=$.stack.split(`
`),y=h.stack.split(`
`),b=g.length-1,P=y.length-1;1<=b&&0<=P&&g[b]!==y[P];)P--;for(;1<=b&&0<=P;b--,P--)if(g[b]!==y[P]){if(b!==1||P!==1)do if(b--,P--,0>P||g[b]!==y[P]){var R=`
`+g[b].replace(" at new "," at ");return n.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",n.displayName)),R}while(1<=b&&0<=P);break}}}finally{dt=!1,Error.prepareStackTrace=l}return(n=n?n.displayName||n.name:"")?H(n):""}function It(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=kt(n.type,!1),n;case 11:return n=kt(n.type.render,!1),n;case 1:return n=kt(n.type,!0),n;default:return""}}function bt(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case B:return"Portal";case st:return"Profiler";case K:return"StrictMode";case Et:return"Suspense";case Ct:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case tt:return(n.displayName||"Context")+".Consumer";case St:return(n._context.displayName||"Context")+".Provider";case ct:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Lt:return s=n.displayName||null,s!==null?s:bt(n.type)||"Memo";case Y:s=n._payload,n=n._init;try{return bt(n(s))}catch{}}return null}function vt(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bt(s);case 8:return s===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ot(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Kt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ln(n){var s=Kt(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(b){h=""+b,y.call(this,b)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(b){h=""+b},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function dd(n){n._valueTracker||(n._valueTracker=ln(n))}function Dv(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),h="";return n&&(h=Kt(n)?n.checked?"true":"false":n.value),n=h,n!==l?(s.setValue(n),!0):!1}function fd(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Bp(n,s){var l=s.checked;return Q({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??n._wrapperState.initialChecked})}function Fv(n,s){var l=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;l=Ot(s.value!=null?s.value:l),n._wrapperState={initialChecked:h,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ov(n,s){s=s.checked,s!=null&&O(n,"checked",s,!1)}function jp(n,s){Ov(n,s);var l=Ot(s.value),h=s.type;if(l!=null)h==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+l):n.value!==""+l&&(n.value=""+l);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Up(n,s.type,l):s.hasOwnProperty("defaultValue")&&Up(n,s.type,Ot(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function $v(n,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,l||s===n.value||(n.value=s),n.defaultValue=s}l=n.name,l!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,l!==""&&(n.name=l)}function Up(n,s,l){(s!=="number"||fd(n.ownerDocument)!==n)&&(l==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+l&&(n.defaultValue=""+l))}var _u=Array.isArray;function Io(n,s,l,h){if(n=n.options,s){s={};for(var g=0;g<l.length;g++)s["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=s.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&h&&(n[l].defaultSelected=!0)}else{for(l=""+Ot(l),s=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Vp(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(e(91));return Q({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zv(n,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(e(92));if(_u(l)){if(1<l.length)throw Error(e(93));l=l[0]}s=l}s==null&&(s=""),l=s}n._wrapperState={initialValue:Ot(l)}}function Hv(n,s){var l=Ot(s.value),h=Ot(s.defaultValue);l!=null&&(l=""+l,l!==n.value&&(n.value=l),s.defaultValue==null&&n.defaultValue!==l&&(n.defaultValue=l)),h!=null&&(n.defaultValue=""+h)}function Bv(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function jv(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wp(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?jv(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var pd,Uv=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,l,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(pd=pd||document.createElement("div"),pd.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=pd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Eu(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(xu).forEach(function(n){Sb.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),xu[s]=xu[n]})});function Vv(n,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||xu.hasOwnProperty(n)&&xu[n]?(""+s).trim():s+"px"}function Wv(n,s){n=n.style;for(var l in s)if(s.hasOwnProperty(l)){var h=l.indexOf("--")===0,g=Vv(l,s[l],h);l==="float"&&(l="cssFloat"),h?n.setProperty(l,g):n[l]=g}}var bb=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gp(n,s){if(s){if(bb[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(e(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(e(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(e(61))}if(s.style!=null&&typeof s.style!="object")throw Error(e(62))}}function Xp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qp=null;function Yp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Kp=null,No=null,Do=null;function Gv(n){if(n=Xu(n)){if(typeof Kp!="function")throw Error(e(280));var s=n.stateNode;s&&(s=Od(s),Kp(n.stateNode,n.type,s))}}function Xv(n){No?Do?Do.push(n):Do=[n]:No=n}function qv(){if(No){var n=No,s=Do;if(Do=No=null,Gv(n),s)for(n=0;n<s.length;n++)Gv(s[n])}}function Yv(n,s){return n(s)}function Kv(){}var Qp=!1;function Qv(n,s,l){if(Qp)return n(s,l);Qp=!0;try{return Yv(n,s,l)}finally{Qp=!1,(No!==null||Do!==null)&&(Kv(),qv())}}function Cu(n,s){var l=n.stateNode;if(l===null)return null;var h=Od(l);if(h===null)return null;l=h[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break t;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(e(231,s,typeof l));return l}var Zp=!1;if(c)try{var ku={};Object.defineProperty(ku,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",ku,ku),window.removeEventListener("test",ku,ku)}catch{Zp=!1}function _b(n,s,l,h,g,y,b,P,R){var $=Array.prototype.slice.call(arguments,3);try{s.apply(l,$)}catch(W){this.onError(W)}}var Tu=!1,gd=null,md=!1,Jp=null,Eb={onError:function(n){Tu=!0,gd=n}};function xb(n,s,l,h,g,y,b,P,R){Tu=!1,gd=null,_b.apply(Eb,arguments)}function Cb(n,s,l,h,g,y,b,P,R){if(xb.apply(this,arguments),Tu){if(Tu){var $=gd;Tu=!1,gd=null}else throw Error(e(198));md||(md=!0,Jp=$)}}function sa(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,s.flags&4098&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function Zv(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Jv(n){if(sa(n)!==n)throw Error(e(188))}function kb(n){var s=n.alternate;if(!s){if(s=sa(n),s===null)throw Error(e(188));return s!==n?null:n}for(var l=n,h=s;;){var g=l.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===l)return Jv(g),n;if(y===h)return Jv(g),s;y=y.sibling}throw Error(e(188))}if(l.return!==h.return)l=g,h=y;else{for(var b=!1,P=g.child;P;){if(P===l){b=!0,l=g,h=y;break}if(P===h){b=!0,h=g,l=y;break}P=P.sibling}if(!b){for(P=y.child;P;){if(P===l){b=!0,l=y,h=g;break}if(P===h){b=!0,h=y,l=g;break}P=P.sibling}if(!b)throw Error(e(189))}}if(l.alternate!==h)throw Error(e(190))}if(l.tag!==3)throw Error(e(188));return l.stateNode.current===l?n:s}function t0(n){return n=kb(n),n!==null?e0(n):null}function e0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=e0(n);if(s!==null)return s;n=n.sibling}return null}var n0=t.unstable_scheduleCallback,i0=t.unstable_cancelCallback,Tb=t.unstable_shouldYield,Pb=t.unstable_requestPaint,pe=t.unstable_now,Rb=t.unstable_getCurrentPriorityLevel,tg=t.unstable_ImmediatePriority,s0=t.unstable_UserBlockingPriority,yd=t.unstable_NormalPriority,Mb=t.unstable_LowPriority,r0=t.unstable_IdlePriority,vd=null,Hi=null;function Lb(n){if(Hi&&typeof Hi.onCommitFiberRoot=="function")try{Hi.onCommitFiberRoot(vd,n,void 0,(n.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:Db,Ib=Math.log,Nb=Math.LN2;function Db(n){return n>>>=0,n===0?32:31-(Ib(n)/Nb|0)|0}var wd=64,Ad=4194304;function Pu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Sd(n,s){var l=n.pendingLanes;if(l===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,b=l&268435455;if(b!==0){var P=b&~g;P!==0?h=Pu(P):(y&=b,y!==0&&(h=Pu(y)))}else b=l&~g,b!==0?h=Pu(b):y!==0&&(h=Pu(y));if(h===0)return 0;if(s!==0&&s!==h&&!(s&g)&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if(h&4&&(h|=l&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)l=31-mi(s),g=1<<l,h|=n[l],s&=~g;return h}function Fb(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ob(n,s){for(var l=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var b=31-mi(y),P=1<<b,R=g[b];R===-1?(!(P&l)||P&h)&&(g[b]=Fb(P,s)):R<=s&&(n.expiredLanes|=P),y&=~P}}function eg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function a0(){var n=wd;return wd<<=1,!(wd&4194240)&&(wd=64),n}function ng(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Ru(n,s,l){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-mi(s),n[s]=l}function $b(n,s){var l=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<l;){var g=31-mi(l),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,l&=~y}}function ig(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var h=31-mi(l),g=1<<h;g&s|n[h]&s&&(n[h]|=s),l&=~g}}var Wt=0;function o0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var l0,sg,u0,c0,h0,rg=!1,bd=[],nr=null,ir=null,sr=null,Mu=new Map,Lu=new Map,rr=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d0(n,s){switch(n){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(s.pointerId)}}function Iu(n,s,l,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Xu(s),s!==null&&sg(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function Hb(n,s,l,h,g){switch(s){case"focusin":return nr=Iu(nr,n,s,l,h,g),!0;case"dragenter":return ir=Iu(ir,n,s,l,h,g),!0;case"mouseover":return sr=Iu(sr,n,s,l,h,g),!0;case"pointerover":var y=g.pointerId;return Mu.set(y,Iu(Mu.get(y)||null,n,s,l,h,g)),!0;case"gotpointercapture":return y=g.pointerId,Lu.set(y,Iu(Lu.get(y)||null,n,s,l,h,g)),!0}return!1}function f0(n){var s=ra(n.target);if(s!==null){var l=sa(s);if(l!==null){if(s=l.tag,s===13){if(s=Zv(l),s!==null){n.blockedOn=s,h0(n.priority,function(){u0(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _d(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=og(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(l===null){l=n.nativeEvent;var h=new l.constructor(l.type,l);qp=h,l.target.dispatchEvent(h),qp=null}else return s=Xu(l),s!==null&&sg(s),n.blockedOn=l,!1;s.shift()}return!0}function p0(n,s,l){_d(n)&&l.delete(s)}function Bb(){rg=!1,nr!==null&&_d(nr)&&(nr=null),ir!==null&&_d(ir)&&(ir=null),sr!==null&&_d(sr)&&(sr=null),Mu.forEach(p0),Lu.forEach(p0)}function Nu(n,s){n.blockedOn===s&&(n.blockedOn=null,rg||(rg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Bb)))}function Du(n){function s(g){return Nu(g,n)}if(0<bd.length){Nu(bd[0],n);for(var l=1;l<bd.length;l++){var h=bd[l];h.blockedOn===n&&(h.blockedOn=null)}}for(nr!==null&&Nu(nr,n),ir!==null&&Nu(ir,n),sr!==null&&Nu(sr,n),Mu.forEach(s),Lu.forEach(s),l=0;l<rr.length;l++)h=rr[l],h.blockedOn===n&&(h.blockedOn=null);for(;0<rr.length&&(l=rr[0],l.blockedOn===null);)f0(l),l.blockedOn===null&&rr.shift()}var Fo=D.ReactCurrentBatchConfig,Ed=!0;function jb(n,s,l,h){var g=Wt,y=Fo.transition;Fo.transition=null;try{Wt=1,ag(n,s,l,h)}finally{Wt=g,Fo.transition=y}}function Ub(n,s,l,h){var g=Wt,y=Fo.transition;Fo.transition=null;try{Wt=4,ag(n,s,l,h)}finally{Wt=g,Fo.transition=y}}function ag(n,s,l,h){if(Ed){var g=og(n,s,l,h);if(g===null)Eg(n,s,h,xd,l),d0(n,h);else if(Hb(g,n,s,l,h))h.stopPropagation();else if(d0(n,h),s&4&&-1<zb.indexOf(n)){for(;g!==null;){var y=Xu(g);if(y!==null&&l0(y),y=og(n,s,l,h),y===null&&Eg(n,s,h,xd,l),y===g)break;g=y}g!==null&&h.stopPropagation()}else Eg(n,s,h,null,l)}}var xd=null;function og(n,s,l,h){if(xd=null,n=Yp(h),n=ra(n),n!==null)if(s=sa(n),s===null)n=null;else if(l=s.tag,l===13){if(n=Zv(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return xd=n,null}function g0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rb()){case tg:return 1;case s0:return 4;case yd:case Mb:return 16;case r0:return 536870912;default:return 16}default:return 16}}var ar=null,lg=null,Cd=null;function m0(){if(Cd)return Cd;var n,s=lg,l=s.length,h,g="value"in ar?ar.value:ar.textContent,y=g.length;for(n=0;n<l&&s[n]===g[n];n++);var b=l-n;for(h=1;h<=b&&s[l-h]===g[y-h];h++);return Cd=g.slice(n,1<h?1-h:void 0)}function kd(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Td(){return!0}function y0(){return!1}function In(n){function s(l,h,g,y,b){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=b,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(l=n[P],this[P]=l?l(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Td:y0,this.isPropagationStopped=y0,this}return Q(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Td)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Td)},persist:function(){},isPersistent:Td}),s}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ug=In(Oo),Fu=Q({},Oo,{view:0,detail:0}),Vb=In(Fu),cg,hg,Ou,Pd=Q({},Fu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fg,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ou&&(Ou&&n.type==="mousemove"?(cg=n.screenX-Ou.screenX,hg=n.screenY-Ou.screenY):hg=cg=0,Ou=n),cg)},movementY:function(n){return"movementY"in n?n.movementY:hg}}),v0=In(Pd),Wb=Q({},Pd,{dataTransfer:0}),Gb=In(Wb),Xb=Q({},Fu,{relatedTarget:0}),dg=In(Xb),qb=Q({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),Yb=In(qb),Kb=Q({},Oo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Qb=In(Kb),Zb=Q({},Oo,{data:0}),w0=In(Zb),Jb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n_(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=e_[n])?!!s[n]:!1}function fg(){return n_}var i_=Q({},Fu,{key:function(n){if(n.key){var s=Jb[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=kd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?t_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fg,charCode:function(n){return n.type==="keypress"?kd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),s_=In(i_),r_=Q({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A0=In(r_),a_=Q({},Fu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fg}),o_=In(a_),l_=Q({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),u_=In(l_),c_=Q({},Pd,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),h_=In(c_),d_=[9,13,27,32],pg=c&&"CompositionEvent"in window,$u=null;c&&"documentMode"in document&&($u=document.documentMode);var f_=c&&"TextEvent"in window&&!$u,S0=c&&(!pg||$u&&8<$u&&11>=$u),b0=" ",_0=!1;function E0(n,s){switch(n){case"keyup":return d_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function x0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $o=!1;function p_(n,s){switch(n){case"compositionend":return x0(s);case"keypress":return s.which!==32?null:(_0=!0,b0);case"textInput":return n=s.data,n===b0&&_0?null:n;default:return null}}function g_(n,s){if($o)return n==="compositionend"||!pg&&E0(n,s)?(n=m0(),Cd=lg=ar=null,$o=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return S0&&s.locale!=="ko"?null:s.data;default:return null}}var m_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C0(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!m_[n.type]:s==="textarea"}function k0(n,s,l,h){Xv(h),s=Nd(s,"onChange"),0<s.length&&(l=new ug("onChange","change",null,l,h),n.push({event:l,listeners:s}))}var zu=null,Hu=null;function y_(n){W0(n,0)}function Rd(n){var s=Uo(n);if(Dv(s))return n}function v_(n,s){if(n==="change")return s}var T0=!1;if(c){var gg;if(c){var mg="oninput"in document;if(!mg){var P0=document.createElement("div");P0.setAttribute("oninput","return;"),mg=typeof P0.oninput=="function"}gg=mg}else gg=!1;T0=gg&&(!document.documentMode||9<document.documentMode)}function R0(){zu&&(zu.detachEvent("onpropertychange",M0),Hu=zu=null)}function M0(n){if(n.propertyName==="value"&&Rd(Hu)){var s=[];k0(s,Hu,n,Yp(n)),Qv(y_,s)}}function w_(n,s,l){n==="focusin"?(R0(),zu=s,Hu=l,zu.attachEvent("onpropertychange",M0)):n==="focusout"&&R0()}function A_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Rd(Hu)}function S_(n,s){if(n==="click")return Rd(s)}function b_(n,s){if(n==="input"||n==="change")return Rd(s)}function __(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var yi=typeof Object.is=="function"?Object.is:__;function Bu(n,s){if(yi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),h=Object.keys(s);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!f.call(s,g)||!yi(n[g],s[g]))return!1}return!0}function L0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function I0(n,s){var l=L0(n);n=0;for(var h;l;){if(l.nodeType===3){if(h=n+l.textContent.length,n<=s&&h>=s)return{node:l,offset:s-n};n=h}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=L0(l)}}function N0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?N0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function D0(){for(var n=window,s=fd();s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=fd(n.document)}return s}function yg(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function E_(n){var s=D0(),l=n.focusedElem,h=n.selectionRange;if(s!==l&&l&&l.ownerDocument&&N0(l.ownerDocument.documentElement,l)){if(h!==null&&yg(l)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(n,l.value.length);else if(n=(s=l.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=l.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=I0(l,y);var b=I0(l,h);g&&b&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==b.node||n.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),n.addRange(s)))}}for(s=[],n=l;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)n=s[l],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var x_=c&&"documentMode"in document&&11>=document.documentMode,zo=null,vg=null,ju=null,wg=!1;function F0(n,s,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;wg||zo==null||zo!==fd(h)||(h=zo,"selectionStart"in h&&yg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ju&&Bu(ju,h)||(ju=h,h=Nd(vg,"onSelect"),0<h.length&&(s=new ug("onSelect","select",null,s,l),n.push({event:s,listeners:h}),s.target=zo)))}function Md(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Ho={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},Ag={},O0={};c&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function Ld(n){if(Ag[n])return Ag[n];if(!Ho[n])return n;var s=Ho[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in O0)return Ag[n]=s[l];return n}var $0=Ld("animationend"),z0=Ld("animationiteration"),H0=Ld("animationstart"),B0=Ld("transitionend"),j0=new Map,U0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(n,s){j0.set(n,s),a(s,[n])}for(var Sg=0;Sg<U0.length;Sg++){var bg=U0[Sg],C_=bg.toLowerCase(),k_=bg[0].toUpperCase()+bg.slice(1);or(C_,"on"+k_)}or($0,"onAnimationEnd"),or(z0,"onAnimationIteration"),or(H0,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(B0,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uu));function V0(n,s,l){var h=n.type||"unknown-event";n.currentTarget=l,Cb(h,s,void 0,n),n.currentTarget=null}function W0(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var h=n[l],g=h.event;h=h.listeners;t:{var y=void 0;if(s)for(var b=h.length-1;0<=b;b--){var P=h[b],R=P.instance,$=P.currentTarget;if(P=P.listener,R!==y&&g.isPropagationStopped())break t;V0(g,P,$),y=R}else for(b=0;b<h.length;b++){if(P=h[b],R=P.instance,$=P.currentTarget,P=P.listener,R!==y&&g.isPropagationStopped())break t;V0(g,P,$),y=R}}}if(md)throw n=Jp,md=!1,Jp=null,n}function te(n,s){var l=s[Rg];l===void 0&&(l=s[Rg]=new Set);var h=n+"__bubble";l.has(h)||(G0(s,n,2,!1),l.add(h))}function _g(n,s,l){var h=0;s&&(h|=4),G0(l,n,h,s)}var Id="_reactListening"+Math.random().toString(36).slice(2);function Vu(n){if(!n[Id]){n[Id]=!0,i.forEach(function(l){l!=="selectionchange"&&(T_.has(l)||_g(l,!1,n),_g(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Id]||(s[Id]=!0,_g("selectionchange",!1,s))}}function G0(n,s,l,h){switch(g0(s)){case 1:var g=jb;break;case 4:g=Ub;break;default:g=ag}l=g.bind(null,s,l,n),g=void 0,!Zp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,l,{capture:!0,passive:g}):n.addEventListener(s,l,!0):g!==void 0?n.addEventListener(s,l,{passive:g}):n.addEventListener(s,l,!1)}function Eg(n,s,l,h,g){var y=h;if(!(s&1)&&!(s&2)&&h!==null)t:for(;;){if(h===null)return;var b=h.tag;if(b===3||b===4){var P=h.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(b===4)for(b=h.return;b!==null;){var R=b.tag;if((R===3||R===4)&&(R=b.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;b=b.return}for(;P!==null;){if(b=ra(P),b===null)return;if(R=b.tag,R===5||R===6){h=y=b;continue t}P=P.parentNode}}h=h.return}Qv(function(){var $=y,W=Yp(l),X=[];t:{var V=j0.get(n);if(V!==void 0){var et=ug,lt=n;switch(n){case"keypress":if(kd(l)===0)break t;case"keydown":case"keyup":et=s_;break;case"focusin":lt="focus",et=dg;break;case"focusout":lt="blur",et=dg;break;case"beforeblur":case"afterblur":et=dg;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=v0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Gb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=o_;break;case $0:case z0:case H0:et=Yb;break;case B0:et=u_;break;case"scroll":et=Vb;break;case"wheel":et=h_;break;case"copy":case"cut":case"paste":et=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=A0}var ut=(s&4)!==0,ge=!ut&&n==="scroll",N=ut?V!==null?V+"Capture":null:V;ut=[];for(var M=$,F;M!==null;){F=M;var q=F.stateNode;if(F.tag===5&&q!==null&&(F=q,N!==null&&(q=Cu(M,N),q!=null&&ut.push(Wu(M,q,F)))),ge)break;M=M.return}0<ut.length&&(V=new et(V,lt,null,l,W),X.push({event:V,listeners:ut}))}}if(!(s&7)){t:{if(V=n==="mouseover"||n==="pointerover",et=n==="mouseout"||n==="pointerout",V&&l!==qp&&(lt=l.relatedTarget||l.fromElement)&&(ra(lt)||lt[ds]))break t;if((et||V)&&(V=W.window===W?W:(V=W.ownerDocument)?V.defaultView||V.parentWindow:window,et?(lt=l.relatedTarget||l.toElement,et=$,lt=lt?ra(lt):null,lt!==null&&(ge=sa(lt),lt!==ge||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(et=null,lt=$),et!==lt)){if(ut=v0,q="onMouseLeave",N="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ut=A0,q="onPointerLeave",N="onPointerEnter",M="pointer"),ge=et==null?V:Uo(et),F=lt==null?V:Uo(lt),V=new ut(q,M+"leave",et,l,W),V.target=ge,V.relatedTarget=F,q=null,ra(W)===$&&(ut=new ut(N,M+"enter",lt,l,W),ut.target=F,ut.relatedTarget=ge,q=ut),ge=q,et&&lt)e:{for(ut=et,N=lt,M=0,F=ut;F;F=Bo(F))M++;for(F=0,q=N;q;q=Bo(q))F++;for(;0<M-F;)ut=Bo(ut),M--;for(;0<F-M;)N=Bo(N),F--;for(;M--;){if(ut===N||N!==null&&ut===N.alternate)break e;ut=Bo(ut),N=Bo(N)}ut=null}else ut=null;et!==null&&X0(X,V,et,ut,!1),lt!==null&&ge!==null&&X0(X,ge,lt,ut,!0)}}t:{if(V=$?Uo($):window,et=V.nodeName&&V.nodeName.toLowerCase(),et==="select"||et==="input"&&V.type==="file")var ht=v_;else if(C0(V))if(T0)ht=b_;else{ht=A_;var gt=w_}else(et=V.nodeName)&&et.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(ht=S_);if(ht&&(ht=ht(n,$))){k0(X,ht,l,W);break t}gt&&gt(n,V,$),n==="focusout"&&(gt=V._wrapperState)&&gt.controlled&&V.type==="number"&&Up(V,"number",V.value)}switch(gt=$?Uo($):window,n){case"focusin":(C0(gt)||gt.contentEditable==="true")&&(zo=gt,vg=$,ju=null);break;case"focusout":ju=vg=zo=null;break;case"mousedown":wg=!0;break;case"contextmenu":case"mouseup":case"dragend":wg=!1,F0(X,l,W);break;case"selectionchange":if(x_)break;case"keydown":case"keyup":F0(X,l,W)}var mt;if(pg)t:{switch(n){case"compositionstart":var _t="onCompositionStart";break t;case"compositionend":_t="onCompositionEnd";break t;case"compositionupdate":_t="onCompositionUpdate";break t}_t=void 0}else $o?E0(n,l)&&(_t="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(_t="onCompositionStart");_t&&(S0&&l.locale!=="ko"&&($o||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&$o&&(mt=m0()):(ar=W,lg="value"in ar?ar.value:ar.textContent,$o=!0)),gt=Nd($,_t),0<gt.length&&(_t=new w0(_t,n,null,l,W),X.push({event:_t,listeners:gt}),mt?_t.data=mt:(mt=x0(l),mt!==null&&(_t.data=mt)))),(mt=f_?p_(n,l):g_(n,l))&&($=Nd($,"onBeforeInput"),0<$.length&&(W=new w0("onBeforeInput","beforeinput",null,l,W),X.push({event:W,listeners:$}),W.data=mt))}W0(X,s)})}function Wu(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Nd(n,s){for(var l=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=Cu(n,l),y!=null&&h.unshift(Wu(n,y,g)),y=Cu(n,s),y!=null&&h.push(Wu(n,y,g))),n=n.return}return h}function Bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function X0(n,s,l,h,g){for(var y=s._reactName,b=[];l!==null&&l!==h;){var P=l,R=P.alternate,$=P.stateNode;if(R!==null&&R===h)break;P.tag===5&&$!==null&&(P=$,g?(R=Cu(l,y),R!=null&&b.unshift(Wu(l,R,P))):g||(R=Cu(l,y),R!=null&&b.push(Wu(l,R,P)))),l=l.return}b.length!==0&&n.push({event:s,listeners:b})}var P_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function q0(n){return(typeof n=="string"?n:""+n).replace(P_,`
`).replace(R_,"")}function Dd(n,s,l){if(s=q0(s),q0(n)!==s&&l)throw Error(e(425))}function Fd(){}var xg=null,Cg=null;function kg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tg=typeof setTimeout=="function"?setTimeout:void 0,M_=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,L_=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(n){return Y0.resolve(null).then(n).catch(I_)}:Tg;function I_(n){setTimeout(function(){throw n})}function Pg(n,s){var l=s,h=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(h===0){n.removeChild(g),Du(s);return}h--}else l!=="$"&&l!=="$?"&&l!=="$!"||h++;l=g}while(l);Du(s)}function lr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function K0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Bi="__reactFiber$"+jo,Gu="__reactProps$"+jo,ds="__reactContainer$"+jo,Rg="__reactEvents$"+jo,N_="__reactListeners$"+jo,D_="__reactHandles$"+jo;function ra(n){var s=n[Bi];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ds]||l[Bi]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=K0(n);n!==null;){if(l=n[Bi])return l;n=K0(n)}return s}n=l,l=n.parentNode}return null}function Xu(n){return n=n[Bi]||n[ds],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Uo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(e(33))}function Od(n){return n[Gu]||null}var Mg=[],Vo=-1;function ur(n){return{current:n}}function ee(n){0>Vo||(n.current=Mg[Vo],Mg[Vo]=null,Vo--)}function Zt(n,s){Vo++,Mg[Vo]=n.current,n.current=s}var cr={},qe=ur(cr),An=ur(!1),aa=cr;function Wo(n,s){var l=n.type.contextTypes;if(!l)return cr;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in l)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Sn(n){return n=n.childContextTypes,n!=null}function $d(){ee(An),ee(qe)}function Q0(n,s,l){if(qe.current!==cr)throw Error(e(168));Zt(qe,s),Zt(An,l)}function Z0(n,s,l){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return l;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(e(108,vt(n)||"Unknown",g));return Q({},l,h)}function zd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||cr,aa=qe.current,Zt(qe,n),Zt(An,An.current),!0}function J0(n,s,l){var h=n.stateNode;if(!h)throw Error(e(169));l?(n=Z0(n,s,aa),h.__reactInternalMemoizedMergedChildContext=n,ee(An),ee(qe),Zt(qe,n)):ee(An),Zt(An,l)}var fs=null,Hd=!1,Lg=!1;function tw(n){fs===null?fs=[n]:fs.push(n)}function F_(n){Hd=!0,tw(n)}function hr(){if(!Lg&&fs!==null){Lg=!0;var n=0,s=Wt;try{var l=fs;for(Wt=1;n<l.length;n++){var h=l[n];do h=h(!0);while(h!==null)}fs=null,Hd=!1}catch(g){throw fs!==null&&(fs=fs.slice(n+1)),n0(tg,hr),g}finally{Wt=s,Lg=!1}}return null}var Go=[],Xo=0,Bd=null,jd=0,Jn=[],ti=0,oa=null,ps=1,gs="";function la(n,s){Go[Xo++]=jd,Go[Xo++]=Bd,Bd=n,jd=s}function ew(n,s,l){Jn[ti++]=ps,Jn[ti++]=gs,Jn[ti++]=oa,oa=n;var h=ps;n=gs;var g=32-mi(h)-1;h&=~(1<<g),l+=1;var y=32-mi(s)+g;if(30<y){var b=g-g%5;y=(h&(1<<b)-1).toString(32),h>>=b,g-=b,ps=1<<32-mi(s)+g|l<<g|h,gs=y+n}else ps=1<<y|l<<g|h,gs=n}function Ig(n){n.return!==null&&(la(n,1),ew(n,1,0))}function Ng(n){for(;n===Bd;)Bd=Go[--Xo],Go[Xo]=null,jd=Go[--Xo],Go[Xo]=null;for(;n===oa;)oa=Jn[--ti],Jn[ti]=null,gs=Jn[--ti],Jn[ti]=null,ps=Jn[--ti],Jn[ti]=null}var Nn=null,Dn=null,ie=!1,vi=null;function nw(n,s){var l=si(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=n,s=n.deletions,s===null?(n.deletions=[l],n.flags|=16):s.push(l)}function iw(n,s){switch(n.tag){case 5:var l=n.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Nn=n,Dn=lr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Nn=n,Dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=oa!==null?{id:ps,overflow:gs}:null,n.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=si(18,null,null,0),l.stateNode=s,l.return=n,n.child=l,Nn=n,Dn=null,!0):!1;default:return!1}}function Dg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Fg(n){if(ie){var s=Dn;if(s){var l=s;if(!iw(n,s)){if(Dg(n))throw Error(e(418));s=lr(l.nextSibling);var h=Nn;s&&iw(n,s)?nw(h,l):(n.flags=n.flags&-4097|2,ie=!1,Nn=n)}}else{if(Dg(n))throw Error(e(418));n.flags=n.flags&-4097|2,ie=!1,Nn=n}}}function sw(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Nn=n}function Ud(n){if(n!==Nn)return!1;if(!ie)return sw(n),ie=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!kg(n.type,n.memoizedProps)),s&&(s=Dn)){if(Dg(n))throw rw(),Error(e(418));for(;s;)nw(n,s),s=lr(s.nextSibling)}if(sw(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(e(317));t:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"){if(s===0){Dn=lr(n.nextSibling);break t}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}n=n.nextSibling}Dn=null}}else Dn=Nn?lr(n.stateNode.nextSibling):null;return!0}function rw(){for(var n=Dn;n;)n=lr(n.nextSibling)}function qo(){Dn=Nn=null,ie=!1}function Og(n){vi===null?vi=[n]:vi.push(n)}var O_=D.ReactCurrentBatchConfig;function qu(n,s,l){if(n=l.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(e(309));var h=l.stateNode}if(!h)throw Error(e(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(b){var P=g.refs;b===null?delete P[y]:P[y]=b},s._stringRef=y,s)}if(typeof n!="string")throw Error(e(284));if(!l._owner)throw Error(e(290,n))}return n}function Vd(n,s){throw n=Object.prototype.toString.call(s),Error(e(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function aw(n){var s=n._init;return s(n._payload)}function ow(n){function s(N,M){if(n){var F=N.deletions;F===null?(N.deletions=[M],N.flags|=16):F.push(M)}}function l(N,M){if(!n)return null;for(;M!==null;)s(N,M),M=M.sibling;return null}function h(N,M){for(N=new Map;M!==null;)M.key!==null?N.set(M.key,M):N.set(M.index,M),M=M.sibling;return N}function g(N,M){return N=wr(N,M),N.index=0,N.sibling=null,N}function y(N,M,F){return N.index=F,n?(F=N.alternate,F!==null?(F=F.index,F<M?(N.flags|=2,M):F):(N.flags|=2,M)):(N.flags|=1048576,M)}function b(N){return n&&N.alternate===null&&(N.flags|=2),N}function P(N,M,F,q){return M===null||M.tag!==6?(M=Tm(F,N.mode,q),M.return=N,M):(M=g(M,F),M.return=N,M)}function R(N,M,F,q){var ht=F.type;return ht===j?W(N,M,F.props.children,q,F.key):M!==null&&(M.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&aw(ht)===M.type)?(q=g(M,F.props),q.ref=qu(N,M,F),q.return=N,q):(q=gf(F.type,F.key,F.props,null,N.mode,q),q.ref=qu(N,M,F),q.return=N,q)}function $(N,M,F,q){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=Pm(F,N.mode,q),M.return=N,M):(M=g(M,F.children||[]),M.return=N,M)}function W(N,M,F,q,ht){return M===null||M.tag!==7?(M=ma(F,N.mode,q,ht),M.return=N,M):(M=g(M,F),M.return=N,M)}function X(N,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Tm(""+M,N.mode,F),M.return=N,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case z:return F=gf(M.type,M.key,M.props,null,N.mode,F),F.ref=qu(N,null,M),F.return=N,F;case B:return M=Pm(M,N.mode,F),M.return=N,M;case Y:var q=M._init;return X(N,q(M._payload),F)}if(_u(M)||it(M))return M=ma(M,N.mode,F,null),M.return=N,M;Vd(N,M)}return null}function V(N,M,F,q){var ht=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ht!==null?null:P(N,M,""+F,q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case z:return F.key===ht?R(N,M,F,q):null;case B:return F.key===ht?$(N,M,F,q):null;case Y:return ht=F._init,V(N,M,ht(F._payload),q)}if(_u(F)||it(F))return ht!==null?null:W(N,M,F,q,null);Vd(N,F)}return null}function et(N,M,F,q,ht){if(typeof q=="string"&&q!==""||typeof q=="number")return N=N.get(F)||null,P(M,N,""+q,ht);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case z:return N=N.get(q.key===null?F:q.key)||null,R(M,N,q,ht);case B:return N=N.get(q.key===null?F:q.key)||null,$(M,N,q,ht);case Y:var gt=q._init;return et(N,M,F,gt(q._payload),ht)}if(_u(q)||it(q))return N=N.get(F)||null,W(M,N,q,ht,null);Vd(M,q)}return null}function lt(N,M,F,q){for(var ht=null,gt=null,mt=M,_t=M=0,Ie=null;mt!==null&&_t<F.length;_t++){mt.index>_t?(Ie=mt,mt=null):Ie=mt.sibling;var Bt=V(N,mt,F[_t],q);if(Bt===null){mt===null&&(mt=Ie);break}n&&mt&&Bt.alternate===null&&s(N,mt),M=y(Bt,M,_t),gt===null?ht=Bt:gt.sibling=Bt,gt=Bt,mt=Ie}if(_t===F.length)return l(N,mt),ie&&la(N,_t),ht;if(mt===null){for(;_t<F.length;_t++)mt=X(N,F[_t],q),mt!==null&&(M=y(mt,M,_t),gt===null?ht=mt:gt.sibling=mt,gt=mt);return ie&&la(N,_t),ht}for(mt=h(N,mt);_t<F.length;_t++)Ie=et(mt,N,_t,F[_t],q),Ie!==null&&(n&&Ie.alternate!==null&&mt.delete(Ie.key===null?_t:Ie.key),M=y(Ie,M,_t),gt===null?ht=Ie:gt.sibling=Ie,gt=Ie);return n&&mt.forEach(function(Ar){return s(N,Ar)}),ie&&la(N,_t),ht}function ut(N,M,F,q){var ht=it(F);if(typeof ht!="function")throw Error(e(150));if(F=ht.call(F),F==null)throw Error(e(151));for(var gt=ht=null,mt=M,_t=M=0,Ie=null,Bt=F.next();mt!==null&&!Bt.done;_t++,Bt=F.next()){mt.index>_t?(Ie=mt,mt=null):Ie=mt.sibling;var Ar=V(N,mt,Bt.value,q);if(Ar===null){mt===null&&(mt=Ie);break}n&&mt&&Ar.alternate===null&&s(N,mt),M=y(Ar,M,_t),gt===null?ht=Ar:gt.sibling=Ar,gt=Ar,mt=Ie}if(Bt.done)return l(N,mt),ie&&la(N,_t),ht;if(mt===null){for(;!Bt.done;_t++,Bt=F.next())Bt=X(N,Bt.value,q),Bt!==null&&(M=y(Bt,M,_t),gt===null?ht=Bt:gt.sibling=Bt,gt=Bt);return ie&&la(N,_t),ht}for(mt=h(N,mt);!Bt.done;_t++,Bt=F.next())Bt=et(mt,N,_t,Bt.value,q),Bt!==null&&(n&&Bt.alternate!==null&&mt.delete(Bt.key===null?_t:Bt.key),M=y(Bt,M,_t),gt===null?ht=Bt:gt.sibling=Bt,gt=Bt);return n&&mt.forEach(function(gE){return s(N,gE)}),ie&&la(N,_t),ht}function ge(N,M,F,q){if(typeof F=="object"&&F!==null&&F.type===j&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case z:t:{for(var ht=F.key,gt=M;gt!==null;){if(gt.key===ht){if(ht=F.type,ht===j){if(gt.tag===7){l(N,gt.sibling),M=g(gt,F.props.children),M.return=N,N=M;break t}}else if(gt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&aw(ht)===gt.type){l(N,gt.sibling),M=g(gt,F.props),M.ref=qu(N,gt,F),M.return=N,N=M;break t}l(N,gt);break}else s(N,gt);gt=gt.sibling}F.type===j?(M=ma(F.props.children,N.mode,q,F.key),M.return=N,N=M):(q=gf(F.type,F.key,F.props,null,N.mode,q),q.ref=qu(N,M,F),q.return=N,N=q)}return b(N);case B:t:{for(gt=F.key;M!==null;){if(M.key===gt)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){l(N,M.sibling),M=g(M,F.children||[]),M.return=N,N=M;break t}else{l(N,M);break}else s(N,M);M=M.sibling}M=Pm(F,N.mode,q),M.return=N,N=M}return b(N);case Y:return gt=F._init,ge(N,M,gt(F._payload),q)}if(_u(F))return lt(N,M,F,q);if(it(F))return ut(N,M,F,q);Vd(N,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,M!==null&&M.tag===6?(l(N,M.sibling),M=g(M,F),M.return=N,N=M):(l(N,M),M=Tm(F,N.mode,q),M.return=N,N=M),b(N)):l(N,M)}return ge}var Yo=ow(!0),lw=ow(!1),Wd=ur(null),Gd=null,Ko=null,$g=null;function zg(){$g=Ko=Gd=null}function Hg(n){var s=Wd.current;ee(Wd),n._currentValue=s}function Bg(n,s,l){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===l)break;n=n.return}}function Qo(n,s){Gd=n,$g=Ko=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&s&&(bn=!0),n.firstContext=null)}function ei(n){var s=n._currentValue;if($g!==n)if(n={context:n,memoizedValue:s,next:null},Ko===null){if(Gd===null)throw Error(e(308));Ko=n,Gd.dependencies={lanes:0,firstContext:n}}else Ko=Ko.next=n;return s}var ua=null;function jg(n){ua===null?ua=[n]:ua.push(n)}function uw(n,s,l,h){var g=s.interleaved;return g===null?(l.next=l,jg(s)):(l.next=g.next,g.next=l),s.interleaved=l,ms(n,h)}function ms(n,s){n.lanes|=s;var l=n.alternate;for(l!==null&&(l.lanes|=s),l=n,n=n.return;n!==null;)n.childLanes|=s,l=n.alternate,l!==null&&(l.childLanes|=s),l=n,n=n.return;return l.tag===3?l.stateNode:null}var dr=!1;function Ug(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cw(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ys(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function fr(n,s,l){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,zt&2){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,ms(n,l)}return g=h.interleaved,g===null?(s.next=s,jg(h)):(s.next=g.next,g.next=s),h.interleaved=s,ms(n,l)}function Xd(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ig(n,l)}}function hw(n,s){var l=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var b={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?g=y=b:y=y.next=b,l=l.next}while(l!==null);y===null?g=y=s:y=y.next=s}else g=y=s;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}function qd(n,s,l,h){var g=n.updateQueue;dr=!1;var y=g.firstBaseUpdate,b=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var R=P,$=R.next;R.next=null,b===null?y=$:b.next=$,b=R;var W=n.alternate;W!==null&&(W=W.updateQueue,P=W.lastBaseUpdate,P!==b&&(P===null?W.firstBaseUpdate=$:P.next=$,W.lastBaseUpdate=R))}if(y!==null){var X=g.baseState;b=0,W=$=R=null,P=y;do{var V=P.lane,et=P.eventTime;if((h&V)===V){W!==null&&(W=W.next={eventTime:et,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});t:{var lt=n,ut=P;switch(V=s,et=l,ut.tag){case 1:if(lt=ut.payload,typeof lt=="function"){X=lt.call(et,X,V);break t}X=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=ut.payload,V=typeof lt=="function"?lt.call(et,X,V):lt,V==null)break t;X=Q({},X,V);break t;case 2:dr=!0}}P.callback!==null&&P.lane!==0&&(n.flags|=64,V=g.effects,V===null?g.effects=[P]:V.push(P))}else et={eventTime:et,lane:V,tag:P.tag,payload:P.payload,callback:P.callback,next:null},W===null?($=W=et,R=X):W=W.next=et,b|=V;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;V=P,P=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);if(W===null&&(R=X),g.baseState=R,g.firstBaseUpdate=$,g.lastBaseUpdate=W,s=g.shared.interleaved,s!==null){g=s;do b|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);da|=b,n.lanes=b,n.memoizedState=X}}function dw(n,s,l){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=l,typeof g!="function")throw Error(e(191,g));g.call(h)}}}var Yu={},ji=ur(Yu),Ku=ur(Yu),Qu=ur(Yu);function ca(n){if(n===Yu)throw Error(e(174));return n}function Vg(n,s){switch(Zt(Qu,s),Zt(Ku,n),Zt(ji,Yu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Wp(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Wp(s,n)}ee(ji),Zt(ji,s)}function Zo(){ee(ji),ee(Ku),ee(Qu)}function fw(n){ca(Qu.current);var s=ca(ji.current),l=Wp(s,n.type);s!==l&&(Zt(Ku,n),Zt(ji,l))}function Wg(n){Ku.current===n&&(ee(ji),ee(Ku))}var oe=ur(0);function Yd(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Gg=[];function Xg(){for(var n=0;n<Gg.length;n++)Gg[n]._workInProgressVersionPrimary=null;Gg.length=0}var Kd=D.ReactCurrentDispatcher,qg=D.ReactCurrentBatchConfig,ha=0,le=null,Ee=null,Me=null,Qd=!1,Zu=!1,Ju=0,$_=0;function Ye(){throw Error(e(321))}function Yg(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!yi(n[l],s[l]))return!1;return!0}function Kg(n,s,l,h,g,y){if(ha=y,le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Kd.current=n===null||n.memoizedState===null?j_:U_,n=l(h,g),Zu){y=0;do{if(Zu=!1,Ju=0,25<=y)throw Error(e(301));y+=1,Me=Ee=null,s.updateQueue=null,Kd.current=V_,n=l(h,g)}while(Zu)}if(Kd.current=tf,s=Ee!==null&&Ee.next!==null,ha=0,Me=Ee=le=null,Qd=!1,s)throw Error(e(300));return n}function Qg(){var n=Ju!==0;return Ju=0,n}function Ui(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?le.memoizedState=Me=n:Me=Me.next=n,Me}function ni(){if(Ee===null){var n=le.alternate;n=n!==null?n.memoizedState:null}else n=Ee.next;var s=Me===null?le.memoizedState:Me.next;if(s!==null)Me=s,Ee=n;else{if(n===null)throw Error(e(310));Ee=n,n={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Me===null?le.memoizedState=Me=n:Me=Me.next=n}return Me}function tc(n,s){return typeof s=="function"?s(n):s}function Zg(n){var s=ni(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=Ee,g=h.baseQueue,y=l.pending;if(y!==null){if(g!==null){var b=g.next;g.next=y.next,y.next=b}h.baseQueue=g=y,l.pending=null}if(g!==null){y=g.next,h=h.baseState;var P=b=null,R=null,$=y;do{var W=$.lane;if((ha&W)===W)R!==null&&(R=R.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:n(h,$.action);else{var X={lane:W,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};R===null?(P=R=X,b=h):R=R.next=X,le.lanes|=W,da|=W}$=$.next}while($!==null&&$!==y);R===null?b=h:R.next=P,yi(h,s.memoizedState)||(bn=!0),s.memoizedState=h,s.baseState=b,s.baseQueue=R,l.lastRenderedState=h}if(n=l.interleaved,n!==null){g=n;do y=g.lane,le.lanes|=y,da|=y,g=g.next;while(g!==n)}else g===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function Jg(n){var s=ni(),l=s.queue;if(l===null)throw Error(e(311));l.lastRenderedReducer=n;var h=l.dispatch,g=l.pending,y=s.memoizedState;if(g!==null){l.pending=null;var b=g=g.next;do y=n(y,b.action),b=b.next;while(b!==g);yi(y,s.memoizedState)||(bn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,h]}function pw(){}function gw(n,s){var l=le,h=ni(),g=s(),y=!yi(h.memoizedState,g);if(y&&(h.memoizedState=g,bn=!0),h=h.queue,tm(vw.bind(null,l,h,n),[n]),h.getSnapshot!==s||y||Me!==null&&Me.memoizedState.tag&1){if(l.flags|=2048,ec(9,yw.bind(null,l,h,g,s),void 0,null),Le===null)throw Error(e(349));ha&30||mw(l,s,g)}return g}function mw(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function yw(n,s,l,h){s.value=l,s.getSnapshot=h,ww(s)&&Aw(n)}function vw(n,s,l){return l(function(){ww(s)&&Aw(n)})}function ww(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!yi(n,l)}catch{return!0}}function Aw(n){var s=ms(n,1);s!==null&&bi(s,n,1,-1)}function Sw(n){var s=Ui();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:n},s.queue=n,n=n.dispatch=B_.bind(null,le,n),[s.memoizedState,n]}function ec(n,s,l,h){return n={tag:n,create:s,destroy:l,deps:h,next:null},s=le.updateQueue,s===null?(s={lastEffect:null,stores:null},le.updateQueue=s,s.lastEffect=n.next=n):(l=s.lastEffect,l===null?s.lastEffect=n.next=n:(h=l.next,l.next=n,n.next=h,s.lastEffect=n)),n}function bw(){return ni().memoizedState}function Zd(n,s,l,h){var g=Ui();le.flags|=n,g.memoizedState=ec(1|s,l,void 0,h===void 0?null:h)}function Jd(n,s,l,h){var g=ni();h=h===void 0?null:h;var y=void 0;if(Ee!==null){var b=Ee.memoizedState;if(y=b.destroy,h!==null&&Yg(h,b.deps)){g.memoizedState=ec(s,l,y,h);return}}le.flags|=n,g.memoizedState=ec(1|s,l,y,h)}function _w(n,s){return Zd(8390656,8,n,s)}function tm(n,s){return Jd(2048,8,n,s)}function Ew(n,s){return Jd(4,2,n,s)}function xw(n,s){return Jd(4,4,n,s)}function Cw(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function kw(n,s,l){return l=l!=null?l.concat([n]):null,Jd(4,4,Cw.bind(null,s,n),l)}function em(){}function Tw(n,s){var l=ni();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Yg(s,h[1])?h[0]:(l.memoizedState=[n,s],n)}function Pw(n,s){var l=ni();s=s===void 0?null:s;var h=l.memoizedState;return h!==null&&s!==null&&Yg(s,h[1])?h[0]:(n=n(),l.memoizedState=[n,s],n)}function Rw(n,s,l){return ha&21?(yi(l,s)||(l=a0(),le.lanes|=l,da|=l,n.baseState=!0),s):(n.baseState&&(n.baseState=!1,bn=!0),n.memoizedState=l)}function z_(n,s){var l=Wt;Wt=l!==0&&4>l?l:4,n(!0);var h=qg.transition;qg.transition={};try{n(!1),s()}finally{Wt=l,qg.transition=h}}function Mw(){return ni().memoizedState}function H_(n,s,l){var h=yr(n);if(l={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null},Lw(n))Iw(s,l);else if(l=uw(n,s,l,h),l!==null){var g=cn();bi(l,n,h,g),Nw(l,s,h)}}function B_(n,s,l){var h=yr(n),g={lane:h,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lw(n))Iw(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var b=s.lastRenderedState,P=y(b,l);if(g.hasEagerState=!0,g.eagerState=P,yi(P,b)){var R=s.interleaved;R===null?(g.next=g,jg(s)):(g.next=R.next,R.next=g),s.interleaved=g;return}}catch{}finally{}l=uw(n,s,g,h),l!==null&&(g=cn(),bi(l,n,h,g),Nw(l,s,h))}}function Lw(n){var s=n.alternate;return n===le||s!==null&&s===le}function Iw(n,s){Zu=Qd=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Nw(n,s,l){if(l&4194240){var h=s.lanes;h&=n.pendingLanes,l|=h,s.lanes=l,ig(n,l)}}var tf={readContext:ei,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},j_={readContext:ei,useCallback:function(n,s){return Ui().memoizedState=[n,s===void 0?null:s],n},useContext:ei,useEffect:_w,useImperativeHandle:function(n,s,l){return l=l!=null?l.concat([n]):null,Zd(4194308,4,Cw.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Zd(4194308,4,n,s)},useInsertionEffect:function(n,s){return Zd(4,2,n,s)},useMemo:function(n,s){var l=Ui();return s=s===void 0?null:s,n=n(),l.memoizedState=[n,s],n},useReducer:function(n,s,l){var h=Ui();return s=l!==void 0?l(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=H_.bind(null,le,n),[h.memoizedState,n]},useRef:function(n){var s=Ui();return n={current:n},s.memoizedState=n},useState:Sw,useDebugValue:em,useDeferredValue:function(n){return Ui().memoizedState=n},useTransition:function(){var n=Sw(!1),s=n[0];return n=z_.bind(null,n[1]),Ui().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,l){var h=le,g=Ui();if(ie){if(l===void 0)throw Error(e(407));l=l()}else{if(l=s(),Le===null)throw Error(e(349));ha&30||mw(h,s,l)}g.memoizedState=l;var y={value:l,getSnapshot:s};return g.queue=y,_w(vw.bind(null,h,y,n),[n]),h.flags|=2048,ec(9,yw.bind(null,h,y,l,s),void 0,null),l},useId:function(){var n=Ui(),s=Le.identifierPrefix;if(ie){var l=gs,h=ps;l=(h&~(1<<32-mi(h)-1)).toString(32)+l,s=":"+s+"R"+l,l=Ju++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=$_++,s=":"+s+"r"+l.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},U_={readContext:ei,useCallback:Tw,useContext:ei,useEffect:tm,useImperativeHandle:kw,useInsertionEffect:Ew,useLayoutEffect:xw,useMemo:Pw,useReducer:Zg,useRef:bw,useState:function(){return Zg(tc)},useDebugValue:em,useDeferredValue:function(n){var s=ni();return Rw(s,Ee.memoizedState,n)},useTransition:function(){var n=Zg(tc)[0],s=ni().memoizedState;return[n,s]},useMutableSource:pw,useSyncExternalStore:gw,useId:Mw,unstable_isNewReconciler:!1},V_={readContext:ei,useCallback:Tw,useContext:ei,useEffect:tm,useImperativeHandle:kw,useInsertionEffect:Ew,useLayoutEffect:xw,useMemo:Pw,useReducer:Jg,useRef:bw,useState:function(){return Jg(tc)},useDebugValue:em,useDeferredValue:function(n){var s=ni();return Ee===null?s.memoizedState=n:Rw(s,Ee.memoizedState,n)},useTransition:function(){var n=Jg(tc)[0],s=ni().memoizedState;return[n,s]},useMutableSource:pw,useSyncExternalStore:gw,useId:Mw,unstable_isNewReconciler:!1};function wi(n,s){if(n&&n.defaultProps){s=Q({},s),n=n.defaultProps;for(var l in n)s[l]===void 0&&(s[l]=n[l]);return s}return s}function nm(n,s,l,h){s=n.memoizedState,l=l(h,s),l=l==null?s:Q({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var ef={isMounted:function(n){return(n=n._reactInternals)?sa(n)===n:!1},enqueueSetState:function(n,s,l){n=n._reactInternals;var h=cn(),g=yr(n),y=ys(h,g);y.payload=s,l!=null&&(y.callback=l),s=fr(n,y,g),s!==null&&(bi(s,n,g,h),Xd(s,n,g))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var h=cn(),g=yr(n),y=ys(h,g);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=fr(n,y,g),s!==null&&(bi(s,n,g,h),Xd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=cn(),h=yr(n),g=ys(l,h);g.tag=2,s!=null&&(g.callback=s),s=fr(n,g,h),s!==null&&(bi(s,n,h,l),Xd(s,n,h))}};function Dw(n,s,l,h,g,y,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,b):s.prototype&&s.prototype.isPureReactComponent?!Bu(l,h)||!Bu(g,y):!0}function Fw(n,s,l){var h=!1,g=cr,y=s.contextType;return typeof y=="object"&&y!==null?y=ei(y):(g=Sn(s)?aa:qe.current,h=s.contextTypes,y=(h=h!=null)?Wo(n,g):cr),s=new s(l,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ef,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function Ow(n,s,l,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,h),s.state!==n&&ef.enqueueReplaceState(s,s.state,null)}function im(n,s,l,h){var g=n.stateNode;g.props=l,g.state=n.memoizedState,g.refs={},Ug(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=ei(y):(y=Sn(s)?aa:qe.current,g.context=Wo(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(nm(n,s,y,l),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&ef.enqueueReplaceState(g,g.state,null),qd(n,l,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Jo(n,s){try{var l="",h=s;do l+=It(h),h=h.return;while(h);var g=l}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function sm(n,s,l){return{value:n,source:null,stack:l??null,digest:s??null}}function rm(n,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var W_=typeof WeakMap=="function"?WeakMap:Map;function $w(n,s,l){l=ys(-1,l),l.tag=3,l.payload={element:null};var h=s.value;return l.callback=function(){uf||(uf=!0,Am=h),rm(n,s)},l}function zw(n,s,l){l=ys(-1,l),l.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;l.payload=function(){return h(g)},l.callback=function(){rm(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){rm(n,s),typeof h!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),l}function Hw(n,s,l){var h=n.pingCache;if(h===null){h=n.pingCache=new W_;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(l)||(g.add(l),n=rE.bind(null,n,s,l),s.then(n,n))}function Bw(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function jw(n,s,l,h,g){return n.mode&1?(n.flags|=65536,n.lanes=g,n):(n===s?n.flags|=65536:(n.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=ys(-1,1),s.tag=2,fr(l,s,1))),l.lanes|=1),n)}var G_=D.ReactCurrentOwner,bn=!1;function un(n,s,l,h){s.child=n===null?lw(s,null,l,h):Yo(s,n.child,l,h)}function Uw(n,s,l,h,g){l=l.render;var y=s.ref;return Qo(s,g),h=Kg(n,s,l,h,y,g),l=Qg(),n!==null&&!bn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,vs(n,s,g)):(ie&&l&&Ig(s),s.flags|=1,un(n,s,h,g),s.child)}function Vw(n,s,l,h,g){if(n===null){var y=l.type;return typeof y=="function"&&!km(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,Ww(n,s,y,h,g)):(n=gf(l.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!(n.lanes&g)){var b=y.memoizedProps;if(l=l.compare,l=l!==null?l:Bu,l(b,h)&&n.ref===s.ref)return vs(n,s,g)}return s.flags|=1,n=wr(y,h),n.ref=s.ref,n.return=s,s.child=n}function Ww(n,s,l,h,g){if(n!==null){var y=n.memoizedProps;if(Bu(y,h)&&n.ref===s.ref)if(bn=!1,s.pendingProps=h=y,(n.lanes&g)!==0)n.flags&131072&&(bn=!0);else return s.lanes=n.lanes,vs(n,s,g)}return am(n,s,l,h,g)}function Gw(n,s,l){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zt(el,Fn),Fn|=l;else{if(!(l&1073741824))return n=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Zt(el,Fn),Fn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:l,Zt(el,Fn),Fn|=h}else y!==null?(h=y.baseLanes|l,s.memoizedState=null):h=l,Zt(el,Fn),Fn|=h;return un(n,s,g,l),s.child}function Xw(n,s){var l=s.ref;(n===null&&l!==null||n!==null&&n.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function am(n,s,l,h,g){var y=Sn(l)?aa:qe.current;return y=Wo(s,y),Qo(s,g),l=Kg(n,s,l,h,y,g),h=Qg(),n!==null&&!bn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,vs(n,s,g)):(ie&&h&&Ig(s),s.flags|=1,un(n,s,l,g),s.child)}function qw(n,s,l,h,g){if(Sn(l)){var y=!0;zd(s)}else y=!1;if(Qo(s,g),s.stateNode===null)sf(n,s),Fw(s,l,h),im(s,l,h,g),h=!0;else if(n===null){var b=s.stateNode,P=s.memoizedProps;b.props=P;var R=b.context,$=l.contextType;typeof $=="object"&&$!==null?$=ei($):($=Sn(l)?aa:qe.current,$=Wo(s,$));var W=l.getDerivedStateFromProps,X=typeof W=="function"||typeof b.getSnapshotBeforeUpdate=="function";X||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==h||R!==$)&&Ow(s,b,h,$),dr=!1;var V=s.memoizedState;b.state=V,qd(s,h,b,g),R=s.memoizedState,P!==h||V!==R||An.current||dr?(typeof W=="function"&&(nm(s,l,W,h),R=s.memoizedState),(P=dr||Dw(s,l,P,h,V,R,$))?(X||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=R),b.props=h,b.state=R,b.context=$,h=P):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{b=s.stateNode,cw(n,s),P=s.memoizedProps,$=s.type===s.elementType?P:wi(s.type,P),b.props=$,X=s.pendingProps,V=b.context,R=l.contextType,typeof R=="object"&&R!==null?R=ei(R):(R=Sn(l)?aa:qe.current,R=Wo(s,R));var et=l.getDerivedStateFromProps;(W=typeof et=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P!==X||V!==R)&&Ow(s,b,h,R),dr=!1,V=s.memoizedState,b.state=V,qd(s,h,b,g);var lt=s.memoizedState;P!==X||V!==lt||An.current||dr?(typeof et=="function"&&(nm(s,l,et,h),lt=s.memoizedState),($=dr||Dw(s,l,$,h,V,lt,R)||!1)?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,lt,R),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,lt,R)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&V===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&V===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=lt),b.props=h,b.state=lt,b.context=R,h=$):(typeof b.componentDidUpdate!="function"||P===n.memoizedProps&&V===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||P===n.memoizedProps&&V===n.memoizedState||(s.flags|=1024),h=!1)}return om(n,s,l,h,y,g)}function om(n,s,l,h,g,y){Xw(n,s);var b=(s.flags&128)!==0;if(!h&&!b)return g&&J0(s,l,!1),vs(n,s,y);h=s.stateNode,G_.current=s;var P=b&&typeof l.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&b?(s.child=Yo(s,n.child,null,y),s.child=Yo(s,null,P,y)):un(n,s,P,y),s.memoizedState=h.state,g&&J0(s,l,!0),s.child}function Yw(n){var s=n.stateNode;s.pendingContext?Q0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Q0(n,s.context,!1),Vg(n,s.containerInfo)}function Kw(n,s,l,h,g){return qo(),Og(g),s.flags|=256,un(n,s,l,h),s.child}var lm={dehydrated:null,treeContext:null,retryLane:0};function um(n){return{baseLanes:n,cachePool:null,transitions:null}}function Qw(n,s,l){var h=s.pendingProps,g=oe.current,y=!1,b=(s.flags&128)!==0,P;if((P=b)||(P=n!==null&&n.memoizedState===null?!1:(g&2)!==0),P?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Zt(oe,g&1),n===null)return Fg(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(s.mode&1?n.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(b=h.children,n=h.fallback,y?(h=s.mode,y=s.child,b={mode:"hidden",children:b},!(h&1)&&y!==null?(y.childLanes=0,y.pendingProps=b):y=mf(b,h,0,null),n=ma(n,h,l,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=um(l),s.memoizedState=lm,n):cm(s,b));if(g=n.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return X_(n,s,b,h,P,g,l);if(y){y=h.fallback,b=s.mode,g=n.child,P=g.sibling;var R={mode:"hidden",children:h.children};return!(b&1)&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=R,s.deletions=null):(h=wr(g,R),h.subtreeFlags=g.subtreeFlags&14680064),P!==null?y=wr(P,y):(y=ma(y,b,l,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,b=n.child.memoizedState,b=b===null?um(l):{baseLanes:b.baseLanes|l,cachePool:null,transitions:b.transitions},y.memoizedState=b,y.childLanes=n.childLanes&~l,s.memoizedState=lm,h}return y=n.child,n=y.sibling,h=wr(y,{mode:"visible",children:h.children}),!(s.mode&1)&&(h.lanes=l),h.return=s,h.sibling=null,n!==null&&(l=s.deletions,l===null?(s.deletions=[n],s.flags|=16):l.push(n)),s.child=h,s.memoizedState=null,h}function cm(n,s){return s=mf({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function nf(n,s,l,h){return h!==null&&Og(h),Yo(s,n.child,null,l),n=cm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function X_(n,s,l,h,g,y,b){if(l)return s.flags&256?(s.flags&=-257,h=sm(Error(e(422))),nf(n,s,b,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=mf({mode:"visible",children:h.children},g,0,null),y=ma(y,g,b,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,s.mode&1&&Yo(s,n.child,null,b),s.child.memoizedState=um(b),s.memoizedState=lm,y);if(!(s.mode&1))return nf(n,s,b,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var P=h.dgst;return h=P,y=Error(e(419)),h=sm(y,h,void 0),nf(n,s,b,h)}if(P=(b&n.childLanes)!==0,bn||P){if(h=Le,h!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(h.suspendedLanes|b)?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,ms(n,g),bi(h,n,g,-1))}return Cm(),h=sm(Error(e(421))),nf(n,s,b,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=aE.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,Dn=lr(g.nextSibling),Nn=s,ie=!0,vi=null,n!==null&&(Jn[ti++]=ps,Jn[ti++]=gs,Jn[ti++]=oa,ps=n.id,gs=n.overflow,oa=s),s=cm(s,h.children),s.flags|=4096,s)}function Zw(n,s,l){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),Bg(n.return,s,l)}function hm(n,s,l,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=l,y.tailMode=g)}function Jw(n,s,l){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(un(n,s,h.children,l),h=oe.current,h&2)h=h&1|2,s.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Zw(n,l,s);else if(n.tag===19)Zw(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Zt(oe,h),!(s.mode&1))s.memoizedState=null;else switch(g){case"forwards":for(l=s.child,g=null;l!==null;)n=l.alternate,n!==null&&Yd(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=s.child,s.child=null):(g=l.sibling,l.sibling=null),hm(s,!1,g,l,y);break;case"backwards":for(l=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Yd(n)===null){s.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}hm(s,!0,l,null,y);break;case"together":hm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function sf(n,s){!(s.mode&1)&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function vs(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),da|=s.lanes,!(l&s.childLanes))return null;if(n!==null&&s.child!==n.child)throw Error(e(153));if(s.child!==null){for(n=s.child,l=wr(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=wr(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function q_(n,s,l){switch(s.tag){case 3:Yw(s),qo();break;case 5:fw(s);break;case 1:Sn(s.type)&&zd(s);break;case 4:Vg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Zt(Wd,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Zt(oe,oe.current&1),s.flags|=128,null):l&s.child.childLanes?Qw(n,s,l):(Zt(oe,oe.current&1),n=vs(n,s,l),n!==null?n.sibling:null);Zt(oe,oe.current&1);break;case 19:if(h=(l&s.childLanes)!==0,n.flags&128){if(h)return Jw(n,s,l);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Zt(oe,oe.current),h)break;return null;case 22:case 23:return s.lanes=0,Gw(n,s,l)}return vs(n,s,l)}var tA,dm,eA,nA;tA=function(n,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)n.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},dm=function(){},eA=function(n,s,l,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,ca(ji.current);var y=null;switch(l){case"input":g=Bp(n,g),h=Bp(n,h),y=[];break;case"select":g=Q({},g,{value:void 0}),h=Q({},h,{value:void 0}),y=[];break;case"textarea":g=Vp(n,g),h=Vp(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=Fd)}Gp(l,h);var b;l=null;for($ in g)if(!h.hasOwnProperty($)&&g.hasOwnProperty($)&&g[$]!=null)if($==="style"){var P=g[$];for(b in P)P.hasOwnProperty(b)&&(l||(l={}),l[b]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(r.hasOwnProperty($)?y||(y=[]):(y=y||[]).push($,null));for($ in h){var R=h[$];if(P=g!=null?g[$]:void 0,h.hasOwnProperty($)&&R!==P&&(R!=null||P!=null))if($==="style")if(P){for(b in P)!P.hasOwnProperty(b)||R&&R.hasOwnProperty(b)||(l||(l={}),l[b]="");for(b in R)R.hasOwnProperty(b)&&P[b]!==R[b]&&(l||(l={}),l[b]=R[b])}else l||(y||(y=[]),y.push($,l)),l=R;else $==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,P=P?P.__html:void 0,R!=null&&P!==R&&(y=y||[]).push($,R)):$==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push($,""+R):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(r.hasOwnProperty($)?(R!=null&&$==="onScroll"&&te("scroll",n),y||P===R||(y=[])):(y=y||[]).push($,R))}l&&(y=y||[]).push("style",l);var $=y;(s.updateQueue=$)&&(s.flags|=4)}},nA=function(n,s,l,h){l!==h&&(s.flags|=4)};function nc(n,s){if(!ie)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Ke(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,h=0;if(s)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=l,s}function Y_(n,s,l){var h=s.pendingProps;switch(Ng(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(s),null;case 1:return Sn(s.type)&&$d(),Ke(s),null;case 3:return h=s.stateNode,Zo(),ee(An),ee(qe),Xg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(Ud(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,vi!==null&&(_m(vi),vi=null))),dm(n,s),Ke(s),null;case 5:Wg(s);var g=ca(Qu.current);if(l=s.type,n!==null&&s.stateNode!=null)eA(n,s,l,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(e(166));return Ke(s),null}if(n=ca(ji.current),Ud(s)){h=s.stateNode,l=s.type;var y=s.memoizedProps;switch(h[Bi]=s,h[Gu]=y,n=(s.mode&1)!==0,l){case"dialog":te("cancel",h),te("close",h);break;case"iframe":case"object":case"embed":te("load",h);break;case"video":case"audio":for(g=0;g<Uu.length;g++)te(Uu[g],h);break;case"source":te("error",h);break;case"img":case"image":case"link":te("error",h),te("load",h);break;case"details":te("toggle",h);break;case"input":Fv(h,y),te("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},te("invalid",h);break;case"textarea":zv(h,y),te("invalid",h)}Gp(l,y),g=null;for(var b in y)if(y.hasOwnProperty(b)){var P=y[b];b==="children"?typeof P=="string"?h.textContent!==P&&(y.suppressHydrationWarning!==!0&&Dd(h.textContent,P,n),g=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Dd(h.textContent,P,n),g=["children",""+P]):r.hasOwnProperty(b)&&P!=null&&b==="onScroll"&&te("scroll",h)}switch(l){case"input":dd(h),$v(h,y,!0);break;case"textarea":dd(h),Bv(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=Fd)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=jv(l)),n==="http://www.w3.org/1999/xhtml"?l==="script"?(n=b.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=b.createElement(l,{is:h.is}):(n=b.createElement(l),l==="select"&&(b=n,h.multiple?b.multiple=!0:h.size&&(b.size=h.size))):n=b.createElementNS(n,l),n[Bi]=s,n[Gu]=h,tA(n,s,!1,!1),s.stateNode=n;t:{switch(b=Xp(l,h),l){case"dialog":te("cancel",n),te("close",n),g=h;break;case"iframe":case"object":case"embed":te("load",n),g=h;break;case"video":case"audio":for(g=0;g<Uu.length;g++)te(Uu[g],n);g=h;break;case"source":te("error",n),g=h;break;case"img":case"image":case"link":te("error",n),te("load",n),g=h;break;case"details":te("toggle",n),g=h;break;case"input":Fv(n,h),g=Bp(n,h),te("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=Q({},h,{value:void 0}),te("invalid",n);break;case"textarea":zv(n,h),g=Vp(n,h),te("invalid",n);break;default:g=h}Gp(l,g),P=g;for(y in P)if(P.hasOwnProperty(y)){var R=P[y];y==="style"?Wv(n,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Uv(n,R)):y==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&Eu(n,R):typeof R=="number"&&Eu(n,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?R!=null&&y==="onScroll"&&te("scroll",n):R!=null&&O(n,y,R,b))}switch(l){case"input":dd(n),$v(n,h,!1);break;case"textarea":dd(n),Bv(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Ot(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?Io(n,!!h.multiple,y,!1):h.defaultValue!=null&&Io(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=Fd)}switch(l){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break t;case"img":h=!0;break t;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ke(s),null;case 6:if(n&&s.stateNode!=null)nA(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(e(166));if(l=ca(Qu.current),ca(ji.current),Ud(s)){if(h=s.stateNode,l=s.memoizedProps,h[Bi]=s,(y=h.nodeValue!==l)&&(n=Nn,n!==null))switch(n.tag){case 3:Dd(h.nodeValue,l,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Dd(h.nodeValue,l,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(l.nodeType===9?l:l.ownerDocument).createTextNode(h),h[Bi]=s,s.stateNode=h}return Ke(s),null;case 13:if(ee(oe),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ie&&Dn!==null&&s.mode&1&&!(s.flags&128))rw(),qo(),s.flags|=98560,y=!1;else if(y=Ud(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(e(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(e(317));y[Bi]=s}else qo(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ke(s),y=!1}else vi!==null&&(_m(vi),vi=null),y=!0;if(!y)return s.flags&65536?s:null}return s.flags&128?(s.lanes=l,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,s.mode&1&&(n===null||oe.current&1?xe===0&&(xe=3):Cm())),s.updateQueue!==null&&(s.flags|=4),Ke(s),null);case 4:return Zo(),dm(n,s),n===null&&Vu(s.stateNode.containerInfo),Ke(s),null;case 10:return Hg(s.type._context),Ke(s),null;case 17:return Sn(s.type)&&$d(),Ke(s),null;case 19:if(ee(oe),y=s.memoizedState,y===null)return Ke(s),null;if(h=(s.flags&128)!==0,b=y.rendering,b===null)if(h)nc(y,!1);else{if(xe!==0||n!==null&&n.flags&128)for(n=s.child;n!==null;){if(b=Yd(n),b!==null){for(s.flags|=128,nc(y,!1),h=b.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=l,l=s.child;l!==null;)y=l,n=h,y.flags&=14680066,b=y.alternate,b===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=b.childLanes,y.lanes=b.lanes,y.child=b.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=b.memoizedProps,y.memoizedState=b.memoizedState,y.updateQueue=b.updateQueue,y.type=b.type,n=b.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),l=l.sibling;return Zt(oe,oe.current&1|2),s.child}n=n.sibling}y.tail!==null&&pe()>nl&&(s.flags|=128,h=!0,nc(y,!1),s.lanes=4194304)}else{if(!h)if(n=Yd(b),n!==null){if(s.flags|=128,h=!0,l=n.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),nc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!ie)return Ke(s),null}else 2*pe()-y.renderingStartTime>nl&&l!==1073741824&&(s.flags|=128,h=!0,nc(y,!1),s.lanes=4194304);y.isBackwards?(b.sibling=s.child,s.child=b):(l=y.last,l!==null?l.sibling=b:s.child=b,y.last=b)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=pe(),s.sibling=null,l=oe.current,Zt(oe,h?l&1|2:l&1),s):(Ke(s),null);case 22:case 23:return xm(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&s.mode&1?Fn&1073741824&&(Ke(s),s.subtreeFlags&6&&(s.flags|=8192)):Ke(s),null;case 24:return null;case 25:return null}throw Error(e(156,s.tag))}function K_(n,s){switch(Ng(s),s.tag){case 1:return Sn(s.type)&&$d(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Zo(),ee(An),ee(qe),Xg(),n=s.flags,n&65536&&!(n&128)?(s.flags=n&-65537|128,s):null;case 5:return Wg(s),null;case 13:if(ee(oe),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(e(340));qo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ee(oe),null;case 4:return Zo(),null;case 10:return Hg(s.type._context),null;case 22:case 23:return xm(),null;case 24:return null;default:return null}}var rf=!1,Qe=!1,Q_=typeof WeakSet=="function"?WeakSet:Set,rt=null;function tl(n,s){var l=n.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(h){de(n,s,h)}else l.current=null}function fm(n,s,l){try{l()}catch(h){de(n,s,h)}}var iA=!1;function Z_(n,s){if(xg=Ed,n=D0(),yg(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else t:{l=(l=n.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break t}var b=0,P=-1,R=-1,$=0,W=0,X=n,V=null;e:for(;;){for(var et;X!==l||g!==0&&X.nodeType!==3||(P=b+g),X!==y||h!==0&&X.nodeType!==3||(R=b+h),X.nodeType===3&&(b+=X.nodeValue.length),(et=X.firstChild)!==null;)V=X,X=et;for(;;){if(X===n)break e;if(V===l&&++$===g&&(P=b),V===y&&++W===h&&(R=b),(et=X.nextSibling)!==null)break;X=V,V=X.parentNode}X=et}l=P===-1||R===-1?null:{start:P,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Cg={focusedElem:n,selectionRange:l},Ed=!1,rt=s;rt!==null;)if(s=rt,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,rt=n;else for(;rt!==null;){s=rt;try{var lt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var ut=lt.memoizedProps,ge=lt.memoizedState,N=s.stateNode,M=N.getSnapshotBeforeUpdate(s.elementType===s.type?ut:wi(s.type,ut),ge);N.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var F=s.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(q){de(s,s.return,q)}if(n=s.sibling,n!==null){n.return=s.return,rt=n;break}rt=s.return}return lt=iA,iA=!1,lt}function ic(n,s,l){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&fm(s,l,y)}g=g.next}while(g!==h)}}function af(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&n)===n){var h=l.create;l.destroy=h()}l=l.next}while(l!==s)}}function pm(n){var s=n.ref;if(s!==null){var l=n.stateNode;switch(n.tag){case 5:n=l;break;default:n=l}typeof s=="function"?s(n):s.current=n}}function sA(n){var s=n.alternate;s!==null&&(n.alternate=null,sA(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Bi],delete s[Gu],delete s[Rg],delete s[N_],delete s[D_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function rA(n){return n.tag===5||n.tag===3||n.tag===4}function aA(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||rA(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(n,s):l.insertBefore(n,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(n,l)):(s=l,s.appendChild(n)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Fd));else if(h!==4&&(n=n.child,n!==null))for(gm(n,s,l),n=n.sibling;n!==null;)gm(n,s,l),n=n.sibling}function mm(n,s,l){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(mm(n,s,l),n=n.sibling;n!==null;)mm(n,s,l),n=n.sibling}var He=null,Ai=!1;function pr(n,s,l){for(l=l.child;l!==null;)oA(n,s,l),l=l.sibling}function oA(n,s,l){if(Hi&&typeof Hi.onCommitFiberUnmount=="function")try{Hi.onCommitFiberUnmount(vd,l)}catch{}switch(l.tag){case 5:Qe||tl(l,s);case 6:var h=He,g=Ai;He=null,pr(n,s,l),He=h,Ai=g,He!==null&&(Ai?(n=He,l=l.stateNode,n.nodeType===8?n.parentNode.removeChild(l):n.removeChild(l)):He.removeChild(l.stateNode));break;case 18:He!==null&&(Ai?(n=He,l=l.stateNode,n.nodeType===8?Pg(n.parentNode,l):n.nodeType===1&&Pg(n,l),Du(n)):Pg(He,l.stateNode));break;case 4:h=He,g=Ai,He=l.stateNode.containerInfo,Ai=!0,pr(n,s,l),He=h,Ai=g;break;case 0:case 11:case 14:case 15:if(!Qe&&(h=l.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,b=y.destroy;y=y.tag,b!==void 0&&(y&2||y&4)&&fm(l,s,b),g=g.next}while(g!==h)}pr(n,s,l);break;case 1:if(!Qe&&(tl(l,s),h=l.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=l.memoizedProps,h.state=l.memoizedState,h.componentWillUnmount()}catch(P){de(l,s,P)}pr(n,s,l);break;case 21:pr(n,s,l);break;case 22:l.mode&1?(Qe=(h=Qe)||l.memoizedState!==null,pr(n,s,l),Qe=h):pr(n,s,l);break;default:pr(n,s,l)}}function lA(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var l=n.stateNode;l===null&&(l=n.stateNode=new Q_),s.forEach(function(h){var g=oE.bind(null,n,h);l.has(h)||(l.add(h),h.then(g,g))})}}function Si(n,s){var l=s.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];try{var y=n,b=s,P=b;t:for(;P!==null;){switch(P.tag){case 5:He=P.stateNode,Ai=!1;break t;case 3:He=P.stateNode.containerInfo,Ai=!0;break t;case 4:He=P.stateNode.containerInfo,Ai=!0;break t}P=P.return}if(He===null)throw Error(e(160));oA(y,b,g),He=null,Ai=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch($){de(g,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)uA(s,n),s=s.sibling}function uA(n,s){var l=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Si(s,n),Vi(n),h&4){try{ic(3,n,n.return),af(3,n)}catch(ut){de(n,n.return,ut)}try{ic(5,n,n.return)}catch(ut){de(n,n.return,ut)}}break;case 1:Si(s,n),Vi(n),h&512&&l!==null&&tl(l,l.return);break;case 5:if(Si(s,n),Vi(n),h&512&&l!==null&&tl(l,l.return),n.flags&32){var g=n.stateNode;try{Eu(g,"")}catch(ut){de(n,n.return,ut)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,b=l!==null?l.memoizedProps:y,P=n.type,R=n.updateQueue;if(n.updateQueue=null,R!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Ov(g,y),Xp(P,b);var $=Xp(P,y);for(b=0;b<R.length;b+=2){var W=R[b],X=R[b+1];W==="style"?Wv(g,X):W==="dangerouslySetInnerHTML"?Uv(g,X):W==="children"?Eu(g,X):O(g,W,X,$)}switch(P){case"input":jp(g,y);break;case"textarea":Hv(g,y);break;case"select":var V=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var et=y.value;et!=null?Io(g,!!y.multiple,et,!1):V!==!!y.multiple&&(y.defaultValue!=null?Io(g,!!y.multiple,y.defaultValue,!0):Io(g,!!y.multiple,y.multiple?[]:"",!1))}g[Gu]=y}catch(ut){de(n,n.return,ut)}}break;case 6:if(Si(s,n),Vi(n),h&4){if(n.stateNode===null)throw Error(e(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(ut){de(n,n.return,ut)}}break;case 3:if(Si(s,n),Vi(n),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Du(s.containerInfo)}catch(ut){de(n,n.return,ut)}break;case 4:Si(s,n),Vi(n);break;case 13:Si(s,n),Vi(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(wm=pe())),h&4&&lA(n);break;case 22:if(W=l!==null&&l.memoizedState!==null,n.mode&1?(Qe=($=Qe)||W,Si(s,n),Qe=$):Si(s,n),Vi(n),h&8192){if($=n.memoizedState!==null,(n.stateNode.isHidden=$)&&!W&&n.mode&1)for(rt=n,W=n.child;W!==null;){for(X=rt=W;rt!==null;){switch(V=rt,et=V.child,V.tag){case 0:case 11:case 14:case 15:ic(4,V,V.return);break;case 1:tl(V,V.return);var lt=V.stateNode;if(typeof lt.componentWillUnmount=="function"){h=V,l=V.return;try{s=h,lt.props=s.memoizedProps,lt.state=s.memoizedState,lt.componentWillUnmount()}catch(ut){de(h,l,ut)}}break;case 5:tl(V,V.return);break;case 22:if(V.memoizedState!==null){dA(X);continue}}et!==null?(et.return=V,rt=et):dA(X)}W=W.sibling}t:for(W=null,X=n;;){if(X.tag===5){if(W===null){W=X;try{g=X.stateNode,$?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=X.stateNode,R=X.memoizedProps.style,b=R!=null&&R.hasOwnProperty("display")?R.display:null,P.style.display=Vv("display",b))}catch(ut){de(n,n.return,ut)}}}else if(X.tag===6){if(W===null)try{X.stateNode.nodeValue=$?"":X.memoizedProps}catch(ut){de(n,n.return,ut)}}else if((X.tag!==22&&X.tag!==23||X.memoizedState===null||X===n)&&X.child!==null){X.child.return=X,X=X.child;continue}if(X===n)break t;for(;X.sibling===null;){if(X.return===null||X.return===n)break t;W===X&&(W=null),X=X.return}W===X&&(W=null),X.sibling.return=X.return,X=X.sibling}}break;case 19:Si(s,n),Vi(n),h&4&&lA(n);break;case 21:break;default:Si(s,n),Vi(n)}}function Vi(n){var s=n.flags;if(s&2){try{t:{for(var l=n.return;l!==null;){if(rA(l)){var h=l;break t}l=l.return}throw Error(e(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(Eu(g,""),h.flags&=-33);var y=aA(n);mm(n,y,g);break;case 3:case 4:var b=h.stateNode.containerInfo,P=aA(n);gm(n,P,b);break;default:throw Error(e(161))}}catch(R){de(n,n.return,R)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function J_(n,s,l){rt=n,cA(n)}function cA(n,s,l){for(var h=(n.mode&1)!==0;rt!==null;){var g=rt,y=g.child;if(g.tag===22&&h){var b=g.memoizedState!==null||rf;if(!b){var P=g.alternate,R=P!==null&&P.memoizedState!==null||Qe;P=rf;var $=Qe;if(rf=b,(Qe=R)&&!$)for(rt=g;rt!==null;)b=rt,R=b.child,b.tag===22&&b.memoizedState!==null?fA(g):R!==null?(R.return=b,rt=R):fA(g);for(;y!==null;)rt=y,cA(y),y=y.sibling;rt=g,rf=P,Qe=$}hA(n)}else g.subtreeFlags&8772&&y!==null?(y.return=g,rt=y):hA(n)}}function hA(n){for(;rt!==null;){var s=rt;if(s.flags&8772){var l=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Qe||af(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Qe)if(l===null)h.componentDidMount();else{var g=s.elementType===s.type?l.memoizedProps:wi(s.type,l.memoizedProps);h.componentDidUpdate(g,l.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&dw(s,y,h);break;case 3:var b=s.updateQueue;if(b!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}dw(s,b,l)}break;case 5:var P=s.stateNode;if(l===null&&s.flags&4){l=P;var R=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var W=$.memoizedState;if(W!==null){var X=W.dehydrated;X!==null&&Du(X)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Qe||s.flags&512&&pm(s)}catch(V){de(s,s.return,V)}}if(s===n){rt=null;break}if(l=s.sibling,l!==null){l.return=s.return,rt=l;break}rt=s.return}}function dA(n){for(;rt!==null;){var s=rt;if(s===n){rt=null;break}var l=s.sibling;if(l!==null){l.return=s.return,rt=l;break}rt=s.return}}function fA(n){for(;rt!==null;){var s=rt;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{af(4,s)}catch(R){de(s,l,R)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(R){de(s,g,R)}}var y=s.return;try{pm(s)}catch(R){de(s,y,R)}break;case 5:var b=s.return;try{pm(s)}catch(R){de(s,b,R)}}}catch(R){de(s,s.return,R)}if(s===n){rt=null;break}var P=s.sibling;if(P!==null){P.return=s.return,rt=P;break}rt=s.return}}var tE=Math.ceil,of=D.ReactCurrentDispatcher,ym=D.ReactCurrentOwner,ii=D.ReactCurrentBatchConfig,zt=0,Le=null,we=null,Be=0,Fn=0,el=ur(0),xe=0,sc=null,da=0,lf=0,vm=0,rc=null,_n=null,wm=0,nl=1/0,ws=null,uf=!1,Am=null,gr=null,cf=!1,mr=null,hf=0,ac=0,Sm=null,df=-1,ff=0;function cn(){return zt&6?pe():df!==-1?df:df=pe()}function yr(n){return n.mode&1?zt&2&&Be!==0?Be&-Be:O_.transition!==null?(ff===0&&(ff=a0()),ff):(n=Wt,n!==0||(n=window.event,n=n===void 0?16:g0(n.type)),n):1}function bi(n,s,l,h){if(50<ac)throw ac=0,Sm=null,Error(e(185));Ru(n,l,h),(!(zt&2)||n!==Le)&&(n===Le&&(!(zt&2)&&(lf|=l),xe===4&&vr(n,Be)),En(n,h),l===1&&zt===0&&!(s.mode&1)&&(nl=pe()+500,Hd&&hr()))}function En(n,s){var l=n.callbackNode;Ob(n,s);var h=Sd(n,n===Le?Be:0);if(h===0)l!==null&&i0(l),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(l!=null&&i0(l),s===1)n.tag===0?F_(gA.bind(null,n)):tw(gA.bind(null,n)),L_(function(){!(zt&6)&&hr()}),l=null;else{switch(o0(h)){case 1:l=tg;break;case 4:l=s0;break;case 16:l=yd;break;case 536870912:l=r0;break;default:l=yd}l=_A(l,pA.bind(null,n))}n.callbackPriority=s,n.callbackNode=l}}function pA(n,s){if(df=-1,ff=0,zt&6)throw Error(e(327));var l=n.callbackNode;if(il()&&n.callbackNode!==l)return null;var h=Sd(n,n===Le?Be:0);if(h===0)return null;if(h&30||h&n.expiredLanes||s)s=pf(n,h);else{s=h;var g=zt;zt|=2;var y=yA();(Le!==n||Be!==s)&&(ws=null,nl=pe()+500,pa(n,s));do try{iE();break}catch(P){mA(n,P)}while(!0);zg(),of.current=y,zt=g,we!==null?s=0:(Le=null,Be=0,s=xe)}if(s!==0){if(s===2&&(g=eg(n),g!==0&&(h=g,s=bm(n,g))),s===1)throw l=sc,pa(n,0),vr(n,h),En(n,pe()),l;if(s===6)vr(n,h);else{if(g=n.current.alternate,!(h&30)&&!eE(g)&&(s=pf(n,h),s===2&&(y=eg(n),y!==0&&(h=y,s=bm(n,y))),s===1))throw l=sc,pa(n,0),vr(n,h),En(n,pe()),l;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(e(345));case 2:ga(n,_n,ws);break;case 3:if(vr(n,h),(h&130023424)===h&&(s=wm+500-pe(),10<s)){if(Sd(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){cn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Tg(ga.bind(null,n,_n,ws),s);break}ga(n,_n,ws);break;case 4:if(vr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var b=31-mi(h);y=1<<b,b=s[b],b>g&&(g=b),h&=~y}if(h=g,h=pe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*tE(h/1960))-h,10<h){n.timeoutHandle=Tg(ga.bind(null,n,_n,ws),h);break}ga(n,_n,ws);break;case 5:ga(n,_n,ws);break;default:throw Error(e(329))}}}return En(n,pe()),n.callbackNode===l?pA.bind(null,n):null}function bm(n,s){var l=rc;return n.current.memoizedState.isDehydrated&&(pa(n,s).flags|=256),n=pf(n,s),n!==2&&(s=_n,_n=l,s!==null&&_m(s)),n}function _m(n){_n===null?_n=n:_n.push.apply(_n,n)}function eE(n){for(var s=n;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var h=0;h<l.length;h++){var g=l[h],y=g.getSnapshot;g=g.value;try{if(!yi(y(),g))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function vr(n,s){for(s&=~vm,s&=~lf,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var l=31-mi(s),h=1<<l;n[l]=-1,s&=~h}}function gA(n){if(zt&6)throw Error(e(327));il();var s=Sd(n,0);if(!(s&1))return En(n,pe()),null;var l=pf(n,s);if(n.tag!==0&&l===2){var h=eg(n);h!==0&&(s=h,l=bm(n,h))}if(l===1)throw l=sc,pa(n,0),vr(n,s),En(n,pe()),l;if(l===6)throw Error(e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ga(n,_n,ws),En(n,pe()),null}function Em(n,s){var l=zt;zt|=1;try{return n(s)}finally{zt=l,zt===0&&(nl=pe()+500,Hd&&hr())}}function fa(n){mr!==null&&mr.tag===0&&!(zt&6)&&il();var s=zt;zt|=1;var l=ii.transition,h=Wt;try{if(ii.transition=null,Wt=1,n)return n()}finally{Wt=h,ii.transition=l,zt=s,!(zt&6)&&hr()}}function xm(){Fn=el.current,ee(el)}function pa(n,s){n.finishedWork=null,n.finishedLanes=0;var l=n.timeoutHandle;if(l!==-1&&(n.timeoutHandle=-1,M_(l)),we!==null)for(l=we.return;l!==null;){var h=l;switch(Ng(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&$d();break;case 3:Zo(),ee(An),ee(qe),Xg();break;case 5:Wg(h);break;case 4:Zo();break;case 13:ee(oe);break;case 19:ee(oe);break;case 10:Hg(h.type._context);break;case 22:case 23:xm()}l=l.return}if(Le=n,we=n=wr(n.current,null),Be=Fn=s,xe=0,sc=null,vm=lf=da=0,_n=rc=null,ua!==null){for(s=0;s<ua.length;s++)if(l=ua[s],h=l.interleaved,h!==null){l.interleaved=null;var g=h.next,y=l.pending;if(y!==null){var b=y.next;y.next=g,h.next=b}l.pending=h}ua=null}return n}function mA(n,s){do{var l=we;try{if(zg(),Kd.current=tf,Qd){for(var h=le.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}Qd=!1}if(ha=0,Me=Ee=le=null,Zu=!1,Ju=0,ym.current=null,l===null||l.return===null){xe=1,sc=s,we=null;break}t:{var y=n,b=l.return,P=l,R=s;if(s=Be,P.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var $=R,W=P,X=W.tag;if(!(W.mode&1)&&(X===0||X===11||X===15)){var V=W.alternate;V?(W.updateQueue=V.updateQueue,W.memoizedState=V.memoizedState,W.lanes=V.lanes):(W.updateQueue=null,W.memoizedState=null)}var et=Bw(b);if(et!==null){et.flags&=-257,jw(et,b,P,y,s),et.mode&1&&Hw(y,$,s),s=et,R=$;var lt=s.updateQueue;if(lt===null){var ut=new Set;ut.add(R),s.updateQueue=ut}else lt.add(R);break t}else{if(!(s&1)){Hw(y,$,s),Cm();break t}R=Error(e(426))}}else if(ie&&P.mode&1){var ge=Bw(b);if(ge!==null){!(ge.flags&65536)&&(ge.flags|=256),jw(ge,b,P,y,s),Og(Jo(R,P));break t}}y=R=Jo(R,P),xe!==4&&(xe=2),rc===null?rc=[y]:rc.push(y),y=b;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var N=$w(y,R,s);hw(y,N);break t;case 1:P=R;var M=y.type,F=y.stateNode;if(!(y.flags&128)&&(typeof M.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(gr===null||!gr.has(F)))){y.flags|=65536,s&=-s,y.lanes|=s;var q=zw(y,P,s);hw(y,q);break t}}y=y.return}while(y!==null)}wA(l)}catch(ht){s=ht,we===l&&l!==null&&(we=l=l.return);continue}break}while(!0)}function yA(){var n=of.current;return of.current=tf,n===null?tf:n}function Cm(){(xe===0||xe===3||xe===2)&&(xe=4),Le===null||!(da&268435455)&&!(lf&268435455)||vr(Le,Be)}function pf(n,s){var l=zt;zt|=2;var h=yA();(Le!==n||Be!==s)&&(ws=null,pa(n,s));do try{nE();break}catch(g){mA(n,g)}while(!0);if(zg(),zt=l,of.current=h,we!==null)throw Error(e(261));return Le=null,Be=0,xe}function nE(){for(;we!==null;)vA(we)}function iE(){for(;we!==null&&!Tb();)vA(we)}function vA(n){var s=bA(n.alternate,n,Fn);n.memoizedProps=n.pendingProps,s===null?wA(n):we=s,ym.current=null}function wA(n){var s=n;do{var l=s.alternate;if(n=s.return,s.flags&32768){if(l=K_(l,s),l!==null){l.flags&=32767,we=l;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{xe=6,we=null;return}}else if(l=Y_(l,s,Fn),l!==null){we=l;return}if(s=s.sibling,s!==null){we=s;return}we=s=n}while(s!==null);xe===0&&(xe=5)}function ga(n,s,l){var h=Wt,g=ii.transition;try{ii.transition=null,Wt=1,sE(n,s,l,h)}finally{ii.transition=g,Wt=h}return null}function sE(n,s,l,h){do il();while(mr!==null);if(zt&6)throw Error(e(327));l=n.finishedWork;var g=n.finishedLanes;if(l===null)return null;if(n.finishedWork=null,n.finishedLanes=0,l===n.current)throw Error(e(177));n.callbackNode=null,n.callbackPriority=0;var y=l.lanes|l.childLanes;if($b(n,y),n===Le&&(we=Le=null,Be=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||cf||(cf=!0,_A(yd,function(){return il(),null})),y=(l.flags&15990)!==0,l.subtreeFlags&15990||y){y=ii.transition,ii.transition=null;var b=Wt;Wt=1;var P=zt;zt|=4,ym.current=null,Z_(n,l),uA(l,n),E_(Cg),Ed=!!xg,Cg=xg=null,n.current=l,J_(l),Pb(),zt=P,Wt=b,ii.transition=y}else n.current=l;if(cf&&(cf=!1,mr=n,hf=g),y=n.pendingLanes,y===0&&(gr=null),Lb(l.stateNode),En(n,pe()),s!==null)for(h=n.onRecoverableError,l=0;l<s.length;l++)g=s[l],h(g.value,{componentStack:g.stack,digest:g.digest});if(uf)throw uf=!1,n=Am,Am=null,n;return hf&1&&n.tag!==0&&il(),y=n.pendingLanes,y&1?n===Sm?ac++:(ac=0,Sm=n):ac=0,hr(),null}function il(){if(mr!==null){var n=o0(hf),s=ii.transition,l=Wt;try{if(ii.transition=null,Wt=16>n?16:n,mr===null)var h=!1;else{if(n=mr,mr=null,hf=0,zt&6)throw Error(e(331));var g=zt;for(zt|=4,rt=n.current;rt!==null;){var y=rt,b=y.child;if(rt.flags&16){var P=y.deletions;if(P!==null){for(var R=0;R<P.length;R++){var $=P[R];for(rt=$;rt!==null;){var W=rt;switch(W.tag){case 0:case 11:case 15:ic(8,W,y)}var X=W.child;if(X!==null)X.return=W,rt=X;else for(;rt!==null;){W=rt;var V=W.sibling,et=W.return;if(sA(W),W===$){rt=null;break}if(V!==null){V.return=et,rt=V;break}rt=et}}}var lt=y.alternate;if(lt!==null){var ut=lt.child;if(ut!==null){lt.child=null;do{var ge=ut.sibling;ut.sibling=null,ut=ge}while(ut!==null)}}rt=y}}if(y.subtreeFlags&2064&&b!==null)b.return=y,rt=b;else t:for(;rt!==null;){if(y=rt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:ic(9,y,y.return)}var N=y.sibling;if(N!==null){N.return=y.return,rt=N;break t}rt=y.return}}var M=n.current;for(rt=M;rt!==null;){b=rt;var F=b.child;if(b.subtreeFlags&2064&&F!==null)F.return=b,rt=F;else t:for(b=M;rt!==null;){if(P=rt,P.flags&2048)try{switch(P.tag){case 0:case 11:case 15:af(9,P)}}catch(ht){de(P,P.return,ht)}if(P===b){rt=null;break t}var q=P.sibling;if(q!==null){q.return=P.return,rt=q;break t}rt=P.return}}if(zt=g,hr(),Hi&&typeof Hi.onPostCommitFiberRoot=="function")try{Hi.onPostCommitFiberRoot(vd,n)}catch{}h=!0}return h}finally{Wt=l,ii.transition=s}}return!1}function AA(n,s,l){s=Jo(l,s),s=$w(n,s,1),n=fr(n,s,1),s=cn(),n!==null&&(Ru(n,1,s),En(n,s))}function de(n,s,l){if(n.tag===3)AA(n,n,l);else for(;s!==null;){if(s.tag===3){AA(s,n,l);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(gr===null||!gr.has(h))){n=Jo(l,n),n=zw(s,n,1),s=fr(s,n,1),n=cn(),s!==null&&(Ru(s,1,n),En(s,n));break}}s=s.return}}function rE(n,s,l){var h=n.pingCache;h!==null&&h.delete(s),s=cn(),n.pingedLanes|=n.suspendedLanes&l,Le===n&&(Be&l)===l&&(xe===4||xe===3&&(Be&130023424)===Be&&500>pe()-wm?pa(n,0):vm|=l),En(n,s)}function SA(n,s){s===0&&(n.mode&1?(s=Ad,Ad<<=1,!(Ad&130023424)&&(Ad=4194304)):s=1);var l=cn();n=ms(n,s),n!==null&&(Ru(n,s,l),En(n,l))}function aE(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),SA(n,l)}function oE(n,s){var l=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(e(314))}h!==null&&h.delete(s),SA(n,l)}var bA;bA=function(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps||An.current)bn=!0;else{if(!(n.lanes&l)&&!(s.flags&128))return bn=!1,q_(n,s,l);bn=!!(n.flags&131072)}else bn=!1,ie&&s.flags&1048576&&ew(s,jd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;sf(n,s),n=s.pendingProps;var g=Wo(s,qe.current);Qo(s,l),g=Kg(null,s,h,n,g,l);var y=Qg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Sn(h)?(y=!0,zd(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ug(s),g.updater=ef,s.stateNode=g,g._reactInternals=s,im(s,h,n,l),s=om(null,s,h,!0,y,l)):(s.tag=0,ie&&y&&Ig(s),un(null,s,g,l),s=s.child),s;case 16:h=s.elementType;t:{switch(sf(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=uE(h),n=wi(h,n),g){case 0:s=am(null,s,h,n,l);break t;case 1:s=qw(null,s,h,n,l);break t;case 11:s=Uw(null,s,h,n,l);break t;case 14:s=Vw(null,s,h,wi(h.type,n),l);break t}throw Error(e(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:wi(h,g),am(n,s,h,g,l);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:wi(h,g),qw(n,s,h,g,l);case 3:t:{if(Yw(s),n===null)throw Error(e(387));h=s.pendingProps,y=s.memoizedState,g=y.element,cw(n,s),qd(s,h,null,l);var b=s.memoizedState;if(h=b.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=Jo(Error(e(423)),s),s=Kw(n,s,h,l,g);break t}else if(h!==g){g=Jo(Error(e(424)),s),s=Kw(n,s,h,l,g);break t}else for(Dn=lr(s.stateNode.containerInfo.firstChild),Nn=s,ie=!0,vi=null,l=lw(s,null,h,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(qo(),h===g){s=vs(n,s,l);break t}un(n,s,h,l)}s=s.child}return s;case 5:return fw(s),n===null&&Fg(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,b=g.children,kg(h,g)?b=null:y!==null&&kg(h,y)&&(s.flags|=32),Xw(n,s),un(n,s,b,l),s.child;case 6:return n===null&&Fg(s),null;case 13:return Qw(n,s,l);case 4:return Vg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Yo(s,null,h,l):un(n,s,h,l),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:wi(h,g),Uw(n,s,h,g,l);case 7:return un(n,s,s.pendingProps,l),s.child;case 8:return un(n,s,s.pendingProps.children,l),s.child;case 12:return un(n,s,s.pendingProps.children,l),s.child;case 10:t:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,b=g.value,Zt(Wd,h._currentValue),h._currentValue=b,y!==null)if(yi(y.value,b)){if(y.children===g.children&&!An.current){s=vs(n,s,l);break t}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var P=y.dependencies;if(P!==null){b=y.child;for(var R=P.firstContext;R!==null;){if(R.context===h){if(y.tag===1){R=ys(-1,l&-l),R.tag=2;var $=y.updateQueue;if($!==null){$=$.shared;var W=$.pending;W===null?R.next=R:(R.next=W.next,W.next=R),$.pending=R}}y.lanes|=l,R=y.alternate,R!==null&&(R.lanes|=l),Bg(y.return,l,s),P.lanes|=l;break}R=R.next}}else if(y.tag===10)b=y.type===s.type?null:y.child;else if(y.tag===18){if(b=y.return,b===null)throw Error(e(341));b.lanes|=l,P=b.alternate,P!==null&&(P.lanes|=l),Bg(b,l,s),b=y.sibling}else b=y.child;if(b!==null)b.return=y;else for(b=y;b!==null;){if(b===s){b=null;break}if(y=b.sibling,y!==null){y.return=b.return,b=y;break}b=b.return}y=b}un(n,s,g.children,l),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Qo(s,l),g=ei(g),h=h(g),s.flags|=1,un(n,s,h,l),s.child;case 14:return h=s.type,g=wi(h,s.pendingProps),g=wi(h.type,g),Vw(n,s,h,g,l);case 15:return Ww(n,s,s.type,s.pendingProps,l);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:wi(h,g),sf(n,s),s.tag=1,Sn(h)?(n=!0,zd(s)):n=!1,Qo(s,l),Fw(s,h,g),im(s,h,g,l),om(null,s,h,!0,n,l);case 19:return Jw(n,s,l);case 22:return Gw(n,s,l)}throw Error(e(156,s.tag))};function _A(n,s){return n0(n,s)}function lE(n,s,l,h){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(n,s,l,h){return new lE(n,s,l,h)}function km(n){return n=n.prototype,!(!n||!n.isReactComponent)}function uE(n){if(typeof n=="function")return km(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ct)return 11;if(n===Lt)return 14}return 2}function wr(n,s){var l=n.alternate;return l===null?(l=si(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&14680064,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l}function gf(n,s,l,h,g,y){var b=2;if(h=n,typeof n=="function")km(n)&&(b=1);else if(typeof n=="string")b=5;else t:switch(n){case j:return ma(l.children,g,y,s);case K:b=8,g|=8;break;case st:return n=si(12,l,s,g|2),n.elementType=st,n.lanes=y,n;case Et:return n=si(13,l,s,g),n.elementType=Et,n.lanes=y,n;case Ct:return n=si(19,l,s,g),n.elementType=Ct,n.lanes=y,n;case G:return mf(l,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case St:b=10;break t;case tt:b=9;break t;case ct:b=11;break t;case Lt:b=14;break t;case Y:b=16,h=null;break t}throw Error(e(130,n==null?n:typeof n,""))}return s=si(b,l,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function ma(n,s,l,h){return n=si(7,n,h,s),n.lanes=l,n}function mf(n,s,l,h){return n=si(22,n,h,s),n.elementType=G,n.lanes=l,n.stateNode={isHidden:!1},n}function Tm(n,s,l){return n=si(6,n,null,s),n.lanes=l,n}function Pm(n,s,l){return s=si(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function cE(n,s,l,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ng(0),this.expirationTimes=ng(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ng(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Rm(n,s,l,h,g,y,b,P,R){return n=new cE(n,s,l,P,R),s===1?(s=1,y===!0&&(s|=8)):s=0,y=si(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ug(y),n}function hE(n,s,l){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:h==null?null:""+h,children:n,containerInfo:s,implementation:l}}function EA(n){if(!n)return cr;n=n._reactInternals;t:{if(sa(n)!==n||n.tag!==1)throw Error(e(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Sn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(s!==null);throw Error(e(171))}if(n.tag===1){var l=n.type;if(Sn(l))return Z0(n,l,s)}return s}function xA(n,s,l,h,g,y,b,P,R){return n=Rm(l,h,!0,n,g,y,b,P,R),n.context=EA(null),l=n.current,h=cn(),g=yr(l),y=ys(h,g),y.callback=s??null,fr(l,y,g),n.current.lanes=g,Ru(n,g,h),En(n,h),n}function yf(n,s,l,h){var g=s.current,y=cn(),b=yr(g);return l=EA(l),s.context===null?s.context=l:s.pendingContext=l,s=ys(y,b),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=fr(g,s,b),n!==null&&(bi(n,g,b,y),Xd(n,g,b)),b}function vf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function CA(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Mm(n,s){CA(n,s),(n=n.alternate)&&CA(n,s)}var kA=typeof reportError=="function"?reportError:function(n){console.error(n)};function Lm(n){this._internalRoot=n}wf.prototype.render=Lm.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(e(409));yf(n,s,null,null)},wf.prototype.unmount=Lm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;fa(function(){yf(null,n,null,null)}),s[ds]=null}};function wf(n){this._internalRoot=n}wf.prototype.unstable_scheduleHydration=function(n){if(n){var s=c0();n={blockedOn:null,target:n,priority:s};for(var l=0;l<rr.length&&s!==0&&s<rr[l].priority;l++);rr.splice(l,0,n),l===0&&f0(n)}};function Im(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Af(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function TA(){}function dE(n,s,l,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var $=vf(b);y.call($)}}var b=xA(s,h,n,0,null,!1,!1,"",TA);return n._reactRootContainer=b,n[ds]=b.current,Vu(n.nodeType===8?n.parentNode:n),fa(),b}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var P=h;h=function(){var $=vf(R);P.call($)}}var R=Rm(n,0,!1,null,null,!1,!1,"",TA);return n._reactRootContainer=R,n[ds]=R.current,Vu(n.nodeType===8?n.parentNode:n),fa(function(){yf(s,R,l,h)}),R}function Sf(n,s,l,h,g){var y=l._reactRootContainer;if(y){var b=y;if(typeof g=="function"){var P=g;g=function(){var R=vf(b);P.call(R)}}yf(s,b,n,g)}else b=dE(l,s,n,g,h);return vf(b)}l0=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var l=Pu(s.pendingLanes);l!==0&&(ig(s,l|1),En(s,pe()),!(zt&6)&&(nl=pe()+500,hr()))}break;case 13:fa(function(){var h=ms(n,1);if(h!==null){var g=cn();bi(h,n,1,g)}}),Mm(n,1)}},sg=function(n){if(n.tag===13){var s=ms(n,134217728);if(s!==null){var l=cn();bi(s,n,134217728,l)}Mm(n,134217728)}},u0=function(n){if(n.tag===13){var s=yr(n),l=ms(n,s);if(l!==null){var h=cn();bi(l,n,s,h)}Mm(n,s)}},c0=function(){return Wt},h0=function(n,s){var l=Wt;try{return Wt=n,s()}finally{Wt=l}},Kp=function(n,s,l){switch(s){case"input":if(jp(n,l),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var h=l[s];if(h!==n&&h.form===n.form){var g=Od(h);if(!g)throw Error(e(90));Dv(h),jp(h,g)}}}break;case"textarea":Hv(n,l);break;case"select":s=l.value,s!=null&&Io(n,!!l.multiple,s,!1)}},Yv=Em,Kv=fa;var fE={usingClientEntryPoint:!1,Events:[Xu,Uo,Od,Xv,qv,Em]},oc={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pE={bundleType:oc.bundleType,version:oc.version,rendererPackageName:oc.rendererPackageName,rendererConfig:oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=t0(n),n===null?null:n.stateNode},findFiberByHostInstance:oc.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{vd=bf.inject(pE),Hi=bf}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fE,xn.createPortal=function(n,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(s))throw Error(e(200));return hE(n,s,null,l)},xn.createRoot=function(n,s){if(!Im(n))throw Error(e(299));var l=!1,h="",g=kA;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Rm(n,1,!1,null,null,l,!1,h,g),n[ds]=s.current,Vu(n.nodeType===8?n.parentNode:n),new Lm(s)},xn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(e(188)):(n=Object.keys(n).join(","),Error(e(268,n)));return n=t0(s),n=n===null?null:n.stateNode,n},xn.flushSync=function(n){return fa(n)},xn.hydrate=function(n,s,l){if(!Af(s))throw Error(e(200));return Sf(null,n,s,!0,l)},xn.hydrateRoot=function(n,s,l){if(!Im(n))throw Error(e(405));var h=l!=null&&l.hydratedSources||null,g=!1,y="",b=kA;if(l!=null&&(l.unstable_strictMode===!0&&(g=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(b=l.onRecoverableError)),s=xA(s,null,n,1,l??null,g,!1,y,b),n[ds]=s.current,Vu(n),h)for(n=0;n<h.length;n++)l=h[n],g=l._getVersion,g=g(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,g]:s.mutableSourceEagerHydrationData.push(l,g);return new wf(s)},xn.render=function(n,s,l){if(!Af(s))throw Error(e(200));return Sf(null,n,s,!1,l)},xn.unmountComponentAtNode=function(n){if(!Af(n))throw Error(e(40));return n._reactRootContainer?(fa(function(){Sf(null,null,n,!1,function(){n._reactRootContainer=null,n[ds]=null})}),!0):!1},xn.unstable_batchedUpdates=Em,xn.unstable_renderSubtreeIntoContainer=function(n,s,l,h){if(!Af(l))throw Error(e(200));if(n==null||n._reactInternals===void 0)throw Error(e(38));return Sf(n,s,l,!1,h)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var OA;function EE(){if(OA)return Om.exports;OA=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(t){console.error(t)}}return d(),Om.exports=_E(),Om.exports}var $A;function xE(){if($A)return _f;$A=1;var d=EE();return _f.createRoot=d.createRoot,_f.hydrateRoot=d.hydrateRoot,_f}var CE=xE();function ko(d){return Object.keys(d)}function Hm(d){return d&&typeof d=="object"&&!Array.isArray(d)}function pv(d,t){const e={...d},i=t;return Hm(d)&&Hm(t)&&Object.keys(t).forEach(r=>{Hm(i[r])&&r in d?e[r]=pv(e[r],i[r]):e[r]=i[r]}),e}function kE(d){var t;return typeof d!="string"||!d.includes("var(--mantine-scale)")?d:(t=d.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function TE(d){const t=kE(d);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function Bm(d){return d==="0rem"?"0rem":`calc(${d} * var(--mantine-scale))`}function fS(d,{shouldScale:t=!1}={}){function e(i){if(i===0||i==="0")return`0${d}`;if(typeof i=="number"){const r=`${i/16}${d}`;return t?Bm(r):r}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(a=>e(a)).join(",");if(i.includes(" "))return i.split(" ").map(a=>e(a)).join(" ");if(i.includes(d))return t?Bm(i):i;const r=i.replace("px","");if(!Number.isNaN(Number(r))){const a=`${Number(r)/16}${d}`;return t?Bm(a):a}}return i}return e}const Z=fS("rem",{shouldScale:!0}),zA=fS("em"),pS=typeof document<"u"?Vt.useLayoutEffect:Vt.useEffect,gS=Vt.createContext(null);function mS(){const d=Vt.useContext(gS);if(!d)throw new Error("[@mantine/core] MantineProvider was not found in tree");return d}function PE(){return mS().cssVariablesResolver}function yS(){return mS().getStyleNonce}function RE(d){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(d)}function ME(d){let t=d.replace("#","");if(t.length===3){const u=t.split("");t=[u[0],u[0],u[1],u[1],u[2],u[2]].join("")}if(t.length===8){const u=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:u}}const e=parseInt(t,16),i=e>>16&255,r=e>>8&255,a=e&255;return{r:i,g:r,b:a,a:1}}function LE(d){const[t,e,i,r]=d.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:e,b:i,a:r||1}}function IE(d){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,e=d.match(t);if(!e)return{r:0,g:0,b:0,a:1};const i=parseInt(e[1],10),r=parseInt(e[2],10)/100,a=parseInt(e[3],10)/100,u=e[5]?parseFloat(e[5]):void 0,c=(1-Math.abs(2*a-1))*r,f=i/60,p=c*(1-Math.abs(f%2-1)),m=a-c/2;let v,w,S;return f>=0&&f<1?(v=c,w=p,S=0):f>=1&&f<2?(v=p,w=c,S=0):f>=2&&f<3?(v=0,w=c,S=p):f>=3&&f<4?(v=0,w=p,S=c):f>=4&&f<5?(v=p,w=0,S=c):(v=c,w=0,S=p),{r:Math.round((v+m)*255),g:Math.round((w+m)*255),b:Math.round((S+m)*255),a:u||1}}function gv(d){return RE(d)?ME(d):d.startsWith("rgb")?LE(d):d.startsWith("hsl")?IE(d):{r:0,g:0,b:0,a:1}}function Ef(d,t){if(d.startsWith("var("))return`color-mix(in srgb, ${d}, black ${t*100}%)`;const{r:e,g:i,b:r,a}=gv(d),u=1-t,c=f=>Math.round(f*u);return`rgba(${c(e)}, ${c(i)}, ${c(r)}, ${a})`}function Nc(d,t){return typeof d.primaryShade=="number"?d.primaryShade:t==="dark"?d.primaryShade.dark:d.primaryShade.light}function jm(d){return d<=.03928?d/12.92:((d+.055)/1.055)**2.4}function NE(d){const t=d.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function DE(d){if(d.startsWith("oklch("))return(NE(d)||0)/100;const{r:t,g:e,b:i}=gv(d),r=t/255,a=e/255,u=i/255,c=jm(r),f=jm(a),p=jm(u);return .2126*c+.7152*f+.0722*p}function uc(d,t=.179){return d.startsWith("var(")?!1:DE(d)>t}function mv({color:d,theme:t,colorScheme:e}){if(typeof d!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof d}`);if(d==="bright")return{color:d,value:e==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:uc(e==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(d==="dimmed")return{color:d,value:e==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:uc(e==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(d==="white"||d==="black")return{color:d,value:d==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:uc(d==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${d}`};const[i,r]=d.split("."),a=r?Number(r):void 0,u=i in t.colors;if(u){const c=a!==void 0?t.colors[i][a]:t.colors[i][Nc(t,e||"light")];return{color:i,value:c,shade:a,isThemeColor:u,isLight:uc(c,t.luminanceThreshold),variable:r?`--mantine-color-${i}-${a}`:`--mantine-color-${i}-filled`}}return{color:d,value:d,isThemeColor:u,isLight:uc(d,t.luminanceThreshold),shade:a,variable:void 0}}function HA(d,t){const e=mv({color:d||t.primaryColor,theme:t});return e.variable?`var(${e.variable})`:d}function BA(d,t){const e={from:(d==null?void 0:d.from)||t.defaultGradient.from,to:(d==null?void 0:d.to)||t.defaultGradient.to,deg:(d==null?void 0:d.deg)||t.defaultGradient.deg||0},i=HA(e.from,t),r=HA(e.to,t);return`linear-gradient(${e.deg}deg, ${i} 0%, ${r} 100%)`}function As(d,t){if(typeof d!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(d.startsWith("var(")){const a=(1-t)*100;return`color-mix(in srgb, ${d}, transparent ${a}%)`}if(d.startsWith("oklch"))return d.includes("/")?d.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):d.replace(")",` / ${t})`);const{r:e,g:i,b:r}=gv(d);return`rgba(${e}, ${i}, ${r}, ${t})`}const sl=As,FE=({color:d,theme:t,variant:e,gradient:i,autoContrast:r})=>{const a=mv({color:d,theme:t}),u=typeof r=="boolean"?r:t.autoContrast;if(e==="filled"){const c=u&&a.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return a.isThemeColor?a.shade===void 0?{background:`var(--mantine-color-${d}-filled)`,hover:`var(--mantine-color-${d}-filled-hover)`,color:c,border:`${Z(1)} solid transparent`}:{background:`var(--mantine-color-${a.color}-${a.shade})`,hover:`var(--mantine-color-${a.color}-${a.shade===9?8:a.shade+1})`,color:c,border:`${Z(1)} solid transparent`}:{background:d,hover:Ef(d,.1),color:c,border:`${Z(1)} solid transparent`}}if(e==="light"){if(a.isThemeColor){if(a.shade===void 0)return{background:`var(--mantine-color-${d}-light)`,hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${Z(1)} solid transparent`};const c=t.colors[a.color][a.shade];return{background:As(c,.1),hover:As(c,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Z(1)} solid transparent`}}return{background:As(d,.1),hover:As(d,.12),color:d,border:`${Z(1)} solid transparent`}}if(e==="outline")return a.isThemeColor?a.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${d}-outline-hover)`,color:`var(--mantine-color-${d}-outline)`,border:`${Z(1)} solid var(--mantine-color-${d}-outline)`}:{background:"transparent",hover:As(t.colors[a.color][a.shade],.05),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Z(1)} solid var(--mantine-color-${a.color}-${a.shade})`}:{background:"transparent",hover:As(d,.05),color:d,border:`${Z(1)} solid ${d}`};if(e==="subtle"){if(a.isThemeColor){if(a.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${d}-light-hover)`,color:`var(--mantine-color-${d}-light-color)`,border:`${Z(1)} solid transparent`};const c=t.colors[a.color][a.shade];return{background:"transparent",hover:As(c,.12),color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Z(1)} solid transparent`}}return{background:"transparent",hover:As(d,.12),color:d,border:`${Z(1)} solid transparent`}}return e==="transparent"?a.isThemeColor?a.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${d}-light-color)`,border:`${Z(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${a.color}-${Math.min(a.shade,6)})`,border:`${Z(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:d,border:`${Z(1)} solid transparent`}:e==="white"?a.isThemeColor?a.shade===void 0?{background:"var(--mantine-color-white)",hover:Ef(t.white,.01),color:`var(--mantine-color-${d}-filled)`,border:`${Z(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Ef(t.white,.01),color:`var(--mantine-color-${a.color}-${a.shade})`,border:`${Z(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Ef(t.white,.01),color:d,border:`${Z(1)} solid transparent`}:e==="gradient"?{background:BA(i,t),hover:BA(i,t),color:"var(--mantine-color-white)",border:"none"}:e==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Z(1)} solid var(--mantine-color-default-border)`}:{}},OE={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},jA="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",yv={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:OE,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:FE,autoContrast:!1,luminanceThreshold:.3,fontFamily:jA,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:jA,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Z(34),lineHeight:"1.3"},h2:{fontSize:Z(26),lineHeight:"1.35"},h3:{fontSize:Z(22),lineHeight:"1.4"},h4:{fontSize:Z(18),lineHeight:"1.45"},h5:{fontSize:Z(16),lineHeight:"1.5"},h6:{fontSize:Z(14),lineHeight:"1.5"}}},fontSizes:{xs:Z(12),sm:Z(14),md:Z(16),lg:Z(18),xl:Z(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Z(2),sm:Z(4),md:Z(8),lg:Z(16),xl:Z(32)},spacing:{xs:Z(10),sm:Z(12),md:Z(16),lg:Z(20),xl:Z(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), 0 ${Z(1)} ${Z(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(10)} ${Z(15)} ${Z(-5)}, rgba(0, 0, 0, 0.04) 0 ${Z(7)} ${Z(7)} ${Z(-5)}`,md:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(20)} ${Z(25)} ${Z(-5)}, rgba(0, 0, 0, 0.04) 0 ${Z(10)} ${Z(10)} ${Z(-5)}`,lg:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(28)} ${Z(23)} ${Z(-7)}, rgba(0, 0, 0, 0.04) 0 ${Z(12)} ${Z(12)} ${Z(-7)}`,xl:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(36)} ${Z(28)} ${Z(-7)}, rgba(0, 0, 0, 0.04) 0 ${Z(17)} ${Z(17)} ${Z(-7)}`},other:{},components:{}};function UA(d){return d==="auto"||d==="dark"||d==="light"}function $E({key:d="mantine-color-scheme-value"}={}){let t;return{get:e=>{if(typeof window>"u")return e;try{const i=window.localStorage.getItem(d);return UA(i)?i:e}catch{return e}},set:e=>{try{window.localStorage.setItem(d,e)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:e=>{t=i=>{i.storageArea===window.localStorage&&i.key===d&&UA(i.newValue)&&e(i.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(d)}}}const zE="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",VA="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Um(d){return d<0||d>9?!1:parseInt(d.toString(),10)===d}function WA(d){if(!(d.primaryColor in d.colors))throw new Error(zE);if(typeof d.primaryShade=="object"&&(!Um(d.primaryShade.dark)||!Um(d.primaryShade.light)))throw new Error(VA);if(typeof d.primaryShade=="number"&&!Um(d.primaryShade))throw new Error(VA)}function HE(d,t){var i;if(!t)return WA(d),d;const e=pv(d,t);return t.fontFamily&&!((i=t.headings)!=null&&i.fontFamily)&&(e.headings.fontFamily=t.fontFamily),WA(e),e}const vv=Vt.createContext(null),BE=()=>Vt.useContext(vv)||yv;function vS(){const d=Vt.useContext(vv);if(!d)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return d}function wS({theme:d,children:t,inherit:e=!0}){const i=BE(),r=Vt.useMemo(()=>HE(e?i:yv,d),[d,i,e]);return yt.jsx(vv.Provider,{value:r,children:t})}wS.displayName="@mantine/core/MantineThemeProvider";function jE(){const d=vS(),t=yS(),e=ko(d.breakpoints).reduce((i,r)=>{const a=d.breakpoints[r].includes("px"),u=TE(d.breakpoints[r]),c=a?`${u-.1}px`:zA(u-.1),f=a?`${u}px`:zA(u);return`${i}@media (max-width: ${c}) {.mantine-visible-from-${r} {display: none !important;}}@media (min-width: ${f}) {.mantine-hidden-from-${r} {display: none !important;}}`},"");return yt.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:e}})}function Vm(d){return Object.entries(d).map(([t,e])=>`${t}: ${e};`).join("")}function cc(d,t){return(Array.isArray(d)?d:[d]).reduce((i,r)=>`${r}{${i}}`,t)}function UE(d,t){const e=Vm(d.variables),i=e?cc(t,e):"",r=Vm(d.dark),a=Vm(d.light),u=r?cc(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,r):"",c=a?cc(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,a):"";return`${i}${u}${c}`}function VE({color:d,theme:t,autoContrast:e}){return(typeof e=="boolean"?e:t.autoContrast)&&mv({color:d||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function GA(d,t){return VE({color:d.colors[d.primaryColor][Nc(d,t)],theme:d,autoContrast:null})}function xf({theme:d,color:t,colorScheme:e,name:i=t,withColorValues:r=!0}){if(!d.colors[t])return{};if(e==="light"){const c=Nc(d,"light"),f={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${c===9?8:c+1})`,[`--mantine-color-${i}-light`]:sl(d.colors[t][c],.1),[`--mantine-color-${i}-light-hover`]:sl(d.colors[t][c],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${c})`,[`--mantine-color-${i}-outline-hover`]:sl(d.colors[t][c],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...f}:f}const a=Nc(d,"dark"),u={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${a})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${a===9?8:a+1})`,[`--mantine-color-${i}-light`]:sl(d.colors[t][Math.max(0,a-2)],.15),[`--mantine-color-${i}-light-hover`]:sl(d.colors[t][Math.max(0,a-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(a-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(a-4,0)})`,[`--mantine-color-${i}-outline-hover`]:sl(d.colors[t][Math.max(a-4,0)],.05)};return r?{[`--mantine-color-${i}-0`]:d.colors[t][0],[`--mantine-color-${i}-1`]:d.colors[t][1],[`--mantine-color-${i}-2`]:d.colors[t][2],[`--mantine-color-${i}-3`]:d.colors[t][3],[`--mantine-color-${i}-4`]:d.colors[t][4],[`--mantine-color-${i}-5`]:d.colors[t][5],[`--mantine-color-${i}-6`]:d.colors[t][6],[`--mantine-color-${i}-7`]:d.colors[t][7],[`--mantine-color-${i}-8`]:d.colors[t][8],[`--mantine-color-${i}-9`]:d.colors[t][9],...u}:u}function WE(d){return!!d&&typeof d=="object"&&"mantine-virtual-color"in d}function rl(d,t,e){ko(t).forEach(i=>Object.assign(d,{[`--mantine-${e}-${i}`]:t[i]}))}const AS=d=>{const t=Nc(d,"light"),e=d.defaultRadius in d.radius?d.radius[d.defaultRadius]:Z(d.defaultRadius),i={variables:{"--mantine-scale":d.scale.toString(),"--mantine-cursor-type":d.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":d.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":d.fontSmoothing?"grayscale":"unset","--mantine-color-white":d.white,"--mantine-color-black":d.black,"--mantine-line-height":d.lineHeights.md,"--mantine-font-family":d.fontFamily,"--mantine-font-family-monospace":d.fontFamilyMonospace,"--mantine-font-family-headings":d.headings.fontFamily,"--mantine-heading-font-weight":d.headings.fontWeight,"--mantine-heading-text-wrap":d.headings.textWrap,"--mantine-radius-default":e,"--mantine-primary-color-filled":`var(--mantine-color-${d.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${d.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${d.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${d.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${d.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":GA(d,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":d.black,"--mantine-color-body":d.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":GA(d,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${d.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};rl(i.variables,d.breakpoints,"breakpoint"),rl(i.variables,d.spacing,"spacing"),rl(i.variables,d.fontSizes,"font-size"),rl(i.variables,d.lineHeights,"line-height"),rl(i.variables,d.shadows,"shadow"),rl(i.variables,d.radius,"radius"),d.colors[d.primaryColor].forEach((a,u)=>{i.variables[`--mantine-primary-color-${u}`]=`var(--mantine-color-${d.primaryColor}-${u})`}),ko(d.colors).forEach(a=>{const u=d.colors[a];if(WE(u)){Object.assign(i.light,xf({theme:d,name:u.name,color:u.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,xf({theme:d,name:u.name,color:u.dark,colorScheme:"dark",withColorValues:!0}));return}u.forEach((c,f)=>{i.variables[`--mantine-color-${a}-${f}`]=c}),Object.assign(i.light,xf({theme:d,color:a,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,xf({theme:d,color:a,colorScheme:"dark",withColorValues:!1}))});const r=d.headings.sizes;return ko(r).forEach(a=>{i.variables[`--mantine-${a}-font-size`]=r[a].fontSize,i.variables[`--mantine-${a}-line-height`]=r[a].lineHeight,i.variables[`--mantine-${a}-font-weight`]=r[a].fontWeight||d.headings.fontWeight}),i};function GE({theme:d,generator:t}){const e=AS(d),i=t==null?void 0:t(d);return i?pv(e,i):e}const Wm=AS(yv);function XE(d){const t={variables:{},light:{},dark:{}};return ko(d.variables).forEach(e=>{Wm.variables[e]!==d.variables[e]&&(t.variables[e]=d.variables[e])}),ko(d.light).forEach(e=>{Wm.light[e]!==d.light[e]&&(t.light[e]=d.light[e])}),ko(d.dark).forEach(e=>{Wm.dark[e]!==d.dark[e]&&(t.dark[e]=d.dark[e])}),t}function qE(d){return`
  ${d}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${d}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function SS({cssVariablesSelector:d,deduplicateCssVariables:t}){const e=vS(),i=yS(),r=PE(),a=GE({theme:e,generator:r}),u=d===":root"&&t,c=u?XE(a):a,f=UE(c,d);return f?yt.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${f}${u?"":qE(d)}`}}):null}SS.displayName="@mantine/CssVariables";function YE(){const d=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||d(...t)}}function al(d,t){var r;const e=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,i=d!=="auto"?d:e?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",i)}function KE({manager:d,defaultColorScheme:t,getRootElement:e,forceColorScheme:i}){const r=Vt.useRef(null),[a,u]=Vt.useState(()=>d.get(t)),c=i||a,f=Vt.useCallback(m=>{i||(al(m,e),u(m),d.set(m))},[d.set,c,i]),p=Vt.useCallback(()=>{u(t),al(t,e),d.clear()},[d.clear,t]);return Vt.useEffect(()=>(d.subscribe(f),d.unsubscribe),[d.subscribe,d.unsubscribe]),pS(()=>{al(d.get(t),e)},[]),Vt.useEffect(()=>{var v;if(i)return al(i,e),()=>{};i===void 0&&al(a,e),typeof window<"u"&&"matchMedia"in window&&(r.current=window.matchMedia("(prefers-color-scheme: dark)"));const m=w=>{a==="auto"&&al(w.matches?"dark":"light",e)};return(v=r.current)==null||v.addEventListener("change",m),()=>{var w;return(w=r.current)==null?void 0:w.removeEventListener("change",m)}},[a,i]),{colorScheme:c,setColorScheme:f,clearColorScheme:p}}function QE({respectReducedMotion:d,getRootElement:t}){pS(()=>{var e;d&&((e=t())==null||e.setAttribute("data-respect-reduced-motion","true"))},[d])}YE();function bS({theme:d,children:t,getStyleNonce:e,withStaticClasses:i=!0,withGlobalClasses:r=!0,deduplicateCssVariables:a=!0,withCssVariables:u=!0,cssVariablesSelector:c=":root",classNamesPrefix:f="mantine",colorSchemeManager:p=$E(),defaultColorScheme:m="light",getRootElement:v=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:S,stylesTransform:x}){const{colorScheme:C,setColorScheme:k,clearColorScheme:T}=KE({defaultColorScheme:m,forceColorScheme:S,manager:p,getRootElement:v});return QE({respectReducedMotion:(d==null?void 0:d.respectReducedMotion)||!1,getRootElement:v}),yt.jsx(gS.Provider,{value:{colorScheme:C,setColorScheme:k,clearColorScheme:T,getRootElement:v,classNamesPrefix:f,getStyleNonce:e,cssVariablesResolver:w,cssVariablesSelector:c,withStaticClasses:i,stylesTransform:x},children:yt.jsxs(wS,{theme:d,children:[u&&yt.jsx(SS,{cssVariablesSelector:c,deduplicateCssVariables:a}),r&&yt.jsx(jE,{}),t]})})}bS.displayName="@mantine/core/MantineProvider";var Lc={};Lc.d=(d,t)=>{for(var e in t)Lc.o(t,e)&&!Lc.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:t[e]})};Lc.o=(d,t)=>Object.prototype.hasOwnProperty.call(d,t);var xt=globalThis.pdfjsLib={};Lc.d(xt,{AbortException:()=>ta,AnnotationEditorLayer:()=>ov,AnnotationEditorParamsType:()=>$t,AnnotationEditorType:()=>Pt,AnnotationEditorUIManager:()=>Po,AnnotationLayer:()=>GC,AnnotationMode:()=>br,ColorPicker:()=>hp,DOMSVGFactory:()=>kv,DrawLayer:()=>cv,FeatureTest:()=>yn,GlobalWorkerOptions:()=>Qs,ImageKind:()=>Rf,InvalidPDFException:()=>ty,MissingPDFException:()=>Dc,OPS:()=>Ei,OutputScale:()=>ny,PDFDataRangeTransport:()=>E1,PDFDateString:()=>_v,PDFWorker:()=>yl,PasswordResponses:()=>ex,PermissionFlag:()=>tx,PixelsPerInch:()=>ea,RenderingCancelledException:()=>Sv,TextLayer:()=>Fc,TouchManager:()=>up,UnexpectedResponseException:()=>ap,Util:()=>pt,VerbosityLevel:()=>Ip,XfaLayer:()=>C1,build:()=>CC,createValidAbsoluteUrl:()=>rx,fetchData:()=>Op,getDocument:()=>yC,getFilenameFromUrl:()=>px,getPdfFilenameFromUrl:()=>gx,getXfaPageViewport:()=>mx,isDataScheme:()=>$p,isPdfFile:()=>bv,noContextMenu:()=>$i,normalizeUnicode:()=>hx,setLayerDimensions:()=>To,shadow:()=>Ft,stopEvent:()=>Qn,version:()=>xC});const on=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),_S=[1,0,0,1,0,0],Jm=[.001,0,0,.001,0,0],ZE=1e7,Gm=1.35,Yn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},br={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},JE="pdfjs_internal_editor_",Pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},$t={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},tx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ze={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Rf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ce={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},hc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Ip={ERRORS:0,WARNINGS:1,INFOS:5},Ei={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},ex={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Np=Ip.WARNINGS;function nx(d){Number.isInteger(d)&&(Np=d)}function ix(){return Np}function Dp(d){Np>=Ip.INFOS&&console.log(`Info: ${d}`)}function Rt(d){Np>=Ip.WARNINGS&&console.log(`Warning: ${d}`)}function Qt(d){throw new Error(d)}function be(d,t){d||Qt(t)}function sx(d){switch(d==null?void 0:d.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rx(d,t=null,e=null){if(!d)return null;try{if(e&&typeof d=="string"){if(e.addDefaultProtocol&&d.startsWith("www.")){const r=d.match(/\./g);(r==null?void 0:r.length)>=2&&(d=`http://${d}`)}if(e.tryConvertEncoding)try{d=cx(d)}catch{}}const i=t?new URL(d,t):new URL(d);if(sx(i))return i}catch{}return null}function Ft(d,t,e,i=!1){return Object.defineProperty(d,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const ia=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class XA extends ia{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Xm extends ia{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class ty extends ia{constructor(t){super(t,"InvalidPDFException")}}class Dc extends ia{constructor(t){super(t,"MissingPDFException")}}class ap extends ia{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class ax extends ia{constructor(t){super(t,"FormatError")}}class ta extends ia{constructor(t){super(t,"AbortException")}}function ES(d){(typeof d!="object"||(d==null?void 0:d.length)===void 0)&&Qt("Invalid argument for bytesToString");const t=d.length,e=8192;if(t<e)return String.fromCharCode.apply(null,d);const i=[];for(let r=0;r<t;r+=e){const a=Math.min(r+e,t),u=d.subarray(r,a);i.push(String.fromCharCode.apply(null,u))}return i.join("")}function Fp(d){typeof d!="string"&&Qt("Invalid argument for stringToBytes");const t=d.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=d.charCodeAt(i)&255;return e}function ox(d){return String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255)}function wv(d){const t=Object.create(null);for(const[e,i]of d)t[e]=i;return t}function lx(){const d=new Uint8Array(4);return d[0]=1,new Uint32Array(d.buffer,0,1)[0]===1}function ux(){try{return new Function(""),!0}catch{return!1}}class yn{static get isLittleEndian(){return Ft(this,"isLittleEndian",lx())}static get isEvalSupported(){return Ft(this,"isEvalSupported",ux())}static get isOffscreenCanvasSupported(){return Ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ft(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ft(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ft(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Ft(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const qm=Array.from(Array(256).keys(),d=>d.toString(16).padStart(2,"0"));var Zs,Mf,ey;class pt{static makeHexColor(t,e,i){return`#${qm[t]}${qm[e]}${qm[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const i=t[0]*e[0]+t[1]*e[2]+e[4],r=t[0]*e[1]+t[1]*e[3]+e[5];return[i,r]}static applyInverseTransform(t,e){const i=e[0]*e[3]-e[1]*e[2],r=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,a=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[r,a]}static getAxialAlignedBoundingBox(t,e){const i=this.applyTransform(t,e),r=this.applyTransform(t.slice(2,4),e),a=this.applyTransform([t[0],t[3]],e),u=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],a[0],u[0]),Math.min(i[1],r[1],a[1],u[1]),Math.max(i[0],r[0],a[0],u[0]),Math.max(i[1],r[1],a[1],u[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],a=t[2]*e[0]+t[3]*e[2],u=t[2]*e[1]+t[3]*e[3],c=(i+u)/2,f=Math.sqrt((i+u)**2-4*(i*u-a*r))/2,p=c+f||1,m=c-f||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const a=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return a>u?null:[i,a,r,u]}static bezierBoundingBox(t,e,i,r,a,u,c,f,p){return p?(p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,f)):p=[Math.min(t,c),Math.min(e,f),Math.max(t,c),Math.max(e,f)],E(this,Zs,ey).call(this,t,i,a,c,e,r,u,f,3*(-t+3*(i-a)+c),6*(t-2*i+a),3*(i-t),p),E(this,Zs,ey).call(this,t,i,a,c,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p),p}}Zs=new WeakSet,Mf=function(t,e,i,r,a,u,c,f,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,S=w*p,x=v*(v*(v*t+3*p*e)+3*w*i)+S*r,C=v*(v*(v*a+3*p*u)+3*w*c)+S*f;m[0]=Math.min(m[0],x),m[1]=Math.min(m[1],C),m[2]=Math.max(m[2],x),m[3]=Math.max(m[3],C)},ey=function(t,e,i,r,a,u,c,f,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&E(this,Zs,Mf).call(this,t,e,i,r,a,u,c,f,-v/m,w);return}const S=m**2-4*v*p;if(S<0)return;const x=Math.sqrt(S),C=2*p;E(this,Zs,Mf).call(this,t,e,i,r,a,u,c,f,(-m+x)/C,w),E(this,Zs,Mf).call(this,t,e,i,r,a,u,c,f,(-m-x)/C,w)},_(pt,Zs);function cx(d){return decodeURIComponent(escape(d))}let Ym=null,qA=null;function hx(d){return Ym||(Ym=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,qA=new Map([["ﬅ","ſt"]])),d.replaceAll(Ym,(t,e,i)=>e?e.normalize("NFKC"):qA.get(i))}function dx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const d=new Uint8Array(32);return crypto.getRandomValues(d),ES(d)}const Av="pdfjs_internal_id_";function fx(d){return Uint8Array.prototype.toBase64?d.toBase64():btoa(ES(d))}typeof Promise.try!="function"&&(Promise.try=function(d,...t){return new Promise(e=>{e(d(...t))})});const Ss="http://www.w3.org/2000/svg",Aa=class Aa{};wt(Aa,"CSS",96),wt(Aa,"PDF",72),wt(Aa,"PDF_TO_CSS_UNITS",Aa.CSS/Aa.PDF);let ea=Aa;async function Op(d,t="text"){if(mc(d,document.baseURI)){const e=await fetch(d);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",d,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class ud{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:a=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=a,this.offsetY=u,i*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,v,w,S;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,v=0,w=0,S=1;break;case 90:m=0,v=1,w=1,S=0;break;case 270:m=0,v=-1,w=-1,S=0;break;case 0:m=1,v=0,w=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(w=-w,S=-S);let x,C,k,T;m===0?(x=Math.abs(p-t[1])*i+a,C=Math.abs(f-t[0])*i+u,k=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(x=Math.abs(f-t[0])*i+a,C=Math.abs(p-t[1])*i+u,k=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[m*i,v*i,w*i,S*i,x-m*i*f-w*i*p,C-v*i*f-S*i*p],this.width=k,this.height=T}get rawDims(){const{userUnit:t,viewBox:e}=this,i=e.map(r=>r*t);return Ft(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:a=!1}={}){return new ud({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}convertToViewportPoint(t,e){return pt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=pt.applyTransform([t[0],t[1]],this.transform),i=pt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return pt.applyInverseTransform([t,e],this.transform)}}class Sv extends ia{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function $p(d){const t=d.length;let e=0;for(;e<t&&d[e].trim()==="";)e++;return d.substring(e,e+5).toLowerCase()==="data:"}function bv(d){return typeof d=="string"&&/\.pdf$/i.test(d)}function px(d){return[d]=d.split(/[#?]/,1),d.substring(d.lastIndexOf("/")+1)}function gx(d,t="document.pdf"){if(typeof d!="string")return t;if($p(d))return Rt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(d);let a=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(a&&(a=a[0],a.includes("%")))try{a=i.exec(decodeURIComponent(a))[0]}catch{}return a||t}class YA{constructor(){wt(this,"started",Object.create(null));wt(this,"times",[])}time(t){t in this.started&&Rt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Rt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:a}of this.times)t.push(`${i.padEnd(e)} ${a-r}ms
`);return t.join("")}}function mc(d,t){try{const{protocol:e}=t?new URL(d,t):new URL(d);return e==="http:"||e==="https:"}catch{return!1}}function $i(d){d.preventDefault()}function Qn(d){d.preventDefault(),d.stopPropagation()}var $c;class _v{static toDateObject(t){if(!t||typeof t!="string")return null;o(this,$c)||A(this,$c,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=o(this,$c).exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let a=parseInt(e[3],10);a=a>=1&&a<=31?a:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(e[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(u+=m,c+=v):p==="+"&&(u-=m,c-=v),new Date(Date.UTC(i,r,a,u,c,f))}}$c=new WeakMap,_(_v,$c);function mx(d,{scale:t=1,rotation:e=0}){const{width:i,height:r}=d.attributes.style,a=[0,0,parseInt(i),parseInt(r)];return new ud({viewBox:a,userUnit:1,scale:t,rotation:e})}function Ev(d){if(d.startsWith("#")){const t=parseInt(d.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return d.startsWith("rgb(")?d.slice(4,-1).split(",").map(t=>parseInt(t)):d.startsWith("rgba(")?d.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Rt(`Not a valid color format: "${d}"`),[0,0,0])}function yx(d){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of d.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;d.set(e,Ev(i))}t.remove()}function re(d){const{a:t,b:e,c:i,d:r,e:a,f:u}=d.getTransform();return[t,e,i,r,a,u]}function Wi(d){const{a:t,b:e,c:i,d:r,e:a,f:u}=d.getTransform().invertSelf();return[t,e,i,r,a,u]}function To(d,t,e=!1,i=!0){if(t instanceof ud){const{pageWidth:r,pageHeight:a}=t.rawDims,{style:u}=d,c=yn.isCSSRoundSupported,f=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${a}px`,m=c?`round(down, ${f}, var(--scale-round-x, 1px))`:`calc(${f})`,v=c?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=m,u.height=v):(u.width=v,u.height=m)}i&&d.setAttribute("data-main-rotation",t.rotation)}class ny{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var _r,ba,xi,_a,zc,Hc,pp,xS,vn,CS,kS,Lf,TS,sy;const Es=class Es{constructor(t){_(this,vn);_(this,_r,null);_(this,ba,null);_(this,xi);_(this,_a,null);_(this,zc,null);A(this,xi,t),o(Es,Hc)||A(Es,Hc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=A(this,_r,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=o(this,xi)._uiManager._signal;t.addEventListener("contextmenu",$i,{signal:e}),t.addEventListener("pointerdown",E(Es,pp,xS),{signal:e});const i=A(this,_a,document.createElement("div"));i.className="buttons",t.append(i);const r=o(this,xi).toolbarPosition;if(r){const{style:a}=t,u=o(this,xi)._uiManager.direction==="ltr"?1-r[0]:r[0];a.insetInlineEnd=`${100*u}%`,a.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return E(this,vn,TS).call(this),t}get div(){return o(this,_r)}hide(){var t;o(this,_r).classList.add("hidden"),(t=o(this,ba))==null||t.hideDropdown()}show(){var t;o(this,_r).classList.remove("hidden"),(t=o(this,zc))==null||t.shown()}async addAltText(t){const e=await t.render();E(this,vn,Lf).call(this,e),o(this,_a).prepend(e,o(this,vn,sy)),A(this,zc,t)}addColorPicker(t){A(this,ba,t);const e=t.renderButton();E(this,vn,Lf).call(this,e),o(this,_a).prepend(e,o(this,vn,sy))}remove(){var t;o(this,_r).remove(),(t=o(this,ba))==null||t.destroy(),A(this,ba,null)}};_r=new WeakMap,ba=new WeakMap,xi=new WeakMap,_a=new WeakMap,zc=new WeakMap,Hc=new WeakMap,pp=new WeakSet,xS=function(t){t.stopPropagation()},vn=new WeakSet,CS=function(t){o(this,xi)._focusEventsAllowed=!1,Qn(t)},kS=function(t){o(this,xi)._focusEventsAllowed=!0,Qn(t)},Lf=function(t){const e=o(this,xi)._uiManager._signal;t.addEventListener("focusin",E(this,vn,CS).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,vn,kS).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",$i,{signal:e})},TS=function(){const{editorType:t,_uiManager:e}=o(this,xi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",o(Es,Hc)[t]),E(this,vn,Lf).call(this,i),i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),o(this,_a).append(i)},sy=function(){const t=document.createElement("div");return t.className="divider",t},_(Es,pp),_(Es,Hc,null);let iy=Es;var Bc,Ea,xa,na,PS,RS,MS;class vx{constructor(t){_(this,na);_(this,Bc,null);_(this,Ea,null);_(this,xa);A(this,xa,t)}show(t,e,i){const[r,a]=E(this,na,RS).call(this,e,i),{style:u}=o(this,Ea)||A(this,Ea,E(this,na,PS).call(this));t.append(o(this,Ea)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Ea).remove()}}Bc=new WeakMap,Ea=new WeakMap,xa=new WeakMap,na=new WeakSet,PS=function(){const t=A(this,Ea,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",$i,{signal:o(this,xa)._signal});const e=A(this,Bc,document.createElement("div"));return e.className="buttons",t.append(e),E(this,na,MS).call(this),t},RS=function(t,e){let i=0,r=0;for(const a of t){const u=a.y+a.height;if(u<i)continue;const c=a.x+(e?a.width:0);if(u>i){r=c,i=u;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,i]},MS=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=o(this,xa)._signal;t.addEventListener("contextmenu",$i,{signal:i}),t.addEventListener("click",()=>{o(this,xa).highlightSelection("floating_button")},{signal:i}),o(this,Bc).append(t)};function op(d,t,e){for(const i of e)t.addEventListener(i,d[i].bind(d))}var gp;class wx{constructor(){_(this,gp,0)}get id(){return`${JE}${hn(this,gp)._++}`}}gp=new WeakMap;var vl,jc,en,wl,If;const Pv=class Pv{constructor(){_(this,wl);_(this,vl,dx());_(this,jc,0);_(this,en,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const a=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ft(this,"_isSVGFittingCanvas",a)}async getFromFile(t){const{lastModified:e,name:i,size:r,type:a}=t;return E(this,wl,If).call(this,`${e}_${i}_${r}_${a}`,t)}async getFromUrl(t){return E(this,wl,If).call(this,t,t)}async getFromBlob(t,e){const i=await e;return E(this,wl,If).call(this,t,i)}async getFromId(t){o(this,en)||A(this,en,new Map);const e=o(this,en).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){o(this,en)||A(this,en,new Map);let i=o(this,en).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${o(this,vl)}_${hn(this,jc)._++}`,refCounter:1,isSvg:!1},o(this,en).set(t,i),o(this,en).set(i.id,i),i}getSvgUrl(t){const e=o(this,en).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;o(this,en)||A(this,en,new Map);const e=o(this,en).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}(r=i.close)==null||r.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${o(this,vl)}_`)}};vl=new WeakMap,jc=new WeakMap,en=new WeakMap,wl=new WeakSet,If=async function(t,e){o(this,en)||A(this,en,new Map);let i=o(this,en).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${o(this,vl)}_${hn(this,jc)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(i.url=e,r=await Op(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const a=Pv._isSVGFittingCanvas,u=new FileReader,c=new Image,f=new Promise((p,m)=>{c.onload=()=>{i.bitmap=c,i.isSvg=!0,p()},u.onload=async()=>{const v=i.svgUrl=u.result;c.src=await a?`${v}#svgView(preserveAspectRatio(none))`:v},c.onerror=u.onerror=m});u.readAsDataURL(r),await f}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Rt(r),i=null}return o(this,en).set(t,i),i&&o(this,en).set(i.id,i),i};let ry=Pv;var me,Er,Uc,ue;class Ax{constructor(t=128){_(this,me,[]);_(this,Er,!1);_(this,Uc);_(this,ue,-1);A(this,Uc,t)}add({cmd:t,undo:e,post:i,mustExec:r,type:a=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),o(this,Er))return;const f={cmd:t,undo:e,post:i,type:a};if(o(this,ue)===-1){o(this,me).length>0&&(o(this,me).length=0),A(this,ue,0),o(this,me).push(f);return}if(u&&o(this,me)[o(this,ue)].type===a){c&&(f.undo=o(this,me)[o(this,ue)].undo),o(this,me)[o(this,ue)]=f;return}const p=o(this,ue)+1;p===o(this,Uc)?o(this,me).splice(0,1):(A(this,ue,p),p<o(this,me).length&&o(this,me).splice(p)),o(this,me).push(f)}undo(){if(o(this,ue)===-1)return;A(this,Er,!0);const{undo:t,post:e}=o(this,me)[o(this,ue)];t(),e==null||e(),A(this,Er,!1),A(this,ue,o(this,ue)-1)}redo(){if(o(this,ue)<o(this,me).length-1){A(this,ue,o(this,ue)+1),A(this,Er,!0);const{cmd:t,post:e}=o(this,me)[o(this,ue)];t(),e==null||e(),A(this,Er,!1)}}hasSomethingToUndo(){return o(this,ue)!==-1}hasSomethingToRedo(){return o(this,ue)<o(this,me).length-1}cleanType(t){if(o(this,ue)!==-1){for(let e=o(this,ue);e>=0;e--)if(o(this,me)[e].type!==t){o(this,me).splice(e+1,o(this,ue)-e),A(this,ue,e);return}o(this,me).length=0,A(this,ue,-1)}}destroy(){A(this,me,null)}}me=new WeakMap,Er=new WeakMap,Uc=new WeakMap,ue=new WeakMap;var mp,LS;class cd{constructor(t){_(this,mp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=yn.platform;for(const[i,r,a={}]of t)for(const u of i){const c=u.startsWith("mac+");e&&c?(this.callbacks.set(u.slice(4),{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1))):!e&&!c&&(this.callbacks.set(u,{callback:r,options:a}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(E(this,mp,LS).call(this,e));if(!i)return;const{callback:r,options:{bubbles:a=!1,args:u=[],checker:c=null}}=i;c&&!c(t,e)||(r.bind(t,...u,e)(),a||Qn(e))}}mp=new WeakSet,LS=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const yp=class yp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return yx(t),Ft(this,"_colors",t)}convert(t){const e=Ev(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((a,u)=>a===e[u]))return yp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}};wt(yp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ay=yp;var Al,On,Te,je,Sl,Cs,bl,ai,xr,Ca,_l,ka,qi,Ci,Ta,Vc,Wc,El,Gc,Yi,Cr,xl,kr,Ki,vp,Tr,Xc,Pr,Pa,qc,Yc,Ne,Gt,ks,Ra,Kc,Qc,Rr,Qi,Ts,Zc,oi,J,Nf,oy,IS,NS,Df,DS,FS,OS,ly,$S,uy,cy,zS,dn,bs,HS,BS,hy,jS,yc,dy;const pl=class pl{constructor(t,e,i,r,a,u,c,f,p,m,v,w,S){_(this,J);_(this,Al,new AbortController);_(this,On,null);_(this,Te,new Map);_(this,je,new Map);_(this,Sl,null);_(this,Cs,null);_(this,bl,null);_(this,ai,new Ax);_(this,xr,null);_(this,Ca,null);_(this,_l,0);_(this,ka,new Set);_(this,qi,null);_(this,Ci,null);_(this,Ta,new Set);wt(this,"_editorUndoBar",null);_(this,Vc,!1);_(this,Wc,!1);_(this,El,!1);_(this,Gc,null);_(this,Yi,null);_(this,Cr,null);_(this,xl,null);_(this,kr,!1);_(this,Ki,null);_(this,vp,new wx);_(this,Tr,!1);_(this,Xc,!1);_(this,Pr,null);_(this,Pa,null);_(this,qc,null);_(this,Yc,null);_(this,Ne,Pt.NONE);_(this,Gt,new Set);_(this,ks,null);_(this,Ra,null);_(this,Kc,null);_(this,Qc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,Rr,[0,0]);_(this,Qi,null);_(this,Ts,null);_(this,Zc,null);_(this,oi,null);const x=this._signal=o(this,Al).signal;A(this,Ts,t),A(this,Zc,e),A(this,Sl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:x}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),r._on("setpreference",this.onSetPreference.bind(this),{signal:x}),r._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:x}),E(this,J,DS).call(this),E(this,J,zS).call(this),E(this,J,ly).call(this),A(this,Cs,a.annotationStorage),A(this,Gc,a.filterFactory),A(this,Ra,u),A(this,xl,c||null),A(this,Vc,f),A(this,Wc,p),A(this,El,m),A(this,Yc,v||null),this.viewParameters={realScale:ea.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=pl.prototype,e=u=>o(u,Ts).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),i=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:f}=c;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new cd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&o(u,Ts).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&o(u,Ts).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}destroy(){var t,e,i,r,a;(t=o(this,oi))==null||t.resolve(),A(this,oi,null),(e=o(this,Al))==null||e.abort(),A(this,Al,null),this._signal=null;for(const u of o(this,je).values())u.destroy();o(this,je).clear(),o(this,Te).clear(),o(this,Ta).clear(),A(this,On,null),o(this,Gt).clear(),o(this,ai).destroy(),(i=o(this,Sl))==null||i.destroy(),(r=o(this,Ki))==null||r.hide(),A(this,Ki,null),o(this,Yi)&&(clearTimeout(o(this,Yi)),A(this,Yi,null)),o(this,Qi)&&(clearTimeout(o(this,Qi)),A(this,Qi,null)),(a=this._editorUndoBar)==null||a.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return o(this,Yc)}get useNewAltTextFlow(){return o(this,Wc)}get useNewAltTextWhenAddingImage(){return o(this,El)}get hcmFilter(){return Ft(this,"hcmFilter",o(this,Ra)?o(this,Gc).addHCMFilter(o(this,Ra).foreground,o(this,Ra).background):"none")}get direction(){return Ft(this,"direction",getComputedStyle(o(this,Ts)).direction)}get highlightColors(){return Ft(this,"highlightColors",o(this,xl)?new Map(o(this,xl).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ft(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Ca,t)}setMainHighlightColorPicker(t){A(this,qc,t)}editAltText(t,e=!1){var i;(i=o(this,Sl))==null||i.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,El,e);break}}onPageChanging({pageNumber:t}){A(this,_l,t-1)}focusMainContainer(){o(this,Ts).focus()}findParent(t,e){for(const i of o(this,je).values()){const{x:r,y:a,width:u,height:c}=i.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=a&&e<=a+c)return i}return null}disableUserSelect(t=!1){o(this,Zc).classList.toggle("noUserSelect",t)}addShouldRescale(t){o(this,Ta).add(t)}removeShouldRescale(t){o(this,Ta).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ea.PDF_TO_CSS_UNITS;for(const i of o(this,Ta))i.onScaleChanging();(e=o(this,Ca))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u}=e,c=e.toString(),p=E(this,J,Nf).call(this,e).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;e.empty();const v=E(this,J,oy).call(this,p),w=o(this,Ne)===Pt.NONE,S=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:u,text:c}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Pt.HIGHLIGHT,S);return}S()}addToAnnotationStorage(t){!t.isEmpty()&&o(this,Cs)&&!o(this,Cs).has(t.id)&&o(this,Cs).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,o(this,kr)&&(A(this,kr,!1),E(this,J,Df).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of o(this,Gt))if(e.div.contains(t)){A(this,Pa,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!o(this,Pa))return;const[t,e]=o(this,Pa);A(this,Pa,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,J,ly).call(this),E(this,J,uy).call(this)}removeEditListeners(){E(this,J,$S).call(this),E(this,J,cy).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of o(this,Ci))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of o(this,Ci))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=o(this,On))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of o(this,Gt)){const a=r.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const a of e.items)for(const u of o(this,Ci))if(u.isHandlingMimeForPasting(a.type)){u.paste(a,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(a){Rt(`paste: "${a.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const a=[];for(const f of i){const p=await r.deserialize(f);if(!p)return;a.push(p)}const u=()=>{for(const f of a)E(this,J,hy).call(this,f);E(this,J,dy).call(this,a)},c=()=>{for(const f of a)f.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(a){Rt(`paste: "${a.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,Ne)!==Pt.NONE&&!this.isEditorHandlingKeyboard&&pl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,kr)&&(A(this,kr,!1),E(this,J,Df).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,J,FS).call(this),E(this,J,uy).call(this),E(this,J,dn).call(this,{isEditing:o(this,Ne)!==Pt.NONE,isEmpty:E(this,J,yc).call(this),hasSomethingToUndo:o(this,ai).hasSomethingToUndo(),hasSomethingToRedo:o(this,ai).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,J,OS).call(this),E(this,J,cy).call(this),E(this,J,dn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!o(this,Ci)){A(this,Ci,t);for(const e of o(this,Ci))E(this,J,bs).call(this,e.defaultPropertiesToUpdate)}}getId(){return o(this,vp).id}get currentLayer(){return o(this,je).get(o(this,_l))}getLayer(t){return o(this,je).get(t)}get currentPageIndex(){return o(this,_l)}addLayer(t){o(this,je).set(t.pageIndex,t),o(this,Tr)?t.enable():t.disable()}removeLayer(t){o(this,je).delete(t.pageIndex)}async updateMode(t,e=null,i=!1){var r;if(o(this,Ne)!==t&&!(o(this,oi)&&(await o(this,oi).promise,!o(this,oi)))){if(A(this,oi,Promise.withResolvers()),A(this,Ne,t),t===Pt.NONE){this.setEditingState(!1),E(this,J,BS).call(this),(r=this._editorUndoBar)==null||r.hide(),o(this,oi).resolve();return}this.setEditingState(!0),await E(this,J,HS).call(this),this.unselectAll();for(const a of o(this,je).values())a.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),o(this,oi).resolve();return}for(const a of o(this,Te).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();o(this,oi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==o(this,Ne)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var i;if(o(this,Ci)){switch(t){case $t.CREATE:this.currentLayer.addNewEditor();return;case $t.HIGHLIGHT_DEFAULT_COLOR:(i=o(this,qc))==null||i.updateColor(e);break;case $t.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,Kc)||A(this,Kc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of o(this,Gt))r.updateParams(t,e);for(const r of o(this,Ci))r.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var a;for(const u of o(this,Te).values())u.editorType===t&&u.show(e);(((a=o(this,Kc))==null?void 0:a.get($t.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,J,bs).call(this,[[$t.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(o(this,Xc)!==t){A(this,Xc,t);for(const e of o(this,je).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of o(this,Te).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return o(this,Te).get(t)}addEditor(t){o(this,Te).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(o(this,Yi)&&clearTimeout(o(this,Yi)),A(this,Yi,setTimeout(()=>{this.focusMainContainer(),A(this,Yi,null)},0))),o(this,Te).delete(t.id),this.unselect(t),(!t.annotationElementId||!o(this,ka).has(t.annotationElementId))&&((e=o(this,Cs))==null||e.remove(t.id))}addDeletedAnnotationElement(t){o(this,ka).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return o(this,ka).has(t)}removeDeletedAnnotationElement(t){o(this,ka).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){o(this,On)!==t&&(A(this,On,t),t&&E(this,J,bs).call(this,t.propertiesToUpdate))}updateUI(t){o(this,J,jS)===t&&E(this,J,bs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,J,bs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(o(this,Gt).has(t)){o(this,Gt).delete(t),t.unselect(),E(this,J,dn).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Gt).add(t),t.select(),E(this,J,bs).call(this,t.propertiesToUpdate),E(this,J,dn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=o(this,Ca))==null||e.commitOrRemove();for(const i of o(this,Gt))i!==t&&i.unselect();o(this,Gt).clear(),o(this,Gt).add(t),t.select(),E(this,J,bs).call(this,t.propertiesToUpdate),E(this,J,dn).call(this,{hasSelectedEditor:!0})}isSelected(t){return o(this,Gt).has(t)}get firstSelectedEditor(){return o(this,Gt).values().next().value}unselect(t){t.unselect(),o(this,Gt).delete(t),E(this,J,dn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Gt).size!==0}get isEnterHandled(){return o(this,Gt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;o(this,ai).undo(),E(this,J,dn).call(this,{hasSomethingToUndo:o(this,ai).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,J,yc).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){o(this,ai).redo(),E(this,J,dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,ai).hasSomethingToRedo(),isEmpty:E(this,J,yc).call(this)})}addCommands(t){o(this,ai).add(t),E(this,J,dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,J,yc).call(this)})}cleanUndoStack(t){o(this,ai).cleanType(t)}delete(){var a;this.commitOrRemove();const t=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...o(this,Gt)],i=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const u of e)E(this,J,hy).call(this,u)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=o(this,On))==null||t.commitOrRemove()}hasSomethingToControl(){return o(this,On)||this.hasSelection}selectAll(){for(const t of o(this,Gt))t.commit();E(this,J,dy).call(this,o(this,Te).values())}unselectAll(){var t;if(!(o(this,On)&&(o(this,On).commitOrRemove(),o(this,Ne)!==Pt.NONE))&&!((t=o(this,Ca))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of o(this,Gt))e.unselect();o(this,Gt).clear(),E(this,J,dn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;o(this,Rr)[0]+=t,o(this,Rr)[1]+=e;const[r,a]=o(this,Rr),u=[...o(this,Gt)],c=1e3;o(this,Qi)&&clearTimeout(o(this,Qi)),A(this,Qi,setTimeout(()=>{A(this,Qi,null),o(this,Rr)[0]=o(this,Rr)[1]=0,this.addCommands({cmd:()=>{for(const f of u)o(this,Te).has(f.id)&&f.translateInPage(r,a)},undo:()=>{for(const f of u)o(this,Te).has(f.id)&&f.translateInPage(-r,-a)},mustExec:!1})},c));for(const f of u)f.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,qi,new Map);for(const t of o(this,Gt))o(this,qi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,qi))return!1;this.disableUserSelect(!1);const t=o(this,qi);A(this,qi,null);let e=!1;for(const[{x:r,y:a,pageIndex:u},c]of t)c.newX=r,c.newY=a,c.newPageIndex=u,e||(e=r!==c.savedX||a!==c.savedY||u!==c.savedPageIndex);if(!e)return!1;const i=(r,a,u,c)=>{if(o(this,Te).has(r.id)){const f=o(this,je).get(c);f?r._setParentAndPosition(f,a,u):(r.pageIndex=c,r.x=a,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:a,newY:u,newPageIndex:c}]of t)i(r,a,u,c)},undo:()=>{for(const[r,{savedX:a,savedY:u,savedPageIndex:c}]of t)i(r,a,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(o(this,qi))for(const i of o(this,qi).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||o(this,Gt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return o(this,On)===t}getActive(){return o(this,On)}getMode(){return o(this,Ne)}get imageManager(){return Ft(this,"imageManager",new ry)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:a,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,m,v,w)=>({x:(m-r)/u,y:1-(p+v-i)/a,width:w/u,height:v/a});break;case"180":c=(p,m,v,w)=>({x:1-(p+v-i)/a,y:1-(m+w-r)/u,width:v/a,height:w/u});break;case"270":c=(p,m,v,w)=>({x:1-(m+w-r)/u,y:(p-i)/a,width:w/u,height:v/a});break;default:c=(p,m,v,w)=>({x:(p-i)/a,y:(m-r)/u,width:v/a,height:w/u});break}const f=[];for(let p=0,m=e.rangeCount;p<m;p++){const v=e.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:S,width:x,height:C}of v.getClientRects())x===0||C===0||f.push(c(w,S,x,C))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(o(this,bl)||A(this,bl,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=o(this,bl))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=o(this,bl))==null?void 0:r.get(t.data.id);if(!e)return;const i=o(this,Cs).getRawValue(e);i&&(o(this,Ne)===Pt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}};Al=new WeakMap,On=new WeakMap,Te=new WeakMap,je=new WeakMap,Sl=new WeakMap,Cs=new WeakMap,bl=new WeakMap,ai=new WeakMap,xr=new WeakMap,Ca=new WeakMap,_l=new WeakMap,ka=new WeakMap,qi=new WeakMap,Ci=new WeakMap,Ta=new WeakMap,Vc=new WeakMap,Wc=new WeakMap,El=new WeakMap,Gc=new WeakMap,Yi=new WeakMap,Cr=new WeakMap,xl=new WeakMap,kr=new WeakMap,Ki=new WeakMap,vp=new WeakMap,Tr=new WeakMap,Xc=new WeakMap,Pr=new WeakMap,Pa=new WeakMap,qc=new WeakMap,Yc=new WeakMap,Ne=new WeakMap,Gt=new WeakMap,ks=new WeakMap,Ra=new WeakMap,Kc=new WeakMap,Qc=new WeakMap,Rr=new WeakMap,Qi=new WeakMap,Ts=new WeakMap,Zc=new WeakMap,oi=new WeakMap,J=new WeakSet,Nf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},oy=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of o(this,je).values())if(i.hasTextLayer(t))return i;return null},IS=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,J,Nf).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(o(this,Ki)||A(this,Ki,new vx(this)),o(this,Ki).show(i,r,this.direction==="ltr"))},NS=function(){var a,u,c;const t=document.getSelection();if(!t||t.isCollapsed){o(this,ks)&&((a=o(this,Ki))==null||a.hide(),A(this,ks,null),E(this,J,dn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===o(this,ks))return;const r=E(this,J,Nf).call(this,t).closest(".textLayer");if(!r){o(this,ks)&&((u=o(this,Ki))==null||u.hide(),A(this,ks,null),E(this,J,dn).call(this,{hasSelectedText:!1}));return}if((c=o(this,Ki))==null||c.hide(),A(this,ks,e),E(this,J,dn).call(this,{hasSelectedText:!0}),!(o(this,Ne)!==Pt.HIGHLIGHT&&o(this,Ne)!==Pt.NONE)&&(o(this,Ne)===Pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,kr,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=o(this,Ne)===Pt.HIGHLIGHT?E(this,J,oy).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),w.type==="pointerup"&&E(this,J,Df).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},Df=function(t=""){o(this,Ne)===Pt.HIGHLIGHT?this.highlightSelection(t):o(this,Vc)&&E(this,J,IS).call(this)},DS=function(){document.addEventListener("selectionchange",E(this,J,NS).bind(this),{signal:this._signal})},FS=function(){if(o(this,Cr))return;A(this,Cr,new AbortController);const t=this.combinedSignal(o(this,Cr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},OS=function(){var t;(t=o(this,Cr))==null||t.abort(),A(this,Cr,null)},ly=function(){if(o(this,Pr))return;A(this,Pr,new AbortController);const t=this.combinedSignal(o(this,Pr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},$S=function(){var t;(t=o(this,Pr))==null||t.abort(),A(this,Pr,null)},uy=function(){if(o(this,xr))return;A(this,xr,new AbortController);const t=this.combinedSignal(o(this,xr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},cy=function(){var t;(t=o(this,xr))==null||t.abort(),A(this,xr,null)},zS=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},dn=function(t){Object.entries(t).some(([i,r])=>o(this,Qc)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Qc),t)}),o(this,Ne)===Pt.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,J,bs).call(this,[[$t.HIGHLIGHT_FREE,!0]]))},bs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},HS=async function(){if(!o(this,Tr)){A(this,Tr,!0);const t=[];for(const e of o(this,je).values())t.push(e.enable());await Promise.all(t);for(const e of o(this,Te).values())e.enable()}},BS=function(){if(this.unselectAll(),o(this,Tr)){A(this,Tr,!1);for(const t of o(this,je).values())t.disable();for(const t of o(this,Te).values())t.disable()}},hy=function(t){const e=o(this,je).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},jS=function(){let t=null;for(t of o(this,Gt));return t},yc=function(){if(o(this,Te).size===0)return!0;if(o(this,Te).size===1)for(const t of o(this,Te).values())return t.isEmpty();return!1},dy=function(t){for(const e of o(this,Gt))e.unselect();o(this,Gt).clear();for(const e of t)e.isEmpty()||(o(this,Gt).add(e),e.select());E(this,J,dn).call(this,{hasSelectedEditor:this.hasSelection})},wt(pl,"TRANSLATE_SMALL",1),wt(pl,"TRANSLATE_BIG",10);let Po=pl;var De,Zi,ki,Cl,Ji,$n,kl,ts,Pn,Ps,Ma,es,Mr,Oi,vc,Ff;const fn=class fn{constructor(t){_(this,Oi);_(this,De,null);_(this,Zi,!1);_(this,ki,null);_(this,Cl,null);_(this,Ji,null);_(this,$n,null);_(this,kl,!1);_(this,ts,null);_(this,Pn,null);_(this,Ps,null);_(this,Ma,null);_(this,es,!1);A(this,Pn,t),A(this,es,t._uiManager.useNewAltTextFlow),o(fn,Mr)||A(fn,Mr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){fn._l10n??(fn._l10n=t)}async render(){const t=A(this,ki,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,Cl,document.createElement("span"));t.append(e),o(this,es)?(t.classList.add("new"),t.setAttribute("data-l10n-id",o(fn,Mr).missing),e.setAttribute("data-l10n-id",o(fn,Mr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=o(this,Pn)._uiManager._signal;t.addEventListener("contextmenu",$i,{signal:i}),t.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:i});const r=a=>{a.preventDefault(),o(this,Pn)._uiManager.editAltText(o(this,Pn)),o(this,es)&&o(this,Pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:o(this,Oi,vc)}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",a=>{a.target===t&&a.key==="Enter"&&(A(this,kl,!0),r(a))},{signal:i}),await E(this,Oi,Ff).call(this),t}finish(){o(this,ki)&&(o(this,ki).focus({focusVisible:o(this,kl)}),A(this,kl,!1))}isEmpty(){return o(this,es)?o(this,De)===null:!o(this,De)&&!o(this,Zi)}hasData(){return o(this,es)?o(this,De)!==null||!!o(this,Ps):this.isEmpty()}get guessedText(){return o(this,Ps)}async setGuessedText(t){o(this,De)===null&&(A(this,Ps,t),A(this,Ma,await fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Oi,Ff).call(this))}toggleAltTextBadge(t=!1){var e;if(!o(this,es)||o(this,De)){(e=o(this,ts))==null||e.remove(),A(this,ts,null);return}if(!o(this,ts)){const i=A(this,ts,document.createElement("div"));i.className="noAltTextBadge",o(this,Pn).div.append(i)}o(this,ts).classList.toggle("hidden",!t)}serialize(t){let e=o(this,De);return!t&&o(this,Ps)===e&&(e=o(this,Ma)),{altText:e,decorative:o(this,Zi),guessedText:o(this,Ps),textWithDisclaimer:o(this,Ma)}}get data(){return{altText:o(this,De),decorative:o(this,Zi)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:a=!1}){i&&(A(this,Ps,i),A(this,Ma,r)),!(o(this,De)===t&&o(this,Zi)===e)&&(a||(A(this,De,t),A(this,Zi,e)),E(this,Oi,Ff).call(this))}toggle(t=!1){o(this,ki)&&(!t&&o(this,$n)&&(clearTimeout(o(this,$n)),A(this,$n,null)),o(this,ki).disabled=!t)}shown(){o(this,Pn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:o(this,Oi,vc)}})}destroy(){var t,e;(t=o(this,ki))==null||t.remove(),A(this,ki,null),A(this,Cl,null),A(this,Ji,null),(e=o(this,ts))==null||e.remove(),A(this,ts,null)}};De=new WeakMap,Zi=new WeakMap,ki=new WeakMap,Cl=new WeakMap,Ji=new WeakMap,$n=new WeakMap,kl=new WeakMap,ts=new WeakMap,Pn=new WeakMap,Ps=new WeakMap,Ma=new WeakMap,es=new WeakMap,Mr=new WeakMap,Oi=new WeakSet,vc=function(){return o(this,De)&&"added"||o(this,De)===null&&this.guessedText&&"review"||"missing"},Ff=async function(){var r,a,u;const t=o(this,ki);if(!t)return;if(o(this,es)){if(t.classList.toggle("done",!!o(this,De)),t.setAttribute("data-l10n-id",o(fn,Mr)[o(this,Oi,vc)]),(r=o(this,Cl))==null||r.setAttribute("data-l10n-id",o(fn,Mr)[`${o(this,Oi,vc)}-label`]),!o(this,De)){(a=o(this,Ji))==null||a.remove();return}}else{if(!o(this,De)&&!o(this,Zi)){t.classList.remove("done"),(u=o(this,Ji))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=o(this,Ji);if(!e){A(this,Ji,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${o(this,Pn).id}`;const c=100,f=o(this,Pn)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(o(this,$n)),A(this,$n,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,$n,setTimeout(()=>{A(this,$n,null),o(this,Ji).classList.add("show"),o(this,Pn)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;o(this,$n)&&(clearTimeout(o(this,$n)),A(this,$n,null)),(p=o(this,Ji))==null||p.classList.remove("show")},{signal:f})}o(this,Zi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=o(this,De)),e.parentNode||t.append(e);const i=o(this,Pn).getImageForAltText();i==null||i.setAttribute("aria-describedby",e.id)},_(fn,Mr,null),wt(fn,"_l10n",null);let lp=fn;var Jc,La,th,eh,nh,ih,sh,Tl,Rs,Ia,Lr,tr,US,VS,fy;const Rv=class Rv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:a=null,onPinchEnd:u=null,signal:c}){_(this,tr);_(this,Jc);_(this,La,!1);_(this,th,null);_(this,eh);_(this,nh);_(this,ih);_(this,sh);_(this,Tl);_(this,Rs,null);_(this,Ia);_(this,Lr,null);A(this,Jc,t),A(this,th,i),A(this,eh,e),A(this,nh,r),A(this,ih,a),A(this,sh,u),A(this,Ia,new AbortController),A(this,Tl,AbortSignal.any([c,o(this,Ia).signal])),t.addEventListener("touchstart",E(this,tr,US).bind(this),{passive:!1,signal:o(this,Tl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return Ft(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var t;(t=o(this,Ia))==null||t.abort(),A(this,Ia,null)}};Jc=new WeakMap,La=new WeakMap,th=new WeakMap,eh=new WeakMap,nh=new WeakMap,ih=new WeakMap,sh=new WeakMap,Tl=new WeakMap,Rs=new WeakMap,Ia=new WeakMap,Lr=new WeakMap,tr=new WeakSet,US=function(t){var r,a,u;if((r=o(this,eh))!=null&&r.call(this)||t.touches.length<2)return;if(!o(this,Lr)){A(this,Lr,new AbortController);const c=AbortSignal.any([o(this,Tl),o(this,Lr).signal]),f=o(this,Jc),p={signal:c,passive:!1};f.addEventListener("touchmove",E(this,tr,VS).bind(this),p),f.addEventListener("touchend",E(this,tr,fy).bind(this),p),f.addEventListener("touchcancel",E(this,tr,fy).bind(this),p),(a=o(this,nh))==null||a.call(this)}if(Qn(t),t.touches.length!==2||(u=o(this,th))!=null&&u.call(this)){A(this,Rs,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),A(this,Rs,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},VS=function(t){var D;if(!o(this,Rs)||t.touches.length!==2)return;let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:a}=e,{screenX:u,screenY:c}=i,f=o(this,Rs),{touch0X:p,touch0Y:m,touch1X:v,touch1Y:w}=f,S=v-p,x=w-m,C=u-r,k=c-a,T=Math.hypot(C,k)||1,I=Math.hypot(S,x)||1;if(!o(this,La)&&Math.abs(I-T)<=Rv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=a,f.touch1X=u,f.touch1Y=c,t.preventDefault(),!o(this,La)){A(this,La,!0);return}const O=[(r+u)/2,(a+c)/2];(D=o(this,ih))==null||D.call(this,O,I,T)},fy=function(t){var e;o(this,Lr).abort(),A(this,Lr,null),(e=o(this,sh))==null||e.call(this),o(this,Rs)&&(t.preventDefault(),A(this,Rs,null),A(this,La,!1))};let up=Rv;var Na,Ti,ne,Pl,Ir,rh,Da,Ue,Fa,Ms,Nr,ah,Oa,zn,oh,$a,Ls,ns,Rl,Ml,li,za,lh,wp,At,py,uh,gy,Of,WS,GS,my,$f,yy,XS,qS,YS,vy,KS,wy,QS,ZS,JS,Ay,wc;const Mt=class Mt{constructor(t){_(this,At);_(this,Na,null);_(this,Ti,null);_(this,ne,null);_(this,Pl,!1);_(this,Ir,null);_(this,rh,"");_(this,Da,!1);_(this,Ue,null);_(this,Fa,null);_(this,Ms,null);_(this,Nr,null);_(this,ah,"");_(this,Oa,!1);_(this,zn,null);_(this,oh,!1);_(this,$a,!1);_(this,Ls,!1);_(this,ns,null);_(this,Rl,0);_(this,Ml,0);_(this,li,null);_(this,za,null);wt(this,"_editToolbar",null);wt(this,"_initialOptions",Object.create(null));wt(this,"_initialData",null);wt(this,"_isVisible",!0);wt(this,"_uiManager",null);wt(this,"_focusEventsAllowed",!0);_(this,lh,!1);_(this,wp,Mt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:a,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[a,u];const[c,f]=this.parentDimensions;this.x=t.x/c,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Mt.prototype._resizeWithKeyboard,e=Po.TRANSLATE_SMALL,i=Po.TRANSLATE_BIG;return Ft(this,"_resizerKeyboardManager",new cd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Mt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Ft(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Sx({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Mt._l10n??(Mt._l10n=t),Mt._l10nResizer||(Mt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Mt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Mt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,lh)}set _isDraggable(t){var e;A(this,lh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,wp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,At,wc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(o(this,Oa)?A(this,Oa,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[a,u]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/a,this.y=(e+r)/u,this.fixAndSetPosition()}translate(t,e){E(this,At,py).call(this,this.parentDimensions,t,e)}translateInPage(t,e){o(this,zn)||A(this,zn,[this.x,this.y,this.width,this.height]),E(this,At,py).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){o(this,zn)||A(this,zn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[r,a]}=this;if(this.x+=t/r,this.y+=e/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:v,y:w}=this.div.getBoundingClientRect();this.parent.findNewParent(this,v,w)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[f,p]=this.getBaseTranslation();u+=f,c+=p;const{style:m}=i;m.left=`${(100*u).toFixed(2)}%`,m.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!o(this,zn)&&(o(this,zn)[0]!==this.x||o(this,zn)[1]!==this.y)}get _hasBeenResized(){return!!o(this,zn)&&(o(this,zn)[2]!==this.width||o(this,zn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Mt,r=i/t,a=i/e;switch(this.rotation){case 90:return[-r,a];case 180:return[r,a];case 270:return[r,-a];default:return[-r,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:a,y:u,width:c,height:f}=this;if(c*=i,f*=r,a*=i,u*=r,this._mustFixPosition)switch(t){case 0:a=Math.max(0,Math.min(i-c,a)),u=Math.max(0,Math.min(r-f,u));break;case 90:a=Math.max(0,Math.min(i-f,a)),u=Math.min(r,Math.max(c,u));break;case 180:a=Math.min(i,Math.max(c,a)),u=Math.min(r,Math.max(f,u));break;case 270:a=Math.min(i,Math.max(f,a)),u=Math.max(0,Math.min(r-c,u));break}this.x=a/=i,this.y=u/=r;const[p,m]=this.getBaseTranslation();a+=p,u+=m,e.left=`${(100*a).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return E(i=Mt,uh,gy).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return E(i=Mt,uh,gy).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,r]=this.parentDimensions,{style:a}=this.div;a.width=`${(100*t/i).toFixed(2)}%`,o(this,Da)||(a.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),a=!o(this,Da)&&e.endsWith("%");if(r&&a)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(i)/u).toFixed(2)}%`),!o(this,Da)&&!a&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=o(this,ne))==null||t.finish()}async addEditToolbar(){return this._editToolbar||o(this,$a)?this._editToolbar:(this._editToolbar=new iy(this),this.div.append(this._editToolbar.render()),o(this,ne)&&await this._editToolbar.addAltText(o(this,ne)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=o(this,ne))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,ne)||(lp.initialize(Mt._l10n),A(this,ne,new lp(this)),o(this,Na)&&(o(this,ne).data=o(this,Na),A(this,Na,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=o(this,ne))==null?void 0:t.data}set altTextData(t){o(this,ne)&&(o(this,ne).data=t)}get guessedAltText(){var t;return(t=o(this,ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=o(this,ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=o(this,ne))==null?void 0:e.serialize(t)}hasAltText(){return!!o(this,ne)&&!o(this,ne).isEmpty()}hasAltTextData(){var t;return((t=o(this,ne))==null?void 0:t.hasData())??!1}render(){var a;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,Pl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),E(this,At,wy).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),op(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(o(this,za)||A(this,za,new up({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,At,XS).bind(this),onPinching:E(this,At,qS).bind(this),onPinchEnd:E(this,At,YS).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),this.div}pointerdown(t){const{isMac:e}=yn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Oa,!0),this._isDraggable){E(this,At,KS).call(this,t);return}E(this,At,vy).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){o(this,ns)&&clearTimeout(o(this,ns)),A(this,ns,setTimeout(()=>{var t;A(this,ns,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[a,u]=this.pageDimensions,[c,f]=this.pageTranslation,p=t/r,m=e/r,v=this.x*a,w=this.y*u,S=this.width*a,x=this.height*u;switch(i){case 0:return[v+p+c,u-w-m-x+f,v+p+S+c,u-w-m+f];case 90:return[v+m+c,u-w+p+f,v+m+x+c,u-w+p+S+f];case 180:return[v-p-S+c,u-w+m+f,v-p+c,u-w+m+x+f];case 270:return[v-m-x+c,u-w-p-S+f,v-m+c,u-w-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,a,u]=t,c=a-i,f=u-r;switch(this.rotation){case 0:return[i,e-u,c,f];case 90:return[i,e-r,f,c];case 180:return[a,e-r,c,f];case 270:return[a,e-u,f,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){A(this,$a,!0)}disableEditMode(){A(this,$a,!1)}isInEditMode(){return o(this,$a)}shouldGetKeyboardEvents(){return o(this,Ls)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:a,innerWidth:u}=window;return e<u&&r>0&&t<a&&i>0}rebuild(){E(this,At,wy).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Qt("An editor must be serializable")}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation,A(r,Na,t.accessibilityData);const[a,u]=r.pageDimensions,[c,f,p,m]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/a,r.y=f/u,r.width=p/a,r.height=m/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=o(this,Nr))==null||t.abort(),A(this,Nr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,ns)&&(clearTimeout(o(this,ns)),A(this,ns,null)),E(this,At,wc).call(this),this.removeEditToolbar(),o(this,li)){for(const i of o(this,li).values())clearTimeout(i);A(this,li,null)}this.parent=null,(e=o(this,za))==null||e.destroy(),A(this,za,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,At,WS).call(this),o(this,Ue).classList.remove("hidden"),op(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Ms,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=o(this,Ue).children;if(!o(this,Ti)){A(this,Ti,Array.from(e));const u=E(this,At,QS).bind(this),c=E(this,At,ZS).bind(this),f=this._uiManager._signal;for(const p of o(this,Ti)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",c,{signal:f}),p.addEventListener("focus",E(this,At,JS).bind(this,m),{signal:f}),p.setAttribute("data-l10n-id",Mt._l10nResizer[m])}}const i=o(this,Ti)[0];let r=0;for(const u of e){if(u===i)break;r++}const a=(360-this.rotation+this.parentRotation)%360/90*(o(this,Ti).length/4);if(a!==r){if(a<r)for(let c=0;c<r-a;c++)o(this,Ue).append(o(this,Ue).firstChild);else if(a>r)for(let c=0;c<a-r;c++)o(this,Ue).firstChild.before(o(this,Ue).lastChild);let u=0;for(const c of e){const p=o(this,Ti)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Mt._l10nResizer[p])}}E(this,At,Ay).call(this,0),A(this,Ls,!0),o(this,Ue).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){o(this,Ls)&&E(this,At,yy).call(this,o(this,ah),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,At,wc).call(this),this.div.focus()}select(){var t,e,i;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,a;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(e=this._editToolbar)==null||e.show(),(i=o(this,ne))==null||i.toggleAltTextBadge(!1)}unselect(){var t,e,i,r,a;(t=o(this,Ue))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(a=o(this,ne))==null||a.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,oh)}set isEditing(t){A(this,oh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){A(this,Da,!0);const i=t/e,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){o(this,li)||A(this,li,new Map);const{action:i}=t;let r=o(this,li).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),o(this,li).delete(i),o(this,li).size===0&&A(this,li,null)},Mt._telemetryTimeout),o(this,li).set(i,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Pl,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Pl,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Na=new WeakMap,Ti=new WeakMap,ne=new WeakMap,Pl=new WeakMap,Ir=new WeakMap,rh=new WeakMap,Da=new WeakMap,Ue=new WeakMap,Fa=new WeakMap,Ms=new WeakMap,Nr=new WeakMap,ah=new WeakMap,Oa=new WeakMap,zn=new WeakMap,oh=new WeakMap,$a=new WeakMap,Ls=new WeakMap,ns=new WeakMap,Rl=new WeakMap,Ml=new WeakMap,li=new WeakMap,za=new WeakMap,lh=new WeakMap,wp=new WeakMap,At=new WeakSet,py=function([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},uh=new WeakSet,gy=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Of=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},WS=function(){if(o(this,Ue))return;A(this,Ue,document.createElement("div")),o(this,Ue).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");o(this,Ue).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",E(this,At,GS).bind(this,i),{signal:e}),r.addEventListener("contextmenu",$i,{signal:e}),r.tabIndex=-1}this.div.prepend(o(this,Ue))},GS=function(t,e){var m;e.preventDefault();const{isMac:i}=yn.platform;if(e.button!==0||e.ctrlKey&&i)return;(m=o(this,ne))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,A(this,Fa,[e.screenX,e.screenY]);const a=new AbortController,u=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,At,yy).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",Qn,{passive:!1,signal:u}),window.addEventListener("contextmenu",$i,{signal:u}),A(this,Ms,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var v;a.abort(),this.parent.togglePointerEvents(!0),(v=o(this,ne))==null||v.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=f,E(this,At,$f).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},my=function(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e;const[a,u]=this.parentDimensions;this.setDims(a*i,u*r),this.fixAndSetPosition(),this._onResized()},$f=function(){if(!o(this,Ms))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=o(this,Ms);A(this,Ms,null);const a=this.x,u=this.y,c=this.width,f=this.height;a===t&&u===e&&c===i&&f===r||this.addCommands({cmd:E(this,At,my).bind(this,a,u,c,f),undo:E(this,At,my).bind(this,t,e,i,r),mustExec:!0})},yy=function(t,e){const[i,r]=this.parentDimensions,a=this.x,u=this.y,c=this.width,f=this.height,p=Mt.MIN_SIZE/i,m=Mt.MIN_SIZE/r,v=E(this,At,Of).call(this,this.rotation),w=(Y,G)=>[v[0]*Y+v[2]*G,v[1]*Y+v[3]*G],S=E(this,At,Of).call(this,360-this.rotation),x=(Y,G)=>[S[0]*Y+S[2]*G,S[1]*Y+S[3]*G];let C,k,T=!1,I=!1;switch(t){case"topLeft":T=!0,C=(Y,G)=>[0,0],k=(Y,G)=>[Y,G];break;case"topMiddle":C=(Y,G)=>[Y/2,0],k=(Y,G)=>[Y/2,G];break;case"topRight":T=!0,C=(Y,G)=>[Y,0],k=(Y,G)=>[0,G];break;case"middleRight":I=!0,C=(Y,G)=>[Y,G/2],k=(Y,G)=>[0,G/2];break;case"bottomRight":T=!0,C=(Y,G)=>[Y,G],k=(Y,G)=>[0,0];break;case"bottomMiddle":C=(Y,G)=>[Y/2,G],k=(Y,G)=>[Y/2,0];break;case"bottomLeft":T=!0,C=(Y,G)=>[0,G],k=(Y,G)=>[Y,0];break;case"middleLeft":I=!0,C=(Y,G)=>[0,G/2],k=(Y,G)=>[Y,G/2];break}const O=C(c,f),D=k(c,f);let z=w(...D);const B=Mt._round(a+z[0]),j=Mt._round(u+z[1]);let K=1,st=1,St,tt;if(e.fromKeyboard)({deltaX:St,deltaY:tt}=e);else{const{screenX:Y,screenY:G}=e,[U,it]=o(this,Fa);[St,tt]=this.screenToPageTranslation(Y-U,G-it),o(this,Fa)[0]=Y,o(this,Fa)[1]=G}if([St,tt]=x(St/i,tt/r),T){const Y=Math.hypot(c,f);K=st=Math.max(Math.min(Math.hypot(D[0]-O[0]-St,D[1]-O[1]-tt)/Y,1/c,1/f),p/c,m/f)}else I?K=Math.max(p,Math.min(1,Math.abs(D[0]-O[0]-St)))/c:st=Math.max(m,Math.min(1,Math.abs(D[1]-O[1]-tt)))/f;const ct=Mt._round(c*K),Et=Mt._round(f*st);z=w(...k(ct,Et));const Ct=B-z[0],Lt=j-z[1];o(this,zn)||A(this,zn,[this.x,this.y,this.width,this.height]),this.width=ct,this.height=Et,this.x=Ct,this.y=Lt,this.setDims(i*ct,r*Et),this.fixAndSetPosition(),this._onResizing()},XS=function(){var t;A(this,Ms,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=o(this,ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},qS=function(t,e,i){let a=.7*(i/e)+1-.7;if(a===1)return;const u=E(this,At,Of).call(this,this.rotation),c=(B,j)=>[u[0]*B+u[2]*j,u[1]*B+u[3]*j],[f,p]=this.parentDimensions,m=this.x,v=this.y,w=this.width,S=this.height,x=Mt.MIN_SIZE/f,C=Mt.MIN_SIZE/p;a=Math.max(Math.min(a,1/w,1/S),x/w,C/S);const k=Mt._round(w*a),T=Mt._round(S*a);if(k===w&&T===S)return;o(this,zn)||A(this,zn,[m,v,w,S]);const I=c(w/2,S/2),O=Mt._round(m+I[0]),D=Mt._round(v+I[1]),z=c(k/2,T/2);this.x=O-z[0],this.y=D-z[1],this.width=k,this.height=T,this.setDims(f*k,p*T),this.fixAndSetPosition(),this._onResizing()},YS=function(){var t;(t=o(this,ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,At,$f).call(this)},vy=function(t){const{isMac:e}=yn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},KS=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:a},c=p=>{r.abort(),A(this,Ir,null),A(this,Oa,!1),this._uiManager.endDragSession()||E(this,At,vy).call(this,p),i&&this._onStopDragging()};e&&(A(this,Rl,t.clientX),A(this,Ml,t.clientY),A(this,Ir,t.pointerId),A(this,rh,t.pointerType),window.addEventListener("pointermove",p=>{i||(i=!0,this._onStartDragging());const{clientX:m,clientY:v,pointerId:w}=p;if(w!==o(this,Ir)){Qn(p);return}const[S,x]=this.screenToPageTranslation(m-o(this,Rl),v-o(this,Ml));A(this,Rl,m),A(this,Ml,v),this._uiManager.dragSelectedEditors(S,x)},u),window.addEventListener("touchmove",Qn,u),window.addEventListener("pointerdown",p=>{p.pointerType===o(this,rh)&&(o(this,za)||p.isPrimary)&&c(p),Qn(p)},u));const f=p=>{if(!o(this,Ir)||o(this,Ir)===p.pointerId){c(p);return}Qn(p)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})},wy=function(){if(o(this,Nr)||!this.div)return;A(this,Nr,new AbortController);const t=this._uiManager.combinedSignal(o(this,Nr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},QS=function(t){Mt._resizerKeyboardManager.exec(this,t)},ZS=function(t){var e;o(this,Ls)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==o(this,Ue)&&E(this,At,wc).call(this)},JS=function(t){A(this,ah,o(this,Ls)?t:"")},Ay=function(t){if(o(this,Ti))for(const e of o(this,Ti))e.tabIndex=t},wc=function(){A(this,Ls,!1),E(this,At,Ay).call(this,-1),E(this,At,$f).call(this)},_(Mt,uh),wt(Mt,"_l10n",null),wt(Mt,"_l10nResizer",null),wt(Mt,"_borderLineWidth",-1),wt(Mt,"_colorManager",new ay),wt(Mt,"_zIndex",1),wt(Mt,"_telemetryTimeout",1e3);let he=Mt;class Sx extends he{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const KA=3285377520,ri=4294901760,Gi=65535;class t1{constructor(t){this.h1=t?t&4294967295:KA,this.h2=t?t&4294967295:KA}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let C=0,k=t.length;C<k;C++){const T=t.charCodeAt(C);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,a=i-r*4,u=new Uint32Array(e.buffer,0,r);let c=0,f=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,S=v&Gi,x=w&Gi;for(let C=0;C<r;C++)C&1?(c=u[C],c=c*v&ri|c*S&Gi,c=c<<15|c>>>17,c=c*w&ri|c*x&Gi,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[C],f=f*v&ri|f*S&Gi,f=f<<15|f>>>17,f=f*w&ri|f*x&Gi,m^=f,m=m<<13|m>>>19,m=m*5+3864292196);switch(c=0,a){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*v&ri|c*S&Gi,c=c<<15|c>>>17,c=c*w&ri|c*x&Gi,r&1?p^=c:m^=c}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ri|t*36045&Gi,e=e*4283543511&ri|((e<<16|t>>>16)*2950163797&ri)>>>16,t^=e>>>1,t=t*444984403&ri|t*60499&Gi,e=e*3301882366&ri|((e<<16|t>>>16)*3120437893&ri)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Sy=Object.freeze({map:null,hash:"",transfer:void 0});var Ha,Ba,Fe,Ap,e1;class xv{constructor(){_(this,Ap);_(this,Ha,!1);_(this,Ba,null);_(this,Fe,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=o(this,Fe).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return o(this,Fe).get(t)}remove(t){if(o(this,Fe).delete(t),o(this,Fe).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of o(this,Fe).values())if(e instanceof he)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=o(this,Fe).get(t);let r=!1;if(i!==void 0)for(const[a,u]of Object.entries(e))i[a]!==u&&(r=!0,i[a]=u);else r=!0,o(this,Fe).set(t,e);r&&E(this,Ap,e1).call(this),e instanceof he&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return o(this,Fe).has(t)}getAll(){return o(this,Fe).size>0?wv(o(this,Fe)):null}setAll(t){for(const[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return o(this,Fe).size}resetModified(){o(this,Ha)&&(A(this,Ha,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new n1(this)}get serializable(){if(o(this,Fe).size===0)return Sy;const t=new Map,e=new t1,i=[],r=Object.create(null);let a=!1;for(const[u,c]of o(this,Fe)){const f=c instanceof he?c.serialize(!1,r):c;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),a||(a=!!f.bitmap))}if(a)for(const u of t.values())u.bitmap&&i.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Sy}get editorStats(){let t=null;const e=new Map;for(const i of o(this,Fe).values()){if(!(i instanceof he))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:a}=r;e.has(a)||e.set(a,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const u=t[a]||(t[a]=new Map);for(const[c,f]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const m=p.get(f)??0;p.set(f,m+1)}}for(const[i,r]of e)t[i]=r.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){A(this,Ba,null)}get modifiedIds(){if(o(this,Ba))return o(this,Ba);const t=[];for(const e of o(this,Fe).values())!(e instanceof he)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return A(this,Ba,{ids:new Set(t),hash:t.join(",")})}}Ha=new WeakMap,Ba=new WeakMap,Fe=new WeakMap,Ap=new WeakSet,e1=function(){o(this,Ha)||(A(this,Ha,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ch;class n1 extends xv{constructor(e){super();_(this,ch);const{map:i,hash:r,transfer:a}=e.serializable,u=structuredClone(i,a?{transfer:a}:null);A(this,ch,{map:u,hash:r,transfer:a})}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,ch)}get modifiedIds(){return Ft(this,"modifiedIds",{ids:new Set,hash:""})}}ch=new WeakMap;var Ll;class bx{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,Ll,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),o(this,Ll).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||o(this,Ll).has(t.loadedName))){if(be(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:a}=t,u=new FontFace(i,r,a);this.addNativeFontFace(u);try{await u.load(),o(this,Ll).add(i),e==null||e(t)}catch{Rt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Rt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ft(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(on||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ft(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(be(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const a=i.shift();setTimeout(a.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ft(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(D,z){return D.charCodeAt(z)<<24|D.charCodeAt(z+1)<<16|D.charCodeAt(z+2)<<8|D.charCodeAt(z+3)&255}function r(D,z,B,j){const K=D.substring(0,z),st=D.substring(z+B);return K+j+st}let a,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const f=c.getContext("2d");let p=0;function m(D,z){if(++p>30){Rt("Load test font never loaded."),z();return}if(f.font="30px "+D,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(m.bind(null,D,z))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const x=16,C=1482184792;let k=i(w,x);for(a=0,u=v.length-3;a<u;a+=4)k=k-C+i(v,a)|0;a<v.length&&(k=k-C+i(v+"XXX",a)|0),w=r(w,x,4,ox(k));const T=`url(data:font/opentype;base64,${btoa(w)});`,I=`@font-face {font-family:"${v}";src:${T}}`;this.insertRule(I);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const D of[t.loadedName,v]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=D,O.append(z)}this._document.body.append(O),m(v,()=>{O.remove(),e.complete()})}}Ll=new WeakMap;class _x{constructor(t,{disableFontFace:e=!1,fontExtraProperties:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const a in t)this[a]=t[a];this.disableFontFace=e===!0,this.fontExtraProperties=i===!0,this._inspectFont=r}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${fx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(u){Rt(`getPathGenerator - ignoring character: "${u}".`)}const a=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=a}}const Cf={DATA:1,ERROR:2},Ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function QA(){}function kn(d){if(d instanceof ta||d instanceof ty||d instanceof Dc||d instanceof XA||d instanceof ap||d instanceof Xm)return d;switch(d instanceof Error||typeof d=="object"&&d!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new ta(d.message);case"InvalidPDFException":return new ty(d.message);case"MissingPDFException":return new Dc(d.message);case"PasswordException":return new XA(d.message,d.code);case"UnexpectedResponseException":return new ap(d.message,d.status);case"UnknownErrorException":return new Xm(d.message,d.details)}return new Xm(d.message,d.toString())}var Il,gi,i1,s1,r1,zf;class Ac{constructor(t,e,i){_(this,gi);_(this,Il,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,gi,i1).bind(this),{signal:o(this,Il).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(u){a.reject(u)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,u=this.sourceName,c=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[a]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:c,action:t,streamId:a,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[a].pullCall=m,f.postMessage({sourceName:u,targetName:c,stream:Ae.PULL,streamId:a,desiredSize:p.desiredSize}),m.promise},cancel:p=>{be(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[a].cancelCall=m,this.streamControllers[a].isClosed=!0,f.postMessage({sourceName:u,targetName:c,stream:Ae.CANCEL,streamId:a,reason:kn(p)}),m.promise}},i)}destroy(){var t;(t=o(this,Il))==null||t.abort(),A(this,Il,null)}}Il=new WeakMap,gi=new WeakSet,i1=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,gi,r1).call(this,t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Cf.DATA)r.resolve(t.data);else if(t.callback===Cf.ERROR)r.reject(kn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,a=this.comObj;Promise.try(e,t.data).then(function(u){a.postMessage({sourceName:i,targetName:r,callback:Cf.DATA,callbackId:t.callbackId,data:u})},function(u){a.postMessage({sourceName:i,targetName:r,callback:Cf.ERROR,callbackId:t.callbackId,reason:kn(u)})});return}if(t.streamId){E(this,gi,s1).call(this,t);return}e(t.data)},s1=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,u=this,c=this.actionHandler[t.action],f={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:Ae.ENQUEUE,streamId:e,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:Ae.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){be(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:Ae.ERROR,streamId:e,reason:kn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(c,t.data,f).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:Ae.START_COMPLETE,streamId:e,reason:kn(p)})})},r1=function(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,u=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ae.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(kn(t.reason));break;case Ae.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(kn(t.reason));break;case Ae.PULL:if(!c){a.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||QA).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:Ae.PULL_COMPLETE,streamId:e,reason:kn(p)})});break;case Ae.ENQUEUE:if(be(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case Ae.CLOSE:if(be(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),E(this,gi,zf).call(this,u,e);break;case Ae.ERROR:be(u,"error should have stream controller"),u.controller.error(kn(t.reason)),E(this,gi,zf).call(this,u,e);break;case Ae.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(kn(t.reason)),E(this,gi,zf).call(this,u,e);break;case Ae.CANCEL:if(!c)break;const f=kn(t.reason);Promise.try(c.onCancel||QA,f).then(function(){a.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){a.postMessage({sourceName:i,targetName:r,stream:Ae.CANCEL_COMPLETE,streamId:e,reason:kn(p)})}),c.sinkCapability.reject(f),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},zf=async function(t,e){var i,r,a;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(r=t.pullCall)==null?void 0:r.promise,(a=t.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[e]};var hh;class a1{constructor({enableHWA:t=!1}){_(this,hh,!1);A(this,hh,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!o(this,hh)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}hh=new WeakMap;class Ex extends a1{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class o1{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class l1 extends o1{async _fetch(t){const e=await Op(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Fp(e)}}class u1{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,a){return"none"}destroy(t=!1){}}var ja,Nl,Is,Ns,nn,Ua,Va,nt,Je,Sc,ol,Hf,ll,c1,by,ul,bc,_c,_y,Ec;class xx extends u1{constructor({docId:e,ownerDocument:i=globalThis.document}){super();_(this,nt);_(this,ja);_(this,Nl);_(this,Is);_(this,Ns);_(this,nn);_(this,Ua);_(this,Va,0);A(this,Ns,e),A(this,nn,i)}addFilter(e){if(!e)return"none";let i=o(this,nt,Je).get(e);if(i)return i;const[r,a,u]=E(this,nt,Hf).call(this,e),c=e.length===1?r:`${r}${a}${u}`;if(i=o(this,nt,Je).get(c),i)return o(this,nt,Je).set(e,i),i;const f=`g_${o(this,Ns)}_transfer_map_${hn(this,Va)._++}`,p=E(this,nt,ll).call(this,f);o(this,nt,Je).set(e,p),o(this,nt,Je).set(c,p);const m=E(this,nt,ul).call(this,f);return E(this,nt,_c).call(this,r,a,u,m),p}addHCMFilter(e,i){var x;const r=`${e}-${i}`,a="base";let u=o(this,nt,Sc).get(a);if((u==null?void 0:u.key)===r||(u?((x=u.filter)==null||x.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},o(this,nt,Sc).set(a,u)),!e||!i))return u.url;const c=E(this,nt,Ec).call(this,e);e=pt.makeHexColor(...c);const f=E(this,nt,Ec).call(this,i);if(i=pt.makeHexColor(...f),o(this,nt,ol).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return u.url;const p=new Array(256);for(let C=0;C<=255;C++){const k=C/255;p[C]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const m=p.join(","),v=`g_${o(this,Ns)}_hcm_filter`,w=u.filter=E(this,nt,ul).call(this,v);E(this,nt,_c).call(this,m,m,m,w),E(this,nt,by).call(this,w);const S=(C,k)=>{const T=c[C]/255,I=f[C]/255,O=new Array(k+1);for(let D=0;D<=k;D++)O[D]=T+D/k*(I-T);return O.join(",")};return E(this,nt,_c).call(this,S(0,5),S(1,5),S(2,5),w),u.url=E(this,nt,ll).call(this,v),u.url}addAlphaFilter(e){let i=o(this,nt,Je).get(e);if(i)return i;const[r]=E(this,nt,Hf).call(this,[e]),a=`alpha_${r}`;if(i=o(this,nt,Je).get(a),i)return o(this,nt,Je).set(e,i),i;const u=`g_${o(this,Ns)}_alpha_map_${hn(this,Va)._++}`,c=E(this,nt,ll).call(this,u);o(this,nt,Je).set(e,c),o(this,nt,Je).set(a,c);const f=E(this,nt,ul).call(this,u);return E(this,nt,_y).call(this,r,f),c}addLuminosityFilter(e){let i=o(this,nt,Je).get(e||"luminosity");if(i)return i;let r,a;if(e?([r]=E(this,nt,Hf).call(this,[e]),a=`luminosity_${r}`):a="luminosity",i=o(this,nt,Je).get(a),i)return o(this,nt,Je).set(e,i),i;const u=`g_${o(this,Ns)}_luminosity_map_${hn(this,Va)._++}`,c=E(this,nt,ll).call(this,u);o(this,nt,Je).set(e,c),o(this,nt,Je).set(a,c);const f=E(this,nt,ul).call(this,u);return E(this,nt,c1).call(this,f),e&&E(this,nt,_y).call(this,r,f),c}addHighlightHCMFilter(e,i,r,a,u){var I;const c=`${i}-${r}-${a}-${u}`;let f=o(this,nt,Sc).get(e);if((f==null?void 0:f.key)===c||(f?((I=f.filter)==null||I.remove(),f.key=c,f.url="none",f.filter=null):(f={key:c,url:"none",filter:null},o(this,nt,Sc).set(e,f)),!i||!r))return f.url;const[p,m]=[i,r].map(E(this,nt,Ec).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,x]=[a,u].map(E(this,nt,Ec).bind(this));w<v&&([v,w,S,x]=[w,v,x,S]),o(this,nt,ol).style.color="";const C=(O,D,z)=>{const B=new Array(256),j=(w-v)/z,K=O/255,st=(D-O)/(255*z);let St=0;for(let tt=0;tt<=z;tt++){const ct=Math.round(v+tt*j),Et=K+tt*st;for(let Ct=St;Ct<=ct;Ct++)B[Ct]=Et;St=ct+1}for(let tt=St;tt<256;tt++)B[tt]=B[St-1];return B.join(",")},k=`g_${o(this,Ns)}_hcm_${e}_filter`,T=f.filter=E(this,nt,ul).call(this,k);return E(this,nt,by).call(this,T),E(this,nt,_c).call(this,C(S[0],x[0],5),C(S[1],x[1],5),C(S[2],x[2],5),T),f.url=E(this,nt,ll).call(this,k),f.url}destroy(e=!1){var i,r,a,u;e&&((i=o(this,Ua))!=null&&i.size)||((r=o(this,Is))==null||r.parentNode.parentNode.remove(),A(this,Is,null),(a=o(this,Nl))==null||a.clear(),A(this,Nl,null),(u=o(this,Ua))==null||u.clear(),A(this,Ua,null),A(this,Va,0))}}ja=new WeakMap,Nl=new WeakMap,Is=new WeakMap,Ns=new WeakMap,nn=new WeakMap,Ua=new WeakMap,Va=new WeakMap,nt=new WeakSet,Je=function(){return o(this,Nl)||A(this,Nl,new Map)},Sc=function(){return o(this,Ua)||A(this,Ua,new Map)},ol=function(){if(!o(this,Is)){const e=o(this,nn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=o(this,nn).createElementNS(Ss,"svg");r.setAttribute("width",0),r.setAttribute("height",0),A(this,Is,o(this,nn).createElementNS(Ss,"defs")),e.append(r),r.append(o(this,Is)),o(this,nn).body.append(e)}return o(this,Is)},Hf=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,a]=e,u=new Array(256),c=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=i[p]/255,c[p]=r[p]/255,f[p]=a[p]/255;return[u.join(","),c.join(","),f.join(",")]},ll=function(e){if(o(this,ja)===void 0){A(this,ja,"");const i=o(this,nn).URL;i!==o(this,nn).baseURI&&($p(i)?Rt('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,ja,i.split("#",1)[0]))}return`url(${o(this,ja)}#${e})`},c1=function(e){const i=o(this,nn).createElementNS(Ss,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},by=function(e){const i=o(this,nn).createElementNS(Ss,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},ul=function(e){const i=o(this,nn).createElementNS(Ss,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),o(this,nt,ol).append(i),i},bc=function(e,i,r){const a=o(this,nn).createElementNS(Ss,i);a.setAttribute("type","discrete"),a.setAttribute("tableValues",r),e.append(a)},_c=function(e,i,r,a){const u=o(this,nn).createElementNS(Ss,"feComponentTransfer");a.append(u),E(this,nt,bc).call(this,u,"feFuncR",e),E(this,nt,bc).call(this,u,"feFuncG",i),E(this,nt,bc).call(this,u,"feFuncB",r)},_y=function(e,i){const r=o(this,nn).createElementNS(Ss,"feComponentTransfer");i.append(r),E(this,nt,bc).call(this,r,"feFuncA",e)},Ec=function(e){return o(this,nt,ol).style.color=e,Ev(getComputedStyle(o(this,nt,ol)).getPropertyValue("color"))};class h1{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class d1 extends h1{async _fetch(t){const e=await Op(t,"arraybuffer");return new Uint8Array(e)}}on&&Rt("Please use the `legacy` build in Node.js environments.");async function f1(d){const e=await process.getBuiltinModule("fs").promises.readFile(d);return new Uint8Array(e)}class Cx extends u1{}class kx extends a1{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Tx extends o1{async _fetch(t){return f1(t)}}class Px extends h1{async _fetch(t){return f1(t)}}const an={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ey(d,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),d.clip(r)}class Cv{getPattern(){Qt("Abstract method `getPattern` called.")}}class Rx extends Cv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let a;if(r===an.STROKE||r===an.FILL){const u=e.current.getClippedPathBoundingBox(r,re(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,f),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-u[0],-u[1]),i=pt.transform(i,[1,0,0,1,u[0],u[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),Ey(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),a=t.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);a.setTransform(v)}else Ey(t,this._bbox),a=this._createGradient(t);return a}}function Km(d,t,e,i,r,a,u,c){const f=t.coords,p=t.colors,m=d.data,v=d.width*4;let w;f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=a,a=u,u=w),f[i+1]>f[r+1]&&(w=i,i=r,r=w,w=u,u=c,c=w),f[e+1]>f[i+1]&&(w=e,e=i,i=w,w=a,a=u,u=w);const S=(f[e]+t.offsetX)*t.scaleX,x=(f[e+1]+t.offsetY)*t.scaleY,C=(f[i]+t.offsetX)*t.scaleX,k=(f[i+1]+t.offsetY)*t.scaleY,T=(f[r]+t.offsetX)*t.scaleX,I=(f[r+1]+t.offsetY)*t.scaleY;if(x>=I)return;const O=p[a],D=p[a+1],z=p[a+2],B=p[u],j=p[u+1],K=p[u+2],st=p[c],St=p[c+1],tt=p[c+2],ct=Math.round(x),Et=Math.round(I);let Ct,Lt,Y,G,U,it,Q,L;for(let H=ct;H<=Et;H++){if(H<k){const vt=H<x?0:(x-H)/(x-k);Ct=S-(S-C)*vt,Lt=O-(O-B)*vt,Y=D-(D-j)*vt,G=z-(z-K)*vt}else{let vt;H>I?vt=1:k===I?vt=0:vt=(k-H)/(k-I),Ct=C-(C-T)*vt,Lt=B-(B-st)*vt,Y=j-(j-St)*vt,G=K-(K-tt)*vt}let dt;H<x?dt=0:H>I?dt=1:dt=(x-H)/(x-I),U=S-(S-T)*dt,it=O-(O-st)*dt,Q=D-(D-St)*dt,L=z-(z-tt)*dt;const kt=Math.round(Math.min(Ct,U)),It=Math.round(Math.max(Ct,U));let bt=v*H+kt*4;for(let vt=kt;vt<=It;vt++)dt=(Ct-vt)/(Ct-U),dt<0?dt=0:dt>1&&(dt=1),m[bt++]=Lt-(Lt-it)*dt|0,m[bt++]=Y-(Y-Q)*dt|0,m[bt++]=G-(G-L)*dt|0,m[bt++]=255}}function Mx(d,t,e){const i=t.coords,r=t.colors;let a,u;switch(t.type){case"lattice":const c=t.verticesPerRow,f=Math.floor(i.length/c)-1,p=c-1;for(a=0;a<f;a++){let m=a*c;for(let v=0;v<p;v++,m++)Km(d,e,i[m],i[m+1],i[m+c],r[m],r[m+1],r[m+c]),Km(d,e,i[m+c+1],i[m+1],i[m+c],r[m+c+1],r[m+1],r[m+c])}break;case"triangles":for(a=0,u=i.length;a<u;a+=3)Km(d,e,i[a],i[a+1],i[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class Lx extends Cv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){const c=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-f,v=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),S=p/v,x=m/w,C={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-f,scaleX:1/S,scaleY:1/x},k=v+2*2,T=w+2*2,I=i.getCanvas("mesh",k,T),O=I.context,D=O.createImageData(v,w);if(e){const B=D.data;for(let j=0,K=B.length;j<K;j+=4)B[j]=e[0],B[j+1]=e[1],B[j+2]=e[2],B[j+3]=255}for(const B of this._figures)Mx(D,B,C);return O.putImageData(D,2,2),{canvas:I.canvas,offsetX:c-2*S,offsetY:f-2*x,scaleX:S,scaleY:x}}getPattern(t,e,i,r){Ey(t,this._bbox);let a;if(r===an.SHADING)a=pt.singularValueDecompose2dScale(re(t));else if(a=pt.singularValueDecompose2dScale(e.baseTransform),this.matrix){const c=pt.singularValueDecompose2dScale(this.matrix);a=[a[0]*c[0],a[1]*c[1]]}const u=this._createMeshCanvas(a,r===an.SHADING?null:this._background,e.cachedCanvases);return r!==an.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class Ix extends Cv{getPattern(){return"hotpink"}}function Nx(d){switch(d[0]){case"RadialAxial":return new Rx(d);case"Mesh":return new Lx(d);case"Dummy":return new Ix}throw new Error(`Unknown IR type: ${d[0]}`)}const ZA={COLORED:1,UNCOLORED:2},Sp=class Sp{constructor(t,e,i,r,a){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=a}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:r,tilingType:a,color:u,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Dp("TilingType: "+a);const m=e[0],v=e[1],w=e[2],S=e[3],x=w-m,C=S-v,k=pt.singularValueDecompose2dScale(this.matrix),T=pt.singularValueDecompose2dScale(this.baseTransform),I=k[0]*T[0],O=k[1]*T[1];let D=x,z=C,B=!1,j=!1;const K=Math.ceil(f*I),st=Math.ceil(p*O),St=Math.ceil(x*I),tt=Math.ceil(C*O);K>=St?D=f:B=!0,st>=tt?z=p:j=!0;const ct=this.getSizeAndScale(D,this.ctx.canvas.width,I),Et=this.getSizeAndScale(z,this.ctx.canvas.height,O),Ct=t.cachedCanvases.getCanvas("pattern",ct.size,Et.size),Lt=Ct.context,Y=c.createCanvasGraphics(Lt);if(Y.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Y,r,u),Lt.translate(-ct.scale*m,-Et.scale*v),Y.transform(ct.scale,0,0,Et.scale,0,0),Lt.save(),this.clipBbox(Y,m,v,w,S),Y.baseTransform=re(Y.ctx),Y.executeOperatorList(i),Y.endDrawing(),Lt.restore(),B||j){const G=Ct.canvas;B&&(D=f),j&&(z=p);const U=this.getSizeAndScale(D,this.ctx.canvas.width,I),it=this.getSizeAndScale(z,this.ctx.canvas.height,O),Q=U.size,L=it.size,H=t.cachedCanvases.getCanvas("pattern-workaround",Q,L),dt=H.context,kt=B?Math.floor(x/f):0,It=j?Math.floor(C/p):0;for(let bt=0;bt<=kt;bt++)for(let vt=0;vt<=It;vt++)dt.drawImage(G,Q*bt,L*vt,Q,L,0,0,Q,L);return{canvas:H.canvas,scaleX:U.scale,scaleY:it.scale,offsetX:m,offsetY:v}}return{canvas:Ct.canvas,scaleX:ct.scale,scaleY:Et.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,i){const r=Math.max(Sp.MAX_PATTERN_SIZE,e);let a=Math.ceil(t*i);return a>=r?a=r:i=a/t,{scale:i,size:a}}clipBbox(t,e,i,r,a){const u=r-e,c=a-i;t.ctx.rect(e,i,u,c),t.current.updateRectMinMax(re(t.ctx),[e,i,r,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,a=t.current;switch(e){case ZA.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,a.fillColor=u.fillStyle,a.strokeColor=u.strokeStyle;break;case ZA.UNCOLORED:const c=pt.makeHexColor(i[0],i[1],i[2]);r.fillStyle=c,r.strokeStyle=c,a.fillColor=c,a.strokeColor=c;break;default:throw new ax(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,r){let a=i;r!==an.SHADING&&(a=pt.transform(a,e.baseTransform),this.matrix&&(a=pt.transform(a,this.matrix)));const u=this.createPatternCanvas(e);let c=new DOMMatrix(a);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(c),f}};wt(Sp,"MAX_PATTERN_SIZE",3e3);let xy=Sp;function Dx({src:d,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:a=4294967295,inverseDecode:u=!1}){const c=yn.isLittleEndian?4278190080:255,[f,p]=u?[a,c]:[c,a],m=i>>3,v=i&7,w=d.length;e=new Uint32Array(e.buffer);let S=0;for(let x=0;x<r;x++){for(const k=t+m;t<k;t++){const T=t<w?d[t]:255;e[S++]=T&128?p:f,e[S++]=T&64?p:f,e[S++]=T&32?p:f,e[S++]=T&16?p:f,e[S++]=T&8?p:f,e[S++]=T&4?p:f,e[S++]=T&2?p:f,e[S++]=T&1?p:f}if(v===0)continue;const C=t<w?d[t++]:255;for(let k=0;k<v;k++)e[S++]=C&1<<7-k?p:f}return{srcPos:t,destPos:S}}const JA=16,tS=100,Fx=15,eS=10,nS=1e3,Ln=16;function Ox(d,t){if(d._removeMirroring)throw new Error("Context is already forwarding operations.");d.__originalSave=d.save,d.__originalRestore=d.restore,d.__originalRotate=d.rotate,d.__originalScale=d.scale,d.__originalTranslate=d.translate,d.__originalTransform=d.transform,d.__originalSetTransform=d.setTransform,d.__originalResetTransform=d.resetTransform,d.__originalClip=d.clip,d.__originalMoveTo=d.moveTo,d.__originalLineTo=d.lineTo,d.__originalBezierCurveTo=d.bezierCurveTo,d.__originalRect=d.rect,d.__originalClosePath=d.closePath,d.__originalBeginPath=d.beginPath,d._removeMirroring=()=>{d.save=d.__originalSave,d.restore=d.__originalRestore,d.rotate=d.__originalRotate,d.scale=d.__originalScale,d.translate=d.__originalTranslate,d.transform=d.__originalTransform,d.setTransform=d.__originalSetTransform,d.resetTransform=d.__originalResetTransform,d.clip=d.__originalClip,d.moveTo=d.__originalMoveTo,d.lineTo=d.__originalLineTo,d.bezierCurveTo=d.__originalBezierCurveTo,d.rect=d.__originalRect,d.closePath=d.__originalClosePath,d.beginPath=d.__originalBeginPath,delete d._removeMirroring},d.save=function(){t.save(),this.__originalSave()},d.restore=function(){t.restore(),this.__originalRestore()},d.translate=function(i,r){t.translate(i,r),this.__originalTranslate(i,r)},d.scale=function(i,r){t.scale(i,r),this.__originalScale(i,r)},d.transform=function(i,r,a,u,c,f){t.transform(i,r,a,u,c,f),this.__originalTransform(i,r,a,u,c,f)},d.setTransform=function(i,r,a,u,c,f){t.setTransform(i,r,a,u,c,f),this.__originalSetTransform(i,r,a,u,c,f)},d.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},d.rotate=function(i){t.rotate(i),this.__originalRotate(i)},d.clip=function(i){t.clip(i),this.__originalClip(i)},d.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},d.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},d.bezierCurveTo=function(e,i,r,a,u,c){t.bezierCurveTo(e,i,r,a,u,c),this.__originalBezierCurveTo(e,i,r,a,u,c)},d.rect=function(e,i,r,a){t.rect(e,i,r,a),this.__originalRect(e,i,r,a)},d.closePath=function(){t.closePath(),this.__originalClosePath()},d.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class $x{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function kf(d,t,e,i,r,a,u,c,f,p){const[m,v,w,S,x,C]=re(d);if(v===0&&w===0){const I=u*m+x,O=Math.round(I),D=c*S+C,z=Math.round(D),B=(u+f)*m+x,j=Math.abs(Math.round(B)-O)||1,K=(c+p)*S+C,st=Math.abs(Math.round(K)-z)||1;return d.setTransform(Math.sign(m),0,0,Math.sign(S),O,z),d.drawImage(t,e,i,r,a,0,0,j,st),d.setTransform(m,v,w,S,x,C),[j,st]}if(m===0&&S===0){const I=c*w+x,O=Math.round(I),D=u*v+C,z=Math.round(D),B=(c+p)*w+x,j=Math.abs(Math.round(B)-O)||1,K=(u+f)*v+C,st=Math.abs(Math.round(K)-z)||1;return d.setTransform(0,Math.sign(v),Math.sign(w),0,O,z),d.drawImage(t,e,i,r,a,0,0,st,j),d.setTransform(m,v,w,S,x,C),[st,j]}d.drawImage(t,e,i,r,a,u,c,f,p);const k=Math.hypot(m,v),T=Math.hypot(w,S);return[k*f,T*p]}function zx(d){const{width:t,height:e}=d;if(t>nS||e>nS)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1;let u=new Uint8Array(a*(e+1)),c,f,p;const m=t+7&-8;let v=new Uint8Array(m*e),w=0;for(const T of d.data){let I=128;for(;I>0;)v[w++]=T&I?0:255,I>>=1}let S=0;for(w=0,v[w]!==0&&(u[0]=1,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[f]=v[w]?2:1,++S),w++;for(v[w]!==0&&(u[f]=2,++S),c=1;c<e;c++){w=c*m,p=c*a,v[w-m]!==v[w]&&(u[p]=v[w]?1:8,++S);let T=(v[w]?4:0)+(v[w-m]?8:0);for(f=1;f<t;f++)T=(T>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[T]&&(u[p+f]=r[T],++S),w++;if(v[w-m]!==v[w]&&(u[p+f]=v[w]?2:4,++S),S>i)return null}for(w=m*(e-1),p=c*a,v[w]!==0&&(u[p]=8,++S),f=1;f<t;f++)v[w]!==v[w+1]&&(u[p+f]=v[w]?4:8,++S),w++;if(v[w]!==0&&(u[p+f]=4,++S),S>i)return null;const x=new Int32Array([0,a,-1,0,-a,0,0,0,1]),C=new Path2D;for(c=0;S&&c<=e;c++){let T=c*a;const I=T+t;for(;T<I&&!u[T];)T++;if(T===I)continue;C.moveTo(T%a,c);const O=T;let D=u[T];do{const z=x[D];do T+=z;while(!u[T]);const B=u[T];B!==5&&B!==10?(D=B,u[T]=0):(D=B&51*D>>4,u[T]&=D>>2|D<<2),C.lineTo(T%a,T/a|0),u[T]||--S}while(O!==T);--c}return v=null,u=null,function(T){T.save(),T.scale(1/t,-1/e),T.translate(0,-e),T.fill(C),T.beginPath(),T.restore()}}class iS{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_S,this.textMatrixScale=1,this.fontMatrix=Jm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ze.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=pt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){const i=pt.applyTransform(e,t),r=pt.applyTransform(e.slice(2),t),a=pt.applyTransform([e[0],e[3]],t),u=pt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],a[0],u[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],u[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],u[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],u[1])}updateScalingPathMinMax(t,e){pt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,a,u,c,f,p,m){const v=pt.bezierBoundingBox(e,i,r,a,u,c,f,p,m);m||this.updateRectMinMax(t,v)}getPathBoundingBox(t=an.FILL,e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(t===an.STROKE){e||Qt("Stroke bounding box must include transform.");const r=pt.singularValueDecompose2dScale(e),a=r[0]*this.lineWidth/2,u=r[1]*this.lineWidth/2;i[0]-=a,i[1]-=u,i[2]+=a,i[3]+=u}return i}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=an.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function sS(d,t){if(t instanceof ImageData){d.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%Ln,a=(e-r)/Ln,u=r===0?a:a+1,c=d.createImageData(i,Ln);let f=0,p;const m=t.data,v=c.data;let w,S,x,C;if(t.kind===Rf.GRAYSCALE_1BPP){const k=m.byteLength,T=new Uint32Array(v.buffer,0,v.byteLength>>2),I=T.length,O=i+7>>3,D=4294967295,z=yn.isLittleEndian?4278190080:255;for(w=0;w<u;w++){for(x=w<a?Ln:r,p=0,S=0;S<x;S++){const B=k-f;let j=0;const K=B>O?i:B*8-7,st=K&-8;let St=0,tt=0;for(;j<st;j+=8)tt=m[f++],T[p++]=tt&128?D:z,T[p++]=tt&64?D:z,T[p++]=tt&32?D:z,T[p++]=tt&16?D:z,T[p++]=tt&8?D:z,T[p++]=tt&4?D:z,T[p++]=tt&2?D:z,T[p++]=tt&1?D:z;for(;j<K;j++)St===0&&(tt=m[f++],St=128),T[p++]=tt&St?D:z,St>>=1}for(;p<I;)T[p++]=0;d.putImageData(c,0,w*Ln)}}else if(t.kind===Rf.RGBA_32BPP){for(S=0,C=i*Ln*4,w=0;w<a;w++)v.set(m.subarray(f,f+C)),f+=C,d.putImageData(c,0,S),S+=Ln;w<u&&(C=i*r*4,v.set(m.subarray(f,f+C)),d.putImageData(c,0,S))}else if(t.kind===Rf.RGB_24BPP)for(x=Ln,C=i*x,w=0;w<u;w++){for(w>=a&&(x=r,C=i*x),p=0,S=C;S--;)v[p++]=m[f++],v[p++]=m[f++],v[p++]=m[f++],v[p++]=255;d.putImageData(c,0,w*Ln)}else throw new Error(`bad image kind: ${t.kind}`)}function rS(d,t){if(t.bitmap){d.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%Ln,a=(e-r)/Ln,u=r===0?a:a+1,c=d.createImageData(i,Ln);let f=0;const p=t.data,m=c.data;for(let v=0;v<u;v++){const w=v<a?Ln:r;({srcPos:f}=Dx({src:p,srcPos:f,dest:m,width:i,height:w,nonBlackColor:0})),d.putImageData(c,0,v*Ln)}}function dc(d,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)d[i]!==void 0&&(t[i]=d[i]);d.setLineDash!==void 0&&(t.setLineDash(d.getLineDash()),t.lineDashOffset=d.lineDashOffset)}function Tf(d){if(d.strokeStyle=d.fillStyle="#000000",d.fillRule="nonzero",d.globalAlpha=1,d.lineWidth=1,d.lineCap="butt",d.lineJoin="miter",d.miterLimit=10,d.globalCompositeOperation="source-over",d.font="10px sans-serif",d.setLineDash!==void 0&&(d.setLineDash([]),d.lineDashOffset=0),!on){const{filter:t}=d;t!=="none"&&t!==""&&(d.filter="none")}}function aS(d,t){if(t)return!0;const e=pt.singularValueDecompose2dScale(d);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*ea.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const Hx=["butt","round","square"],Bx=["miter","round","bevel"],jx={},oS={};var zi,Cy,ky,Ty;const Mv=class Mv{constructor(t,e,i,r,a,{optionalContentConfig:u,markedContentStack:c=null},f,p){_(this,zi);this.ctx=t,this.current=new iS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new $x(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const a=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,a,u),this.ctx.fillStyle=c,i){const f=this.cachedCanvases.getCanvas("transparent",a,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...re(this.compositeCtx))}this.ctx.save(),Tf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=re(this.ctx)}executeOperatorList(t,e,i,r){const a=t.argsArray,u=t.fnArray;let c=e||0;const f=a.length;if(f===c)return c;const p=f-c>eS&&typeof i=="function",m=p?Date.now()+Fx:0;let v=0;const w=this.commonObjs,S=this.objs;let x;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,i),c;if(x=u[c],x!==Ei.dependency)this[x].apply(this,a[c]);else for(const C of a[c]){const k=C.startsWith("g_")?w:S;if(!k.has(C))return k.get(C,i),c}if(c++,c===f)return c;if(p&&++v>eS){if(Date.now()>m)return i(),c;v=0}}}endDrawing(){E(this,zi,Cy).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,zi,ky).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let a=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=i,f=r,p="prescale1",m,v;for(;a>2&&c>1||u>2&&f>1;){let w=c,S=f;a>2&&c>1&&(w=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/w),u>2&&f>1&&(S=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/S),m=this.cachedCanvases.getCanvas(p,w,S),v=m.context,v.clearRect(0,0,w,S),v.drawImage(t,0,0,c,f,0,0,w,S),t=m.canvas,c=w,f=S,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:r}=t,a=this.current.fillColor,u=this.current.patternFill,c=re(e);let f,p,m,v;if((t.bitmap||t.data)&&t.count>1){const K=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),a]),f=this._cachedBitmapsMap.get(K),f||(f=new Map,this._cachedBitmapsMap.set(K,f));const st=f.get(p);if(st&&!u){const St=Math.round(Math.min(c[0],c[2])+c[4]),tt=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:st,offsetX:St,offsetY:tt}}m=st}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),rS(v.context,t));let w=pt.transform(c,[1/i,0,0,-1/r,0,0]);w=pt.transform(w,[1,0,0,1,0,-r]);const[S,x,C,k]=pt.getAxialAlignedBoundingBox([0,0,i,r],w),T=Math.round(C-S)||1,I=Math.round(k-x)||1,O=this.cachedCanvases.getCanvas("fillCanvas",T,I),D=O.context,z=S,B=x;D.translate(-z,-B),D.transform(...w),m||(m=this._scaleImage(v.canvas,Wi(D)),m=m.img,f&&u&&f.set(p,m)),D.imageSmoothingEnabled=aS(re(D),t.interpolate),kf(D,m,0,0,m.width,m.height,0,0,i,r),D.globalCompositeOperation="source-in";const j=pt.transform(Wi(D),[1,0,0,1,-z,-B]);return D.fillStyle=u?a.getPattern(e,this,j,an.FILL):a,D.fillRect(0,0,i,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),{canvas:O.canvas,offsetX:Math.round(z),offsetY:Math.round(B)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Hx[t]}setLineJoin(t){this.ctx.lineJoin=Bx[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;const a=this.ctx;a.setTransform(...re(this.suspendedCtx)),dc(this.suspendedCtx,a),Ox(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),dc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const a=r[0],u=r[1],c=r[2]-a,f=r[3]-u;c===0||f===0||(this.genericComposeSMask(e.context,i,c,f,e.subtype,e.backdrop,e.transferMap,a,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,a,u,c,f,p,m,v){let w=t.canvas,S=f-m,x=p-v;if(u){const k=pt.makeHexColor(...u);if(S<0||x<0||S+i>w.width||x+r>w.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),I=T.context;I.drawImage(w,-S,-x),I.globalCompositeOperation="destination-atop",I.fillStyle=k,I.fillRect(0,0,i,r),I.globalCompositeOperation="source-over",w=T.canvas,S=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(S,x,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(S,x,i,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const C=new Path2D;C.rect(f,p,i,r),e.clip(C),e.globalCompositeOperation="destination-in",e.drawImage(w,S,x,i,r,f,p,i,r),e.restore()}save(){this.inSMaskMode?(dc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),dc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,a,u){this.ctx.transform(t,e,i,r,a,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){const r=this.ctx,a=this.current;let u=a.x,c=a.y,f,p;const m=re(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let S=0,x=0,C=t.length;S<C;S++)switch(t[S]|0){case Ei.rectangle:u=e[x++],c=e[x++];const k=e[x++],T=e[x++],I=u+k,O=c+T;r.moveTo(u,c),k===0||T===0?r.lineTo(I,O):(r.lineTo(I,c),r.lineTo(I,O),r.lineTo(u,O)),v||a.updateRectMinMax(m,[u,c,I,O]),r.closePath();break;case Ei.moveTo:u=e[x++],c=e[x++],r.moveTo(u,c),v||a.updatePathMinMax(m,u,c);break;case Ei.lineTo:u=e[x++],c=e[x++],r.lineTo(u,c),v||a.updatePathMinMax(m,u,c);break;case Ei.curveTo:f=u,p=c,u=e[x+4],c=e[x+5],r.bezierCurveTo(e[x],e[x+1],e[x+2],e[x+3],u,c),a.updateCurvePathMinMax(m,f,p,e[x],e[x+1],e[x+2],e[x+3],u,c,w),x+=6;break;case Ei.curveTo2:f=u,p=c,r.bezierCurveTo(u,c,e[x],e[x+1],e[x+2],e[x+3]),a.updateCurvePathMinMax(m,f,p,u,c,e[x],e[x+1],e[x+2],e[x+3],w),u=e[x+2],c=e[x+3],x+=4;break;case Ei.curveTo3:f=u,p=c,u=e[x+2],c=e[x+3],r.bezierCurveTo(e[x],e[x+1],u,c,u,c),a.updateCurvePathMinMax(m,f,p,e[x],e[x+1],u,c,u,c,w),x+=4;break;case Ei.closePath:r.closePath();break}v&&a.updateScalingPathMinMax(m,w),a.setCurrentPoint(u,c)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(e.save(),e.strokeStyle=i.getPattern(e,this,Wi(e),an.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let a=!1;r&&(e.save(),e.fillStyle=i.getPattern(e,this,Wi(e),an.FILL),a=!0);const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),a&&e.restore(),t&&this.consumePath(u)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=jx}eoClip(){this.pendingClip=oS}beginText(){this.current.textMatrix=_S,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}const i=new Path2D,r=e.getTransform().invertSelf();for(const{transform:a,x:u,y:c,fontSize:f,path:p}of t)i.addPath(p,new DOMMatrix(a).preMultiplySelf(r).translate(u,c).scale(f,-f));e.clip(i),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var m;const i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=i.fontMatrix||Jm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Rt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const a=i.loadedName||"sans-serif",u=((m=i.systemFontInfo)==null?void 0:m.css)||`"${a}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const f=i.italic?"italic":"normal";let p=e;e<JA?p=JA:e>tS&&(p=tS),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,a,u){this.current.textMatrix=[t,e,i,r,a,u],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r,a){const u=this.ctx,c=this.current,f=c.font,p=c.textRenderingMode,m=c.fontSize/c.fontSizeScale,v=p&Ze.FILL_STROKE_MASK,w=!!(p&Ze.ADD_TO_PATH_FLAG),S=c.patternFill&&!f.missingFile,x=c.patternStroke&&!f.missingFile;let C;if((f.disableFontFace||w||S||x)&&(C=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||S||x){if(u.save(),u.translate(e,i),u.scale(m,-m),v===Ze.FILL||v===Ze.FILL_STROKE)if(r){const k=u.getTransform();u.setTransform(...r),u.fill(E(this,zi,Ty).call(this,C,k,r))}else u.fill(C);if(v===Ze.STROKE||v===Ze.FILL_STROKE)if(a){const k=u.getTransform();u.setTransform(...a),u.stroke(E(this,zi,Ty).call(this,C,k,a))}else u.lineWidth/=m,u.stroke(C);u.restore()}else(v===Ze.FILL||v===Ze.FILL_STROKE)&&u.fillText(t,e,i),(v===Ze.STROKE||v===Ze.FILL_STROKE)&&u.strokeText(t,e,i);w&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:re(u),x:e,y:i,fontSize:m,path:C})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return Ft(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const a=this.ctx,u=e.fontSizeScale,c=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,m=e.textHScale*p,v=t.length,w=i.vertical,S=w?1:-1,x=i.defaultVMetrics,C=r*e.fontMatrix[0],k=e.textRenderingMode===Ze.FILL&&!i.disableFontFace&&!e.patternFill;a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),p>0?a.scale(m,-1):a.scale(m,1);let T,I;if(e.patternFill){a.save();const j=e.fillColor.getPattern(a,this,Wi(a),an.FILL);T=re(a),a.restore(),a.fillStyle=j}if(e.patternStroke){a.save();const j=e.strokeColor.getPattern(a,this,Wi(a),an.STROKE);I=re(a),a.restore(),a.strokeStyle=j}let O=e.lineWidth;const D=e.textMatrixScale;if(D===0||O===0){const j=e.textRenderingMode&Ze.FILL_STROKE_MASK;(j===Ze.STROKE||j===Ze.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=D;if(u!==1&&(a.scale(u,u),O/=u),a.lineWidth=O,i.isInvalidPDFjsFont){const j=[];let K=0;for(const st of t)j.push(st.unicode),K+=st.width;a.fillText(j.join(""),0,0),e.x+=K*C*m,a.restore(),this.compose();return}let z=0,B;for(B=0;B<v;++B){const j=t[B];if(typeof j=="number"){z+=S*j*r/1e3;continue}let K=!1;const st=(j.isSpace?f:0)+c,St=j.fontChar,tt=j.accent;let ct,Et,Ct=j.width;if(w){const Y=j.vmetric||x,G=-(j.vmetric?Y[1]:Ct*.5)*C,U=Y[2]*C;Ct=Y?-Y[0]:Ct,ct=G/u,Et=(z+U)/u}else ct=z/u,Et=0;if(i.remeasure&&Ct>0){const Y=a.measureText(St).width*1e3/r*u;if(Ct<Y&&this.isFontSubpixelAAEnabled){const G=Ct/Y;K=!0,a.save(),a.scale(G,1),ct/=G}else Ct!==Y&&(ct+=(Ct-Y)/2e3*r/u)}if(this.contentVisible&&(j.isInFont||i.missingFile)){if(k&&!tt)a.fillText(St,ct,Et);else if(this.paintChar(St,ct,Et,T,I),tt){const Y=ct+r*tt.offset.x/u,G=Et-r*tt.offset.y/u;this.paintChar(tt.fontChar,Y,G,T,I)}}const Lt=w?Ct*C-st*p:Ct*C+st*p;z+=Lt,K&&a.restore()}w?e.y-=z:e.x+=z*m,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,r=i.font,a=i.fontSize,u=i.fontDirection,c=r.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||Jm,w=t.length,S=i.textRenderingMode===Ze.INVISIBLE;let x,C,k,T;if(!(S||a===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(m,u),x=0;x<w;++x){if(C=t[x],typeof C=="number"){T=c*C*a/1e3,this.ctx.translate(T,0),i.x+=T*m;continue}const I=(C.isSpace?p:0)+f,O=r.charProcOperatorList[C.operatorListId];if(!O){Rt(`Type3 character "${C.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=C,this.save(),e.scale(a,a),e.transform(...v),this.executeOperatorList(O),this.restore()),k=pt.applyTransform([C.width,0],v)[0]*a+I,e.translate(k,0),i.x+=k*m}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,a,u){this.ctx.rect(i,r,a-i,u-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=t[1],r=this.baseTransform||re(this.ctx),a={createCanvasGraphics:u=>new Mv(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new xy(t,i,this.ctx,a,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=pt.makeHexColor(t,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=pt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Nx(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,Wi(e),an.SHADING);const r=Wi(e);{const{width:a,height:u}=e.canvas,[c,f,p,m]=pt.getAxialAlignedBoundingBox([0,0,a,u],r);this.ctx.fillRect(c,f,p-c,m-f)}this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=re(this.ctx),e)){const i=e[2]-e[0],r=e[3]-e[1];this.ctx.rect(e[0],e[1],i,r),this.current.updateRectMinMax(re(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Dp("TODO: Support non-isolated groups."),t.knockout&&Rt("Knockout groups not supported.");const i=re(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=pt.getAxialAlignedBoundingBox(t.bbox,re(e));const a=[0,0,e.canvas.width,e.canvas.height];r=pt.intersect(r,a)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),w=v.context;w.translate(-u,-c),w.transform(...i),t.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.save()),dc(e,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=re(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const a=pt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,r,a){if(E(this,zi,Cy).call(this),Tf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],c=e[3]-e[1];if(a&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=c;const[f,p]=pt.singularValueDecompose2dScale(re(this.ctx)),{viewportScale:m}=this,v=Math.ceil(u*this.outputScaleX*m),w=Math.ceil(c*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:S,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,S),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(f,0,0,-p,0,c*p),Tf(this.ctx)}else Tf(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],u,c),this.ctx.clip(),this.ctx.beginPath()}this.current=new iS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,zi,ky).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=zx(t)),r.compiled)){r.compiled(i);return}const a=this._createMaskCanvas(t),u=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(u,a.offsetX,a.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,r=0,a,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const f=re(c);c.transform(e,i,r,a,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let m=0,v=u.length;m<v;m+=2){const w=pt.transform(f,[e,i,r,a,u[m],u[m+1]]),[S,x]=pt.applyTransform([0,0],w);c.drawImage(p.canvas,S,x)}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of t){const{data:u,width:c,height:f,transform:p}=a,m=this.cachedCanvases.getCanvas("maskCanvas",c,f),v=m.context;v.save();const w=this.getObject(u,a);rS(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,Wi(e),an.FILL):i,v.fillRect(0,0,c,f),v.restore(),e.save(),e.transform(...p),e.scale(1,-1),kf(e,m.canvas,0,0,c,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Rt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;const a=this.getObject(t);if(!a){Rt("Dependent image isn't ready yet");return}const u=a.width,c=a.height,f=[];for(let p=0,m=r.length;p<m;p+=2)f.push({transform:[e,0,0,i,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(a,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,a=this.cachedCanvases.getCanvas("inlineImage",i,r),u=a.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",a.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,r=this.ctx;if(this.save(),!on){const{filter:c}=r;c!=="none"&&c!==""&&(r.filter="none")}r.scale(1/e,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",e,i).context;sS(f,t),a=this.applyTransferMapsToCanvas(f)}const u=this._scaleImage(a,Wi(r));r.imageSmoothingEnabled=aS(re(r),t.interpolate),kf(r,u.img,0,0,u.paintWidth,u.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const a=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",a,u).context;sS(f,t),r=this.applyTransferMapsToCanvas(f)}for(const a of e)i.save(),i.transform(...a.transform),i.scale(1,-1),kf(i,r,a.x,a.y,a.w,a.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===oS?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=re(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:a}=this.ctx.getTransform();let u,c;if(i===0&&r===0){const f=Math.abs(e),p=Math.abs(a);if(f===p)if(t===0)u=c=1/f;else{const m=f*t;u=c=m<1?1/m:1}else if(t===0)u=1/f,c=1/p;else{const m=f*t,v=p*t;u=m<1?1/m:1,c=v<1?1/v:1}}else{const f=Math.abs(e*a-i*r),p=Math.hypot(e,i),m=Math.hypot(r,a);if(t===0)u=m/f,c=p/f;else{const v=t*f;u=m>v?m/v:1,c=p>v?p/v:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:i}=this.current,[r,a]=this.getScaleForStroking();if(e.lineWidth=i||1,r===1&&a===1){e.stroke();return}const u=e.getLineDash();if(t&&e.save(),e.scale(r,a),u.length>0){const c=Math.max(r,a);e.setLineDash(u.map(f=>f/c)),e.lineDashOffset/=c}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};zi=new WeakSet,Cy=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ky=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Ty=function(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r};let ml=Mv;for(const d in Ei)ml.prototype[d]!==void 0&&(ml.prototype[Ei[d]]=ml.prototype[d]);var dh,fh;class Qs{static get workerPort(){return o(this,dh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,dh,t)}static get workerSrc(){return o(this,fh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,fh,t)}}dh=new WeakMap,fh=new WeakMap,_(Qs,dh,null),_(Qs,fh,"");var Wa,ph;class Ux{constructor({parsedData:t,rawData:e}){_(this,Wa);_(this,ph);A(this,Wa,t),A(this,ph,e)}getRaw(){return o(this,ph)}get(t){return o(this,Wa).get(t)??null}getAll(){return wv(o(this,Wa))}has(t){return o(this,Wa).has(t)}}Wa=new WeakMap,ph=new WeakMap;const cl=Symbol("INTERNAL");var gh,mh,yh,Dl;class Vx{constructor(t,{name:e,intent:i,usage:r,rbGroups:a}){_(this,gh,!1);_(this,mh,!1);_(this,yh,!1);_(this,Dl,!0);A(this,gh,!!(t&Yn.DISPLAY)),A(this,mh,!!(t&Yn.PRINT)),this.name=e,this.intent=i,this.usage=r,this.rbGroups=a}get visible(){if(o(this,yh))return o(this,Dl);if(!o(this,Dl))return!1;const{print:t,view:e}=this.usage;return o(this,gh)?(e==null?void 0:e.viewState)!=="OFF":o(this,mh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==cl&&Qt("Internal method `_setVisible` called."),A(this,yh,i),A(this,Dl,e)}}gh=new WeakMap,mh=new WeakMap,yh=new WeakMap,Dl=new WeakMap;var Dr,Xt,Fl,Ol,vh,Py;class Wx{constructor(t,e=Yn.DISPLAY){_(this,vh);_(this,Dr,null);_(this,Xt,new Map);_(this,Fl,null);_(this,Ol,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Ol,t.order);for(const i of t.groups)o(this,Xt).set(i.id,new Vx(e,i));if(t.baseState==="OFF")for(const i of o(this,Xt).values())i._setVisible(cl,!1);for(const i of t.on)o(this,Xt).get(i)._setVisible(cl,!0);for(const i of t.off)o(this,Xt).get(i)._setVisible(cl,!1);A(this,Fl,this.getHash())}}isVisible(t){if(o(this,Xt).size===0)return!0;if(!t)return Dp("Optional content group not defined."),!0;if(t.type==="OCG")return o(this,Xt).has(t.id)?o(this,Xt).get(t.id).visible:(Rt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,vh,Py).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!o(this,Xt).has(e))return Rt(`Optional content group not found: ${e}`),!0;if(o(this,Xt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!o(this,Xt).has(e))return Rt(`Optional content group not found: ${e}`),!0;if(!o(this,Xt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!o(this,Xt).has(e))return Rt(`Optional content group not found: ${e}`),!0;if(!o(this,Xt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!o(this,Xt).has(e))return Rt(`Optional content group not found: ${e}`),!0;if(o(this,Xt).get(e).visible)return!1}return!0}return Rt(`Unknown optional content policy ${t.policy}.`),!0}return Rt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var a;const r=o(this,Xt).get(t);if(!r){Rt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==t&&((a=o(this,Xt).get(c))==null||a._setVisible(cl,!1,!0));r._setVisible(cl,!!e,!0),A(this,Dr,null)}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const a=o(this,Xt).get(r);if(a)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!a.visible,e);break}}A(this,Dr,null)}get hasInitialVisibility(){return o(this,Fl)===null||this.getHash()===o(this,Fl)}getOrder(){return o(this,Xt).size?o(this,Ol)?o(this,Ol).slice():[...o(this,Xt).keys()]:null}getGroups(){return o(this,Xt).size>0?wv(o(this,Xt)):null}getGroup(t){return o(this,Xt).get(t)||null}getHash(){if(o(this,Dr)!==null)return o(this,Dr);const t=new t1;for(const[e,i]of o(this,Xt))t.update(`${e}:${i.visible}`);return A(this,Dr,t.hexdigest())}}Dr=new WeakMap,Xt=new WeakMap,Fl=new WeakMap,Ol=new WeakMap,vh=new WeakSet,Py=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const a=t[r];let u;if(Array.isArray(a))u=E(this,vh,Py).call(this,a);else if(o(this,Xt).has(a))u=o(this,Xt).get(a).visible;else return Rt(`Optional content group not found: ${a}`),!0;switch(i){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return i==="And"};class Gx{constructor(t,{disableRange:e=!1,disableStream:i=!1}){be(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:a,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const f=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(a){return a._begin!==t?!1:(a._enqueue(i),!0)});be(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,r,a;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(a=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||a.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){be(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Xx(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new qx(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Xx{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=bv(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class qx{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Yx(d){let t=!0,e=i("filename\\*","i").exec(d);if(e){e=e[1];let m=c(e);return m=unescape(m),m=f(m),m=p(m),a(m)}if(e=u(d),e){const m=p(e);return a(m)}if(e=i("filename","i").exec(d),e){e=e[1];let m=c(e);return m=p(m),a(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),S=Fp(v);v=w.decode(S),t=!1}catch{}}return v}function a(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function u(m){const v=[];let w;const S=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=S.exec(m))!==null;){let[,C,k,T]=w;if(C=parseInt(C,10),C in v){if(C===0)break;continue}v[C]=[k,T]}const x=[];for(let C=0;C<v.length&&C in v;++C){let[k,T]=v[C];T=c(T),k&&(T=unescape(T),C===0&&(T=f(T))),x.push(T)}return x.join("")}function c(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const S=v[w].indexOf('"');S!==-1&&(v[w]=v[w].slice(0,S),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function f(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),x=m.slice(v+1).replace(/^[^']*'/,"");return r(w,x)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,S,x){if(S==="q"||S==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,k){return String.fromCharCode(parseInt(k,16))}),r(w,x);try{x=atob(x)}catch{}return r(w,x)})}return""}function p1(d,t){const e=new Headers;if(!d||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function zp(d){try{return new URL(d).origin}catch{}return null}function g1({responseHeaders:d,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(d.get("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a,a<=2*e)||i||!t||d.get("Accept-Ranges")!=="bytes"||(d.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function m1(d){const t=d.get("Content-Disposition");if(t){let e=Yx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(bv(e))return e}return null}function Hp(d,t){return d===404||d===0&&t.startsWith("file:")?new Dc('Missing PDF "'+t+'".'):new ap(`Unexpected server response (${d}) while retrieving PDF "${t}".`,d)}function y1(d){return d===200||d===206}function v1(d,t,e){return{method:"GET",headers:d,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function w1(d){return d instanceof Uint8Array?d.buffer:d instanceof ArrayBuffer?d:(Rt(`getArrayBuffer - unexpected data format: ${d}`),new Uint8Array(d).buffer)}class lS{constructor(t){wt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=p1(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return be(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Kx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Qx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Kx{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,v1(i,this._withCredentials,this._abortController)).then(a=>{if(t._responseOrigin=zp(a.url),!y1(a.status))throw Hp(a.status,r);this._reader=a.body.getReader(),this._headersCapability.resolve();const u=a.headers,{allowRangeRequests:c,suggestedLength:f}=g1({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=f||this._contentLength,this._filename=m1(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ta("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:w1(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Qx{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const a=new Headers(t.headers);a.append("Range",`bytes=${e}-${i-1}`);const u=r.url;fetch(u,v1(a,this._withCredentials,this._abortController)).then(c=>{const f=zp(c.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!y1(c.status))throw Hp(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:w1(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Qm=200,Zm=206;function Zx(d){const t=d.response;return typeof t!="string"?t:Fp(t).buffer}class Jx{constructor({url:t,httpHeaders:e,withCredentials:i}){wt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=p1(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[a,u]of this.headers)e.setRequestHeader(a,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Zm):r.expectedStatus=Qm,e.responseType="arraybuffer",be(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var r;const i=this.pendingRequests[t];i&&((r=i.onProgress)==null||r.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const a=r.status||Qm;if(!(a===Qm&&i.expectedStatus===Zm)&&a!==i.expectedStatus){i.onError(r.status);return}const c=Zx(r);if(a===Zm){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?i.onDone({begin:parseInt(p[1],10),chunk:c}):(Rt('Missing or invalid "Content-Range" header.'),i.onError(0))}else c?i.onDone({begin:0,chunk:c}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class tC{constructor(t){this._source=t,this._manager=new Jx(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return be(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new nC(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class eC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=zp(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[f,...p]=c.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:u}=g1({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=m1(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Hp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nC{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=zp((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Hp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iC=/^[a-z][a-z0-9\-+.]+:/i;function sC(d){if(iC.test(d))return new URL(d);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(d))}class rC{constructor(t){this.source=t,this.url=sC(t.url),be(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return be(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new aC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new oC(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class aC{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new Dc(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ta("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class oC{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lC=1e5,Cn=30,uC=.8;var dS,Fr,Rn,wh,Ah,Ga,Ds,Sh,bh,Xa,$l,zl,Or,Hl,_h,Bl,qa,Eh,xh,Ya,Ka,Ch,$r,jl,er,A1,S1,Ry,Zn,Bf,My,b1,_1;const ke=class ke{constructor({textContentSource:t,container:e,viewport:i}){_(this,er);_(this,Fr,Promise.withResolvers());_(this,Rn,null);_(this,wh,!1);_(this,Ah,!!((dS=globalThis.FontInspector)!=null&&dS.enabled));_(this,Ga,null);_(this,Ds,null);_(this,Sh,0);_(this,bh,0);_(this,Xa,null);_(this,$l,null);_(this,zl,0);_(this,Or,0);_(this,Hl,Object.create(null));_(this,_h,[]);_(this,Bl,null);_(this,qa,[]);_(this,Eh,new WeakMap);_(this,xh,null);var f;if(t instanceof ReadableStream)A(this,Bl,t);else if(typeof t=="object")A(this,Bl,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,Rn,A(this,$l,e)),A(this,Or,i.scale*(globalThis.devicePixelRatio||1)),A(this,zl,i.rotation),A(this,Ds,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:a,pageX:u,pageY:c}=i.rawDims;A(this,xh,[1,0,0,-1,-u,c+a]),A(this,bh,r),A(this,Sh,a),E(f=ke,Zn,b1).call(f),To(e,i),o(this,Fr).promise.finally(()=>{o(ke,jl).delete(this),A(this,Ds,null),A(this,Hl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=yn.platform;return Ft(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{o(this,Xa).read().then(({value:e,done:i})=>{if(i){o(this,Fr).resolve();return}o(this,Ga)??A(this,Ga,e.lang),Object.assign(o(this,Hl),e.styles),E(this,er,A1).call(this,e.items),t()},o(this,Fr).reject)};return A(this,Xa,o(this,Bl).getReader()),o(ke,jl).add(this),t(),o(this,Fr).promise}update({viewport:t,onBefore:e=null}){var a;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==o(this,zl)&&(e==null||e(),A(this,zl,r),To(o(this,$l),{rotation:r})),i!==o(this,Or)){e==null||e(),A(this,Or,i);const u={div:null,properties:null,ctx:E(a=ke,Zn,Bf).call(a,o(this,Ga))};for(const c of o(this,qa))u.properties=o(this,Eh).get(c),u.div=c,E(this,er,Ry).call(this,u)}}cancel(){var e;const t=new ta("TextLayer task cancelled.");(e=o(this,Xa))==null||e.cancel(t).catch(()=>{}),A(this,Xa,null),o(this,Fr).reject(t)}get textDivs(){return o(this,qa)}get textContentItemsStr(){return o(this,_h)}static cleanup(){if(!(o(this,jl).size>0)){o(this,Ya).clear();for(const{canvas:t}of o(this,Ka).values())t.remove();o(this,Ka).clear()}}};Fr=new WeakMap,Rn=new WeakMap,wh=new WeakMap,Ah=new WeakMap,Ga=new WeakMap,Ds=new WeakMap,Sh=new WeakMap,bh=new WeakMap,Xa=new WeakMap,$l=new WeakMap,zl=new WeakMap,Or=new WeakMap,Hl=new WeakMap,_h=new WeakMap,Bl=new WeakMap,qa=new WeakMap,Eh=new WeakMap,xh=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,Ch=new WeakMap,$r=new WeakMap,jl=new WeakMap,er=new WeakSet,A1=function(t){var r,a;if(o(this,wh))return;(a=o(this,Ds)).ctx??(a.ctx=E(r=ke,Zn,Bf).call(r,o(this,Ga)));const e=o(this,qa),i=o(this,_h);for(const u of t){if(e.length>lC){Rt("Ignoring additional textDivs for performance reasons."),A(this,wh,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=o(this,Rn);A(this,Rn,document.createElement("span")),o(this,Rn).classList.add("markedContent"),u.id!==null&&o(this,Rn).setAttribute("id",`${u.id}`),c.append(o(this,Rn))}else u.type==="endMarkedContent"&&A(this,Rn,o(this,Rn).parentNode);continue}i.push(u.str),E(this,er,S1).call(this,u)}},S1=function(t){var C;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};o(this,qa).push(e);const r=pt.transform(o(this,xh),t.transform);let a=Math.atan2(r[1],r[0]);const u=o(this,Hl)[t.fontName];u.vertical&&(a+=Math.PI/2);let c=o(this,Ah)&&u.fontSubstitution||u.fontFamily;c=ke.fontFamilyMap.get(c)||c;const f=Math.hypot(r[2],r[3]),p=f*E(C=ke,Zn,_1).call(C,c,o(this,Ga));let m,v;a===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(a),v=r[5]-p*Math.cos(a));const w="calc(var(--scale-factor)*",S=e.style;o(this,Rn)===o(this,$l)?(S.left=`${(100*m/o(this,bh)).toFixed(2)}%`,S.top=`${(100*v/o(this,Sh)).toFixed(2)}%`):(S.left=`${w}${m.toFixed(2)}px)`,S.top=`${w}${v.toFixed(2)}px)`),S.fontSize=`${w}${(o(ke,$r)*f).toFixed(2)}px)`,S.fontFamily=c,i.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,o(this,Ah)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),a!==0&&(i.angle=a*(180/Math.PI));let x=!1;if(t.str.length>1)x=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);k!==T&&Math.max(k,T)/Math.min(k,T)>1.5&&(x=!0)}if(x&&(i.canvasWidth=u.vertical?t.height:t.width),o(this,Eh).set(e,i),o(this,Ds).div=e,o(this,Ds).properties=i,E(this,er,Ry).call(this,o(this,Ds)),i.hasText&&o(this,Rn).append(e),i.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),o(this,Rn).append(k)}},Ry=function(t){var c;const{div:e,properties:i,ctx:r}=t,{style:a}=e;let u="";if(o(ke,$r)>1&&(u=`scale(${1/o(ke,$r)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:f}=a,{canvasWidth:p,fontSize:m}=i;E(c=ke,Zn,My).call(c,r,m*o(this,Or),f);const{width:v}=r.measureText(e.textContent);v>0&&(u=`scaleX(${p*o(this,Or)/v}) ${u}`)}i.angle!==0&&(u=`rotate(${i.angle}deg) ${u}`),u.length>0&&(a.transform=u)},Zn=new WeakSet,Bf=function(t=null){let e=o(this,Ka).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),o(this,Ka).set(t,e),o(this,Ch).set(e,{size:0,family:""})}return e},My=function(t,e,i){const r=o(this,Ch).get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)},b1=function(){if(o(this,$r)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,$r,t.getBoundingClientRect().height),t.remove()},_1=function(t,e){const i=o(this,Ya).get(t);if(i)return i;const r=E(this,Zn,Bf).call(this,e);r.canvas.width=r.canvas.height=Cn,E(this,Zn,My).call(this,r,Cn,t);const a=r.measureText("");let u=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(u){const m=u/(u+c);return o(this,Ya).set(t,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Cn,Cn),r.strokeText("g",0,0);let f=r.getImageData(0,0,Cn,Cn).data;c=0;for(let m=f.length-1-3;m>=0;m-=4)if(f[m]>0){c=Math.ceil(m/4/Cn);break}r.clearRect(0,0,Cn,Cn),r.strokeText("A",0,Cn),f=r.getImageData(0,0,Cn,Cn).data,u=0;for(let m=0,v=f.length;m<v;m+=4)if(f[m]>0){u=Cn-Math.floor(m/4/Cn);break}r.canvas.width=r.canvas.height=0;const p=u?u/(u+c):uC;return o(this,Ya).set(t,p),p},_(ke,Zn),_(ke,Ya,new Map),_(ke,Ka,new Map),_(ke,Ch,new WeakMap),_(ke,$r,null),_(ke,jl,new Set);let Fc=ke;class Oc{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(a){var f;if(!a)return;let u=null;const c=a.name;if(c==="#text")u=a.value;else if(Oc.shouldBuildText(c))(f=a==null?void 0:a.attributes)!=null&&f.textContent?u=a.attributes.textContent:a.value&&(u=a.value);else return;if(u!==null&&e.push({str:u}),!!a.children)for(const p of a.children)r(p)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const cC=65536,hC=100,dC=5e3,fC=on?kx:Ex,pC=on?Tx:l1,gC=on?Cx:xx,mC=on?Px:d1;function yC(d={}){typeof d=="string"||d instanceof URL?d={url:d}:(d instanceof ArrayBuffer||ArrayBuffer.isView(d))&&(d={data:d});const t=new Ly,{docId:e}=t,i=d.url?vC(d.url):null,r=d.data?wC(d.data):null,a=d.httpHeaders||null,u=d.withCredentials===!0,c=d.password??null,f=d.range instanceof E1?d.range:null,p=Number.isInteger(d.rangeChunkSize)&&d.rangeChunkSize>0?d.rangeChunkSize:cC;let m=d.worker instanceof yl?d.worker:null;const v=d.verbosity,w=typeof d.docBaseUrl=="string"&&!$p(d.docBaseUrl)?d.docBaseUrl:null,S=typeof d.cMapUrl=="string"?d.cMapUrl:null,x=d.cMapPacked!==!1,C=d.CMapReaderFactory||pC,k=typeof d.standardFontDataUrl=="string"?d.standardFontDataUrl:null,T=d.StandardFontDataFactory||mC,I=d.stopAtErrors!==!0,O=Number.isInteger(d.maxImageSize)&&d.maxImageSize>-1?d.maxImageSize:-1,D=d.isEvalSupported!==!1,z=typeof d.isOffscreenCanvasSupported=="boolean"?d.isOffscreenCanvasSupported:!on,B=typeof d.isImageDecoderSupported=="boolean"?d.isImageDecoderSupported:!on&&(yn.platform.isFirefox||!globalThis.chrome),j=Number.isInteger(d.canvasMaxAreaInBytes)?d.canvasMaxAreaInBytes:-1,K=typeof d.disableFontFace=="boolean"?d.disableFontFace:on,st=d.fontExtraProperties===!0,St=d.enableXfa===!0,tt=d.ownerDocument||globalThis.document,ct=d.disableRange===!0,Et=d.disableStream===!0,Ct=d.disableAutoFetch===!0,Lt=d.pdfBug===!0,Y=d.CanvasFactory||fC,G=d.FilterFactory||gC,U=d.enableHWA===!0,it=f?f.length:d.length??NaN,Q=typeof d.useSystemFonts=="boolean"?d.useSystemFonts:!on&&!K,L=typeof d.useWorkerFetch=="boolean"?d.useWorkerFetch:C===l1&&T===d1&&S&&k&&mc(S,document.baseURI)&&mc(k,document.baseURI),H=null;nx(v);const dt={canvasFactory:new Y({ownerDocument:tt,enableHWA:U}),filterFactory:new G({docId:e,ownerDocument:tt}),cMapReaderFactory:L?null:new C({baseUrl:S,isCompressed:x}),standardFontDataFactory:L?null:new T({baseUrl:k})};if(!m){const bt={verbosity:v,port:Qs.workerPort};m=bt.port?yl.fromPort(bt):new yl(bt),t._worker=m}const kt={docId:e,apiVersion:"4.10.38",data:r,password:c,disableAutoFetch:Ct,rangeChunkSize:p,length:it,docBaseUrl:w,enableXfa:St,evaluatorOptions:{maxImageSize:O,disableFontFace:K,ignoreErrors:I,isEvalSupported:D,isOffscreenCanvasSupported:z,isImageDecoderSupported:B,canvasMaxAreaInBytes:j,fontExtraProperties:st,useSystemFonts:Q,cMapUrl:L?S:null,standardFontDataUrl:L?k:null}},It={disableFontFace:K,fontExtraProperties:st,ownerDocument:tt,pdfBug:Lt,styleElement:H,loadingParams:{disableAutoFetch:Ct,enableXfa:St}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const bt=m.messageHandler.sendWithPromise("GetDocRequest",kt,r?[r.buffer]:null);let vt;if(f)vt=new Gx(f,{disableRange:ct,disableStream:Et});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Ot;if(on)if(mc(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");Ot=lS}else Ot=rC;else Ot=mc(i)?lS:tC;vt=new Ot({url:i,length:it,httpHeaders:a,withCredentials:u,rangeChunkSize:p,disableRange:ct,disableStream:Et})}return bt.then(Ot=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Kt=new Ac(e,Ot,m.port),ln=new _C(Kt,t,vt,It,dt);t._transport=ln,Kt.send("Ready",null)})}).catch(t._capability.reject),t}function vC(d){if(d instanceof URL)return d.href;try{return new URL(d,window.location).href}catch{if(on&&typeof d=="string")return d}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function wC(d){if(on&&typeof Buffer<"u"&&d instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength)return d;if(typeof d=="string")return Fp(d);if(d instanceof ArrayBuffer||ArrayBuffer.isView(d)||typeof d=="object"&&!isNaN(d==null?void 0:d.length))return new Uint8Array(d);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function uS(d){return typeof d=="object"&&Number.isInteger(d==null?void 0:d.num)&&d.num>=0&&Number.isInteger(d==null?void 0:d.gen)&&d.gen>=0}var bp;const _p=class _p{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${hn(_p,bp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,i,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(a){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,a}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};bp=new WeakMap,_(_p,bp,0);let Ly=_p;class E1{constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class AC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var zr,Fs,fi,hl,jf;class SC{constructor(t,e,i,r=!1){_(this,fi);_(this,zr,null);_(this,Fs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new YA:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new x1,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:a=!1}={}){return new ud({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:a})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:r=br.ENABLE,transform:a=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var D,z;(D=this._stats)==null||D.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:S,cacheKey:x}=w;A(this,Fs,!1),E(this,fi,jf).call(this),c||(c=this._transport.getOptionalContentConfig(S));let C=this._intentStates.get(x);C||(C=Object.create(null),this._intentStates.set(x,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const k=!!(S&Yn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(w));const T=B=>{var j;C.renderTasks.delete(I),(this._maybeCleanupAfterRender||k)&&A(this,Fs,!0),E(this,fi,hl).call(this,!k),B?(I.capability.reject(B),this._abortOperatorList({intentState:C,reason:B instanceof Error?B:new Error(B)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new Ny({callback:T,params:{canvasContext:t,viewport:e,transform:a,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(C.renderTasks||(C.renderTasks=new Set)).add(I);const O=I.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([B,j])=>{var K;if(this.destroyed){T();return}if((K=this._stats)==null||K.time("Rendering"),!(j.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:B,optionalContentConfig:j}),I.operatorListChanged()}).catch(T),O}getOperatorList({intent:t="display",annotationMode:e=br.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,i,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Oc.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function a(){u.read().then(function({value:f,done:p}){if(p){i(c);return}c.lang??(c.lang=f.lang),Object.assign(c.styles,f.styles),c.items.push(...f.items),a()},r)}const u=e.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),A(this,Fs,!1),E(this,fi,jf).call(this),Promise.all(t)}cleanup(t=!1){A(this,Fs,!0);const e=E(this,fi,hl).call(this,!1);return t&&e&&this._stats&&(this._stats=new YA),e}_startRenderPage(t,e){var r,a;const i=this._intentStates.get(e);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(a=i.displayReadyCapability)==null||a.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,fi,hl).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:a,transfer:u}=i,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:a,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const m=()=>{f.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();E(this,fi,hl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Sv){let r=hC;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new ta(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,a]of this._intentStates)if(a===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}zr=new WeakMap,Fs=new WeakMap,fi=new WeakSet,hl=function(t=!1){if(E(this,fi,jf).call(this),!o(this,Fs)||this.destroyed)return!1;if(t)return A(this,zr,setTimeout(()=>{A(this,zr,null),E(this,fi,hl).call(this,!1)},dC)),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Fs,!1),!0},jf=function(){o(this,zr)&&(clearTimeout(o(this,zr)),A(this,zr,null))};var Os,Ep;class bC{constructor(){_(this,Os,new Map);_(this,Ep,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};o(this,Ep).then(()=>{for(const[r]of o(this,Os))r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:a}=i;if(a.aborted){Rt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>a.removeEventListener("abort",u),a.addEventListener("abort",u)}o(this,Os).set(e,r)}removeEventListener(t,e){const i=o(this,Os).get(e);i==null||i(),o(this,Os).delete(e)}terminate(){for(const[,t]of o(this,Os))t==null||t();o(this,Os).clear()}}Os=new WeakMap,Ep=new WeakMap;var xp,Qa,Za,Ul,Uf,Vl,Vf;const se=class se{constructor({name:t=null,port:e=null,verbosity:i=ix()}={}){_(this,Ul);var r;if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=o(se,Za))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(o(se,Za)||A(se,Za,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Ac("main","worker",t),this._messageHandler.on("ready",function(){}),E(this,Ul,Uf).call(this)}_initialize(){if(o(se,Qa)||o(se,Vl,Vf)){this._setupFakeWorker();return}let{workerSrc:t}=se;try{se._isSameOrigin(window.location.href,t)||(t=se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Ac("main","worker",e),r=()=>{a.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:a.signal}),i.on("test",c=>{if(a.abort(),this.destroyed||!c){r();return}this._messageHandler=i,this._port=e,this._webWorker=e,E(this,Ul,Uf).call(this)}),i.on("ready",c=>{if(a.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;i.send("test",c,[c.buffer])};u();return}catch{Dp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){o(se,Qa)||(Rt("Setting up fake worker."),A(se,Qa,!0)),se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new bC;this._port=e;const i=`fake${hn(se,xp)._++}`,r=new Ac(i+"_worker",i,e);t.setup(r,e),this._messageHandler=new Ac(i,i+"_worker",e),E(this,Ul,Uf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,i;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=o(se,Za))==null||e.delete(this._port),this._port=null,(i=this._messageHandler)==null||i.destroy(),this._messageHandler=null}static fromPort(t){var i;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(i=o(this,Za))==null?void 0:i.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new se(t)}static get workerSrc(){if(Qs.workerSrc)return Qs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ft(this,"_setupFakeWorkerGlobal",(async()=>o(this,Vl,Vf)?o(this,Vl,Vf):(await import(this.workerSrc)).WorkerMessageHandler)())}};xp=new WeakMap,Qa=new WeakMap,Za=new WeakMap,Ul=new WeakSet,Uf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Vl=new WeakSet,Vf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},_(se,Vl),_(se,xp,0),_(se,Qa,!1),_(se,Za),on&&(A(se,Qa,!0),Qs.workerSrc||(Qs.workerSrc="./pdf.worker.mjs")),se._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(e,i);return i.origin===r.origin},se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let yl=se;var $s,is,Wl,Gl,zs,Ja,xc;class _C{constructor(t,e,i,r,a){_(this,Ja);_(this,$s,new Map);_(this,is,new Map);_(this,Wl,new Map);_(this,Gl,new Map);_(this,zs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new x1,this.fontLoader=new bx({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ft(this,"annotationStorage",new xv)}getRenderingIntent(t,e=br.ENABLE,i=null,r=!1,a=!1){let u=Yn.DISPLAY,c=Sy;switch(t){case"any":u=Yn.ANY;break;case"display":break;case"print":u=Yn.PRINT;break;default:Rt(`getRenderingIntent - invalid intent: ${t}`)}const f=u&Yn.PRINT&&i instanceof n1?i:this.annotationStorage;switch(e){case br.DISABLE:u+=Yn.ANNOTATIONS_DISABLE;break;case br.ENABLE:break;case br.ENABLE_FORMS:u+=Yn.ANNOTATIONS_FORMS;break;case br.ENABLE_STORAGE:u+=Yn.ANNOTATIONS_STORAGE,c=f.serializable;break;default:Rt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=Yn.IS_EDITING),a&&(u+=Yn.OPLIST);const{ids:p,hash:m}=f.modifiedIds,v=[u,c.hash,m];return{renderingIntent:u,cacheKey:v.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=o(this,zs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of o(this,is).values())t.push(r._destroy());o(this,is).clear(),o(this,Wl).clear(),o(this,Gl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,a;this.commonObjs.clear(),this.fontLoader.clear(),o(this,$s).clear(),this.filterFactory.destroy(),Fc.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new ta("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{be(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},r.onPull=()=>{this._fullReader.read().then(function({value:a,done:u}){if(u){r.close();return}be(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{this._fullReader.cancel(a),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async i=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:a,contentLength:u}=this._fullReader;return(!r||!a)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:a,contentLength:u}}),t.on("GetRangeReader",(i,r)=>{be(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(i.begin,i.end);if(!a){r.close();return}r.onPull=()=>{a.read().then(function({value:u,done:c}){if(c){r.close();return}be(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{a.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new AC(i,this))}),t.on("DocException",i=>{e._capability.reject(kn(i))}),t.on("PasswordRequest",i=>{A(this,zs,Promise.withResolvers());try{if(!e.onPassword)throw kn(i);const r=a=>{a instanceof Error?o(this,zs).reject(a):o(this,zs).resolve({password:a})};e.onPassword(r,i.code)}catch(r){o(this,zs).reject(r)}return o(this,zs).promise}),t.on("DataLoaded",i=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;o(this,is).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,a])=>{var u;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:c,fontExtraProperties:f,pdfBug:p}=this._params;if("error"in a){const S=a.error;Rt(`Error during font loading: ${S}`),this.commonObjs.resolve(i,S);break}const m=p&&((u=globalThis.FontInspector)!=null&&u.enabled)?(S,x)=>globalThis.FontInspector.fontAdded(S,x):null,v=new _x(a,{disableFontFace:c,fontExtraProperties:f,inspectFont:m});this.fontLoader.bind(v).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!f&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=a;be(w,"The imageRef must be defined.");for(const S of o(this,is).values())for(const[,x]of S.objs)if((x==null?void 0:x.ref)===w)return x.dataLen?(this.commonObjs.resolve(i,structuredClone(x)),x.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,a);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,a,u])=>{var f;if(this.destroyed)return;const c=o(this,is).get(r);if(!c.objs.has(i)){if(c._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(a){case"Image":c.objs.resolve(i,u),(u==null?void 0:u.dataLen)>ZE&&(c._maybeCleanupAfterRender=!0);break;case"Pattern":c.objs.resolve(i,u);break;default:throw new Error(`Got unknown object type ${a}`)}}}),t.on("DocProgress",i=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),t.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Rt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=o(this,Wl).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&o(this,Gl).set(a.refStr,t);const u=new SC(e,a,this,this._params.pdfBug);return o(this,is).set(e,u),u});return o(this,Wl).set(e,r),r}getPageIndex(t){return uS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,Ja,xc).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Ja,xc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Ja,xc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,Ja,xc).call(this,"GetOptionalContentConfig").then(e=>new Wx(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=o(this,$s).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>{var a,u;return{info:r[0],metadata:r[1]?new Ux(r[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return o(this,$s).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of o(this,is).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),o(this,$s).clear(),this.filterFactory.destroy(!0),Fc.cleanup()}}cachedPageNumber(t){if(!uS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return o(this,Gl).get(e)??null}}$s=new WeakMap,is=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,zs=new WeakMap,Ja=new WeakSet,xc=function(t,e=null){const i=o(this,$s).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return o(this,$s).set(t,r),r};const fc=Symbol("INITIAL_DATA");var Hn,kh,Iy;class x1{constructor(){_(this,kh);_(this,Hn,Object.create(null))}get(t,e=null){if(e){const r=E(this,kh,Iy).call(this,t);return r.promise.then(()=>e(r.data)),null}const i=o(this,Hn)[t];if(!i||i.data===fc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=o(this,Hn)[t];return!!e&&e.data!==fc}delete(t){const e=o(this,Hn)[t];return!e||e.data===fc?!1:(delete o(this,Hn)[t],!0)}resolve(t,e=null){const i=E(this,kh,Iy).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in o(this,Hn)){const{data:i}=o(this,Hn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}A(this,Hn,Object.create(null))}*[Symbol.iterator](){for(const t in o(this,Hn)){const{data:e}=o(this,Hn)[t];e!==fc&&(yield[t,e])}}}Hn=new WeakMap,kh=new WeakSet,Iy=function(t){var e;return(e=o(this,Hn))[t]||(e[t]={...Promise.withResolvers(),data:fc})};var Hr;class EC{constructor(t){_(this,Hr,null);A(this,Hr,t),this.onContinue=null}get promise(){return o(this,Hr).capability.promise}cancel(t=0){o(this,Hr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=o(this,Hr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=o(this,Hr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Hr=new WeakMap;var Br,to;const Sa=class Sa{constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:a,operatorList:u,pageIndex:c,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){_(this,Br,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new EC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,f;if(this.cancelled)return;if(this._canvas){if(o(Sa,to).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(Sa,to).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:a,background:u}=this.params;this.gfx=new ml(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:a,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),o(this,Br)&&(window.cancelAnimationFrame(o(this,Br)),A(this,Br,null)),o(Sa,to).delete(this._canvas),this.callback(t||new Sv(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Br,window.requestAnimationFrame(()=>{A(this,Br,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(Sa,to).delete(this._canvas),this.callback())))}};Br=new WeakMap,to=new WeakMap,_(Sa,to,new WeakSet);let Ny=Sa;const xC="4.10.38",CC="f9bea397f";function cS(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function pc(d){return Math.max(0,Math.min(255,255*d))}class hS{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=pc(t),[t,t,t]}static G_HTML([t]){const e=cS(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(pc)}static RGB_HTML(t){return`#${t.map(cS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[pc(1-Math.min(1,t+r)),pc(1-Math.min(1,i+r)),pc(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,a=1-e,u=1-i,c=Math.min(r,a,u);return["CMYK",r,a,u,c]}}class kC{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class kv extends kC{_createSVG(t){return document.createElementNS(Ss,t)}}class C1{static setupStorage(t,e,i,r,a){const u=r.getValue(e,{value:null});switch(i.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(u.value===i.attributes.xfaOn?t.setAttribute("checked",!0):u.value===i.attributes.xfaOff&&t.removeAttribute("checked"),a==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),a==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of i.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const f=c.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:a}){const{attributes:u}=e,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}c&&a.addLinkAttributes(t,u.href,u.newWindow),i&&u.dataId&&this.setupStorage(t,u.dataId,e,i)}static render(t){var v,w;const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:a,linkService:i});const c=a!=="richText",f=t.div;if(f.append(u),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=S}c&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const S=document.createTextNode(r.value);u.append(S),c&&Oc.shouldBuildText(r.name)&&p.push(S)}return{textDivs:p}}const m=[[r,-1,u]];for(;m.length>0;){const[S,x,C]=m.at(-1);if(x+1===S.children.length){m.pop();continue}const k=S.children[++m.at(-1)[1]];if(k===null)continue;const{name:T}=k;if(T==="#text"){const O=document.createTextNode(k.value);p.push(O),C.append(O);continue}const I=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,T):document.createElement(T);if(C.append(I),k.attributes&&this.setAttributes({html:I,element:k,storage:e,intent:a,linkService:i}),((w=k.children)==null?void 0:w.length)>0)m.push([k,-1,I]);else if(k.value){const O=document.createTextNode(k.value);c&&Oc.shouldBuildText(T)&&p.push(O),I.append(O)}}for(const S of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const hd=1e3,TC=9,Ro=new WeakSet;function Jr(d){return{width:d[2]-d[0],height:d[3]-d[1]}}class PC{static create(t){switch(t.data.annotationType){case Ce.LINK:return new k1(t);case Ce.TEXT:return new RC(t);case Ce.WIDGET:switch(t.data.fieldType){case"Tx":return new MC(t);case"Btn":return t.data.radioButton?new R1(t):t.data.checkBox?new IC(t):new NC(t);case"Ch":return new DC(t);case"Sig":return new LC(t)}return new Lo(t);case Ce.POPUP:return new Fy(t);case Ce.FREETEXT:return new D1(t);case Ce.LINE:return new OC(t);case Ce.SQUARE:return new $C(t);case Ce.CIRCLE:return new zC(t);case Ce.POLYLINE:return new F1(t);case Ce.CARET:return new BC(t);case Ce.INK:return new Tv(t);case Ce.POLYGON:return new HC(t);case Ce.HIGHLIGHT:return new O1(t);case Ce.UNDERLINE:return new jC(t);case Ce.SQUIGGLY:return new UC(t);case Ce.STRIKEOUT:return new VC(t);case Ce.STAMP:return new $1(t);case Ce.FILEATTACHMENT:return new WC(t);default:return new ve(t)}}}var eo,Xl,ql,Th,Dy;const Lv=class Lv{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){_(this,Th);_(this,eo,null);_(this,Xl,!1);_(this,ql,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t!=null&&t.str||e!=null&&e.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Lv._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;o(this,eo)||A(this,eo,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&E(this,Th,Dy).call(this,e),(i=o(this,ql))==null||i.popup.updateEdited(t)}resetEdited(){var t;o(this,eo)&&(E(this,Th,Dy).call(this,o(this,eo).rect),(t=o(this,ql))==null||t.popup.resetEdited(),A(this,eo,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",e.id),this instanceof Lo||(a.tabIndex=hd);const{style:u}=a;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(a.title=e.alternativeText),e.noRotate&&a.classList.add("norotate"),!e.rect||this instanceof Fy){const{rotation:C}=e;return!e.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:c,height:f}=Jr(e.rect);if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const C=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(C>0||k>0){const I=`calc(${C}px * var(--scale-factor)) / calc(${k}px * var(--scale-factor))`;u.borderRadius=I}else if(this instanceof R1){const I=`calc(${c}px * var(--scale-factor)) / calc(${f}px * var(--scale-factor))`;u.borderRadius=I}switch(e.borderStyle.style){case hc.SOLID:u.borderStyle="solid";break;case hc.DASHED:u.borderStyle="dashed";break;case hc.BEVELED:Rt("Unimplemented border style: beveled");break;case hc.INSET:Rt("Unimplemented border style: inset");break;case hc.UNDERLINE:u.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(A(this,Xl,!0),u.borderColor=pt.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):u.borderWidth=0}const p=pt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:S}=r.rawDims;u.left=`${100*(p[0]-w)/m}%`,u.top=`${100*(p[1]-S)/v}%`;const{rotation:x}=e;return e.hasOwnCanvas||x===0?(u.width=`${100*c/m}%`,u.height=`${100*f/v}%`):this.setRotation(x,a),a}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:a,height:u}=Jr(this.data.rect);let c,f;t%180===0?(c=100*a/i,f=100*u/r):(c=100*u/i,f=100*a/r),e.style.width=`${c}%`,e.style.height=`${f}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const a=r.detail[e],u=a[0],c=a.slice(1);r.target.style[i]=hS[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[i]:hS[`${u}_rgb`](c)})};return Ft(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail)){const a=t[r]||i[r];a==null||a(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,a]of Object.entries(e)){const u=i[r];if(u){const c={detail:{[r]:a},target:t};u(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,a]=this.data.rect.map(C=>Math.fround(C));if(t.length===8){const[C,k,T,I]=t.subarray(2,6);if(r===C&&a===k&&e===T&&i===I)return}const{style:u}=this.container;let c;if(o(this,Xl)){const{borderColor:C,borderWidth:k}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const f=r-e,p=a-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const S=m.createElement("clipPath"),x=`clippath_${this.data.id}`;S.setAttribute("id",x),S.setAttribute("clipPathUnits","objectBoundingBox"),w.append(S);for(let C=2,k=t.length;C<k;C+=8){const T=t[C],I=t[C+1],O=t[C+2],D=t[C+3],z=m.createElement("rect"),B=(O-e)/f,j=(a-I)/p,K=(T-O)/f,st=(I-D)/p;z.setAttribute("x",B),z.setAttribute("y",j),z.setAttribute("width",K),z.setAttribute("height",st),S.append(z),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${j}" width="${K}" height="${st}"/>`)}o(this,Xl)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(v),this.container.style.clipPath=`url(#${x})`}_createPopup(){const{data:t}=this,e=A(this,ql,new Fy({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:a,id:u,exportValues:c}of r){if(a===-1||u===e)continue;const f=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Ro.has(p)){Rt(`_getElementsByName - element not allowed: ${u}`);continue}i.push({id:u,exportValue:f,domElement:p})}return i}for(const r of document.getElementsByName(t)){const{exportValue:a}=r,u=r.getAttribute("data-element-id");u!==e&&Ro.has(r)&&i.push({id:u,exportValue:a,domElement:r})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};eo=new WeakMap,Xl=new WeakMap,ql=new WeakMap,Th=new WeakSet,Dy=function(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:u,pageX:c,pageY:f}}}}=this;i==null||i.splice(0,4,...t);const{width:p,height:m}=Jr(t);e.left=`${100*(t[0]-c)/a}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*p/a}%`,e.height=`${100*m/u}%`):this.setRotation(r)};let ve=Lv;var Kn,ya,T1,P1;class k1 extends ve{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});_(this,Kn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let a=!1;return e.url?(i.addLinkAttributes(r,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(r,e.action),a=!0):e.attachment?(E(this,Kn,T1).call(this,r,e.attachment,e.attachmentDest),a=!0):e.setOCGState?(E(this,Kn,P1).call(this,r,e.setOCGState),a=!0):e.dest?(this._bindLink(r,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),a=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(r,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(r),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Kn,ya).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),E(this,Kn,ya).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(i.actions)){const u=r.get(a);u&&(e[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:a}}),!1})}e.onclick||(e.onclick=()=>!1),E(this,Kn,ya).call(this)}_bindResetFormAction(e,i){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),E(this,Kn,ya).call(this),!this._fieldObjects){Rt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var v;r==null||r();const{fields:a,refs:u,include:c}=i,f=[];if(a.length!==0||u.length!==0){const w=new Set(u);for(const S of a){const x=this._fieldObjects[S]||[];for(const{id:C}of x)w.add(C)}for(const S of Object.values(this._fieldObjects))for(const x of S)w.has(x.id)===c&&f.push(x)}else for(const w of Object.values(this._fieldObjects))f.push(...w);const p=this.annotationStorage,m=[];for(const w of f){const{id:S}=w;switch(m.push(S),w.type){case"text":{const C=w.defaultValue||"";p.setValue(S,{value:C});break}case"checkbox":case"radiobutton":{const C=w.defaultValue===w.exportValues;p.setValue(S,{value:C});break}case"combobox":case"listbox":{const C=w.defaultValue||"";p.setValue(S,{value:C});break}default:continue}const x=document.querySelector(`[data-element-id="${S}"]`);if(x){if(!Ro.has(x)){Rt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Kn=new WeakSet,ya=function(){this.container.setAttribute("data-internal-link","")},T1=function(e,i,r=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(i.content,i.filename,r),!1},E(this,Kn,ya).call(this)},P1=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),E(this,Kn,ya).call(this)};class RC extends ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Lo extends ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return yn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,a){i.includes("mouse")?t.addEventListener(i,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(i,u=>{var c;if(i==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:a(u)}}))})}_setEventListeners(t,e,i,r){var a,u,c;for(const[f,p]of i)(p==="Action"||(a=this.data.actions)!=null&&a[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||TC,a=t.style;let u;const c=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),m=Math.round(p/(Gm*r))||1,v=p/m;u=Math.min(r,f(v/Gm))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,f(p/Gm))}a.fontSize=`calc(${u}px * var(--scale-factor))`,a.color=pt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(a.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class MC extends Lo{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const a=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=i),a.setValue(u.id,{[r]:i})}render(){var r,a;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let c=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&c.length>f&&(c=c.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ro.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=hd,this._setRequired(i,this.data.required),f&&(i.maxLength=f),i.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";i.value=m.userValue=S,m.formattedValue=null});let v=w=>{const{formattedValue:S}=m;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{var C;if(m.focused)return;const{target:x}=S;m.userValue&&(x.value=m.userValue),m.lastCommittedValue=x.value,m.commitKey=1,(C=this.data.actions)!=null&&C.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(C){m.userValue=C.detail.value??"",t.setValue(e,{value:m.userValue.toString()}),C.target.value=m.userValue},formattedValue(C){const{formattedValue:k}=C.detail;m.formattedValue=k,k!=null&&C.target!==document.activeElement&&(C.target.value=k),t.setValue(e,{formattedValue:k})},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{var O;const{charLimit:k}=C.detail,{target:T}=C;if(k===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",k);let I=m.userValue;!I||I.length<=k||(I=I.slice(0,k),T.value=m.userValue=I,t.setValue(e,{value:I}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),i.addEventListener("keydown",S=>{var k;m.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(m.commitKey=3),x===-1)return;const{value:C}=S.target;m.lastCommittedValue!==C&&(m.lastCommittedValue=C,m.userValue=C,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",S=>{var C,k;if(!m.focused||!S.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(m.focused=!1);const{value:x}=S.target;m.userValue=x,m.lastCommittedValue!==x&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:m.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}})),w(S)}),(a=this.data.actions)!=null&&a.Keystroke&&i.addEventListener("beforeinput",S=>{var z;m.lastCommittedValue=null;const{data:x,target:C}=S,{value:k,selectionStart:T,selectionEnd:I}=C;let O=T,D=I;switch(S.inputType){case"deleteWordBackward":{const B=k.substring(0,T).match(/\w*[^\w]*$/);B&&(O-=B[0].length);break}case"deleteWordForward":{const B=k.substring(T).match(/^[^\w]*\w*/);B&&(D+=B[0].length);break}case"deleteContentBackward":T===I&&(O-=1);break;case"deleteContentForward":T===I&&(D+=1);break}S.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:x||"",willCommit:!1,selStart:O,selEnd:D}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/f;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class LC extends Lo{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class IC extends Lo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return Ro.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.setAttribute("exportValue",e.exportValue),a.tabIndex=hd,a.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i)){const m=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:f})}),a.addEventListener("resetform",u=>{const c=e.defaultFieldValue||"Off";u.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",u=>{const c={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(i,{value:f.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class R1 extends Lo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,i))t.setValue(u.id,{value:!1});const a=document.createElement("input");if(Ro.add(a),a.setAttribute("data-element-id",i),a.disabled=e.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=e.fieldName,r&&a.setAttribute("checked",!0),a.tabIndex=hd,a.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:f})}),a.addEventListener("resetform",u=>{const c=e.defaultFieldValue;u.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;a.addEventListener("updatefromsandbox",c=>{const f={value:p=>{const m=u===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),t.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(f,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class NC extends k1{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class DC extends Lo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Ro.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=hd;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),a=!1),r.append(v)}let u=null;if(a){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),u=()=>{m.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=m=>{const v=m?"value":"textContent",{options:w,multiple:S}=r;return S?Array.prototype.filter.call(w,x=>x.selected).map(x=>x[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let f=c(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){u==null||u();const S=w.detail.value,x=new Set(Array.isArray(S)?S:[S]);for(const C of r.options)C.selected=x.has(C.value);t.setValue(e,{value:c(!0)}),f=c(!1)},multipleSelection(w){r.multiple=!0},remove(w){const S=r.options,x=w.detail.remove;S[x].selected=!1,r.remove(x),S.length>0&&Array.prototype.findIndex.call(S,k=>k.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},clear(w){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=c(!1)},insert(w){const{index:S,displayValue:x,exportValue:C}=w.detail.insert,k=r.children[S],T=document.createElement("option");T.textContent=x,T.value=C,k?k.before(T):r.append(T),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},items(w){const{items:S}=w.detail;for(;r.length!==0;)r.remove(0);for(const x of S){const{displayValue:C,exportValue:k}=x,T=document.createElement("option");T.textContent=C,T.value=k,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(w)}),f=c(!1)},indices(w){const S=new Set(w.detail.indices);for(const x of w.target.options)x.selected=S.has(x.index);t.setValue(e,{value:c(!0)}),f=c(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var S;const v=c(!0),w=c(!1);t.setValue(e,{value:v}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Fy extends ve{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:ve._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new FC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Av}${i}`).join(",")),this.container}}var Yl,Cp,kp,Kl,no,fe,Hs,Ql,Ph,Rh,Zl,Bs,Pi,js,Mh,Us,Lh,io,so,Yt,Wf,Oy,M1,L1,I1,N1,Gf,Xf,$y;class FC{constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:a,contentsObj:u,richText:c,parent:f,rect:p,parentRect:m,open:v}){_(this,Yt);_(this,Yl,E(this,Yt,I1).bind(this));_(this,Cp,E(this,Yt,$y).bind(this));_(this,kp,E(this,Yt,Xf).bind(this));_(this,Kl,E(this,Yt,Gf).bind(this));_(this,no,null);_(this,fe,null);_(this,Hs,null);_(this,Ql,null);_(this,Ph,null);_(this,Rh,null);_(this,Zl,null);_(this,Bs,!1);_(this,Pi,null);_(this,js,null);_(this,Mh,null);_(this,Us,null);_(this,Lh,null);_(this,io,null);_(this,so,!1);var w;A(this,fe,t),A(this,Lh,r),A(this,Hs,u),A(this,Us,c),A(this,Rh,f),A(this,no,e),A(this,Mh,p),A(this,Zl,m),A(this,Ph,i),A(this,Ql,_v.toDateObject(a)),this.trigger=i.flatMap(S=>S.getElementsToTriggerPopup());for(const S of this.trigger)S.addEventListener("click",o(this,Kl)),S.addEventListener("mouseenter",o(this,kp)),S.addEventListener("mouseleave",o(this,Cp)),S.classList.add("popupTriggerArea");for(const S of i)(w=S.container)==null||w.addEventListener("keydown",o(this,Yl));o(this,fe).hidden=!0,v&&E(this,Yt,Gf).call(this)}render(){if(o(this,Pi))return;const t=A(this,Pi,document.createElement("div"));if(t.className="popup",o(this,no)){const a=t.style.outlineColor=pt.makeHexColor(...o(this,no));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`:t.style.backgroundColor=pt.makeHexColor(...o(this,no).map(c=>Math.floor(.7*(255-c)+c)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=o(this,Lh),t.append(e),o(this,Ql)){const a=document.createElement("span");a.classList.add("popupDate"),a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:o(this,Ql).valueOf()})),e.append(a)}const r=o(this,Yt,Wf);if(r)C1.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const a=this._formatContents(o(this,Hs));t.append(a)}o(this,fe).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let a=0,u=r.length;a<u;++a){const c=r[a];i.append(document.createTextNode(c)),a<u-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;o(this,io)||A(this,io,{contentsObj:o(this,Hs),richText:o(this,Us)}),t&&A(this,js,null),e&&(A(this,Us,E(this,Yt,L1).call(this,e)),A(this,Hs,null)),(i=o(this,Pi))==null||i.remove(),A(this,Pi,null)}resetEdited(){var t;o(this,io)&&({contentsObj:hn(this,Hs)._,richText:hn(this,Us)._}=o(this,io),A(this,io,null),(t=o(this,Pi))==null||t.remove(),A(this,Pi,null),A(this,js,null))}forceHide(){A(this,so,this.isVisible),o(this,so)&&(o(this,fe).hidden=!0)}maybeShow(){o(this,so)&&(o(this,Pi)||E(this,Yt,Xf).call(this),A(this,so,!1),o(this,fe).hidden=!1)}get isVisible(){return o(this,fe).hidden===!1}}Yl=new WeakMap,Cp=new WeakMap,kp=new WeakMap,Kl=new WeakMap,no=new WeakMap,fe=new WeakMap,Hs=new WeakMap,Ql=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,Zl=new WeakMap,Bs=new WeakMap,Pi=new WeakMap,js=new WeakMap,Mh=new WeakMap,Us=new WeakMap,Lh=new WeakMap,io=new WeakMap,so=new WeakMap,Yt=new WeakSet,Wf=function(){const t=o(this,Us),e=o(this,Hs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&o(this,Us).html||null},Oy=function(){var t,e,i;return((i=(e=(t=o(this,Yt,Wf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},M1=function(){var t,e,i;return((i=(e=(t=o(this,Yt,Wf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},L1=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:o(this,Yt,M1),fontSize:o(this,Yt,Oy)?`calc(${o(this,Yt,Oy)}px * var(--scale-factor))`:""}};for(const a of t.split(`
`))e.push({name:"span",value:a,attributes:r});return i},I1=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&o(this,Bs))&&E(this,Yt,Gf).call(this)},N1=function(){if(o(this,js)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=o(this,Rh);let u=!!o(this,Zl),c=u?o(this,Zl):o(this,Mh);for(const x of o(this,Ph))if(!c||pt.intersect(x.data.rect,c)!==null){c=x.data.rect,u=!0;break}const f=pt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),m=u?c[2]-c[0]+5:0,v=f[0]+m,w=f[1];A(this,js,[100*(v-r)/e,100*(w-a)/i]);const{style:S}=o(this,fe);S.left=`${o(this,js)[0]}%`,S.top=`${o(this,js)[1]}%`},Gf=function(){A(this,Bs,!o(this,Bs)),o(this,Bs)?(E(this,Yt,Xf).call(this),o(this,fe).addEventListener("click",o(this,Kl)),o(this,fe).addEventListener("keydown",o(this,Yl))):(E(this,Yt,$y).call(this),o(this,fe).removeEventListener("click",o(this,Kl)),o(this,fe).removeEventListener("keydown",o(this,Yl)))},Xf=function(){o(this,Pi)||this.render(),this.isVisible?o(this,Bs)&&o(this,fe).classList.add("focused"):(E(this,Yt,N1).call(this),o(this,fe).hidden=!1,o(this,fe).style.zIndex=parseInt(o(this,fe).style.zIndex)+1e3)},$y=function(){o(this,fe).classList.remove("focused"),!(o(this,Bs)||!this.isVisible)&&(o(this,fe).hidden=!0,o(this,fe).style.zIndex=parseInt(o(this,fe).style.zIndex)-1e3)};class D1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ih;class OC extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Ih,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:i,height:r}=Jr(e.rect),a=this.svgFactory.create(i,r,!0),u=A(this,Ih,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),a.append(u),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ih=new WeakMap;var Nh;class $C extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Nh,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:i,height:r}=Jr(e.rect),a=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Nh,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",i-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Nh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Nh=new WeakMap;var Dh;class zC extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Dh,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:i,height:r}=Jr(e.rect),a=this.svgFactory.create(i,r,!0),u=e.borderStyle.width,c=A(this,Dh,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",i/2),c.setAttribute("cy",r/2),c.setAttribute("rx",i/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Dh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dh=new WeakMap;var Fh;class F1 extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,Fh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:r,popupRef:a}}=this;if(!i)return this.container;const{width:u,height:c}=Jr(e),f=this.svgFactory.create(u,c,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const S=i[v]-e[0],x=e[3]-i[v+1];p.push(`${S},${x}`)}p=p.join(" ");const m=A(this,Fh,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),f.append(m),this.container.append(f),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Fh)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fh=new WeakMap;class HC extends F1{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class BC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Oh,ro,$h,zy;class Tv extends ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,$h);_(this,Oh,null);_(this,ro,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pt.HIGHLIGHT:Pt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:r,borderStyle:a,popupRef:u}}=this,{transform:c,width:f,height:p}=E(this,$h,zy).call(this,i,e),m=this.svgFactory.create(f,p,!0),v=A(this,Oh,this.svgFactory.createElement("svg:g"));m.append(v),v.setAttribute("stroke-width",a.width||1),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("stroke-miterlimit",10),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),v.setAttribute("transform",c);for(let w=0,S=r.length;w<S;w++){const x=this.svgFactory.createElement(this.svgElementName);o(this,ro).push(x),x.setAttribute("points",r[w].join(",")),v.append(x)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:r,rect:a}=e,u=o(this,Oh);if(i>=0&&u.setAttribute("stroke-width",i||1),r)for(let c=0,f=o(this,ro).length;c<f;c++)o(this,ro)[c].setAttribute("points",r[c].join(","));if(a){const{transform:c,width:f,height:p}=E(this,$h,zy).call(this,this.data.rotation,a);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",c)}}getElementsToTriggerPopup(){return o(this,ro)}addHighlightArea(){this.container.classList.add("highlightArea")}}Oh=new WeakMap,ro=new WeakMap,$h=new WeakSet,zy=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class O1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class jC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class UC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class VC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class $1 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zh,Hh,Hy;class WC extends ve{constructor(e){var r;super(e,{isRenderable:!0});_(this,Hh);_(this,zh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,Hh,Hy).bind(this)),A(this,zh,r);const{isMac:a}=yn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(a?u.metaKey:u.ctrlKey)&&E(this,Hh,Hy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return o(this,zh)}addHighlightArea(){this.container.classList.add("highlightArea")}}zh=new WeakMap,Hh=new WeakSet,Hy=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Bh,ao,oo,jh,Mo,z1,By;class GC{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:a,viewport:u,structTreeLayer:c}){_(this,Mo);_(this,Bh,null);_(this,ao,null);_(this,oo,new Map);_(this,jh,null);this.div=t,A(this,Bh,e),A(this,ao,i),A(this,jh,c||null),this.page=a,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return o(this,oo).size>0}async render(t){var u;const{annotations:e}=t,i=this.div;To(i,this.viewport);const r=new Map,a={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new kv,annotationStorage:t.annotationStorage||new xv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const f=c.annotationType===Ce.POPUP;if(f){const v=r.get(c.id);if(!v)continue;a.elements=v}else{const{width:v,height:w}=Jr(c.rect);if(v<=0||w<=0)continue}a.data=c;const p=PC.create(a);if(!p.isRenderable)continue;if(!f&&c.popupRef){const v=r.get(c.popupRef);v?v.push(p):r.set(c.popupRef,[p])}const m=p.render();c.hidden&&(m.style.visibility="hidden"),await E(this,Mo,z1).call(this,m,c.id),p._isEditable&&(o(this,oo).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}E(this,Mo,By).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,To(e,{rotation:t.rotation}),E(this,Mo,By).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(o(this,oo).values())}getEditableAnnotation(t){return o(this,oo).get(t)}}Bh=new WeakMap,ao=new WeakMap,oo=new WeakMap,jh=new WeakMap,Mo=new WeakSet,z1=async function(t,e){var u,c;const i=t.firstChild||t,r=i.id=`${Av}${e}`,a=await((u=o(this,jh))==null?void 0:u.getAriaAttributes(r));if(a)for(const[f,p]of a)i.setAttribute(f,p);this.div.append(t),(c=o(this,Bh))==null||c.moveElementInDOM(this.div,t,i,!1)},By=function(){if(!o(this,ao))return;const t=this.div;for(const[e,i]of o(this,ao)){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:a}=r;a?a.nodeName==="CANVAS"?a.replaceWith(i):a.classList.contains("annotationContent")?a.after(i):a.before(i):r.append(i)}o(this,ao).clear()};const Pf=/\r\n?|\n/g;var Ri,Bn,Uh,lo,jn,_e,H1,B1,j1,qf,Js,Yf,Kf,U1,Uy,V1;const Jt=class Jt extends he{constructor(e){super({...e,name:"freeTextEditor"});_(this,_e);_(this,Ri);_(this,Bn,"");_(this,Uh,`${this.id}-editor`);_(this,lo,null);_(this,jn);A(this,Ri,e.color||Jt._defaultColor||he._defaultLineColor),A(this,jn,e.fontSize||Jt._defaultFontSize)}static get _keyboardManager(){const e=Jt.prototype,i=u=>u.isEmpty(),r=Po.TRANSLATE_SMALL,a=Po.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new cd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:i}]]))}static initialize(e,i){he.initialize(e,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case $t.FREETEXT_SIZE:Jt._defaultFontSize=i;break;case $t.FREETEXT_COLOR:Jt._defaultColor=i;break}}updateParams(e,i){switch(e){case $t.FREETEXT_SIZE:E(this,_e,H1).call(this,i);break;case $t.FREETEXT_COLOR:E(this,_e,B1).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[$t.FREETEXT_SIZE,Jt._defaultFontSize],[$t.FREETEXT_COLOR,Jt._defaultColor||he._defaultLineColor]]}get propertiesToUpdate(){return[[$t.FREETEXT_SIZE,o(this,jn)],[$t.FREETEXT_COLOR,o(this,Ri)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Jt._internalPadding*e,-(Jt._internalPadding+o(this,jn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,lo,new AbortController);const e=this._uiManager.combinedSignal(o(this,lo));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Uh)),this._isDraggable=!0,(e=o(this,lo))==null||e.abort(),A(this,lo,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=o(this,Bn),i=A(this,Bn,E(this,_e,j1).call(this).trimEnd());if(e===i)return;const r=a=>{if(A(this,Bn,a),!a){this.remove();return}E(this,_e,Kf).call(this),this._uiManager.rebuild(this),E(this,_e,qf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(e)},mustExec:!1}),E(this,_e,qf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Jt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,i;this.width&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Uh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${o(this,jn)}px * var(--scale-factor))`,r.color=o(this,Ri),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),op(this,this.div,["dblclick","keydown"]),this.width){const[a,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[m,v]=this.pageDimensions,[w,S]=this.pageTranslation;let x,C;switch(this.rotation){case 0:x=e+(c[0]-w)/m,C=i+this.height-(c[1]-S)/v;break;case 90:x=e+(c[0]-w)/m,C=i-(c[1]-S)/v,[f,p]=[p,-f];break;case 180:x=e-this.width+(c[0]-w)/m,C=i-(c[1]-S)/v,[f,p]=[-f,-p];break;case 270:x=e+(c[0]-w-this.height*v)/m,C=i+(c[1]-S-this.width*m)/v,[f,p]=[-p,f];break}this.setAt(x*a,C*u,f,p)}else this.setAt(e*a,i*u,this.width*a,this.height*u);E(this,_e,Kf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var x,C,k;const i=e.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const a=E(x=Jt,Js,Uy).call(x,i.getData("text")||"").replaceAll(Pf,`
`);if(!a)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=c,m=[],v=[];if(f.nodeType===Node.TEXT_NODE){const T=f.parentElement;if(v.push(f.nodeValue.slice(p).replaceAll(Pf,"")),T!==this.editorDiv){let I=m;for(const O of this.editorDiv.childNodes){if(O===T){I=v;continue}I.push(E(C=Jt,Js,Yf).call(C,O))}}m.push(f.nodeValue.slice(0,p).replaceAll(Pf,""))}else if(f===this.editorDiv){let T=m,I=0;for(const O of this.editorDiv.childNodes)I++===p&&(T=v),T.push(E(k=Jt,Js,Yf).call(k,O))}A(this,Bn,`${m.join(`
`)}${a}${v.join(`
`)}`),E(this,_e,Kf).call(this);const w=new Range;let S=m.reduce((T,I)=>T+I.length,0);for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const I=T.nodeValue.length;if(S<=I){w.setStart(T,S),w.setEnd(T,S);break}S-=I}u.removeAllRanges(),u.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,r){var c;let a=null;if(e instanceof D1){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:m,rotation:v,id:w,popupRef:S},textContent:x,textPosition:C,parent:{page:{pageNumber:k}}}=e;if(!x||x.length===0)return null;a=e={annotationType:Pt.FREETEXT,color:Array.from(p),fontSize:f,value:x.join(`
`),position:C,pageIndex:k-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:S}}const u=await super.deserialize(e,i,r);return A(u,jn,e.fontSize),A(u,Ri,pt.makeHexColor(...e.color)),A(u,Bn,E(c=Jt,Js,Uy).call(c,e.value)),u.annotationElementId=e.id||null,u._initialData=a,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Jt._internalPadding*this.parentScale,r=this.getRect(i,i),a=he._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,Ri)),u={annotationType:Pt.FREETEXT,color:a,fontSize:o(this,jn),value:E(this,_e,U1).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?u:this.annotationElementId&&!E(this,_e,V1).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${o(this,jn)}px * var(--scale-factor))`,r.color=o(this,Ri),i.replaceChildren();for(const u of o(this,Bn).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),i.append(c)}const a=Jt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(a,a),popupContent:o(this,Bn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Ri=new WeakMap,Bn=new WeakMap,Uh=new WeakMap,lo=new WeakMap,jn=new WeakMap,_e=new WeakSet,H1=function(e){const i=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-o(this,jn))*this.parentScale),A(this,jn,a),E(this,_e,qf).call(this)},r=o(this,jn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},B1=function(e){const i=a=>{A(this,Ri,this.editorDiv.style.color=a)},r=o(this,Ri);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},j1=function(){var r;const e=[];this.editorDiv.normalize();let i=null;for(const a of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(e.push(E(r=Jt,Js,Yf).call(r,a)),i=a);return e.join(`
`)},qf=function(){const[e,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:a,div:u}=this,c=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",a.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/i):(this.width=r.height/e,this.height=r.width/i),this.fixAndSetPosition()},Js=new WeakSet,Yf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Pf,"")},Kf=function(){if(this.editorDiv.replaceChildren(),!!o(this,Bn))for(const e of o(this,Bn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},U1=function(){return o(this,Bn).replaceAll(" "," ")},Uy=function(e){return e.replaceAll(" "," ")},V1=function(e){const{value:i,fontSize:r,color:a,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==r||e.color.some((c,f)=>c!==a[f])||e.pageIndex!==u},_(Jt,Js),wt(Jt,"_freeTextDefaultContent",""),wt(Jt,"_internalPadding",0),wt(Jt,"_defaultColor",null),wt(Jt,"_defaultFontSize",10),wt(Jt,"_type","freetext"),wt(Jt,"_editorType",Pt.FREETEXT);let jy=Jt;class at{toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,a,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c]*r,u[c+1]=i+t[c+1]*a;return u}static _rescaleAndSwap(t,e,i,r,a,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c+1]*r,u[c+1]=i+t[c]*a;return u}static _translate(t,e,i,r){r||(r=new Float32Array(t.length));for(let a=0,u=t.length;a<u;a+=2)r[a]=e+t[a],r[a+1]=i+t[a+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,a){switch(a){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,a,u){return[(t+5*i)/6,(e+5*r)/6,(5*i+a)/6,(5*r+u)/6,(i+a)/2,(r+u)/2]}}wt(at,"PRECISION",1e-4);var Un,Mi,Jl,tu,ss,Dt,uo,co,Vh,Wh,eu,nu,jr,Gh,Tp,Pp,Re,Cc,W1,G1,X1,q1,Y1,K1;const xs=class xs{constructor({x:t,y:e},i,r,a,u,c=0){_(this,Re);_(this,Un);_(this,Mi,[]);_(this,Jl);_(this,tu);_(this,ss,[]);_(this,Dt,new Float32Array(18));_(this,uo);_(this,co);_(this,Vh);_(this,Wh);_(this,eu);_(this,nu);_(this,jr,[]);A(this,Un,i),A(this,nu,a*r),A(this,tu,u),o(this,Dt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,Jl,c),A(this,Wh,o(xs,Gh)*r),A(this,Vh,o(xs,Pp)*r),A(this,eu,r),o(this,jr).push(t,e)}isEmpty(){return isNaN(o(this,Dt)[8])}add({x:t,y:e}){var st;A(this,uo,t),A(this,co,e);const[i,r,a,u]=o(this,Un);let[c,f,p,m]=o(this,Dt).subarray(8,12);const v=t-p,w=e-m,S=Math.hypot(v,w);if(S<o(this,Vh))return!1;const x=S-o(this,Wh),C=x/S,k=C*v,T=C*w;let I=c,O=f;c=p,f=m,p+=k,m+=T,(st=o(this,jr))==null||st.push(t,e);const D=-T/x,z=k/x,B=D*o(this,nu),j=z*o(this,nu);return o(this,Dt).set(o(this,Dt).subarray(2,8),0),o(this,Dt).set([p+B,m+j],4),o(this,Dt).set(o(this,Dt).subarray(14,18),12),o(this,Dt).set([p-B,m-j],16),isNaN(o(this,Dt)[6])?(o(this,ss).length===0&&(o(this,Dt).set([c+B,f+j],2),o(this,ss).push(NaN,NaN,NaN,NaN,(c+B-i)/a,(f+j-r)/u),o(this,Dt).set([c-B,f-j],14),o(this,Mi).push(NaN,NaN,NaN,NaN,(c-B-i)/a,(f-j-r)/u)),o(this,Dt).set([I,O,c,f,p,m],6),!this.isEmpty()):(o(this,Dt).set([I,O,c,f,p,m],6),Math.abs(Math.atan2(O-f,I-c)-Math.atan2(T,k))<Math.PI/2?([c,f,p,m]=o(this,Dt).subarray(2,6),o(this,ss).push(NaN,NaN,NaN,NaN,((c+p)/2-i)/a,((f+m)/2-r)/u),[c,f,I,O]=o(this,Dt).subarray(14,18),o(this,Mi).push(NaN,NaN,NaN,NaN,((I+c)/2-i)/a,((O+f)/2-r)/u),!0):([I,O,c,f,p,m]=o(this,Dt).subarray(0,6),o(this,ss).push(((I+5*c)/6-i)/a,((O+5*f)/6-r)/u,((5*c+p)/6-i)/a,((5*f+m)/6-r)/u,((c+p)/2-i)/a,((f+m)/2-r)/u),[p,m,c,f,I,O]=o(this,Dt).subarray(12,18),o(this,Mi).push(((I+5*c)/6-i)/a,((O+5*f)/6-r)/u,((5*c+p)/6-i)/a,((5*f+m)/6-r)/u,((c+p)/2-i)/a,((f+m)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=o(this,ss),e=o(this,Mi);if(isNaN(o(this,Dt)[6])&&!this.isEmpty())return E(this,Re,W1).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);E(this,Re,X1).call(this,i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return E(this,Re,G1).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,r,a,u){return new Q1(t,e,i,r,a,u)}getOutlines(){var v;const t=o(this,ss),e=o(this,Mi),i=o(this,Dt),[r,a,u,c]=o(this,Un),f=new Float32Array((((v=o(this,jr))==null?void 0:v.length)??0)+2);for(let w=0,S=f.length-2;w<S;w+=2)f[w]=(o(this,jr)[w]-r)/u,f[w+1]=(o(this,jr)[w+1]-a)/c;if(f[f.length-2]=(o(this,uo)-r)/u,f[f.length-1]=(o(this,co)-a)/c,isNaN(i[6])&&!this.isEmpty())return E(this,Re,q1).call(this,f);const p=new Float32Array(o(this,ss).length+24+o(this,Mi).length);let m=t.length;for(let w=0;w<m;w+=2){if(isNaN(t[w])){p[w]=p[w+1]=NaN;continue}p[w]=t[w],p[w+1]=t[w+1]}m=E(this,Re,K1).call(this,p,m);for(let w=e.length-6;w>=6;w-=6)for(let S=0;S<6;S+=2){if(isNaN(e[w+S])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[w+S],p[m+1]=e[w+S+1],m+=2}return E(this,Re,Y1).call(this,p,m),this.newFreeDrawOutline(p,f,o(this,Un),o(this,eu),o(this,Jl),o(this,tu))}};Un=new WeakMap,Mi=new WeakMap,Jl=new WeakMap,tu=new WeakMap,ss=new WeakMap,Dt=new WeakMap,uo=new WeakMap,co=new WeakMap,Vh=new WeakMap,Wh=new WeakMap,eu=new WeakMap,nu=new WeakMap,jr=new WeakMap,Gh=new WeakMap,Tp=new WeakMap,Pp=new WeakMap,Re=new WeakSet,Cc=function(){const t=o(this,Dt).subarray(4,6),e=o(this,Dt).subarray(16,18),[i,r,a,u]=o(this,Un);return[(o(this,uo)+(t[0]-e[0])/2-i)/a,(o(this,co)+(t[1]-e[1])/2-r)/u,(o(this,uo)+(e[0]-t[0])/2-i)/a,(o(this,co)+(e[1]-t[1])/2-r)/u]},W1=function(){const[t,e,i,r]=o(this,Un),[a,u,c,f]=E(this,Re,Cc).call(this);return`M${(o(this,Dt)[2]-t)/i} ${(o(this,Dt)[3]-e)/r} L${(o(this,Dt)[4]-t)/i} ${(o(this,Dt)[5]-e)/r} L${a} ${u} L${c} ${f} L${(o(this,Dt)[16]-t)/i} ${(o(this,Dt)[17]-e)/r} L${(o(this,Dt)[14]-t)/i} ${(o(this,Dt)[15]-e)/r} Z`},G1=function(t){const e=o(this,Mi);t.push(`L${e[4]} ${e[5]} Z`)},X1=function(t){const[e,i,r,a]=o(this,Un),u=o(this,Dt).subarray(4,6),c=o(this,Dt).subarray(16,18),[f,p,m,v]=E(this,Re,Cc).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-i)/a} L${f} ${p} L${m} ${v} L${(c[0]-e)/r} ${(c[1]-i)/a}`)},q1=function(t){const e=o(this,Dt),[i,r,a,u]=o(this,Un),[c,f,p,m]=E(this,Re,Cc).call(this),v=new Float32Array(36);return v.set([NaN,NaN,NaN,NaN,(e[2]-i)/a,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-i)/a,(e[5]-r)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/a,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-i)/a,(e[15]-r)/u],0),this.newFreeDrawOutline(v,t,o(this,Un),o(this,eu),o(this,Jl),o(this,tu))},Y1=function(t,e){const i=o(this,Mi);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},K1=function(t,e){const i=o(this,Dt).subarray(4,6),r=o(this,Dt).subarray(16,18),[a,u,c,f]=o(this,Un),[p,m,v,w]=E(this,Re,Cc).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-u)/f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-a)/c,(r[1]-u)/f],e),e+=24},_(xs,Gh,8),_(xs,Tp,2),_(xs,Pp,o(xs,Gh)+o(xs,Tp));let cp=xs;var iu,ho,Vs,Xh,Vn,qh,ye,Rp,Z1;class Q1 extends at{constructor(e,i,r,a,u,c){super();_(this,Rp);_(this,iu);_(this,ho,new Float32Array(4));_(this,Vs);_(this,Xh);_(this,Vn);_(this,qh);_(this,ye);A(this,ye,e),A(this,Vn,i),A(this,iu,r),A(this,qh,a),A(this,Vs,u),A(this,Xh,c),this.lastPoint=[NaN,NaN],E(this,Rp,Z1).call(this,c);const[f,p,m,v]=o(this,ho);for(let w=0,S=e.length;w<S;w+=2)e[w]=(e[w]-f)/m,e[w+1]=(e[w+1]-p)/v;for(let w=0,S=i.length;w<S;w+=2)i[w]=(i[w]-f)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const e=[`M${o(this,ye)[4]} ${o(this,ye)[5]}`];for(let i=6,r=o(this,ye).length;i<r;i+=6){if(isNaN(o(this,ye)[i])){e.push(`L${o(this,ye)[i+4]} ${o(this,ye)[i+5]}`);continue}e.push(`C${o(this,ye)[i]} ${o(this,ye)[i+1]} ${o(this,ye)[i+2]} ${o(this,ye)[i+3]} ${o(this,ye)[i+4]} ${o(this,ye)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,r,a],u){const c=r-e,f=a-i;let p,m;switch(u){case 0:p=at._rescale(o(this,ye),e,a,c,-f),m=at._rescale(o(this,Vn),e,a,c,-f);break;case 90:p=at._rescaleAndSwap(o(this,ye),e,i,c,f),m=at._rescaleAndSwap(o(this,Vn),e,i,c,f);break;case 180:p=at._rescale(o(this,ye),r,i,-c,f),m=at._rescale(o(this,Vn),r,i,-c,f);break;case 270:p=at._rescaleAndSwap(o(this,ye),r,a,-c,-f),m=at._rescaleAndSwap(o(this,Vn),r,a,-c,-f);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return o(this,ho)}newOutliner(e,i,r,a,u,c=0){return new cp(e,i,r,a,u,c)}getNewOutline(e,i){const[r,a,u,c]=o(this,ho),[f,p,m,v]=o(this,iu),w=u*m,S=c*v,x=r*m+f,C=a*v+p,k=this.newOutliner({x:o(this,Vn)[0]*w+x,y:o(this,Vn)[1]*S+C},o(this,iu),o(this,qh),e,o(this,Xh),i??o(this,Vs));for(let T=2;T<o(this,Vn).length;T+=2)k.add({x:o(this,Vn)[T]*w+x,y:o(this,Vn)[T+1]*S+C});return k.getOutlines()}}iu=new WeakMap,ho=new WeakMap,Vs=new WeakMap,Xh=new WeakMap,Vn=new WeakMap,qh=new WeakMap,ye=new WeakMap,Rp=new WeakSet,Z1=function(e){const i=o(this,ye);let r=i[4],a=i[5],u=r,c=a,f=r,p=a,m=r,v=a;const w=e?Math.max:Math.min;for(let x=6,C=i.length;x<C;x+=6){if(isNaN(i[x]))u=Math.min(u,i[x+4]),c=Math.min(c,i[x+5]),f=Math.max(f,i[x+4]),p=Math.max(p,i[x+5]),v<i[x+5]?(m=i[x+4],v=i[x+5]):v===i[x+5]&&(m=w(m,i[x+4]));else{const k=pt.bezierBoundingBox(r,a,...i.slice(x,x+6));u=Math.min(u,k[0]),c=Math.min(c,k[1]),f=Math.max(f,k[2]),p=Math.max(p,k[3]),v<k[3]?(m=k[2],v=k[3]):v===k[3]&&(m=w(m,k[2]))}r=i[x+4],a=i[x+5]}const S=o(this,ho);S[0]=u-o(this,Vs),S[1]=c-o(this,Vs),S[2]=f-u+2*o(this,Vs),S[3]=p-c+2*o(this,Vs),this.lastPoint=[m,v]};var Yh,Kh,Ur,Li,wn,J1,Qf,tb,eb,Wy;class Vy{constructor(t,e=0,i=0,r=!0){_(this,wn);_(this,Yh);_(this,Kh);_(this,Ur,[]);_(this,Li,[]);let a=1/0,u=-1/0,c=1/0,f=-1/0;const p=10**-4;for(const{x:k,y:T,width:I,height:O}of t){const D=Math.floor((k-e)/p)*p,z=Math.ceil((k+I+e)/p)*p,B=Math.floor((T-e)/p)*p,j=Math.ceil((T+O+e)/p)*p,K=[D,B,j,!0],st=[z,B,j,!1];o(this,Ur).push(K,st),a=Math.min(a,D),u=Math.max(u,z),c=Math.min(c,B),f=Math.max(f,j)}const m=u-a+2*i,v=f-c+2*i,w=a-i,S=c-i,x=o(this,Ur).at(r?-1:-2),C=[x[0],x[2]];for(const k of o(this,Ur)){const[T,I,O]=k;k[0]=(T-w)/m,k[1]=(I-S)/v,k[2]=(O-S)/v}A(this,Yh,new Float32Array([w,S,m,v])),A(this,Kh,C)}getOutlines(){o(this,Ur).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of o(this,Ur))e[3]?(t.push(...E(this,wn,Wy).call(this,e)),E(this,wn,tb).call(this,e)):(E(this,wn,eb).call(this,e),t.push(...E(this,wn,Wy).call(this,e)));return E(this,wn,J1).call(this,t)}}Yh=new WeakMap,Kh=new WeakMap,Ur=new WeakMap,Li=new WeakMap,wn=new WeakSet,J1=function(t){const e=[],i=new Set;for(const u of t){const[c,f,p]=u;e.push([c,f,u],[c,p,u])}e.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=e.length;u<c;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),i.add(f),i.add(p)}const r=[];let a;for(;i.size>0;){const u=i.values().next().value;let[c,f,p,m,v]=u;i.delete(u);let w=c,S=f;for(a=[c,p],r.push(a);;){let x;if(i.has(m))x=m;else if(i.has(v))x=v;else break;i.delete(x),[c,f,p,m,v]=x,w!==c&&(a.push(w,S,c,S===f?f:p),w=c),S=S===f?p:f}a.push(w,S)}return new XC(r,o(this,Yh),o(this,Kh))},Qf=function(t){const e=o(this,Li);let i=0,r=e.length-1;for(;i<=r;){const a=i+r>>1,u=e[a][0];if(u===t)return a;u<t?i=a+1:r=a-1}return r+1},tb=function([,t,e]){const i=E(this,wn,Qf).call(this,t);o(this,Li).splice(i,0,[t,e])},eb=function([,t,e]){const i=E(this,wn,Qf).call(this,t);for(let r=i;r<o(this,Li).length;r++){const[a,u]=o(this,Li)[r];if(a!==t)break;if(a===t&&u===e){o(this,Li).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[a,u]=o(this,Li)[r];if(a!==t)break;if(a===t&&u===e){o(this,Li).splice(r,1);return}}},Wy=function(t){const[e,i,r]=t,a=[[e,i,r]],u=E(this,wn,Qf).call(this,r);for(let c=0;c<u;c++){const[f,p]=o(this,Li)[c];for(let m=0,v=a.length;m<v;m++){const[,w,S]=a[m];if(!(p<=w||S<=f)){if(w>=f){if(S>p)a[m][1]=p;else{if(v===1)return[];a.splice(m,1),m--,v--}continue}a[m][2]=f,S>p&&a.push([e,p,S])}}}return a};var Qh,su;class XC extends at{constructor(e,i,r){super();_(this,Qh);_(this,su);A(this,su,e),A(this,Qh,i),this.lastPoint=r}toSVGPath(){const e=[];for(const i of o(this,su)){let[r,a]=i;e.push(`M${r} ${a}`);for(let u=2;u<i.length;u+=2){const c=i[u],f=i[u+1];c===r?(e.push(`V${f}`),a=f):f===a&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,i,r,a],u){const c=[],f=r-e,p=a-i;for(const m of o(this,su)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=e+m[w]*f,v[w+1]=a-m[w+1]*p;c.push(v)}return c}get box(){return o(this,Qh)}get classNamesForOutlining(){return["highlightOutline"]}}Qh=new WeakMap,su=new WeakMap;class Gy extends cp{newFreeDrawOutline(t,e,i,r,a,u){return new qC(t,e,i,r,a,u)}}class qC extends Q1{newOutliner(t,e,i,r,a,u=0){return new Gy(t,e,i,r,a,u)}}var Ii,fo,ru,Pe,Zh,au,Jh,td,Vr,Ni,ou,ed,qt,Xy,qy,Yy,va,nb,Sr;const Tn=class Tn{constructor({editor:t=null,uiManager:e=null}){_(this,qt);_(this,Ii,null);_(this,fo,null);_(this,ru);_(this,Pe,null);_(this,Zh,!1);_(this,au,!1);_(this,Jh,null);_(this,td);_(this,Vr,null);_(this,Ni,null);_(this,ou);var i;t?(A(this,au,!1),A(this,ou,$t.HIGHLIGHT_COLOR),A(this,Jh,t)):(A(this,au,!0),A(this,ou,$t.HIGHLIGHT_DEFAULT_COLOR)),A(this,Ni,(t==null?void 0:t._uiManager)||e),A(this,td,o(this,Ni)._eventBus),A(this,ru,(t==null?void 0:t.color)||((i=o(this,Ni))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),o(Tn,ed)||A(Tn,ed,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ft(this,"_keyboardManager",new cd([[["Escape","mac+Escape"],Tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Tn.prototype._moveToPrevious],[["Home","mac+Home"],Tn.prototype._moveToBeginning],[["End","mac+End"],Tn.prototype._moveToEnd]]))}renderButton(){const t=A(this,Ii,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=o(this,Ni)._signal;t.addEventListener("click",E(this,qt,va).bind(this),{signal:e}),t.addEventListener("keydown",E(this,qt,Yy).bind(this),{signal:e});const i=A(this,fo,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=o(this,ru),t.append(i),t}renderMainDropdown(){const t=A(this,Pe,E(this,qt,Xy).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===o(this,Ii)){E(this,qt,va).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,qt,qy).call(this,e,t)}_moveToNext(t){var e,i;if(!o(this,qt,Sr)){E(this,qt,va).call(this,t);return}if(t.target===o(this,Ii)){(e=o(this,Pe).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=o(this,Pe))==null?void 0:e.firstChild)||t.target===o(this,Ii)){o(this,qt,Sr)&&this._hideDropdownFromKeyboard();return}o(this,qt,Sr)||E(this,qt,va).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!o(this,qt,Sr)){E(this,qt,va).call(this,t);return}(e=o(this,Pe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!o(this,qt,Sr)){E(this,qt,va).call(this,t);return}(e=o(this,Pe).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=o(this,Pe))==null||t.classList.add("hidden"),(e=o(this,Vr))==null||e.abort(),A(this,Vr,null)}_hideDropdownFromKeyboard(){var t;if(!o(this,au)){if(!o(this,qt,Sr)){(t=o(this,Jh))==null||t.unselect();return}this.hideDropdown(),o(this,Ii).focus({preventScroll:!0,focusVisible:o(this,Zh)})}}updateColor(t){if(o(this,fo)&&(o(this,fo).style.backgroundColor=t),!o(this,Pe))return;const e=o(this,Ni).highlightColors.values();for(const i of o(this,Pe).children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=o(this,Ii))==null||t.remove(),A(this,Ii,null),A(this,fo,null),(e=o(this,Pe))==null||e.remove(),A(this,Pe,null)}};Ii=new WeakMap,fo=new WeakMap,ru=new WeakMap,Pe=new WeakMap,Zh=new WeakMap,au=new WeakMap,Jh=new WeakMap,td=new WeakMap,Vr=new WeakMap,Ni=new WeakMap,ou=new WeakMap,ed=new WeakMap,qt=new WeakSet,Xy=function(){const t=document.createElement("div"),e=o(this,Ni)._signal;t.addEventListener("contextmenu",$i,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of o(this,Ni).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",r),a.title=i,a.setAttribute("data-l10n-id",o(Tn,ed)[i]);const u=document.createElement("span");a.append(u),u.className="swatch",u.style.backgroundColor=r,a.setAttribute("aria-selected",r===o(this,ru)),a.addEventListener("click",E(this,qt,qy).bind(this,r),{signal:e}),t.append(a)}return t.addEventListener("keydown",E(this,qt,Yy).bind(this),{signal:e}),t},qy=function(t,e){e.stopPropagation(),o(this,td).dispatch("switchannotationeditorparams",{source:this,type:o(this,ou),value:t})},Yy=function(t){Tn._keyboardManager.exec(this,t)},va=function(t){if(o(this,qt,Sr)){this.hideDropdown();return}if(A(this,Zh,t.detail===0),o(this,Vr)||(A(this,Vr,new AbortController),window.addEventListener("pointerdown",E(this,qt,nb).bind(this),{signal:o(this,Ni).combinedSignal(o(this,Vr))})),o(this,Pe)){o(this,Pe).classList.remove("hidden");return}const e=A(this,Pe,E(this,qt,Xy).call(this));o(this,Ii).append(e)},nb=function(t){var e;(e=o(this,Pe))!=null&&e.contains(t.target)||this.hideDropdown()},Sr=function(){return o(this,Pe)&&!o(this,Pe).classList.contains("hidden")},_(Tn,ed,null);let hp=Tn;var lu,nd,Ws,po,uu,Mn,id,sd,go,ui,Wn,Ve,cu,Gs,sn,hu,ci,rd,Tt,Ky,Zf,ib,sb,rb,Qy,wa,pi,dl,ab,Jf,kc,ob,lb,ub,cb,hb;const Ut=class Ut extends he{constructor(e){super({...e,name:"highlightEditor"});_(this,Tt);_(this,lu,null);_(this,nd,0);_(this,Ws);_(this,po,null);_(this,uu,null);_(this,Mn,null);_(this,id,null);_(this,sd,0);_(this,go,null);_(this,ui,null);_(this,Wn,null);_(this,Ve,!1);_(this,cu,null);_(this,Gs);_(this,sn,null);_(this,hu,"");_(this,ci);_(this,rd,"");this.color=e.color||Ut._defaultColor,A(this,ci,e.thickness||Ut._defaultThickness),A(this,Gs,e.opacity||Ut._defaultOpacity),A(this,Ws,e.boxes||null),A(this,rd,e.methodOfCreation||""),A(this,hu,e.text||""),this._isDraggable=!1,e.highlightId>-1?(A(this,Ve,!0),E(this,Tt,Zf).call(this,e),E(this,Tt,wa).call(this)):o(this,Ws)&&(A(this,lu,e.anchorNode),A(this,nd,e.anchorOffset),A(this,id,e.focusNode),A(this,sd,e.focusOffset),E(this,Tt,Ky).call(this),E(this,Tt,wa).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Ut.prototype;return Ft(this,"_keyboardManager",new cd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Ve)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,ci),methodOfCreation:o(this,rd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var r;he.initialize(e,i),Ut._defaultColor||(Ut._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case $t.HIGHLIGHT_DEFAULT_COLOR:Ut._defaultColor=i;break;case $t.HIGHLIGHT_THICKNESS:Ut._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return o(this,cu)}updateParams(e,i){switch(e){case $t.HIGHLIGHT_COLOR:E(this,Tt,ib).call(this,i);break;case $t.HIGHLIGHT_THICKNESS:E(this,Tt,sb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[$t.HIGHLIGHT_DEFAULT_COLOR,Ut._defaultColor],[$t.HIGHLIGHT_THICKNESS,Ut._defaultThickness]]}get propertiesToUpdate(){return[[$t.HIGHLIGHT_COLOR,this.color||Ut._defaultColor],[$t.HIGHLIGHT_THICKNESS,o(this,ci)||Ut._defaultThickness],[$t.HIGHLIGHT_FREE,o(this,Ve)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(A(this,uu,new hp({editor:this})),e.addColorPicker(o(this,uu))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Tt,kc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,E(this,Tt,kc).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,Tt,Qy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Tt,wa).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?E(this,Tt,Qy).call(this):e&&(E(this,Tt,wa).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var a,u,c;const{drawLayer:i}=this.parent;let r;o(this,Ve)?(e=(e-this.rotation+360)%360,r=E(a=Ut,pi,dl).call(a,o(this,ui).box,e)):r=E(u=Ut,pi,dl).call(u,[this.x,this.y,this.width,this.height],e),i.updateProperties(o(this,Wn),{bbox:r,root:{"data-main-rotation":e}}),i.updateProperties(o(this,sn),{bbox:E(c=Ut,pi,dl).call(c,o(this,Mn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();o(this,hu)&&(e.setAttribute("aria-label",o(this,hu)),e.setAttribute("role","mark")),o(this,Ve)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,Tt,ab).bind(this),{signal:this._uiManager._signal});const i=A(this,go,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=o(this,po);const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),op(this,o(this,go),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,sn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(o(this,sn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Tt,Jf).call(this,!0);break;case 1:case 3:E(this,Tt,Jf).call(this,!1);break}}select(){var e;super.select(),o(this,sn)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,sn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),o(this,sn)&&((e=this.parent)==null||e.drawLayer.updateProperties(o(this,sn),{rootClass:{selected:!1}}),o(this,Ve)||E(this,Tt,Jf).call(this,!1))}get _mustFixPosition(){return!o(this,Ve)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(o(this,Wn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(o(this,sn),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:r,x:a,y:u}){const{x:c,y:f,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=e.combinedSignal(v),S=x=>{v.abort(),E(this,pi,cb).call(this,e,x)};window.addEventListener("blur",S,{signal:w}),window.addEventListener("pointerup",S,{signal:w}),window.addEventListener("pointerdown",Qn,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",$i,{signal:w}),r.addEventListener("pointermove",E(this,pi,ub).bind(this,e),{signal:w}),this._freeHighlight=new Gy({x:a,y:u},[c,f,p,m],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,r){var C,k,T,I;let a=null;if(e instanceof O1){const{data:{quadPoints:O,rect:D,rotation:z,id:B,color:j,opacity:K,popupRef:st},parent:{page:{pageNumber:St}}}=e;a=e={annotationType:Pt.HIGHLIGHT,color:Array.from(j),opacity:K,quadPoints:O,boxes:null,pageIndex:St-1,rect:D.slice(0),rotation:z,id:B,deleted:!1,popupRef:st}}else if(e instanceof Tv){const{data:{inkLists:O,rect:D,rotation:z,id:B,color:j,borderStyle:{rawWidth:K},popupRef:st},parent:{page:{pageNumber:St}}}=e;a=e={annotationType:Pt.HIGHLIGHT,color:Array.from(j),thickness:K,inkLists:O,boxes:null,pageIndex:St-1,rect:D.slice(0),rotation:z,id:B,deleted:!1,popupRef:st}}const{color:u,quadPoints:c,inkLists:f,opacity:p}=e,m=await super.deserialize(e,i,r);m.color=pt.makeHexColor(...u),A(m,Gs,p||1),f&&A(m,ci,e.thickness),m.annotationElementId=e.id||null,m._initialData=a;const[v,w]=m.pageDimensions,[S,x]=m.pageTranslation;if(c){const O=A(m,Ws,[]);for(let D=0;D<c.length;D+=8)O.push({x:(c[D]-S)/v,y:1-(c[D+1]-x)/w,width:(c[D+2]-c[D])/v,height:(c[D+1]-c[D+5])/w});E(C=m,Tt,Ky).call(C),E(k=m,Tt,wa).call(k),m.rotate(m.rotation)}else if(f){A(m,Ve,!0);const O=f[0],D={x:O[0]-S,y:w-(O[1]-x)},z=new Gy(D,[0,0,v,w],1,o(m,ci)/2,!0,.001);for(let K=0,st=O.length;K<st;K+=2)D.x=O[K]-S,D.y=w-(O[K+1]-x),z.add(D);const{id:B,clipPathId:j}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);E(T=m,Tt,Zf).call(T,{highlightOutlines:z.getOutlines(),highlightId:B,clipPathId:j}),E(I=m,Tt,wa).call(I)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=he._colorManager.convert(this.color),a={annotationType:Pt.HIGHLIGHT,color:r,opacity:o(this,Gs),thickness:o(this,ci),quadPoints:E(this,Tt,ob).call(this),outlines:E(this,Tt,lb).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,Tt,kc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,Tt,hb).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};lu=new WeakMap,nd=new WeakMap,Ws=new WeakMap,po=new WeakMap,uu=new WeakMap,Mn=new WeakMap,id=new WeakMap,sd=new WeakMap,go=new WeakMap,ui=new WeakMap,Wn=new WeakMap,Ve=new WeakMap,cu=new WeakMap,Gs=new WeakMap,sn=new WeakMap,hu=new WeakMap,ci=new WeakMap,rd=new WeakMap,Tt=new WeakSet,Ky=function(){const e=new Vy(o(this,Ws),.001);A(this,ui,e.getOutlines()),[this.x,this.y,this.width,this.height]=o(this,ui).box;const i=new Vy(o(this,Ws),.0025,.001,this._uiManager.direction==="ltr");A(this,Mn,i.getOutlines());const{lastPoint:r}=o(this,Mn);A(this,cu,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Zf=function({highlightOutlines:e,highlightId:i,clipPathId:r}){var v,w;if(A(this,ui,e),A(this,Mn,e.getNewOutline(o(this,ci)/2+1.5,.0025)),i>=0)A(this,Wn,i),A(this,po,r),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,sn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:o(this,Mn).box,path:{d:o(this,Mn).toSVGPath()}},!0));else if(this.parent){const S=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(o(this,Wn),{bbox:E(v=Ut,pi,dl).call(v,o(this,ui).box,(S-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(o(this,sn),{bbox:E(w=Ut,pi,dl).call(w,o(this,Mn).box,S),path:{d:o(this,Mn).toSVGPath()}})}const[u,c,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=f,this.height=p;break;case 90:{const[S,x]=this.parentDimensions;this.x=c,this.y=1-u,this.width=f*x/S,this.height=p*S/x;break}case 180:this.x=1-u,this.y=1-c,this.width=f,this.height=p;break;case 270:{const[S,x]=this.parentDimensions;this.x=1-c,this.y=u,this.width=f*x/S,this.height=p*S/x;break}}const{lastPoint:m}=o(this,Mn);A(this,cu,[(m[0]-u)/f,(m[1]-c)/p])},ib=function(e){const i=(u,c)=>{var f,p;this.color=u,A(this,Gs,c),(f=this.parent)==null||f.drawLayer.updateProperties(o(this,Wn),{root:{fill:u,"fill-opacity":c}}),(p=o(this,uu))==null||p.updateColor(u)},r=this.color,a=o(this,Gs);this.addCommands({cmd:i.bind(this,e,Ut._defaultOpacity),undo:i.bind(this,r,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},sb=function(e){const i=o(this,ci),r=a=>{A(this,ci,a),E(this,Tt,rb).call(this,a)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:$t.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},rb=function(e){if(!o(this,Ve))return;E(this,Tt,Zf).call(this,{highlightOutlines:o(this,ui).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},Qy=function(){o(this,Wn)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Wn)),A(this,Wn,null),this.parent.drawLayer.remove(o(this,sn)),A(this,sn,null))},wa=function(e=this.parent){o(this,Wn)===null&&({id:hn(this,Wn)._,clipPathId:hn(this,po)._}=e.drawLayer.draw({bbox:o(this,ui).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":o(this,Gs)},rootClass:{highlight:!0,free:o(this,Ve)},path:{d:o(this,ui).toSVGPath()}},!1,!0),A(this,sn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:o(this,Ve)},bbox:o(this,Mn).box,path:{d:o(this,Mn).toSVGPath()}},o(this,Ve))),o(this,go)&&(o(this,go).style.clipPath=o(this,po)))},pi=new WeakSet,dl=function([e,i,r,a],u){switch(u){case 90:return[1-i-a,e,a,r];case 180:return[1-e-r,1-i-a,r,a];case 270:return[i,1-e-r,a,r]}return[e,i,r,a]},ab=function(e){Ut._keyboardManager.exec(this,e)},Jf=function(e){if(!o(this,lu))return;const i=window.getSelection();e?i.setPosition(o(this,lu),o(this,nd)):i.setPosition(o(this,id),o(this,sd))},kc=function(){return o(this,Ve)?this.rotation:0},ob=function(){if(o(this,Ve))return null;const[e,i]=this.pageDimensions,[r,a]=this.pageTranslation,u=o(this,Ws),c=new Float32Array(u.length*8);let f=0;for(const{x:p,y:m,width:v,height:w}of u){const S=p*e+r,x=(1-m)*i+a;c[f]=c[f+4]=S,c[f+1]=c[f+3]=x,c[f+2]=c[f+6]=S+v*e,c[f+5]=c[f+7]=x-w*i,f+=8}return c},lb=function(e){return o(this,ui).serialize(e,E(this,Tt,kc).call(this))},ub=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},cb=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hb=function(e){const{color:i}=this._initialData;return e.color.some((r,a)=>r!==i[a])},_(Ut,pi),wt(Ut,"_defaultColor",null),wt(Ut,"_defaultOpacity",1),wt(Ut,"_defaultThickness",12),wt(Ut,"_type","highlight"),wt(Ut,"_editorType",Pt.HIGHLIGHT),wt(Ut,"_freeHighlightId",-1),wt(Ut,"_freeHighlight",null),wt(Ut,"_freeHighlightClipId","");let dp=Ut;var mo;class YC{constructor(){_(this,mo,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))this.updateProperty(e,i)}updateSVGProperty(t,e){o(this,mo)[t]=e}toSVGProperties(){const t=o(this,mo);return A(this,mo,Object.create(null)),{root:t}}reset(){A(this,mo,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}mo=new WeakMap;var Gn,du,Oe,yo,vo,Wr,Gr,Xr,wo,Ht,Jy,tv,ev,Tc,db,tp,Pc,fl;const ot=class ot extends he{constructor(e){super(e);_(this,Ht);_(this,Gn,null);_(this,du);wt(this,"_drawId",null);A(this,du,e.mustBeCommitted||!1),e.drawOutlines&&(E(this,Ht,Jy).call(this,e),E(this,Ht,Tc).call(this))}static _mergeSVGProperties(e,i){const r=new Set(Object.keys(e));for(const[a,u]of Object.entries(i))r.has(a)?Object.assign(e[a],u):e[a]=u;return e}static getDefaultDrawingOptions(e){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,i),this._currentParent&&(o(ot,Oe).updateProperty(r,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[r,a]of this.typesMap)e.push([r,i[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[r,a]of this.constructor.typesMap)e.push([r,i[a]]);return e}_updateProperty(e,i,r){const a=this._drawingOptions,u=a[i],c=f=>{var m;a.updateProperty(i,f);const p=o(this,Gn).updateProperty(i,f);p&&E(this,Ht,Pc).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,a.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(o(this,Gn).getPathResizingSVGProperties(E(this,Ht,tp).call(this)),{bbox:E(this,Ht,fl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(o(this,Gn).getPathResizedSVGProperties(E(this,Ht,tp).call(this)),{bbox:E(this,Ht,fl).call(this)}))}_onTranslating(e,i){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,Ht,fl).call(this,e,i)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties(o(this,Gn).getPathTranslatedSVGProperties(E(this,Ht,tp).call(this),this.parentDimensions),{bbox:E(this,Ht,fl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,o(this,du)&&(A(this,du,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,Ht,ev).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Ht,Tc).call(this),E(this,Ht,Pc).call(this,o(this,Gn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,Ht,ev).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,Ht,Tc).call(this,e),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ot._mergeSVGProperties({bbox:E(this,Ht,fl).call(this)},o(this,Gn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Ht,Pc).call(this,o(this,Gn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,r,a,u){Qt("Not implemented")}static startDrawing(e,i,r,a){var k;const{target:u,offsetX:c,offsetY:f,pointerId:p,pointerType:m}=a;if(o(ot,Gr)&&o(ot,Gr)!==m)return;const{viewport:{rotation:v}}=e,{width:w,height:S}=u.getBoundingClientRect(),x=A(ot,yo,new AbortController),C=e.combinedSignal(x);if(o(ot,Wr)||A(ot,Wr,p),o(ot,Gr)??A(ot,Gr,m),window.addEventListener("pointerup",T=>{var I;o(ot,Wr)===T.pointerId?this._endDraw(T):(I=o(ot,Xr))==null||I.delete(T.pointerId)},{signal:C}),window.addEventListener("pointercancel",T=>{var I;o(ot,Wr)===T.pointerId?this._currentParent.endDrawingSession():(I=o(ot,Xr))==null||I.delete(T.pointerId)},{signal:C}),window.addEventListener("pointerdown",T=>{o(ot,Gr)===T.pointerType&&((o(ot,Xr)||A(ot,Xr,new Set)).add(T.pointerId),o(ot,Oe).isCancellable()&&(o(ot,Oe).removeLastElement(),o(ot,Oe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",$i,{signal:C}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),u.addEventListener("touchmove",T=>{T.timeStamp===o(ot,wo)&&Qn(T)},{signal:C}),e.toggleDrawing(),(k=i._editorUndoBar)==null||k.hide(),o(ot,Oe)){e.drawLayer.updateProperties(this._currentDrawId,o(ot,Oe).startNew(c,f,w,S,v));return}i.updateUIForDefaultProperties(this),A(ot,Oe,this.createDrawerInstance(c,f,w,S,v)),A(ot,vo,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(o(ot,vo).toSVGProperties(),o(ot,Oe).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(A(ot,wo,-1),!o(ot,Oe))return;const{offsetX:i,offsetY:r,pointerId:a}=e;if(o(ot,Wr)===a){if(((u=o(ot,Xr))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,o(ot,Oe).add(i,r)),A(ot,wo,e.timeStamp),Qn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(ot,Oe,null),A(ot,vo,null),A(ot,Gr,null),A(ot,wo,NaN)),o(ot,yo)&&(o(ot,yo).abort(),A(ot,yo,null),A(ot,Wr,NaN),A(ot,Xr,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e&&i.drawLayer.updateProperties(this._currentDrawId,o(ot,Oe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=o(ot,Oe),a=this._currentDrawId,u=r.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(a,r.setLastElement(u))},undo:()=>{i.drawLayer.updateProperties(a,r.removeLastElement())},mustExec:!1,type:$t.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack($t.DRAW_STEP),!o(ot,Oe).isEmpty()){const{pageDimensions:[r,a],scale:u}=i,c=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:o(ot,Oe).getOutlines(r*u,a*u,u,this._INNER_MARGIN),drawingOptions:o(ot,vo),mustBeCommitted:!e});return this._cleanup(!0),c}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,r,a,u,c){Qt("Not implemented")}static async deserialize(e,i,r){var v,w;const{rawDims:{pageWidth:a,pageHeight:u,pageX:c,pageY:f}}=i.viewport,p=this.deserializeDraw(c,f,a,u,this._INNER_MARGIN,e),m=await super.deserialize(e,i,r);return m.createDrawingOptions(e),E(v=m,Ht,Jy).call(v,{drawOutlines:p}),E(w=m,Ht,Tc).call(w),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[i,r]=this.pageTranslation,[a,u]=this.pageDimensions;return o(this,Gn).serialize([i,r,a,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gn=new WeakMap,du=new WeakMap,Oe=new WeakMap,yo=new WeakMap,vo=new WeakMap,Wr=new WeakMap,Gr=new WeakMap,Xr=new WeakMap,wo=new WeakMap,Ht=new WeakSet,Jy=function({drawOutlines:e,drawId:i,drawingOptions:r}){A(this,Gn,e),this._drawingOptions||(this._drawingOptions=r),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=E(this,Ht,tv).call(this,e,this.parent),E(this,Ht,Pc).call(this,e.box)},tv=function(e,i){const{id:r}=i.drawLayer.draw(ot._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},ev=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Tc=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,Ht,tv).call(this,o(this,Gn),e)}},db=function([e,i,r,a]){const{parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[i,1-e,r*(c/u),a*(u/c)];case 180:return[1-e,1-i,r,a];case 270:return[1-i,e,r*(c/u),a*(u/c)];default:return[e,i,r,a]}},tp=function(){const{x:e,y:i,width:r,height:a,parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[1-i,e,r*(u/c),a*(c/u)];case 180:return[1-e,1-i,r,a];case 270:return[i,1-e,r*(u/c),a*(c/u)];default:return[e,i,r,a]}},Pc=function(e){if([this.x,this.y,this.width,this.height]=E(this,Ht,db).call(this,e),this.div){this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)}this._onResized()},fl=function(){const{x:e,y:i,width:r,height:a,rotation:u,parentRotation:c,parentDimensions:[f,p]}=this;switch((u*4+c)/90){case 1:return[1-i-a,e,a,r];case 2:return[1-e-r,1-i-a,r,a];case 3:return[i,1-e-r,a,r];case 4:return[e,i-r*(f/p),a*(p/f),r*(f/p)];case 5:return[1-i,e,r*(f/p),a*(p/f)];case 6:return[1-e-a*(p/f),1-i,a*(p/f),r*(f/p)];case 7:return[i-r*(f/p),1-e-a*(p/f),r*(f/p),a*(p/f)];case 8:return[e-r,i-a,r,a];case 9:return[1-i,e-r,a,r];case 10:return[1-e,1-i,r,a];case 11:return[i-a,1-e,a,r];case 12:return[e-a*(p/f),i,a*(p/f),r*(f/p)];case 13:return[1-i-r*(f/p),e-a*(p/f),r*(f/p),a*(p/f)];case 14:return[1-e,1-i-r*(f/p),a*(p/f),r*(f/p)];case 15:return[i,1-e,r*(f/p),a*(p/f)];default:return[e,i,r,a]}},wt(ot,"_currentDrawId",-1),wt(ot,"_currentParent",null),_(ot,Oe,null),_(ot,yo,null),_(ot,vo,null),_(ot,Wr,NaN),_(ot,Gr,null),_(ot,Xr,null),_(ot,wo,NaN),wt(ot,"_INNER_MARGIN",3);let Zy=ot;var rs,$e,ze,Ao,fu,pn,We,hi,So,bo,_o,pu,ep;class KC{constructor(t,e,i,r,a,u){_(this,pu);_(this,rs,new Float64Array(6));_(this,$e);_(this,ze);_(this,Ao);_(this,fu);_(this,pn);_(this,We,"");_(this,hi,0);_(this,So,new fp);_(this,bo);_(this,_o);A(this,bo,i),A(this,_o,r),A(this,Ao,a),A(this,fu,u),[t,e]=E(this,pu,ep).call(this,t,e);const c=A(this,$e,[NaN,NaN,NaN,NaN,t,e]);A(this,pn,[t,e]),A(this,ze,[{line:c,points:o(this,pn)}]),o(this,rs).set(c,0)}updateProperty(t,e){t==="stroke-width"&&A(this,fu,e)}isEmpty(){return!o(this,ze)||o(this,ze).length===0}isCancellable(){return o(this,pn).length<=10}add(t,e){[t,e]=E(this,pu,ep).call(this,t,e);const[i,r,a,u]=o(this,rs).subarray(2,6),c=t-a,f=e-u;return Math.hypot(o(this,bo)*c,o(this,_o)*f)<=2?null:(o(this,pn).push(t,e),isNaN(i)?(o(this,rs).set([a,u,t,e],2),o(this,$e).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(o(this,rs)[0])&&o(this,$e).splice(6,6),o(this,rs).set([i,r,a,u,t,e],0),o(this,$e).push(...at.createBezierPoints(i,r,a,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(o(this,pn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,a){A(this,bo,i),A(this,_o,r),A(this,Ao,a),[t,e]=E(this,pu,ep).call(this,t,e);const u=A(this,$e,[NaN,NaN,NaN,NaN,t,e]);A(this,pn,[t,e]);const c=o(this,ze).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),o(this,ze).push({line:u,points:o(this,pn)}),o(this,rs).set(u,0),A(this,hi,0),this.toSVGPath(),null}getLastElement(){return o(this,ze).at(-1)}setLastElement(t){return o(this,ze)?(o(this,ze).push(t),A(this,$e,t.line),A(this,pn,t.points),A(this,hi,0),{path:{d:this.toSVGPath()}}):o(this,So).setLastElement(t)}removeLastElement(){if(!o(this,ze))return o(this,So).removeLastElement();o(this,ze).pop(),A(this,We,"");for(let t=0,e=o(this,ze).length;t<e;t++){const{line:i,points:r}=o(this,ze)[t];A(this,$e,i),A(this,pn,r),A(this,hi,0),this.toSVGPath()}return{path:{d:o(this,We)}}}toSVGPath(){const t=at.svgRound(o(this,$e)[4]),e=at.svgRound(o(this,$e)[5]);if(o(this,pn).length===2)return A(this,We,`${o(this,We)} M ${t} ${e} Z`),o(this,We);if(o(this,pn).length<=6){const r=o(this,We).lastIndexOf("M");A(this,We,`${o(this,We).slice(0,r)} M ${t} ${e}`),A(this,hi,6)}if(o(this,pn).length===4){const r=at.svgRound(o(this,$e)[10]),a=at.svgRound(o(this,$e)[11]);return A(this,We,`${o(this,We)} L ${r} ${a}`),A(this,hi,12),o(this,We)}const i=[];o(this,hi)===0&&(i.push(`M ${t} ${e}`),A(this,hi,6));for(let r=o(this,hi),a=o(this,$e).length;r<a;r+=6){const[u,c,f,p,m,v]=o(this,$e).slice(r,r+6).map(at.svgRound);i.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}return A(this,We,o(this,We)+i.join(" ")),A(this,hi,o(this,$e).length),o(this,We)}getOutlines(t,e,i,r){const a=o(this,ze).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),o(this,So).build(o(this,ze),t,e,i,o(this,Ao),o(this,fu),r),A(this,rs,null),A(this,$e,null),A(this,ze,null),A(this,We,null),o(this,So)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}rs=new WeakMap,$e=new WeakMap,ze=new WeakMap,Ao=new WeakMap,fu=new WeakMap,pn=new WeakMap,We=new WeakMap,hi=new WeakMap,So=new WeakMap,bo=new WeakMap,_o=new WeakMap,pu=new WeakSet,ep=function(t,e){return at._normalizePoint(t,e,o(this,bo),o(this,_o),o(this,Ao))};var gn,ad,od,Xn,as,os,gu,mu,yu,Xe,_s,fb,pb,gb;const Iv=class Iv extends at{constructor(){super(...arguments);_(this,Xe);_(this,gn);_(this,ad,0);_(this,od);_(this,Xn);_(this,as);_(this,os);_(this,gu);_(this,mu);_(this,yu)}build(e,i,r,a,u,c,f){A(this,as,i),A(this,os,r),A(this,gu,a),A(this,mu,u),A(this,yu,c),A(this,od,f??0),A(this,Xn,e),E(this,Xe,pb).call(this)}setLastElement(e){return o(this,Xn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return o(this,Xn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of o(this,Xn)){if(e.push(`M${at.svgRound(i[4])} ${at.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12){e.push(`L${at.svgRound(i[10])} ${at.svgRound(i[11])}`);continue}for(let r=6,a=i.length;r<a;r+=6){const[u,c,f,p,m,v]=i.subarray(r,r+6).map(at.svgRound);e.push(`C${u} ${c} ${f} ${p} ${m} ${v}`)}}return e.join("")}serialize([e,i,r,a],u){const c=[],f=[],[p,m,v,w]=E(this,Xe,fb).call(this);let S,x,C,k,T,I,O,D,z;switch(o(this,mu)){case 0:z=at._rescale,S=e,x=i+a,C=r,k=-a,T=e+p*r,I=i+(1-m-w)*a,O=e+(p+v)*r,D=i+(1-m)*a;break;case 90:z=at._rescaleAndSwap,S=e,x=i,C=r,k=a,T=e+m*r,I=i+p*a,O=e+(m+w)*r,D=i+(p+v)*a;break;case 180:z=at._rescale,S=e+r,x=i,C=-r,k=a,T=e+(1-p-v)*r,I=i+m*a,O=e+(1-p)*r,D=i+(m+w)*a;break;case 270:z=at._rescaleAndSwap,S=e+r,x=i+a,C=-r,k=-a,T=e+(1-m-w)*r,I=i+(1-p-v)*a,O=e+(1-m)*r,D=i+(1-p)*a;break}for(const{line:B,points:j}of o(this,Xn))c.push(z(B,S,x,C,k,u?new Array(B.length):null)),f.push(z(j,S,x,C,k,u?new Array(j.length):null));return{lines:c,points:f,rect:[T,I,O,D]}}static deserialize(e,i,r,a,u,{paths:{lines:c,points:f},rotation:p,thickness:m}){const v=[];let w,S,x,C,k;switch(p){case 0:k=at._rescale,w=-e/r,S=i/a+1,x=1/r,C=-1/a;break;case 90:k=at._rescaleAndSwap,w=-i/a,S=-e/r,x=1/a,C=1/r;break;case 180:k=at._rescale,w=e/r+1,S=-i/a,x=-1/r,C=1/a;break;case 270:k=at._rescaleAndSwap,w=i/a+1,S=e/r+1,x=-1/a,C=-1/r;break}if(!c){c=[];for(const I of f){const O=I.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,I[0],I[1],NaN,NaN,NaN,NaN,I[2],I[3]]));continue}const D=new Float32Array(3*(O-2));c.push(D);let[z,B,j,K]=I.subarray(0,4);D.set([NaN,NaN,NaN,NaN,z,B],0);for(let st=4;st<O;st+=2){const St=I[st],tt=I[st+1];D.set(at.createBezierPoints(z,B,j,K,St,tt),(st-2)*3),[z,B,j,K]=[j,K,St,tt]}}}for(let I=0,O=c.length;I<O;I++)v.push({line:k(c[I].map(D=>D??NaN),w,S,x,C),points:k(f[I].map(D=>D??NaN),w,S,x,C)});const T=new Iv;return T.build(v,r,a,1,p,m,u),T}get box(){return o(this,gn)}updateProperty(e,i){return e==="stroke-width"?E(this,Xe,gb).call(this,i):null}updateParentDimensions([e,i],r){const[a,u]=E(this,Xe,_s).call(this);A(this,as,e),A(this,os,i),A(this,gu,r);const[c,f]=E(this,Xe,_s).call(this),p=c-a,m=f-u,v=o(this,gn);return v[0]-=p,v[1]-=m,v[2]+=2*p,v[3]+=2*m,v}updateRotation(e){return A(this,ad,e),{path:{transform:this.rotationTransform}}}get viewBox(){return o(this,gn).map(at.svgRound).join(" ")}get defaultProperties(){const[e,i]=o(this,gn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=o(this,gn);let r=0,a=0,u=0,c=0,f=0,p=0;switch(o(this,ad)){case 90:a=i/e,u=-e/i,f=e;break;case 180:r=-1,c=-1,f=e,p=i;break;case 270:a=-i/e,u=e/i,p=i;break;default:return""}return`matrix(${r} ${a} ${u} ${c} ${at.svgRound(f)} ${at.svgRound(p)})`}getPathResizingSVGProperties([e,i,r,a]){const[u,c]=E(this,Xe,_s).call(this),[f,p,m,v]=o(this,gn);if(Math.abs(m-u)<=at.PRECISION||Math.abs(v-c)<=at.PRECISION){const k=e+r/2-(f+m/2),T=i+a/2-(p+v/2);return{path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(i)}`,transform:`${this.rotationTransform} translate(${k} ${T})`}}}const w=(r-2*u)/(m-2*u),S=(a-2*c)/(v-2*c),x=m/r,C=v/a;return{path:{"transform-origin":`${at.svgRound(f)} ${at.svgRound(p)}`,transform:`${this.rotationTransform} scale(${x} ${C}) translate(${at.svgRound(u)} ${at.svgRound(c)}) scale(${w} ${S}) translate(${at.svgRound(-u)} ${at.svgRound(-c)})`}}}getPathResizedSVGProperties([e,i,r,a]){const[u,c]=E(this,Xe,_s).call(this),f=o(this,gn),[p,m,v,w]=f;if(f[0]=e,f[1]=i,f[2]=r,f[3]=a,Math.abs(v-u)<=at.PRECISION||Math.abs(w-c)<=at.PRECISION){const T=e+r/2-(p+v/2),I=i+a/2-(m+w/2);for(const{line:O,points:D}of o(this,Xn))at._translate(O,T,I,O),at._translate(D,T,I,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(r-2*u)/(v-2*u),x=(a-2*c)/(w-2*c),C=-S*(p+u)+e+u,k=-x*(m+c)+i+c;if(S!==1||x!==1||C!==0||k!==0)for(const{line:T,points:I}of o(this,Xn))at._rescale(T,C,k,S,x,T),at._rescale(I,C,k,S,x,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(e)} ${at.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],r){const[a,u]=r,c=o(this,gn),f=e-c[0],p=i-c[1];if(o(this,as)===a&&o(this,os)===u)for(const{line:m,points:v}of o(this,Xn))at._translate(m,f,p,m),at._translate(v,f,p,v);else{const m=o(this,as)/a,v=o(this,os)/u;A(this,as,a),A(this,os,u);for(const{line:w,points:S}of o(this,Xn))at._rescale(w,f,p,m,v,w),at._rescale(S,f,p,m,v,S);c[2]*=m,c[3]*=v}return c[0]=e,c[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(e)} ${at.svgRound(i)}`}}}get defaultSVGProperties(){const e=o(this,gn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(e[0])} ${at.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}};gn=new WeakMap,ad=new WeakMap,od=new WeakMap,Xn=new WeakMap,as=new WeakMap,os=new WeakMap,gu=new WeakMap,mu=new WeakMap,yu=new WeakMap,Xe=new WeakSet,_s=function(e=o(this,yu)){const i=o(this,od)+e/2*o(this,gu);return o(this,mu)%180===0?[i/o(this,as),i/o(this,os)]:[i/o(this,os),i/o(this,as)]},fb=function(){const[e,i,r,a]=o(this,gn),[u,c]=E(this,Xe,_s).call(this,0);return[e+u,i+c,r-2*u,a-2*c]},pb=function(){const e=A(this,gn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of o(this,Xn)){if(a.length<=12){for(let f=4,p=a.length;f<p;f+=6){const[m,v]=a.subarray(f,f+2);e[0]=Math.min(e[0],m),e[1]=Math.min(e[1],v),e[2]=Math.max(e[2],m),e[3]=Math.max(e[3],v)}continue}let u=a[4],c=a[5];for(let f=6,p=a.length;f<p;f+=6){const[m,v,w,S,x,C]=a.subarray(f,f+6);pt.bezierBoundingBox(u,c,m,v,w,S,x,C,e),u=x,c=C}}const[i,r]=E(this,Xe,_s).call(this);e[0]=Math.min(1,Math.max(0,e[0]-i)),e[1]=Math.min(1,Math.max(0,e[1]-r)),e[2]=Math.min(1,Math.max(0,e[2]+i)),e[3]=Math.min(1,Math.max(0,e[3]+r)),e[2]-=e[0],e[3]-=e[1]},gb=function(e){const[i,r]=E(this,Xe,_s).call(this);A(this,yu,e);const[a,u]=E(this,Xe,_s).call(this),[c,f]=[a-i,u-r],p=o(this,gn);return p[0]-=c,p[1]-=f,p[2]+=2*c,p[3]+=2*f,p};let fp=Iv;var vu;const Nv=class Nv extends YC{constructor(e){super();_(this,vu);A(this,vu,e),super.updateProperties({fill:"none",stroke:he._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,i){e==="stroke-width"&&(i??(i=this["stroke-width"]),i*=o(this,vu).realScale),super.updateSVGProperty(e,i)}clone(){const e=new Nv(o(this,vu));return e.updateAll(this),e}};vu=new WeakMap;let nv=Nv;var Mp,mb;const gl=class gl extends Zy{constructor(e){super({...e,name:"inkEditor"});_(this,Mp);this._willKeepAspectRatio=!0}static initialize(e,i){he.initialize(e,i),this._defaultDrawingOptions=new nv(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ft(this,"typesMap",new Map([[$t.INK_THICKNESS,"stroke-width"],[$t.INK_COLOR,"stroke"],[$t.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,r,a,u){return new KC(e,i,r,a,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,r,a,u,c){return fp.deserialize(e,i,r,a,u,c)}static async deserialize(e,i,r){let a=null;if(e instanceof Tv){const{data:{inkLists:c,rect:f,rotation:p,id:m,color:v,opacity:w,borderStyle:{rawWidth:S},popupRef:x},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:Pt.INK,color:Array.from(v),thickness:S,opacity:w,paths:{points:c},boxes:null,pageIndex:C-1,rect:f.slice(0),rotation:p,id:m,deleted:!1,popupRef:x}}const u=await super.deserialize(e,i,r);return u.annotationElementId=e.id||null,u._initialData=a,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:r}=this;i.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:r}){this._drawingOptions=gl.getDefaultDrawingOptions({stroke:pt.makeHexColor(...e),"stroke-width":i,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:r,rect:a}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":c,"stroke-width":f}}=this,p={annotationType:Pt.INK,color:he._colorManager.convert(u),opacity:c,thickness:f,paths:{lines:i,points:r},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?p:this.annotationElementId&&!E(this,Mp,mb).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:i,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:i}),null}};Mp=new WeakSet,mb=function(e){const{color:i,thickness:r,opacity:a,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,f)=>c!==i[f])||e.thickness!==r||e.opacity!==a||e.pageIndex!==u},wt(gl,"_type","ink"),wt(gl,"_editorType",Pt.INK),wt(gl,"_defaultDrawingOptions",null);let iv=gl;var ce,Ge,qr,Xs,Yr,wu,ls,us,qn,Au,jt,Rc,Mc,np,rv,ip,av,sp,yb;const Ic=class Ic extends he{constructor(e){super({...e,name:"stampEditor"});_(this,jt);_(this,ce,null);_(this,Ge,null);_(this,qr,null);_(this,Xs,null);_(this,Yr,null);_(this,wu,"");_(this,ls,null);_(this,us,null);_(this,qn,!1);_(this,Au,!1);A(this,Xs,e.bitmapUrl),A(this,Yr,e.bitmapFile)}static initialize(e,i){he.initialize(e,i)}static get supportedTypes(){return Ft(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ft(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,i){i.pasteEditor(Pt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:u,height:c}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:a,width:u,height:c,channels:a.length/(u*c)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;o(this,Ge)&&(A(this,ce,null),this._uiManager.imageManager.deleteId(o(this,Ge)),(e=o(this,ls))==null||e.remove(),A(this,ls,null),o(this,us)&&(clearTimeout(o(this,us)),A(this,us,null))),super.remove()}rebuild(){if(!this.parent){o(this,Ge)&&E(this,jt,np).call(this);return}super.rebuild(),this.div!==null&&(o(this,Ge)&&o(this,ls)===null&&E(this,jt,np).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(o(this,qr)||o(this,ce)||o(this,Xs)||o(this,Yr)||o(this,Ge))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;if(this.width&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),o(this,ce)?E(this,jt,rv).call(this):E(this,jt,np).call(this),this.width&&!this.annotationElementId){const[r,a]=this.parentDimensions;this.setAt(e*r,i*a,this.width*r,this.height*a)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;o(this,us)!==null&&clearTimeout(o(this,us)),A(this,us,setTimeout(()=>{A(this,us,null),E(this,jt,av).call(this)},200))}copyCanvas(e,i,r=!1){var S;e||(e=224);const{width:a,height:u}=o(this,ce),c=new ny;let f=o(this,ce),p=a,m=u,v=null;if(i){if(a>i||u>i){const K=Math.min(i/a,i/u);p=Math.floor(a*K),m=Math.floor(u*K)}v=document.createElement("canvas");const x=v.width=Math.ceil(p*c.sx),C=v.height=Math.ceil(m*c.sy);o(this,qn)||(f=E(this,jt,ip).call(this,x,C));const k=v.getContext("2d");k.filter=this._uiManager.hcmFilter;let T="white",I="#cfcfd8";this._uiManager.hcmFilter!=="none"?I="black":(S=window.matchMedia)!=null&&S.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",I="#42414d");const O=15,D=O*c.sx,z=O*c.sy,B=new OffscreenCanvas(D*2,z*2),j=B.getContext("2d");j.fillStyle=T,j.fillRect(0,0,D*2,z*2),j.fillStyle=I,j.fillRect(0,0,D,z),j.fillRect(D,z,D,z),k.fillStyle=k.createPattern(B,"repeat"),k.fillRect(0,0,x,C),k.drawImage(f,0,0,f.width,f.height,0,0,x,C)}let w=null;if(r){let x,C;if(c.symmetric&&f.width<e&&f.height<e)x=f.width,C=f.height;else if(f=o(this,ce),a>e||u>e){const I=Math.min(e/a,e/u);x=Math.floor(a*I),C=Math.floor(u*I),o(this,qn)||(f=E(this,jt,ip).call(this,x,C))}const T=new OffscreenCanvas(x,C).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,x,C),w={width:x,height:C,data:T.getImageData(0,0,x,C).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return o(this,ls)}static async deserialize(e,i,r){var C;let a=null;if(e instanceof $1){const{data:{rect:k,rotation:T,id:I,structParent:O,popupRef:D},container:z,parent:{page:{pageNumber:B}}}=e,j=z.querySelector("canvas"),K=r.imageManager.getFromCanvas(z.id,j);j.remove();const st=((C=await i._structTree.getAriaAttributes(`${Av}${I}`))==null?void 0:C.get("aria-label"))||"";a=e={annotationType:Pt.STAMP,bitmapId:K.id,bitmap:K.bitmap,pageIndex:B-1,rect:k.slice(0),rotation:T,id:I,deleted:!1,accessibilityData:{decorative:!1,altText:st},isSvg:!1,structParent:O,popupRef:D}}const u=await super.deserialize(e,i,r),{rect:c,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=e;m&&r.imageManager.isValidId(m)?(A(u,Ge,m),f&&A(u,ce,f)):A(u,Xs,p),A(u,qn,v);const[S,x]=u.pageDimensions;return u.width=(c[2]-c[0])/S,u.height=(c[3]-c[1])/x,u.annotationElementId=e.id||null,w&&(u.altTextData=w),u._initialData=a,A(u,Au,!!a),u}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Pt.STAMP,bitmapId:o(this,Ge),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,qn),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=E(this,jt,sp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:a,altText:u}=this.serializeAltText(!1);if(!a&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=E(this,jt,yb).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const c=o(this,qn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(o(this,Ge)))i.stamps.set(o(this,Ge),{area:c,serialized:r}),r.bitmap=E(this,jt,sp).call(this,!1);else if(o(this,qn)){const f=i.stamps.get(o(this,Ge));c>f.area&&(f.area=c,f.serialized.bitmap.close(),f.serialized.bitmap=E(this,jt,sp).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};ce=new WeakMap,Ge=new WeakMap,qr=new WeakMap,Xs=new WeakMap,Yr=new WeakMap,wu=new WeakMap,ls=new WeakMap,us=new WeakMap,qn=new WeakMap,Au=new WeakMap,jt=new WeakSet,Rc=function(e,i=!1){if(!e){this.remove();return}A(this,ce,e.bitmap),i||(A(this,Ge,e.id),A(this,qn,e.isSvg)),e.file&&A(this,wu,e.file.name),E(this,jt,rv).call(this)},Mc=function(){if(A(this,qr,null),this._uiManager.enableWaiting(!1),!!o(this,ls)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ce)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&o(this,ce)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},np=function(){if(o(this,Ge)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,Ge)).then(r=>E(this,jt,Rc).call(this,r,!0)).finally(()=>E(this,jt,Mc).call(this));return}if(o(this,Xs)){const r=o(this,Xs);A(this,Xs,null),this._uiManager.enableWaiting(!0),A(this,qr,this._uiManager.imageManager.getFromUrl(r).then(a=>E(this,jt,Rc).call(this,a)).finally(()=>E(this,jt,Mc).call(this)));return}if(o(this,Yr)){const r=o(this,Yr);A(this,Yr,null),this._uiManager.enableWaiting(!0),A(this,qr,this._uiManager.imageManager.getFromFile(r).then(a=>E(this,jt,Rc).call(this,a)).finally(()=>E(this,jt,Mc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Ic.supportedTypesStr;const i=this._uiManager._signal;A(this,qr,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,jt,Rc).call(this,a)}r()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>E(this,jt,Mc).call(this))),e.click()},rv=function(){var v;const{div:e}=this;let{width:i,height:r}=o(this,ce);const[a,u]=this.pageDimensions,c=.75;if(this.width)i=this.width*a,r=this.height*u;else if(i>c*a||r>c*u){const w=Math.min(c*a/i,c*u/r);i*=w,r*=w}const[f,p]=this.parentDimensions;this.setDims(i*f/a,r*p/u),this._uiManager.enableWaiting(!1);const m=A(this,ls,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),this.width=i/a,this.height=r/u,(v=this._initialOptions)!=null&&v.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,jt,av).call(this),o(this,Au)||(this.parent.addUndoableEditor(this),A(this,Au,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,wu)&&m.setAttribute("aria-label",o(this,wu))},ip=function(e,i){const{width:r,height:a}=o(this,ce);let u=r,c=a,f=o(this,ce);for(;u>2*e||c>2*i;){const p=u,m=c;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*i&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const v=new OffscreenCanvas(u,c);v.getContext("2d").drawImage(f,0,0,p,m,0,0,u,c),f=v.transferToImageBitmap()}return f},av=function(){const[e,i]=this.parentDimensions,{width:r,height:a}=this,u=new ny,c=Math.ceil(r*e*u.sx),f=Math.ceil(a*i*u.sy),p=o(this,ls);if(!p||p.width===c&&p.height===f)return;p.width=c,p.height=f;const m=o(this,qn)?o(this,ce):E(this,jt,ip).call(this,c,f),v=p.getContext("2d");v.filter=this._uiManager.hcmFilter,v.drawImage(m,0,0,m.width,m.height,0,0,c,f)},sp=function(e){if(e){if(o(this,qn)){const a=this._uiManager.imageManager.getSvgUrl(o(this,Ge));if(a)return a}const i=document.createElement("canvas");return{width:i.width,height:i.height}=o(this,ce),i.getContext("2d").drawImage(o(this,ce),0,0),i.toDataURL()}if(o(this,qn)){const[i,r]=this.pageDimensions,a=Math.round(this.width*i*ea.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*ea.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,u);return c.getContext("2d").drawImage(o(this,ce),0,0,o(this,ce).width,o(this,ce).height,0,0,a,u),c.transferToImageBitmap()}return structuredClone(o(this,ce))},yb=function(e){var c;const{pageIndex:i,accessibilityData:{altText:r}}=this._initialData,a=e.pageIndex===i,u=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&u,isSameAltText:u}},wt(Ic,"_type","stamp"),wt(Ic,"_editorType",Pt.STAMP);let sv=Ic;var Eo,Su,cs,Kr,qs,di,Qr,bu,xo,Di,Ys,rn,Ks,ft,Zr,ae,vb,Xi,lv,uv,rp;const _i=class _i{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:a,annotationLayer:u,drawLayer:c,textLayer:f,viewport:p,l10n:m}){_(this,ae);_(this,Eo);_(this,Su,!1);_(this,cs,null);_(this,Kr,null);_(this,qs,null);_(this,di,new Map);_(this,Qr,!1);_(this,bu,!1);_(this,xo,!1);_(this,Di,null);_(this,Ys,null);_(this,rn,null);_(this,Ks,null);_(this,ft);const v=[...o(_i,Zr).values()];if(!_i._initialized){_i._initialized=!0;for(const w of v)w.initialize(m,t)}t.registerEditorTypes(v),A(this,ft,t),this.pageIndex=e,this.div=i,A(this,Eo,a),A(this,cs,u),this.viewport=p,A(this,rn,f),this.drawLayer=c,this._structTree=r,o(this,ft).addLayer(this)}get isEmpty(){return o(this,di).size===0}get isInvisible(){return this.isEmpty&&o(this,ft).getMode()===Pt.NONE}updateToolbar(t){o(this,ft).updateToolbar(t)}updateMode(t=o(this,ft).getMode()){switch(E(this,ae,rp).call(this),t){case Pt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of o(_i,Zr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=o(this,rn))==null?void 0:e.div)}setEditingState(t){o(this,ft).setEditingState(t)}addCommands(t){o(this,ft).addCommands(t)}cleanUndoStack(t){o(this,ft).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=o(this,cs))==null||e.div.classList.toggle("disabled",!t)}async enable(){A(this,xo,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const i of o(this,di).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(o(this,ft).removeChangedExistingAnnotation(i),t.add(i.annotationElementId));if(!o(this,cs)){A(this,xo,!1);return}const e=o(this,cs).getEditableAnnotations();for(const i of e){if(i.hide(),o(this,ft).isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}A(this,xo,!1)}disable(){var r;A(this,bu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const a of o(this,di).values())if(a.disableEditing(),!!a.annotationElementId){if(a.serialize()!==null){t.set(a.annotationElementId,a);continue}else e.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}if(o(this,cs)){const a=o(this,cs).getEditableAnnotations();for(const u of a){const{id:c}=u.data;if(o(this,ft).isDeletedAnnotationElement(c))continue;let f=e.get(c);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(c),f&&(o(this,ft).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}E(this,ae,rp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of o(_i,Zr).values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,bu,!1)}getEditableAnnotation(t){var e;return((e=o(this,cs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){o(this,ft).getActive()!==t&&o(this,ft).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=o(this,rn))!=null&&t.div&&!o(this,Ks)){A(this,Ks,new AbortController);const e=o(this,ft).combinedSignal(o(this,Ks));o(this,rn).div.addEventListener("pointerdown",E(this,ae,vb).bind(this),{signal:e}),o(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=o(this,rn))!=null&&t.div&&o(this,Ks)&&(o(this,Ks).abort(),A(this,Ks,null),o(this,rn).div.classList.remove("highlighting"))}enableClick(){if(o(this,Kr))return;A(this,Kr,new AbortController);const t=o(this,ft).combinedSignal(o(this,Kr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=o(this,Kr))==null||t.abort(),A(this,Kr,null)}attach(t){o(this,di).set(t.id,t);const{annotationElementId:e}=t;e&&o(this,ft).isDeletedAnnotationElement(e)&&o(this,ft).removeDeletedAnnotationElement(t)}detach(t){var e;o(this,di).delete(t.id),(e=o(this,Eo))==null||e.removePointerInTextLayer(t.contentDiv),!o(this,bu)&&t.annotationElementId&&o(this,ft).addDeletedAnnotationElement(t)}remove(t){this.detach(t),o(this,ft).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(o(this,ft).addDeletedAnnotationElement(t.annotationElementId),he.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),o(this,ft).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!o(this,xo)),o(this,ft).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!o(this,qs)&&(t._focusEventsAllowed=!1,A(this,qs,setTimeout(()=>{A(this,qs,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:o(this,ft)._signal}),e.focus())},0))),t._structTreeParentId=(i=o(this,Eo))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return o(this,ft).getId()}combinedSignal(t){return o(this,ft).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=o(this,ae,Xi))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){o(this,ft).updateToolbar(t),o(this,ft).updateMode(t);const{offsetX:i,offsetY:r}=E(this,ae,uv).call(this),a=this.getNextId(),u=E(this,ae,lv).call(this,{parent:this,id:a,x:i,y:r,uiManager:o(this,ft),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=o(_i,Zr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,o(this,ft)))||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),a=E(this,ae,lv).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:o(this,ft),isCentered:e,...i});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(E(this,ae,uv).call(this),!0)}setSelected(t){o(this,ft).setSelected(t)}toggleSelected(t){o(this,ft).toggleSelected(t)}unselect(t){o(this,ft).unselect(t)}pointerup(t){var i;const{isMac:e}=yn.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&o(this,Qr)&&(A(this,Qr,!1),!((i=o(this,ae,Xi))!=null&&i.isDrawer&&o(this,ae,Xi).supportMultipleDrawings))){if(!o(this,Su)){A(this,Su,!0);return}if(o(this,ft).getMode()===Pt.STAMP){o(this,ft).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){var r;if(o(this,ft).getMode()===Pt.HIGHLIGHT&&this.enableTextSelection(),o(this,Qr)){A(this,Qr,!1);return}const{isMac:e}=yn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Qr,!0),(r=o(this,ae,Xi))!=null&&r.isDrawer){this.startDrawingSession(t);return}const i=o(this,ft).getActive();A(this,Su,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus(),o(this,Di)){o(this,ae,Xi).startDrawing(this,o(this,ft),!1,t);return}o(this,ft).setCurrentDrawingSession(this),A(this,Di,new AbortController);const e=o(this,ft).combinedSignal(o(this,Di));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(A(this,Ys,null),this.commitOrRemove())},{signal:e}),o(this,ae,Xi).startDrawing(this,o(this,ft),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,Ys,e);return}o(this,Ys)&&setTimeout(()=>{var e;(e=o(this,Ys))==null||e.focus(),A(this,Ys,null)},0)}endDrawingSession(t=!1){return o(this,Di)?(o(this,ft).setCurrentDrawingSession(null),o(this,Di).abort(),A(this,Di,null),A(this,Ys,null),o(this,ae,Xi).endDrawing(t)):null}findNewParent(t,e,i){const r=o(this,ft).findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return o(this,Di)?(this.endDrawingSession(),!0):!1}onScaleChanging(){o(this,Di)&&o(this,ae,Xi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=o(this,ft).getActive())==null?void 0:t.parent)===this&&(o(this,ft).commitOrRemove(),o(this,ft).setActiveEditor(null)),o(this,qs)&&(clearTimeout(o(this,qs)),A(this,qs,null));for(const i of o(this,di).values())(e=o(this,Eo))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,o(this,di).clear(),o(this,ft).removeLayer(this)}render({viewport:t}){this.viewport=t,To(this.div,t);for(const e of o(this,ft).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){o(this,ft).commitOrRemove(),E(this,ae,rp).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,To(this.div,{rotation:i}),e!==i)for(const r of o(this,di).values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return o(this,ft).viewParameters.realScale}};Eo=new WeakMap,Su=new WeakMap,cs=new WeakMap,Kr=new WeakMap,qs=new WeakMap,di=new WeakMap,Qr=new WeakMap,bu=new WeakMap,xo=new WeakMap,Di=new WeakMap,Ys=new WeakMap,rn=new WeakMap,Ks=new WeakMap,ft=new WeakMap,Zr=new WeakMap,ae=new WeakSet,vb=function(t){o(this,ft).unselectAll();const{target:e}=t;if(e===o(this,rn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&o(this,rn).div.contains(e)){const{isMac:i}=yn.platform;if(t.button!==0||t.ctrlKey&&i)return;o(this,ft).showAllEditors("highlight",!0,!0),o(this,rn).div.classList.add("free"),this.toggleDrawing(),dp.startHighlighting(this,o(this,ft).direction==="ltr",{target:o(this,rn).div,x:t.x,y:t.y}),o(this,rn).div.addEventListener("pointerup",()=>{o(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:o(this,ft)._signal}),t.preventDefault()}},Xi=function(){return o(_i,Zr).get(o(this,ft).getMode())},lv=function(t){const e=o(this,ae,Xi);return e?new e.prototype.constructor(t):null},uv=function(){const{x:t,y:e,width:i,height:r}=this.div.getBoundingClientRect(),a=Math.max(0,t),u=Math.max(0,e),c=Math.min(window.innerWidth,t+i),f=Math.min(window.innerHeight,e+r),p=(a+c)/2-t,m=(u+f)/2-e,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},rp=function(){for(const t of o(this,di).values())t.isEmpty()&&t.remove()},wt(_i,"_initialized",!1),_(_i,Zr,new Map([jy,iv,sv,dp].map(t=>[t._editorType,t])));let ov=_i;var Fi,ld,mn,Co,Lp,wb,hs,hv,Ab,dv;const tn=class tn{constructor({pageIndex:t}){_(this,hs);_(this,Fi,null);_(this,ld,0);_(this,mn,new Map);_(this,Co,new Map);this.pageIndex=t}setParent(t){if(!o(this,Fi)){A(this,Fi,t);return}if(o(this,Fi)!==t){if(o(this,mn).size>0)for(const e of o(this,mn).values())e.remove(),t.append(e);A(this,Fi,t)}}static get _svgFactory(){return Ft(this,"_svgFactory",new kv)}draw(t,e=!1,i=!1){const r=hn(this,ld)._++,a=E(this,hs,hv).call(this),u=tn._svgFactory.createElement("defs");a.append(u);const c=tn._svgFactory.createElement("path");u.append(c);const f=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",f),c.setAttribute("vector-effect","non-scaling-stroke"),e&&o(this,Co).set(r,c);const p=i?E(this,hs,Ab).call(this,u,f):null,m=tn._svgFactory.createElement("use");return a.append(m),m.setAttribute("href",`#${f}`),this.updateProperties(a,t),o(this,mn).set(r,a),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=hn(this,ld)._++,r=E(this,hs,hv).call(this),a=tn._svgFactory.createElement("defs");r.append(a);const u=tn._svgFactory.createElement("path");a.append(u);const c=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const v=tn._svgFactory.createElement("mask");a.append(v),f=`mask_p${this.pageIndex}_${i}`,v.setAttribute("id",f),v.setAttribute("maskUnits","objectBoundingBox");const w=tn._svgFactory.createElement("rect");v.append(w),w.setAttribute("width","1"),w.setAttribute("height","1"),w.setAttribute("fill","white");const S=tn._svgFactory.createElement("use");v.append(S),S.setAttribute("href",`#${c}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const p=tn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),f&&p.setAttribute("mask",`url(#${f})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),o(this,mn).set(i,r),i}finalizeDraw(t,e){o(this,Co).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:i,bbox:r,rootClass:a,path:u}=e,c=typeof t=="number"?o(this,mn).get(t):t;if(c){if(i&&E(this,hs,dv).call(this,c,i),r&&E(f=tn,Lp,wb).call(f,c,r),a){const{classList:p}=c;for(const[m,v]of Object.entries(a))p.toggle(m,v)}if(u){const m=c.firstChild.firstChild;E(this,hs,dv).call(this,m,u)}}}updateParent(t,e){if(e===this)return;const i=o(this,mn).get(t);i&&(o(e,Fi).append(i),o(this,mn).delete(t),o(e,mn).set(t,i))}remove(t){o(this,Co).delete(t),o(this,Fi)!==null&&(o(this,mn).get(t).remove(),o(this,mn).delete(t))}destroy(){A(this,Fi,null);for(const t of o(this,mn).values())t.remove();o(this,mn).clear(),o(this,Co).clear()}};Fi=new WeakMap,ld=new WeakMap,mn=new WeakMap,Co=new WeakMap,Lp=new WeakSet,wb=function(t,[e,i,r,a]){const{style:u}=t;u.top=`${100*i}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*a}%`},hs=new WeakSet,hv=function(){const t=tn._svgFactory.create(1,1,!0);return o(this,Fi).append(t),t.setAttribute("aria-hidden",!0),t},Ab=function(t,e){const i=tn._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const a=tn._svgFactory.createElement("use");return i.append(a),a.setAttribute("href",`#${e}`),a.classList.add("clip"),r},dv=function(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)},_(tn,Lp);let cv=tn;globalThis.pdfjsTestingUtils={HighlightOutliner:Vy};xt.AbortException;xt.AnnotationEditorLayer;xt.AnnotationEditorParamsType;xt.AnnotationEditorType;xt.AnnotationEditorUIManager;xt.AnnotationLayer;xt.AnnotationMode;xt.ColorPicker;xt.DOMSVGFactory;xt.DrawLayer;xt.FeatureTest;var QC=xt.GlobalWorkerOptions;xt.ImageKind;xt.InvalidPDFException;xt.MissingPDFException;xt.OPS;xt.OutputScale;xt.PDFDataRangeTransport;xt.PDFDateString;xt.PDFWorker;xt.PasswordResponses;xt.PermissionFlag;xt.PixelsPerInch;xt.RenderingCancelledException;xt.TextLayer;xt.TouchManager;xt.UnexpectedResponseException;xt.Util;xt.VerbosityLevel;xt.XfaLayer;xt.build;xt.createValidAbsoluteUrl;xt.fetchData;xt.getDocument;xt.getFilenameFromUrl;xt.getPdfFilenameFromUrl;xt.getXfaPageViewport;xt.isDataScheme;xt.isPdfFile;xt.noContextMenu;xt.normalizeUnicode;xt.setLayerDimensions;xt.shadow;xt.stopEvent;xt.version;const ZC="_showData_gi814_1",JC="_imageFile_gi814_11",tk="_invoiceInfo_gi814_21",ek="_invoiceInfoParagraph_gi814_33",nk="_newDataParagraph_gi814_45",ik="_mainDiv_gi814_57",Se={showData:ZC,imageFile:JC,invoiceInfo:tk,invoiceInfoParagraph:ek,newDataParagraph:nk,mainDiv:ik};QC.workerSrc="../pdf.worker.mjs";const gc=["nazwę kontrachenta","numer faktury","kwotę faktury","termin płatności","datę faktury"],sk=()=>{const[d,t]=Vt.useState(null),[e,i]=Vt.useState(null),[r,a]=Vt.useState(0),[u,c]=Vt.useState(null),[f,p]=Vt.useState([]),[m,v]=Vt.useState(null),[w,S]=Vt.useState(null),[x,C]=Vt.useState(gc[0]),[k,T]=Vt.useState(!1),[I,O]=Vt.useState(!1),[D,z]=Vt.useState(),[B,j]=Vt.useState(""),K=tt=>{if(tt.target.files){const ct=Array.from(tt.target.files);t({files:ct}),T(!0)}},st=tt=>{const ct=tt.target,Et=tt.currentTarget.dataset.key?parseInt(tt.currentTarget.dataset.key):0;i(ct.textContent),a(Et),O(!0)},St=Vt.useCallback(async tt=>{try{console.log("wysyłam plik");const ct=await fetch("https://organizerfaktur.pl/newCompanyData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(tt)});if(console.log(tt),ct.ok){const Et=await ct.json();return console.log("Plik wysłany pomyślnie:",Et),Et.files}else console.error("Błąd podczas wysyłania:",ct.statusText)}catch(ct){console.error("Wystąpił błąd:",ct)}},[]);return Vt.useEffect(()=>{if(e&&w&&I&&f.length<5){let tt=!1;O(!1);const ct=f;ct.length===0&&j(w[r+1]),console.log(B);for(let Et=0;Et<w.length;Et++){if(e===w[Et]){const Ct=[w[r-1],w[r]];ct.push(Ct),p(ct);const Lt=ct.length;console.log(ct),console.log(gc[Lt]);const Y=yt.jsxs(yt.Fragment,{children:[yt.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),yt.jsxs("p",{children:[" zaznacz ",gc[Lt]]})]});if(z(Y),ct.length===gc.length){const G={[B]:{name:ct[3]??[],paymentText:ct[3]??[],valueText:ct[2]??[],invoiceNo:ct[1]??[],invoiceDate:ct[4]??[],fullName:B}};console.log(G),C(gc[0]),console.log(ct),tt=!0;const U=yt.jsxs(yt.Fragment,{children:[yt.jsx("p",{children:" Wszystkie dane zostały zapisane. Kliknij aby wysłać"}),yt.jsx("button",{onClick:()=>{console.log("Przekazywane dane:",G),St(G)},children:"Wyślij dane do weryfikacji"})]});z(U)}break}if(tt)break}}},[e,w,St,r,f,I,B]),Vt.useEffect(()=>{if(d&&k===!0){T(!1);const tt=[];let ct=[];const Et=async()=>{const Lt=new FormData;Array.from(d.files).forEach(G=>{Lt.append("files",G,G.name),console.log(G),tt.push(URL.createObjectURL(G))}),ct=tt.map((G,U)=>{const it=d.files[U];return it.type==="image/jpeg"?yt.jsx("img",{width:"1200px",src:G,alt:"uploaded"},U):it.type==="application/pdf"?yt.jsx("embed",{src:G,type:"application/pdf",className:Se.imageFile,height:"700px"},U):yt.jsx("div",{children:"wrong file"})}),z(yt.jsx("div",{})),c(ct);try{console.log("wysyłam");const G=await fetch("https://organizerfaktur.pl/ask",{method:"POST",body:Lt});if(G.ok){const U=await G.json();return console.log("Plik wysłany pomyślnie:",U.files),U.files}else console.error("Błąd podczas wysyłania:",G.statusText)}catch(G){console.error("Wystąpił błąd:",G)}};(async()=>{const Lt=await Et(),Y=Lt[0].data.name;if(Lt&&Y){const G=Lt.map((U,it)=>yt.jsxs("div",{children:[yt.jsxs("div",{className:Se.invoiceInfo,children:[yt.jsx("p",{className:Se.invoiceInfoParagraph,children:"Nazwa Firmy:"}),yt.jsx("p",{className:Se.invoiceInfoParagraph,children:U.data.name})]}),yt.jsxs("div",{className:Se.invoiceInfo,children:[yt.jsx("p",{className:Se.invoiceInfoParagraph,children:"Numer faktury:"}),yt.jsx("p",{className:Se.invoiceInfoParagraph,children:U.data.invoiceNo})]}),yt.jsxs("div",{className:Se.invoiceInfo,children:[yt.jsx("p",{className:Se.invoiceInfoParagraph,children:"Data faktury:"}),yt.jsx("p",{className:Se.invoiceInfoParagraph,children:U.data.invoiceDate})]}),yt.jsxs("div",{className:Se.invoiceInfo,children:[yt.jsx("p",{className:Se.invoiceInfoParagraph,children:"Kwota:"}),yt.jsx("p",{className:Se.invoiceInfoParagraph,children:U.data.value})]}),yt.jsxs("div",{className:Se.invoiceInfo,children:[yt.jsx("p",{className:Se.invoiceInfoParagraph,children:"Termin płatności:"}),yt.jsx("p",{className:Se.invoiceInfoParagraph,children:U.data.paymentDate})]})]},it));v(G)}else{let G=Lt&&Lt[0].data.foundText;console.log(G),G=G.filter(L=>L!=""),console.log(G),S(G);const U=yt.jsxs(yt.Fragment,{children:[yt.jsx("p",{children:" nie udało sie odczytac danych z pliku"}),yt.jsxs("p",{children:[" zaznacz ",x]})]}),it=G.map((L,H)=>yt.jsx("button",{"data-key":H-1,onClick:st,children:L})),Q=yt.jsx("div",{className:Se.invoiceInfo,children:yt.jsx("div",{className:Se.newDataParagraph,children:it})});z(U),v(Q)}})()}},[d,v,x,k]),yt.jsxs("div",{className:Se.mainDiv,children:[yt.jsx("h1",{children:"Extract Text from PDF or Image"}),yt.jsx("input",{type:"file",multiple:!0,accept:".pdf,image/*",onChange:K}),m&&yt.jsxs("div",{className:Se.showData,children:[yt.jsxs("div",{children:[yt.jsx("h2",{children:"Found Invoice Data:"}),D,m]}),yt.jsx("div",{children:u})]})]})};CE.createRoot(document.getElementById("root")).render(yt.jsx(Vt.StrictMode,{children:yt.jsx(bS,{children:yt.jsx(sk,{})})}));
